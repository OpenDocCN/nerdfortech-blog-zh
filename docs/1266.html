<html>
<head>
<title>Do MMA fighters with longer arms win more fights? (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">手臂越长的MMA拳手是否会赢得更多的打斗？(第二部分)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/do-mma-fighters-with-longer-arms-win-more-fights-part-2-d08dbf13e5ca?source=collection_archive---------21-----------------------#2021-03-11">https://medium.com/nerd-for-tech/do-mma-fighters-with-longer-arms-win-more-fights-part-2-d08dbf13e5ca?source=collection_archive---------21-----------------------#2021-03-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="8993" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">正在清除R中的网页抓取数据</h1><p id="2357" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这个三部曲的第一部分中，我向您展示了如何从UFCstats.com抓取R中的MMA数据。我们最终得到了一个. csv格式的MMA拳手原始数据文件。这篇文章将告诉你如何清理它进行数据分析。</p><p id="8394" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">清理数据是数据科学家日常工作的很大一部分，所以最好练习并寻找有效的方法。如果你能想到任何改进我的代码的方法，我很乐意听听！</p><h2 id="dde4" class="kh ig hi bd ih ki kj kk il kl km kn ip jo ko kp it js kq kr ix jw ks kt jb ku bi translated">我们开始吧</h2><p id="91da" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">使用下面的代码读入数据。请注意，您的文件将以刮擦日期命名。我们将数据复制到一个新的数据帧<em class="kv"> data_clean </em> <strong class="jf hj">。</strong>我们这样做是为了当我们在清理过程中搞砸了一些事情(比如不小心删除了一列)时，我们总是有原始数据可以参考。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="115a" class="kh ig hi lb b fi lf lg l lh li">library('magrittr')<br/>library('dplyr')<br/>library('readr')<br/>library('stringr')<br/>library('ggplot2')</span><span id="ca0a" class="kh ig hi lb b fi lj lg l lh li">data_raw &lt;- read.csv(“UFC_data_raw_DATE_SCRAPED.csv”)<br/>data_clean &lt;- data_raw</span></pre><p id="c0d8" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">软件包:我们需要magrittr用于管道，dplyr用于数据操作，readr用于解析函数，stringr用于操作字符串，ggplot2用于制作漂亮的图形。</p><h2 id="85bc" class="kh ig hi bd ih ki kj kk il kl km kn ip jo ko kp it js kq kr ix jw ks kt jb ku bi translated">看数据</h2><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="f197" class="kh ig hi lb b fi lf lg l lh li">data_clean %&gt;% head(20)<br/>data_clean %&gt;% str()</span></pre><p id="e7ef" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj"> head() </strong>显示前20行(如果没有提供数字，则给出6行)。您的具体数据将根据您的刮除时间而有所不同，因为您可能与我不是在同一天刮除的。str() 告诉我我的数据有3598行12列。每排是一架战斗机，所以我们有3598架战斗机。</p><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es lk"><img src="../Images/ce4002f9c950c66a1bd0965bf68ad846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*WMJqfShv4EzUS3x6gQqfLg.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">您的数据应该看起来有点像这样。我用的是黑色背景的R色屏幕。</figcaption></figure><p id="49a1" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们可以进行一些观察，并勾画出一个粗略的数据清理计划:</p><ul class=""><li id="b4c9" class="ls lt hi jf b jg kc jk kd jo lu js lv jw lw ka lx ly lz ma bi translated">第一列称为<em class="kv"> X </em>，似乎只包含行号。我们可能会摆脱它。</li><li id="47a1" class="ls lt hi jf b jg mb jk mc jo md js me jw mf ka lx ly lz ma bi translated"><em class="kv"> Ht </em>。以及<em class="kv"> Wt </em>。显然是身高和体重。它们被作为“chr”字符读入，这不是我们想要的。身高体重都是数字！</li><li id="1b20" class="ls lt hi jf b jg mb jk mc jo md js me jw mf ka lx ly lz ma bi translated">更惨:<em class="kv"> Ht </em>。似乎以英尺和英寸为单位，两者都在<strong class="jf hj">相同的</strong>栏中编码。有时数据不是以易于分析的方式呈现的。我们将把这两者都转换成仅用英寸表示的高度。</li><li id="77c9" class="ls lt hi jf b jg mb jk mc jo md js me jw mf ka lx ly lz ma bi translated">Reach (格斗俚语，指臂展)也是一个角色，一些拳手缺少它。我们记下检查我们有多少，因为这是我们项目中的一个关键变量。</li><li id="b343" class="ls lt hi jf b jg mb jk mc jo md js me jw mf ka lx ly lz ma bi translated">对于一个拳手的<em class="kv">姿态</em>，<strong class="jf hj">头()</strong>显示的是‘正统’、‘左撇子’、‘开关’，虽然可能还有其他。</li></ul><h1 id="62b9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">开始清洗</h1><p id="58fa" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">首先可以去掉第一列<em class="kv"> X </em>和<em class="kv">带</em>列。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="78de" class="kh ig hi lb b fi lf lg l lh li">data_clean %&lt;&gt;% select(-X,-Belt)</span></pre><p id="1332" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这种翻译为“选择变量是<strong class="jf hj">不是</strong> X和<strong class="jf hj">不是</strong>带”。这比写出我们想要保留的所有列更不直观，但是这样做将花费时间来写出它们，并且冒着人为错误的风险(例如，我忘记写出所有的列名)。使用双面管道<strong class="jf hj">%&lt;%&gt;%</strong>用新版本覆盖变量。</p><p id="fb18" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">然后，我们重命名列，使之更容易操作，并提供更多信息。您应该始终考虑您得到的列名对您和任何可能阅读您的代码的人是否有意义。我盯着这些数据看了几个小时，所以我知道身高是以英寸为单位的，但一位同事可能不知道，所以为了他们的缘故，我把身高也以英寸为单位。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="6612" class="kh ig hi lb b fi lf lg l lh li">colnames(data_clean) &lt;- c(‘first_name’, ’last_name’, ’nickname’, ’height_inches’, ’weight_lb’, ’armspan_inches’, ’stance’, ’wins’, ’losses’, ’draws’)</span></pre><h2 id="ade1" class="kh ig hi bd ih ki kj kk il kl km kn ip jo ko kp it js kq kr ix jw ks kt jb ku bi translated">清洁臂展</h2><p id="da36" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们从armspan开始，我们用<strong class="jf hj"> parse_number </strong>()来清理它。然后我们制作一个直方图，这将让我们对分布有一个感觉，以及是否可能有任何奇怪的值(例如，如果丢失的数据被输入为9999，这种情况我遇到过很多次)。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="f8a8" class="kh ig hi lb b fi lf lg l lh li">data_clean$armspan_inches %&lt;&gt;% parse_number()</span><span id="f078" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% <br/>ggplot(aes(x = armspan_inches))+<br/>geom_histogram(fill = 'navy', binwidth = 2)+<br/>xlab('Fighter armspan (inches)')</span></pre><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es mg"><img src="../Images/9ddce5de0bc128299afaf35aadbedb21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*zIKB9f8XrkLfplAPOGV6Kw.png"/></div></figure><p id="cbf2" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">看起来不错，尽管<strong class="jf hj"> parse_number() </strong>未能解析3598个跨距中的1915个，因为它们是NAs！看起来我们没有想象中的那么多数据，但是超过1000个仍然是好数据。</p><h2 id="b779" class="kh ig hi bd ih ki kj kk il kl km kn ip jo ko kp it js kq kr ix jw ks kt jb ku bi translated">清洁高度</h2><p id="9807" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">下一个高度，这有点困难，因为它需要将包含英尺和英寸的单个字符变量转换为只包含英寸的单个列。我们可以把它分解成1列英尺和1列英寸，然后把它们组合起来。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="f30a" class="kh ig hi lb b fi lf lg l lh li">data_clean$height_inches %&gt;% <br/>str_split(‘ ‘, simplify = T) %&gt;% <br/>data.frame() %&gt;% <br/>rename(feet = X1, inches = X2) -&gt; data_height</span><span id="2d54" class="kh ig hi lb b fi lj lg l lh li">data_height$feet %&lt;&gt;% parse_number() <br/>data_height$inches %&lt;&gt;% parse_number() </span><span id="cb65" class="kh ig hi lb b fi lj lg l lh li">data_clean$height_inches &lt;- (data_height$feet*12) + data_height$inches</span><span id="6c90" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% ggplot(aes(x = height_inches))+geom_histogram(fill = 'navy')+ xlab('Fighter height (inches)') </span></pre><p id="da97" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们使用<strong class="jf hj"> str_split </strong>来拆分字符串，顾名思义。从高度来看，它有以下图案:“x' y”。我们希望在数字之间的空间上分割它，这就是为什么<strong class="jf hj"> str_split </strong>()的第一个参数是“”。注意这里有一个空格！<strong class="jf hj"> simplify </strong> = T表示将所有数字拆分成新列，因此，如果它将“5' 7\ "”拆分成“5 '”和“7\ "”，那么它将为每个数字指定自己的列。</p><p id="f267" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">然后，我们将这些新列保存为一个单独的数据框，将这些列重命名为英尺和英寸，并将其命名为<em class="kv"> data_height </em> <strong class="jf hj">。</strong>然后我们在两列上使用<strong class="jf hj"> Parse_number() </strong>将它们转换成数字。然后我们返回到我们的主数据帧<em class="kv"> (data_clean) </em>并将<em class="kv">height _ inches</em><strong class="jf hj"/>列重新定义为来自<em class="kv"> data_height </em>的<strong class="jf hj"> feet </strong>列，乘以12得到inches，+ the <em class="kv"> inches </em>列。我们制作一个直方图来检查我们做了什么:</p><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es mg"><img src="../Images/18aedee17290c0eab582bb0c2c8357d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*NOqNwU006vgpUEUjAtl7jw.png"/></div></figure><h2 id="cd94" class="kh ig hi bd ih ki kj kk il kl km kn ip jo ko kp it js kq kr ix jw ks kt jb ku bi translated">清洗重量:</h2><p id="ce92" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这之后，清洗重量是在公园散步！</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="12f6" class="kh ig hi lb b fi lf lg l lh li">data_clean$weight_lb %&lt;&gt;% <br/>parse_number()</span><span id="ec15" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% <br/>ggplot(aes(x = weight_lb))+<br/>geom_histogram(fill = 'navy')+ <br/>xlab('Fighter weight (lbs)')</span></pre><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es mg"><img src="../Images/dd34255f293cabbd4456a47e15198829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*0txXXw2qAuhHzyBtHoTJAg.png"/></div></figure><p id="d755" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">嗯……这里发生了什么事？似乎只有极少数战斗机的重量接近800磅。我们来调查一下！</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="3c10" class="kh ig hi lb b fi lf lg l lh li">data_clean$weight_lb %&gt;% <br/>table(useNA = ‘always’)</span></pre><p id="53c9" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们制作一个表，并告诉它包括NAs。从这里我们可以看到有一架战斗机重达770磅？！让我们通过过滤所有体重等于770的战士来将他们从数据集中取出:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="c2dd" class="kh ig hi lb b fi lf lg l lh li">data_clean %&gt;% <br/>filter(weight_lb==770)</span></pre><p id="0643" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们得到的名字是“伊曼纽尔·亚伯勒”。我谷歌了他，然后:</p><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es mh"><img src="../Images/f4b1d0d438cc435eaeda0cb9577631fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/0*lt8sY8GPG0WzTb2D"/></div></figure><p id="29e6" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">显然这里没有错误。他是存在的，而且确实是770lb！或者曾经是，因为他死于51岁，而他的3场MMA比赛是在一段时间以前。让我们在没有他的情况下制作直方图，看看是否还有其他情况:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="c937" class="kh ig hi lb b fi lf lg l lh li">data_clean %&gt;% <br/>filter(weight_lb &lt; 770) %&gt;% <br/>ggplot(aes(x = weight_lb))+<br/>geom_histogram(fill = 'navy', binwidth = 10)+ <br/>xlab('Fighter weight (lbs)')</span></pre><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es mg"><img src="../Images/4ad764b2c5b31f525912166df51c2da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*I9sO6bUk1SJ0J_40cDIX4A.png"/></div></figure><p id="beff" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这个剧情有一些奇怪的空白，大概是因为拳手在限制重量级比赛。因此，拳手会试图达到重量级极限的顶端，这意味着在重量级极限之间的拳手会很少。</p><h2 id="7f8f" class="kh ig hi bd ih ki kj kk il kl km kn ip jo ko kp it js kq kr ix jw ks kt jb ku bi translated">立场</h2><p id="a897" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这与我们对手臂长度的分析并不相关，但是站姿很有趣(<a class="ae kb" href="https://www.nature.com/articles/s41598-019-51975-3" rel="noopener ugc nofollow" target="_blank">我也发表了一篇关于这个的论文</a>)。所以让我们也清理立场。首先，让我们做一个表格:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="2a63" class="kh ig hi lb b fi lf lg l lh li">data_clean$stance %&gt;% table(useNA = 'always')</span></pre><p id="9ce0" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">该表显示，我们有7个“开放姿态”的人，3个“侧身姿态”的人和126个“转换姿态”的战士。我们有804架战斗机，它们的姿态是“空的”。这很可能是丢失的数据，因此我们将它们转换为NAs:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="72b2" class="kh ig hi lb b fi lf lg l lh li">data_clean$stance[data_clean$stance==’’] = NA</span></pre><p id="77b7" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们也可以做一个柱状图:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="5e0f" class="kh ig hi lb b fi lf lg l lh li">data_clean  %&gt;% ggplot(aes(x = stance, fill = stance))+<br/>geom_bar()+<br/>theme(axis.text.x = element_text(angle = 20, hjust = 1))</span></pre><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es mg"><img src="../Images/714828007e82a85d4205b35921d41494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*Xd5Tzo_IUb7xCDF0RbS5Ng.png"/></div></figure><h1 id="e32e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">特征工程</h1><p id="32f7" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在我们已经清理了很多数据，我们可以从现有的变量中产生一些新的有用的变量。或者如数据科学家所说:“特征工程”。让我们从计算每一个战士的总战斗次数开始:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="b19f" class="kh ig hi lb b fi lf lg l lh li">data_clean$total_fights &lt;- data_clean %&gt;% <br/>select(wins, losses, draws) %&gt;% <br/>rowSums()</span></pre><p id="73dc" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们选择赢、输和平这几列，然后使用<strong class="jf hj"> rowSums() </strong>将它们加起来。</p><p id="78a4" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">由于很少有战士有像开放和侧身这样的小众姿态，我们也将制作一个新的<em class="kv">姿态2 </em>变量，我们将开放、侧身和转换姿态的战士归为一类“混合”姿态。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="e3c7" class="kh ig hi lb b fi lf lg l lh li">data_clean$stance2 = data_clean$stance<br/>data_clean$stance2[data_clean$stance2 %in% c(‘Open Stance’,’Sideways’,’Switch’)] &lt;- ’Mixed’<br/>data_clean$stance2 %&gt;% table(useNA = ‘always’)</span></pre><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es mg"><img src="../Images/318647d97c9840f6617275a574f8a595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*VU_1YRET7B6gsKdVBusGBg.png"/></div></figure><p id="5d71" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">最后，让我们保存清理后的数据:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="8da8" class="kh ig hi lb b fi lf lg l lh li">write.csv(data_clean, ’UFC_data_cleaned.csv’)</span></pre><h1 id="0250" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结论</h1><p id="ff5b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这就是如何在r中清理MMA数据的情况。我希望你已经掌握了一些技巧。这个清理步骤是至关重要的，它真的可以让您了解您的数据，这可以让您在今后省去各种各样的麻烦。</p><p id="fa84" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在第3部分中，我们将开始分析！我们将最终解决我们最初的问题:<strong class="jf hj">手臂越长的拳手赢得的比赛越多吗？</strong></p><h1 id="2096" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">完整的代码</h1><p id="a79d" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了避免您将所有代码复制并粘贴到一个文档中的麻烦，我收集了以下所有代码:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="33d9" class="kh ig hi lb b fi lf lg l lh li"># cleaning MMA data in R, by Thomas 'Richie' Richardson</span><span id="4bad" class="kh ig hi lb b fi lj lg l lh li">library('magrittr')<br/>library('dplyr')<br/>library('readr')<br/>library('stringr')<br/>library('ggplot2')</span><span id="308c" class="kh ig hi lb b fi lj lg l lh li">data_raw &lt;- read.csv(“UFC_data_raw_DATE_SCRAPED.csv”)<br/>data_clean &lt;- data_raw</span><span id="7f76" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% head(20)<br/>data_clean %&gt;% str()</span><span id="5152" class="kh ig hi lb b fi lj lg l lh li">data_clean %&lt;&gt;% select(-X,-Belt)</span><span id="5232" class="kh ig hi lb b fi lj lg l lh li">colnames(data) &lt;- c(‘first_name’, ’last_name’, ’nickname’, ’height_inches’, ’weight_lb’, ’armspan_inches’, ’stance’, ’wins’, ’losses’, ’draws’)</span><span id="6128" class="kh ig hi lb b fi lj lg l lh li">data_clean$armspan_inches %&lt;&gt;% parse_number()</span><span id="a426" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% <br/>ggplot(aes(x = armspan_inches))+<br/>geom_histogram(fill = 'navy', binwidth = 2)+<br/>xlab('Fighter armspan (inches)')</span><span id="22fb" class="kh ig hi lb b fi lj lg l lh li">data_clean$height_inches %&gt;% <br/>str_split(‘ ‘, simplify = T) %&gt;% <br/>data.frame() %&gt;% <br/>rename(feet = X1, inches = X2) -&gt; data_height</span><span id="c670" class="kh ig hi lb b fi lj lg l lh li">data_height$feet %&lt;&gt;% parse_number() <br/>data_height$inches %&lt;&gt;% parse_number()</span><span id="71bf" class="kh ig hi lb b fi lj lg l lh li">data_clean$height_inches &lt;- (data_height$feet*12) + data_height$inches</span><span id="edf9" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% ggplot(aes(x = height_inches))+geom_histogram(fill = 'navy')+ xlab('Fighter height (inches)')</span><span id="d548" class="kh ig hi lb b fi lj lg l lh li">data_clean$weight_lb %&lt;&gt;% <br/>parse_number()</span><span id="ce77" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% <br/>ggplot(aes(x = weight_lb))+<br/>geom_histogram(fill = 'navy')+ <br/>xlab('Fighter weight (lbs)')</span><span id="1af2" class="kh ig hi lb b fi lj lg l lh li">data_clean$weight_lb %&gt;% <br/>table(useNA = ‘always’)</span><span id="d5ab" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% <br/>filter(weight_lb==770)</span><span id="e38b" class="kh ig hi lb b fi lj lg l lh li">data_clean %&gt;% <br/>filter(weight_lb &lt; 770) %&gt;% <br/>ggplot(aes(x = weight_lb))+<br/>geom_histogram(fill = 'navy', binwidth = 10)+ <br/>xlab('Fighter weight (lbs)')</span><span id="4f56" class="kh ig hi lb b fi lj lg l lh li">data_clean$stance %&gt;% table(useNA = 'always')</span><span id="1fac" class="kh ig hi lb b fi lj lg l lh li">data_clean$stance[data_clean$stance==’’] = NA</span><span id="c4be" class="kh ig hi lb b fi lj lg l lh li">data_clean  %&gt;% ggplot(aes(x = stance, fill = stance))+<br/>geom_bar()+<br/>theme(axis.text.x = element_text(angle = 20, hjust = 1))</span><span id="d748" class="kh ig hi lb b fi lj lg l lh li">data_clean$total_fights &lt;- data_clean %&gt;% <br/>select(wins, losses, draws) %&gt;% <br/>rowSums()</span><span id="49c9" class="kh ig hi lb b fi lj lg l lh li">data_clean$stance2 = data_clean$stance<br/>data_clean$stance2[data_clean$stance2 %in% c(‘Open Stance’,’Sideways’,’Switch’)] &lt;- ’Mixed’<br/>data_clean$stance2 %&gt;% table(useNA = ‘always’)</span><span id="af12" class="kh ig hi lb b fi lj lg l lh li">write.csv(data_clean, ’UFC_data_cleaned.csv’)</span></pre></div></div>    
</body>
</html>