<html>
<head>
<title>Exception Handling in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的异常处理</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/python-exceptions-6bb28fc149ab?source=collection_archive---------12-----------------------#2021-08-01">https://medium.com/nerd-for-tech/python-exceptions-6bb28fc149ab?source=collection_archive---------12-----------------------#2021-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="89d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">异常是在 python 代码中发现错误时发生的事件。在本文中，您将了解如何引发异常，以及如何处理 python 代码中的错误。引发异常</p><p id="0652" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可能希望在满足特定条件时抛出一个错误。要引发一个异常，我们使用 python 的 raise 关键字，后跟您想要引发的异常。例如</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="af14" class="jm jn hi ji b fi jo jp l jq jr">a = '54'<br/>if type(a) != 'int':<br/>    raise Exception('value of a must be integer')</span></pre><p id="5aa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">输出:</em></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1674" class="jm jn hi ji b fi jo jp l jq jr">Traceback (most recent call last):<br/>  File "main.py", line 3, in &lt;module&gt;<br/>    raise Exception('value of a must be integer')<br/>Exception: value of a must be integer</span></pre><p id="4ea1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您不必一直创建自定义异常。Python 有一些内置的异常。这里是所有 python 异常的<a class="ae jt" href="https://docs.python.org/3/library/exceptions.html" rel="noopener ugc nofollow" target="_blank">完整列表</a>。其中之一，断言错误将在下面讨论。</p><h2 id="b160" class="jm jn hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated"><strong class="ak">断言错误异常</strong></h2><p id="3f26" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们不用等待程序失败，而是用 python 做一个断言。这将确保在执行任何进一步的代码之前满足特定的条件。比如有人用一些第三方库写了一些代码。目前，这些代码可能工作正常，但在将来，由于第三方库的变化，这种情况可能会改变。为了解决这个问题，我们通常断言所安装的库的版本(仅是我们的代码使用的那些，而不是全部)与代码产生时的版本相同。下面是示例代码</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="d0d7" class="jm jn hi ji b fi jo jp l jq jr">import numpy<br/>assert (numpy.__version__ == '1.19.5')</span></pre><p id="ea6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果 numpy 不是指定的版本，上面的代码将抛出一个错误。</p><h2 id="1582" class="jm jn hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated"><strong class="ak">处理异常</strong></h2><p id="397c" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">为了处理异常，我们可以使用 try，except，else，finally 子句。Try 块包含您怀疑有错误的代码。Except 块包含在 try 块中发现任何异常时要执行的代码。Else 块包含在 try 块中没有发现异常时执行的代码。Finally 块包含不管 try 块中的异常如何都会执行的代码。下面是一个例子</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ed2a" class="jm jn hi ji b fi jo jp l jq jr">try: <br/>    a, b = 10, 0<br/>    print(a/b)</span><span id="c253" class="jm jn hi ji b fi ks jp l jq jr">except:<br/>    print('Except block: this code is executed when there is an exception in try block')<br/>    <br/>else:<br/>    print('Else block: this code is executed when there is no exception in try block')<br/>    <br/>finally:<br/>    print('Finally block: this code is executed regardless of the exception is found or not')</span></pre><p id="c43b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">输出:</em></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="cfc5" class="jm jn hi ji b fi jo jp l jq jr">Except block: this code is executed when there is an exception in try block<br/>Finally block: this code is executed regardless of the exception is found or not</span></pre><blockquote class="kt ku kv"><p id="c71c" class="if ig js ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated">注意:-不需要使用所有这些方法，但是必须使用 try 和 except 块来处理异常。</p></blockquote><p id="31de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的示例中，无论执行哪个异常，except 块中的代码都会被执行。有时代码中可能有不同类型的异常，您可能希望以不同的方式处理它们:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="6eb6" class="jm jn hi ji b fi jo jp l jq jr">import numpy<br/>try: <br/>    assert (numpy.__version__ == '1.19.5')<br/>    a, b = 10, 0<br/>    print(a/b)<br/>    <br/>except AssertionError as error: <br/>    print(error)<br/>    print('numpy is not of correct version')<br/>    <br/>except ZeroDivisionError as error:<br/>    print(error)<br/>    print('division by zero is not allowed')</span></pre><p id="9267" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果 numpy 不是正确的版本，那么将执行第一个 except 块。输出将是:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="2594" class="jm jn hi ji b fi jo jp l jq jr"><br/>numpy is not of correct version</span></pre><blockquote class="kt ku kv"><p id="c3b9" class="if ig js ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated">注意:first except 块的第一个 print 语句不打印任何内容</p></blockquote><p id="b2f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您的 numpy 是上面指定的版本，那么变量 a 除以变量 b 将产生一个错误，该错误将由 2nd 处理，但块和输出将是:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="6630" class="jm jn hi ji b fi jo jp l jq jr">division by zero<br/>division by zero is not allowed</span></pre><p id="f01a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这篇文章能帮助你理解 python 中的异常。</p></div></div>    
</body>
</html>