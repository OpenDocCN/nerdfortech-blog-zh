<html>
<head>
<title>The useState hook in detail</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">详细介绍了 useState 挂钩</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/the-usestate-hook-in-detail-f8d2b53b05ed?source=collection_archive---------28-----------------------#2021-03-02">https://medium.com/nerd-for-tech/the-usestate-hook-in-detail-f8d2b53b05ed?source=collection_archive---------28-----------------------#2021-03-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0803" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你们中的许多人已经熟悉 React 中的钩子，它允许我们在功能组件中使用状态和生命周期方法。在这篇博文中，我想更详细地看看 useState 钩子。(顺便说一下，如果你对为什么要在 React 中切换到功能组件感兴趣，可以查看我的博文 <a class="ae je" href="https://javascript.plainenglish.io/why-you-should-stop-using-class-components-in-react-and-switch-to-functional-components-with-hooks-e2c33ae098ce?source=your_stories_page-------------------------------------&amp;gi=d644e7d1a01a" rel="noopener ugc nofollow" target="_blank"> <em class="jd">这里</em> </a> <em class="jd">)。</em></p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/bacebdb76e4091262c6c22868b5cf4b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UaskX_kMbdLD6HfVE2-n8w.jpeg"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">照片由<a class="ae je" href="https://unsplash.com/@timothycdykes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">蒂莫西·戴克斯</a>在<a class="ae je" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="fb3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为什么我们需要<strong class="ih hj">使用状态</strong>钩子？在 2018 年引入钩子之前，我们只能在类组件中使用状态，在 setState 方法中更新它。在很长一段时间里，功能组件不能独立管理状态，只能用来渲染 UI 元素。在 React 16.8 中，这个功能是固定的，现在我们也可以处理功能组件中的状态。</p><p id="4b3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们继续讨论使用状态钩子之前，我想提醒你一些使用钩子的重要规则。</p><ul class=""><li id="0f4a" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">首先，不要在循环、条件或者嵌套函数内部调用钩子。在任何早期返回之前，总是在函数的顶层使用它们。</li><li id="55ea" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">React 依赖于钩子的调用顺序，这允许您在同一个组件中使用多个状态或效果钩子。</li><li id="9e29" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">不要从常规的 JavaScript 函数中调用钩子；从 React 函数组件或自定义挂钩中调用它们。</li></ul><h1 id="22d0" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">从使用状态钩子开始</strong></h1><p id="e64c" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated"><strong class="ih hj"> useState </strong>挂钩使您能够向功能组件添加状态。这对于本地组件状态尤其有用。要开始使用状态挂钩，我们首先需要从 React 导入它。</p><pre class="jg jh ji jj fd lm ln lo lp aw lq bi"><span id="0785" class="lr kk hi ln b fi ls lt l lu lv">Import React, { useState } from ‘react’;</span></pre><p id="dfae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们将<strong class="ih hj">使用状态</strong>添加到组件中。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="4087" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> useState </strong>钩子将状态变量的初始值作为参数，初始状态可以是你想要的任何类型(字符串、数字、数组、对象)或函数。初始值将仅在初始渲染时分配。对<strong class="ih hj"> useState </strong>的每次调用都返回一个包含两个元素的数组。<strong class="ih hj"> <em class="jd">数组的第一个元素是状态变量，第二个是更新变量的值的函数。</em> </strong></p><p id="c50d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有几种方法可以从返回的数组中检索元素。</p><p id="991e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，使用一个索引:</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="62cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者您可以使用数组析构:</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="62bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二种方法更可取，因为它允许您像使用任何其他变量一样使用状态变量。</p><p id="979e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们仔细看看 Count 函数中发生了什么。我们调用了<strong class="ih hj"> useState </strong>钩子，它接受初始值 1 作为参数。之后，我们添加了 incrementNumber 函数，该函数在按钮被单击时改变初始值，并将当前状态加 1。因此，每单击一次按钮，新值就会增加，数字也会增加。</p><p id="b184" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看下一个例子，我们必须使用几个状态挂钩。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="8e7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们单击按钮时，初始值只会增加 1，尽管我们期望它会增加 2。为了让这段代码工作，您应该在第一个参数中调用函数，该函数将返回数字的前一个状态。每次调用 setNumber 时，数值都会改变。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="91e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，每次我们点击按钮，我们的结果将增加 2。</p><p id="4b37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在一个组件中可以使用多少个<strong class="ih hj"> useState </strong>钩子没有限制。你可以多次调用<strong class="ih hj"> useState </strong>或者将所有内容都放入一个对象中。</p><pre class="jg jh ji jj fd lm ln lo lp aw lq bi"><span id="15f0" class="lr kk hi ln b fi ls lt l lu lv">const [dog, setDog] = useState({<br/>  name: '',<br/>  breed: '',<br/>  age: 0<br/>});</span></pre><p id="5e0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以使用 dog.name、dog.breed 等检索 dog 值。</p><p id="cf2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦应用程序增长，状态也会成比例增长，因此在<strong class="ih hj"> useState </strong>中存储多个值似乎不再是一个好主意。在这种情况下，您可以尝试使用更适合管理多值状态的<strong class="ih hj"> useReducer </strong>钩子。</p><p id="3059" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天我研究了如何使用<strong class="ih hj"> useState </strong>钩子，并且花了一些时间来回忆使用钩子的一些基本规则。感谢阅读。希望你学到了新东西。</p></div></div>    
</body>
</html>