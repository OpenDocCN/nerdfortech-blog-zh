<html>
<head>
<title>Alternatives to microservices for starting organisations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">启动组织的微服务替代方案</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/alternatives-to-microservices-for-starting-organisations-c55bccf45a22?source=collection_archive---------2-----------------------#2021-08-09">https://medium.com/nerd-for-tech/alternatives-to-microservices-for-starting-organisations-c55bccf45a22?source=collection_archive---------2-----------------------#2021-08-09</a></blockquote><div><div class="dt gx gy gz ha hb"/><div class="hc hd he hf hg"><div class=""/><figure class="ew ey ih ii ij ik es et paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="es et ig"><img src="../Images/fe0700c68ea0315df2277c4ce827f73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K337U-e3buU9AjRYL92xOA.jpeg"/></div></div><figcaption class="ir is eu es et it iu bd b be z dy translated">这不是泥巴。只有沙子。照片来自个人收藏</figcaption></figure><p id="e42c" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">如今微服务如此受欢迎，以至于不可避免地被用在了不该用的地方。</p><p id="c767" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">微服务模式有两个主要驱动因素:优化团队规模和系统负载。然而，他们通常是出于对巨石的恐惧而使用的。想法是，避免<a class="ae jt" href="http://www.laputan.org/mud/" rel="noopener ugc nofollow" target="_blank">大泥球</a>的唯一方法是从一开始就将系统拆分成微服务。</p><p id="e9b9" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">从一开始它就是有意义的。如果我知道在某个时候我无论如何都需要拆分我的系统，那么为什么不跳过整体阶段，直接进入微服务呢？想象一下我可以节省多少时间和金钱。</p><p id="1db9" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">不幸的是，这很成问题。主要问题是，作为一个规则，当我开始构建产品时，我很少对它有足够的了解。在这一点上，我需要能够迅速改变它。这正是我有小团队的时候微服务没有启用的。是的，对于大型组织来说，它们支持扩展自治团队，但当我只有一个团队时，这不是我所需要的。</p><blockquote class="ju jv jw"><p id="ef5c" class="iv iw jx ix b iy iz ja jb jc jd je jf jy jh ji jj jz jl jm jn ka jp jq jr js hc bi translated">微服务是监管架构最昂贵的方式。</p></blockquote><p id="596d" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">在微服务领域，在单个服务/代码库中简单的事情，比如移动东西，变成了多步骤的微项目。当然，微服务对于加强边界是非常强大的。然而，当一个组织只有一个产品团队时，我真的不需要/不想要这种东西。</p><p id="1b9e" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">有效地使用微服务需要在<a class="ae jt" href="https://martinfowler.com/bliki/MicroservicePrerequisites.html" rel="noopener ugc nofollow" target="_blank">上投入大量资金，以建立必要的运营成熟度水平</a>。组织越大，进行这种投资就越容易。我想在正确的时间进行投资<a class="ae jt" href="https://craigew.wordpress.com/2013/10/09/lean-software-development-principle-decide-as-late-as-possible/" rel="noopener ugc nofollow" target="_blank">，不要太早(也不要太晚)。</a></p><p id="6979" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">独石变成泥球的主要原因是，当产品经历快速迭代时，投资技术可伸缩性没有多大意义。然而，在产品成熟的某个时候，工程组织应该调整齿轮，为系统的长期健康而努力。注意到这一点可能相当具有挑战性，因为它需要整个产品组织的思维模式发生变化。</p><p id="d028" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">在下面的文章中，我列出了4种选择，从需要相对较少前期投资的最轻量级到更重型的。随着组织的发展，我希望从较轻的替代品转向较重的替代品，然后最终转向成熟的微服务。</p><h1 id="4528" class="kb kc hj bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">A —模块化设计</h1><p id="0484" class="pw-post-body-paragraph iv iw hj ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hc bi translated">一个小型稳定的团队应该能够就如何构建东西达成一致。如果一个5-7人的团队不能建立一些关于他们架构的基本指导方针，那么无论如何都不可能成功。</p><p id="5cc8" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">在一个单一的代码库中，隐藏每个模块的内部并最小化它们之间的公共API是完全可能的。通常模块化设计如此艰难的原因并不是因为每个团队都有一些邪恶的工程师有意识地将代码添加到错误的模块中。这是因为他/她无法找到实施新逻辑的适当位置。微服务没有以任何方式解决这个困境。</p><p id="cc53" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">假设我有模块A、B、c，我的挑战是添加不适合它们的新代码。我为什么要相信拥有服务A、B、C会让事情变得更简单呢？最有可能发生的是，我仍然会向服务A添加一些根本不应该在那里的东西。因此，随着时间的推移，服务A会变成一个大泥球，甚至更糟，我将拥有一个分布式的整体。有了模块，做正确的事情和重构现有结构的障碍就低多了。</p><p id="2425" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">顺便说一下，我还可以将数据存储拆分成多个模式或逻辑数据库。到时候我可以在多个数据库服务器之间分配它。这并没有增加多少成本。然而，它为我将来可能需要将数据库分解成更小部分的情况做好了准备。</p><h1 id="a545" class="kb kc hj bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak"> B —架构测试</strong></h1><p id="9cd9" class="pw-post-body-paragraph iv iw hj ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hc bi translated">如果仅仅一份协议或一份<a class="ae jt" href="https://adr.github.io/" rel="noopener ugc nofollow" target="_blank">决策记录</a>还不够，我可以引入一些工具来验证没有人意外地做了他们不应该做的事情。</p><p id="0dc2" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">像<a class="ae jt" href="https://www.archunit.org/" rel="noopener ugc nofollow" target="_blank"> ArchUnit </a>或<a class="ae jt" href="https://github.com/clarkware/jdepend" rel="noopener ugc nofollow" target="_blank"> JDepend </a>这样的工具可以用来验证模块/子系统之间没有不必要的依赖关系。尼尔·福特称这些为<a class="ae jt" href="http://nealford.com/books/buildingevolutionaryarchitectures.html" rel="noopener ugc nofollow" target="_blank">建筑适应功能</a>。</p><h1 id="9c18" class="kb kc hj bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">c-多模块设置(使用Gradle/Maven等工具)</h1><p id="39f4" class="pw-post-body-paragraph iv iw hj ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hc bi translated">这是一个较重的解决方案，但也允许更严格地实施边界。同时，仍然没有管理微服务的运营开销。我仍然将所有模块构件组合成一个可部署的单元。</p><h1 id="270d" class="kb kc hj bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">D —采用微服务的团队monorepo</h1><p id="10d7" class="pw-post-body-paragraph iv iw hj ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hc bi translated">从技术上来说，这已经是微服务了，但我想在这里添加它，作为微服务通常如何实现的简化版本。</p><p id="a8f5" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">一个团队拥有的所有服务可以驻留在一个库中，而不是将每个微服务放入自己的代码库中。虽然这给了我严格隔离的所有好处，但我仍然可以比使用polyrepos更容易地移动东西。</p><p id="cb37" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">重要的一点是，这不是整个组织的单一报告，而只是一个团队的报告。一旦有多个团队在一个代码库上工作，事情就会变得更加复杂。团队开始重用不应该跨边界共享的东西，因此变得更加相互耦合。同样，通过有意识的努力，这甚至可以在多个团队中工作，但是在3个团队中，这种方法的好处变得更有问题。</p><h1 id="ce7c" class="kb kc hj bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">最终想法</strong></h1><p id="adaf" class="pw-post-body-paragraph iv iw hj ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hc bi translated">微服务很强大但是也很贵。组织越大，微服务提供的价值就越大。当团队很小，产品仍在经历很多变化时，这可能不是最佳选择。在工程组织大到足以从微服务中受益之前，可以评估几个更便宜的方案，而不是选择最笨重的解决方案。</p><p id="579e" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">巨石不是什么可怕的东西。关键是要认识到它开始拖累组织的点。将单个代码库分割成更小的部分并不是一件容易的事情，但是它也有一些好处。这有助于避免过多的知识停留在<a class="ae jt" rel="noopener" href="/transferwise-engineering/insights-into-legacy-software-a7e2f68d711e">遗留系统</a>中，并且是<a class="ae jt" rel="noopener" href="/transferwise-engineering/rebuilding-software-is-inevitable-96111262722b">更新团队系统知识</a>的机会。</p></div><div class="ab cl le lf gq lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hc hd he hf hg"><p id="c64f" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated">其他重要资源:</p><p id="a7d4" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated"><a class="ae jt" href="https://martinfowler.com/bliki/MonolithFirst.html" rel="noopener ugc nofollow" target="_blank">https://martinfowler.com/bliki/MonolithFirst.html</a></p><p id="1dbe" class="pw-post-body-paragraph iv iw hj ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hc bi translated"><a class="ae jt" href="https://www.thoughtworks.com/insights/blog/microservices-adopt" rel="noopener ugc nofollow" target="_blank">https://www . thoughtworks . com/insights/blog/micro services-adopt</a></p></div></div>    
</body>
</html>