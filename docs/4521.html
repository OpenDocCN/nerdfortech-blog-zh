<html>
<head>
<title>Sentiment Analysis on bagel shop reviews — comparing New York City &amp; Montréal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">百吉饼店评论的情感分析——比较纽约和蒙特利尔</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/sentiment-analysis-on-bagel-shop-reviews-comparing-new-york-city-montr%C3%A9al-ffc4ef65a76f?source=collection_archive---------8-----------------------#2021-07-24">https://medium.com/nerd-for-tech/sentiment-analysis-on-bagel-shop-reviews-comparing-new-york-city-montr%C3%A9al-ffc4ef65a76f?source=collection_archive---------8-----------------------#2021-07-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="df6e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">可以肯定地说，大多数去过纽约或蒙特利尔的人可能都吃过百吉饼——这是一种可靠的、不含脂肪的食物选择，就像24小时营业的餐馆和街角小酒馆(或蒙特利尔的熟食店)一样无处不在。这两个城市都以百吉饼闻名，而且都倾向于声称自己的百吉饼比对方的好。如果你不知道这场争论有多激烈，问问去过或住在这两个城市的人就知道了。</p><p id="28af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2008年，当美国宇航局官员问加拿大宇航员格雷戈里·查米托夫，他想带什么食物上发现号进行为期两周的太空飞行时，他从他堂兄的蒙特利尔百吉饼店<em class="jk">费尔蒙特百吉饼店要了新鲜的百吉饼。</em></p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/2f57fbb2190b55fc89e0af6863cd4780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*69aGQ2tMyGy3azmOPC2UHw.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">照片由<a class="ae kb" href="https://www.pexels.com/@lulizler?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">露西·利兹</a>从<a class="ae kb" href="https://www.pexels.com/photo/bagel-with-salmon-3957499/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>拍摄</figcaption></figure><p id="8c0c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于当地人和游客来说，Yelp可能会因为他们的商业页面属性，即游客留下的星级和评论，而影响你访问一家商店。</p><p id="9401" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为一项实验，我想看看我是否能确定百吉饼爱好者更喜欢哪个城市，为了回答这个问题，我开始了一项分析，并提出了这个问题:人们能在Yelp上比较两个地方(在我的情况下，纽约市和蒙特利尔市)的相同类型的餐馆(在我的情况下，提供百吉饼的餐馆)以确定哪个有更好的产品或服务吗？</p><p id="4c1d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为一个住在蒙特利尔、去过纽约、尝过两种面包圈的人，我觉得自己是深入分析的合适人选。为了澄清区别，蒙特利尔风格的百吉饼是手工制作的，用木柴烘烤，与纽约风格的百吉饼相比，它更小，更薄，留有更大的洞，质地更致密，也更甜。纽约风格的百吉饼往往更大(像美国的所有东西一样)，内部更柔软，更耐嚼。</p><blockquote class="kc kd ke"><p id="0f0b" class="im in jk io b ip iq ir is it iu iv iw kf iy iz ja kg jc jd je kh jg jh ji jj hb bi translated">尽管在我的调查后无法说出哪个城市的百吉饼更好，但我相信，有了这些新信息，我的发现不再依赖Yelp上已经存在的数字属性，如星级和评论数，而是提供了对实际文本数据的观察，这些数据已经转化为对给定餐厅的百吉饼体验的有意义的见解。</p></blockquote><p id="4417" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">据我所知，还没有任何数据驱动的方法来回答我提出的问题，但是，许多数据科学家已经使用Yelp的评论数据来预测餐馆的评级，并使用各种自然语言处理(NLP)技术来评估企业的未来发展，这在我考虑如何处理我的研究问题时对我很有帮助。</p><p id="e13d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了开始我的调查，我需要数据。我决定从Yelp中抓取以下属性来组成我的数据集:</p><ul class=""><li id="ceb6" class="ki kj hi io b ip iq it iu ix kk jb kl jf km jj kn ko kp kq bi translated">餐馆名称</li><li id="d21d" class="ki kj hi io b ip kr it ks ix kt jb ku jf kv jj kn ko kp kq bi translated">用户姓名</li><li id="97aa" class="ki kj hi io b ip kr it ks ix kt jb ku jf kv jj kn ko kp kq bi translated">客户位置</li><li id="c23b" class="ki kj hi io b ip kr it ks ix kt jb ku jf kv jj kn ko kp kq bi translated">审查文本</li><li id="02f9" class="ki kj hi io b ip kr it ks ix kt jb ku jf kv jj kn ko kp kq bi translated">评审评级(客户)</li><li id="6c75" class="ki kj hi io b ip kr it ks ix kt jb ku jf kv jj kn ko kp kq bi translated">审查日期</li></ul><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="3744" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我使用Python的网页抓取库Selenium和BeautifulSoup时，我一直被Yelp的网站屏蔽，最终我发现了一个免费的谷歌Chrome扩展，名为<a class="ae kb" href="https://chrome.google.com/webstore/detail/web-scraper-free-web-scra/jnhgnonknehpejjnehehllkliplmbmhn?hl=en" rel="noopener ugc nofollow" target="_blank">“网页抓取器”</a>。我在使用他们的服务时从来没有被屏蔽过，并且会推荐它。</p><p id="b8e5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我想对这两个城市的评论和评级行为有一个大致的了解，所以开始我的分析时，我只是从Yelp上搜集了大约10，000条评论和评级，其中包括各种类型的餐馆。事实证明，这在洞察方面没有太大帮助，所以我直接进入了百吉饼数据集，该数据集由纽约和蒙特利尔出售百吉饼的商店的大约7300条评论和评级组成。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ky kx l"/></div></figure><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ky kx l"/></div></figure><p id="4dcf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦我把包含Yelp数据的CSV文件读入Python，我就把它们转换成熊猫数据帧。在我进行调查之前，我确保每个CSV都由相同的列组成，以使我的清洗过程更加简化。</p><p id="86e2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我删除了由web scraper生成的不必要的列，并为了可解释性而重命名了一些列。没有任何空值或重复值需要处理，但是，我必须转换“rating”列，因为它是作为字符串读入的。‘5星评级’变成了简单的整数‘5’。</p><p id="84ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在刮擦过程中，我有一种预感，星级分布将非常不平衡，因为我主要只看到5星和4星评级。在未来，我希望将更多的审查数据导入到ML管道中，以平衡数据集，因为我相信这最终会导致扭曲的结果。接下来，我将评级列二进制化，这样评级为4和5的评论就变成了1(正面)，低于4的评论变成了0(负面)。蒙特利尔的阶级不平衡是25%负和75%正，纽约是24%负和76%正。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kz"><img src="../Images/5850f115ded00baeab0e1a626c5e0c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NpDVsNvifU8I0vBSe1Wb_A.png"/></div></div></figure><p id="b0e0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">查看评论长度分布，每个城市的每个明星都有一个非常相似的分布，这让我有信心该模型会更少偏差。</p><p id="7653" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦我将正面和负面评论二进制化，我就将它们划分到它们自己的数据框中，只有文本列。然后使用TFIDF(术语频率的缩写-逆文档频率)和1-grams对每篇综述进行标记化，这给出了最一致的结果和清晰的主题。对于主题建模，我尝试了潜在语义分析(LSI)，潜在狄利克雷分配(LDA)和非负矩阵分解(NMF)。谁想出这些名字的？！</p><p id="6377" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">负面评论标记的单词权重对于LSI来说不是很好解释，但是，我能够根据主题强度来确定用于我的建模的主题数量。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es la"><img src="../Images/4216a9920f89f6e5cd5cb0edde1c82b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7DGWo3Yg8d2vAv0n7qYN0w.png"/></div></div></figure><p id="eaf4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我对LDA抱有希望，但最终由于我的班级不平衡和没有足够的负面评论数据，正面和负面评论之间的意义重叠使得很难理解主题，所以最终我决定选择NMF，它给出了最可解释的结果和独特的主题。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="11f7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我提出了两套不同的主题，分别针对负面和正面的评论。这在蒙特利尔和纽约之间有所不同，但差别不大。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="6d7d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">接下来的过程包括将所有评论映射到主题，将主题权重归一化为1，并对百吉饼店的所有评论的主题分布进行平均，以将该主题映射到餐馆。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lb"><img src="../Images/d780bdb413d9c4480f8b9d1e03546e4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ixvZXgymEoWDwCvvIF73FA.png"/></div></div></figure><p id="5c7c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个过程在我的互动花枝可视化中看得很清楚，你可以在这里看到:</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ky kx l"/></div></figure><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ky kx l"/></div></figure><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ky kx l"/></div></figure><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ky kx l"/></div></figure><p id="2ba7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">新建模的数据用于显示正面和负面评论的主题强度。</p><p id="e7d1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我开始确定哪个城市的百吉饼更好，但随着我花更多时间处理数据并开始建模，我清楚地知道，评论数据并不能真正反映哪个城市的百吉饼更好的问题，因为它们与其他事情太混为一谈了，如我在主题建模中看到的各种主题。</p><p id="0fc1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">尽管在我的调查后无法说出哪个城市的百吉饼更好，但我相信，有了这些新信息，我的发现不再依赖Yelp上已经存在的数字属性，如星级和评论数，而是提供了对实际文本数据的观察，这些数据已经转化为对给定餐厅的百吉饼体验的有意义的见解。</p><p id="fc21" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我这个项目的下一步是在更大的Yelp数据集上更多地研究客户元数据，以分析当地人和游客之间不同的评论行为。花更多的时间在更好的标记化上(用更多的数据)来查看更多种类的主题也是有帮助的。因为负面和正面评论的意思有重叠，我也可以试着为所有评论创建一个单独的主题空间，而不仅仅是正面和负面的。</p><p id="ae53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">查看我的GitHub上的代码:<a class="ae kb" href="https://github.com/setadrift/capstone_1" rel="noopener ugc nofollow" target="_blank">https://github.com/setadrift/capstone_1</a></p><p id="25d7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">谢谢，</p><p id="78ec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">邓肯·安德森<br/>LinkedIn:<a class="ae kb" href="https://www.linkedin.com/in/duncan-kg-anderson/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/duncan-kg-anderson/</a>T3】推特:@duncanand</p></div></div>    
</body>
</html>