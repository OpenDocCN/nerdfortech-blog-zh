<html>
<head>
<title>Creating a Physics based character controller | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建基于物理的角色控制器| Unity</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-physics-based-character-controller-unity-6c9f44473526?source=collection_archive---------3-----------------------#2021-07-30">https://medium.com/nerd-for-tech/creating-a-physics-based-character-controller-unity-6c9f44473526?source=collection_archive---------3-----------------------#2021-07-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="6040" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何使用 Unity 创建基于物理的角色控制器的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/fa4f3d388bf080479fc0a9f205f33b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zXA5zJw1nZFNW9SEq6E-nA.gif"/></div></div></figure><p id="acc0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">目标:创建一个基于物理的角色控制器，而不必在 Unity 中使用刚体。</p><p id="a59b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我谈到了<a class="ae ko" rel="noopener" href="/nerd-for-tech/time-for-a-new-project-unity-e6bbd9611224">我和 Unity </a>正在着手的新的 2.5D 项目。现在，是时候用 Unity 为我的新游戏创建一个基于物理的角色控制器了。</p><h1 id="6a42" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">当前场景</h1><p id="bb37" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">首先，让我们看一下当前的场景。我们有下一个原始资产:</p><ul class=""><li id="65eb" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">代表玩家的胶囊。</li><li id="cd50" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">5 个修改过的立方体代表要跳跃的平台。</li><li id="cb29" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">3 个球体代表玩家可收集的物品。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/5b6a9404e35619bba4b9c18c6320a220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Femou_iTDrbYBrZMGd-Mjg.png"/></div></div></figure><h1 id="7593" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">创建角色控制器</h1><p id="3746" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">因此，为了开始开发游戏机制，让我们创建基于物理的角色控制器来控制玩家的动作。为此，让我们从胶囊中去掉胶囊碰撞器(因为我们不需要它)并通过检查器附加一个新的<strong class="ju hs">角色控制器</strong>组件:</p><div class="jh ji jj jk fd ab cb"><figure class="ma jl mb mc md me mf paragraph-image"><img src="../Images/896d1fefbe52777825f196964a0dc116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/1*kET6g6nGE_ye347cKq0IgQ.gif"/></figure><figure class="ma jl mg mc md me mf paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/2422bbad8f01543392d88d96bcbd36ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/1*sdZF3fORD5HQeHrOs196QA.gif"/></div></figure></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/55807239e820762a90828b115514fd23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h4y3fEHF1kL_08Bvd0-qPw.png"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">正如你所看到的，角色控制器包含了自己的碰撞器。</figcaption></figure><h1 id="35f8" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">处理物理问题</h1><p id="c0d9" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了处理我们自己的物理系统，让我们创建一个新的脚本并附加到播放器上:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ml"><img src="../Images/c9a19b2c46b3f14f1b94698097584222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/1*_Alx9HnaIksh3bMZTIRRXg.gif"/></div></figure><p id="fa8f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">附加后，让我们打开脚本并创建下一个私有变量:</p><ul class=""><li id="c093" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">速度</li></ul><p id="f828" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储玩家的速度值。</p><ul class=""><li id="7ff4" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">重力</li></ul><p id="8b48" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该变量将存储重力效果的值，以修改(在每一帧上)玩家的重力脉冲。</p><ul class=""><li id="112e" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">跳跃高度</li></ul><p id="6e14" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储玩家每次跳跃的力量值。</p><ul class=""><li id="559c" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">重力脉冲</li></ul><p id="178d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储每一帧中施加在玩家身上的重力脉冲。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mm"><img src="../Images/ba9ea36fdb6e1c09cb1674e985a43cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*Cx60mptxKGvIWxLCYUdFdw.png"/></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">通过使用<strong class="bd kr">【serialize field】</strong>，我们能够通过检查器修改私有值。</figcaption></figure><p id="5af0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">此外，创建一个变量来存储对播放器的<strong class="ju hs">角色控制器</strong>组件的引用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mn"><img src="../Images/96b0892f6a1add1f6eee3c0eba485075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*LC8i-ENxjPlTwictUng_jA.png"/></div></figure><p id="51a6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，在<strong class="ju hs"> Start </strong>方法中，让我们使用<strong class="ju hs"> GetComponent </strong>方法初始化变量，然后检查它是否为空:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mp"><img src="../Images/e3b40347c8c7b683e398dd8157083013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IwYuOsyxL7N0fT_y148eTw.png"/></div></div></figure><p id="2a4e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了处理玩家的移动，让我们在<strong class="ju hs">更新</strong>方法中这样做:</p><ul class=""><li id="e06c" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">使用<strong class="ju hs"> GetAxis </strong>方法获取水平输入值。</li><li id="42e6" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">将水平输入转换为矢量 3，以表示应用的方向。</li><li id="4de1" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">将速度变量乘以应用的方向，获得矢量 3 值中的速度。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mq"><img src="../Images/e768def78b55e7924cfd614dbe4d5eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4wBCJ0qOcnlsLCLSCkb6A.png"/></div></div></figure><p id="762d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了处理物理问题，让我们通过使用播放器中的<strong class="ju hs">角色控制器</strong>组件的<strong class="ju hs"> <em class="mo"> isGrounded </em> </strong>属性来检查播放器是否接触地面:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mr"><img src="../Images/70486de90e82a9da82aaa268938e4eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*qwrgqWJflkdJDI7vKVrVdA.png"/></div></figure><p id="95b3" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果玩家接触到地面，让我们检查一下空格键是否被按下。如果是这种情况，让我们将跳跃高度功率值指定给重力脉冲变量:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ms"><img src="../Images/9a46b77fce2d1d707022de5ee75bdbb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*Pmhiej6YwiLIHX4WDVWm6w.png"/></div></figure><p id="8445" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">否则，如果玩家没有接触地面，让我们从重力脉冲变量中减去重力值:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mt"><img src="../Images/7d8307f8c82b9b072a6c543419254725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*Y2nIVBcGnSYI2FtbKjVNgg.png"/></div></figure><p id="36d9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了应用各自的重力脉冲，让我们将速度的<em class="mo"> y </em>值(其中是矢量 3)设置为重力脉冲:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mu"><img src="../Images/cd534d326ec3b220c2af57c0a9ec70bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*WlKM9AWgqKAqfCFmrMLMZg.png"/></div></figure><p id="3edb" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，让我们通过将速度乘以<strong class="ju hs">时间.增量时间</strong>值并使用来自播放器的<strong class="ju hs">角色控制器</strong>组件的<strong class="ju hs">移动</strong>方法来平滑地应用速度:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mv"><img src="../Images/6d3a1ee27d479dd1eb1f96b06b4c3481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ErGX_MW2-o5DOYyqDdWwYA.png"/></div></div></figure><p id="eacf" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果您想了解更多关于<strong class="ju hs">角色控制器</strong>组件的信息，您可以查看 Unity 文档:</p><div class="mw mx ez fb my mz"><a href="https://docs.unity3d.com/ScriptReference/CharacterController.html" rel="noopener  ugc nofollow" target="_blank"><div class="na ab dw"><div class="nb ab nc cl cj nd"><h2 class="bd hs fi z dy ne ea eb nf ed ef hr bi translated">字符控制器</h2><div class="ng l"><h3 class="bd b fi z dy ne ea eb nf ed ef dx translated">Unity engine/Inherits from:Collider/建议更改感谢您帮助我们提高 Unity 的质量…</h3></div><div class="nh l"><p class="bd b fp z dy ne ea eb nf ed ef dx translated">docs.unity3d.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn jq mz"/></div></div></a></div><h1 id="ee25" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">测试物理</h1><p id="86a7" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了测试应用于我们播放器的物理特性，我们可以通过检查器修改各自的变量值:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ml"><img src="../Images/94315dfe5a0f98594ac027402ca969a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/1*oLfhIOA51T7hpH4F8obMiw.gif"/></div></figure><p id="f349" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们用 Unity 运行游戏，我们会看到物理被应用到我们的玩家的角色控制器，以在场景中移动:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/83604b4fe12969c50cda7b9a38104bc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qHOtIsHEfjJn_InIfrRtrA.gif"/></div></div></figure><p id="0045" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们用 Unity 创建了一个基于物理的角色控制器！:d .我会在下一篇帖子中看到你，在那里我将展示如何用 Unity 实现对玩家的双跳。</p></div><div class="ab cl no np gp nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="hb hc hd he hf"><blockquote class="nv nw nx"><p id="4311" class="js jt mo ju b jv jw is jx jy jz iv ka ny kc kd ke nz kg kh ki oa kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>