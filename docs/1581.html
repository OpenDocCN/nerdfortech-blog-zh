<html>
<head>
<title>Vue Composition API: A first glance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue组合API:一瞥</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/vue-composition-api-a-first-glance-b90bb259ab9a?source=collection_archive---------18-----------------------#2021-03-26">https://medium.com/nerd-for-tech/vue-composition-api-a-first-glance-b90bb259ab9a?source=collection_archive---------18-----------------------#2021-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0608" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是对Vue 3中发布的新组合API的一个hello-world级别的介绍。想要更透彻的解释，你可能想参考Vue <a class="ae jd" href="https://v3.vuejs.org/guide/composition-api-introduction.html" rel="noopener ugc nofollow" target="_blank">这里</a>的官方文档。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/6a0513aa42ba8b2b6e66d387ab694a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ur0dhXaDDyXcQvsA"/></div></div></figure><h1 id="252d" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">TLDR</h1><p id="ddec" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">Vue的composition API提供了一种以函数式编程风格编写Vue组件的方法，通过按目的组织变量和方法，而不是按传统方式(或称为Options API)的类型。</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><h1 id="cd82" class="jq jr hi bd js jt la jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj le kl km kn bi translated">第一眼</h1><p id="d490" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">让我们把代码组织的区别放在伪代码中:</p><h2 id="9c4b" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">选项API(常规架构)</h2><blockquote class="lt lu lv"><p id="6779" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated">数据:</p><p id="f888" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated">-活动1的变量1</p><p id="0274" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated">-活动2的变量2</p><p id="3af6" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi">方法:</em> </strong></p><p id="baf1" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> -活动1的功能1 </em> </strong></p><p id="4cca" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> -活动2的功能2 </em> </strong></p></blockquote><h2 id="7b8e" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">组合API(来自Vue 3的新特性)</h2><blockquote class="lt lu lv"><p id="d57e" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated"><em class="hi">活动1: </em></p><p id="2b0a" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated">-活动1的变量1</p><p id="412d" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> -活动1的功能1 </em> </strong></p><p id="cf4d" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated"><em class="hi">活动2: </em></p><p id="5225" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated">-活动2的变量2</p><p id="6a14" class="if ig lw ih b ii ij ik il im in io ip lx ir is it ly iv iw ix lz iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> -活动2的功能2 </em> </strong></p></blockquote><p id="e376" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您的Vue组件变大并开始包含多个活动时，这样的组织会很有帮助。如果活动是在组合API中设计的，则添加或修改活动不需要编辑代码的多个部分。</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><h1 id="6a7e" class="jq jr hi bd js jt la jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj le kl km kn bi translated">一个例子</h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/b508fcce65f42dea5bc835547cb9552e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuOKKMH9BREjc1p1PyaBYA.png"/></div></div></figure><p id="9d12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">比方说，我们正在创建一个包含两个计数器的Vue应用程序。</p><p id="309f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能认为我们需要创建两个变量和两个函数来处理不同的活动。</p><p id="99b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是分别出现在Options API和Composition API中的相同代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mb"><img src="../Images/234ed8d5c4a32e56b555742f90caa14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbcUwyb5LwkoxVR0qoFOjQ.png"/></div></div></figure><h2 id="816b" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">选项API:</h2><p id="1648" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">对象按其类型排序。</p><p id="e7b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">变量存储在数据选项中。</p><p id="782a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">函数存储在方法选项中。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mc"><img src="../Images/4e8a1d68fa3c3b16414c9f96c8ec4379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*drnetO2gmu3Tj_db6aY43w.png"/></div></div></figure><h2 id="46af" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">合成API:</h2><p id="dfa9" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">使用composition API，脚本部分中的对象可以重新排列成函数式编程风格的设计。</p><p id="2d60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">变量和方法现在按照它们的用途分组在一起。</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><h1 id="a817" class="jq jr hi bd js jt la jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj le kl km kn bi translated">说明</h1><p id="95d8" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在上面非常简单的组合API示例中，引入了两个新的关键字:</p><h2 id="4d1a" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">- setup():</h2><p id="3899" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">充当组合API的单一入口点。脚本中定义的所有对象都需要在这里返回，并且在创建组件之前执行。</p><h2 id="f056" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">-参考:</h2><p id="76b1" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">这是一个变量的包装器，允许在脚本部分的其他地方访问它们。在Vue 3中创建ref函数的快速推理在官方文档<a class="ae jd" href="https://v3.vuejs.org/guide/composition-api-introduction.html#reactive-variables-with-ref" rel="noopener ugc nofollow" target="_blank">这里</a>中提供。</p><p id="08d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要注意的一点是，变量wrapped的值需要通过它的<strong class="ih hj">来访问。值</strong>属性。</p><h1 id="2906" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">最后的话</h1><p id="d1ed" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">这里只是Vue 3中新引入的组合API的一个非常简单的例子。除了<strong class="ih hj">数据</strong>和<strong class="ih hj">方法</strong>，还有<strong class="ih hj">计算</strong>、<strong class="ih hj"> props/emit </strong>等相关映射。从选项API到组合API。如果您发现在函数式编程设计中组织代码更简洁，那么您可能希望将当前的Vue代码迁移到新的风格中。</p></div></div>    
</body>
</html>