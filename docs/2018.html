<html>
<head>
<title>Tip of the Day: Using Timeline Signals to Skip any Cutscene in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日积月累:使用时间轴信号跳过 Unity 中的任何过场动画</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/tip-of-the-day-using-timeline-signals-to-skip-any-cutscene-in-unity-f72ca3658dce?source=collection_archive---------2-----------------------#2021-04-17">https://medium.com/nerd-for-tech/tip-of-the-day-using-timeline-signals-to-skip-any-cutscene-in-unity-f72ca3658dce?source=collection_archive---------2-----------------------#2021-04-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2f87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你在 Unity 中使用过场动画，那么你可能在过场动画期间停用了一些可播放的资产，并在过场动画结束之前再次激活它们。但是突然跳过它可能不会重新激活你的可玩资产。可以使用一个游戏管理器来跳过过场动画，该游戏管理器可以保存特定过场动画的可播放导演，这不是非常模块化，并且不能用于许多过场动画。</p><blockquote class="jd je jf"><p id="2187" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">如何才能解决这两个问题？</p></blockquote><h2 id="fb03" class="jk jl hi bd jm jn jo jp jq jr js jt ju iq jv jw jx iu jy jz ka iy kb kc kd ke bi translated">停用和重新激活可玩资产</h2><p id="343d" class="pw-post-body-paragraph if ig hi ih b ii kf ik il im kg io ip iq kh is it iu ki iw ix iy kj ja jb jc hb bi translated">最简单的方法是直接通过时间线。只需添加一个激活轨迹，添加可播放资产，然后调整<em class="jg">活动</em>轨迹，使其仅在时间轴的最后一帧活动。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kk"><img src="../Images/855f8f6cb1ceff735ddc18989ae02f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QyD8Af_qCrp7WKOrrmYRXg.gif"/></div></div></figure><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es kw"><img src="../Images/b2db308a0879b27c533a5e95d9341c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*2VU7KWf4H1eFmtZNGarnrw.jpeg"/></div></figure><p id="a0e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以将活动轨迹的持续时间设置为一帧，并将其调整为在过场动画的最后一帧中活动。</p></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><h2 id="cadb" class="jk jl hi bd jm jn jo jp jq jr js jt ju iq jv jw jx iu jy jz ka iy kb kc kd ke bi translated">跳过过场动画和重新激活可玩资产的模块化方式</h2><p id="9344" class="pw-post-body-paragraph if ig hi ih b ii kf ik il im kg io ip iq kh is it iu ki iw ix iy kj ja jb jc hb bi translated">我们将使用两件东西:</p><ol class=""><li id="8645" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">一个游戏管理器，用来控制过场动画中玩家的输入以跳过它。因此，创建一个<em class="jg">游戏管理器</em>脚本，并将其附加到游戏管理器游戏对象上。</li><li id="c5f9" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">时间线信号发射器:这些非常有趣，它们基本上是一个需要发射器、资产和接收器的事件。</li></ol><p id="14a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<em class="jg"> GameManager </em>脚本中，我们想要一个 PlayableDirector 来跟踪当前正在播放的时间线，并想要一个 bool 来知道 bool 是否已经被跳过，以防止玩家一直按着跳过。另外，让我们创建一个浮动来决定我们什么时候需要跳过场景。(跟着做就行了)</p><pre class="kl km kn ko fd ls lt lu lv aw lw bi"><span id="82af" class="jk jl hi lt b fi lx ly l lz ma">private PlayableDirector _currentDirector;<br/>private bool _sceneSkipped = true;<br/>private float _timeToSkipTo;</span></pre><p id="ac79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们创建一个公共方法，我们将使用信号发射器(event)来获取我们需要跳过的时间轴，并将 _sceneSkipped bool 设置为 false，以便允许播放器跳过场景。还要创建另一个公共方法来分配我们上面创建的跳过时间浮动。</p><pre class="kl km kn ko fd ls lt lu lv aw lw bi"><span id="9b4f" class="jk jl hi lt b fi lx ly l lz ma">public void GetDirector(PlayableDirector director)<br/>    {<br/>        _sceneSkipped = false;<br/>        _currentDirector = director;<br/>    }<br/>public void GetSkipTime(float skipTime)<br/>    {<br/>        _timeToSkipTo = skipTime;<br/>    }</span></pre><p id="fe8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们在时间线中设置信号发射器。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es mb"><img src="../Images/27e1d6261fe61257b7b0edc55e52a6dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C0IO_LR9-mTilwK6L8szXA.gif"/></div></div></figure><p id="8b2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你在上面看到的，在时间线上，右键点击<strong class="ih hj">标记</strong>标签，右键点击，并添加一个信号发射器。设置您希望发出信号的时间。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es mc"><img src="../Images/6a6a678fea68fc3c7586ad50b0625fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*SnFUvwpz2We0oRdnDOTlYQ.jpeg"/></div></figure><p id="226b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择创建的信号，并在发射信号中，您可以创建一个新的信号资产，这将允许您设置一个信号接收器。</p><p id="d677" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建资产后，就像任何其他 unity 事件一样，将 GameManager 游戏对象拖动到发射器，并为参数选择过场动画。在脚本中，这将帮助我们设置需要跳过的场景，同时指定要跳过的时间。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es md"><img src="../Images/d77be7a2f2eeac057565cd8fc31c637f.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/1*zv1ZQUYfw1RwGhx7GBZOmw.gif"/></div></figure><p id="9152" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在在游戏管理器脚本的更新中，检查玩家的输入，然后将时间线的时间改为激活可玩资产之前的时间。</p><p id="a2e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是最终代码和时间线跳转的样子。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es me"><img src="../Images/2311c836e315e11ccfc6423b682ea887.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*WQi5331Zt77qfOcrukFrDA.jpeg"/></div><figcaption class="mf mg et er es mh mi bd b be z dx translated">跳过任何场景，并防止玩家不断按下跳过按钮</figcaption></figure><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es mj"><img src="../Images/901607caa166dd9e607918b776c7ca8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0ynwQTPYTbvexc_LixxXVA.gif"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx translated">信号发出后，玩家按下跳过按钮，时间线跳到指定的时间。</figcaption></figure><p id="13fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用这种方法将允许你添加一个信号发射器到任何你想跳过的场景，并给你的时间线一点时间来反应你的游戏资产。</p></div></div>    
</body>
</html>