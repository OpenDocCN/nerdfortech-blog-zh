<html>
<head>
<title>Updating the Player Movement</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更新玩家动作</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/updating-the-player-movement-90f42fb0e6be?source=collection_archive---------28-----------------------#2021-08-06">https://medium.com/nerd-for-tech/updating-the-player-movement-90f42fb0e6be?source=collection_archive---------28-----------------------#2021-08-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5f0776233be8527505725d7eaa0a3f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lRLL_r0HEqo1NCkgEV0FlA.gif"/></div></div></figure><p id="b4bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我创建了一个原始的太空战斗机模型，我将用它作为玩家原型，并用粒子系统给它一个简单的引擎效果。此外，我开始调整玩家的移动方法，当满足给定的输入条件时，允许玩家向一个方向倾斜。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="4b49" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目标:</strong></p><p id="64d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在移动过程中，根据用户输入，平滑地从一侧向另一侧倾斜变换。</p><p id="a573" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">解决方案:</strong></p><p id="2d7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你也可以通过使用动画来获得想要的效果，但是在这种情况下，我决定通过使用四元数改变运动行为来将其添加到我们的玩家脚本中。</p><p id="c500" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">逻辑:</strong></p><p id="e9ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们快速看一下<strong class="is hj">四元数的声明。Slerp </strong>以及我们如何使用它从点<strong class="is hj"> a </strong>到<strong class="is hj"> b </strong>进行平滑插值。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/58a31a87894e558cede3c3fe548c5bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*-KKFF9fvNnCaxZHxbi-PcA.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">一个球插值在四元数 a 和 b 之间的四元数。</figcaption></figure><p id="0a57" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的例子中，我们希望在检测到水平移动输入时更新播放器的变换旋转。在球员移动方法中，我们这样应用它；</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/6c746dad4f7c82429be05bcc102430f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hK0pQZAPMJbeLmFoHpyv2Q.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">当前旋转，朝向旋转，平滑时间</figcaption></figure><p id="656e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以我们必须定义一个我们想要旋转的目标旋转。假设播放器处于其默认位置；</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/d4788edb8dd868a7a599a94647d7ea86.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*fZykJBZQBOuHOQtcJyGZ4w.png"/></div></figure><p id="debe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加负责转换最大倾斜角的私有成员变量。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/a64fbfc644379de1c51e9f9778b486e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*FE0gSuZIZm9ZS_uOR4UpkQ.png"/></div></figure><p id="2508" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后添加一个局部变量，允许我们通过从 Y 轴减去它来修改我们的目标旋转。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/dcc50a0f813aff299032f568c1d90b3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*c51hG1J0o1HZUaFPf993bA.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">Mathf。Round 返回舍入到最接近的整数的浮点数 f。</figcaption></figure><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/451cb09f400e2c7b8a7e51a488ac4c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*NcacfDcZ943Ih1Fen-VSgg.png"/></div></figure><p id="7c29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们基于用户输入平滑地插值到新的旋转。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="5f28" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是当前玩家移动方式的概述。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/3bd86ea15985aa8be1d7eb2eec4ee17b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sfoQG-9kFDdrvYuYHqj6Pw.png"/></div></div></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="c292" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">← <a class="ae kk" href="https://gert-coppens.medium.com/from-prototype-to-work-of-art-ff35e6c8100f" rel="noopener">上一个</a> | <a class="ae kk" href="https://gert-coppens.medium.com/updating-the-shooting-logic-32130df5f76a" rel="noopener">下一个</a> →</p></div></div>    
</body>
</html>