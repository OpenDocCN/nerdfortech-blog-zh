# 每日进度:移动平台

> 原文：<https://medium.com/nerd-for-tech/daily-progress-moving-platforms-84e905ffe76e?source=collection_archive---------24----------------------->

![](img/c420a8aebbe0f78c862ebb6c5d6fa978.png)

我们以前讨论过移动平台，所以如果你读过我以前的文章，你会很熟悉。首先，我将平台边缘完全解包，使其成为自己的对象，删除左侧平台，并留下带有边缘碰撞检查的平台。然后，我将它放在一个名为移动平台的父空对象中，然后我还创建了一个名为移动平台的脚本，并将它附加到平台边缘对象(而不是父容器)。

![](img/649b0e88c8019661759e15f3d9d2c583.png)

在编写本教程的过程中，我注意到当我试图将平台用于 x 和 y 位置时，它们不断恢复到新的位置。我终于进入平台，把一个新的立方体放在零点，发现平台非常远。将平台归零将消除任何未来问题。请记住，当你预设物体时，总是从预设中清除你的模型位置，这将避免很多麻烦！

![](img/c032696da30dcc8cc7d932510b1f30b4.png)

同样，我复制了这个平台(不是它的父平台),并把它们放在我认为它们会成为很好的路径点的地方。同样，我想使这个模块化，这样他们就可以有两个以上的路点，我们还会给出一个选项，每个路点之间停留的时间。

![](img/225c65fa54887ec9bf4d2de585d97fe9.png)

当你对每个平台的位置满意时，删除里面的所有东西，去掉所有组件，只留下变形。

让我们开始编写脚本吧！

像昨天一样，让我们创建一个列表来保存路点。这样的话，我们可以让设计师来选择要为他们将要创建的任何谜题创建多少个路点。为了测试的目的，我们现在正在创建 6 个路点，但是当我们最终完成预置的时候，它将只有 2 个路点。

![](img/69766cefcb695fc265c33c8945b5b7f1.png)

然后在检查器中，我们将把所有的航路点拖到变量中:

![](img/736c4d85ef802bd49bab215bce4dfefe.png)![](img/c36054c08338a87d9790ee2bbf0bf1c7.png)

正如我们上次所做的，我们将创建一个计数器来循环遍历各路点，为平台的速度创建一个变量，并在每个平台之间暂停时间。

![](img/41a92a6ceacc7ec1331c43a08342e6d8.png)

这一次，我将把移动平台代码放到它自己的函数中，不过代码和上次一样。

![](img/80d9cae4467164bbf45fba27b7880310.png)

所以我们知道它会停在第一个站台！现在让我们在计数器中循环，确保一旦我们达到了航路点列表的长度就重置为 0。

![](img/a9a30a4182c9cb22a14679612a3ac4c2.png)

让我们看看它的实际效果吧！

![](img/d4f357da95902b04d3c48c81c38726ab.png)

看起来不错！现在让我们添加一个可选的暂停。请记住，我们需要添加一个 can_check 布尔值，否则在第一个航路点之后，我们的平台将不会去任何地方:

![](img/38948c2a84b08e922053d61d8e8809a5.png)

就像昨天一样，我们要看看是否可以检查我们的路点，首先，我们可以。直到我们到达一个目的地，然后我们把它改成 false。启动协程，我们等待暂停，暂停结束后，我们在重置 _canCheckWaypoints 之前再增加一秒钟，以确保我们的平台转换在当前目的地转换之外，从而避免在比较平台位置和路点时出现任何混淆。

我们最后想添加的是一个触发碰撞器到整个平台，这样我们就可以在玩家触摸它的时候控制玩家。这将有助于避免平台独立于玩家移动，而此时玩家应该“粘”在平台上。最简单的方法是添加另一个立方体，使其碰撞器成为触发器，然后关闭网格渲染器。

![](img/c822cd1b098023b55785bc20099a159b.png)

接下来，当玩家触到触发器时，我们将它设置为父类，当玩家停止触到触发器时，将他们的父类设置为 null。

![](img/f151cd46366bed8a230191522a38a9dd.png)

# 重要事项:

记住将 Update 改为 FixedUpdate()并在平台上附加一个刚体，以便进行检查！

![](img/20b21e34547a9eb9629c069bd0d14f01.png)

看看有没有效果！

![](img/a9059052082cb4fc509ba27cc4d51ff8.png)

效果非常好！在编辑过程中，我可能忘记了输入最后的航路点，但这很容易解决。这个系统是有效的。现在我们可以为我们的设计师创建一个简单的版本。我们将调用我们的原始移动平台开发，复制预置，并将其重命名为常规移动平台。删除所有的路点，留下两个，然后做标准的复制平台的过程，把它们放得稍微远一点，然后删除所有的东西，把路点放入脚本。

![](img/35dc1f3dbbc2fc1cc02b230765c6cb51.png)

让我们把它放进游戏里吧！

![](img/6d67eb92d08af42d8b9bc65c0f689686.png)

我想我们成功了！明天的挑战是攀登的阶梯！到时候见！