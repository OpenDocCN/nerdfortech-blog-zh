<html>
<head>
<title>Data Cleaning on Hotel Booking Demand Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">酒店预订需求数据集的数据清洗</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/data-cleaning-on-hotel-booking-demand-dataset-df19922adf0a?source=collection_archive---------4-----------------------#2021-01-30">https://medium.com/nerd-for-tech/data-cleaning-on-hotel-booking-demand-dataset-df19922adf0a?source=collection_archive---------4-----------------------#2021-01-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ca3e5c5080b6b45a3bc2b4f01f5f1810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kcwvZA6O63LO5ZIL"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">马丁·比约克在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="1125" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该数据集包含城市酒店和度假酒店的预订信息，并且包括诸如预订时间、停留时间、成人、儿童和/或婴儿的数量以及可用停车位数量等信息。</p><p id="3a7d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是数据集的链接</p><div class="jt ju ez fb jv jw"><a href="https://www.kaggle.com/jessemostipak/hotel-booking-demand" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">酒店预订需求</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">摘自论文:酒店预订需求数据集</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">www.kaggle.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk io jw"/></div></div></a></div><p id="7d51" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对此数据集执行一些基本的数据清理。让我们先了解一下我们的数据。</p><p id="ab25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，是数据描述。</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/fdb66c744e577ed776889edcacd4b57a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RamyIktWWRKdWQCHcq5GKQ.png"/></div></div></figure><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/9cb476b70434603c4cf406806d6fff0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SCM-cW81WUfNkqGNdxzfmA.png"/></div></div></figure><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/8b463f0bc2b93e5c380fd8263c8ff405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RiWqHZhPzi9Di3sHvHtf0g.png"/></div></div></figure><p id="e300" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从导入所需的包(NumPy，pandas)和数据集开始</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/06424bfa1bf2d7b957fa49749a37c186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C0IGL73xOlZvlSmT0vCxsA.png"/></div></div></figure><p id="c7dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认情况下，NaN/NA 在 pandas 中被称为缺失值。但有时数据集甚至可能包含空白或未定义的文字，熊猫不会将其识别为缺失值。因此，我们必须在一个数组中显式指定这些值，并将该数组传递给<strong class="ix hj"> na_values </strong>参数</p><p id="f36f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，missing_values = ["undefined "，" none "，"-" ]</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/2d4d691258a653d53f13cda5f9c070c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ul44e2hyOd_oBueOkiUwfw.png"/></div></div></figure><p id="5497" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的数据集的维度是 119390 行和 32 列。</p><p id="c7ef" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们提取一些信息，比如每列中非空值的数量以及它们的数据类型</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/69623ae8c0856abd988e2ea04216a981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d6_nfZQMpZ3M8cwgYYFmOA.png"/></div></div></figure><p id="06d2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用 pd.to_datetime 将对象数据类型“reservation_status_date”转换为 DateTime 数据类型</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ku"><img src="../Images/0399b4308de73c34b9d1408153b96953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_ekP2AdHNGSqF0TBzE_Cw.png"/></div></div></figure><p id="eab7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的例子中，我们使用字符串连接合并了三列，即年、月和日，从而创建了一个新列。还将其数据类型转换为日期时间。现在，我们的数据集中总共有 33 列。</p><p id="bb46" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">到目前为止，我们执行了基本的操作，如转换数据类型和管理列。</p><p id="a12c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们实际上对数据执行操作</p><p id="b26a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 1)查找每一列中缺失值的数量</strong></p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/1d681b624b673c8a6269668cd2b42d1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KUzmqRtohGKYOyZI1A-fVQ.png"/></div></div></figure><p id="c038" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">数据集包含 7 列空值。这些空值需要填充或省略(列消除/行消除)。</p><p id="3380" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 2)查找缺失值的指标</strong></p><p id="7e69" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们查找 children 列的 4 个缺失值的索引。查找索引不会做太多的事情，但是在验证值是否被修改时会很有帮助。</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/4a1394fe08c792bbf344b3277cdb1e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioIyfbsEPmLaMMqECaOW-w.png"/></div></div></figure><p id="06fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 3)移除不需要的列</strong></p><p id="40f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通常，如果一列中超过 70%的值缺失，并且没有办法填充缺失的值，则可以从数据集中完全删除该列。</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/bc912360502f2661202b714718fdda1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZkXU2KN_-22eS5zutFxATw.png"/></div></div></figure><p id="62db" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">删除包含超过 10 万个缺失值的公司列。因此，此时列的总数是 32。</p><p id="77b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">“到达日期周数”列是没有用的，因为我们已经有 3 列给出到达日期的年、月和日。此外，由于我们已经创建了一个显示日期的新列，我们不再需要 3 个单独的列。因此，让我们删除这些列</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/0cdfe9db00c3e55b54d654af88475e15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oApaJm9iFe2l9KqKqyK7Kw.png"/></div></div></figure><p id="a209" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">再删除 4 列后，此时列的总数为 28。</p><p id="0191" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 4)删除不需要的行</strong></p><p id="cc72" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据我们预测的值，我们可以删除整个代理 id 列，也可以删除包含空值的行。<br/>我已经展示了如何删除列，让我们删除代理列中缺少值的所有行</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/8225f91765acf32e43ec2c89be88442c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDMpoA1vN_38sW2bxTI0hQ.png"/></div></div></figure><p id="4ca5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 5)填充栏的缺失值</strong></p><p id="3e3c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，让我们填充 children 列<br/>,这里我使用 mean 作为一个值，用缺失的值替换。因为 mean 可以是 float 数据类型，所以我使用 floor 方法取了最小的整数</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/e6c9e3bfaea857c186971490eae45ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HXT-H4OcPRln7xRzekdO7w.png"/></div></div></figure><p id="8407" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们填写市场细分和分销渠道<br/>,因为两者使用的填写方法相同，因为使用了循环</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/f4200c91a05c3ab5510c12aedb3d1413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z431pVJk2kkrJBdadUpk6g.png"/></div></div></figure><p id="8f4e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们检查我们的数据集是否没有空值。</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/b862ea884331d81e1a0aeb248abbc720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nLRpcCEpuLCuTtFyDKsZSQ.png"/></div></div></figure><p id="bb22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">是的，它是！😊</p><p id="2006" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我们有 103050 行和 28 列。</p><p id="1295" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ld">我们做了一些列的修改，填充了缺失的值，减少了一些不需要的行，将一些数据类型更改为合适的类型，现在我们的数据非常干净，可以输入到我们的模型中了。</em></p><p id="bcb2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢您的阅读！</p><p id="c5c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">编码快乐！！！😊</p></div></div>    
</body>
</html>