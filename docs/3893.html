<html>
<head>
<title>Writing unit tests in Spring Boot with JUnit 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 JUnit 5 在 Spring Boot 编写单元测试</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/writing-unit-tests-in-spring-boot-with-junit-5-9498e204de34?source=collection_archive---------3-----------------------#2021-06-28">https://medium.com/nerd-for-tech/writing-unit-tests-in-spring-boot-with-junit-5-9498e204de34?source=collection_archive---------3-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d62a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单元测试是测试驱动开发和持续集成实践中不可或缺的一部分。尽管在 Java 中有一些框架可以实现这一点，但是 JUnit 已经被广泛使用了很长时间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/bce4267317f4aa005a837e0fecaab669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I5krU_M1oKqioO1Q"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://unsplash.com/@homajob?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="e682" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ju">这个中型故事将是我以前的 Spring Boot 教程的延续，在这个故事中，我将专注于为我以前实现的一个项目编写单元测试。我将使用一个 Spring Boot 的 MVC 项目，该项目使用 Gradle 作为构建工具，但是即使您更喜欢 Maven，也应该可以使用。</em></p></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><p id="61bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你没有要继续的项目，请随意使用下面的例子，</p><div class="kc kd ez fb ke kf"><a href="https://github.com/mmafrar/spring-mvc-crud-example" rel="noopener  ugc nofollow" target="_blank"><div class="kg ab dw"><div class="kh ab ki cl cj kj"><h2 class="bd hj fi z dy kk ea eb kl ed ef hh bi translated">MMA frar/spring-MVC-crud-example</h2><div class="km l"><h3 class="bd b fi z dy kk ea eb kl ed ef dx translated">用 JPA 和 JSP 实现 Spring Boot MVC CRUD 操作</h3></div><div class="kn l"><p class="bd b fp z dy kk ea eb kl ed ef dx translated">github.com</p></div></div><div class="ko l"><div class="kp l kq kr ks ko kt jn kf"/></div></div></a></div><p id="d05c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本例中，我们将在上述存储库中的 com.example.demo.service 包中为 ContactService.java 编写单元测试。在 src/test/Java/com/example/demo/service 目录中创建类 ContactServiceTest，如下图所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/75229e259313e1fa64f777113521f057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RO-N1x0rU7juysCmOnvfiQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">ContactServiceTest.java</figcaption></figure><p id="ab5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在类级别添加下面给出的注释，以表明这是一个测试类，并指示 JUnit 在它创建的同一个测试实例上执行所有测试用例。</p><pre class="je jf jg jh fd kv kw kx ky aw kz bi"><span id="15d9" class="la lb hi kw b fi lc ld l le lf">@SpringBootTest<br/>@TestInstance(TestInstance.Lifecycle.<strong class="kw hj"><em class="ju">PER_CLASS</em></strong>)<br/><strong class="kw hj">public class </strong>ContactServiceTest {</span></pre><p id="6999" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，将 ContactService 类自动连接到测试类中。使用 before all 和 after all 注释来创建和删除运行测试用例所需的数据。</p><pre class="je jf jg jh fd kv kw kx ky aw kz bi"><span id="be7d" class="la lb hi kw b fi lc ld l le lf">@Autowired<br/>ContactService <strong class="kw hj">contactService</strong>;<br/><br/>@BeforeAll<br/><strong class="kw hj">void </strong>setUp() {<br/>    Contact contact = <strong class="kw hj">new </strong>Contact();<br/>    contact.setName(<strong class="kw hj">"Mohamed Afrar"</strong>);<br/>    contact.setEmail(<strong class="kw hj">"example@gmail.com"</strong>);<br/>    contact.setCountry(<strong class="kw hj">"Sri Lanka"</strong>);<br/>    <strong class="kw hj">contactService</strong>.saveContact(contact);<br/>}<br/><br/>@AfterAll<br/><strong class="kw hj">void </strong>tearDown() {<br/>    <strong class="kw hj">contactService</strong>.deleteById(1);<br/>}</span></pre><p id="7c85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们将为 findAll、findById 和 updateContact 方法编写测试用例，每个方法一个测试用例。参考下面给出的要点中的测试注释方法。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="2824" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你的测试类准备好了，你就可以通过 IDE 或者构建工具来运行它。我将通过 IDE 运行测试，但是如果您想通过构建工具来尝试，请使用<strong class="ih hj">。Gradle 测试</strong>命令用于 Gradle。下图显示了通过 IDE 测试执行结果，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es li"><img src="../Images/cd41292067abf9c67f4a2d8965639701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*uaMp9vIi27vJ8Z_N1Enf4g.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">试验结果</figcaption></figure><p id="7229" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面创建的测试类将在嵌入式 H2 数据库上运行。但是对数据库运行测试并不是一个好的实践。因此，我们需要集成像 Mockito 这样的框架来模拟数据库调用等。</p></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><p id="6f27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编码快乐！下面是我发布的一个 DEV 社区视频。此外，您可能有兴趣查看我的中间故事<a class="ae jt" href="https://towardsaws.com/deploying-spring-boot-mvc-with-jsp-project-to-aws-elastic-beanstalk-dc665b6b8849" rel="noopener ugc nofollow" target="_blank">将 Spring Boot MVC 和 JSP 项目部署到 AWS Elastic Beanstalk </a>。</p><div class="kc kd ez fb ke kf"><a href="https://dev.to/mmafrar/configuring-multiple-data-sources-with-spring-boot-2-and-spring-data-jpa-5c95" rel="noopener  ugc nofollow" target="_blank"><div class="kg ab dw"><div class="kh ab ki cl cj kj"><h2 class="bd hj fi z dy kk ea eb kl ed ef hh bi translated">用 Spring Boot 2 和 Spring Data JPA 配置多个数据源</h2><div class="km l"><h3 class="bd b fi z dy kk ea eb kl ed ef dx translated">链接到故事…</h3></div><div class="kn l"><p class="bd b fp z dy kk ea eb kl ed ef dx translated">开发到</p></div></div><div class="ko l"><div class="lj l kq kr ks ko kt jn kf"/></div></div></a></div></div></div>    
</body>
</html>