<html>
<head>
<title>The Open-Closed Principle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开闭原则</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/the-open-closed-principle-a4937889ca2d?source=collection_archive---------5-----------------------#2021-10-26">https://medium.com/nerd-for-tech/the-open-closed-principle-a4937889ca2d?source=collection_archive---------5-----------------------#2021-10-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="19d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是符合坚实原则的第二条规则。</p><p id="34a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个原则规定，软件组件应该对修改关闭，但对扩展开放。在某种程度上，这变得很奇怪，但很容易理解。</p><p id="56df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Closed </strong>部分规定，无论何时向软件组件添加新功能，您都不必修改现有功能。</p><p id="4914" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，<strong class="ih hj">打开</strong>部分设置了软件组件应该是可扩展的，以向其添加新功能或新行为。</p><p id="7c3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你熟悉Java，这个原理实现了很多接口。</p><p id="b484" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事情是这样的。</p><p id="1baf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们想象一家保险公司向客户销售不同类型的计划。我们有一个<code class="du jd je jf jg b">VehicleInsurance</code>和一个<code class="du jd je jf jg b">HealthInsurance</code>，它们实现了一个<code class="du jd je jf jg b">isLoyalCustomer</code>方法来检查客户是否可以得到折扣。</p><p id="fb55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码如下:</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="776e" class="jp jq hi jg b fi jr js l jt ju">public class HealthInsurance {<br/>  public boolean isLoyalCustomer() {<br/>    return true;<br/>  }<br/>}</span></pre><p id="d5e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是另一个类:</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="a5b0" class="jp jq hi jg b fi jr js l jt ju">public class VehicleInsurance {<br/>  public boolean isLoyalCustomer() {<br/>    return true;<br/>  }<br/>}</span></pre><p id="87e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一点上，没有什么问题，只是两个类与一个重复的方法，没有什么真正的悲剧。</p><p id="9c3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个类叫做<code class="du jd je jf jg b">InsurancePremiumDiscount</code>，它对客户购买的每一种保险实现了一个<code class="du jd je jf jg b">calculatePremiumDiscountPercent</code>，以便计算折扣。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="ee34" class="jp jq hi jg b fi jr js l jt ju">public class InsurancePremiumDiscount  {</span><span id="acba" class="jp jq hi jg b fi jv js l jt ju">public int calculatePremiumDiscountPercent(HealthInsurance customer) {<br/>  if(customer.isLoyalCustomer()) {<br/>    return 20;<br/>  }<br/>  return 0;<br/>}</span><span id="5220" class="jp jq hi jg b fi jv js l jt ju">public int calculatePremiumDiscountPercent(VehicleInsurance customer) {<br/>    if(customer.isLoyalCustomer()) {<br/>      return 20;<br/>    }<br/>    return 0;<br/>  }<br/>}</span></pre><p id="8d23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，<code class="du jd je jf jg b">isLoyalCustomer</code>方法是在一个客户实例之后调用的，当然，<code class="du jd je jf jg b">calculatePremiumDiscount</code>是为公司提供的每种保险类型复制的。</p><p id="edf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种方法一点都不实用，第一个初始集里有一个重复的方法，每个险种里面都有，所以重复的保费计算方法在<code class="du jd je jf jg b">InsurancePremiumDiscount</code>里面</p><p id="bc85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用<strong class="ih hj"> OCP </strong>来解决这个问题，但是这里有一些要点。</p><p id="bf2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，这有利于维护，因为添加新功能很容易，这可以节省编码时间，因为也需要解耦，这也适用于<strong class="ih hj"> SRP </strong>原则，但目标是通过编写更少的代码来实现。</p><p id="51ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还记得Java接口吗？好吧，通过使用接口，您将动态地为创建保险计划的任何人实现客户概要。因此，您将删除任何形式的重复。</p><p id="5e55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接口结构在所有使用它们的类中强制实现，并且只在它们的定义中声明。</p><p id="458c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是应用了<strong class="ih hj"> OCP </strong>后的示例。</p><p id="545a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是新的<code class="du jd je jf jg b">CustomerInterface</code>这个声明了<code class="du jd je jf jg b">isLoyalCustomer</code></p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="ff8a" class="jp jq hi jg b fi jr js l jt ju">public interface CustomerProfile {<br/>  public boolean isLoyalCustomer();<br/>}</span></pre><p id="a873" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以根据需要选择所有的保险类别。</p><p id="0c7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是带有<code class="du jd je jf jg b">CustomerProfile</code>实现的<code class="du jd je jf jg b">HealthInsurance</code></p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="af61" class="jp jq hi jg b fi jr js l jt ju">public class HealthInsurance implements CustomerProfile {<br/>  public boolean isLoyalCustomer() {<br/>    return true;<br/>  }<br/>}</span></pre><p id="1ea4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">于是有了<code class="du jd je jf jg b">VehicleInsurance</code>和新的<code class="du jd je jf jg b">HomeInsurance</code>级。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="ef30" class="jp jq hi jg b fi jr js l jt ju">public class VehicleInsurance implements CustomerProfile {<br/>  public boolean isLoyalCustomer() {<br/>    return true;<br/>  }<br/>}</span><span id="6a71" class="jp jq hi jg b fi jv js l jt ju">public class HomeInsurance implements CustomerProfile {<br/>  public boolean isLoyalCustomer() {<br/>    return true;<br/>  }<br/>}</span></pre><p id="4082" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更酷的是<code class="du jd je jf jg b">InsurancePremiumDiscount</code>类的新实现，这是因为使用了<code class="du jd je jf jg b">CustomerProfile</code>接口作为<code class="du jd je jf jg b">calculatePremiumDiscountPercent</code>的构造函数，对复制造成了一点影响。</p><p id="f7f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是它现在的样子。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="561c" class="jp jq hi jg b fi jr js l jt ju">public class InsurancePremiumDiscountCalculator {</span><span id="894c" class="jp jq hi jg b fi jv js l jt ju"> public int calculatePremiumDiscountPercent(CustomerProfile customer) {<br/>  if(customer.isLoyalCustomer()) {<br/>    return 20;<br/>  }<br/>    return 0;<br/>  }<br/>}</span></pre><p id="8b01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从各方面来看这都很棒。但是，事实是，当代码增长时，简单性会使您的整体设计变得复杂。</p><p id="0565" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就想法而言，这个原则很好，但有时不值得你去思考。</p><p id="3022" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在下一篇文章中继续讨论利斯科夫替代原理。</p></div></div>    
</body>
</html>