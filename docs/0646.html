<html>
<head>
<title>iOS: behavioural testing- Given When Then in UI &amp; Unit testing — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS:行为测试——在UI和单元测试中给出——第1部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/ios-behavioural-testing-given-when-then-in-ui-unit-testing-part-1-41e3eff8811b?source=collection_archive---------7-----------------------#2021-01-31">https://medium.com/nerd-for-tech/ios-behavioural-testing-given-when-then-in-ui-unit-testing-part-1-41e3eff8811b?source=collection_archive---------7-----------------------#2021-01-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="f151" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">iOS测试指南</h2><div class=""/><figure class="ev ex ip iq ir is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es io"><img src="../Images/eea2339b6901c9d61883298b2402109e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G046EDCmkCd4mIrFQ6VAIQ.png"/></div></div></figure><h1 id="8231" class="iz ja hi bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">行为测试介绍</h1><p id="5c76" class="pw-post-body-paragraph jx jy hi jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><strong class="jz hs"> <em class="kv">什么时候给什么时候呢？</em>T3】</strong></p><p id="6dc1" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">这是一个讲故事的结构。解释我们应用程序中特定场景的故事。</p><blockquote class="lb lc ld"><p id="57b8" class="jx jy kv jz b ka kw kc kd ke kx kg kh le ky kk kl lf kz ko kp lg la ks kt ku hb bi translated">“你可以使用不同的故事格式，同时仍然进行行为测试——但我之所以在这里介绍它，是因为它已经被证明在各种形式和规模的许多项目中都有效。至少，你的故事应该包含模板中描述的所有元素。”——<a class="ae lh" href="https://dannorth.net/whats-in-a-story/" rel="noopener ugc nofollow" target="_blank">丹北</a></p></blockquote><p id="ebe5" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated"><strong class="jz hs"> <em class="kv">故事模板是这样的:</em> </strong></p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="86fe" class="lr ja hi ln b fi ls lt l lu lv"><strong class="ln hs">Title</strong> (one line describing the story)<br/><br/><strong class="ln hs">Narrative:</strong><br/>As a [role]<br/>I want [feature]<br/>So that [benefit]<br/><br/><strong class="ln hs">Acceptance Criteria:</strong> (presented as Scenarios)<br/><br/><strong class="ln hs">Scenario 1:</strong> Title<br/>Given [context]<br/>  And [some more context]...<br/>When  [event]<br/>Then  [outcome]<br/>  And [another outcome]...<br/><br/><strong class="ln hs">Scenario 2:</strong> ...</span></pre><p id="1f86" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated"><strong class="jz hs"> <em class="kv">我们来看一个账户持有人试图从ATM机提取现金的故事:</em> </strong></p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="31a9" class="lr ja hi ln b fi ls lt l lu lv"><strong class="ln hs">Story:</strong> Account Holder withdraws cash<br/><br/>As an Account Holder<br/>I want to withdraw cash from an ATM<br/>So that I can get money when the bank is closed<br/><br/><strong class="ln hs">Scenario 1:</strong> Account has sufficient funds</span><span id="f67e" class="lr ja hi ln b fi lw lt l lu lv">Given the account balance is \$100<br/> And the card is valid<br/> And the machine contains enough money<br/>When the Account Holder requests \$20<br/>Then the ATM should dispense \$20<br/> And the account balance should be \$80<br/> And the card should be returned<br/><br/><strong class="ln hs">Scenario 2:</strong> Account has insufficient funds</span><span id="b871" class="lr ja hi ln b fi lw lt l lu lv">Given the account balance is \$10<br/> And the card is valid<br/> And the machine contains enough money<br/>When the Account Holder requests \$20<br/>Then the ATM should not dispense any money<br/> And the ATM should say there are insufficient funds<br/> And the account balance should be \$20<br/> And the card should be returned<br/><br/><strong class="ln hs">Scenario 3:</strong> Card has been disabled</span><span id="0aad" class="lr ja hi ln b fi lw lt l lu lv">Given the card is disabled<br/>When the Account Holder requests \$20<br/>Then the ATM should retain the card<br/>And the ATM should say the card has been retained</span></pre><p id="160d" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">它是由丹·诺斯首先提出的。他是一名技术和组织变革专家，从事指导、编码和咨询工作超过25年。他运用系统思维、精益和敏捷原则来解决复杂的业务和技术问题。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="590e" class="iz ja hi bd jb jc me je jf jg mf ji jj jk mg jm jn jo mh jq jr js mi ju jv jw bi translated">UI和单元测试中的行为测试</h1><p id="32f5" class="pw-post-body-paragraph jx jy hi jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">为此，我制作了一个简单的calc应用程序。我们有两个textfieds来获取输入，一个segment控件来获取数学运算符(+或-)，一个equalsbutton(=) <strong class="jz hs"> </strong>来执行数学运算，还有一个label来显示答案。</p><figure class="li lj lk ll fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mj"><img src="../Images/9d43827340e06ff854d2fa0ce2cea8ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rGkU7gujVMGxSiSINwWuOw.png"/></div></div></figure><h1 id="b3c5" class="iz ja hi bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated"><strong class="ak">单元测试:</strong></h1><p id="8a54" class="pw-post-body-paragraph jx jy hi jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">人们通常不会将这种结构应用到单元测试中，但是他们会在没有意识到的情况下间接地这样做，但是我们会直接应用它。正如我常说的，谁在乎呢🤷🏽‍♂️ 。</p><p id="fa5a" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">我的viewcontroller中有两个适合单元测试的方法。</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="69ef" class="lr ja hi ln b fi ls lt l lu lv"><strong class="ln hs">Methods we are going to unit test.</strong></span><span id="f4de" class="lr ja hi ln b fi lw lt l lu lv">// Gets an object typed UITextField as input and returns an Int.</span><span id="8738" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">1) func getIntFrom(textField inputTextField: UITextField) -&gt; Int</strong></span><span id="4a5e" class="lr ja hi ln b fi lw lt l lu lv">// Gets an Operator type and two Int inputs for performing math operations.</span><span id="81b2" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">2) func calculateValues(withOperator sign:Operator, inputOne:Int, inputTwo:Int) -&gt; String</strong></span></pre><p id="21c3" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated"><strong class="jz hs"> <em class="kv">注意:</em>运算符</strong>是一个枚举</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="aa31" class="lr ja hi ln b fi ls lt l lu lv">enum Operator: String {</span><span id="9198" class="lr ja hi ln b fi lw lt l lu lv">case addition = "+"</span><span id="6b34" class="lr ja hi ln b fi lw lt l lu lv">case subtraction = "-"</span><span id="86cf" class="lr ja hi ln b fi lw lt l lu lv">case multiplication = "*"</span><span id="d519" class="lr ja hi ln b fi lw lt l lu lv">case division = "/"</span><span id="c6db" class="lr ja hi ln b fi lw lt l lu lv">}</span></pre><p id="3769" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">让我们使用之前看到的模板为<strong class="jz hs">计算值</strong>方法<strong class="jz hs"> </strong>编写故事。</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="139c" class="lr ja hi ln b fi ls lt l lu lv"><strong class="ln hs">Title</strong> calculateValues method performing math operation<br/><br/><strong class="ln hs">Narrative:</strong><br/>As thecalculateValues method<br/>I want to perform +/- math operations on the given values<br/>So that I could pass it to the something<br/><br/><br/><strong class="ln hs">Scenario 1:</strong> Add two values<br/>Given the input values are 1 &amp; 2<br/>  And the operator is Operator.addition<br/>When  the calculateValues method is called with the given parameters<br/>Then  the answer should be equal to 3<br/>  And [Not required in this scenario]<br/><br/><strong class="ln hs">Scenario 2:</strong> Subtract two values<br/>Given the input values are 2 &amp; 1<br/>  And the operator is Operator.subtraction<br/>When  the calculateValues method is called with the given parameters<br/>Then  the answer should be equal to 1<br/>  And [Not required in this scenario]</span></pre><p id="0662" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">现在让我们进入单元测试类，编写测试代码。</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="f43f" class="lr ja hi ln b fi ls lt l lu lv"><strong class="ln hs">// Scenario 1: I want to add two values</strong></span><span id="72fd" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//Given</strong></span><span id="a1fe" class="lr ja hi ln b fi lw lt l lu lv">let a = UITextField()</span><span id="60bf" class="lr ja hi ln b fi lw lt l lu lv">a.text = "1"</span><span id="f1fd" class="lr ja hi ln b fi lw lt l lu lv">let b = UITextField()</span><span id="42d9" class="lr ja hi ln b fi lw lt l lu lv">b.text = "2"</span><span id="0e5f" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//And</strong></span><span id="c5c5" class="lr ja hi ln b fi lw lt l lu lv">var mathOperator : ViewController.Operator = .addition</span><span id="83fe" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//When</strong></span><span id="18df" class="lr ja hi ln b fi lw lt l lu lv">var answer = sut.calculateValues(withOperator: mathOperator, inputOne: sut.getIntFrom(textField: a), inputTwo: sut.getIntFrom(textField: b))</span><span id="21f7" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//Then</strong></span><span id="9cf8" class="lr ja hi ln b fi lw lt l lu lv">XCTAssertEqual(answer, "3", "Details: Input was  1 + 2 and the result should have been 3",file: "ViewController.swift",line: 61)</span><span id="0912" class="lr ja hi ln b fi lw lt l lu lv">// <strong class="ln hs">Scenario 2: I want to subtract two values</strong></span><span id="b136" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//Given</strong></span><span id="da38" class="lr ja hi ln b fi lw lt l lu lv">a.text = "2"</span><span id="085d" class="lr ja hi ln b fi lw lt l lu lv">b.text = "1"</span><span id="6e99" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//And</strong></span><span id="47c0" class="lr ja hi ln b fi lw lt l lu lv">mathOperator = .subtraction</span><span id="3c75" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//When</strong></span><span id="c7b2" class="lr ja hi ln b fi lw lt l lu lv">answer = sut.calculateValues(withOperator: mathOperator, inputOne: sut.getIntFrom(textField: a), inputTwo: sut.getIntFrom(textField: b))</span><span id="da05" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//Then</strong></span><span id="e4b4" class="lr ja hi ln b fi lw lt l lu lv">XCTAssertEqual(answer, "1", "Details: Input was  2 - 1 and the result should have been 1",file: "ViewController.swift",line: 61)</span></pre><p id="9f24" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">下一个故事是关于<strong class="jz hs"> getIntFrom(textField… </strong>方法的，让我们遵循相同的模板。</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="341f" class="lr ja hi ln b fi ls lt l lu lv"><strong class="ln hs">Title</strong> getIntFrom method getting the Int value from the UITextField object.<br/><br/><strong class="ln hs">Narrative:</strong><br/>As the getIntFrom method<br/>I want to get the Int value from the UITextField object<br/>So that I could pass it to the something<br/><br/><br/><strong class="ln hs">Scenario 1:</strong> Pass a UItextField type as input and get an Int out</span><span id="240a" class="lr ja hi ln b fi lw lt l lu lv">Given the input textfield has "1" as input<br/>When  the getIntFrom method is called with the given input textfield<br/>Then  the answer should be equal to Int type 1<br/> </span></pre><p id="e9fa" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">让我们为上面的故事写代码。</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="49aa" class="lr ja hi ln b fi ls lt l lu lv"><strong class="ln hs">Scenario 1:</strong> <strong class="ln hs">Pass a UItextField type as input and get an Int type out</strong></span><span id="c254" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//Given</strong></span><span id="7057" class="lr ja hi ln b fi lw lt l lu lv">let a = UITextField()</span><span id="55c1" class="lr ja hi ln b fi lw lt l lu lv">a.text = "1"</span><span id="459a" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//When</strong></span><span id="5cb1" class="lr ja hi ln b fi lw lt l lu lv">let result = sut.getIntFrom(textField: a)</span><span id="a713" class="lr ja hi ln b fi lw lt l lu lv"><strong class="ln hs">//Then</strong></span><span id="c368" class="lr ja hi ln b fi lw lt l lu lv">XCTAssertEqual(result, 1, "Details: Input was  String type - 1  and the result should have been Int type - 1",file: "ViewController.swift",line: 38)</span></pre></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><p id="3a7f" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">好了，伙计们，让我们在本文的<a class="ae lh" href="https://rajaikumar.medium.com/ios-behavioural-testing-given-when-then-in-ui-unit-testing-part-2-ffbf0228604a" rel="noopener"> <strong class="jz hs">第二部分</strong> </a>中讨论UI测试。</p><p id="c879" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">在此报告中找到完整的源代码:</p><p id="33dc" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated"><a class="ae lh" href="https://github.com/Rajaikumar-iOSDev/SimpleBDDExample" rel="noopener ugc nofollow" target="_blank">https://github.com/Rajaikumar-iOSDev/SimpleBDDExample</a></p><div class="mk ml ez fb mm mn"><a href="https://github.com/Rajaikumar-iOSDev/SimpleBDDExample" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hs fi z dy ms ea eb mt ed ef hr bi translated">rajaikumar-IOs dev/SimpleBDDExample</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">这是swift中BDD(Given，When &amp; Then)基本实施的一个例子。建立在单元测试之上的UI测试用例…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">github.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb ix mn"/></div></div></a></div><p id="25f5" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">请记住，这个项目有测试计划和代码覆盖率，这在本教程中没有涉及。如果你需要了解更多，请告诉我。</p><p id="b57d" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">BDD参考:<a class="ae lh" href="https://dannorth.net/whats-in-a-story/" rel="noopener ugc nofollow" target="_blank">https://dannorth.net/whats-in-a-story/</a></p><p id="5231" class="pw-post-body-paragraph jx jy hi jz b ka kw kc kd ke kx kg kh ki ky kk kl km kz ko kp kq la ks kt ku hb bi translated">丹北参考:【https://dannorth.net/about/】T2</p></div></div>    
</body>
</html>