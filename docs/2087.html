<html>
<head>
<title>Getting started with Docker &amp; Running GUI Application inside it</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker入门并在其中运行GUI应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/getting-started-with-docker-running-gui-application-inside-it-c50d2190a2ed?source=collection_archive---------1-----------------------#2021-04-20">https://medium.com/nerd-for-tech/getting-started-with-docker-running-gui-application-inside-it-c50d2190a2ed?source=collection_archive---------1-----------------------#2021-04-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/c3cd8ecdbbc97b8eac9adde1f625474b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4v29LDFiTAQH5ESTWCjy4w.gif"/></div></div></figure><div class=""/><div class=""><h2 id="f8bb" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">大多数情况下，我们在Docker容器中运行我们的服务器或任务，但是想象一下——我们甚至可以在Docker容器中启动GUI应用程序，并且可以从Docker主机系统访问它们。请继续关注我，直到这篇博客结束，来学习Docker的基础知识&amp;如何实现这个奇妙的实用…</h2></div><h1 id="5939" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">码头工人:</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ka"><img src="../Images/bdd16ac58884424328541b3db40cc9ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QmKJuinhlcGEy099.jpg"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">Docker标志，来源:谷歌</figcaption></figure><p id="9328" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">2013年，Solomon Hykes推出了数十年来最大的创新产品，名为<strong class="kl hu"> Docker </strong> &amp;，两年内<strong class="kl hu"> docker &amp;集装箱技术成为业内要求最高的技术。</strong></p><ul class=""><li id="8037" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">以前，在虚拟机或云计算上配置和设置服务器需要10到15分钟，而<strong class="kl hu"> Docker只需1到2秒钟就能启动带有预配置服务器的整个操作系统。</strong>行业开始蓬勃发展&amp;每个公司都开始实施DevOps解决方案，如容器技术。</li><li id="9436" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">与此同时，Docker也开始改进&amp; <strong class="kl hu">那时Docker最大的利润是——它是一个开源产品。</strong>意味着成千上万的技术人员开始在Docker上实现新的想法&amp;这些年来，Docker也开始改进。</li><li id="1ebf" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">今天，容器技术如此强大，它可以做我们想做的每一件事。<strong class="kl hu">我们可以使用Kubernetes集群、存储集群、数据库集群、计算集群、网络集群等容器来设置多节点集群。</strong>事实上现在<strong class="kl hu">容器技术是如此强大</strong>以至于我们甚至可以<strong class="kl hu">在其中设置整个私有云计算</strong>。</li><li id="b63c" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">容器技术有无限的可能性，但在这篇博客中，我将谈论Docker容器的一个非常有趣的可能性，那就是<strong class="kl hu">我们将运行GUI应用程序，如firefox、gedit等。码头集装箱内。</strong></li></ul><blockquote class="lt lu lv"><p id="38c3" class="kj kk lw kl b km kn iu ko kp kq ix kr lx kt ku kv ly kx ky kz lz lb lc ld le hb bi translated"><strong class="kl hu">注意:我将首先谈论Docker的基础知识，这样任何正在阅读这篇博客的人都可以学习这个神奇的工具。</strong></p></blockquote><h1 id="a700" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">什么是容器？</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/747a1c48ebcecd3e15da074c12f7d9f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sMS9xED0toZzDcpmSZvxgw.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">使用Canva自制</figcaption></figure><p id="b667" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">让我们这样想——我们为什么需要操作系统？</p><ul class=""><li id="f38d" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">因为我们想在里面运行一些程序。操作系统有能力连接硬件来运行我们的程序。现在根据限制，我们在特定的时间点只能在一个RAM &amp; CPU 上运行一个操作系统。</li><li id="b475" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">如果你注意到这个限制，那么你会一直觉得你的资源被浪费了，因为大多数时候我们没有利用我们购买的全部硬件。为了克服这一限制的挑战，工程师们提出了名为虚拟化的解决方案。虚拟化意味着我们将虚拟地创建硬件空间，这样我们就可以在一个硬件上运行多个操作系统。</li><li id="3df0" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">这在一定程度上解决了资源浪费的挑战，但最终<strong class="kl hu">它花费了太多的时间来配置、设置虚拟机&amp;然后运行程序等。</strong>最后，如果你再次思考为什么我们需要操作系统的第一个问题，答案总是一样的，我们想运行一些程序&amp;没有操作系统就不可能运行任何程序。</li><li id="f538" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">那么<strong class="kl hu">为什么要浪费时间来配置操作系统呢？</strong>为了解决这个问题，行业开始使用容器技术。<strong class="kl hu">容器技术最棒的部分是它可以在一两秒钟内启动&amp;登录到一个全新的操作系统。</strong>此外，如果您有预先配置的Docker映像，那么您可以在几秒钟内启动整个操作系统以及正在运行的服务器。</li><li id="9e77" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">容器就像一个运行应用程序的隔离环境。这就像你的系统中有多个虚拟机一样。与VM类似，<strong class="kl hu">容器也有自己的特定于操作系统的命令、自己的网卡、自己的特定于操作系统的文件&amp;文件夹、自己的进程、自己的存储等等。</strong></li></ul><h1 id="378f" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">让我们来看看实际情况:</h1><ul class=""><li id="6b5b" class="lf lg ht kl b km mb kp mc ks md kw me la mf le lk ll lm ln bi translated">请记住一件事，如果您想进行虚拟化，那么您需要在您的系统上安装至少一个虚拟化软件，如Oracle VirtualBox、Hyper-V、VM-Ware、KVM等。类似地，如果你<strong class="kl hu">想要集装箱化，那么你需要相应的软件</strong>。</li><li id="fd48" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">有许多程序具有创建容器的能力，如Docker、CRI-O、Podman、Rocket等。但是在这篇博客中，我们的重点是Docker技术。<strong class="kl hu">先从安装Docker的软件开始。</strong>现在Docker有两个版本——<strong class="kl hu">社区版</strong>免费使用&amp; <strong class="kl hu">企业版</strong>需要许可证才能使用。<strong class="kl hu">我们准备用Docker社区版(docker-ce)。</strong></li></ul><h1 id="f385" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">先决条件:</h1><p id="a956" class="pw-post-body-paragraph kj kk ht kl b km mb iu ko kp mc ix kr ks mg ku kv kw mh ky kz la mi lc ld le hb bi translated">虽然我们可以在Windows系统中运行Docker，但是我将使用Linux操作系统作为我的Docker主机。表示我将在我的RedHat Linux 8系统上安装Docker软件。如果你没有RHEL8系统，那么你也可以使用CentOS/Fedora系统。</p><p id="3ff8" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">我使用的是Windows系统&amp;我安装了Oracle VirtualBox软件，其中有一个RHEL8虚拟机。这将是我的码头主人。你可以使用任何Linux操作系统来安装Docker，但是基于Linux发行版的风格，Docker的安装过程会有所不同。但是一旦我们安装了Docker，那么无论你使用什么操作系统，一切都是一样的。</p><blockquote class="lt lu lv"><p id="3550" class="kj kk lw kl b km kn iu ko kp kq ix kr lx kt ku kv ly kx ky kz lz lb lc ld le hb bi translated"><strong class="kl hu">注意:我没有展示如何安装Docker，因为Google上有很多关于“如何在CentOS8/RHEL8上安装docker-ce”的文章。只需关注其中任何一个&amp;供参考我分享一个链接——</strong><a class="ae mj" href="https://www.linuxtechi.com/install-docker-ce-centos-8-rhel-8/" rel="noopener ugc nofollow" target="_blank"><strong class="kl hu">https://www . linuxtechi . com/install-docker-ce-centos-8-rhel-8/</strong></a></p></blockquote><p id="acf1" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">下载&amp;安装docker软件后，启动Docker服务。</strong></p><h1 id="a139" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">什么是Docker图像？</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/ecc32e967bfd5ac14dfb797ea3583449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nN8Cn8VjsQJjuh2ZIWpMmA.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">使用Canva自制</figcaption></figure><p id="d0b8" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">要安装任何操作系统，我们需要各自的图像。映像包含运行特定操作系统所需的所有数据。</p><ul class=""><li id="fa82" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">类似地，要启动Docker容器或操作系统，我们需要使用Docker映像。Docker储存库中有成千上万的图像，称为<strong class="kl hu">Docker Hub—</strong><a class="ae mj" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kl hu">https://hub.docker.com/</strong></a><strong class="kl hu">。</strong></li><li id="a374" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">Docker Hub上的大部分图片都是免费使用的。假设我们想要一个<strong class="kl hu"> Ubuntu 18.04操作系统</strong>，然后使用Docker启动它，我们首先需要Ubuntu 18.04的Docker映像。<strong class="kl hu">去Docker Hub &amp;搜索“Ubuntu”&amp;你会找到官方图片。</strong></li></ul><p id="5a59" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">现在，我们将使用Docker在我们的本地系统上下载该映像，在我的例子中，它是RHEL8系统，这是我的Docker主机。运行下面提到的命令下载图像…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="5108" class="mp jj ht ml b fi mq mr l ms mt">docker pull ubuntu:18.04</span></pre><p id="0e5c" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">接下来，您将看到下面截图中提到的输出…</p><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mu"><img src="../Images/3090e68aecd7d38d5a0c1567c9dc467a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LdaVX0uvcdTGeuZQPu2UHA.png"/></div></div></figure><p id="7d3f" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">一旦图像下载成功，运行下面提到的命令，看看你有多少图像下载到本地…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="7a42" class="mp jj ht ml b fi mq mr l ms mt">docker image ls</span></pre><p id="21ef" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">让我们再下载一个名为centos 8的图片。类似于前面的命令运行…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="de5e" class="mp jj ht ml b fi mq mr l ms mt">docker pull centos:8</span></pre><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mv"><img src="../Images/ce761478a90a8e421b7b5c7d7b3b617a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qdDkWr9s438A9VyRLHG2tA.png"/></div></div></figure><p id="a4b6" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">现在我们有两个Docker图像。让我们进入下一步。</p><h1 id="fa25" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">启动容器:</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/3c6e220d51f689d56323de9f8f8a5e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35dHu4cAhQhOIPOS9UVGlg.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">使用Canva自制</figcaption></figure><p id="4839" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">现在在这里你会看到Docker的实际力量。正如我已经说过的，我们需要Docker图像来启动容器。现在我们有了图像，<strong class="kl hu">让我们启动一个容器。</strong>运行下面提到的命令来启动容器…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="bc59" class="mp jj ht ml b fi mq mr l ms mt">docker run -it --name os1 ubuntu:18.04</span></pre><ul class=""><li id="eb2a" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">我们给docker容器起了个名字叫做<strong class="kl hu">“os1”</strong>&amp;它是用<strong class="kl hu"> ubuntu:18.04 image </strong>启动的。<strong class="kl hu">此处的“-it”选项表示在集装箱启动后为我提供一个“交互终端”。</strong></li><li id="5009" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated"><strong class="kl hu">你会看到在1秒钟内，你的终端改变了&amp;现在你在一个新的终端里。这里最有趣的部分是这个终端不是你的Docker主机(RHEL8)终端。是Ubuntu容器的终点站。</strong></li><li id="bb59" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">这意味着现在您将看到RHEL8的所有特定命令都不起作用。例如运行<strong class="kl hu">“百胜报告列表”</strong>命令&amp;你会看到<strong class="kl hu">“百胜命令未找到”</strong>。因为在Ubuntu中我们使用<strong class="kl hu">“apt-get”</strong>来安装软件。如果您运行<strong class="kl hu">“apt列表”</strong>，它将开始工作。请参考下面提到的截图…</li></ul><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mw"><img src="../Images/6b1432e936211df3ceebcb5fb432cf65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTC-haxp0-xAd43fasbxFw.png"/></div></div></figure><p id="7cd6" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">现在，当您在本地Docker主机GUI上时，会打开一个新的终端，而不会关闭之前的终端。</strong>这里运行…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="63b6" class="mp jj ht ml b fi mq mr l ms mt">docker ps</span></pre><p id="1c00" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">您将看到一个容器正在运行&amp;在它启动之前还有多长时间。现在让我们做一件更有趣的事情。运行下述命令&amp;启动一个centos:8集装箱…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="8da3" class="mp jj ht ml b fi mq mr l ms mt">docker run -it --name os2 centos:8</span></pre><p id="2d74" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">一旦运行该命令，现在您就进入了<strong class="kl hu"> "centos:8" </strong> docker容器。检查运行<strong class="kl hu">“yum repolist”</strong>&amp;你会看到它工作正常。但是如果你运行<strong class="kl hu">“apt列表”</strong>，它会说<strong class="kl hu">“apt命令未找到”</strong>。作为参考，请查看下面提到的截图…</p><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mx"><img src="../Images/378a9f99ef09a2e220e100bb83dbd1f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BFSVKEgtSPzCUvM-ONaI_w.png"/></div></div></figure><h1 id="cb30" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">容器的隔离:</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/69efeff51295e7192a8b3e5e6d2f01f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-hZAnMleocBSnxeK-RYcg.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">使用Canva自制</figcaption></figure><p id="f5cc" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">我之前已经说过，容器就像一个隔离的空间，有自己的操作系统各自的命令，文件&amp;文件夹，自己的网络适配器，自己的进程，存储器等等。让我们检查一下那些东西在不在。在os2上运行下面提到的命令…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="4818" class="mp jj ht ml b fi mq mr l ms mt">yum install net-tools -y</span></pre><blockquote class="lt lu lv"><p id="54f9" class="kj kk lw kl b km kn iu ko kp kq ix kr lx kt ku kv ly kx ky kz lz lb lc ld le hb bi translated"><strong class="kl hu">注意:如果你看到yum没有安装软件，那么在你的基本操作系统上，停止firewalld服务&amp;然后重启docker &amp;然后再次启动一个不同名称的新容器&amp;它将开始工作。</strong></p></blockquote><ul class=""><li id="1f19" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">一旦这个软件被安装，你将在你的容器上得到一些命令。<strong class="kl hu">现在运行“ifconfig”命令</strong> <strong class="kl hu"> &amp;你会看到你的容器有一个全新的IP地址和相应的网络适配器。</strong>接下来，如果你运行“ls”命令，你会看到它有所有操作系统特定的文件&amp;文件夹。</li><li id="50c3" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">现在要从容器中退出只需运行<strong class="kl hu">【退出】</strong> &amp; <strong class="kl hu">你就会看到你再次登陆到你的Docker主机的终端上。</strong>接下来，如果你运行<strong class="kl hu"> "docker ps" </strong>，你会看到没有容器在运行，但是如果你想<strong class="kl hu">看到停止的容器，那么你可以运行" docker ps -a "。</strong>请参考下面提到的截图…</li></ul><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es my"><img src="../Images/2133776b4c885599a2f6ddb281c9bf0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ll5218TOjvcabqFHtPXl2w.png"/></div></div></figure><p id="d770" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">要启动一个停止的容器&amp;然后进入正在运行的容器，您可以分别使用下面提到的命令… </strong></p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="ba9e" class="mp jj ht ml b fi mq mr l ms mt">docker start os2<br/>docker attach os2</span></pre><figure class="kb kc kd ke fd hk er es paragraph-image"><div class="er es mz"><img src="../Images/d7b05c87ded45284171accf61db79aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*SKS4_PTPwkcEIJPVcpTDww.png"/></div></figure><blockquote class="lt lu lv"><p id="4a18" class="kj kk lw kl b km kn iu ko kp kq ix kr lx kt ku kv ly kx ky kz lz lb lc ld le hb bi translated">Docker有很多概念，但作为一个基本的起点，这些知识足以进行下一步的实践。</p></blockquote><h1 id="9053" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">创建Docker图像:</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/008a1744182bc567d1c2694af2e46a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQsylyqGbk9HQXgi_MnCDA.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">使用Canva自制</figcaption></figure><p id="7873" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">现在是时候打造我们自己的Docker形象了。有两种方法可以做到这一点——Docker Commit命令&amp; Dockerfile概念。我想说说Dockerfile。</p><ul class=""><li id="608e" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated"><strong class="kl hu">记住一件事，我们的最终目标不仅仅是发布操作系统。我们的最终目标是在容器中运行我们的程序。</strong>因此，我们可以发布一个容器&amp;来运行我们的程序，但是<strong class="kl hu">在工业中我们并行运行数千个容器。</strong></li><li id="a419" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">因此，不可能在每个容器中手动运行程序。所以我们可以做的是——我们可以将所有信息放入Docker映像&amp;中。一旦我们启动容器，我们的程序也将启动&amp;,直到我们的程序运行为止。容器将运行&amp;。一旦程序关闭，我们不再需要容器，因此它将自动停止。</li></ul><p id="34b7" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">这就是我们想要创建Docker图像的原因&amp;为此，我们使用了<strong class="kl hu">“Docker file”</strong>概念。在您的Docker主机上创建一个文件夹作为您的工作区&amp;，然后在工作区内使用vim或gedit编辑器创建一个文件。<strong class="kl hu">这里需要注意的一件小事是，文件名应该是“Dockerfile”。</strong>每个&amp;文件名的每个字符都应该和我写的一模一样。</p><p id="5b5b" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">现在在你的“Dockerfile”中放入下面提到的代码… </strong></p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="c0bc" class="mp jj ht ml b fi mq mr l ms mt">FROM centos:8<br/>RUN yum install net-tools -y<br/>CMD ifconfig</span></pre><ul class=""><li id="2a2c" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">保存文件&amp;现在让我们了解这个文件是如何编写的。<strong class="kl hu"> Dockerfile有自己特定的关键字来讲述某些事情。</strong>就像我们使用<strong class="kl hu"> "FROM" </strong>关键字来告诉使用<strong class="kl hu"> "centos:8" </strong> image &amp;一样，我们将在这个图像的顶部运行我们的程序。</li><li id="5369" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">接下来运行任何程序我们都需要安装所需的软件，为此我们使用<strong class="kl hu">“运行”</strong>关键字&amp;告诉使用<strong class="kl hu">“yum install net-tools-y”命令来安装软件。</strong>只需注意一件事，因为我们使用<strong class="kl hu"> "centos:8" </strong>来运行我们的程序，这就是为什么我们使用<strong class="kl hu"> "yum" </strong>命令来安装软件。</li><li id="109f" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">接下来我们使用<strong class="kl hu"> "CMD" </strong>关键字来告诉一旦容器启动就运行<strong class="kl hu"> "ifconfig" </strong>命令。</li></ul><p id="8ce5" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">现在是建立形象的时候了。为此，在“docker file”…所在的同一文件夹中运行下面提到的命令</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="6b63" class="mp jj ht ml b fi mq mr l ms mt">docker build -t myimage:v1 .</span></pre><ul class=""><li id="c782" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">这里我们使用<strong class="kl hu"> "docker build" </strong>命令来构建图像&amp; <strong class="kl hu">以给图像一个名称/标签，我们使用"-t "选项</strong>。然后我们给我们的图像加上标签<strong class="kl hu">“my image”</strong>&amp;<strong class="kl hu">“v1”</strong>是我们图像的版本。你可以给任何你想要的标签&amp;版本名，但是在这部分要尽量符合逻辑。</li><li id="ed1d" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">最后，我们使用<strong class="kl hu">。”</strong>告诉docker，Dockerfile就在我们运行<strong class="kl hu">“docker build”</strong>命令的地方。<strong class="kl hu">如果你注意到这里我们没有提到任何文件名，因为我已经告诉过你这个文件名“Dockerfile”是固定的</strong>。因此，在你当前的工作空间中，它会寻找那个文件&amp;并从它开始构建镜像。</li></ul><p id="f84d" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">现在你会看到你的图像准备好了。因此，再次从这个映像创建容器，您可以运行… </p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="1913" class="mp jj ht ml b fi mq mr l ms mt">docker run --name myos1 myimage:v1</span></pre><ul class=""><li id="bbd3" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">这里我们没有使用<strong class="kl hu">-it "</strong>，因为我们不想使用容器的终端。因此，<strong class="kl hu">正如你现在可以意识到的，我们正在启动一个容器&amp;命名为“myos1”，&amp;它是从我们自己创建的Docker映像启动的。</strong>查看以下截图，以供参考…</li></ul><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es na"><img src="../Images/55a676e442a28ddaeedaf56b8cfca517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEISPf7Vn_Fh4geM95pnVw.png"/></div></div></figure><ul class=""><li id="7fc4" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">你会看到在1或2秒内，你从你的容器&amp;中得到<strong class="kl hu">“ifconfig”</strong>命令的o/p，最好的部分是你甚至不会意识到当你登录&amp;从容器的操作系统中注销。</li><li id="8481" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated"><strong class="kl hu">你为什么注销得这么快？因为我已经告诉过你，我们使用容器来运行我们的程序。<strong class="kl hu">现在，由于“ifconfig”cmd运行时间不到1秒，所以我们的容器将只在那个时刻运行。</strong></strong></li></ul><h1 id="9736" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">删除旧容器:</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/0eea29ea13c372b59a9da1825e1f2bde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kjVuWZ2Z_M56mWhzl92h0g.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">使用Canva自制</figcaption></figure><p id="2424" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">接下来，如果您运行<strong class="kl hu">“docker PS-a”</strong>，您将看到您的<strong class="kl hu">“myos 1”</strong>容器在几分钟前刚刚启动。</p><ul class=""><li id="cb56" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated"><strong class="kl hu">有一点需要注意，在Docker中，如果你创建了一个名为“myos5”的容器，那么以后你不能再使用“docker run”来运行同名的容器，因为它已经存在了。</strong></li><li id="f9e9" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">所以，我们可以做的是，每次启动容器时，我们都可以更改名称。但是有一点要注意，容器中的数据实际上是存储在你的硬盘中的，意味着很快你就会感到空间不足。那么如何移除一个容器呢？</li></ul><p id="25d0" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">运行下述命令… </strong></p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="f9a7" class="mp jj ht ml b fi mq mr l ms mt">docker rm myos1</span></pre><ul class=""><li id="d633" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">在这里，除了提供容器名，你还可以提供容器id。现在，如果您运行<strong class="kl hu">“docker PS-a”</strong>，您将看到<strong class="kl hu">“myos 1”</strong>容器已移除。</li></ul><h2 id="866e" class="mp jj ht bd jk nb nc nd jo ne nf ng js ks nh ni ju kw nj nk jw la nl nm jy nn bi translated">在Linux上，我们通常遵循一个快速的技巧来删除所有的容器，那就是运行下面提到的命令…</h2><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="6c9d" class="mp jj ht ml b fi mq mr l ms mt">docker rm -f `docker ps -aq`</span></pre><ul class=""><li id="5a6c" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">这里我们使用<strong class="kl hu">-f "</strong>选项，意思是强行删除当前正在运行的容器。接下来，我们使用反引号来告诉将反引号内的命令输出提供给<strong class="kl hu"> "docker rm" </strong>命令。最后<strong class="kl hu">“docker PS-AQ”</strong>帮助找到所有的容器id。</li></ul><p id="482f" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">类似地，Docker中有数百个命令选项来实现不同种类的用例。我相信现在我们已经了解了“创建自己的docker映像”&amp;如何启动容器。我们可以去参加最后的实战了！！！</p><h1 id="1c89" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">在Docker容器中运行GUI应用程序:</h1><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/d94a8feb9d7e84941f591c50c8f27248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TT48JXoVMZ4dtlZ8Zp2QbA.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">使用Canva自制</figcaption></figure><h2 id="3240" class="mp jj ht bd jk nb nc nd jo ne nf ng js ks nh ni ju kw nj nk jw la nl nm jy nn bi translated">定制的Docker图像构建:</h2><p id="8e88" class="pw-post-body-paragraph kj kk ht kl b km mb iu ko kp mc ix kr ks mg ku kv kw mh ky kz la mi lc ld le hb bi translated">假设我们想在Docker容器中运行“firefox”程序。因此，我们可以做的是——我们可以创建一个Docker映像，可以说无论何时任何容器从这个映像启动，运行Firefox程序。因此，让我们创建“docker file”…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="3770" class="mp jj ht ml b fi mq mr l ms mt">FROM centos:8<br/>RUN yum install firefox -y<br/>CMD firefox</span></pre><ul class=""><li id="6656" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">我们可以注意到，这是一个简短的基本<strong class="kl hu">【docker file】</strong>，其中使用了<strong class="kl hu">【centos:8】</strong>镜像&amp;安装了<strong class="kl hu">【Firefox】</strong>软件。<strong class="kl hu">最后，使用“CMD”关键字启动Firefox软件。</strong></li></ul><p id="e5b5" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">现在让我们构建图像……</strong></p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="ba45" class="mp jj ht ml b fi mq mr l ms mt">docker build -t myfirefox:v1 .</span></pre><p id="4adf" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated">构建完成后，让我们启动容器。所以像上次一样运行下面提到的代码…</p><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="e84f" class="mp jj ht ml b fi mq mr l ms mt">docker run -it --name firefoxos1 myfirefox:v1</span></pre><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es no"><img src="../Images/20fbc286256297f292496047258e5ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6h722_GddaWkIqCJkJ6VaA.png"/></div></div></figure><h2 id="0663" class="mp jj ht bd jk nb nc nd jo ne nf ng js ks nh ni ju kw nj nk jw la nl nm jy nn bi translated">您将看到错误&amp;最终Firefox将无法成功启动。为什么？</h2><ul class=""><li id="c0b4" class="lf lg ht kl b km mb kp mc ks md kw me la mf le lk ll lm ln bi translated">逻辑是Firefox需要一个环境变量来运行它自己。这个shell变量实际上帮助Firefox将它gui标签投射到屏幕上。现在我们肯定知道Docker容器没有gui屏幕来运行Firefox，这就是为什么我们需要告诉容器使用主机系统的gui屏幕&amp;，为此我们将使用选项<strong class="kl hu"> "env" </strong>在<strong class="kl hu"> "docker run" </strong>命令中使用该环境变量。因此，运行下面提到的命令…</li></ul><pre class="kb kc kd ke fd mk ml mm mn aw mo bi"><span id="37b8" class="mp jj ht ml b fi mq mr l ms mt">docker run -it --name firefoxos2 --env="DISPLAY" --net=host myfirefox:v1</span></pre><ul class=""><li id="5abe" class="lf lg ht kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated"><strong class="kl hu">很明显，你可能会想为什么我们在这个命令中需要“net”选项。</strong>在这里，这是一个网络概念，但是如果我们想要理解basic，那么你可以认为这个选项会将你的docker容器与你的RHEL8 docker主机的主网卡连接起来。实际上需要这个选项，因为启动container后，它将在GUI窗口中为我们提供Firefox软件，现在无论我们在这个窗口中搜索什么，都需要通过Docker主机进入Docker容器。为了连接，我们将Docker主机网络添加到容器中。</li></ul><p id="3405" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">就这样…现在让我们在下面的GIF中看看它的实际效果… </strong></p><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es np"><img src="../Images/9c0f8f3c6b54b29ef2ba252237cce8bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ohfY8twmoqE_EkYJoRLMwQ.gif"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">过程演示</figcaption></figure><h1 id="a98f" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">最后的话:</h1><ul class=""><li id="d182" class="lf lg ht kl b km mb kp mc ks md kw me la mf le lk ll lm ln bi translated"><strong class="kl hu">当今行业中有成千上万的公司在使用容器技术，因为它速度超快，具有很好的可扩展性&amp;显然它是安全的。</strong> Docker有很多可能性&amp;学习Docker在当今的行业中非常有帮助。要了解更多关于Docker的信息，你可以参考这个YouTube播放列表——https://youtube.com/playlist?<a class="ae mj" href="https://youtube.com/playlist?list=PLAi9X1uG6jZ30QGz7FZ55A27jPeY8EwkE" rel="noopener ugc nofollow" target="_blank"><strong class="kl hu">list = plai 9 x 1 ug 6 JZ 30 qgz 7 FZ 55 a 27 jpey 8 ewke</strong>T5】</a></li><li id="ab16" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">我尽了最大努力来谈论Docker &amp;它的可能性。我们还看到了一个非常有趣的。我只想说，最后，如果你喜欢这个博客，请给一些掌声，并在评论中留下你的想法。</li><li id="e767" class="lf lg ht kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">我一直在写关于机器学习、DevOps自动化、云计算、大数据等方面的博客。因此，如果你想阅读我以后的博客，请关注我的媒体。您也可以在LinkedIn上ping我，在下面查看我的LinkedIn个人资料…</li></ul><div class="hh hi ez fb hj nq"><a href="https://www.linkedin.com/in/raktimmidya/" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab dw"><div class="ns ab nt cl cj nu"><h2 class="bd hu fi z dy nv ea eb nw ed ef hs bi translated">Raktim Midya -微软学生学习大使(测试版)-微软| LinkedIn</h2><div class="nx l"><h3 class="bd b fi z dy nv ea eb nw ed ef dx translated">★我是一名技术爱好者，致力于更好地理解不同热门技术领域背后的核心概念…</h3></div><div class="ny l"><p class="bd b fp z dy nv ea eb nw ed ef dx translated">www.linkedin.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe hp nq"/></div></div></a></div><p id="b9ad" class="pw-post-body-paragraph kj kk ht kl b km kn iu ko kp kq ix kr ks kt ku kv kw kx ky kz la lb lc ld le hb bi translated"><strong class="kl hu">感谢大家的阅读。就这样…结束…😊</strong></p><figure class="kb kc kd ke fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es of"><img src="../Images/5a7a34d0698d7f08687d261649b384d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r5VeD2fV04iDy8xfmaauHA.png"/></div></div></figure></div></div>    
</body>
</html>