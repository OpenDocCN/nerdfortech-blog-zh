<html>
<head>
<title>Rails Association — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rails 协会—第 1 部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/rails-association-part-1-865c1373fb22?source=collection_archive---------2-----------------------#2021-09-11">https://medium.com/nerd-for-tech/rails-association-part-1-865c1373fb22?source=collection_archive---------2-----------------------#2021-09-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d742" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么</strong>，<strong class="ih hj">为什么</strong>，<strong class="ih hj">如何</strong> &amp; <strong class="ih hj"> 3 种类型</strong>的联想论述。</p><h1 id="dbc2" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">先决条件:</h1><ul class=""><li id="97f8" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated"><a class="ae km" href="https://juzer-shakir.medium.com/rails-active-record-basics-32852cc1b2b9" rel="noopener">活动记录基础知识</a></li><li id="9812" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc ki kj kk kl bi translated"><strong class="ih hj"> Rails 迁移</strong> <br/> - <a class="ae km" href="https://juzer-shakir.medium.com/rails-migration-part-1-8ce3af467ace" rel="noopener">生成迁移文件</a>(<strong class="ih hj">Part 1</strong>)<br/>-<a class="ae km" href="https://juzer-shakir.medium.com/rails-migration-part-2-c2ca189e9f57" rel="noopener">执行迁移文件</a>(<strong class="ih hj">Part 2</strong>)<br/>-<a class="ae km" href="https://juzer-shakir.medium.com/rails-migration-part-3-11ae1c2c1b0a" rel="noopener">更新现有表格</a> ( <strong class="ih hj"> Part 3 </strong>)</li></ul></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es kz"><img src="../Images/610ae2ec49c76bcdb77b6479252be838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aL2CYI9WPTGgR5-BCLaoIQ.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">本文中的示例将涵盖以下主题</figcaption></figure></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="02b8" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">目录</h1><p id="a791" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated">↣ <a class="ae km" href="#2795" rel="noopener ugc nofollow"> <strong class="ih hj">什么是联想？</strong> </a></p><p id="3fe5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">↣为什么会联想到<a class="ae km" href="#b5c4" rel="noopener ugc nofollow"> <strong class="ih hj">？</strong> </a></p><p id="0422" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">↣ <a class="ae km" href="#827f" rel="noopener ugc nofollow"> <strong class="ih hj">如何建立模型之间的连接？</strong> </a> <br/> ↪ <a class="ae km" href="#f9d7" rel="noopener ugc nofollow">无关联</a>t46】↪<a class="ae km" href="#d8ed" rel="noopener ugc nofollow">有关联</a></p><p id="5109" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">↣ <a class="ae km" href="#7328" rel="noopener ugc nofollow"> <strong class="ih hj">联想类型</strong> </a> <br/> ↪ <a class="ae km" href="#bcaa" rel="noopener ugc nofollow">属于 _ 属于</a> <br/> ↪ <a class="ae km" href="#cc55" rel="noopener ugc nofollow">有 _ 一个</a> <br/> ↪ <a class="ae km" href="#f889" rel="noopener ugc nofollow">有 _ 一个还是属于 _ 个？</a> <br/> ↪ <a class="ae km" href="#09b6" rel="noopener ugc nofollow">已经 _one —:通过</a></p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="2795" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">什么是联想？</h1><blockquote class="lx ly lz"><p id="438d" class="if ig ma ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated">关联是<a class="ae km" href="https://juzer-shakir.medium.com/rails-active-record-basics-32852cc1b2b9" rel="noopener">活动记录</a>的特征之一，它使我们能够通过模型或活动记录对象在两个或多个表的实例之间进行链接。</p></blockquote><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es me"><img src="../Images/a3cfd063a5f1cb200fa3c23e69a78e19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lk6ad3CQ8K1NjAnBWKhWkw.png"/></div></div></figure></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="b5c4" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">为什么是联想？</h1><p id="cc9c" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated">当我们想要通过另一个表<code class="du mf mg mh mi b">A</code>提取一个表<code class="du mf mg mh mi b">B</code>的一个或多个实例的数据时，这个工具非常方便。</p><p id="3132" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们考虑一个人有一个或多个银行账户的情况。我们为它创建两个不同的<em class="ma">表</em>，首先，它包含人员的详细信息，让我们称这个表为<code class="du mf mg mh mi b">users</code>，另一个表为<code class="du mf mg mh mi b">bank_details</code>，它包含与他们的银行相关的详细信息。</p><p id="1436" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们有许多<em class="ma">用户</em>，其中每个<em class="ma">用户</em>都有一个或多个<em class="ma">银行账户</em>，并且我们想要提取<em class="ma">单个用户的银行详细信息</em>的数据，那么 rails 不知道要提取那个特定<em class="ma">用户</em>的哪个<em class="ma">银行详细信息</em>，因为我们还没有在<em class="ma">表</em>之间设置任何关系。</p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es mj"><img src="../Images/87861ececec7aea9b4c926e63ed127cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mI4wJC22ELUaXbykeokbqA.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">没有外键和表之间的关联，不可能链接。</figcaption></figure><p id="5367" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想知道我们将在这个例子中使用哪个关联，它将是<code class="du mf mg mh mi b">has_many-belongs_to</code>类型的关联。</p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="827f" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">如何设置模型之间的连接:</h1><p id="f9d7" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated"><strong class="ih hj">没有联想:</strong></p><p id="0101" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，有一种方法可以提取一个<em class="ma">用户</em> <strong class="ih hj">的<em class="ma">银行明细</em>，而不需要</strong>在模型文件中显式声明关联，方法是通过迁移给出的<code class="du mf mg mh mi b">reference</code>方法提供一个<em class="ma">外键</em>到<code class="du mf mg mh mi b">bank_details</code> <em class="ma">表</em>。</p><p id="ebba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为什么<em class="ma">外键</em>在</strong> <code class="du mf mg mh mi b"><strong class="ih hj">bank_details</strong></code> <strong class="ih hj">表上？</strong> <strong class="ih hj">是因为</strong> <code class="du mf mg mh mi b"><strong class="ih hj">bank_details</strong></code> <strong class="ih hj">实例提供了更多关于</strong> <code class="du mf mg mh mi b"><strong class="ih hj">users</strong></code> <strong class="ih hj">表的特定实例的数据。</strong></p><p id="c046" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在之前的<a class="ae km" href="https://juzer-shakir.medium.com/rails-migration-part-1-8ce3af467ace" rel="noopener">文章</a>中解释过<strong class="ih hj"><em class="ma"/></strong>外键的定义和声明。</p><p id="b99f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在设置了<em class="ma">外键</em>后，让我们在<code class="du mf mg mh mi b">bank_details</code>表中输入银行数据:</p><p id="fd9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的<em class="ma">模型文件</em>:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="1a2e" class="mo je hi mi b fi mp mq l mr ms"># app/model/user.rb<br/>class User &lt; ApplicationRecord<br/>end</span><span id="5c79" class="mo je hi mi b fi mt mq l mr ms"># app/model/bank_detail.rb<br/>class BankDetail &lt; ApplicationRecord<br/>end</span></pre><p id="c053" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在终端中，首先，我们加载所需的<em class="ma">用户</em>:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="018f" class="mo je hi mi b fi mp mq l mr ms">user = User.find_by(name: "Juzer Shakir")</span></pre><p id="ab3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后设置<em class="ma">用户的银行详细信息</em>:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="d4a7" class="mo je hi mi b fi mp mq l mr ms">bank_detail = BankDetail.create(name: "ABC Bank", user_id: user.id)</span></pre><p id="5ff6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du mf mg mh mi b">user_id</code>是通过<em class="ma">迁移文件</em>中的<code class="du mf mg mh mi b">reference</code>方法设置的<em class="ma">外键</em>属性。我们为<em class="ma">用户</em> <code class="du mf mg mh mi b"><em class="ma">Juzer Shakir</em></code>创建一个新的<em class="ma">银行明细</em>，方法是将银行名称设置为<code class="du mf mg mh mi b">ABC Bank</code>，并将<em class="ma">外键</em>的值<strong class="ih hj">显式设置为<code class="du mf mg mh mi b">users</code>表中<code class="du mf mg mh mi b"><em class="ma">Juzer Shakir</em></code>的<em class="ma">主键</em>值。</strong></p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es mu"><img src="../Images/bbf83dc5b5a19e631b602783529e85d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*dypbT1HU8cNH5oBgZAHMIQ.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">没有关联，我们<strong class="bd jf">可以通过<strong class="bd jf">外键</strong>链接</strong>一个用户的一个或多个银行明细。</figcaption></figure><p id="0864" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，现在我们可以使用<em class="ma">外键</em>提取一个初始化用户的所有<em class="ma">银行详细信息</em>。</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="7294" class="mo je hi mi b fi mp mq l mr ms">bank_details = BankDetail.where(user_id: user.id)</span></pre><p id="b5a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想从我们的表<code class="du mf mg mh mi b">users</code>中删除一个特定的<em class="ma">用户</em>，并从<code class="du mf mg mh mi b">bank_details</code>表中删除其对应的<em class="ma">银行详细信息</em>，该怎么办？首先，我们将初始化用户<em class="ma">并提取其<em class="ma">银行数据</em>(按照上述步骤)，然后:</em></p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="197e" class="mo je hi mi b fi mp mq l mr ms">bank_details.each do | bank_detail |<br/>   bank_detail.destroy<br/>end<br/>user.destroy</span></pre><p id="ae0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们遍历<em class="ma">用户</em>的<em class="ma">银行账户</em>列表，然后<strong class="ih hj">手动删除每个账户，然后删除那个用户</strong>。这确保了<em class="ma">用户</em>的所有<em class="ma">银行详细信息</em>与<em class="ma">用户</em>一起被删除。</p><p id="81ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们看看在给定关联的情况下这是如何实现的:</p><h2 id="d8ed" class="mo je hi bd jf mv mw mx jj my mz na jn iq nb nc jr iu nd ne jv iy nf ng jz nh bi translated">有关联:</h2><p id="3fa6" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated">在<em class="ma">模型文件</em>中声明适当的<em class="ma">关联</em>后，我们在应用程序中调用几个有用的<em class="ma">模型方法</em>(在<a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-3-4074f71e771b#:~:text=Auto-generated%20methods%20%26%20options%20of%20association" rel="noopener">第 3 部分</a>中讨论过)，用它们我们可以操作<em class="ma">表</em>中的数据。</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="39be" class="mo je hi mi b fi mp mq l mr ms"># app/model/user.rb<br/>class User &lt; ApplicationRecord<br/>  has_many :bank_details, dependent: :destroy<br/>end</span><span id="1a56" class="mo je hi mi b fi mt mq l mr ms"># app/model/bank_detail.rb<br/>class BankDetail &lt; ApplicationRecord<br/>   belongs_to :user<br/>end</span></pre><p id="45e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为已初始化的<em class="ma">用户</em>创建一个新的<em class="ma">银行账户</em>:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="4925" class="mo je hi mi b fi mp mq l mr ms">bank_detail = user.bank_details.create(name: "DCB Bank")</span></pre><p id="cc39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看看我们如何使用关联的力量来适当地设置<em class="ma">外键</em>的值，并在<code class="du mf mg mh mi b">bank_details</code>表中创建一个新的实例，而不是显式地设置<em class="ma">外键</em>。</p><figure class="la lb lc ld fd le er es paragraph-image"><div class="er es ni"><img src="../Images/b663f795042f96b74c19b746e30433d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*UyyGmulSml1wNfesA2DK1Q.png"/></div></figure><p id="f121" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提取该<em class="ma">用户</em>的所有<em class="ma">银行明细</em>:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="bd7c" class="mo je hi mi b fi mp mq l mr ms">user.bank_details</span></pre><p id="2069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们希望<strong class="ih hj">删除</strong>用户<em class="ma">及其<em class="ma">银行详细信息</em>，这就简单多了:</em></p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="a3eb" class="mo je hi mi b fi mp mq l mr ms">user.destroy</span></pre><p id="0047" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提供给<code class="du mf mg mh mi b">User</code>模型的<code class="du mf mg mh mi b">:dependent</code>选项帮助删除了与该<em class="ma">用户</em>相关的所有<em class="ma">银行详细信息</em>。Rails 为不同类型的关联提供了许多其他的<em class="ma">选项</em>(更多信息请参见<a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-3-4074f71e771b#:~:text=Auto-generated%20methods%20%26%20options%20of%20association" rel="noopener">第 3 部分</a>)。</p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="7328" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">关联类型</h1><p id="3f82" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated"><em class="ma">活动记录</em>支持<strong class="ih hj"> 9 </strong> <strong class="ih hj">类型的<em class="ma">关联</em> </strong>有:</p><ol class=""><li id="95ee" class="kb kc hi ih b ii ij im in iq nj iu nk iy nl jc nm kj kk kl bi translated"><code class="du mf mg mh mi b"><a class="ae km" href="#bcaa" rel="noopener ugc nofollow">belongs_to</a></code></li><li id="987e" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><code class="du mf mg mh mi b"><a class="ae km" href="#cc55" rel="noopener ugc nofollow">has_one</a></code></li><li id="3949" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><code class="du mf mg mh mi b"><a class="ae km" href="#09b6" rel="noopener ugc nofollow">has_one </a></code><a class="ae km" href="#09b6" rel="noopener ugc nofollow">——</a><code class="du mf mg mh mi b"><a class="ae km" href="#09b6" rel="noopener ugc nofollow">:through</a></code></li><li id="dba3" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><code class="du mf mg mh mi b"><a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-2-a563f870e415#:~:text=and%20has_and_belongs_to_many%20associations.-,has_many,-has_many%20association%20links" rel="noopener">has_many</a></code></li><li id="2135" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><code class="du mf mg mh mi b"><a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-2-a563f870e415#:~:text=to%20primary%20key.-,has_many-%3Athrough,-has_many-%3Athrough%20association" rel="noopener">has_many </a></code><a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-2-a563f870e415#:~:text=to%20primary%20key.-,has_many-%3Athrough,-has_many-%3Athrough%20association" rel="noopener">——</a><code class="du mf mg mh mi b"><a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-2-a563f870e415#:~:text=to%20primary%20key.-,has_many-%3Athrough,-has_many-%3Athrough%20association" rel="noopener">:through</a></code></li><li id="68ef" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><code class="du mf mg mh mi b"><a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-2-a563f870e415#:~:text=without%20primary-key.-,has_and_belongs_to_many,-This%20HABTM%20association" rel="noopener">has_and_belongs_to_many</a></code></li><li id="9d60" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><a class="ae km" href="https://juzer-shakir.medium.com/polymorphic-a13c329151d0" rel="noopener">多态</a></li><li id="1d8d" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><a class="ae km" href="https://juzer-shakir.medium.com/self-join-91416fc5b75e" rel="noopener">自连接</a></li><li id="556e" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc nm kj kk kl bi translated"><a class="ae km" href="https://juzer-shakir.medium.com/single-table-inheritance-sti-769070972ea2" rel="noopener">单表继承</a></li></ol><p id="661d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文将涵盖前 3 个协会，# 4–6 将在<a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-2-a563f870e415" rel="noopener">第 2 部分</a>中涵盖，其余协会有其单独的文章。</p><p id="d2f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，现在让我们从第一个关联开始，<code class="du mf mg mh mi b">belongs_to</code>是所有关联中最简单和最常用的。</p><h1 id="bcaa" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">属于</h1><blockquote class="nn"><p id="f1c1" class="no np hi bd nq nr ns nt nu nv nw jc dx translated">“属于”建立了与另一个模型的关系，使得声明模型的每个实例(其中声明了<code class="du mf mg mh mi b">belongs_to</code>)恰好“属于”另一个模型的一个实例。</p></blockquote><p id="12e9" class="pw-post-body-paragraph if ig hi ih b ii nx ik il im ny io ip iq nz is it iu oa iw ix iy ob ja jb jc hb bi translated">这个定义是不言自明的，我们上面看到的例子就是例证。然而，我们也可以将其设置为<em class="ma">单向关联</em>，这意味着我们只从一侧设置与另一个<em class="ma">模型</em>的关系，而不是从两侧设置，这意味着我们只在一个<em class="ma">模型文件</em>中声明<code class="du mf mg mh mi b">belongs_to</code>。所以从上面举同样的例子，我们的<em class="ma">模型文件</em>现在<em class="ma"> </em>将会是:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="b556" class="mo je hi mi b fi mp mq l mr ms"># app/model/user.rb<br/>class User &lt; ApplicationRecord<br/>end</span><span id="1c93" class="mo je hi mi b fi mt mq l mr ms"># app/model/bank_detail.rb<br/>class BankDetail &lt; ApplicationRecord<br/>   belongs_to :user<br/>end</span></pre><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es oc"><img src="../Images/54391e1f0b83f5816f6d905f4c4cc093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHBvWScKnhpDTsnBqhypEA.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">两个表之间的单向连接</figcaption></figure><p id="46b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">单独在模型文件中声明一个</strong> <code class="du mf mg mh mi b"><strong class="ih hj">belongs_to</strong></code> <strong class="ih hj">并不能保证引用的一致性，但是通过<em class="ma">迁移</em> </strong> <em class="ma"> </em>声明的表中的<em class="ma">外键</em>为:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="9e06" class="mo je hi mi b fi mp mq l mr ms">create_table :bank_details do | t |<br/>    t.reference :user, foreign_key: true<br/>    #...<br/>end</span></pre><p id="1fc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<em class="ma">单向关系</em> p 中，<code class="du mf mg mh mi b">bank_details</code> <em class="ma">表</em>的每个实例都知道它的<em class="ma">用户</em>，但是<code class="du mf mg mh mi b">user</code> <em class="ma">表</em>的每个实例都不知道它们的<em class="ma">银行明细</em>。</p><p id="637c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了建立<em class="ma">双向关系</em>，我们可以将<em class="ma">型号</em>上的<code class="du mf mg mh mi b">has_one</code>或<code class="du mf mg mh mi b">has_many</code>与<code class="du mf mg mh mi b">belongs_to</code>结合使用到相对的<em class="ma">型号</em>，如上面的示例<a class="ae km" href="#827f" rel="noopener ugc nofollow">所示。</a></p><blockquote class="lx ly lz"><p id="03f7" class="if ig ma ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi">注意:</em> </strong> <br/>向<code class="du mf mg mh mi b">belongs_to</code>方法声明的表名将始终采用单数-蛇形。</p></blockquote></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="cc55" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">有一个</h1><blockquote class="nn"><p id="3027" class="no np hi bd nq nr ns nt nu nv nw jc dx translated"><code class="du mf mg mh mi b">has_one</code>关联将表<code class="du mf mg mh mi b">A</code>的任何实例设置为另一个表<code class="du mf mg mh mi b">B</code>的唯一实例。</p></blockquote><p id="f96f" class="pw-post-body-paragraph if ig hi ih b ii nx ik il im ny io ip iq nz is it iu oa iw ix iy ob ja jb jc hb bi translated">例如:“一个<em class="ma">用户</em>只能有<strong class="ih hj">一个</strong> <em class="ma">护照”</em>。我们将其关联设置如下:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="0c88" class="mo je hi mi b fi mp mq l mr ms"># app/model/user.rb<br/>class User &lt; ApplicationRecord<br/>   has_one :passport<br/>end</span><span id="1437" class="mo je hi mi b fi mt mq l mr ms"># app/model/passport.rb<br/>class Passport &lt; ApplicationRecord<br/>end</span></pre><p id="46ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这设置了一个<em class="ma">单向关系</em>。因此作为值传递给<code class="du mf mg mh mi b">has_one</code>的<em class="ma">表</em>应该有一个<em class="ma">外键</em>，该外键引用声明<code class="du mf mg mh mi b">has_one</code>的模型。在我们的例子中，<code class="du mf mg mh mi b">passport</code> <em class="ma">表</em>应该有一个引用<code class="du mf mg mh mi b">user</code> <em class="ma">表</em>的<em class="ma">外键</em>。</p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es od"><img src="../Images/db23f2f0406e5685ff648e72dcafb065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wfAMdGZ-EmGArf3O1LwfaA.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">两个表之间的单向连接</figcaption></figure><p id="9bdb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常，关联在两个方向上工作，通过要求在两个不同的模型<em class="ma">上声明关联来建立一个<strong class="ih hj">双向关联</strong>。</em>为了使我们的示例<em class="ma">双向，</em>我们在另一个模型上设置了一个<code class="du mf mg mh mi b">belongs_to</code>关联(更多关于<em class="ma">双向</em>的信息请参见<a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-3-4074f71e771b" rel="noopener">第 3 部分</a>):</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="4790" class="mo je hi mi b fi mp mq l mr ms"># app/model/user.rb<br/>class User &lt; ApplicationRecord<br/>   has_one :passport<br/>end</span><span id="27db" class="mo je hi mi b fi mt mq l mr ms"># app/model/passport.rb<br/>class Passport &lt; ApplicationRecord<br/>   belongs_to :user<br/>end</span></pre><p id="c5b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在数据库中创建一个新的<em class="ma">用户</em>及其<em class="ma"> passport </em>实例，启动您的终端，导航到一个适当的目录并运行<code class="du mf mg mh mi b"><strong class="ih hj">rails c</strong></code> <strong class="ih hj"> </strong>或<strong class="ih hj"> </strong> <code class="du mf mg mh mi b"><strong class="ih hj">rails console</strong></code></p><ul class=""><li id="9da2" class="kb kc hi ih b ii ij im in iq nj iu nk iy nl jc ki kj kk kl bi translated">在<code class="du mf mg mh mi b">users</code>表中创建一个新实例:</li></ul><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="d34c" class="mo je hi mi b fi mp mq l mr ms">$ u = User.create(name: "Akshay")<br/>=&gt; #&lt;User id: 1, name: "Akshay", created_at: "##", updated_at: "##"&gt;</span></pre><ul class=""><li id="65d5" class="kb kc hi ih b ii ij im in iq nj iu nk iy nl jc ki kj kk kl bi translated">创建那个<em class="ma">用户的<em class="ma">护照</em>，在<em class="ma"> </em> <code class="du mf mg mh mi b">passports</code> <em class="ma"> </em>表<em class="ma"> : </em>中新建一个</em>实例</li></ul><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="36ae" class="mo je hi mi b fi mp mq l mr ms">$ u.passport = Passport.create(number: 97645)<br/>=&gt; #&lt;Passport id: 1, number: 97645, user_id: 1, created_at: "##", updated_at: "##"&gt; </span></pre><p id="1e1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，<code class="du mf mg mh mi b">user_id</code>(又名。<em class="ma">外键</em>链接到我们创建的<em class="ma">用户</em>的<em class="ma">主键</em> ( <code class="du mf mg mh mi b">id</code>)。现在提取一个<em class="ma">用户</em>s’<em class="ma">护照</em>:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="0a56" class="mo je hi mi b fi mp mq l mr ms">$ u.passport</span></pre><p id="4879" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者从<code class="du mf mg mh mi b">passports</code>表中提取一个<em class="ma">用户</em>，首先我们从<em class="ma">护照</em>表中加载一个实例:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="b939" class="mo je hi mi b fi mp mq l mr ms">$ p = Passport.find(1)<br/>=&gt; #&lt;Passport id: 1, number: 97645, user_id: 1, created_at: "##", updated_at: "##"&gt;</span><span id="baca" class="mo je hi mi b fi mt mq l mr ms">$ p.user<br/>=&gt; #&lt;User id: 1, name: "Akshay", created_at: "##", updated_at: "##"&gt; </span></pre><p id="52ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给<em class="ma">类对象</em>的<code class="du mf mg mh mi b">passport</code> &amp; <code class="du mf mg mh mi b">user</code>实例方法是由<em class="ma">活动记录</em>创建的，因为<em class="ma"> </em>我们给这些<em class="ma">值、</em> <code class="du mf mg mh mi b"><em class="ma">:</em>passport</code> &amp; <code class="du mf mg mh mi b">:user</code>，给我们的<em class="ma">关联</em> <em class="ma">方法(has _ one/belong _ to)</em>，它们链接到适当的<em class="ma">模型类<em class="ma"/></em></p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="f889" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">有一个或属于？</h1><p id="9de4" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated">要在两个<em class="ma">模型</em>之间设置一个<em class="ma">一对一的</em>关系，我们可以使用<code class="du mf mg mh mi b">has_one</code>和<code class="du mf mg mh mi b">belongs_to</code>的组合，但是我们如何确切地知道哪个模型要用<code class="du mf mg mh mi b">has_one</code>或<code class="du mf mg mh mi b">belongs_to</code>来声明呢？</p><p id="ca38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">答案就在你的数据里！比如，<strong class="ih hj"> <em class="ma">一个人只有一部智能手机</em> </strong>，我们有一部<em class="ma">型号</em>命名为<code class="du mf mg mh mi b">Person</code>和一部<code class="du mf mg mh mi b">Smartphone</code>。因此，在<code class="du mf mg mh mi b">Person</code> s' <em class="ma">模型中，</em>我们声明<code class="du mf mg mh mi b">has_one</code>关联，因为我们的数据表明一个<em class="ma">人</em>只能拥有<strong class="ih hj">一部</strong>智能手机，并且因为我们知道哪个模型具有<code class="du mf mg mh mi b">has_one</code>关联，所以另一个模型将具有<code class="du mf mg mh mi b">belongs_to</code>关联。然而，如果我们交换关联，这将意味着<em class="ma">‘一部智能手机只有一个人’，</em>这与我们的例子相反。</p><p id="67f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您知道哪个模型声明了一个<code class="du mf mg mh mi b">belongs_to</code>关联，我们就可以通过<em class="ma">迁移</em>为相应的<em class="ma">表</em>设置一个<em class="ma">外键</em>。</p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="09b6" class="jd je hi bd jf jg lp ji jj jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka bi translated">has_one —:通过</h1><p id="d801" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated">在这个关联中，链接模型的概念类似于<code class="du mf mg mh mi b">has_one</code>关联，但是我们需要 3 个模型，而不是 2 个。因此...</p><blockquote class="nn"><p id="f933" class="no np hi bd nq nr ns nt nu nv nw jc dx translated"><code class="du mf mg mh mi b">has_one-:through</code>关联在 3 个模型之间建立一对一的连接，其中第一个模型的实例可以通过第二个模型链接到第三个模型，其中第二个&amp;第三个模型包括一个外键。</p></blockquote><p id="b8f9" class="pw-post-body-paragraph if ig hi ih b ii nx ik il im ny io ip iq nz is it iu oa iw ix iy ob ja jb jc hb bi translated">为了更好地理解这一点，让我们以“<strong class="ih hj">一个人通过其亚马逊账户拥有一个亚马逊支付账户”为例。</strong></p><p id="8b04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了实现上面的例子，我们将需要数据库中的 3 个<em class="ma">表</em>，并且在它们对应的<em class="ma">模型文件</em>中，我们将设置以下<em class="ma">关联</em>:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="8161" class="mo je hi mi b fi mp mq l mr ms"># app/model/person.rb<br/>class Person &lt; ApplicationRecord<br/>   has_one :amazon_account<br/>   has_one :amazon_payment, through: :amazon_account<br/>end</span><span id="e631" class="mo je hi mi b fi mt mq l mr ms"># app/model/amazon_account.rb<br/>class AmazonAccount &lt; ApplicationRecord<br/>   belongs_to :person<br/>   has_one :amazon_payment<br/>end</span><span id="6c11" class="mo je hi mi b fi mt mq l mr ms"># app/model/amazon_payment.rb<br/>class AmazonPayment &lt; ApplicationRecord<br/>   belongs_to :amazon_account<br/>end</span></pre><p id="e436" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是<em class="ma">模型</em>如何链接的可视化表示:</p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es oe"><img src="../Images/6496cf2d6aae8d556e887ae3640806e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cGul3Ro5g_lOhe-KF2desQ.png"/></div></div></figure><p id="67d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种关联使我们能够直接提取<em class="ma">个人的亚马逊支付</em> <strong class="ih hj">的数据，而不是首先提取<em class="ma">个人的亚马逊账户</em>的数据，然后提取其<em class="ma">亚马逊支付</em>的数据。为了更好地理解，让我们为<em class="ma">表</em>设置一些数据:</strong></p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="f38c" class="mo je hi mi b fi mp mq l mr ms">$ person = Person.create(name: "Shourya Roy", age: 25, gender: "Male", city: "New York")</span></pre><p id="7e69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ma">关联</em>使我们能够通过<code class="du mf mg mh mi b">.amazon_account</code>方法访问<code class="du mf mg mh mi b">person</code>s’<em class="ma">亚马逊账户</em>到类<code class="du mf mg mh mi b">Person</code>的类对象。</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="39bb" class="mo je hi mi b fi mp mq l mr ms">$ person.amazon_account<br/>=&gt; nil</span></pre><p id="1cde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于我们<strong class="ih hj">还没有</strong>设置那个<code class="du mf mg mh mi b">person</code>s’<em class="ma">亚马逊账户</em>的任何数据，它将返回值为<code class="du mf mg mh mi b">nil</code>，所以我们来设置一下:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="b471" class="mo je hi mi b fi mp mq l mr ms">$ person.amazon_account = AmazonAccount.create(public_name: "SRoy", email: "abc@yahoo")<br/>=&gt; #&lt;AmazonAccount id: 1, public_name: "SRoy", profile_photo: nil, email: "abc@yahoo", about: nil, person_id: 1, created_at: "##", updated_at: "##"&gt;</span></pre><p id="ae2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du mf mg mh mi b">person_id</code>链接<em class="ma">亚马逊账户</em>的实例来修正<em class="ma"> </em> <code class="du mf mg mh mi b">person</code>。现在要设置<code class="du mf mg mh mi b">person</code>的<em class="ma">亚马逊支付</em>，我们需要通过一个<em class="ma">亚马逊账户</em>来设置。</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="b633" class="mo je hi mi b fi mp mq l mr ms">$ acc = AmazonAccount.first</span><span id="0c5e" class="mo je hi mi b fi mt mq l mr ms">$ acc.amazon_payment = AmazonPayment.create(upi: "12345@xyz", cashback: 14.00, balance: 29.00)<br/>=&gt; #&lt;AmazonPayment id: 1, cashback: 14.0, upi: "12345@xyz", balance: 29.0, amazon_account_id: 1, created_at: "##", updated_at: "##"&gt;</span></pre><p id="16b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将上面设置的数据可视化:</p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es of"><img src="../Images/4cb7db54527a3deffb0be0b4a1e20089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AQkKSiRsT-l7Ky1bL_tCRQ.png"/></div></div></figure><p id="24ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提取一个<code class="du mf mg mh mi b">person</code>的所有<em class="ma">亚马逊支付</em>细节:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="02d6" class="mo je hi mi b fi mp mq l mr ms">person.amazon_payment</span></pre><p id="510b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了只提取那个<em class="ma">用户</em>的<code class="du mf mg mh mi b">balance</code>值:</p><pre class="la lb lc ld fd mk mi ml mm aw mn bi"><span id="9b9e" class="mo je hi mi b fi mp mq l mr ms">person.amazon_payment.balance<br/>= 29.00</span></pre></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><p id="8388" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其余的关联<code class="du mf mg mh mi b">has_many</code>、<code class="du mf mg mh mi b">has_many-:through</code>和<code class="du mf mg mh mi b">has_and_belongs_to_many</code>在<a class="ae km" href="https://juzer-shakir.medium.com/rails-association-part-2-a563f870e415" rel="noopener">轨道关联—第 2 部分</a>中详细讨论。那里见！</p></div></div>    
</body>
</html>