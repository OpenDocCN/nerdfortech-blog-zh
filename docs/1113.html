<html>
<head>
<title>Transcribe audio from video with Azure Cognitive Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Azure 认知服务从视频转录音频</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/transcribe-audio-from-video-with-azure-cognitive-services-a4589a12d74f?source=collection_archive---------2-----------------------#2021-03-05">https://medium.com/nerd-for-tech/transcribe-audio-from-video-with-azure-cognitive-services-a4589a12d74f?source=collection_archive---------2-----------------------#2021-03-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1bed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然我们在分析结构化和半结构化数据方面取得了长足的进步，但非结构化数据仍然落后。当然，第三种类型提出了其他两种类型中没有的挑战，但是我们正在稳步地为这项工作找到更多的选择和工具。</p><p id="9f80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如所料，其中一个工具是人工智能。微软 Azure 为这项工作提供了一些有趣的选项，即<a class="ae jd" href="https://azure.microsoft.com/en-us/services/cognitive-services/" rel="noopener ugc nofollow" target="_blank">认知服务</a>。根据他们的描述，</p><blockquote class="je jf jg"><p id="7f76" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">“认知服务让每个开发人员都可以接触到人工智能，而不需要机器学习专业知识”。</p></blockquote><p id="b37e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我将通过向您展示如何使用认知服务的语音服务从音频转录语音，向您介绍如何在实践中实现这种描述。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/dd3c0932a6f49281260c718106b72164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihZp7V05S0lbblrbx7aTJA.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">教程图</figcaption></figure><h1 id="babd" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">先决条件</h1><ul class=""><li id="4591" class="kz la hi ih b ii lb im lc iq ld iu le iy lf jc lg lh li lj bi translated">Azure 订阅</li><li id="b219" class="kz la hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">Azure 中的认知服务或语音资源</li><li id="ed9d" class="kz la hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">Python(将所有东西粘在一起)</li><li id="dce8" class="kz la hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated"><a class="ae jd" href="https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=script%2Cwindowsinstall&amp;pivots=programming-language-python" rel="noopener ugc nofollow" target="_blank">针对 Python 的 Azure Speech SDK</a></li><li id="cd13" class="kz la hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated"><a class="ae jd" href="https://pypi.org/project/moviepy/" rel="noopener ugc nofollow" target="_blank"> MoviePy </a>影音分离库</li></ul><h1 id="1ae7" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">提取音频</h1><p id="985a" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">如果您从视频开始，那么第一步是提取音频。这是 MoviePy 中一个简单的操作。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ls lt l"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">提取视频音频</figcaption></figure><p id="9393" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而。wav 文件大于. mp3，我们需要它用于认知服务。</p><h1 id="7602" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">设置身份验证</h1><p id="2f13" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">假设你的 Azure 订阅中已经有了认知服务或语音资源，我们可以在下面的 Python 片段中处理认证部分。</p><p id="d7a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，语音是认知服务的一部分，因此我们可以在这里互换使用。然而，我们可以使用语音，因为我们有一个特定的需求。</p><p id="b48d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的资源中，导航到“Keys and Endpoint”菜单(在“resource blade ”/左侧窗格上),复制 KEY 1 和 location。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lu"><img src="../Images/c2d4a0d2843d9af4591bd59966653130.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0lI9ZFotBCSrwE5-qh24A.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">服务密钥</figcaption></figure><p id="3c6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是处理认证的代码片段。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ls lt l"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">使用 SDK 进行身份验证</figcaption></figure><h1 id="9cdd" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">转录音频</h1><p id="ceaf" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">最后，我们到达使用 Azure 服务转录音频的脚本。</p><p id="61c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在编写脚本之前，让我承认这个解决方案主要基于文档中的这些<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/get-started-speech-to-text?tabs=script%2Cbrowser%2Cwindowsinstall&amp;pivots=programming-language-python#continuous-recognition" rel="noopener ugc nofollow" target="_blank">代码片段</a>和我在 GitHub 线程上找到的<a class="ae jd" href="https://github.com/Azure-Samples/cognitive-services-speech-sdk/issues/345#issuecomment-522416202" rel="noopener ugc nofollow" target="_blank">代码</a>。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="ls lt l"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">使用 Azure 认知服务转录音频</figcaption></figure><p id="c607" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">前 12 行是前面的身份验证代码片段，增加了一些特色。除了导入之外，请注意用于配置的<code class="du lv lw lx ly b">audio_config</code>。作为我们的音频来源。</p><p id="21e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第 14–17 行声明了保持脚本运行的标志，以及包含所有转录的列表。你看，转录不是一个字一个字地进行的，因为它们是从音频中理解的，而是以几个短语的块接收的(在文档中称为话语)。我们将在脚本快结束时回到这个话题。</p><p id="d883" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lv lw lx ly b">stop_cb</code>和<code class="du lv lw lx ly b">recognised</code>功能虽然简单，但对操作是必不可少的。前者处理到达转录的结尾，后者处理接收到的每个识别/转录。这些函数的赋值见第 38、41 和 43 行。</p><p id="548d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第 46 行，我们将转录本身设置为<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/get-started-speech-to-text?tabs=script%2Cbrowser%2Cwindowsinstall&amp;pivots=programming-language-python#continuous-recognition" rel="noopener ugc nofollow" target="_blank">连续识别</a>。它不是转录一个单独的话语，而是继续转录，直到我们告诉服务停止。第 48 行的 while 循环是我们使用<code class="du lv lw lx ly b">done</code>标志来保持脚本运行的地方。如果在某个时候<code class="du lv lw lx ly b">stop_cb</code>被调用了，那么<code class="du lv lw lx ly b">done</code>就被改成了<code class="du lv lw lx ly b">True</code>，我们可以认为这是转录完成了。</p><p id="cde4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，在第 52 行，我们将字符串转录列表转储到一个<a class="ae jd" href="https://docs.python.org/3/library/pickle.html" rel="noopener ugc nofollow" target="_blank"> Pickle 文件</a>。当然还有其他输出选项，但是这样我们保留了列表的最后状态，并且可以在一个单独的脚本中加载它以供进一步分析。</p></div></div>    
</body>
</html>