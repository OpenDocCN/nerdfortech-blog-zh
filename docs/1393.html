<html>
<head>
<title>HDF5 file format with Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫HDF5文件格式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/hdf5-file-format-with-pandas-4a1cff1b5001?source=collection_archive---------16-----------------------#2021-03-16">https://medium.com/nerd-for-tech/hdf5-file-format-with-pandas-4a1cff1b5001?source=collection_archive---------16-----------------------#2021-03-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4ee80fb3d1786e02dbe1ed7e5ffac0f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Txnp7HFCdN4fY3NuLs1aLw.jpeg"/></div></div></figure><p id="3eff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">HDF5是一种数据格式，能够以更少的磁盘空间和更快的检索速度存储和管理大型复杂数据。</p><p id="2b22" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在读取和处理大型数据集时，由于使用了大量内存，我们经常会遇到内存不足的错误。存储数据的另一种格式是快速访问和较小的大小，是这个问题的解决方案之一。一种这样的文件格式是HDF5。</p><p id="d20c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">HDF代表<strong class="is hj">层次数据格式</strong>。最常用的版本是<strong class="is hj">版本5 </strong>。HDF文件可以存储任何种类的异构数据对象，如图像、数组、表格、图形、文档等。它以分层的方式组织数据。每个HDF文件都以包含其他组和/或数据对象的根组(“/”)开始。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/72d19d495d54050e544052e7afa75075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*njHXD9qmhqmQShQX.jpg"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图像hdf组</figcaption></figure><p id="bfef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">HDF文件存储关于存储在其中的数据的元数据，因此任何应用程序都可以解释文件的内容和结构。</p><p id="0923" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pandas实现了HDFStore接口来读取、写入、添加、选择HDF文件。</p><p id="dd72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">用熊猫创建HDF文件</strong></p><p id="820b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用熊猫提供的<strong class="is hj"> <em class="jx"> HDFStore </em> </strong>类创建一个HDF5文件。</p><p id="ef3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">语法</strong> <em class="jx"> : </em> <em class="jx"> HDFStore(路径，模式)</em></p><p id="4bba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">哪里</strong></p><ul class=""><li id="96c4" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated"><strong class="is hj">路径</strong>是文件路径。</li><li id="0f40" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">模式</strong>是打开文件的模式。它可以是“a”(追加)、“w”(写入)、“r+”(读取但文件已经存在)。默认为追加模式，如果文件不存在，它会创建文件并以写模式打开。</li></ul><p id="9824" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">示例</strong> <em class="jx"> : </em>下面的代码以追加模式(默认)创建并打开一个HDF文件(' hdf_file.h5 ')。</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="85e6" class="kr ks hi kn b fi kt ku l kv kw">import pandas as pd <br/>from pandas import HDFStore <br/>hdf = HDFStore(‘hdf_file.h5’)</span></pre><p id="7bee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">将数据存储在HDF文件中</strong></p><p id="51d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据以键、数据对(类似于字典)的形式存储在HDF文件中。HDFStore提供了在HDF文件中存储数据的方法。</p><p id="c7fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">语法:<em class="jx"/></strong><em class="jx">hdf store . put</em><strong class="is hj"><em class="jx">(</em></strong><em class="jx">key</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">value</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">format = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">index = True</em><strong class="is hj"><em class="jx">，</em> </strong> <em class="jx">nan _ rep = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">data _ columns = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">encoding = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">errors = ' strict '</em><strong class="is hj"><em class="jx">，</em></strong></p><p id="655e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">其中</strong></p><ul class=""><li id="ee87" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated"><strong class="is hj"> Key </strong>是数据对象的标识符</li><li id="af03" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">值</strong>是数据帧或系列。</li><li id="f5aa" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">格式</strong>是用来存储数据对象的格式。值可以是“固定”(默认)或“表格”。</li><li id="4754" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">追加</strong>将输入数据追加到现有的。它强制表格格式。</li><li id="c8c0" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> data_columns </strong>是用作索引列的列列表。若要使用所有列，请指定为True。</li><li id="a67a" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">编码</strong>为字符串提供编码。</li><li id="3306" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> track_times控制与对象关联的时间ass </strong>的记录。如果设置为True，则记录时间数据。</li><li id="2a20" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Dropna </strong>指定<strong class="is hj"> </strong>是否删除空数据值。</li></ul><p id="4d3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">示例:</strong>以下代码读取iris.csv文件，并将其存储在之前使用key作为“key1”创建的HDF文件中。</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="8424" class="kr ks hi kn b fi kt ku l kv kw">df = pd.read_csv(“../input/iris/Iris.csv”)  # read Iris file<br/>hdf.put('key1', df, format='table', data_columns=True) #put data in hdf file</span></pre><p id="334a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里key1表示用于访问HDF文件中的数据帧的密钥。这个键很有用，因为HDF文件可以在同一个文件中存储许多数据对象。每个数据对象都可以使用密钥来访问。</p><p id="db12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">在同一文件中创建组和数据对象</strong></p><p id="f57a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以在同一个文件中添加更多的数据对象或组。</p><p id="fc43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">示例:</strong>以下代码在我们创建的同一个文件中添加了数据帧df2，还添加了一个名为group1的组，数据帧df3。</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="7ea7" class="kr ks hi kn b fi kt ku l kv kw">Import numpy as np<br/>df2 = pd.DataFrame(np.random.rand(5,3) #dataframe df2<br/>hdf.put(‘key2’,df2) # to add a dataframe to the hdf file<br/>df3= pd.DataFrame(np.random.rand(10,2)<br/>hdf.put(‘/group1/key3’,df3) # to add a group with df3 in the hdf file</span></pre><p id="510e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在可以用“/key2”(这里“/”代表根组)访问df2，用“/group1/key3”访问df3。(这里“/group1”代表一个组)</p><p id="8c6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">例</strong> : <em class="jx"> </em>获取存储在hdf文件中的df3的形状:</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="cbfa" class="kr ks hi kn b fi kt ku l kv kw">hdf[‘/group1/key3’].shape()</span></pre><p id="11e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">将数据写入HDF文件</strong></p><p id="a7a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了使用HDFStore类将数据写入HDF文件之外，Pandas还使用一个方法to_hdf将数据写入文件。</p><p id="ae42" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">语法:</strong><em class="jx">data frame . to _ hdf</em><strong class="is hj"><em class="jx">(</em></strong><em class="jx">path _ or _ buf</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">key</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">mode = ' a '</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">comp level = None</em><strong class="is hj"> </strong><em class="jx">nan _ rep = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">dropna = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">data _ columns = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">errors = ' strict '</em><strong class="is hj"><em class="jx">，</em> </strong></p><p id="0d56" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">哪里</strong></p><ul class=""><li id="2e27" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated"><strong class="is hj"> Path_or_buf </strong>是<strong class="is hj">或</strong>文件路径或HDFStore对象。</li><li id="d6ce" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">键</strong>是商店中组的标识符。</li><li id="874f" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">模式</strong>是打开文件的模式。它可以是“a”(追加)、“w”(写入)、“r+”(读取但文件已经存在)。</li><li id="5a23" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Complevel </strong>指定数据的压缩级别。</li><li id="d053" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">追加</strong>将输入数据追加到现有的。它仅适用于表格格式的数据。</li><li id="e85f" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">格式</strong>是用来存储数据对象的格式。值可以是“固定”(默认)或“表格”。</li><li id="005d" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">错误</strong>指定如何处理编码和解码错误。</li><li id="9a6a" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">编码</strong>为字符串提供编码。</li><li id="5f73" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Min_itemsize </strong>将列名映射到列的最小字符串大小。</li><li id="2d34" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Nan_rep </strong>指定如何将空值表示为str。</li><li id="adb7" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Dropna </strong>指定<strong class="is hj"> </strong>是否删除空数据值。</li><li id="4160" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> data_columns </strong>是用作索引列的列列表。若要使用所有列，请指定为True。</li></ul><p id="e39e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">示例:</strong>将随机生成的数据帧写入文件，密钥为“key”</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="2d6e" class="kr ks hi kn b fi kt ku l kv kw">write_data = pd.DataFrame(np.random.rand(5,3))<br/>write_data.to_hdf(‘hdf_file.h5’,’key’,mode=’w’)#writes data to hdf file</span></pre><p id="9e8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">向HDF文件追加数据</strong></p><p id="d9ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">HDF5不要求一次写入所有数据。数据集可以在任何需要的时候扩展。但是节点必须已经存在并且是表格式。</p><p id="55d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">语法:</strong> <em class="jx"> HDFStore.append(key，value，format=None，axes=None，index=True，append=True，complib=None，complevel=None，columns=None，min_itemsize=None，nan_rep=None，chunksize=None，expectedrows=None，dropna=None，data_columns=None，encoding=None，errors='strict') </em></p><p id="109f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">其中</strong></p><ul class=""><li id="147d" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated"><strong class="is hj"> Key </strong>是数据对象的标识符。</li><li id="d3f1" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">格式</strong>是用来存储数据对象的格式。值'表'。</li><li id="c7f8" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">追加</strong>将输入数据追加到现有的。</li><li id="249b" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> data_columns </strong>是用作索引列的列列表。若要使用所有列，请指定为True。</li><li id="e489" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Min_itemsize </strong>将列名映射到列的最小字符串大小。</li><li id="5cf1" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Nan_rep </strong>指定如何将空值表示为str。</li><li id="e963" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Chunksizesize </strong>指定文字块的大小。</li><li id="5421" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Expectedrows </strong>是该表的<strong class="is hj"> </strong>预期总行大小。</li><li id="2b6f" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">编码</strong>为字符串提供编码。</li><li id="7312" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> dropna </strong>指定<strong class="is hj"> </strong>是否删除空数据值。</li></ul><p id="18b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">例如:</strong></p><p id="33f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下代码将随机数的数据帧追加到先前创建的文件中的表中，该文件的关键字为“key2”。</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="82b0" class="kr ks hi kn b fi kt ku l kv kw">hdf.append('/key2',pd.DataFrame(np.random.rand(5,3))</span></pre><h1 id="05c9" class="kx ks hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">阅读HDF文件</h1><p id="76fc" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">HDFStore类中的get方法可用于读取文件。必须指定Mode='r '才能以读取模式打开文件。</p><p id="839d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">语法:</strong>hdf store . get<strong class="is hj">(</strong><em class="jx">key</em><strong class="is hj">)</strong></p><p id="fbe8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">在哪里</strong></p><ul class=""><li id="e99f" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated"><strong class="is hj">键</strong>是数据对象的标识符</li></ul><p id="ac68" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它<strong class="is hj">返回与文件中存储的对象类型相同的</strong>对象</p><p id="2286" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">示例:<em class="jx"> </em> </strong>以下代码读取先前在读取模式下创建的hdf文件</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="0d66" class="kr ks hi kn b fi kt ku l kv kw">hdf =HDFStore(‘hdf_file.h5', mode=’r’)<br/>data = hdf.get(‘/key1’)</span></pre><p id="9988" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本例中，返回的数据将是pandas dataframe类型，因为我们在创建文件时将pandas‘Iris’data frame存储在key1中。</p><p id="a7c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pandas实现了另一种方法来读取文件。是read_hdf。使用这种方法是因为它可以在读取时查询数据。</p><p id="ea29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">语法:<em class="jx"/></strong><em class="jx">pandas . read _ hdf</em><strong class="is hj"><em class="jx">(</em></strong><em class="jx">path _ or _ buf</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">key = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">mode = ' r '</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">errors = ' strict '</em><strong class="is hj"> </strong><em class="jx">iterator = False</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">chunksize = None</em><strong class="is hj"><em class="jx">，</em></strong><em class="jx">* * kwargs</em><strong class="is hj"><em class="jx">)</em></strong></p><p id="a9bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">哪里</strong></p><ul class=""><li id="f160" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated"><strong class="is hj"> Path_or_buf </strong>是<strong class="is hj"> </strong>文件路径或HDFStore对象。</li><li id="9dc3" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">键</strong>是数据对象的标识符。</li><li id="4dd9" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">模式</strong>是打开文件的模式。它可以是“a”(追加)、“r”(读取)、“r+”(读取但文件已经存在)。</li><li id="e26c" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">错误</strong>指定如何处理编码和解码错误。</li><li id="c0bb" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">其中</strong>是定期(或可兑换)对象的列表。</li><li id="043d" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">开始</strong>是开始选择的行号。</li><li id="52fa" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">停止</strong>是停止选择的行号。</li><li id="3119" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">列</strong>是要返回的列名列表。</li><li id="9e98" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">迭代器返回一个迭代器对象。</li><li id="73c4" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">使用迭代器时，指定迭代中包含的行数。</li><li id="a171" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> **kwargs </strong>是传递给HDFStore的附加关键字参数。</li></ul><p id="e4b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它<strong class="is hj">返回与文件中存储的对象类型相同的</strong>对象</p><p id="a38c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">示例:<em class="jx"> </em> </strong>以下代码返回ID大于10时的物种数据</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="68df" class="kr ks hi kn b fi kt ku l kv kw">read_data = pd.read_hdf('hdf_file.h5','/key1',where=['Id&gt;10'], columns=[‘Species’])</span></pre><p id="9fb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于从hdf_file返回的数据(read_data)是pandas数据帧(与存储的对象类型相同)，它可以像普通数据帧一样用于数据分析。</p><p id="fe9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">示例:</strong>下面的代码读取文件头，查找形状，描述数据集</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="50be" class="kr ks hi kn b fi kt ku l kv kw">read_data.head()   #read head of file<br/>read_data.shape    #fetching shape of the file<br/>read_data.describe  #describe the dataset</span></pre><h1 id="ebe3" class="kx ks hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">关闭HDF文件</h1><p id="73dd" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">文件在使用后必须关闭。下面是关闭我们创建的HDF文件的代码。</p><pre class="jp jq jr js fd km kn ko kp aw kq bi"><span id="136e" class="kr ks hi kn b fi kt ku l kv kw">hdf.close()</span></pre><p id="6b37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">总结</strong></p><p id="33e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">HDF5专为快速I/O处理和存储而打造。为了访问这种文件格式的数据，Pandas实现了本博客中讨论的接口。</p><p id="ce2c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">参考文献:</strong></p><p id="5633" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_hdf.html" rel="noopener ugc nofollow" target="_blank"> pandas.read_hdf — pandas 1.2.3文档(pydata.org)</a></p><p id="deb1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">https://www.hdfgroup.org/<a class="ae lz" href="https://www.hdfgroup.org/" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><p id="4669" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jx">原载于2021年3月16日https://www.numpyninja.com</em><a class="ae lz" href="https://www.numpyninja.com/post/hdf5-file-format-with-pandas" rel="noopener ugc nofollow" target="_blank"><em class="jx"/></a><em class="jx">。</em></p></div></div>    
</body>
</html>