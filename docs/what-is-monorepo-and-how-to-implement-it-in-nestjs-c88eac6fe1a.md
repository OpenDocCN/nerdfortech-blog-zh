# 什么是 Monorepo？以及如何在 NestJS 中实现？

> 原文：<https://medium.com/nerd-for-tech/what-is-monorepo-and-how-to-implement-it-in-nestjs-c88eac6fe1a?source=collection_archive---------0----------------------->

![](img/e8392f28423581d390ff0d9de84328a2.png)

潘卡杰·帕特尔在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

# 什么是 Monorepo？

单一回购与多重回购相反，后者有时被称为**整体式仓库。**我们应该意识到，它与单一服务和微服务架构完全不同。
到**总结**，Monorepo 包含在同一个存储库中的多个项目(彼此相关或不相关)。在**多重回购**中，我们为每个服务使用一个单独的存储库。

Monorepo 被许多大公司使用，包括**谷歌**、**脸书**、**微软**和**推特**。

首先，我对**单一回购**非常满意**，但让我们诚实地面对使用单一回购的利弊，根据你的情况，你应该决定是否使用单一回购。**

# **如何在微服务中使用？**

Monorepo 专为微服务而设计。通过 CI/CD 后，您可以为每个应用程序创建一个单独的 docker 容器，这也意味着向上扩展将很容易。

# 什么是福利？

V可视性:根据我的经验，Monorepo 最有用的就是可视性。这意味着开发人员可以在一个地方找到所有代码。此外，他们可以轻松地将应用程序相互连接，并使用共享库，如 dto、类型和通信库。

**依赖和避免重复:**正如我所说，所有的代码都在同一个地方，所以我们可以轻松地将应用程序连接在一起。您的框架可以解决依赖问题，这取决于您使用的是什么。例如，如果您创建了一个库，但没有在代码中使用它，它就不会包含在您的项目中。

代码风格:我喜欢的另一件事是我们可以在所有应用程序中保持相同的代码风格。你在整个项目中有一个 Eslint，无论你什么时候改变它，都会影响到项目中的所有代码。

**测试和 CI/CD:** 由于您已经有了所有的代码，如果您不想使用 mock，那么编写 E2E 测试会容易得多。对于每次推送，项目中的所有测试都将运行并检查是否一切正常。所以你会确信这些变化不会对整个项目产生任何有害的影响。

# 缺点是什么？

**太敏感:**如果推一个不好的提交，会影响整个项目。这意味着没有人可以在他们的本地机器上运行任何应用程序。

**量大:**既然拉代码，就收所有的 app 和代码。有时甚至可以达到几千兆字节。

**更长的 CI/CD** :比如你忘了在行尾加分号。如果你做了然后推代码，CI/CD 会从头开始构建所有的 app，太花时间了。

**在 NestJS 中创建一个新的 Monorepo 项目**

如果你想获得新的更新，别忘了订阅我和我的 youtube 挑战。