<html>
<head>
<title>GraphQL Apollo Client in React: Build a GraphQL Client React-App step by step</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的GraphQL阿波罗客户端:一步一步搭建GraphQL客户端React-App</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/graphql-apollo-client-in-react-build-an-app-step-by-step-2461574f16c8?source=collection_archive---------3-----------------------#2021-01-04">https://medium.com/nerd-for-tech/graphql-apollo-client-in-react-build-an-app-step-by-step-2461574f16c8?source=collection_archive---------3-----------------------#2021-01-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6c37d8db620e7c38cc6177b94b0c4b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HWFfEIP0t9afku9PmAHuvw.png"/></div></div></figure><p id="517d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下面的文章中，我将一步一步地解释如何使用Apollo客户端的最新版本构建一个GraphQL React应用程序。这将是一些文章/步骤的汇编</p><p id="16f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完整的代码可以在</p><div class="jo jp ez fb jq jr"><a href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/tree/master/fetch-data" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">ranyelhousieny/graph QL _ ApolloClient _ React</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">https://ranyel . medium . com/graph QL-Apollo-Client-in-react-build-an-app-step-by-step-2461574 F16 c8 graph QL阿波罗客户端…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">github.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf io jr"/></div></div></a></div><ol class=""><li id="2d1c" class="kg kh hi is b it iu ix iy jb ki jf kj jj kk jn kl km kn ko bi translated">第一步:<a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step1-setting-up-base-rany/" rel="noopener ugc nofollow" target="_blank">设置主项目并查询</a><a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step1-setting-up-base-rany/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/graph QL-Apollo-client-react-step 1-setting-up-base-rany/</a></li></ol><div class="jo jp ez fb jq jr"><a href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step1-setting-up-base-rany/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">React中的GraphQL Apollo客户端:步骤1-设置基础项目</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">在这篇短文中，我将解释如何使用Apollo客户端与React中的GraphQL API进行交互。我将建立一个…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">www.linkedin.com</p></div></div><div class="ka l"><div class="kq l kc kd ke ka kf io jr"/></div></div></a></div><p id="8a14" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-2-query-present-rany/" rel="noopener ugc nofollow" target="_blank">2<strong class="is hj">。步骤2 —使用来自react-apollo </strong> </a>的查询来查询和呈现数据:<a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-2-query-present-rany/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/graph QL-Apollo-client-react-step-2-Query-present-rany/</a></p><div class="jo jp ez fb jq jr"><a href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-2-query-present-rany/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">React中的GraphQL Apollo客户端:步骤2——使用react-apollo中的查询查询并显示数据</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">上一步(https://www.linkedin。</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">www.linkedin.com</p></div></div><div class="ka l"><div class="kr l kc kd ke ka kf io jr"/></div></div></a></div><p id="11e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.步骤3 —从GraphQL查询中打印列表:<a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-3-query-present-rany/?published=t" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/graph QL-Apollo-client-react-step-3-Query-present-rany/</a></p><div class="jo jp ez fb jq jr"><a href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-3-query-present-rany/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">React中的GraphQL Apollo客户端:步骤3 -使用Query…查询并显示数据中的项目列表</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">在之前的文章中，我们创建了一个react应用程序，并从GraphQL中获取数据。我们只印了一个国家。</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">www.linkedin.com</p></div></div><div class="ka l"><div class="ks l kc kd ke ka kf io jr"/></div></div></a></div><p id="7add" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-4-passing-rany-elhousieny-phd%E1%B4%AC%E1%B4%AE%E1%B4%B0/" rel="noopener ugc nofollow" target="_blank"> 4。第四步:React中的GraphQL阿波罗客户端:第四步—传递变量</a>:<a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-4-passing-rany-elhousieny-phd%E1%B4%AC%E1%B4%AE%E1%B4%B0/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/graph QL-Apollo-Client-React-Step-4-Passing-rany-elhousieny-PhD % E1 % B4 % AC % E1 % B4 % AE % E1 % B4 % B0/</a></p><div class="jo jp ez fb jq jr"><a href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-4-passing-rany-elhousieny-phd%E1%B4%AC%E1%B4%AE%E1%B4%B0/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">React中的GraphQL Apollo客户端:步骤4 -传递变量</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">这个很有意思。我们将传递country_id，然后使用查询GraphQL来查找拥有这个国家的…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">www.linkedin.com</p></div></div><div class="ka l"><div class="kt l kc kd ke ka kf io jr"/></div></div></a></div><p id="d8f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi">==================================</p><h1 id="eb21" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">步骤1-设置基础项目</h1><p id="c6e3" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">在这篇短文中，我将解释如何使用Apollo客户端与React中的GraphQL API进行交互。我会搭建一个非常简单的app(最终代码可以在 <a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/tree/master/fetch-data" rel="noopener ugc nofollow" target="_blank">找到</a><a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/tree/master/fetch-data" rel="noopener ugc nofollow" target="_blank">)https://github . com/ranyelhousieny/graph QL _ Apollo client _ React/tree/master/fetch-data</a>。</p><p id="e07a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于这更侧重于前端，所以我将使用一个公共的GraphQL API来获取数据(https://countries . Trevor blades . com/)。我不会解释GraphQL服务器端、GraphQL基础知识或React基础知识。我假设您了解GraphQL和React基础知识，并且知道如何使用create-react-app创建应用程序。本文将展示如何使用Apollo客户端从GraphQL API获取数据。</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/f3ceaff35a597722a228281242d06c98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xq-We8dlgyqw24rY"/></div></div></figure><p id="751d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在开始编写代码之前，让我们先了解React如何与GraphQL和Apollo交互。阿波罗客户端，我们可以从阿波罗-客户端不知道反应。Apollo客户端的工作是与一个GraphQL服务器进行交互，并将数据存储在Apollo Store中(类似于Redux store:)。然而，我们将react-apollo客户端与React-Apollo的ApolloProvider链接起来。ApolloProvider将包装我们的React应用程序，并允许所有子应用程序与商店进行交互。如果你以前用过Redux，你会觉得这很熟悉。</p><h1 id="7824" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">1.使用npx create-react-app <app name="">创建一个react项目</app></h1><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/917bf338bf2f13c4d7583d3b1e28b477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6A8esrh_DbKXOVQg"/></div></div></figure><p id="bd87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者您可以克隆我的项目并跟随</p><p id="7ab7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">git clone<a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React.git" rel="noopener ugc nofollow" target="_blank">https://github . com/ranyelhousieny/graph QL _ Apollo client _ react . git</a></p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/3cc3bcdaa790940160a0c37eee46a78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n9Kea7U6dr79Ntrm"/></div></div></figure><h1 id="00ed" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">2.在src/index.js上导入Apollo React提供程序</h1><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/64e97c150d8c16d2315be85781813c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QSgbBGS6f45MhlVa"/></div></div></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/8f2b8dbabf35dca38c9e7f50542b1b7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4sLC4D7i1zJ3qgru"/></div></div></figure><h1 id="c2d3" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">3.将Apollo客户端导入src/index.js</h1><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/7aa5d9d10c2ce128b6dae767f1e63ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xKUTetvevzS2Lv07"/></div></div></figure><h1 id="eb05" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">4.导入并初始化InMemoryCache和HttpLink</h1><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/7f05fd0e9d0192ed1776857aa2677414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MuCBC5W2GYfmzmjR"/></div></div></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/8cf4996b20933378ccaeb13695f74c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-94d64BcXdaTHHhp"/></div></div></figure><h1 id="bc7f" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">4.创建基本客户端</h1><p id="f9f5" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">从Apollo 2.0开始，您必须使用缓存和链接初始化客户端，如下所示:</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/b09ad855d0ea7cbbe249eb8ef9fec4a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bOotMlsgOVCbIWEK"/></div></div></figure><h1 id="d11c" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">5.安装依赖项</h1><p id="e56f" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">npm安装阿波罗-客户端反应-阿波罗阿波罗-缓存-内存阿波罗-链接-http-保存</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/7f0c3d44513e46dd569478d59d5987ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wEPTR0BEnYlGapaB"/></div></div></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/c060bc1078d6b175c91409d6782fb2db.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/0*2nBT81jpXRfuXIiY"/></div></figure><h1 id="29c2" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">6.将React应用程序包装在Apollo提供程序中</h1><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/b072b6f80388aa4360553517a92ad1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/0*2DhFV7CEmUBYCkNr"/></div></figure><h1 id="7711" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">下面是迄今为止的<a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/src/index.js" rel="noopener ugc nofollow" target="_blank"> index.js </a>:</h1><p id="2ad0" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated"><a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/src/index.js" rel="noopener ugc nofollow" target="_blank">https://github . com/ranyelhousieny/graph QL _ Apollo client _ React/blob/master/fetch-data/src/index . js</a></p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/0632f481bcdbea9a90647b58149ccefd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TJLs-7dughYUf6uz"/></div></div></figure><p id="2634" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以使用npm start启动您的web应用程序，在屏幕上看到您正在构建的内容。我把App.js修改如下(目前可选)<a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/src/App.js" rel="noopener ugc nofollow" target="_blank">https://github . com/ranyelhousieny/graph QL _ Apollo client _ React/blob/master/fetch-data/src/app . js</a></p><p id="9228" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以通过进入<a class="ae kp" href="https://localhost:3000" rel="noopener ugc nofollow" target="_blank"> https://localhost:3000 </a>在浏览器上看到输出</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/615df04b66073ccf978dbccc61b985d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sIVqxdjUgdn9mUl8"/></div></div></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/9934f0f4ec06169c4a438e0807149eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xSMWsD9Ej_fpE8aL"/></div></div></figure><h1 id="df86" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">添加GraphQL服务器的URL</h1><p id="15e1" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">现在，让我们将GraphQL服务器的URL添加到<a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/package.json" rel="noopener ugc nofollow" target="_blank">package . JSON</a><a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/package.json" rel="noopener ugc nofollow" target="_blank">https://github . com/ranyelhousieny/graph QL _ Apollo client _ React/blob/master/fetch-data/package . JSON</a></p><p id="702a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">" proxy ":" https://countries . Trevor blades . com/"</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/eb48f7b34e17cbd680809efc9638eeb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*asa-pgAnc_LYPv0I"/></div></div></figure><h1 id="8610" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">从<a class="ae kp" href="https://countries.trevorblades.com" rel="noopener ugc nofollow" target="_blank">https://countries.trevorblades.com</a>处获取查询</h1><p id="5862" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">现在，让我们去<a class="ae kp" href="https://countries.trevorblades.com" rel="noopener ugc nofollow" target="_blank">https://countries.trevorblades.com</a>并尝试一个查询把它放入代码中</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/959bf03ee201099b29715038a086e17e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vNLEgbM2063oakDP"/></div></div></figure><p id="692a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在左侧尝试上面显示的以下查询，然后单击箭头在右侧查看结果</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="ba75" class="mx kv hi mt b fi my mz l na nb">query{</span><span id="5be8" class="mx kv hi mt b fi nc mz l na nb"> country(code:"US"){</span><span id="0cdb" class="mx kv hi mt b fi nc mz l na nb">  code</span><span id="fcbe" class="mx kv hi mt b fi nc mz l na nb">  name</span><span id="37ad" class="mx kv hi mt b fi nc mz l na nb"> }}</span></pre><h1 id="a564" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">向代码中添加查询</h1><p id="8519" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">现在，让我们将查询添加到代码中，并将结果打印到控制台</p><ol class=""><li id="c0e7" class="kg kh hi is b it iu ix iy jb ki jf kj jj kk jn kl km kn ko bi translated">导入gql</li></ol><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="55be" class="mx kv hi mt b fi my mz l na nb">import gql from 'graphql-tag';</span></pre><p id="40d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.将您复制的查询添加到客户端，如下所示(请注意中间的符号`表示您编写查询的位置)</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/d5d2c5d2c09273a3aed2153a623c46ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/0*uOEPf5EuBK4kexOD"/></div></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es ne"><img src="../Images/ca997c047e0ebfef601c5d0426f7f53b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/0*FEoPN56t0NYE_3pS"/></div></figure><p id="aadb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在控制台上从浏览器验证结果，如下所示(我假设您仍然有npm开始运行)</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nf"><img src="../Images/22aa046796b27a49164d4717053a8085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ME_-qV4cMQ6Ieafy"/></div></div></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ng"><img src="../Images/b7d96fa4e547374372da09555f0bb933.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jPWaVVT_MZ5r0V-M"/></div></div></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/d1af0cb7389c7c8971c5cea24d34b324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rfg0Zu6c2Hn33vVt"/></div></div></figure><h1 id="ad2d" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">步骤2——使用react-apollo中的查询来查询和显示数据</h1><p id="c8da" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">在前面的<a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step1-setting-up-base-rany/?published=t&amp;trackingId=GN85mLfQ0CHINZ1gkqRmyg%3D%3D" rel="noopener ugc nofollow" target="_blank">步骤</a>(https://www . LinkedIn . com/pulse/graphql-Apollo-client-react-step 1-setting-up-base-rany/)中，我们创建了基础项目并发出graph QL查询来获取一个国家。为了简单起见，我在index.js中实现了所有内容，并将结果打印到控制台。在本文中，我们将在浏览器上呈现查询结果。</p><h1 id="f326" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">1.将查询添加到App.js中的全局变量</h1><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es ni"><img src="../Images/85bb723cb93e4ae329626418e4435770.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/0*NjG9_wGDOrU4dBMM"/></div></figure><h1 id="0604" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">2.将结果打印到屏幕上</h1><p id="13c0" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">我们将利用来自react-apollo的查询</p><p id="148e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从“react-apollo”导入{ Query }；</p><p id="f258" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完整代码可以在<a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/src/App.js" rel="noopener ugc nofollow" target="_blank">这里找到</a><a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/src/App.js" rel="noopener ugc nofollow" target="_blank">https://github . com/ranyelhousieny/graph QL _ Apollo client _ React/blob/master/fetch-data/src/app . js</a></p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nj"><img src="../Images/b227d8d737fa8b65fc8576d776c4cab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KyE_7AYHIeH71TbJ"/></div></div></figure><h1 id="f660" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">步骤3 —使用来自react-apollo和map的查询，查询并显示数据中的项目列表</h1><p id="02b1" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">在之前的文章中，我们创建了一个react应用程序，并从GraphQL中获取数据。我们只印了一个国家。</p><ol class=""><li id="5588" class="kg kh hi is b it iu ix iy jb ki jf kj jj kk jn kl km kn ko bi translated"><a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step1-setting-up-base-rany/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/graph QL-Apollo-client-react-step 1-setting-up-base-rany/</a></li><li id="7ca3" class="kg kh hi is b it nk ix nl jb nm jf nn jj no jn kl km kn ko bi translated"><a class="ae kp" href="https://www.linkedin.com/pulse/graphql-apollo-client-react-step-2-query-present-rany/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/graph QL-Apollo-client-react-step-2-query-present-rany/</a></li></ol><p id="a664" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们打印一个带有“详细”链接的国家列表(我还没有使用任何css，所以它很简单)。代码位于:<a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/src/components/CountriesList.jsx" rel="noopener ugc nofollow" target="_blank">https://github . com/ranyelhousieny/graph QL _ Apollo client _ React/blob/master/fetch-data/src/components/countries list . jsx</a></p><p id="c50f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最终页面将如下所示:</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es np"><img src="../Images/6c24a37b8b1f6c3293895288b57ec8bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/0*K2WO5jbXToUm5uer"/></div></figure><h1 id="e0e3" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">1.该查询是从网站直接复制的</h1><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nq"><img src="../Images/f846ea9a783d01fb7f97cfe460d93366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jizSEBw3OZr5UCQ8"/></div></div></figure><h1 id="884d" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">2.国家列表组件</h1><p id="3e31" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">让我们在components文件夹下为countries列表创建一个新组件，并像前面一样添加查询</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/4da724632c9767c82fd17976fed6d631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mpWiZuutMkBYVwSq"/></div></div></figure><p id="f2fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">唯一的新东西是我们将接收、排列和使用map来打印每个项目</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ns"><img src="../Images/b2a70f3f125876774b793815b17275df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hkSfPQUutSqb0tHt"/></div></div></figure><p id="c957" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将从App.js调用这个组件</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es nt"><img src="../Images/0fcd814ae5475f793cef7ed0f73691e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/0*DdWshxjyFdBQhdDG"/></div></figure><h1 id="1e02" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">步骤4 —传递变量</h1><h1 id="aa20" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">首先，让我们添加一个路由切换到一个新的页面的细节</h1><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="f409" class="mx kv hi mt b fi my mz l na nb">index.js</span><span id="ae48" class="mx kv hi mt b fi nc mz l na nb">import { BrowserRouter, Route } from 'react-router-dom';</span><span id="c7bc" class="mx kv hi mt b fi nc mz l na nb">....</span><span id="3d9e" class="mx kv hi mt b fi nc mz l na nb">ReactDOM.render(<br/>  &lt;ApolloProvider client={ client }&gt;<br/>    &lt;BrowserRouter&gt;<br/>      &lt;Route exact path='/' component={ App } /&gt;<br/>      &lt;Route exact path='/country/:country_id' component={ Country} /&gt;<br/>    &lt;/BrowserRouter&gt;<br/>  &lt;/ApolloProvider&gt;,<br/>  document.getElementById('root')</span></pre><p id="285c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后在列表中的每个国家/地区下添加路线(CountriesList.jsx)</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="a39d" class="mx kv hi mt b fi my mz l na nb">&lt;Link to={ `/country/${country.code}` } &gt;Details&lt;/Link&gt;</span></pre><p id="3457" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个新的功能组件Country.jsx并导入gql，查询同上</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="e6e4" class="mx kv hi mt b fi my mz l na nb">import React from 'react';<br/></span><span id="ed76" class="mx kv hi mt b fi nc mz l na nb">import gql from 'graphql-tag';<br/></span><span id="140f" class="mx kv hi mt b fi nc mz l na nb">import { Query } from 'react-apollo';</span></pre><p id="0352" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将国家代码作为参数接收。让我们把它打印到控制台上，看看它是什么样子</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="7097" class="mx kv hi mt b fi my mz l na nb">const Country = ( props ) =&gt; {<br/>    const { country_id }  = props.match.params<br/>    console.log( "props", props, " Country Id = ", country_id );</span></pre><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es nu"><img src="../Images/97652f616428f059591edd1c952ba786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*E1ngCRIAoTSSHIxJ"/></div></figure><p id="e520" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如您在上面看到的，它是一个具有另一个名为“match”的对象的对象。内部匹配另一个名为“params”的对象，它具有我们要寻找的变量“country_id”</p><p id="1e33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们按如下方式提取country_id:</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="3ff0" class="mx kv hi mt b fi my mz l na nb">const { country_id }  = props.match.params</span></pre><p id="4047" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们需要将它添加到查询中。像往常一样，让我们先在服务器上试试，然后从那里复制(https://countries.trevorblades.com/)</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/aa322781f56203712a63e9c19d37a2cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-dmfP-R5Bka_OCcS"/></div></div></figure><p id="6d51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您会注意到，我们在查询旁边添加了一个强制变量“$id”。GraphQL查询中的所有变量都以$开头。它的类型是ID和！旁边表示它不能为空</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="4cff" class="mx kv hi mt b fi my mz l na nb">query($id: ID!){</span></pre><p id="ee9f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，我们需要提供代码来标识哪个国家，我们将从变量$id中获取它</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="00e4" class="mx kv hi mt b fi my mz l na nb">country(code:$id){</span></pre><p id="78fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意底部的变量，我们在那里传递这个变量的值</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="5e8c" class="mx kv hi mt b fi my mz l na nb">{<br/>  "id": "US"<br/>}</span></pre><p id="6f80" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制查询并将其添加到代码中</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="4efc" class="mx kv hi mt b fi my mz l na nb">const QUERY = gql `query ($country_id: ID!) {<br/>        country(code:$country_id){<br/>            code<br/>            name<br/>            native<br/>        }</span><span id="546d" class="mx kv hi mt b fi nc mz l na nb">}`</span></pre><p id="c3c6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您需要在查询中将它作为变量传递</p><pre class="ly lz ma mb fd ms mt mu mv aw mw bi"><span id="5e51" class="mx kv hi mt b fi my mz l na nb">&lt;Query query={ QUERY } variables={ { country_id } }&gt;</span></pre><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es nw"><img src="../Images/21416e9b5ea65e6b89db45e143cd4192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/0*vJTZ3JA8GfBcZfFe"/></div></figure><p id="7955" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是完整的文件<a class="ae kp" href="https://github.com/ranyelhousieny/GraphQL_ApolloClient_React/blob/master/fetch-data/src/components/Country.jsx" rel="noopener ugc nofollow" target="_blank">https://github . com/ranyelhousieny/graph QL _ Apollo client _ React/blob/master/fetch-data/src/components/country . jsx</a></p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nx"><img src="../Images/282b8935e8cb049acc5f98e4a68d8a77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fZKZD8vEMhkxmwce"/></div></div></figure><p id="3ca9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是浏览器上的输出</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ny"><img src="../Images/7d8a30376531a83d4c05f1d7ccf080f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tiGVqs05GIaaEynd"/></div></div></figure><p id="3498" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作者:兰尼·埃尔豪斯尼</p><div class="jo jp ez fb jq jr"><a href="https://www.linkedin.com/in/ranyelhousieny/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">兰尼·埃尔豪斯尼，PhDᴬᴮᴰ -软件工程高级经理- Zulily | LinkedIn</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">𝙈𝙞𝙘𝙧𝙤𝙨𝙚𝙧𝙫𝙞𝙘𝙚𝙨解决方案架构师𝘼𝙒𝙎𝙎𝙤𝙡𝙪𝙩𝙞𝙤𝙣𝙨𝘼𝙧𝙘𝙝𝙞𝙩𝙚𝙘𝙩𝘾𝙚𝙧𝙩𝙞𝙛𝙞𝙚𝙙…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">www.linkedin.com</p></div></div><div class="ka l"><div class="nz l kc kd ke ka kf io jr"/></div></div></a></div><div class="jo jp ez fb jq jr"><a href="https://rany.elhousieny.com" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">兰尼·埃尔豪斯尼简历</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">使用MongoDB，Elastic Search，AWS，React，CSS3，html 5……</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">rany.elhousieny.com</p></div></div><div class="ka l"><div class="oa l kc kd ke ka kf io jr"/></div></div></a></div></div></div>    
</body>
</html>