<html>
<head>
<title>Let’s Talk: Containers and Kubernetes In Google Cloud Platform — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们来谈谈:Google云平台中的容器和Kubernetes第3部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/lets-talk-containers-and-kubernetes-in-google-cloud-platform-part-3-d3c990883287?source=collection_archive---------12-----------------------#2021-04-07">https://medium.com/nerd-for-tech/lets-talk-containers-and-kubernetes-in-google-cloud-platform-part-3-d3c990883287?source=collection_archive---------12-----------------------#2021-04-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6779688fdca98ab6e861f69790882d58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uZIS3nvsp8gg4U-c.jpg"/></div></div></figure><p id="3b4b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在理解概念和系统如何运行的基础知识后，我们学习如何使用GKE设计工作负载是有利的，但同时，如果您没有阅读我的第一篇文章，请查看此处的<a class="ae jo" href="https://samuelarogbonlo.medium.com/containers-and-kubernetes-in-google-cloud-platform-c178aae0cb35" rel="noopener"><strong class="is hj"/></a>和此处的<a class="ae jo" href="https://samuelarogbonlo.medium.com/lets-talk-containers-and-kubernetes-in-google-cloud-platform-part-2-c240295481d0" rel="noopener"><strong class="is hj"/></a></p><p id="6cb4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Google将处理kubectl命令，检查集群和pod，查看pod的控制台输出，并以交互方式登录pod。<strong class="is hj"> Kubectl </strong>命令是用来控制Kubernetes集群的。在任何进一步的工作之前，必须用集群的位置和API服务器配置kubectl。如果管理员想要知道集群中的pod数量，管理员可以使用命令与集群通信</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="d2ab" class="jy jz hi ju b fi ka kb l kc kd">kubectl get pods</span></pre><p id="e839" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此类流程的生命周期如下所示:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/3578c2c67437a28dbb51f83939b4c9f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/0*CyZ0DZN-Ncu5H0vG"/></div></figure><p id="e105" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Kubectl通过主目录将配置存储在文件中:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="a612" class="jy jz hi ju b fi ka kb l kc kd"><em class="kf">$HOME/.kube/config</em></span></pre><p id="100a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它包含集群名称和集群的凭据。要查看配置，您可以使用</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="54ee" class="jy jz hi ju b fi ka kb l kc kd"><em class="kf">kubectl config view </em></span></pre><p id="1b75" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在采取任何重要步骤之前，您必须首先检索集群的凭证。首先检索特定集群的凭据。这两个工具都默认安装在云外壳中。默认情况下，G Cloud Gate Credentials命令会将配置信息写入主目录中Dock Cube目录下的配置文件中，如果您为不同的群集重新运行此命令，将使用新群集中的凭据更新冲突文件。您只需要在您的云shell中对每个集群执行一次这个配置过程。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="b4f3" class="jy jz hi ju b fi ka kb l kc kd">$gcloud container clusters<br/>get-credentials w-sandbox \<br/> — zone oregon \</span></pre><p id="a758" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">你能弄清楚为什么命令是Gcloud获取凭证而不是kubectl获取凭证吗？</strong>这是因为kubectl命令需要凭证才能工作。G Cloud命令是授权用户从命令行与G C P交互的方式。如果获得授权，G cloud get credentials命令会为您提供连接G K E集群所需的凭证。一般来说，QC TL是管理现有集群内部状态的工具，但是kubectl不能创建新的集群或者改变现有集群的形状。为此，你需要G K E控制平面，也就是G Cloud命令，G C P控制台也是你的界面。</p><p id="4c09" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">ku bectl语法</strong></p><p id="b0b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它的语法有几个部分:命令、类型、名称和可选标志。<strong class="is hj">命令</strong>指定您打算做什么，例如获取、欺骗、记录和执行，而其他命令允许您更改集群配置。<strong class="is hj">类型</strong>告诉你想要在什么类型的对象上执行命令动作，比如pod、nodes等等。<strong class="is hj">名称</strong>是你想要执行动作的对象名称，如果你不输入名称，它将返回所有的pod。您可以使用<strong class="is hj">标志</strong>以更宽的格式查看更多信息。Kubectl用于创建k8s对象、视图、工作和配置。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/60fb62142a41c27e75327b6de775a7a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/0*iKKZja1NBtYZaRbg"/></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/66e0a852398afa802440abf035104b1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*PtrgZ_qd37oY2Dok"/></div></figure><p id="7a30" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">自省</strong></p><p id="b53b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它是在运行kubectl命令之后，收集有关集群中运行的服务、容器、pod和其他引擎的信息的行为。您可以使用Kubectl来</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="24d4" class="jy jz hi ju b fi ka kb l kc kd"><strong class="ju hj"><em class="kf">get (kubectl get pods)</em></strong></span><span id="43ec" class="jy jz hi ju b fi ki kb l kc kd"><strong class="ju hj"><em class="kf">describe (kubectl describe my-pod-d )</em></strong></span><span id="d42d" class="jy jz hi ju b fi ki kb l kc kd"><strong class="ju hj"><em class="kf">exec (kubectl exec my-pod-d)<br/> <br/>logs to know what happens inside the pod; it’s useful when you want to know better info about the containers.</em></strong></span></pre><h2 id="ba09" class="jy jz hi bd kj kk kl km kn ko kp kq kr jb ks kt ku jf kv kw kx jj ky kz la lb bi translated"><strong class="ak"> Pod阶段(获取)</strong></h2><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="dc2b" class="jy jz hi ju b fi ka kb l kc kd">Pending</span><span id="d1aa" class="jy jz hi ju b fi ki kb l kc kd">Running (starting, restarting or running)</span><span id="935d" class="jy jz hi ju b fi ki kb l kc kd">Succeeded</span><span id="77f8" class="jy jz hi ju b fi ki kb l kc kd">Failed</span><span id="8d92" class="jy jz hi ju b fi ki kb l kc kd">Unknown</span><span id="c45e" class="jy jz hi ju b fi ki kb l kc kd">CrashLoopBackoff (if the pod is not configured correctly)</span></pre><p id="4c3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Pod阶段(描述)</strong></p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="b443" class="jy jz hi ju b fi ka kb l kc kd">Name</span><span id="5235" class="jy jz hi ju b fi ki kb l kc kd">Namespace</span><span id="d562" class="jy jz hi ju b fi ki kb l kc kd">Node name</span><span id="fe8e" class="jy jz hi ju b fi ki kb l kc kd">Labels</span><span id="0efb" class="jy jz hi ju b fi ki kb l kc kd">Status</span><span id="3048" class="jy jz hi ju b fi ki kb l kc kd">IP address etc</span></pre><p id="2ee7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">执行</strong></p><ol class=""><li id="dc7c" class="lc ld hi is b it iu ix iy jb le jf lf jj lg jn lh li lj lk bi translated">对连接性进行故障排除，并且您可以在您的云shell中运行一个命令并显示结果。从这里你可以进入工作舱内部。</li></ol><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ll"><img src="../Images/b73c6e8ccb7531d67a0c8de8c085d058.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/0*qF09HwsaALYhDt8e"/></div></figure><p id="3fa8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以使用上述过程在容器中执行参数。您可以使用-c来检查特定的容器。</p><p id="a5c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不要惊慌，在理解了必要的术语后，解决问题就不是问题了，尽管我计划在所有的理论部分完成后进行实践学习。还有其他的概念和定义需要解决，但在后面的一些主题中会更好，因为它将直接关系到该部分的重点。现在，请记住，这篇文章不仅面向云领域的专家，即使是新手也可以加入并学到很多东西，这就是为什么我用外行和专业术语将一切都讲得很清楚，所以如果您有任何问题，也可以通过<a class="ae jo" href="https://twitter.com/SamuelArogbonlo" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">Twitter</strong></a><strong class="is hj">联系我，或者通过</strong><a class="ae jo" href="https://github.com/samuelarogbonlo" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">Github</strong></a><strong class="is hj">找到我。</strong></p><p id="3832" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">感谢阅读❤️ </strong></p><p id="91ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你对这个话题有任何想法，请留下评论——我乐于学习和探索知识。</p><h1 id="00e7" class="lm jz hi bd kj ln lo lp kn lq lr ls kr lt lu lv ku lw lx ly kx lz ma mb la mc bi translated">我可以想象这个帖子有多有用，请留下掌声👏下面几次以示对作者的支持！</h1></div></div>    
</body>
</html>