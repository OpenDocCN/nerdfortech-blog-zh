<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/analysis-of-blood-donor-behavior-using-hidden-markov-model-30ba672ec320?source=collection_archive---------23-----------------------#2021-04-12">https://medium.com/nerd-for-tech/analysis-of-blood-donor-behavior-using-hidden-markov-model-30ba672ec320?source=collection_archive---------23-----------------------#2021-04-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><p id="10fe" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">使用隐马尔可夫模型分析献血者行为</strong></p><p id="9694" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">众所周知，献血已经成为世界各地医疗的重要组成部分。尽管如此，我们更经常地发现医院或诊所血液短缺。</p><p id="6e89" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">为了普遍提高捐赠率，让无偿捐赠者参与进来已被证明是有效的解决办法之一。因此，每个血液组织必须为每个献血者群体制定专门的定制策略，以吸引他们。</p><p id="bdde" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">页（page 的缩写）无偿献血是指无偿献血者基于自己的自由意志无偿献血的行为。</p><p id="37e6" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">因此，在这篇文章中，我想分享我在分析献血行为方面的研究，使用隐马尔可夫模型来找出模式和与每个模式相关的人口统计学特征，以及我为什么使用这样的技术。</p></div><div class="ab cl ig ih gp ii" role="separator"><span class="ij bw bk ik il im"/><span class="ij bw bk ik il im"/><span class="ij bw bk ik il"/></div><div class="hb hc hd he hf"><p id="d0d1" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if"> <em class="in">数据</em> </strong></p><p id="1626" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">该分析中使用的数据是来自献血中心的 2000 个人的访问历史。每个人的访问历史跨度从 2010 年 1 月到 2014 年 12 月。后来的计算是基于每个人的探视次数，合并成每年的一半。因此，时序将是<em class="in"> l=10 (t₁,₂,…,₁₀).我将把合并的访问记录命名为轨迹数据(Trᵢ = ₁,…,₂₀₀₀),还将对每个人的访问次数进行编码，以简化后面的分析。除了合并的访问数量，人口统计相关的变量，如性别，年龄，血型等。人口统计变量的完整信息如下所示:</em></p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es io"><img src="../Images/79e7e035bdd8034d6a236eca0013c280.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*8ZeA6ZgF8MJhXRQb_-nhyQ.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图一。数据的人口统计变量</figcaption></figure><p id="4b37" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">让我们通过下面的图 2 来看看每个变量的人口构成。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es ja"><img src="../Images/3b6d1a381f1c8e31d072028c6a62b76a.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*QvSu_Q4rOY_xYNMFuqlXNQ.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图二。每个变量的人口构成</figcaption></figure><p id="368e" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">从图 2 中，我们知道性别之间的比例是相对平衡的，因此我们得到的推论可能是一般化的。年龄构成主要是 20 多岁的人，其次是 30 多岁的人。由此，我知道大多数捐献者都处于活跃年龄。</p><p id="2f19" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">为了使它更清楚，下面是数据的可视化示例。(我使用了<em class="in"> R </em>中的<em class="in">“TraMineR”</em>包来创建轨迹图)。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es jb"><img src="../Images/63b54ef2caecde9e123eae822a817797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*DK7NWqpMYswWLqmwwCb8Tw.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图三。轨迹数据的简单可视化</figcaption></figure><p id="2e84" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如图 3 所示，数字 1、2、3(垂直示出)表示三个个体(个体 1、个体 2 和个体 3)及其访问轨迹。每个人的条形图(由 T1、T2 到 T10 表示)显示了 5 年的时间序列。每个条码中的不同颜色(“M”、“N”、“O”)代表不同的访问次数，如下图 4 所示。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es jc"><img src="../Images/a9249b9f5b28a3a8371e6bbdaaac951c.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*Dy2mdQRuvil5So11tZqZJg.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图 4。探视号码编码</figcaption></figure><p id="e6eb" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">因此，例如从图 3 中，可以推断出个体 1 在第一阶段只捐献了一次，后来他根本没有回来。还可以推断，与另外两个个体相比，个体 2 献血更频繁。</p><p id="b854" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">方法</strong></p><p id="ef61" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">对于这种类型的数据(轨迹数据)和目的(分析献血行为)，我应用了聚类技术来提取个人献血时的更多一般信息/模式。然而，由于数据与我们所熟悉的有些不同(例如数字数据和分类数据)，因此我在使用<em class="in"> K-Means </em>进行聚类步骤之前，应用<em class="in">隐马尔可夫模型(HMM) </em>来计算距离。</p><p id="cc4e" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">对于数字数据或分类数据，研究人员通常应用欧几里得距离来计算一个数据与另一个数据的差异。欧几里得距离基于二维坐标(x，y ),该坐标仅容纳数据的一个方面(数字/类别本身)。</p><p id="78f7" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">为什么用<em class="in">嗯</em>？由于 HMM 可以适应数据的时变方面，并且由于除了数据本身之外，个体如何随时间变化的动态也是一个重要方面，因此使得 HMM 成为用于分析目的和数据类型的完美替代解决方案。下一个问题是，如何使用<em class="in"> HMM </em>计算“距离”？</p><p id="77f4" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">基本上，从个体的每个轨迹创建 HM 模型，然后来自该模型的概率密度将被用于确定每个 HM 模型之间的有意义的距离。图 5 显示了计算的简要工作流程。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es jd"><img src="../Images/1de3acf38d7be27ff08cd14c014455da.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*lKRVQXexaspCM8m_fyMJJA.jpeg"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图五。HMM 在距离计算中的应用流程图</figcaption></figure><p id="217c" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">关于聚类方法，我通过设置不同的<em class="in"> k (k = 2，…，n)，应用了 K-medoids 的基本方法。</em>然后，将选择具有最佳标准的<em class="in"> k </em>。标准本身将基于轮廓指数(最高分)、邓恩指数(最高分)、DB 指数(最低分)</p></div><div class="ab cl ig ih gp ii" role="separator"><span class="ij bw bk ik il im"/><span class="ij bw bk ik il im"/><span class="ij bw bk ik il"/></div><div class="hb hc hd he hf"><p id="a5b8" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">结果</strong></p><p id="f500" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">首先，让我们看看基于几个条件的访问的一般模式。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es je"><img src="../Images/5ba0f9dacb18cc89bdcad894dae8765f.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*0EbDHixQoXCJ_ACC746tJw.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图 6 基于性别的访问模式</figcaption></figure><p id="2252" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">从图 6 可以看出，一般来说，女性和男性献血者表现出相对相似的模式，其中大多数人只在第一次访问时献血，并且没有回来(由<em class="in">绿色区域</em>显示)。也可以推断，显然只有很少一部分男女都定期捐款的群体(用<em class="in">蓝色区域</em>表示)。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es jf"><img src="../Images/f76b661c39f2adac7440e3ed27f9cc0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*IOrekPYGhNaaCSS3axStbQ.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图 7。按性别分列的捐助者回报率</figcaption></figure><p id="a2d9" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">图 7 显示了与图 6 类似的模式，其中每个时期的返回率持续下降，表明退出率高，并且大多数人只捐献了一次。</p><p id="12ea" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果我们看看基于 HMM 聚类的“真实”分组会怎么样？</p><p id="39c5" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">在使用具有不同<em class="in">k 的 PAM 的第一次运行之后，发现 k = 2</em>是最佳的。图 8 显示了结果的多维标度。</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="jh ji di jj bf jk"><div class="er es jg"><img src="../Images/38ec6239bcd22c5b4fcf3ada773180c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qKSWO8-bcUUSytxINCXfpg.png"/></div></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图 8。第一阶段的聚类结果</figcaption></figure><p id="55c1" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">有两个明显的集群，我们知道集群 1 比集群 2 有更多的组成员。我们还可以暗示来自集群 1 的成员具有确切的行为(如图 8 所示，正好位于一个位置)。另一方面，群 2 更加分散，这可能是更多样的捐赠行为的指示。</p><p id="57f9" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">然而，第一轮的结果仍然缺乏一个更详细的人口统计学个体。因此，第二次运行的聚类需要仅使用来自聚类 2 的数据。在第二次运行时，发现具有<em class="in"> k=3 </em>的聚类是最大结果。图 9 示出了第一轮和第二轮聚类的不同标准结果的比较。同时，图 10 示出了第二次运行的多维标度。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es ja"><img src="../Images/4ac25d0606a30a8f001bd71d67674fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*3IvKvbv4dMydy_eKlSOdiA.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图九。第一个和第二个结果的标准结果</figcaption></figure><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es jl"><img src="../Images/c2156af9694dfc7fc63721da00b3670d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*5PrrETxTPNDbRKKHdXqcbQ.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图 10。第二次运行的聚类结果</figcaption></figure><p id="97dc" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">因此，我们必须想知道是什么区分了上面的 4 个集群，它们的组成是什么。因此，我使用“TraMineR”可视化每个集群，以研究每个集群的捐赠模式。结果是，第 1 类(第 1 类)由具有完全相似的捐赠模式的人组成，他们只捐赠一次，之后再也不会回来。聚类 2(第二聚类)代表具有“重复捐赠者”模式的人，其中大多数人定期捐赠。第 3 类(第 3 类)由具有“退出”模式的人组成，因为他们在早期仅捐赠 2 或 3 次，并且从未返回。同时，与聚类 3 中的个体相比，聚类 4 代表了更广泛的捐赠模式，但仍然少于聚类 2 中的捐赠行为，因此我将其命名为“失效捐赠人”。图 11 显示了每个集群的模式可视化。</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es jm"><img src="../Images/8d70827c1c44e1a186297595f8e4324e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*pNP7q_IfOOsF7OrahgJVdw.png"/></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图 11。基于每个集群的访问模式</figcaption></figure><p id="c2fd" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">让我们看看图 12 中所示的每个集群的人口统计特征。</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="jh ji di jj bf jk"><div class="er es jn"><img src="../Images/74b4f32328870a12e794dd6cf223e5e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hohF_Zo0_Jzhw8SHUbNdrw.png"/></div></div><figcaption class="iw ix et er es iy iz bd b be z dx translated">图 12。基于每个聚类组人口统计特征</figcaption></figure><p id="dae4" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">基于图 12，我们可以推断，在所有聚类中，除了聚类 1 之外，女性在献血者中占主导地位，在聚类 1 中，大多数是男性献血者。这一事实告诉我们，与女性相比，男性捐赠者往往不会定期进行捐赠。根据年龄特征，我们知道最高的构成来自 20-29 岁左右的个体。</p></div><div class="ab cl ig ih gp ii" role="separator"><span class="ij bw bk ik il im"/><span class="ij bw bk ik il im"/><span class="ij bw bk ik il"/></div><div class="hb hc hd he hf"><p id="c353" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">概括起来，献血模式大致有四种:定期献血(重复献血者)、只献血一次(一次性献血者)、多次献血且永不返回(退出献血者)、偶尔献血(过期献血者)。此外，利用隐马尔可夫模型进行聚类，结合献血者的特点，可以有效地发现和提取不同的献血模式。</p><p id="494f" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">参考资料:</p><ol class=""><li id="93ec" class="jo jp hi hj b hk hl ho hp hs jq hw jr ia js ie jt ju jv jw bi translated">G.B. Schreiber 等人，“第一年的捐赠模式预测第一次捐赠人的长期承诺，”Vox Sang。，第 88 卷，第 2 期，第 114-121 页，2005 年。</li><li id="36c9" class="jo jp hi hj b hk jx ho jy hs jz hw ka ia kb ie jt ju jv jw bi translated">页（page 的缩写）余立宏、钟国宏、林超群、陈世群和李超群，“根据第一次 1.5 年捐款模式预测首次捐款者的潜在退出率和未来承诺:香港华人捐款者的案例”，Vox Sang。，第 93 卷，第 1 期，第 57-63 页，2007 年。</li><li id="236f" class="jo jp hi hj b hk jx ho jy hs jz hw ka ia kb ie jt ju jv jw bi translated">南 Ghassempour，“使用隐马尔可夫模型对纵向健康数据进行聚类”，西悉尼大学，2014 年。</li><li id="6e24" class="jo jp hi hj b hk jx ho jy hs jz hw ka ia kb ie jt ju jv jw bi translated">南 Ghassempour 和 F. Girosi，“使用隐马尔可夫模型聚类健康轨迹”，第 1–6 页，2013 年。</li><li id="1e31" class="jo jp hi hj b hk jx ho jy hs jz hw ka ia kb ie jt ju jv jw bi translated">南 Helske，J. Helske，M. Eerola，“用隐马尔可夫模型分析复杂生命序列数据”，载于 LaCOSA II:序列分析和相关方法国际会议论文集，2016 年 6 月号，第 209-240 页。</li></ol></div></div>    
</body>
</html>