<html>
<head>
<title>Optimizing for MTTR over MTBF is good for your product</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">针对MTBF优化MTTR对您的产品有好处</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/optimizing-for-mttr-over-mtbf-is-good-for-your-product-c784e1da74e6?source=collection_archive---------9-----------------------#2021-03-04">https://medium.com/nerd-for-tech/optimizing-for-mttr-over-mtbf-is-good-for-your-product-c784e1da74e6?source=collection_archive---------9-----------------------#2021-03-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="07aa" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">快速失败并恢复</h2></div><p id="dbf3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在创建一个新的团队或产品时，这是一个无休止的讨论；我应该优先考虑<em class="jt">稳定性和可用性</em>而不是<em class="jt">发布频率</em>吗？用更专业的术语来说，你是一个<strong class="iz hj">平均恢复时间</strong>团队(MTTR)还是一个<strong class="iz hj">平均故障间隔时间</strong> (MTBF)团队？</p><p id="e569" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MTBF和MTTR是共同决定系统可用性的指标，因此它们对团队的组织方式有直接影响。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/0ce2a881f58d383b89e72a8cc6a3cd12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AiwgRPdRljMkkLNI.jpeg"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">MTTR vs MTBF</figcaption></figure><p id="423b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这篇博文支持<strong class="iz hj"> MTTR </strong>，因为它缩短了一个功能的开发周期(启动和完成之间的时间);这就是我们在<a class="ae kk" href="https://www.adevinta.com/" rel="noopener ugc nofollow" target="_blank"> Adevinta </a>中所经历的。</p><p id="9e24" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MTTR的概念是定期部署小的更改，在生产中测试，并拥有检测和快速响应故障所需的工具。</p><h1 id="49d8" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">更多的部署提高了质量</h1><p id="b2cb" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">起初，工程师们可能会对MTTR的概念有点不知所措，因为当事情出错时，压力会很大。</p><p id="292d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">工程师们都知道<strong class="iz hj"> MTBF </strong>背后的概念:<em class="jt">“您生产可以永远运行的高质量代码”，</em>所有代码都在一个大版本中发布，由您的QA测试，每两周部署一次。</p><p id="4c1f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当出现问题时，大多数时候这是一个需要花很多时间才能理解的棘手问题。此外，一次回滚两周的特性通常会以与利益相关者的争论而告终。</p><p id="a120" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MTTR的目标是不同的:你有一个持续的部署流。部署越多，问题就越多，但是您只希望因小问题而失败，并在问题发生时尽快修复它们。</p><p id="f257" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请记住，您的团队应该进行优化，以快速响应失败，并在发生问题时立即迭代代码。</p><p id="43ec" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这也意味着您应该独立测试每个新特性，每个版本都有小的变更集，这样您的团队将为每个版本交付更少的代码。这将自动迫使人们做更小的拉式请求<em class="jt">(代码越少，评论越好)</em>。你还在团队内部创造了一种强大的动力，因为如果出了问题，每个人都会有责任。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es li"><img src="../Images/6bd4a93523b3dd8bc0d265bf7f56c271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jFMqxoPmKyJ-h0O6"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">照片由<a class="ae kk" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae kk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="213a" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">接受失败以提高你的可用性</h1><p id="c53f" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">最近的一项<a class="ae kk" href="https://itic-corp.com/blog/2020/06/forty-percent-of-enterprises-say-hourly-downtime-costs-top-1million/" rel="noopener ugc nofollow" target="_blank">信息技术情报咨询调查<em class="jt"> </em> </a>报告称，每小时的停机时间可能高达100万美元。这意味着所有垂直市场中各种规模的公司都很少或根本不能容忍停机。所以结论是，失败的时候你要做好准备。</p><p id="ca7e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> MTBF </strong>最小化变化，而<strong class="iz hj"> MTTR </strong>鼓励变化。当使用<strong class="iz hj"> MTTR </strong>方法时，拥有更多的稳定性会让人感觉不自然，但是你可以更好地控制你的可用性:这就是我们所说的“误差预算”。这是技术系统在没有合同后果的情况下可以失败的最长时间。</p><p id="cfd7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，如果您的服务水平协议(SLA)规定系统将运行99.99%，这意味着您的错误预算<em class="jt">(或您的系统可以停机而不产生后果的时间)</em>是每年52分35秒。</p><p id="ece1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当针对<strong class="iz hj"> MTBF </strong>进行优化时，您的产品正常运行时间得到了改善:您获得了巨大的SLO <em class="jt">(服务水平目标)。但是一旦你遇到问题，你会很快消耗掉你的错误预算，因为问题是复杂的，回滚也是复杂的。我相信你已经听到有人说<em class="jt">“除了在事故期间，我们的SLI是伟大的！”</em></em></p><p id="618a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了<strong class="iz hj"> MTTR </strong>，团队就为即将发生的事件做好了准备，并执行小规模的回滚和快速修复……因此，管理您的错误预算就更容易了。换句话说，当您即将达到SLO时，您可以减少部署频率，但这也意味着您可以使用这笔预算来直接测试生产中的东西<em class="jt"> (A/B测试、新特性等)。</em></p><h1 id="ed22" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">让您的团队为成功做好准备</h1><p id="6f7e" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">MTTR还将有助于提高团队绩效，因为处理反复出现的问题可以训练团队在出现问题时做出反应。由于事件可能随时发生，每个人都必须准备好根据整个团队在您的监控/可观察性系统上设置的指标来修复系统。这些指标应该关注用户/业务影响，而不是技术方面，因为归根结底，这是您业务的核心。</p><p id="5d12" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个基本的惯例是在每天的会议上回顾你的指标，因为它们将决定你一天中能做什么或不能做什么。</p><p id="50f4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当新的未检测到的事件发生时，您还应该设置一些规则。您应该首先编写一份包含事件详细信息的事后分析，然后纠正问题并添加新的警报，以便在下次发生问题时自动检测到它。目标是将每个事件作为学习和改进团队工作方式的一种方式。</p><h1 id="a199" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">为MTTR优化的工具</h1><p id="0d48" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">为了拥有一个高效的MTTR团队，你应该考虑以下几点:</p><p id="afb1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">在团队中建立开发团队文化/协作</strong></p><p id="fecb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你的团队了解整个系统是如何工作的真的很重要——从代码到服务器和数据；当事情出错时，它不应该成为其他人的问题。</p><p id="80ef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">自动化一切</strong></p><ul class=""><li id="5343" class="lj lk hi iz b ja jb jd je jg ll jk lm jo ln js lo lp lq lr bi translated">有一个预测和自动化的方式把你的改变推给用户<em class="jt">(把所有东西都放在git里)</em>。</li><li id="7bbb" class="lj lk hi iz b ja ls jd lt jg lu jk lv jo lw js lo lp lq lr bi translated">减少您的部署时间，尽可能缩短反馈周期<em class="jt">(例如，如果您的部署需要20分钟，您可以将其减少到5分钟，您将有3次机会来修复生产问题)</em>。</li><li id="1fdd" class="lj lk hi iz b ja ls jd lt jg lu jk lv jo lw js lo lp lq lr bi translated">建立一个很好的CI/CD渠道和一个可以更快发货的平台<em class="jt"> (Kubernetes、serverless等)</em>。</li></ul><p id="86da" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">提升你的观察和监控能力</strong></p><p id="6525" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可观察性和监控是让您知道有问题的指标，因此您必须花一些时间来正确配置它们。</p><p id="3580" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不要忘了在你的业务指标上设置警告，因为这对于理解一个版本如何影响你的用户行为更为重要。</p><p id="48b6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">将风险降至最低</strong></p><p id="a264" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">既然你的团队已经为MTTR做好了准备，你可以做一些事情来最小化风险:特色标志、金丝雀发布、A/B测试等等。所有这些系统都允许您在不影响用户的情况下知道什么时候出了问题。</p><h1 id="8d5c" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">结论</h1><p id="38dd" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">大多数团队都关注MTBF，因为这种感觉是对的，但是当你决定改变你的工作方式时，你会发现接受分布式系统一直在失败的事实对业务有益。你唯一需要做的就是当它发生时做好准备——你可以通过为MTTR建立你的团队来做到这一点。</p><p id="c206" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这篇文章最初发表在<a class="ae kk" rel="noopener" href="/adevinta-tech-blog/optimising-for-mttr-over-mtbf-is-good-for-your-product-f354a67d75d0"> Adevinta技术博客</a>上。</p></div></div>    
</body>
</html>