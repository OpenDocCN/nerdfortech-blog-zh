<html>
<head>
<title>Maven Taxi Challenge</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Maven出租车挑战赛</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/maven-taxi-challenge-dca9b2abd4ab?source=collection_archive---------5-----------------------#2021-10-24">https://medium.com/nerd-for-tech/maven-taxi-challenge-dca9b2abd4ab?source=collection_archive---------5-----------------------#2021-10-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fc6f29a5336648184c97a90f17bfa434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vBZiniO16D8fFxJTK9GtcA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">出租车</figcaption></figure><p id="2e69" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">简介</strong></p><p id="3bad" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这一次，我们将分析一个庞大的数据集，其中包含纽约市超过2700万次出租车出行的记录。</p><p id="4543" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们的任务是整理这些庞大的数据集，对数据进行彻底的质量保证和清理，并提供一个仪表板，让首席调度员能够准确了解历史行程信息。</p><p id="3872" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">数据集</strong></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es js"><img src="../Images/1ada8e35e35b48ed3ea43459c3b63ca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5yFdevWGLxcLJR4RKt02rA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">数据集</figcaption></figure><p id="3a79" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们有5种类型的数据集，旅行数据集，地图区，日历，区和字典。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/9468ddbeea7dc89b31f4545307b2a170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aaXzgdHI0J_CewUl1YtoaQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">行程数据</figcaption></figure><p id="9b78" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们将看到2017年、2018年、2019年和2020年4年的出行数据。我们可以看到旅行数据非常大，大约有2700万条记录。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/8374d2ce5909b4338a35afb332653e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kX76fM5U8M4T7SHwNyJM3Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">地图数据</figcaption></figure><p id="70c3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第二个是taxi_zones_map.json文件中的地图数据，我们将使用该文件在Power BI中创建特定的地图。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/a9ecfadfcd5cee437f1b5bffc7571b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2YyU-uC0RMudATh6ruYJAw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">会计日历数据</figcaption></figure><p id="693a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下一步，财政日历数据，我们可以看到在数据像上面的图片，有日期，财政年度，日名称等。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/f435d237c990e67035daa7dc8d8376ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*STd5vKT17DI1KTj1CqGl-g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">字典数据</figcaption></figure><p id="2add" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后是字典数据，我们可以用这些数据来理解这些数据。</p><p id="1b99" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">数据准备&amp;数据清理</strong></p><p id="de72" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第一个问题，数据非常大，大约有2700万条记录，因此Power BI很难处理，并且需要很长时间来处理。因此，在这种情况下，我必须将数据导入某个工具，以便更容易、更快地处理数据。我选择SQL来解决这个问题。</p><p id="431a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> SSIS </strong></p><p id="cf26" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">SQL Server Integration Services是一个用于构建企业级数据集成和数据转换解决方案的平台。使用Integration Services通过复制或下载文件、加载数据仓库、清理和挖掘数据以及管理SQL Server对象和数据来解决复杂的业务问题。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/519870a88a5d2123f9122ddbe124fe60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1FZxgZ832XpoDbcRR5DT1Q.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">创建包</figcaption></figure><p id="0ca2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在SSIS，我们需要先创建一个项目，然后我们可以通过简单的过程创建一个包。我们可以右键单击SSIS包裹，然后选择&amp;申请SSIS进出口向导…如上图所示。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/31eed126b2b757899d495edd9258297c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vuDlPqFXVU9xlCZkvoryfA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">选择数据源</figcaption></figure><p id="738e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，我们选择数据源，我们可以一个一个地导入，也可以创建一个全部导入，但是在这个例子中，我创建了一个一个地导入的包。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/093ac9cf07e8734ba3118032a6eb02ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4WFdpe-2J0f2BKGCkuxO2A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">选择目标源</figcaption></figure><p id="c618" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在我们选择了一个数据源之后，我们需要选择一个目标源，如上图所示。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/bcf5d56df2aa19ad896bbf422a3f8cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ROe6O85--JWYYUvUHIZeKQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">预览数据</figcaption></figure><p id="4aea" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在结束之前，我们可以预览数据，以确保在此之后执行包时没有错误。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/c3ca0e6e4e45917f7ad1efa7c4ce6f9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5km83Sl3Uu3m_pvp0RZTTQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">执行包</figcaption></figure><p id="5817" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于执行包，我们可以选择&amp;右键单击包，然后单击Execute Package。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/4ccfd2a3b7f4564794be811f2c426f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*xuyeE1gajxmv-ERXwPF6kQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">结果导入数据</figcaption></figure><p id="17b9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后，在我们完成并成功导入数据后，在我们的数据库中，我们将看到如上图所示的表格。</p><p id="095c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">合并数据，为Power BI准备数据</strong></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/7ff43455fdadc0fa50958181cae7ed86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L3R-MMSoruWJGi12bpE0gw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">合并数据</figcaption></figure><p id="4b8f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">完成数据导入后，我们需要将数据合并到一个表中，以减少Power BI中的流程。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/7326708c0619d5ef9c1b46f893e57a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*btxzwoSMbB-NtHY0XZsYaQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">数据集可用于Power BI</figcaption></figure><p id="17a5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">合并数据trip后，我发现数据非常大，为了减少Power BI中的流程，我决定将Trip数据和Calendar数据合并到一个表中。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/b714ac18e89bc48908329050a3460701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*G0Ps-HrvEW1u-vk3JtXwvA.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Power BI的查询数据集</figcaption></figure><p id="327b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">查询连接如上图所示。</p><p id="1bda" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">Power BI中的可视化</strong></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/1107aeadb8a9fe5204253fa56352a710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*H1TfeQZIImDPa5A_12FpPw.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">将数据从SQL导入Power BI</figcaption></figure><p id="99cc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们需要将数据从SQL导入Power BI，我们需要在SQL和Power BI之间创建一个连接。不要忘记导入区域数据。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/98633a9cd658abf6a1fc889714eec314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*jlOY7RVBfW4IE05IPyX83Q.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">创建数据和区域之间的关系</figcaption></figure><p id="ec6e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">看看这个，首先，我们有5个数据集(旅行数据、地图数据、区域数据、财政日历数据和字典数据)，但是在Power BI中，我们已经减少了SQL中的流程，因此我们在Power BI中只创建了3个数据集，这非常有帮助。</p><p id="4d89" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们只创建1个关系表(数据表和区域表)。在我们建立了关系，并喜欢用BI提供给我们的图表创造创造力之后。</p><p id="308c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">地图可视化</strong></p><p id="d4df" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于这个挑战，我很兴奋，因为我可以使用Power BI中的Map Shapefile功能，终于…哈哈哈…</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/2480b36e2bed17871598b58da0b3f5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zkIbutopA86s_Fpzc6eunw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">地图可视化</figcaption></figure><p id="264d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们选择并应用形状映射图，并将LocationID字段拖放到Location中。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/6befb87d49e1ad7e6be219c41aa8c3a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pJqEaYGW0E3LQIhDjTs4JA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">添加地图</figcaption></figure><p id="90eb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，我们需要将地图聚焦到我们将根据数据集显示的地图中。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/a093086f62a0c0a24371be7d5db469b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uugZk2hpaGcuUfAUKlM2rg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">上下车区</figcaption></figure><p id="22ce" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后，我们需要将取货和卸货数量添加到色彩饱和度中。最后，我们创建了地图可视化。</p><p id="eb6d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">结果与结论</strong></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/1337624ac0c2db6abd9d10f0171e3617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*514SyNOI6Qb-N1ew0qIU4w.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">纽约市出租车出行分析仪表板</figcaption></figure><p id="8ac5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Power BI是一个强大的数据可视化工具，我们可以在Power BI中使用许多功能，我非常兴奋地探索更多的功能。</p><p id="e2db" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">参考</strong></p><p id="c305" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae kq" href="https://docs.microsoft.com/en-us/sql/integration-services/sql-server-integration-services?view=sql-server-ver15" rel="noopener ugc nofollow" target="_blank"> SQL Server集成服务— SQL Server集成服务(SSIS) |微软文档</a></p></div></div>    
</body>
</html>