<html>
<head>
<title>Registration/Login using the MongoDB to store data in expressJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 MongoDB 在 expressJS 中存储数据的注册/登录</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/registration-login-using-the-mongodb-to-store-data-in-expressjs-dba79c8886f2?source=collection_archive---------5-----------------------#2021-06-10">https://medium.com/nerd-for-tech/registration-login-using-the-mongodb-to-store-data-in-expressjs-dba79c8886f2?source=collection_archive---------5-----------------------#2021-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e5d9c392c4d0dd1873a14e51418d7419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dl0F36mQqB_LNtA_dKd3ug.jpeg"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="2926" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">********第 1 部分:-处理注册部分。*******</h1><h1 id="7ddb" class="ix iy hi bd iz ja jv jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jz js jt ju bi translated">第一步:-</h1><ul class=""><li id="1237" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">首先，在系统中全局安装 express-generator 和 nodemon 包。</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="e263" class="lb iy hi kx b fi lc ld l le lf">npm i --global express-generator</span><span id="2981" class="lb iy hi kx b fi lg ld l le lf">npm i --global nodemon</span></pre><blockquote class="lh li lj"><p id="a346" class="lk ll lm kc b kd ln lo lp kf lq lr ls lt lu lv lw lx ly lz ma mb mc md me kn hb bi translated">"<strong class="kc hj"> Express-generator </strong> ":-这将帮助您设置基本服务器</p><p id="09de" class="lk ll lm kc b kd ln lo lp kf lq lr ls lt lu lv lw lx ly lz ma mb mc md me kn hb bi translated">"<strong class="kc hj"> nodemon </strong> ":-这将在您保存更改后自动重启您的服务器。</p></blockquote><ul class=""><li id="8139" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">现在，我们可以通过键入以下命令来设置一个基本的 express 服务器</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="57c5" class="lb iy hi kx b fi lc ld l le lf">express --view=ejs --css=sass &lt;ProjName&gt;</span></pre><ul class=""><li id="b35e" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">现在，为了创建在 MongoDB 中存储数据的模型，我们必须安装“<strong class="kc hj">mongose</strong>”包。</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="9024" class="lb iy hi kx b fi lc ld l le lf">npm i mongoose --save</span></pre></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="7614" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第二步:-</h1><ul class=""><li id="648c" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现在，我们必须创建一个用户模型来在 MongoDB 中存储数据。我们必须在根目录下创建一个名为“<strong class="kc hj"> models </strong>的新文件夹。完成后，我们必须在文件夹/root/models/中创建一个新的“<strong class="kc hj"> User.js </strong>”文件。</li><li id="d475" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">我们可以根据我们的需要设置我们的模型，更多细节请参考图片。</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/ed2013f5fe60c21930e17981277fbcf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G01fslwCXaMrX7bhmocsag.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">为用户数据创建模型。</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="81b7" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第三步:-</h1><ul class=""><li id="60b3" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现在，我们必须将 MongoDB 数据库连接到我们的服务器。因此，首先将 mongoose 导入 app.js 文件，在初始化变量 app 之前，编写以下代码。</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="7fb6" class="lb iy hi kx b fi lc ld l le lf">mongoose.connect('mongodb://localhost:27017/regis',</span><span id="1338" class="lb iy hi kx b fi lg ld l le lf">{ useNewUrlParser: true, useUnifiedTopology: true },</span><span id="db8b" class="lb iy hi kx b fi lg ld l le lf">(err) =&gt; {console.log(err ? err : ' connection true');}</span><span id="4ea6" class="lb iy hi kx b fi lg ld l le lf">);</span></pre><ul class=""><li id="6063" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">它看起来像这样:-</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/86be89ad7477dcd15d228afa47ca1660.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*JTo-lbAuhQUI_6cYDzcblg.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">数据库连接</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="7adf" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第四步:-</h1><ul class=""><li id="8307" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现在我们必须添加登录和注册链接到我们的索引页面(root/views/index.ejs)。这将帮助用户导航到相应的页面。</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="139e" class="lb iy hi kx b fi lc ld l le lf">&lt;a class="btn btn-pri" href="/users/login"&gt;Login&lt;/a&gt;</span><span id="3966" class="lb iy hi kx b fi lg ld l le lf">&lt;a class="btn btn-pri" href="/users/register"&gt;Register&lt;/a&gt;</span></pre><ul class=""><li id="1004" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">登录按钮的 href 属性的值必须是“<strong class="kc hj">/用户/登录</strong>”。</li><li id="c62b" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">同样，对于注册按钮 href= "/users/register "。</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/5a4dfef0e4c6c8136f264ed5a38179e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*xiQqlHiXA93CaVuNz9jU4Q.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">向索引页添加链接。</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="14b9" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第五步:-</h1><ul class=""><li id="3eae" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现在，我们必须处理文件夹“<strong class="kc hj"> /root/routes </strong>中的<strong class="kc hj"> users.js </strong>文件中“/users”的路由。</li><li id="437e" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">索引页面上的 Register 按钮将在<strong class="kc hj"> /users/register </strong>路径上执行<strong class="kc hj"> GET </strong>请求。</li><li id="c7a7" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">因此，为了处理在<strong class="kc hj"> /users/register </strong>路线上的<strong class="kc hj"> GET </strong>请求，我们可以将响应作为<strong class="kc hj"><em class="lm">user registration form . ejs</em></strong>文件发送到浏览器。该填充将包含一个 From，它具有<strong class="kc hj">action = "/users/register " method = " POST "</strong></li></ul><blockquote class="lh li lj"><p id="65d5" class="lk ll lm kc b kd ln lo lp kf lq lr ls lt lu lv lw lx ly lz ma mb mc md me kn hb bi translated">提示:-所有的 ejs 文件都必须放在<strong class="kc hj">视图</strong>文件夹中，即(<strong class="kc hj">root/views/user registration form . ejs</strong>)。</p></blockquote><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mu"><img src="../Images/d26f64076b08031de39470d4e0930481.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*7rFSsLasLqxDqVz_t8zI-Q.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">正在处理路由上的 get 请求。</figcaption></figure><ul class=""><li id="41b1" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated"><strong class="kc hj"><em class="lm">user registration form . ejs</em></strong>文件将如下所示。</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/81293dc2502222dc00512e7261a1746c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZ7IEu0HhKkYxq4KatE8yA.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">userRegisterForm.ejs 文件</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="7e7e" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第六步:-</h1><ul class=""><li id="8168" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">一旦我们填写并提交表单，它将在 route " <strong class="kc hj"> /users/register </strong>"上执行<strong class="kc hj"> POST </strong>请求。</li><li id="7b52" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">现在要将数据添加到数据库中，我们需要导入<strong class="kc hj">用户模型</strong>。所以放到了<strong class="kc hj"> routes </strong>文件夹里面的 users.js 文件中。在顶部，我们需要一个用户模型。</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="dfa3" class="lb iy hi kx b fi lc ld l le lf">let User = require('../models/User');</span></pre><ul class=""><li id="be8e" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">现在我们可以在"<strong class="kc hj"> req.body" </strong>新变量<strong class="kc hj">数据</strong>中存储表单数据。</li><li id="470c" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">现在我们可以使用 mongoose 的<strong class="kc hj"> User.create() </strong>方法将用户添加到数据库中。</li><li id="0c31" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">一旦用户创建成功，我们可以重定向到“<strong class="kc hj">/用户/登录</strong>”路径。</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/1c3898c3844b02867900de4ecf8467b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*ue053iiQ3g55bd5XWygkkw.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">处理文件“root/routes/users.js”中的注册请求</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="c4b1" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第七步:-</h1><h2 id="8216" class="lb iy hi bd iz mx my mz jd na nb nc jh kh nd ne jl kj nf ng jp kl nh ni jt nj bi translated">****加密(哈希)密码****</h2><ul class=""><li id="164e" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">到目前为止，我们已经存储了用户输入的密码，因为它在数据库中。这使得我们的密码很容易被其他人获取。</li><li id="3073" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">这就是为什么我们需要加密密码，同时将它们存储在数据库中。</li><li id="801c" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">对于<strong class="kc hj">散列</strong>(加密)密码，我们需要将“<strong class="kc hj"> bcrypt </strong>”包安装到我们的服务器中。</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="cda8" class="lb iy hi kx b fi lc ld l le lf">npm i bcrypt --save</span></pre><ul class=""><li id="85a2" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">现在，为了在注册新用户时加密密码，我们必须使用 mongoose 中间件(<strong class="kc hj"> hook </strong>)，如<strong class="kc hj"> pre(save) </strong>。</li><li id="2193" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">每次调用用户模式时，它首先执行预挂钩，然后再执行它的工作。</li><li id="81c0" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">因此，为了加密密码，我们必须在<strong class="kc hj"> pre(save) </strong> hook 中使用<strong class="kc hj"> bcrypt.hash() </strong>方法。</li><li id="aa86" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">在这个钩子中，我们必须将“<strong class="kc hj"> req.body </strong>中的密码改为散列密码。</li></ul><blockquote class="lh li lj"><p id="1a6a" class="lk ll lm kc b kd ln lo lp kf lq lr ls lt lu lv lw lx ly lz ma mb mc md me kn hb bi translated">提示:-我们必须在创建模型之前编写 pre(save)钩子。</p></blockquote><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es nk"><img src="../Images/8b97660677cbe67b1b497c053662c871.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*b_qLJ5_aWAOqEY6mDH7k_A.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">使用 bcrypt 包散列密码。</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="3c13" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">********第 2 部分:处理登录部分。*********</h1></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="491a" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated"><strong class="ak">第一步:- </strong></h1><ul class=""><li id="3f1c" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">在<strong class="kc hj"> index.ejs </strong>页面上的<strong class="kc hj">登录</strong>按钮将执行<strong class="kc hj">获取路由<strong class="kc hj">/用户/登录</strong>上的</strong>请求。</li><li id="5dbc" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">为了处理在"<strong class="kc hj"> /users/login </strong> " route 上的这个<strong class="kc hj"> GET </strong>请求，我们只需在响应中呈现"<strong class="kc hj"> userLoginForm.ejs </strong>"页面。</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es nl"><img src="../Images/e96a02aa402835468d01a8dd858f8274.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*RQdB1ddLfp993xNUCwVZZQ.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">rendring userLoginForm.ejs 文件。</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="ebef" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第二步:-</h1><ul class=""><li id="aa73" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">“userLoginForm.ejs”文件必须包含一个带有字段<strong class="kc hj">电子邮件</strong>和<strong class="kc hj">密码</strong>的简单登录表单。</li><li id="411e" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">这个表单必须有属性(<em class="lm">action = "/users/log in " method = " POST "</em>)</li><li id="bca5" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">“userLoginForm.ejs”文件将如下所示。</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es nm"><img src="../Images/94c8dbd99519ee33f960b3f7a6f875f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*QUpXo4j9R25n6NcW0dR74g.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">“用户登录信息来源. ejs”文件</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="486b" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第三步:-</h1><ul class=""><li id="c644" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现在要处理 route " <strong class="kc hj"> /users/login </strong>"上的<strong class="kc hj"> POST </strong>请求，我们必须首先从<strong class="kc hj"> req.body </strong>中的 formData 提取电子邮件和密码。</li><li id="b27a" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">在以下 3 个条件下，服务器必须重定向回“/用户/登录”。</li></ul><ol class=""><li id="6a88" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn nn kp kq kr bi translated"><strong class="kc hj"> <em class="lm">邮箱和密码为空时。</em>T53】</strong></li><li id="b3e4" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn nn kp kq kr bi translated"><strong class="kc hj"> <em class="lm">当邮箱与数据库中的用户不匹配时。</em>T57】</strong></li><li id="9bb9" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn nn kp kq kr bi translated"><strong class="kc hj"> <em class="lm">当密码与数据库中现有密码不匹配时。</em> </strong></li></ol><ul class=""><li id="b65d" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">这里我们要使用 mongoose 的<strong class="kc hj"> User.findOne() </strong>方法在数据库中查找用户。</li><li id="fced" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">写出上面提到的各个案例来处理错误。</li></ul></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="49fa" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated"><strong class="ak">第四步:- </strong></h1><ul class=""><li id="e196" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">请记住，我们已经将哈希(加密)密码存储到数据库中，但我们现在有普通密码来匹配哈希。</li><li id="d40a" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">这个问题可以通过使用<strong class="kc hj"> bcrypt </strong>包的“<strong class="kc hj">bcrypt . compare()”</strong>方法来解决。</li><li id="776e" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">但是首先，我们必须在用户模型中编写方法来检查密码是否匹配。我们可以通过在模型中使用</li></ul><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="b149" class="lb iy hi kx b fi lc ld l le lf">userSchema.methods.name=function(){};</span></pre><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es no"><img src="../Images/91dc28b2b438bb39d0ff66822c66c1c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*BmwlW-8C1NDD6kjcxrQ14A.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">添加 checkpassword 方法。</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="6407" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">第五步:-</h1><ul class=""><li id="acd2" class="ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现在，在处理路由的<strong class="kc hj"> users.js </strong>文件中，我们可以使用这个<strong class="kc hj"> checkPassword() </strong>方法来检查密码是否匹配。</li><li id="0dcb" class="ka kb hi kc b kd mi kf mj kh mk kj ml kl mm kn ko kp kq kr bi translated">最后，路由处理程序必须如下所示</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es np"><img src="../Images/83dc6ae50402f393f9d4298a68963098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*g7Xv7plbiC7La-3osz1t9w.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx translated">在“/用户/登录”上发布请求</figcaption></figure><ul class=""><li id="d1ff" class="ka kb hi kc b kd ln kf lq kh mf kj mg kl mh kn ko kp kq kr bi translated">如果电子邮件和密码匹配，将返回“登录成功”消息作为响应，否则将再次重定向到登录页面。</li></ul></div></div>    
</body>
</html>