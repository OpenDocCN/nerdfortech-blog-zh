<html>
<head>
<title>Coffee Shops Analysis in Manhattan — Segmenting and Clustering Neighborhoods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">曼哈顿的咖啡店分析-分割和聚类社区</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/coffee-shops-analysis-in-manhattan-segmenting-and-clustering-neighborhoods-dba71fee3429?source=collection_archive---------11-----------------------#2021-06-05">https://medium.com/nerd-for-tech/coffee-shops-analysis-in-manhattan-segmenting-and-clustering-neighborhoods-dba71fee3429?source=collection_archive---------11-----------------------#2021-06-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a7c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> k-means聚类，Foursquare API &amp;叶图</em></p><p id="c412" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个项目的主要目标是定义一个商业问题，在网上寻找数据，并使用Foursquare位置数据来比较一个城市的不同社区，以确定哪个社区适合开始新的业务。在这个项目中，我将以循序渐进的方式经历从问题设计、数据准备到最终分析的所有过程，最后将提供一个结论，业务利益相关者可以利用该结论做出决策。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/ec47190f9ef75d320cccd8d1a758f665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BM9V2kpaOl2f5P_2bSSucg.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图1——谷歌图片</figcaption></figure><h1 id="441f" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">介绍</h1><p id="e554" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">曼哈顿是最受欢迎的旅游目的地，也是纽约州最好的观光地之一。它也是纽约最好的城市之一，可以说是世界上最好的城市之一。从最稀有的古董袖扣到最美味的主菜，你可以找到任何你想要的东西。</p><p id="35d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一项既是游客也是居民的活动是喝咖啡。这项活动可以单独进行，也可以在朋友的陪同下，在这个城市的任何时候进行。美国人每年喝掉大约1460亿杯咖啡。2020年，70岁及以上的人每天喝的咖啡最多。那一年，这个特殊的年龄组平均每人每天喝将近2.2杯。18岁和19岁的人喝得最少，人均每天大约0.8杯(<a class="ae kx" href="https://www.statista.com/statistics/456360/total-us-coffee-per-capita-consumption/" rel="noopener ugc nofollow" target="_blank">美国人均咖啡消费总量</a>)。</p><h1 id="49f9" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">商业问题</h1><p id="67e8" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在这个项目中，我们将通过一步一步的过程来找到一个咖啡店的最佳位置。这份报告将针对那些想要从头开始、购买现有业务的利益相关者，或者任何对纽约市曼哈顿的一杯好咖啡感兴趣的人。我们将尝试检测尚未挤满咖啡店的位置。我们还对附近没有咖啡店的地区特别感兴趣。假设前两个条件都满足，我们也希望地点尽可能靠近市中心。</p><h1 id="b15b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">资料组</h1><p id="6048" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">为了分割和探索纽约的街区，我们需要一个包含5个区和每个区中的街区以及每个街区的经度和纬度坐标的数据集。我使用了来自IBM cloud服务器的预先准备好的JSON文件，并简单地运行一个<code class="du ky kz la lb b">wget</code>命令来访问数据。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lc"><img src="../Images/108867581f5de7dcd28725c34ca4c292.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zy3scUcGIAb-DwtxT_Pgrw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图2—作者提供的图片</figcaption></figure><p id="2082" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们需要将嵌套Python字典的数据转换成一个数据框架。因此，我创建了一个空的数据帧，然后遍历数据，一次填充数据帧的一行。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ld"><img src="../Images/2a70803d994c155cf51cf009d8d2ce39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*gpv7sdEsSfSLunXc3DJMew.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图3—作者图片</figcaption></figure><p id="881f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，数据框总共有306个街区，5个区，并且它的存储方式可以读取到熊猫数据框中，因此它是一种结构化格式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es le"><img src="../Images/9a45ce13d9c118cd90597100e07de725.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*_6y8vrErD9--bzQyvZkUYg.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图4—作者提供的图片</figcaption></figure><h1 id="36ed" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">方法论</strong></h1><p id="f25b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这个项目的目标是找到曼哈顿咖啡店密度较低的区域。</p><ul class=""><li id="75df" class="lf lg hi ih b ii ij im in iq lh iu li iy lj jc lk ll lm ln bi translated">首先，我们将检查候选邻域。它将为我们的候选邻域的质心创建纬度和经度坐标。我们将创建一个覆盖感兴趣区域的格网，该格网以上西区为中心。</li><li id="90b3" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">第二，我们将得到位于中央公园半径3.5公里范围内的前100个场馆，并探索它们的邻近地区。</li></ul><p id="300e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">叶库和传单地图</strong></p><p id="934d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可视化库<strong class="ih hj"/><a class="ae kx" href="https://python-visualization.github.io/folium/quickstart.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>被用来创建纽约及其邻近地区的地图。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lt"><img src="../Images/df89e117175aed8d5c02324842a7a062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m4AH4FnU0l1XvJ8u0jlKjw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图5—作者图片</figcaption></figure><p id="6984" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">探索曼哈顿的街区</strong></p><p id="7633" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我对原始数据帧进行切片，并为曼哈顿数据创建一个新的数据帧。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lu"><img src="../Images/36a0ec0c0a397d7ee29917f54de720bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*_FGCtiQTOeZi7plHVejENg.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图6 —作者图片</figcaption></figure><p id="3e8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后再次使用可视化库<a class="ae kx" href="https://python-visualization.github.io/folium/quickstart.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>来创建曼哈顿及其邻近地区的地图。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lv"><img src="../Images/8115d10fc279ea08d9e3d3fc9d0d247d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGgBa9OWWOKxEBgs6mJ14w.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图7—作者提供的图片</figcaption></figure><p id="165d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Foursquare API </strong></p><p id="ab00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了探索曼哈顿的街区，使用了Foursquare   API。该接口用于获取每个街区中最常见的位置类别(咖啡馆、餐馆、冰淇淋店、美术馆等)，然后使用该功能对街区进行分组。必须在应用程序中创建一个帐户来获取您的客户端凭据。</p><p id="1f25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">API用于获取3.5公里半径范围内的前100个场馆。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lw"><img src="../Images/86dd09c80194bc8882f510815d91d09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ks4eRDo5mD25HtctmImjRg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图8—作者提供的图片</figcaption></figure><p id="eb2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，分析验证了曼哈顿地区203个类别的频率，并在过滤了咖啡店类别之后。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lx"><img src="../Images/6321d85ed58299698b33bf254d2edb7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:370/format:webp/1*nHJqRRZ9JbRf8EKnNE0dSw.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图9—作者图片</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ly"><img src="../Images/678dc3becade1da82d2f1d9c9c04b3c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:346/format:webp/1*ZXfPBoh9aPZhOZU1h3Lk8w.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图10—作者图片</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lz"><img src="../Images/4b14f10a13ea03daeb0bd49c1fc7fbe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*cbpS7MAnWMkDuKwINUutUA.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图11—作者图片</figcaption></figure><h1 id="730c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak"> k均值聚类</strong></h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ma"><img src="../Images/7913a22519500532707d03303d4aeb00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*T40oZvOnERfX_a2VGjeC_g.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图12—作者提供的图片</figcaption></figure><p id="5758" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，执行k-means聚类算法将邻域聚类成4个簇。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mb"><img src="../Images/93f13ac977445cf04e89beb3897c245d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*yvtlyWCsVSgbClRevMO3_w.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图13—作者图片</figcaption></figure><h1 id="3c23" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">聚类邻域</h1><p id="46a2" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">再次，叶图书馆被用来可视化城市的集群分布。根据咖啡店在每个区域的出现频率，并遵循此分析的要求(附近很少或没有咖啡店的区域)，对每个聚类进行检查和区分。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mc"><img src="../Images/5395e6b71fa48015ba86f695ccb996be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s95LG6mp-xM7oW7aoudqsQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图14—作者提供的图片</figcaption></figure><p id="f29e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，计算咖啡店很少或没有咖啡店的社区到中心坐标(上西区)的距离，并将其添加到分析中。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es md"><img src="../Images/7398a99575221458763a91a4d01974a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*tOZZ3lrPOzbOWsenrsaCbQ.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">图15—作者提供的图片</figcaption></figure><h1 id="ac56" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结果</h1><p id="bb66" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这项工作分析了曼哈顿的40个街区，目的是发现不再充满咖啡店的地方。蒙特利尔自助餐厅密度最低的区域集中在分析区域的外围区域。这个区域与集群3(地图上的红点)相关。在这个集群中，13个社区的自助餐厅密度很低或没有。咖啡店高发的街区位于聚类2中，它们距离我们的中心坐标大约2-4公里。</p><p id="3e30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">中城</strong>是距离上西区最近的街区，没有咖啡店。距离中心坐标1.13公里。都铎城和海龟湾也是附近的地方，距离appx 1.4-1.5公里，没有咖啡店。</p><h1 id="869e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="9186" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">咖啡店高发的街区位于集群2中，其中许多距离中心坐标大约2-4公里。喝咖啡频率最高的街区是哈莱姆中心区、汉密尔顿高地、晨边高地和曼哈顿维尔。项目要求包括检测尚未挤满咖啡馆的地方，或者附近没有咖啡馆的区域，并且尽可能靠近市中心。建议以下三个方案满足项目要求:<strong class="ih hj">中城</strong>，距离中心坐标1.13公里最近且无咖啡店，都铎城，海龟湾(1.4-1.5公里)。</p><p id="e605" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用的数据集</strong></p><p id="1773" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决上述问题，我使用了:</p><p id="ffc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[1]邻域和地理坐标:<a class="ae kx" href="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DS0701EN-SkillsNetwork/labs/newyork_data.json" rel="noopener ugc nofollow" target="_blank">https://cf-courses-data . S3 . us . cloud-object-storage . appdomain . cloud/IBMDeveloperSkillsNetwork-ds 0701 en-SkillsNetwork/labs/new York _ data . JSON</a></p><p id="b5be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2]four square API:<a class="ae kx" href="https://developer.foursquare.com/docs)" rel="noopener ugc nofollow" target="_blank">https://developer.foursquare.com/docs</a></p><p id="5d49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热门地点的位置数据—由Foursquare API提供<br/>four square API提供与特定地点不同地点的出现频率相关的数据。我使用了位置数据来识别人流密集的场所(如市场)附近的集群。这些区域将被识别为热点区域。</p><p id="f062" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">讨论</strong></p><p id="1ed0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[1]该分析仅考虑了街区中咖啡店的出现频率。</p><p id="fd3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2]其他因素对于最终决定自助餐厅的位置也很重要，例如附近的其他企业(这将是补充自助餐厅的其他相关类别)、附近的生活成本、安全区等等。</p><p id="8f45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[3]此外，所有分析均使用免费API或其开放访问选项进行。可以使用付费资源进行分析，以便获得更多结果选项。</p><p id="79df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[4]一些缺点或改进的领域向我们表明，在更多数据和不同机器学习技术的帮助下，这种分析可以进一步改进。</p><p id="65ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[5]同样，我们可以用这个项目来分析任何场景，比如开一家餐馆或者开一家新的健身房等等。</p><p id="d303" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[6]希望这个项目有助于作为使用数据科学应对更复杂的现实生活挑战的初始指导。</p><p id="24ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个分析的笔记本可以在<a class="ae kx" href="https://github.com/lophy95/Coursera_Capstone/blob/main/Week4%265/Notebook/Neighborhoods-New-York-Manhattan.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a>中看到。</p></div></div>    
</body>
</html>