<html>
<head>
<title>Basics of IPv4 and IPv6 addressing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IPv4 和 IPv6 寻址基础知识</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/basics-of-ipv4-and-ipv6-addressing-3c9717c7a40d?source=collection_archive---------11-----------------------#2021-05-09">https://medium.com/nerd-for-tech/basics-of-ipv4-and-ipv6-addressing-3c9717c7a40d?source=collection_archive---------11-----------------------#2021-05-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f93a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TCP/IP 是互联网通信的主干。现在有两个版本的因特网协议可用于网络层上的通信，即 IP 版本 4 和版本 6。这两者之间的主要区别是，IPv4 地址是 32 位，用点分十进制表示，而 IPv6 地址是 128 位，用十六进制格式表示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d2f5132fcab5ac5667ec543eec34dec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Ezj-ejiZ4kFvkZ1NEP4CQ.jpeg"/></div></div></figure><p id="1d8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> IPv4 与 IPv6 表示法</strong></p><ul class=""><li id="b7db" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj"> IP 第四版</strong></li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jy"><img src="../Images/5587bce7f548be7510169a5ae8cf4e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bL3PRoFRY_0j5Jpjows4Qg.jpeg"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">IPv4 表示</figcaption></figure><p id="eb67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们从图中看到的，IPv4 被分成 4 个由点分隔的位域(4 * 8 = 32)，用十进制表示。IPv4 地址分为两部分，用于子网划分，分为网络和主机字段。随着互联网上的设备数量开始增长，IPv4 地址空间开始耗尽，20 年前实施了一个解决方案。</p><ul class=""><li id="792e" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj"> IP 第六版</strong></li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/e3957f544f1dd9384e3f49ba5fabf38a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ByM8gaytcWsdiSpOkzYuAA.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">IPv6 地址表示</figcaption></figure><p id="d65c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">IPv6 地址使用 128 位十六进制表示法，每 4 位(半字节)由一个十六进制表示(4*32=128)。在 IPv6 表示中，字母数字字符不区分大小写，因此 9 之后的数字可以是<em class="ke"> A 或</em>。</p><blockquote class="kf kg kh"><p id="92a2" class="if ig ke ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">非正式地，IPv6 中的四个十六进制部分被称为 hextet，类似于 IPv4 的 octet。RFC 2373 和 RFC 5952 提供了减少 IP 地址的规则</p></blockquote><ul class=""><li id="c988" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj">规则 1:省略前导零 IPv4 或 IPv6 地址中可以省略前导零。</strong></li></ul><pre class="je jf jg jh fd kl km kn ko aw kp bi"><span id="c181" class="kq kr hi km b fi ks kt l ku kv"><strong class="km hj">Preferred</strong>: <strong class="km hj">2001:0db8:85a3:0000:0000:0000:0000:0000<br/>omitting zeros: 2001:0db8:85a3:0:0:0:0:0</strong></span></pre><p id="f0bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">IP 仅允许省略前导零省略尾随零会导致不明确的寻址。</p><pre class="je jf jg jh fd kl km kn ko aw kp bi"><span id="e77f" class="kq kr hi km b fi ks kt l ku kv"><strong class="km hj">Preferred: 192.168.000.001<br/>Omitting zeros: 192.168.0.1</strong></span></pre><ul class=""><li id="aa50" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj">规则 2:省略所有 0 六进制数</strong></li></ul><p id="d602" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于 IPv6 地址，双栏(::)是一个或多个六元组的任何单个传染性字符串，这种双栏的使用进一步减小了 IPv6 地址的大小。以下示例显示了结合两个规则后的 IPv6 地址示例。</p><pre class="je jf jg jh fd kl km kn ko aw kp bi"><span id="494a" class="kq kr hi km b fi ks kt l ku kv"><strong class="km hj">Preferred</strong>: <strong class="km hj">2001:0008:0000:0000:0000:0000:0000:0000<br/>omitting zeros: 2001:8:0:0:0:0:0:0</strong></span></pre><p id="b73f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">无类域间路由(CIDR) </strong></p><p id="5d16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CIDR 用于划分子网和分配 IP 地址范围。CIDR 把一个 IP 分成两组数字。IPv4 地址的 CIDR 符号如下所示。</p><p id="0323" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 192.255.255.255/24 </strong></p><p id="6cd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">32 位中的前 24 位将是网络地址，其余位用于主机部分。下图说明了 IPv4 地址的 CIDR 寻址格式，以及它可以拥有的各个类别的最大主机数量及其用途。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kw"><img src="../Images/b7550f2341895c6a0c295a3cbed0722d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xR3xLqebccWykavNgh2CWw.png"/></div></div></figure><p id="ee14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着互联网的发展，有限的 IPv4 地址空间很快耗尽。客户对 IPv4 地址和前缀长度(子网掩码)的请求通过依赖<strong class="ih hj">网络地址转换(NAT)得到解决。</strong>容纳其主机中的内部 IPv4 地址数量。</p><ul class=""><li id="5d2b" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj"> CIDR IPv6 符号</strong></li></ul><p id="6e39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 IPv4 寻址的情况下，如果需要增加主机地址，则需要从网络部分获取，IPv6 解决了这个问题。下面给出了 CIDR 符号。</p><p id="b33e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">IPv6-地址/ <em class="ke">前缀</em>-长度</p><p id="4098" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">前缀长度标识地址的前缀或网络部分。让我们看一个地址的例子。</p><pre class="je jf jg jh fd kl km kn ko aw kp bi"><span id="87ea" class="kq kr hi km b fi ks kt l ku kv"><strong class="km hj">2001:0008:0000:0000:0000:0000:0000:0000/64</strong></span></pre><p id="ce19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一部分 64 是已知的网络地址，第二部分是接口地址。如果一个站点收到/48 前缀，这将允许(16⁴=65,535)主机为每个主机提供 18 万亿个接口/56 个地址(space(16⁴=256)子网为每个子网提供相同的接口。</p><p id="6827" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> IP 地址类型</strong></p><p id="2e43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">IPv6 支持三种类型的寻址</p><ul class=""><li id="d3e2" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">单播</li><li id="9e83" class="jp jq hi ih b ii kx im ky iq kz iu la iy lb jc ju jv jw jx bi translated">任播</li><li id="4f55" class="jp jq hi ih b ii kx im ky iq kz iu la iy lb jc ju jv jw jx bi translated">多点传送</li><li id="bf16" class="jp jq hi ih b ii kx im ky iq kz iu la iy lb jc ju jv jw jx bi translated">所有节点多播(在 IPv4 中广播)</li></ul><p id="57e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">单播</strong></p><p id="0505" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单播地址唯一标识 IPv6 设备上的接口。发送到单播地址的数据包被传送到该地址定义的接口(前缀地址)。单个接口可以有多个地址</p><p id="2592" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">选播</strong></p><p id="d360" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">任播是分配给几个设备的单播。在任意播数据包被传送到配置有该地址的设备时，该任意播数据包将被路由到最近的设备。</p><p id="4ccd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">组播</strong></p><p id="25fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">多播标识属于不同设备的一组接口。传送到多播地址的数据包将由所有设备传送。多播和单播的区别在于，在非多播中，数据包将只传送到一个设备，而在多播中，数据包将由所有设备传送和处理。</p><p id="2d6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 IPv4 寻址中存在广播，其中分组将被传送到系统中的所有节点。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lc"><img src="../Images/506bc365ca06a6a5febeb32bee8c9fb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7Qb8nfob61Mr65IRi-wFQ.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">IP 传输模式</figcaption></figure><p id="6b60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">全局路由前缀</strong></p><p id="2eed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据要求，IP 分配需要大量规划。这种分配称为子网划分。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/e93ca1a39606e54f255e5c3fc40239da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N7e2_-DBi-z6Cr5O5E6sNw.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">IPv4 的子网划分</figcaption></figure><p id="d18b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">典型的 IPv6 站点前缀会有一个由提供商(通常来自 ISP)分配的/48。这将创建 16 位子网 ID，允许 65，536 个子网。为我们提供 64 位接口 ID(我们称之为接口 ID，因为每个子网都有接口),为我们提供每个子网 18 万亿个接口(主机)。</p></div></div>    
</body>
</html>