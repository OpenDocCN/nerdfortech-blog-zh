<html>
<head>
<title>Power BI on Kaggle Dataset Accident in France from 2005 to 2016 — Part 1 Preparation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2005-2016年法国Kaggle数据集事故的Power BI第一部分准备</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/power-bi-on-kaggle-dataset-accident-in-france-from-2005-to-2016-part-1-preparation-89842a8836e2?source=collection_archive---------6-----------------------#2021-07-04">https://medium.com/nerd-for-tech/power-bi-on-kaggle-dataset-accident-in-france-from-2005-to-2016-part-1-preparation-89842a8836e2?source=collection_archive---------6-----------------------#2021-07-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f2dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jd translated"><span class="l je jf jg bm jh ji jj jk jl di">在</span>这一部分中，我们将把CSV格式的数据集准备成Power BI上的现成数据。这里是数据集的<a class="ae jm" href="https://www.kaggle.com/ahmedlahlou/accidents-in-france-from-2005-to-2016" rel="noopener ugc nofollow" target="_blank">链接</a>和你需要知道的一切。到本文发表时，数据集的许可证是<a class="ae jm" href="https://creativecommons.org/publicdomain/zero/1.0/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> CC0:公共域</strong> </a> <strong class="ih hj"> </strong>，这意味着:</p><blockquote class="jn jo jp"><p id="b0f2" class="if ig jq ih b ii ij ik il im in io ip jr ir is it js iv iw ix jt iz ja jb jc hb bi translated">在法律允许的范围内，将作品与本契约相关联的人通过放弃其在版权法下对该作品的所有权利，包括所有相关和邻接权，将该作品奉献给公共领域。</p><p id="88a4" class="if ig jq ih b ii ij ik il im in io ip jr ir is it js iv iw ix jt iz ja jb jc hb bi translated">您可以复制、修改、分发和执行作品，即使是出于商业目的，都无需征得许可。参见下面的<strong class="ih hj">其他信息</strong>。</p></blockquote><p id="eb52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以让我们开始吧！</p><p id="9e3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我在标题中提到的，我们将在这个项目中使用的工具是Power BI。所以在你的Windows操作系统上双击你的Power BI图标(很遗憾Power BI现在只能在Windows上使用)。</p><p id="c5c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是将数据集加载到Power BI中。这一步非常简单。在“主页”选项卡上，单击“获取数据”的底部，展开最常见的数据源，以便在Power BI上加载数据。选择文本/CSV。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/58a200ed4410382026184f23cbb1cf47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gmLhyv_wXRh08_xTBLXOgw.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">导入文本/CSV文件</figcaption></figure><p id="7f83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您在“获取数据”窗格上选择“文本/CSV”时，会弹出以下选项卡。通常分隔符会在你加载数据时自动选择，所以就让它保持原样吧。但是，您可能希望使用文件来源来避免误解Power BI上的字符。通常我选择65001:Unicode (UTF-8)作为开始，然后看看它会怎么样。正如我们所看到的，列adr并没有显示出许多怪异的字符，所以我们可以开始了。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kk"><img src="../Images/0d78e84b114696cc7d0ff7d91b6ea740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*socrntEyRu6UVosyfJ4ZzQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">格式化导入的CSV文件</figcaption></figure><p id="6e11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对数据集上的每个CSV重复这些步骤，并更改表名，以便可以容易地识别它。为此，右键单击查询窗格上的表名，单击重命名并键入所需的名称。结果将如下所示:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/317982cc3583d2460613e911f1c21054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPpCzReU4qVPBFM6do-InA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">加载所有数据</figcaption></figure><p id="2bea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了表名之外，我将列名改为一个更熟悉的术语，因为我将使用它来制作一个仪表板。这个重命名的步骤可能会让你感到厌烦(它确实让我感到厌烦)，但是你会很感激你这么做了。命名的参考可以在这个<a class="ae jm" href="https://www.kaggle.com/ahmedlahlou/accidents-in-france-from-2005-to-2016" rel="noopener ugc nofollow" target="_blank">链接</a>上找到。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="1a62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能提到过一些字段包含代码而不是描述。这意味着我们需要创建一些维度表来让它变得可以理解。同样，这个<a class="ae jm" href="https://www.kaggle.com/ahmedlahlou/accidents-in-france-from-2005-to-2016" rel="noopener ugc nofollow" target="_blank">链接</a>提供了您可以参考的数据目录。这是其中一个数据目录。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ks"><img src="../Images/a22a9af6ec974a71763b741b299bcf78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*iWHLp0PHTs22mTrnfEE6UA.png"/></div></figure><p id="bb18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在特性表的lum字段中，我们有1到5个事故发生时闪电条件的代码参考。所以让我们试着用它做一个维度表。</p><p id="34dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，请通过单击主页选项卡上的编辑查询图标转到超级查询编辑器。当超级查询编辑器窗口打开时，选择主页选项卡，单击输入数据。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es kt"><img src="../Images/2f42019ce8acd36932c796e7999dc1d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*Md-eo1d0TOCzhRxQU2MakQ.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">编辑查询以打开超级查询编辑器窗口(最右侧)</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ku"><img src="../Images/b36add22470e9f72a8c3f97965595c29.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*F6BSjVzpHpPaQiGTE6wahQ.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">输入数据以创建空表(右边第二个)</figcaption></figure><p id="cc96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在填写表名、列名和表行。单击确定完成。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kk"><img src="../Images/a252836532257a6b6c7a06f3ed4af973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JnK0GbGRaZ8cKcOmqmeauA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">创建维度表</figcaption></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="3ecf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个重复的任务是准备数据，因为你可能需要对其他维度做完全相同的事情。我至少创建了20个维度表。我知道，请拥抱它。</p><p id="9b96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中一个维度表有特殊处理，每个代码代表不同的含义。你可以通过两件事来解决这个问题:</p><ol class=""><li id="d46b" class="kv kw hi ih b ii ij im in iq kx iu ky iy kz jc la lb lc ld bi translated">拆分代码，使每个维度表与前一个表完全相同，或者</li><li id="bfd7" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">在一维表中，将安全设备存在表上的每个项目交叉连接到安全设备的使用上。桌子上总共有5 x 3行，包括腰带是、腰带否、腰带不确定、头盔是等。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lj"><img src="../Images/45ef9ab88e40e2a77e05bdc9c4231975.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*Tu3CYIwHhE8n2tmuhaEbMA.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">数据目录</figcaption></figure><p id="a53d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我选择了第一种方法，将列一分为二。为此，在Power Query Editor上选择用户表并选择相应的列secu。在主页选项卡上，选择拆分列，然后单击按字符数。我们选择按字符数分割，因为我们知道它正好由2个字符组成，我们希望将其分割成1:1。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/abe15d74aba308658d1d90f39bb2d577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGnLrB66GyvmwFBQKk7kxA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">合并列</figcaption></figure><p id="52f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">键入1作为字符数，并重复选择，因为我们确信不会有任何单元格包含超过2个字符。然后单击确定。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lk"><img src="../Images/35ee597afaad6ec8d5b43d6c6562bd0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BlObvU1RYHaBpLG8styiwA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">按字符数分割列设置</figcaption></figure><p id="1f1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了这些列，所以我们可以根据自己的需要对其进行重命名。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ll"><img src="../Images/ef4492f87a491905fd93aaf35bc32eea.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*FPzTY_BIhDsdEYO-EpdMPg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">拆分列结果</figcaption></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="c14d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在特征表中，我们将事故日期分为三列。然而，我们有假日表，日期列在一个单独的列上。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lm"><img src="../Images/4f09327e359a3a14e1b9df5cac71b8f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t5lmLZqgUjNipYiQ_oysXw.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">在特征中拆分日期列</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ln"><img src="../Images/f81d4c52ce6063d48b95814a7b273faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V3jK3wq0Bg6oyhbzteoGbg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">假日中日期的合并列</figcaption></figure><p id="aa14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个条件使得这两个表之间的关系是不可能的。为了实现表特征和假日之间的关系，我们将使日期格式统一，就像我们在假日表中看到的那样，它在一列中。为此，需要对特性表进行更改。</p><p id="895e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要为YearOfAccident列添加前缀20，使其成为YYY格式。选择相应的列，然后在转换选项卡上，选择格式，单击添加前缀。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/8f4137cf318c5088e1c3b47995854f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bOML-y_x5Ce1Ii8wELGQoQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">添加前缀</figcaption></figure><p id="3054" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为数据集由2000年及以后的数据组成。我们在前缀值上填入20，然后单击OK。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lk"><img src="../Images/fe924cef18a0d109c49ec1c447a643a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-uNI-xzFLtSquqJyOQhrMg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">前缀设置</figcaption></figure><p id="d2ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果如下:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/9b7729b6b2e3f3716cfde47c7a46377e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-8idII3AusEYXaspFnjUlw.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">前缀结果</figcaption></figure><p id="9df7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们需要在月份和日期列上制作MM和DD。为此，我们在两列上都添加0作为前缀。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/dde9893a19bc4dbd14f44ccf73153f20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IA8rdkQ0atkjzhWSe9bbxg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">添加前缀</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lk"><img src="../Images/a1c5962678d35baf1d0943e23e0fb812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a5rwx-VEYZS4t_8BARQsKQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">前缀设置</figcaption></figure><p id="6b76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不同之处在于，我们添加了另一个步骤，只获取最后两个字符，这样我们就可以在单个字符日期上有一个前导零，如01、02、03等。现在选择月份列。在转换选项卡上，选择提取，单击最后一个字符。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/c8c8632e3da698cc5841826dce5c877f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2Knm8tOUYcHjVv11bMNvg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">前缀结果</figcaption></figure><p id="b363" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们填入2作为计数，因为我们需要该列的最后两个字符。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lk"><img src="../Images/27da1405e5bb11492966ffe1156e4148.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yCA4zt1xO0VevzJbJv2jGg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">获取最后两个字符</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/e5d75c8a1c9151cba8879206a19ee03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hx3GVoCCLKpuRJcuZxYjmA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">月份的MM格式</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/c5f233857b0600bd725a94ea1872c033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OR99myUkC2XB4vRv14NO5w.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">日期格式</figcaption></figure><p id="74de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们在每一列上都有YYYY、MM和DD格式。现在我们将列合并为一列，列之间用“-”作为连接符。为此，请选择年、月和日期列。在添加列选项卡上，单击合并列。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/0355c38f6f884e998d4fd22a38958315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hIpmIm5WRs1glLNa0RR3oQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">合并列</figcaption></figure><p id="57e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们添加“-”作为每列的分隔符，并单击“确定”。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lk"><img src="../Images/e185b921ea4d25fa85dea3048c8671b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0HTKYbf_7nCs4o6nO2j9_w.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">合并列设置</figcaption></figure><p id="1650" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧啊。我们想要的日期格式列。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/cc6772fe2b942373e408b8f7ffbd6a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0JrPUEiyIJHlBIvn8jj4Dg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">合并列</figcaption></figure><p id="8b7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在超级查询编辑器窗口上要做的最后一件事是更改每个列的数据类型。数字和代码转换成整数，日期转换成日期。通常Power BI可以自己检测数据类型，但要确保您有正确的数据类型。这可以通过简单地点击列名旁边的小图标并选择你想要的数据类型来完成。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/2d1b7a4aadab7b6f0e03e245ca57e80d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x3KhigElpwKhu9JOKBrJVQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">数据类型设置</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/be65753e8b45a76d2994e7025ca67e85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbhZ3l3kxz7SmkEEPOAyBg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">数据类型设置</figcaption></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="7e69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经准备好将所有的表相互连接起来。让我们逐一连接它们。现在，您可以通过单击主页选项卡上的关闭和应用来关闭超级查询编辑器窗口</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lo"><img src="../Images/206ff282a30a7dacb7a73a39e5b8e8ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*JL2x-he8LdtbvgmTyTW7jg.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">关闭并应用以保存更改</figcaption></figure><p id="4b5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">加载过程完成后，在Relationship选项卡中，通过将列名拖动到其目标列来连接每个节点。请注意，它必须是源和目标的正确列。例如，要将性别维度表连接到用户表，您需要将包含代码的性别维度表上的性别Id拖动到用户表上的性别列。所以这是我几乎最终的感情观。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lp"><img src="../Images/a6e32f42ee8facb477776a2b41d54bf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f7mHDuEIQIMrU-67VT-9BA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">几乎结束关系</figcaption></figure><p id="6cdb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该死。我在创建关系时发现了一个错误！这是因为两列都没有唯一值列表。事故可能一天发生两次，两个假期也可能在同一天。基本上这两个表之间的关系是多对多的。为了克服这种多对多的问题，我们需要一个包含日期的唯一值的辅助表。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/182cf5280bec86dc014422a27ab079a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aSMn4C-aVpBoZH8ypsGWHQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">多对多关系上的错误</figcaption></figure><p id="28b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在这里找到了一个很棒的教程<a class="ae jm" href="https://radacad.com/create-a-date-dimension-in-power-bi-in-4-steps-step-1-calendar-columns" rel="noopener ugc nofollow" target="_blank"/>。我将步骤简化为3步。</p><p id="9281" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，通过单击主页选项卡上的编辑查询打开超级查询编辑器。然后，通过单击“主页”选项卡上“新建源”的下部区域来创建一个空白查询。点击空白查询。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/4d21b223d942718b927d240cc52f4c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7c9z76bg1vHO5IPYEH9Lyw.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">创建空白查询</figcaption></figure><p id="c521" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，添加开始日期和结束日期两个参数。通过点击管理参数并选择新参数。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/5d5f4d19f9fe676117f981605e3893d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OxMgycdn8QYQ9OTEYR2AVg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">添加新参数</figcaption></figure><p id="563a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">填写StartYear参数的名称。将数据类型更改为十进制数，并将当前值填写为2000。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lq"><img src="../Images/21c4d27e9db96d9fe598f0a5b1a3c5e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*g_NXbbq33pWOftCT4zSkZg.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">设置StartYear参数</figcaption></figure><p id="cb63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对EndYear做同样的操作，除了用2030填充当前值，因为我们要列出从2000年到2030年的日期。如果你愿意，可以改变年份。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lq"><img src="../Images/0f0c4076006eb0648c7532cc2945533c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*35osM-rU0cv6FWN90Q9Hqg.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">设置年末参数</figcaption></figure><p id="e5e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三，从链接<a class="ae jm" href="https://radacad.com/create-a-date-dimension-in-power-bi-in-4-steps-step-1-calendar-columns" rel="noopener ugc nofollow" target="_blank">这里</a>复制完整的脚本到advance editor，你就可以开始了。</p><blockquote class="jn jo jp"><p id="d6bc" class="if ig jq ih b ii ij ik il im in io ip jr ir is it js iv iw ix jt iz ja jb jc hb bi translated">设<br/> StartDate = #date(StartYear，1，1)，<br/> EndDate = #date(EndYear，12，31)，<br/> NumberOfDays = Duration。天数(EndDate - StartDate)，<br/>日期=列表。Dates(StartDate，NumberOfDays+1，#duration(1，0，0，0))，<br/> # "转换为表格" =表格。FromList(日期，拆分器。SplitByNothing()，null，null，ExtraValues。错误)，<br/> # "重命名的列" =表。RenameColumns(# "已转换为表"，{{"Column1 "，" FullDateAlternateKey"}})，<br/> # "已更改类型" =表。TransformColumnTypes(# "重命名的列"，{{"FullDateAlternateKey "，type date}})，<br/> # "插入的年份" =表。AddColumn(# "已更改类型"，"年份"，每个日期。年份([FullDateAlternateKey])，类型号)，<br/> # "插入的月份" =表。AddColumn(# "插入的年份"，"月份"，每个日期。月([FullDateAlternateKey])，类型号)，<br/> # "插入的月名" =表。AddColumn(# "插入的月份"，"月份名称"，每个日期。month name([FullDateAlternateKey])，type text)，<br/> # "插入的季度" =表。AddColumn(# "插入的月份名称"，"季度"，每个日期。QuarterOfYear([FullDateAlternateKey])，类型号)，<br/> # "插入的一年中的周" =表。AddColumn(# "插入的季度"，"一年中的星期"，每个日期。WeekOfYear([FullDateAlternateKey])，类型号)，<br/> # "插入的月份周" =表。AddColumn(# "插入的一年中的星期"，"一月中的星期"，每个日期。WeekOfMonth([FullDateAlternateKey])，键入数字)，<br/> # "插入的日期" =表。AddColumn(# "插入一个月中的第几周"，"第几天"，每个日期。日([FullDateAlternateKey])，类型号)，<br/> # "插入的星期几" =表。AddColumn(# "插入的日期"，"星期几"，每个日期。Day ofweek([FullDateAlternateKey])，类型号)，<br/> # "插入的一年中的某一天" =表。AddColumn(# "插入星期几"，"一年中的某一天"，每个日期。Day ofyear([FullDateAlternateKey])，类型号)，<br/> # "插入的日名" =表。AddColumn(# "插入的一年中的某一天"，"天名称"，每个日期。DayOfWeekName([FullDateAlternateKey])，在<br/> #“插入的日期名称”中键入text) <br/></p></blockquote><p id="30d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果如下:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/377862419d8cf60157d7b751c279e7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gSMJOg79FKrKVJfq97A7QA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">创建空查询结果</figcaption></figure><p id="3519" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们可以通过刚刚创建的表DimDate来创建特征和假日之间的关系。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/e75a68c3e7be01ee791b55faee58a62b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QBGL5dWIYZpIx5p_w5ID5A.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">多对多表上的最终关系</figcaption></figure><p id="79ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一部分“准备”到此结束。总而言之，我们已经加载了数据，创建了维度表，准备了数据，并创建了表之间的关系。现在我们可以开始处理周围的数据了。在本章中，我将尝试从什么、谁和为什么来设计仪表板。下次见。如果您已经完成了本教程，请分享您的仪表板！另外，请在社交媒体上联系我，与我聊聊天。这里是我的<a class="ae jm" href="https://www.instagram.com/edwinfachri/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>和<a class="ae jm" href="https://www.linkedin.com/in/edwin-fachri-wicaksono-5b007a164/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>。</p></div></div>    
</body>
</html>