<html>
<head>
<title>Shimmer Effect: Stop using boring ProgressIndicators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微光效应:停止使用无聊的渐进指示器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/shimmer-effect-stop-using-boring-progressindicators-4e44fc132936?source=collection_archive---------5-----------------------#2021-07-28">https://medium.com/nerd-for-tech/shimmer-effect-stop-using-boring-progressindicators-4e44fc132936?source=collection_archive---------5-----------------------#2021-07-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0e4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想让用户知道有东西在加载，你该怎么做？如果你的答案是<code class="du jd je jf jg b"><strong class="ih hj">CircularProgressIndicator</strong></code> <strong class="ih hj"> </strong>是时候改变了。除了使用boring loading spinner之外，用户还可以使用<code class="du jd je jf jg b">shimmer</code>包，它可以产生微光效果，让用户体验更好。因为我们可以给用户一个在屏幕加载后屏幕外观的概览。即使我们需要写一些额外的代码来完成它，这也是值得的。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jh"><img src="../Images/2ee772c328d642187196018e376b8d28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R36UTwW7kb1rSmVvkcW5Nw.jpeg"/></div></div></figure><p id="33d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将shimmer包添加到您的pubspec.yaml中</p><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="b4ae" class="jx jy hi jg b fi jz ka l kb kc">dependencies:<br/><strong class="jg hj">  shimmer: ^2.0.0</strong></span></pre><p id="5da4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如何使用Shimmer Widget？</p><p id="8df8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。创建目标小部件的框架。</strong></p><blockquote class="kd ke kf"><p id="24c3" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">Skeleton widget:一个类似于真实widget的widget，但是没有内容。</p></blockquote><p id="9f7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。用Shimmer.fromColors() </strong>包装骨架小部件</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h2 id="f1eb" class="jx jy hi bd kr ks kt ku kv kw kx ky kz iq la lb lc iu ld le lf iy lg lh li lj bi translated">1.创建骨架</h2><p id="edf7" class="pw-post-body-paragraph if ig hi ih b ii lk ik il im ll io ip iq lm is it iu ln iw ix iy lo ja jb jc hb bi translated">我们首先需要创建一个模仿小部件的框架容器。</p><p id="03be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设这是我们想要模仿的小部件，</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jh"><img src="../Images/d56ac722d576f11fdad1fc6103c30c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nbbDyd6Bo2BPk5P5rX055w.jpeg"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">ListView中的ListItem</figcaption></figure><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">列表项代码</figcaption></figure><p id="376b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建上述列表项的框架，我们需要创建精确的小部件，但其中没有内容。</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">我们列表项的框架</figcaption></figure><p id="1ea4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，该结构与原始列表项相同，但其中没有内容，只有固定大小和颜色的空容器。</p><blockquote class="kd ke kf"><p id="c9d9" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">为什么颜色很重要？<em class="hi">微光效果</em> <strong class="ih hj"> <em class="hi">只影响【child】的不透明区域</em> </strong> <em class="hi">，透明区域在应用微光效果时仍然保持透明。</em></p></blockquote><p id="cf2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了使我们的容器不透明，我给了一个颜色。稍后我会告诉你为什么我选择了<code class="du jd je jf jg b">Colors.white24</code>。</p><h2 id="f5bb" class="jx jy hi bd kr ks kt ku kv kw kx ky kz iq la lb lc iu ld le lf iy lg lh li lj bi translated">2.用Shimmer.fromColors()包装骨架小部件</h2><p id="0e74" class="pw-post-body-paragraph if ig hi ih b ii lk ik il im ll io ip iq lm is it iu ln iw ix iy lo ja jb jc hb bi translated">创建了skeleton小部件之后，是时候用<em class="kg"> magic </em> Shimmer小部件包装它了。但是我们需要遵循一些准则来防止微光效果被渲染而没有任何奇怪的副作用。相信我，这个很重要。</p><blockquote class="lv"><p id="e928" class="lw lx hi bd ly lz ma mb mc md me jc dx translated"><em class="mf"> 1。骨架部件应该由基本和简单的部件组成，比如容器、行、列，以避免副作用。<br/> 2。使用一个[微光]来包装[Widget]的列表，而不是许多[微光]的列表</em></p></blockquote><p id="fa88" class="pw-post-body-paragraph if ig hi ih b ii mg ik il im mh io ip iq mi is it iu mj iw ix iy mk ja jb jc hb bi translated">如果你遵循这些规则，shimmer包将按照我们希望的那样运行。</p><p id="ab1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建我们的Shimmer小部件，</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="1b4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们来分析一下，</p><p id="877b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1.shimmerBuilder(小部件子部件)</strong></p><p id="389f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个自制的函数，会返回一个<code class="du jd je jf jg b">Shimmer </code> widget。</p><p id="a29b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">baseColor和highlightColor用于创建线性渐变。它在引擎盖下的实现方式是，</p><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="f23a" class="jx jy hi jg b fi jz ka l kb kc">gradient = <strong class="jg hj">LinearGradient(</strong><br/>   begin: Alignment.<em class="kg">topLeft</em>,<br/>   end: Alignment.<em class="kg">centerRight</em>,<br/>   colors: <br/>   <strong class="jg hj">[baseColor,baseColor,highlightColor,baseColor,baseColor]</strong>,<br/>   stops: const &lt;double&gt;[0.0,0.35,0.5,0.65,1.0])</span></pre><p id="c32a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是上面配置的线性梯度的样子，</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es ml"><img src="../Images/a3f04da9c366ec70b58570ed16b4980f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*09hZFJbOtrL62-1OEYtFbQ.jpeg"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">if base color = colors . grey &amp; highlight color = colors . green</figcaption></figure><p id="d48e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个LinearGradient将被混合到骨骼部件上，以产生微光效果。</p><p id="a60c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。骨架部件颜色</strong></p><p id="8bfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用<code class="du jd je jf jg b">Colors.white24</code>作为框架部件的原因是它和我的基色(灰色)&amp;荧光色(紫色)很好地融合了。</p><p id="4194" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你使用其他颜色(如黑色、绿色等)，它将与线性渐变结合，产生不同的颜色。(我们不希望这样)</p><p id="4f0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">即使是纯白色对我的颜色组合(灰色和紫色)来说也很奇怪。因此，为你的框架部件尝试不同的颜色，找到最佳匹配。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><blockquote class="kd ke kf"><p id="0994" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">你可以用shimmer小部件包装整个小部件，而不是每个单独的小部件(就像我做的那样)，但是当你试图用Card这样的复杂小部件包装它时。它不能正确渲染微光效果。</p><p id="704a" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">(参见我上面提到的两条指导方针)</p></blockquote></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="5500" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，您可以使用单独的ShimmerListItems创建一个LoadingList</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="0a9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">把我们能做的所有事情放在一起，</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="fed0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终输出看起来像这样，</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="mm lu l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">我已经把标题和副标题的角弄圆了(如果gif太长，抱歉)</figcaption></figure><p id="5610" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您甚至可以自定义微光效果，</p><ul class=""><li id="8b7e" class="mn mo hi ih b ii ij im in iq mp iu mq iy mr jc ms mt mu mv bi translated"><strong class="ih hj">方向</strong> : c <em class="kg">控制微光效果的方向。默认值为[ShimmerDirection.ltr] </em></li></ul><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="e319" class="jx jy hi jg b fi jz ka l kb kc"><em class="kg">/// * [</em><strong class="jg hj"><em class="kg">ShimmerDirection.ltr</em></strong><em class="kg">] left to right direction<br/>/// * [</em><strong class="jg hj"><em class="kg">ShimmerDirection.rtl</em></strong><em class="kg">] right to left direction<br/>/// * [</em><strong class="jg hj"><em class="kg">ShimmerDirection.ttb</em></strong><em class="kg">] top to bottom direction<br/>/// * [</em><strong class="jg hj"><em class="kg">ShimmerDirection.btt</em></strong><em class="kg">] bottom to top direction</em></span></pre><ul class=""><li id="8f80" class="mn mo hi ih b ii ij im in iq mp iu mq iy mr jc ms mt mu mv bi translated"><strong class="ih hj">周期</strong> : C <em class="kg">控制微光效果的速度。默认值为1500毫秒。</em></li><li id="6952" class="mn mo hi ih b ii mw im mx iq my iu mz iy na jc ms mt mu mv bi translated">使用径向渐变或其他渐变效果。你可以使用默认的构造函数<code class="du jd je jf jg b">Shimmer()</code></li></ul><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="abf1" class="jx jy hi jg b fi jz ka l kb kc">return Shimmer(<br/>    child: child,<br/>     <strong class="jg hj">gradient</strong>: <strong class="jg hj">RadialGradient</strong>(<br/>         ...<br/>     ),<br/>);</span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="8d11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望你会在你的下一个project🥳中使用这个令人敬畏的装载效果，但是一定要遵循前面提到的指导方针。感谢阅读。拍手声👏如果你喜欢这篇文章。</p></div></div>    
</body>
</html>