<html>
<head>
<title>Implement Drag and Drop between multiple lists in a React App and renders web content in a React native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 React 应用程序中的多个列表之间实现拖放，并在 React 本机应用程序中呈现 web 内容</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implement-drag-and-drop-between-multiple-lists-in-a-react-app-and-renders-web-content-in-a-react-d9378a49be3d?source=collection_archive---------1-----------------------#2020-12-23">https://medium.com/nerd-for-tech/implement-drag-and-drop-between-multiple-lists-in-a-react-app-and-renders-web-content-in-a-react-d9378a49be3d?source=collection_archive---------1-----------------------#2020-12-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/723f31345436c26e91f0a002addfee09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EFIRrhys6aOAmFX4Qox7oQ.jpeg"/></div></div></figure><p id="f2ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我将使用<a class="ae jo" href="https://www.npmjs.com/package/react-beautiful-dnd" rel="noopener ugc nofollow" target="_blank"> react-beautiful-dnd </a>实现多个列表之间的拖放项目，它能够使用后端 Json 响应动态控制可拖动的列表项目。此外，我们可以将该实现用作 react web 应用程序，或者在后端服务器中部署 web 应用程序，并使用<a class="ae jo" href="https://www.npmjs.com/package/react-native-webview" rel="noopener ugc nofollow" target="_blank"> react-native-webview </a>在 react 本地应用程序中呈现 web 内容。</p><p id="fddc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章的主要目的是在 react native 应用程序中使用这个实现，因为我们在 react native 中使用手势处理程序时有一些限制。</p><p id="cfb1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我将分享我是如何建造它的。下面我们可以看到在 android 设备上完成的拖放仪表板的样子:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jp"><img src="../Images/7845c2e71e0737268f7f60bd06c13134.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/1*aqWpArRvWOpHTDeIAwWEDw.gif"/></div></figure><p id="8c43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以让我们开始吧。</p><h2 id="3b5d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jb kf kg kh jf ki kj kk jj kl km kn ko bi translated">设置项目:</h2><p id="6b19" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn hb bi translated">你需要做的第一件事是创建 React web 应用程序。你可以从<a class="ae jo" href="https://create-react-app.dev/docs/getting-started/" rel="noopener ugc nofollow" target="_blank">这里</a>找到更多信息。</p><p id="745c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于功能是动态且简单的，我将在 App.js 中实现它。</p><p id="f370" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是初始组件的样子:</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="8185" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">导入依赖项并定义示例后端 Json 响应:</strong></p><p id="4343" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们导入依赖项，动态定义项目列表的后端响应的格式，并将其分配给一个状态变量。由于这是一个初始实现，我在 App.js 中硬编码了示例 Json 响应。稍后，我们可以使用后端 API 根据相同的格式动态获取仪表板项目列表并分配给状态。</p><p id="f051" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在条目列表数组中，你可以看到我为每一行添加了唯一的可拖动 id，每一行条目都包含了数组对象的所有属性。</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="e749" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">实现:</strong></p><p id="2038" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，所有内容都包装在&lt;<em class="kw"> DragDropContext &gt; </em>中，状态变量<em class="kw"> itemList </em>映射到一个列表，使用数组映射函数动态呈现行。每一行都被包裹在<em class="kw">和&lt;中。对于每一行中的单个项目<em class="kw"> row_items </em>数组，该数组在每个主项目的内部，使用数组映射函数将状态映射到一个列表，以动态呈现每个项目。每个单独的项目都被包裹在可拖动的<em class="kw">&lt;</em>&gt;中。</em></p><p id="54a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每个&lt;<em class="kw">可拖放</em> &gt;和&lt; <em class="kw">可拖动</em> &gt;都有一个唯一的 id，当拖放&lt;<em class="kw">DragDropContext</em>&gt;时触发<em class="kw"> onDragEnd </em>方法。</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="fd07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> onDragEnd 方法实现:</strong></p><p id="311c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，该函数接收行的源和目标可删除 id 以及每一项的源和目标数组索引。然后，我们需要使用可删除的 id 找到源行和目标行的数组索引，并动态地对项目进行重新排序。如果可删除的 id 相同，则项目在同一行，我使用<em class="kw"> reorder </em>函数来实现逻辑。如果可删除的 id 不同，我将使用<em class="kw">移动</em>功能来实现逻辑。</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="10f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">完成实施:</strong></p><p id="2706" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是完整的 App.js 组件。</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="266e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">后端服务器中的主机 React Web app:</strong></p><p id="3ba2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于这是一个初始实现，我已经在 GitHub 页面中部署了我的 web 应用程序。你可以在<a class="ae jo" href="https://dev.to/yuribenjamin/how-to-deploy-react-app-in-github-pages-2a1f" rel="noopener ugc nofollow" target="_blank">这里</a>找到发布源配置。</p><p id="b01f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以从<a class="ae jo" href="https://devanshanir.github.io/ReatWebApp/" rel="noopener ugc nofollow" target="_blank">这里</a>找到托管的网络应用，你也可以在你的设备上尝试该功能。</p><p id="2630" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为我的主要目标是使用 react native 应用程序中的 web 内容并执行拖放功能，所以我使用<a class="ae jo" href="https://www.npmjs.com/package/react-native-webview" rel="noopener ugc nofollow" target="_blank"> react-native-webview </a>来获得最终输出。</p><pre class="jq jr js jt fd kx ky kz la aw lb bi"><span id="e86e" class="ju jv hi ky b fi lc ld l le lf">&lt;WebView</span><span id="9919" class="ju jv hi ky b fi lg ld l le lf">source = {{uri:'https://devanshanir.github.io/ReatWebApp/'}}</span><span id="bb6a" class="ju jv hi ky b fi lg ld l le lf">style={{ flex: 1 }}</span><span id="35ce" class="ju jv hi ky b fi lg ld l le lf">/&gt;</span></pre><p id="911d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个帖子到此为止！这个实现很简单，但是您可以在它的基础上进行构建，使您在多个列表之间的拖放更加动态，功能更加丰富，就像 React web 应用程序一样，或者在 React native 应用程序的 WebView 中呈现 web 内容。</p><p id="47b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以从<a class="ae jo" href="https://github.com/DevanshaniR/ReatWebApp" rel="noopener ugc nofollow" target="_blank">这里</a>找到完整的源代码。</p><p id="47fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>