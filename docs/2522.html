<html>
<head>
<title>How to Deploy a Streamlit App with Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Heroku部署Streamlit应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-deploy-streamlit-dashboard-with-heroku-ca00064402e8?source=collection_archive---------2-----------------------#2021-05-10">https://medium.com/nerd-for-tech/how-to-deploy-streamlit-dashboard-with-heroku-ca00064402e8?source=collection_archive---------2-----------------------#2021-05-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f654a1f511f9d23a49bbc8bb69b18ab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u2eQB5YXO6E-5m3-ZrAq-g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来源:streamlit.io</figcaption></figure><p id="318b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个开源、免费、易学的Python框架，允许您为数据科学、机器学习或数据可视化项目生成仪表盘或交互式网站。</p><p id="b67c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">用<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>生成一个app只需要Python的基础知识。不需要前端经验。开发者只需要一些Python使用的简单库就可以开始使用<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>。在我看来，这是所有数据科学家或者数据工程师都应该使用的工具。有各种关于生成<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>仪表盘的教程(请随意查看<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> streamlit.io </a>获取它们的文档)。</p><p id="f269" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然而，一旦开发了仪表板，您可能会希望与他人共享它，以便他们可以利用它、测试它或给你改进的建议。您可能正在开发一个仪表板来分析您公司使用的一些数据，并且您希望其他所有人都可以访问它，而无需在他们的计算机上安装python或运行脚本。</p><p id="4ef3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了解决这个问题，我想解释如何使用<a class="ae js" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>将<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>程序部署到云中。Heroku是一个平台即服务(PaaS ),允许人们在云上运行各种语言的应用程序。</p><p id="6270" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我将用如下5个简单的步骤来解释这一过程:</p><ol class=""><li id="4866" class="jt ju hi iw b ix iy jb jc jf jv jj jw jn jx jr jy jz ka kb bi translated">创建示例<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank">简化</a>应用程序</li><li id="48ed" class="jt ju hi iw b ix kc jb kd jf ke jj kf jn kg jr jy jz ka kb bi translated">生成其他所需文件</li><li id="d13e" class="jt ju hi iw b ix kc jb kd jf ke jj kf jn kg jr jy jz ka kb bi translated">创建一个git存储库和一个Heroku账户</li><li id="01b9" class="jt ju hi iw b ix kc jb kd jf ke jj kf jn kg jr jy jz ka kb bi translated">部署、测试和重命名应用程序</li><li id="693c" class="jt ju hi iw b ix kc jb kd jf ke jj kf jn kg jr jy jz ka kb bi translated">对部署的应用程序进行更改</li></ol><p id="0852" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第一步:创建示例</strong><a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">Streamlit</strong></a><strong class="iw hj">应用</strong></p><p id="128b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用您最喜欢的编辑器，创建一个包含以下代码的app.py文件。这是一个简单的滑块示例，带有<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>。不管你的<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>应用程序有多复杂，部署到Heroku的过程是一样的。让我们把这个app.py文件放到一个名为Streamlit_app的目录中。</p><figure class="kh ki kj kk fd ij"><div class="bz dy l di"><div class="kl km l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">一个简单的streamlit应用程序—名为app.py</figcaption></figure><p id="8387" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第二步:生成其他需要的文件</strong></p><p id="2947" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>应用程序部署到Heroku需要几个文件。第一个是requirements.txt，输入以下命令进入放置app.py文件的目录。</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="5b8c" class="ks kt hi ko b fi ku kv l kw kx">$ cd Streamlit_app</span></pre><p id="9762" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">通过运行以下命令，确保安装了<a class="ae js" href="http://streamlit.io" rel="noopener ugc nofollow" target="_blank"> Streamlit </a></p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="bcb8" class="ks kt hi ko b fi ku kv l kw kx">$ pip install streamlit</span></pre><p id="60d4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本地测试，看看你的应用程序是否工作正常。</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="75e6" class="ks kt hi ko b fi ku kv l kw kx">$ streamlit run app.py</span></pre><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/4b01129f5371d619efce2d816dae49cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*otoijNWalgdrKSTyYoOR-Q.png"/></div></div></figure><p id="05aa" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果所有的库都安装正确，并且程序中没有错误，浏览器中应该会打开一个新窗口。对于我的浏览器中的示例程序，该应用程序如下所示:</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/02a1042bd792881905f0f220945a7772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c0L-s-aICaQ_SBRb-RVr2A.png"/></div></div></figure><p id="86c2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="la">需求. txt </em> </strong></p><p id="e2dd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦应用程序通过验证，运行以下命令来生成requirements.txt文件。这可以通过使用pipreqs来完成(如果没有安装pipreqs，请使用pip安装它。<a class="ae js" href="https://anaconda.org/conda-forge/pipreqs" rel="noopener ugc nofollow" target="_blank">请参见此链接了解conda安装</a>。):</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="4a50" class="ks kt hi ko b fi ku kv l kw kx">$ pip install pipreqs</span><span id="dac2" class="ks kt hi ko b fi lb kv l kw kx">$ pipreqs /Users/serca/Streamlit_app</span></pre><p id="c268" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了让Heroku理解这是一个streamlit应用程序，我们需要在我们的目录中再创建两个文件，即Procfile和setup.sh。这些文件如下所示:</p><p id="d4ff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="la"> Procfile </em> </strong></p><figure class="kh ki kj kk fd ij"><div class="bz dy l di"><div class="kl km l"/></div></figure><p id="2ae3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="la"> setup.sh </em> </strong></p><figure class="kh ki kj kk fd ij"><div class="bz dy l di"><div class="kl km l"/></div></figure><p id="265e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第三步:创建一个git仓库和一个</strong><a class="ae js" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">Heroku</strong></a><strong class="iw hj">账户</strong></p><p id="d419" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦所有4个文件都在目录中(app.py，requirements.txt，setup.sh，Procfile)，就该在Heroku上部署它了。</p><p id="4230" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们通过下面的命令在目录中创建一个git存储库。</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="889a" class="ks kt hi ko b fi ku kv l kw kx">$ git init</span></pre><p id="ace0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们去Heroku.com创建一个帐户。这是免费的。创建帐户后，<a class="ae js" href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" rel="noopener ugc nofollow" target="_blank">单击此链接下载Heroku CLI。下载并安装CLI后，在终端中输入以下命令。</a></p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="73c7" class="ks kt hi ko b fi ku kv l kw kx">$ heroku login</span></pre><p id="4854" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您应该会看到一个新屏幕，要求输入登录凭证。登录后，您可以关闭此屏幕。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/3f61925831f06d230a65b86e9a0dcae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*FIZNXDg2rD60dCO_uJiRIw.png"/></div></figure><p id="674a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">步骤4:部署、测试和重命名应用</strong></p><p id="aee1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在pip已经启动，Heroku CLI也已安装，我们只差几个步骤来构建和部署我们的应用程序了。为此，输入以下命令(更多详情，请<a class="ae js" href="https://devcenter.heroku.com/articles/git" rel="noopener ugc nofollow" target="_blank">访问此链接</a>):</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="9acb" class="ks kt hi ko b fi ku kv l kw kx">$ git add .<br/>$ git commit -m “My first commit”<br/>$ heroku create<br/>$ git remote -v<br/>$ git push heroku master</span></pre><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/b9f4361e2df2fe3635f13af6c9ad5009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAwEOJLfqmfcgJJ_1Ld-Hw.png"/></div></div></figure><p id="8032" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Heroku将自动为应用程序创建并分配一个随机名称。在本例中，访问仪表板的链接是secure-ravine-23512.herokuapp.com。</p><p id="0aa2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要将应用程序重命名为“新名称”，请从应用程序的Git存储库中运行<code class="du le lf lg ko b">heroku apps:rename</code>命令:</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="aa12" class="ks kt hi ko b fi ku kv l kw kx">$ heroku apps:rename newname</span></pre><p id="4a5f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，您可以从newname.herokuapp.com访问您的应用程序</p><p id="83cb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">步骤5:对已部署的应用程序进行更改</strong></p><p id="fb34" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦应用程序被部署，人们可能希望在程序中执行一些改进或更改。这个过程非常简单。首先，登录Heroku:</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="de4a" class="ks kt hi ko b fi ku kv l kw kx">$ heroku login</span></pre><h2 id="e218" class="ks kt hi bd lh li lj lk ll lm ln lo lp jf lq lr ls jj lt lu lv jn lw lx ly lz bi translated">克隆存储库</h2><p id="59fd" class="pw-post-body-paragraph iu iv hi iw b ix ma iz ja jb mb jd je jf mc jh ji jj md jl jm jn me jp jq jr hb bi translated">使用Git将程序的源代码克隆到您的本地机器上(假设应用程序的名称是newname)。</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="f102" class="ks kt hi ko b fi ku kv l kw kx">$ heroku git:clone -a newname<br/>$ cd newname</span></pre><h2 id="2bba" class="ks kt hi bd lh li lj lk ll lm ln lo lp jf lq lr ls jj lt lu lv jn lw lx ly lz bi translated">部署您的更改</h2><p id="ab88" class="pw-post-body-paragraph iu iv hi iw b ix ma iz ja jb mb jd je jf mc jh ji jj md jl jm jn me jp jq jr hb bi translated">对刚刚克隆的代码进行一些修改，并使用Git将它们部署到Heroku。</p><pre class="kh ki kj kk fd kn ko kp kq aw kr bi"><span id="484b" class="ks kt hi ko b fi ku kv l kw kx">$ git add .<br/>$ git commit -am "make it better"<br/>$ git push heroku master</span></pre><p id="a3b0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，当你回到newname.herokuapp.com时，你会在你的应用程序上看到这些变化。</p><p id="478c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在GitHub上关注我:<a class="ae js" href="https://github.com/sercangul" rel="noopener ugc nofollow" target="_blank">https://github.com/sercangul</a></p><p id="b56b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">关注我，了解更多关于Python、统计学和机器学习的信息！</strong></p></div></div>    
</body>
</html>