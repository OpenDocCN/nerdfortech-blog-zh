<html>
<head>
<title>Distracting the AI with a coin | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用硬币分散人工智能的注意力| Unity</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/distracting-the-ai-with-a-coin-unity-1cfb4e83f0fa?source=collection_archive---------7-----------------------#2021-07-22">https://medium.com/nerd-for-tech/distracting-the-ai-with-a-coin-unity-1cfb4e83f0fa?source=collection_archive---------7-----------------------#2021-07-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="3106" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何在Unity中用硬币愚弄人工智能的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/b99098748933220ddbea80acbbbb6511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8UGIknpDuPtzoRWO3t_3yg.gif"/></div></div></figure><p id="e46c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在Unity中实现一个用硬币分散NPC注意力的系统。</p><p id="0ad0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我介绍了<a class="ae ko" rel="noopener" href="/nerd-for-tech/giving-eyes-to-the-ai-unity-27acb7f48b12">如何给人工智能</a>赋予眼睛。现在，是时候实现一个系统来分散Unity中NPC(不可玩的角色)的注意力，让玩家在潜行游戏中不被注意地移动。</p><h1 id="c0ae" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">分散注意力</h1><p id="812b" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">如果你看过<a class="ae ko" href="https://fas444.medium.com/" rel="noopener">我最近的帖子</a>，你会记得我们游戏中的当前场景:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/2395a2e5eab8efc41bae77322df486c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BifXsFi_sWC5xtymQ7B4gA.gif"/></div></div></figure><p id="134b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们是达伦，一个潜入比阿特丽斯拍卖行大厅试图盗取数百万美元的小偷。问题是路上有几个障碍，他需要神不知鬼不觉地通过才能到达大楼的主拱顶。</p><p id="d587" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">所以，为了在不被发现的情况下通过第一批守卫，我们会给达伦扔硬币的能力来分散守卫的注意力。首先，我们需要创建一个硬币的预制品:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/5fd4490a359fe88173baa3e927e839f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DCIHKxWKn8JmdaurBmpeLg.png"/></div></div></figure><p id="b46a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们打开<strong class="ju hs">播放器</strong>脚本。</p><p id="f324" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们将使用一个动作委托来实现转移注意力。让我们首先将各自的名称空间包含到脚本中:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es lm"><img src="../Images/28a68242e57ed7bea46ed847b4e71d89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*Gdm3e70hincr2gZ2PkgXbg.png"/></div></figure><p id="89f8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果你想知道动作委托在C#中是如何工作的，你可以访问微软文档:</p><div class="ln lo ez fb lp lq"><a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=net-5.0" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hs fi z dy lv ea eb lw ed ef hr bi translated">动作委托(系统)</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">封装具有单个参数且不返回值的方法。通用公共委托无效操作(T…</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">docs.microsoft.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me jq lq"/></div></div></a></div><p id="5e8c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们创建:</p><ul class=""><li id="5dd3" class="mf mg hi ju b jv jw jy jz kb mh kf mi kj mj kn mk ml mm mn bi translated">公共静态动作委托</li></ul><p id="b37a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">当硬币被用来分散NPC的注意力时，这个动作代表将负责将要发生的动作。</p><ul class=""><li id="11b8" class="mf mg hi ju b jv jw jy jz kb mh kf mi kj mj kn mk ml mm mn bi translated">游戏对象变量</li></ul><p id="70f2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储一个硬币预置的参考，我们将使用它来分散注意力。</p><ul class=""><li id="75c0" class="mf mg hi ju b jv jw jy jz kb mh kf mi kj mj kn mk ml mm mn bi translated">AudioClip变量</li></ul><p id="4ac0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储一个引用，指向投掷硬币时我们将播放的音频。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mo"><img src="../Images/19ff61da4c4c5a1ddcd05388bce37860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPvoR7Dq2pTTycRjd1teMg.png"/></div></div></figure><p id="a8ee" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们创建一个新的方法，它接收所需的位置来实例化硬币预置并播放相应的音频:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mp"><img src="../Images/2cbda601c3cad9563f753d5fcefb97fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LOms2CwT9CFYreMOcqBs2g.png"/></div></div></figure><p id="413d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">接下来，让我们在<strong class="ju hs"> Awake </strong>或<strong class="ju hs"> Start </strong>方法中添加对动作委托的方法调用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mq"><img src="../Images/8b960e21841d2282a487f744a966acb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9llNEL5zRnBVPJZ3OxlQAg.png"/></div></div></figure><p id="91d5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，为了触发注意力分散，让我们检查一下<strong class="ju hs"> Update </strong>方法中的右击输入。如果玩家单击右键，我们将使用相机的光标位置创建一个光线投射，该光线投射将返回场景中的一个点(<strong class="ju hs"><em class="mr">hitinfo . point</em></strong>)以执行动作委托，并将其作为参数(如果不为空):</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ms"><img src="../Images/cce9b95d58c4060f0d26d30535206d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3mFjyMSI5wNTgpw_Qvklgw.png"/></div></div></figure><p id="8e05" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">作为一个好的实践，让我们使用<strong class="ju hs"> OnDestroy </strong>方法从静态动作委托中移除<strong class="ju hs"> ThrowCoin </strong>方法:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mt"><img src="../Images/d01eb1a5396cc509dfa1d0c2acffe4e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*J4NK1wjYGRyKxgoqESQ2OQ.png"/></div></figure><h1 id="6c46" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">实施转移注意力</h1><p id="cbf4" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了在NPC中实现分散注意力，让我们打开控制他们运动的脚本。首先，让我们创建一个新的bool来表示警卫是否分心:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mu"><img src="../Images/9fb00c2d6ee832c0fbc79a9b3751672c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*07_fMUpgqwIaj0XX7yhqdw.png"/></div></figure><p id="5569" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在我的例子中，我将使用它来禁止<strong class="ju hs"> OnTriggerEnter </strong>方法运行:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mv"><img src="../Images/559065bb5e3f9711cf5b55c1e119b276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmkXkZ16E4gaBGm-4nVJNw.png"/></div></div></figure><p id="a952" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们创建一个新方法来接收实例化硬币的位置。该方法将:</p><ul class=""><li id="ab13" class="mf mg hi ju b jv jw jy jz kb mh kf mi kj mj kn mk ml mm mn bi translated">如果与硬币的距离小于15，分散NPC的注意力。</li><li id="4ebc" class="mf mg hi ju b jv mw jy mx kb my kf mz kj na kn mk ml mm mn bi translated">使用<strong class="ju hs"> StopAllCoroutines </strong>方法停止NPC当前的协同程序。</li><li id="5e00" class="mf mg hi ju b jv mw jy mx kb my kf mz kj na kn mk ml mm mn bi translated">设置新的分心布尔为真。</li><li id="7ef2" class="mf mg hi ju b jv mw jy mx kb my kf mz kj na kn mk ml mm mn bi translated">设置NPC的新目的地<strong class="ju hs"> <em class="mr">导航网代理</em> </strong>。</li><li id="e642" class="mf mg hi ju b jv mw jy mx kb my kf mz kj na kn mk ml mm mn bi translated">触发NPC的行走动画。</li><li id="26b1" class="mf mg hi ju b jv mw jy mx kb my kf mz kj na kn mk ml mm mn bi translated">启动一个新的协程，检查NPC是否在硬币附近，以停止行走动画。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nb"><img src="../Images/f27be4fbad9ff3526e4860745a778a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HrkCfkOQvOAl4pR7okIImA.png"/></div></div></figure><p id="ff19" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">新的协同程序将接收硬币位置并检查每帧的距离，直到NPC接近硬币，停止其动画和移动以避免覆盖硬币:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nc"><img src="../Images/22cb52c4f863ca0598e221c349a278b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V25AnYXpWv83L2sYyhsvxw.png"/></div></div></figure><p id="69b8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，在<strong class="ju hs"> Awake </strong>或<strong class="ju hs"> Start </strong>方法中，让我们将<strong class="ju hs">get distant</strong>方法添加到来自玩家的静态动作委托中。为了保持良好的习惯，让我们使用<strong class="ju hs"> OnDestroy </strong>方法删除它:</p><div class="jh ji jj jk fd ab cb"><figure class="nd jl ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/1c5ef0b4c46b973f4b508f3e84f70046.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*pyi7nVb57OllxB3P0-LVsQ.png"/></div></figure><figure class="nd jl nj nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/34582ee941379b8ad92d7ed83bd9fbae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*MZHcETX9bo97zHf2thpjoA.png"/></div></figure></div><p id="fa4f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们用Unity运行游戏，我们会看到硬币如预期的那样转移NPC的注意力:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/015af44869825fd54ab7a1fb012f93bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*euWL_QSpJa_V_oKSrwYVkQ.gif"/></div></div></figure><p id="aa52" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们用Unity实现了对AI的干扰！:d .我会在下一篇文章中看到你，在那里我将展示如何用Unity为我们的游戏实现安全摄像头。</p></div><div class="ab cl nk nl gp nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="hb hc hd he hf"><blockquote class="nr ns nt"><p id="696c" class="js jt mr ju b jv jw is jx jy jz iv ka nu kc kd ke nv kg kh ki nw kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>