<html>
<head>
<title>Chain of Responsibility Design Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">责任链设计模式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/chain-of-responsibility-design-pattern-4efe8de4910d?source=collection_archive---------9-----------------------#2021-05-24">https://medium.com/nerd-for-tech/chain-of-responsibility-design-pattern-4efe8de4910d?source=collection_archive---------9-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/83b5a49082d39195a6d37850c6e79055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0z8-akGeoUJODSaAp1Tuzg.jpeg"/></div></div></figure><h1 id="1847" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">定义</h1><blockquote class="jo"><p id="85a9" class="jp jq hi bd jr js jt ju jv jw jx jy dx translated">责任链模式是一种设计模式，它形成顺序连接的组件，消费者可以简单地将对象传递给第一个组件。然后，每个组件根据构建的序列处理该特定对象。</p></blockquote><p id="3fd9" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv jy hb bi translated">这种模式属于行为设计模式的范畴。简单地说，这种模式让应用程序沿着处理程序链传递请求。每个处理程序可以决定是处理请求，还是将请求传递给构造好的序列中的下一个处理程序。该模式主要用于将<strong class="kb hj">松耦合</strong>引入到应用程序中。它基本上是基于类型来分离特定请求的发送方和接收方。</p><h1 id="447a" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用</h1><ul class=""><li id="a722" class="kw kx hi kb b kc ky kg kz kk la ko lb ks lc jy ld le lf lg bi translated">当程序以各种方式处理不同类型的请求，但顺序事先未知时。</li><li id="c5ee" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated">当需要以特定的顺序执行几个处理程序时。</li><li id="7400" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated">当处理程序序列在运行时改变时。</li></ul><h1 id="fdc5" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">利弊</h1><h2 id="c0d5" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">赞成的意见</h2><ul class=""><li id="dbd8" class="kw kx hi kb b kc ky kg kz kk la ko lb ks lc jy ld le lf lg bi translated">控制请求处理顺序的可能性。</li><li id="5376" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated">在不破坏现有代码的情况下，在应用程序中引入新的处理程序。</li><li id="f4a6" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated">类的解耦(操作调用和执行。</li></ul><h2 id="30b4" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">骗局</h2><ul class=""><li id="b936" class="kw kx hi kb b kc ky kg kz kk la ko lb ks lc jy ld le lf lg bi translated">可能有未处理的请求。</li><li id="ebe8" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated">最终用户操纵应用程序的可能性。</li></ul><h1 id="fb2b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Javascript环境下的责任链设计模式</h1><p id="76c6" class="pw-post-body-paragraph jz ka hi kb b kc ky ke kf kg kz ki kj kk ma km kn ko mb kq kr ks mc ku kv jy hb bi translated">让我们借助一个真实的例子来进一步理解这种模式。</p><h1 id="37df" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">用例</h1><blockquote class="md me mf"><p id="b1a1" class="jz ka mg kb b kc mh ke kf kg mi ki kj mj mk km kn ml mm kq kr mn mo ku kv jy hb bi translated">“新城市医药”是一家位于斯里兰卡的著名连锁药店。这个连锁店每天向成千上万的用户提供医疗用品。他们的商店遍布全国各大城市。</p></blockquote><p id="bbee" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated"><strong class="kb hj">订单流程</strong></p><p id="05f7" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">药剂师将首先在其前端库存中寻找特定的物品。如果商品不可用，搜索将继续到后面的库存。如果该商品在该位置不可用，搜索将被传递到位于每个区域的分销商仓库。下一个也是最后一个要看的地方是位于科伦坡的中央仓库。</p><p id="5699" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated"><strong class="kb hj">需求</strong>:药房需要一个药剂师的应用程序，以便轻松找到特定药品的位置和数量。</p><blockquote class="md me mf"><p id="315b" class="jz ka mg kb b kc mh ke kf kg mi ki kj mj mk km kn ml mm kq kr mn mo ku kv jy hb bi translated">注意:为了简单起见，我们将使用一个本地JSON文件作为数据库。</p></blockquote><p id="a9db" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">现在让我们尝试实现一个解决方案。</p><h2 id="2e53" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">没有模式的初始实现</h2><p id="e924" class="pw-post-body-paragraph jz ka hi kb b kc ky ke kf kg kz ki kj kk ma km kn ko mb kq kr ks mc ku kv jy hb bi translated">数据库—</p><figure class="mp mq mr ms fd ij"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="9866" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">药房—</p><figure class="mp mq mr ms fd ij"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="3826" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">索引文件—</p><figure class="mp mq mr ms fd ij"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="20f3" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">输出—</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/700061040a0d8bc46878a332f1d518a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*soWJwfbgZFB0nhDnd4gu_A.jpeg"/></div><figcaption class="mw mx et er es my mz bd b be z dx translated">图1:没有模式的初始实现</figcaption></figure><p id="a9af" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">在这个实现中，我们每次都需要传递库存位置。<strong class="kb hj">搜索仅基于特定的库存</strong>。这样效率不是很高。让我们实现责任链模式，并在可用序列中向前搜索相关库存。</p><h2 id="4f6e" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">责任链设计模式的实现</h2><p id="9357" class="pw-post-body-paragraph jz ka hi kb b kc ky ke kf kg kz ki kj kk ma km kn ko mb kq kr ks mc ku kv jy hb bi translated"><strong class="kb hj">步骤01 </strong>:更改index.js类，通过整个库存。</p><p id="2de7" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">索引文件—</p><figure class="mp mq mr ms fd ij"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="f81b" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated"><strong class="kb hj">步骤02: </strong></p><p id="0a87" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">现在让我们实现一个名为Storage的新类。该类负责遍历数据集，找到项目并将其返回。</p><p id="28cb" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">存储类—</p><figure class="mp mq mr ms fd ij"><div class="bz dy l di"><div class="mt mu l"/></div></figure><h2 id="b510" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">要点</h2><ul class=""><li id="1fb8" class="kw kx hi kb b kc ky kg kz kk la ko lb ks lc jy ld le lf lg bi translated"><strong class="kb hj">search inventory(ItemName)</strong>—遍历药品的实际数据集。</li><li id="fdb5" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated"><strong class="kb hj">。setNext() </strong> —将下一个库存设置为下一个存储。</li><li id="e0e0" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated"><strong class="kb hj">。find() </strong> —检查我们是否真的找到了它。如果有，将返回药品的详细信息。否则，它将返回一个字符串值，表示该药不可用。</li><li id="ab44" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated"><strong class="kb hj">“else If(this.next)”</strong>第29行—如果“this . next”可用，我们需要在下一个清单中再次循环。</li></ul><p id="6f20" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated"><strong class="kb hj">步骤03 : </strong></p><p id="ffc8" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">现在我们可以实现药房类了。首先，我们将在Storage类的帮助下为每个库存创建变量。</p><p id="e554" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">药学课—</p><figure class="mp mq mr ms fd ij"><div class="bz dy l di"><div class="mt mu l"/></div></figure><h2 id="740a" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">要点</h2><ul class=""><li id="dca6" class="kw kx hi kb b kc ky kg kz kk la ko lb ks lc jy ld le lf lg bi translated"><strong class="kb hj">this . storage = front Inventory</strong>—起点是前端库存。</li><li id="513e" class="kw kx hi kb b kc lh kg li kk lj ko lk ks ll jy ld le lf lg bi translated">然后，我们在“的帮助下执行链接。setNext()"方法。</li></ul><h2 id="c7fb" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">输出</h2><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/0c5997aeeeee4924bbe97782c0eb113c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bzfWdgP13Rsc-12fbyxP2A.jpeg"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">图2:最终实现</figcaption></figure><h2 id="a106" class="lm ir hi bd is ln lo lp iw lq lr ls ja kk lt lu je ko lv lw ji ks lx ly jm lz bi translated">过程</h2><p id="686f" class="pw-post-body-paragraph jz ka hi kb b kc ky ke kf kg kz ki kj kk ma km kn ko mb kq kr ks mc ku kv jy hb bi translated">系统首先检查前面库存中的“糖浆10”。那里没有。因此，应用程序移到后台清单并检查可用性。它在后面的库存中也没有。然后，系统再次移动到分配中心并检查。配送中心也没有“糖浆10”。最后，应用程序检查中央库存中的药品。“糖浆10”在那个地方有售。因此，应用程序返回可用性以及数量和可用位置。</p><p id="9bd8" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">现在我们可以看到，在责任链设计模式的帮助下，我们已经成功地实现了解决方案。药剂师，并输入他/她想要的药品，系统将生成该药品的可用性以及可用位置。</p><p id="25f8" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">以下URL提供了上述实现的完整源代码。</p><div class="nb nc ez fb nd ne"><a href="https://github.com/Damsak/Krish-LP-Training/tree/main/DesignPatterns/ChainOfResponsibilityDesignPatternPractical/NewCityMedicals" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hj fi z dy nj ea eb nk ed ef hh bi translated">damsak/Krish-LP-培训</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">通过在GitHub上创建一个帐户，为Damsak/Krish-LP-Training开发做出贡献。</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns io ne"/></div></div></a></div><p id="2bd4" class="pw-post-body-paragraph jz ka hi kb b kc mh ke kf kg mi ki kj kk mk km kn ko mm kq kr ks mo ku kv jy hb bi translated">我使用了Krishntha Dinesh先生的以下播放列表来收集所需的信息。</p><figure class="mp mq mr ms fd ij"><div class="bz dy l di"><div class="nu mu l"/></div></figure></div><div class="ab cl nv nw gp nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="hb hc hd he hf"><h1 id="e218" class="iq ir hi bd is it oc iv iw ix od iz ja jb oe jd je jf of jh ji jj og jl jm jn bi translated">参考</h1><div class="nb nc ez fb nd ne"><a href="https://www.tutorialspoint.com/design_pattern/chain_of_responsibility_pattern.htm" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hj fi z dy nj ea eb nk ed ef hh bi translated">责任链模式</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">顾名思义，责任链模式为一个请求创建一个接收者对象链。这个…</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">www.tutorialspoint.com</p></div></div><div class="nn l"><div class="oh l np nq nr nn ns io ne"/></div></div></a></div><div class="nb nc ez fb nd ne"><a href="https://refactoring.guru/design-patterns/chain-of-responsibility" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hj fi z dy nj ea eb nk ed ef hh bi translated">责任链</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">责任链是一种行为设计模式，允许您沿着处理程序链传递请求。根据……</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">重构大师</p></div></div><div class="nn l"><div class="oi l np nq nr nn ns io ne"/></div></div></a></div></div></div>    
</body>
</html>