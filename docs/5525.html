<html>
<head>
<title>Enemy Attack System using a State Machine in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Unity中使用状态机的敌人攻击系统</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/enemy-attack-system-using-a-state-machine-in-unity-ae1477d964cd?source=collection_archive---------2-----------------------#2021-10-13">https://medium.com/nerd-for-tech/enemy-attack-system-using-a-state-machine-in-unity-ae1477d964cd?source=collection_archive---------2-----------------------#2021-10-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/17c14e9b1103fa50faced9794e60c918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4hveeieRAl5urUOK"/></div></div></figure><p id="9cee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我一直在做一个第三人称僵尸生存游戏。我已经添加了敌人的健康系统，所以现在我将添加敌人的攻击系统。</p><p id="76b8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步，给敌人再加一个对撞机。这个对撞机会在敌人的前方，充当敌人攻击的命中范围。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/7df9575c292bfcc8c0bb4b042f7cb740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*MU9dLC5Fj4a7xH1DvsceYA.png"/></div></figure><p id="fe82" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在敌方脚本中，您需要添加几个变量。首先要添加的是enum，为敌人的行为创建一个状态机。您将需要一个用于播放器的IDamagable接口的变量。最后要添加的变量是攻击延迟和下一次攻击变量，以增加敌人攻击之间的时间。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/2b3590b355dcc23faca9677c4c0b24b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*SMM6jXPOcb-uJVN1a7qlIw.png"/></div></figure><p id="e11f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保在start方法中获取对播放器的IDamageable接口的引用。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/24c5f8f73360e849ce19e99ca2e98724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*K44bpOFtbzCaLbHVRJu52A.png"/></div></figure><p id="a5a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用OnTrigger方法你可以决定敌人应该处于什么状态。当玩家进入碰撞器时，敌对状态应该切换到攻击，当玩家离开碰撞器时，敌对状态应该切换到追逐。您还将在start方法中设置敌人状态。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/bfb4807c93338d2750cb6168be5c040e.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*g3vfilVfPoHDl34qMWwuRg.png"/></div></figure><p id="85fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在创建一个方法来保存敌人在每个状态下应该做什么的逻辑。如果敌人处于追击状态，调用敌人移动法。如果敌人处于攻击状态，使用延迟确保攻击准备好，并调用玩家的伤害方法，然后重置攻击延迟。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jw"><img src="../Images/c87a22291c7c9f0f96beec4c1f7f975c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*UcTmKDbKZcEYEv7fiefF1g.png"/></div></figure><p id="9529" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在调用update方法中的方法，攻击系统就建立起来了。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jx"><img src="../Images/69af2d6d97f3eb1270ed3d94248e2160.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*U3LYMya44aS2IiTL3i8ejQ.png"/></div></figure><p id="236b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在敌人可以追逐和攻击玩家了。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/f76726bc8bb6bbca8e0baf7a78538183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eGuH6vriEtBaCeXy67z5og.gif"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">注意:当敌人停在玩家附近时，敌人正在攻击</figcaption></figure></div></div>    
</body>
</html>