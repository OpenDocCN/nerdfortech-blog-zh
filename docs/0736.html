<html>
<head>
<title>Searching for Prominent Colors in an image from a given Palette in Go — Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Go 中从给定的调色板中搜索图像中的突出颜色—第一部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/searching-for-prominent-colors-in-an-image-from-a-given-palette-in-go-part-i-13e8e511a6b0?source=collection_archive---------10-----------------------#2021-02-09">https://medium.com/nerd-for-tech/searching-for-prominent-colors-in-an-image-from-a-given-palette-in-go-part-i-13e8e511a6b0?source=collection_archive---------10-----------------------#2021-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2a45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇由两部分组成的文章(<a class="ae jd" rel="noopener" href="/@philojjohny/searching-for-prominent-colors-in-an-image-from-a-given-palette-in-go-part-i-13e8e511a6b0"> I </a>，<a class="ae jd" rel="noopener" href="/@philojjohny/searching-for-prominent-colors-in-an-image-from-a-given-palette-in-go-part-ii-d4fd8e698fb7"> II </a>)探讨了使用 kd-tree 数据结构的概念，以便使用 go 从给定的调色板中识别图像中的突出颜色。</p><blockquote class="je jf jg"><p id="5ef6" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">这篇文章的源代码可以在 https://github.com/philoj/tree-palette<a class="ae jd" href="https://github.com/philoj/tree-palette" rel="noopener ugc nofollow" target="_blank">的</a>找到</p></blockquote><h2 id="ed66" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">以下是我们正在尝试做的事情:</h2><p id="434f" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">假设我们有一个物体的图像，我们试图识别它的颜色。我们不是猜测一些随机的颜色，而是试图将我们的猜测限制在一个选定的颜色列表中。一个示例场景是使用标准发行颜色分析知名产品目录中的产品照片。</p><h2 id="c9bf" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">好吧，我们已经知道了什么？</h2><p id="3ebd" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">假设这些是我们可以选择的颜色，我们称之为<em class="jh">调色板</em>:</p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kl"><img src="../Images/82617f529e898372b6e96a87479e650e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n4PY3KBHFAlaIyg6bhCs0g.png"/></div></div></figure><p id="689e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于图像中的每个像素，我们将从上面的调色板中选择<strong class="ih hj">最相似的颜色</strong>。所以基本上，我们需要转换整个图像，以便图像中的所有颜色都来自调色板。</p><blockquote class="je jf jg"><p id="a648" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">首先，我们需要定义什么是颜色相似度。</p></blockquote><p id="61c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">显而易见的方法是考虑这样一个事实，即每种颜色都由红色、蓝色和绿色成分组成，就像一个三维点。如果我们用红色、绿色和蓝色值作为三个轴将它们绘制在一个图表中，我们可以看到相似的值仍然彼此接近:</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kx"><img src="../Images/665ef1626b22f9e2b10d017e76d11628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*sqP9zLr17K4DCGO8fu-lTw.png"/></div></figure><p id="263b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在有了相似性的定义:最相似的那些之间的距离最小！</p><p id="dc6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在需要做的就是计算不同颜色之间的距离。在像图中这样的 3d <a class="ae jd" href="https://en.wikipedia.org/wiki/Cartesian_coordinate_system" rel="noopener ugc nofollow" target="_blank">笛卡尔坐标</a>系统中，两种颜色之间的距离公式为:</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es ky"><img src="../Images/bb8e29860ab552a440f404561a4a47bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/1*HWW_QhZUiXTAG-E5_BJfcQ.gif"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><em class="ld">其中(r₁,g₁,b₁)是第一种颜色，(r₂,g₂,b₂)是第二种颜色。</em></figcaption></figure><p id="476f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以找到每个像素的颜色与每个调色板颜色之间的距离，并找出最相似的调色板颜色。</p><p id="8f57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们写代码，对吗？</p><h2 id="ae26" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">不对！</h2><p id="214b" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">在深入研究代码之前，让我们再次看看我们的解决方案。假设图像尺寸为 1920x768，调色板尺寸为 10。我们需要计算上式 1920*768*10 = 1，47，45，600 次，就为了找出最突出的颜色！我们花点时间探索优化它的方法难道不重要吗？</p><blockquote class="je jf jg"><p id="25ef" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">让我们看看:</p><p id="a896" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">眼前的问题类似于数学中所谓的最近邻搜索。</p></blockquote><p id="d843" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们上面已经讨论过的就是所谓的<a class="ae jd" href="https://en.wikipedia.org/wiki/Nearest_neighbor_search#Linear_search" rel="noopener ugc nofollow" target="_blank">线性搜索</a>。数学界还有很多其他的方法来解决这个问题！</p><p id="4d7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jd" rel="noopener" href="/@philojjohny/searching-for-prominent-colors-in-an-image-from-a-given-palette-in-go-part-ii-d4fd8e698fb7"> <strong class="ih hj"> <em class="jh">的下一部分</em> </strong> </a>中，我们将探索一种相对简单高效的方法，称为<a class="ae jd" href="https://en.wikipedia.org/wiki/K-d_tree" rel="noopener ugc nofollow" target="_blank"> kd-tree </a>..【T10<strong class="ih hj"><em class="jh">&gt;&gt;</em></strong></p></div></div>    
</body>
</html>