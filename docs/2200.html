<html>
<head>
<title>Elm, elm-ui and the building of a dropdown — Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Elm、elm-ui和下拉菜单的构建——第一部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/elm-elm-ui-and-the-building-of-a-dropdown-part-i-8aff2ed079b2?source=collection_archive---------3-----------------------#2021-04-26">https://medium.com/nerd-for-tech/elm-elm-ui-and-the-building-of-a-dropdown-part-i-8aff2ed079b2?source=collection_archive---------3-----------------------#2021-04-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="aa02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你已经进入Elm并且还在处理CSS文件，那就彻底处理它们。真的。去做吧，因为在Elm，我们有漂亮的Elm-UI。你可以用一种实际上可以理解的语言来写设计。然而，Elm-UI可能仍然没有您可能需要的一切。它没有内置的一个简单的东西是下拉菜单，一个随处可见的东西。</p><p id="ff7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">继续学习如何用Elm和elm-ui构建一个准系统下拉列表。在第二部分中，我们将使用Elm的强大类型制作一个参数化版本。更具体地说，您将掌握参数化类型！<em class="jd">你可以在这里找到:</em></p><div class="je jf ez fb jg jh"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/reusable-dropdown-in-elm-with-parameterized-types-part-ii-77f58515a662"><div class="ji ab dw"><div class="jj ab jk cl cj jl"><h2 class="bd hj fi z dy jm ea eb jn ed ef hh bi translated">带有参数化类型的Elm中的可重用下拉列表—第二部分</h2><div class="jo l"><h3 class="bd b fi z dy jm ea eb jn ed ef dx translated">利润和乐趣的参数化类型</h3></div><div class="jp l"><p class="bd b fp z dy jm ea eb jn ed ef dx translated">medium.com</p></div></div><div class="jq l"><div class="jr l js jt ju jq jv jw jh"/></div></div></a></div><h1 id="d6b0" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">设置</h1><p id="c848" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">用<code class="du la lb lc ld b">elm init</code>开始一个新的Elm项目，并在<code class="du la lb lc ld b">src</code>文件夹中创建一个<code class="du la lb lc ld b">Main.elm</code>文件。你也可以在第一部分使用<a class="ae le" href="https://ellie-app.com/new" rel="noopener ugc nofollow" target="_blank"> Ellie </a>(当我们开始使用参数化类型时，我们将为可重用的下拉菜单创建一个新模块)。</p><p id="721e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用<code class="du la lb lc ld b">elm install mdgriffith/elm-ui</code>安装<code class="du la lb lc ld b">elm-ui</code>。</p><p id="909f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从以下准系统结构开始:</p><pre class="lf lg lh li fd lj ld lk ll aw lm bi"><span id="73bf" class="ln jy hi ld b fi lo lp l lq lr">module Main exposing (main)</span><span id="0b70" class="ln jy hi ld b fi ls lp l lq lr">import Browser<br/>import Html</span><span id="08bf" class="ln jy hi ld b fi ls lp l lq lr">import Element as E<br/>import Element.Background as Background<br/>import Element.Border as Border<br/>import Element.Events as Events</span><span id="e28e" class="ln jy hi ld b fi ls lp l lq lr">type alias Model =<br/>    { }</span><span id="5fa6" class="ln jy hi ld b fi ls lp l lq lr">        <br/>initialModel : Model<br/>initialModel =<br/>    { <br/>    }</span><span id="0472" class="ln jy hi ld b fi ls lp l lq lr">type Msg<br/>    = NoAction<br/>      </span><span id="a774" class="ln jy hi ld b fi ls lp l lq lr">update : Msg -&gt; Model -&gt; Model<br/>update msg model =<br/>    case msg of<br/>        NoAction -&gt;<br/>            model</span><span id="a667" class="ln jy hi ld b fi ls lp l lq lr">view : Model -&gt; Html.Html Msg<br/>view model =<br/>    E.layout<br/>        []<br/>        (<br/>        E.column<br/>            [ E.centerX<br/>            , E.centerY<br/>        ]<br/>            [ E.text "You favorite food is:"<br/>            , E.text "... the best food."<br/>            ]<br/>        )</span><span id="01a8" class="ln jy hi ld b fi ls lp l lq lr">main : Program () Model Msg<br/>main =<br/>    Browser.sandbox<br/>        { init = initialModel<br/>        , view = view<br/>        , update = update<br/>        }</span></pre><p id="dbe4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du la lb lc ld b">elm make src/main.elm</code>并转到项目文件夹中创建的<code class="du la lb lc ld b">index.html</code>文件。一开始，你会得到一个很好的居中布局，就像这样:</p><figure class="lf lg lh li fd lu er es paragraph-image"><div class="er es lt"><img src="../Images/a03c779eacf0dd511c3fbaacefd2c5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*h9iDAB4U5NHvfwjd1LnVLw.png"/></div></figure><p id="521e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Uau，看代码把列居中。生活不是很美好吗？我永远不会厌倦这个。</p><h1 id="ebc5" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">下拉菜单</h1><p id="5c7d" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">好了，集中注意力。到底什么是下拉菜单？下拉菜单允许用户从预定义的列表中选择一个选项。让我们构建一个简单的下拉列表来选择我们最喜欢的食物。我们需要一些选项来选择。我们将创建一个具有<code class="du la lb lc ld b">id</code>、<code class="du la lb lc ld b">name</code>和<code class="du la lb lc ld b">foodType</code>的<code class="du la lb lc ld b">Food</code>类型，它们可以是<code class="du la lb lc ld b">FastFood</code>或<code class="du la lb lc ld b">Regional</code>。</p><pre class="lf lg lh li fd lj ld lk ll aw lm bi"><span id="c771" class="ln jy hi ld b fi lo lp l lq lr">type FoodType<br/>    = FastFood<br/>    | Regional<br/>        <br/>type alias Food =<br/>    { id : Int<br/>    , name : String<br/>    , foodType : FoodType<br/>    }</span><span id="1c1d" class="ln jy hi ld b fi ls lp l lq lr">foodList : List Food<br/>foodList =<br/>    [ Food 0 "Hotdog" FastFood<br/>    , Food 1 "Hamburguer" FastFood<br/>    , Food 2 "Taco" FastFood<br/>    , Food 3 "Francesinha aka Little French" Regional<br/>    , Food 4 "Sauerkraut" Regional<br/>    , Food 5 "Kimchi" Regional<br/>    ]</span></pre><p id="399f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在进口之后加上。我们的模型需要知道当前选择的最喜欢的食物是什么，以及我们当前是否从下拉菜单中选择了任何食物。</p><pre class="lf lg lh li fd lj ld lk ll aw lm bi"><span id="50e9" class="ln jy hi ld b fi lo lp l lq lr">type alias Model =<br/>    { favoriteFood : Maybe Food<br/>    , status : Status}</span><span id="1dbe" class="ln jy hi ld b fi ls lp l lq lr">type Status<br/>    = Normal<br/>    | SelectFood</span><span id="46f4" class="ln jy hi ld b fi ls lp l lq lr">initialModel : Model<br/>initialModel =<br/>    { favoriteFood = Nothing<br/>    , status = Normal<br/>    }</span></pre><p id="568e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du la lb lc ld b">favoriteFood</code>可能有一个被选中的<code class="du la lb lc ld b">Food</code>，或者没有，在这种情况下它将是<code class="du la lb lc ld b">Nothing</code>(这也是起始值，因为用户还没有选择任何东西)。<code class="du la lb lc ld b">Status</code>只是告诉我们当前是否正在从列表中选择食物。当用户点击下拉菜单时，状态变为<code class="du la lb lc ld b">SelectFood</code>。当用户点击其中一个下拉选项时，它会回到正常状态(这也是开始状态)。</p><p id="39bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们开始实际设计<code class="du la lb lc ld b">view</code>中的下拉菜单。让我们创建一个包含所有可能选项的专栏。</p><pre class="lf lg lh li fd lj ld lk ll aw lm bi"><span id="2d93" class="ln jy hi ld b fi lo lp l lq lr">view : Model -&gt; Html.Html Msg<br/>view model =<br/>    let<br/>        selectedFoodName = <br/>            case model.favoriteFood of<br/>                Nothing -&gt; "No food selected. Click here to select."<br/>                Just food -&gt; food.name<br/>        dropdown = <br/>            E.el<br/>                [ Border.width 1<br/>                , Border.dashed<br/>                , E.padding 3<br/>                , Events.onClick ClickedSelectFood<br/>                ]<br/>                (E.text selectedFoodName)<br/>    in<br/>    E.layout<br/>        []<br/>        (<br/>        E.column<br/>            [ E.centerX<br/>            , E.centerY<br/>        ]<br/>            [ E.text "You favorite food is:"<br/>            , dropdown<br/>            , E.text "... the best food."<br/>            ]<br/>        )</span></pre><p id="4ea4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们刚刚为我们最喜欢的食物创建了一个占位符。当没有选择食物时，它已经管理了案例。如果我们点击这个框，我们将发送<code class="du la lb lc ld b">ClickedSelectFood</code>消息。我们需要创建这个消息，并在更新中处理它。</p><pre class="lf lg lh li fd lj ld lk ll aw lm bi"><span id="98fd" class="ln jy hi ld b fi lo lp l lq lr">type Msg<br/>    = NoAction<br/>    | ClickedSelectFood<br/>      </span><span id="1f7f" class="ln jy hi ld b fi ls lp l lq lr">update : Msg -&gt; Model -&gt; Model<br/>update msg model =<br/>    case msg of<br/>        NoAction -&gt;<br/>            model<br/>        ClickedSelectFood -&gt;<br/>            { model | status = SelectFood }</span></pre><p id="0c3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们点击下拉菜单时，会发送一个<code class="du la lb lc ld b">ClickedSelectFood</code>，我们的状态会变为<code class="du la lb lc ld b">SelectFood</code>。有道理，对吧？我们需要对该状态做些什么，但是现在，您将得到类似这样的内容:</p><figure class="lf lg lh li fd lu er es paragraph-image"><div class="er es lw"><img src="../Images/158a618ed58f037de9142de20745b1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*5ZVrHjcrxXUuV9YgU51tBQ.png"/></div></figure><p id="95b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个小小的进步。重要的部分在视图中的let块内。如果<code class="du la lb lc ld b">status</code>是<code class="du la lb lc ld b">SelectFood</code>，那么我们将有一个<code class="du la lb lc ld b">Element.text</code>列表，其中的食物名称被附加到<code class="du la lb lc ld b">below</code>属性。否则，我们不会使用该属性。另请注意，<code class="du la lb lc ld b">onClick</code>属性仅在状态为<code class="du la lb lc ld b">Normal</code>时出现。这是因为我们在这两种情况下都保留了它，当单击其中一个选项时会触发该事件，因为该列表位于dropdown元素中。我们不想那样。只有在状态为<code class="du la lb lc ld b">Normal</code>时，才应发送<code class="du la lb lc ld b">ClickedSelectFood</code>消息。如果我们已经从食物列表中选择了一个选项，那么发送一条消息来触发逻辑打开下拉菜单(它已经打开了)是没有意义的。现在，当我们单击下拉菜单时，我们将获得所需的列表。</p><figure class="lf lg lh li fd lu er es paragraph-image"><div class="er es lw"><img src="../Images/d80a5db65fb7b6bbd25292a1104cac42.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*0u25tS7PFsFjBTNrEZwsXA.png"/></div></figure><p id="1177" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du la lb lc ld b">viewFood</code>中，我们已经添加了一些漂亮的视觉糖来改变鼠标所在选项的背景颜色。</p><p id="2eaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您所看到的，列表被绘制在其余内容之上。这就是为什么在这个过程中不改变布局。但这也意味着我们现在看到了下面的内容。我们需要填充所有选项的背景。</p><pre class="lf lg lh li fd lj ld lk ll aw lm bi"><span id="d6a7" class="ln jy hi ld b fi lo lp l lq lr">white : E.Color<br/>white = E.rgb 1 1 1</span><span id="3561" class="ln jy hi ld b fi ls lp l lq lr">viewFood : Food -&gt; E.Element Msg<br/>viewFood food =<br/>    E.el<br/>        [ E.width E.fill<br/>        , E.mouseOver [Background.color overColor]<br/>        , Background.color white<br/>        ]<br/>        (E.text food.name)</span></pre><figure class="lf lg lh li fd lu er es paragraph-image"><div class="er es lx"><img src="../Images/5d6579a3389e558cb3bdcab2fe87e341.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*x29V0m0HS3L0SUs3Zv7s5A.png"/></div></figure><p id="d6ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们添加了<code class="du la lb lc ld b">ClickedDropdownFood</code>消息，当我们点击列表中的一种食物时就会发送这个消息(参见<code class="du la lb lc ld b">viewFood</code>中的<code class="du la lb lc ld b">onClick</code>事件)。当<code class="du la lb lc ld b">update</code>收到这条消息时，状态恢复到<code class="du la lb lc ld b">Normal</code>，新的<code class="du la lb lc ld b">favoriteFood</code>就是我们点击的那个。然后将一切渲染成应有的样子。</p><figure class="lf lg lh li fd lu er es paragraph-image"><div class="er es ly"><img src="../Images/e333245be76176bcae75b8fba858cb48.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/1*MQxx5Oy8X7cAVwTExGbLBQ.gif"/></div></figure><p id="d5f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你知道如何创建一个简单的下拉列表。如果需要多次下拉怎么办？如果他们选择了不同的东西呢？这就是我们将在第2部分讨论的内容，我们将创建一个可重用的组件，它将接收任何类型并像我们在这里做的那样显示它。</p></div></div>    
</body>
</html>