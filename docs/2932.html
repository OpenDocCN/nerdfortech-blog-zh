<html>
<head>
<title>Installing TensorFlow GPU &amp; Enabling CUDA in Ubuntu 18.04— Complete Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Ubuntu 18.04 中安装 TensorFlow GPU 和启用 CUDA 完整指南</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/installing-tensorflow-gpu-enabling-cuda-in-ubuntu-18-04-complete-guide-ca9dfaa5bdd3?source=collection_archive---------8-----------------------#2021-05-24">https://medium.com/nerd-for-tech/installing-tensorflow-gpu-enabling-cuda-in-ubuntu-18-04-complete-guide-ca9dfaa5bdd3?source=collection_archive---------8-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3e801ceb2781ee5804dc147585992092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZDLgFzXf230YD1qJRxCetA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来源—<a class="ae iu" href="https://software.intel.com/content/www/us/en/develop/tools/frameworks.html" rel="noopener ugc nofollow" target="_blank">https://software . Intel . com/content/www/us/en/develop/tools/frameworks . html</a></figcaption></figure><p id="75e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些天来，大多数研究级机器学习算法都是在支持 CUDA 的 GPU 上运行，因为在以更高速度处理网络方面有明显的优势，特别是在涉及“计算机视觉”问题时。在使用 TensorFlow 进行编码和运行基准测试之前，我们需要设置环境来使用 GPU 处理我们的网络。对于大多数人来说，这确实是一个乏味的过程，我自己不得不在 Windows 和我的 Ubuntu 分区上尝试了 2-3 次。我们都同意 NVIDIA 文档在这种情况下没有真正的帮助，因为写作的普遍性和复杂性。</p><h2 id="af2a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">重要:</strong></h2><ol class=""><li id="6eda" class="ko kp hi ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">我已经提到了当您运行以下命令时终端中可能出现的错误，以及如何在运行这些命令时纠正它们。如果你遇到了本文没有提到的错误，请在下面评论它们，我会尽力帮助你。<a class="ae iu" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>在这种情况下也非常有用。</li><li id="7fd4" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">我已经使用“Anaconda”演示了这一点，并且通过为 Tensorflow-GPU 版本创建一个单独的环境来安装这些包。如果您想删除 Tensorflow-GPU 安装，或者如果您遇到似乎无法解决的错误，您可以删除环境并通过创建一个新环境重新开始，而无需删除整个 anaconda 安装，这将非常方便。</li><li id="d4fe" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">最后，我给出了运行的示例代码，您可以用它来检查安装是否成功。建议在“jupyter 笔记本”中进行尝试。</li></ol></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="3135" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">步骤 01:系统检查</h1><h2 id="e8bc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈠确保你的系统能够使用 CUDA</h2><p id="175f" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">访问以下网站，确保您的 GPU 支持 CUDA。<a class="ae iu" href="https://developer.nvidia.com/cuda-gpus" rel="noopener ugc nofollow" target="_blank">https://developer.nvidia.com/cuda-gpus</a></p><blockquote class="mf mg mh"><p id="01fc" class="iv iw mi ix b iy iz ja jb jc jd je jf mj jh ji jj mk jl jm jn ml jp jq jr js hb bi translated">但是这个支持 CUDA 的 GPU 列表似乎不完整，因为我现在使用的 GPU 是支持 CUDA 的，出于某种原因，它没有列在上面给出的列表中！</p><p id="1453" class="iv iw mi ix b iy iz ja jb jc jd je jf mj jh ji jj mk jl jm jn ml jp jq jr js hb bi translated">因此，在继续此过程之前，请彻底检查。</p><p id="0f82" class="iv iw mi ix b iy iz ja jb jc jd je jf mj jh ji jj mk jl jm jn ml jp jq jr js hb bi translated">谷歌“CUDA 启用了吗？”你的 GPU 版本可能会给你想要的答案。</p><p id="f7b7" class="iv iw mi ix b iy iz ja jb jc jd je jf mj jh ji jj mk jl jm jn ml jp jq jr js hb bi translated">或者<!-- -->否则，访问 NVIDIA 的官方宣传页面，看看它是否被列为 CUDA enabled。</p></blockquote><h2 id="cc3b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(ii)确定哪些 CUDA/ cuDNN 软件包与您的 GPU 兼容</h2><p id="78bb" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">不同的 GPU 支持不同版本的 CUDA，如果你的 GPU 相对较旧，那么它很有可能无法与最新版本的 CUDA 兼容。因此，在盲目安装最新的 CUDA 工具包版本之前，检查适合您自己的 GPU 的版本是非常重要的。这可以在互联网上搜索或访问<a class="ae iu" href="https://forums.developer.nvidia.com/" rel="noopener ugc nofollow" target="_blank">NVIDIA 官方开发者论坛</a>来完成。</p><h1 id="70e1" class="ll ju hi bd jv lm mm lo jz lp mn lr kd ls mo lu kg lv mp lx kj ly mq ma km mb bi translated">步骤 02:删除 NVIDIA Nouveau 驱动程序(xserver-xorg-video)</h1><h2 id="78fc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈠将司机列入黑名单</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="c684" class="jt ju hi mw b fi na nb l nc nd">sudo bash -c "echo blacklist nouveau &gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf"</span><span id="7a4a" class="jt ju hi mw b fi ne nb l nc nd">sudo bash -c "echo options nouveau modeset=0 &gt;&gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf"</span></pre><h2 id="a6d8" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(ii)确认新 modprobe 配置文件的内容</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="0cf2" class="jt ju hi mw b fi na nb l nc nd">cat /etc/modprobe.d/blacklist-nvidia-nouveau.conf</span></pre><p id="6406" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在执行上面的行之后，您必须看到类似下面给出的输出。</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="d0ee" class="jt ju hi mw b fi na nb l nc nd">blacklist nouveau<br/>options nouveau modeset=0</span></pre><h2 id="94e0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(iii)更新内核 initramfs</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="a27f" class="jt ju hi mw b fi na nb l nc nd">sudo update-initramfs -u</span></pre><p id="bea1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"><em class="mi">————————此时可能出现的错误:— — — — — — — — </em> </strong></p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="5f60" class="jt ju hi mw b fi na nb l nc nd">update-initramfs: Generating /boot/initrd.img-4.18.0-15-generic<br/>I: The initramfs will attempt to resume from /dev/sda5<br/>I: (UUID=09e25397-4a2c-4fb0-a605-a7013eecb59c)<br/>I: Set the RESUME variable to override this.</span></pre><p id="b81d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当您有一个双引导系统时，上面的冲突最容易发生。建议设置恢复变量，交换 UUID 需要添加到<code class="du nf ng nh mw b">/etc/initramfs-tools/conf.d/resume</code>文件中。</p><ol class=""><li id="ddd4" class="ko kp hi ix b iy iz jc jd jg ni jk nj jo nk js kv kw kx ky bi translated">确定您的掉期 UUID</li></ol><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="6ff2" class="jt ju hi mw b fi na nb l nc nd">blkid | awk -F\" '/swap/ {print $2}'</span></pre><p id="832b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.在简历文件中设置相关的 ID</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="8642" class="jt ju hi mw b fi na nb l nc nd">printf "RESUME=UUID=$(blkid | awk -F\" '/swap/ {print $2}')\n" | sudo tee /etc/initramfs-tools/conf.d/resume</span></pre><p id="92cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.再次运行以下命令来更新系统上的内核</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="d69f" class="jt ju hi mw b fi na nb l nc nd">sudo update-initramfs -u -k all</span></pre><p id="026c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> — — — —错误解决结束— — </strong></p><h2 id="e70a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈣重新启动</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="2a48" class="jt ju hi mw b fi na nb l nc nd">sudo reboot</span></pre><h1 id="e82f" class="ll ju hi bd jv lm mm lo jz lp mn lr kd ls mo lu kg lv mp lx kj ly mq ma km mb bi translated">步骤 03:删除其他 NVIDIA 驱动程序</h1><h2 id="a108" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(I)添加图形驱动程序 PPA(个人包存档)</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="d609" class="jt ju hi mw b fi na nb l nc nd">sudo add-apt-repository ppa:graphics-drivers/ppa<br/>sudo apt-get update</span></pre><h2 id="969c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(二)清洗驾驶员</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="d128" class="jt ju hi mw b fi na nb l nc nd">sudo apt-get purge nvidia*</span></pre><h2 id="0b83" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈢重新启动</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="8d2c" class="jt ju hi mw b fi na nb l nc nd">sudo reboot</span></pre><h1 id="7de9" class="ll ju hi bd jv lm mm lo jz lp mn lr kd ls mo lu kg lv mp lx kj ly mq ma km mb bi translated">步骤 04:安装专有的 NVIDIA 驱动程序</h1><h2 id="0a8b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈠自动安装驱动程序</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="5ce2" class="jt ju hi mw b fi na nb l nc nd">sudo apt update<br/>sudo ubuntu-drivers autoinstall</span></pre><p id="88d7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mi"> — — — —此时可能的错误:——</em>—</strong></p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="b89c" class="jt ju hi mw b fi na nb l nc nd">Some packages could not be installed. This may mean that you have<br/>requested an impossible situation or if you are using the unstable<br/>distribution that some required packages have not yet been created<br/>or been moved out of Incoming.<br/>The following information may help to resolve the situation:<br/><br/>The following packages have unmet dependencies:<br/> nvidia-driver-396 : Depends: nvidia-dkms-396 (= 396.54-0ubuntu0~gpu18.04.1) but it is not going to be installed<br/>                     Depends: nvidia-utils-396 (= 396.54-0ubuntu0~gpu18.04.1) but it is not going to be installed<br/>                     Recommends: nvidia-settings but it is not going to be installed<br/>                     Recommends: nvidia-prime (&gt;= 0.8) but it is not going to be installed<br/>                     Recommends: libnvidia-compute-396:i386 (= 396.54-0ubuntu0~gpu18.04.1)<br/>                     Recommends: libnvidia-decode-396:i386 (= 396.54-0ubuntu0~gpu18.04.1)<br/>                     Recommends: libnvidia-encode-396:i386 (= 396.54-0ubuntu0~gpu18.04.1)<br/>                     Recommends: libnvidia-ifr1-396:i386 (= 396.54-0ubuntu0~gpu18.04.1)<br/>                     Recommends: libnvidia-fbc1-396:i386 (= 396.54-0ubuntu0~gpu18.04.1)<br/>                     Recommends: libnvidia-gl-396:i386 (= 396.54-0ubuntu0~gpu18.04.1)<br/>E: Unable to correct problems, you have held broken packages.</span></pre><p id="3326" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mi">解决这类涉及 NVIDIA 驱动程序安装的问题需要实例化方法，而不是一般化方法。因此，建议在</em> </strong> <a class="ae iu" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> <em class="mi">堆栈溢出</em> </strong> </a> <strong class="ix hj"> <em class="mi">上搜索错误或帮助。</em> </strong></p><p id="5d1b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> — — — —错误解决结束— — </strong></p><h2 id="de6e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈡重新启动</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="0abd" class="jt ju hi mw b fi na nb l nc nd">sudo reboot</span></pre><h2 id="4bbe" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(iii)启用驱动程序并重启</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="bc79" class="jt ju hi mw b fi na nb l nc nd">sudo prime-select nvidia<br/>sudo reboot</span></pre><h2 id="1074" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(四)检查一切是否按预期运行</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="444b" class="jt ju hi mw b fi na nb l nc nd">nvidia-smi</span></pre><p id="9cbc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">示例输出:</strong></p><figure class="mr ms mt mu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nl"><img src="../Images/708a2c618448d74113909a05ea6ca2cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NpAEiaJi4a-h6ul3JNliOA.jpeg"/></div></div></figure><p id="e5ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mi"> — — — —此时可能出现的错误:——</em>—</strong></p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="59cd" class="jt ju hi mw b fi na nb l nc nd">nvidia-smi</span><span id="cdb3" class="jt ju hi mw b fi ne nb l nc nd">NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.</span></pre><p id="0b6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请记住，错误可能是由于您的安装的内部缺陷而出现的，并且<strong class="ix hj">下面推荐的方法可能无法解决问题</strong>。如果没有，请在互联网或<a class="ae iu" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>上搜索错误，以获得更好的结果。</p><p id="7cd8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">试试:</strong></p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="bd75" class="jt ju hi mw b fi na nb l nc nd">sudo apt-get update –fix-missing</span><span id="db16" class="jt ju hi mw b fi ne nb l nc nd">sudo dpkg –configure -a</span><span id="c42e" class="jt ju hi mw b fi ne nb l nc nd">sudo apt install -f</span></pre><p id="2da6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果包装破损的问题仍然存在，解决方法是<strong class="ix hj">手动编辑 dpkg 状态</strong>文件。</p><p id="c172" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> — — — — —错误解决结束— — </strong></p><h1 id="dde6" class="ll ju hi bd jv lm mm lo jz lp mn lr kd ls mo lu kg lv mp lx kj ly mq ma km mb bi translated">步骤 05:安装 Tensorflow GPU</h1><h2 id="67eb" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈠安装 Anaconda</h2><p id="a2a2" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">访问<a class="ae iu" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">https://www.anaconda.com/products/individual</a>，安装您喜欢的版本。</p><h2 id="fa0d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">(二)为 Tensorflow GPU 创建新环境</h2><p id="a52d" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">请注意，基于兼容性问题，我在此环境中使用了 python 版。将它替换为您的机器兼容的版本，以便进行全新安装。</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="ee27" class="jt ju hi mw b fi na nb l nc nd">conda create -n tf-gpu python=3.7<br/>source activate tf-gpu</span></pre><p id="633d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mi"> — — — —此时可能的错误:——</em>—</strong></p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="0e73" class="jt ju hi mw b fi na nb l nc nd">conda: command not found</span></pre><p id="7c65" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是因为 anaconda 安装的路径没有在您的<code class="du nf ng nh mw b">.bashrc</code>或<code class="du nf ng nh mw b">.zshrc</code>中设置</p><p id="f3f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">试试:</strong></p><p id="1d30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du nf ng nh mw b">export PATH="/home/username/anaconda3/bin:$PATH"</code></p><p id="c6cc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> — — — —错误解决结束— — </strong></p><h2 id="5cd4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">㈢安装 CUDA、cuDNN</h2><p id="7b85" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">此时，使用您在步骤 01 中查找的兼容 tensorflow、CUDA 和 cuDNN 版本，并相应地更改版本号。这里我使用了<strong class="ix hj"> tensorflow 1 </strong>，但请注意，有一个更新的版本<strong class="ix hj"> tensorflow 2 </strong>可用。</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="752f" class="jt ju hi mw b fi na nb l nc nd">conda install \<br/>tensorflow-gpu==1.12 \<br/>cudatoolkit==9.0 \<br/>cudnn=7.1.2 \<br/>h5py</span></pre><h1 id="f974" class="ll ju hi bd jv lm mm lo jz lp mn lr kd ls mo lu kg lv mp lx kj ly mq ma km mb bi translated">步骤 06:验证安装</h1><h2 id="4dc6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">对于张量流 1:</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="ef60" class="jt ju hi mw b fi na nb l nc nd">tf.test.gpu_device_name()</span></pre><p id="95a0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="e0a9" class="jt ju hi mw b fi na nb l nc nd">sess = tf.Session(config=tf.ConfigProto(log_device_placement=True))</span></pre><p id="2de0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于上面的命令，您应该会看到类似如下的内容:</p><figure class="mr ms mt mu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nm"><img src="../Images/fd0826e45c009b2e3d6aaa2b65bee074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hVTX7_tkq4dvgIDPWhzZiw.jpeg"/></div></div></figure><h2 id="038b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">对于 Tensorflow 2:</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="168f" class="jt ju hi mw b fi na nb l nc nd">print("Num GPUs Available: ", len(tf.config.list_physical_devices('GPU')))</span></pre><p id="78c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="96dd" class="jt ju hi mw b fi na nb l nc nd">import tensorflow as tf<br/><br/>assert tf.test.is_gpu_available()<br/>assert tf.test.is_built_with_cuda()<!-- --> </span></pre><p id="6948" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">尽情享受！</strong></p><p id="78c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> :) </strong></p><p id="cece" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mi">在 Ubuntu 中检查我的 PyTorch GPU 安装如果你也想测试一下的话(</em> </strong> <a class="ae iu" href="https://i-pamuditha.medium.com/installing-pytorch-with-gpu-support-cuda-in-ubuntu-18-04-complete-guide-edd6d51ee7ab" rel="noopener"> <strong class="ix hj"> <em class="mi">点击这里</em></strong></a><strong class="ix hj"><em class="mi">)</em></strong></p></div></div>    
</body>
</html>