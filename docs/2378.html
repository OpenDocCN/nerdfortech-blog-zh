<html>
<head>
<title>Basics of Javascript Promises</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript承诺的基础</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/basics-of-javascript-promises-e4fee3d98cd5?source=collection_archive---------17-----------------------#2021-05-03">https://medium.com/nerd-for-tech/basics-of-javascript-promises-e4fee3d98cd5?source=collection_archive---------17-----------------------#2021-05-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bccba5ffa933cac537dc6748666bd187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*g5eX6ywFusFGvIWdHgwHxA.gif"/></div></div></figure><h1 id="fdc6" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">定义</strong></h1><p id="345c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">MDN很好地解释了什么是承诺。</p><blockquote class="km kn ko"><p id="4f9e" class="jo jp kp jq b jr kq jt ju jv kr jx jy ks kt kb kc ku kv kf kg kw kx kj kk kl hb bi translated"><code class="du ky kz la lb b"><strong class="jq hj">Promise</strong></code>对象表示异步操作的最终完成(或失败)及其结果值。</p></blockquote><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/43d14b2da9dd59c25d222fb8c0b557c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UsZCZAlQhsv_dvrr.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated"><a class="ae ll" href="https://developer.mozilla.org/" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/</a></figcaption></figure><h1 id="4c71" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">句法</h1><p id="97d0" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">当创建一个新的承诺时，它接受一个<strong class="jq hj">执行函数</strong>作为参数。<strong class="jq hj">执行器函数</strong>接受两个参数。</p><p id="28bd" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz kt kb kc kd kv kf kg kh kx kj kk kl hb bi translated">第一个参数表示应该调用来解析承诺的函数。第二个代表承诺被拒绝时会发生的功能。</p><pre class="ld le lf lg fd lm lb ln lo aw lp bi"><span id="cf95" class="lq ir hi lb b fi lr ls l lt lu">let myPromise = new Promise((resolve, reject) =&gt; {<br/>   //insert condition of myPromise<br/>   if (true) {<br/>      resolve(`Successful`)<br/>   } else {<br/>      reject(`not successful`)<br/>   }<br/>})</span></pre><p id="fc86" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz kt kb kc kd kv kf kg kh kx kj kk kl hb bi translated">如果条件为真，将执行解析功能。如果条件不为真，将采用拒绝方法。</p><h1 id="aa73" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Javascript承诺的状态</h1><p id="cc0b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Javascript Promise对象可以处于三种状态之一:<strong class="jq hj">待定</strong>、<strong class="jq hj">已解决</strong>或<strong class="jq hj">已拒绝</strong>。</p><p id="21cb" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz kt kb kc kd kv kf kg kh kx kj kk kl hb bi translated">当承诺对象尚未就绪时，状态将为<strong class="jq hj">待定</strong>。一旦解决，它可以进入<strong class="jq hj">解决</strong>状态(成功承诺)或<strong class="jq hj">拒绝</strong>状态(不成功承诺)。</p><h1 id="66c6" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">然后呢？</h1><p id="e726" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">如果承诺成功，意味着它进入了<strong class="jq hj"> resolved </strong>状态，我们可以将一个<code class="du ky kz la lb b">.then</code>链接到承诺对象。<code class="du ky kz la lb b">.then()</code>方法将<strong class="jq hj">回调函数</strong>作为参数。除非明确声明，否则<code class="du ky kz la lb b">.then()</code>方法的返回值是一个Promise对象。</p><pre class="ld le lf lg fd lm lb ln lo aw lp bi"><span id="00f2" class="lq ir hi lb b fi lr ls l lt lu">// if myPromise ends up in a resolved state, I can call myPromise.then()</span><span id="6e9b" class="lq ir hi lb b fi lv ls l lt lu">myPromise.then(state =&gt; console.log(`The Promise was ${state}.`)<br/>// This will print `The Promise was Successful.`</span></pre><h1 id="6547" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">接住？</h1><p id="ced8" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">如果<code class="du ky kz la lb b">myPromise</code>最终处于拒绝状态，我们将需要一个<code class="du ky kz la lb b">.catch()</code>方法来处理它。</p><pre class="ld le lf lg fd lm lb ln lo aw lp bi"><span id="4954" class="lq ir hi lb b fi lr ls l lt lu">// if myPromise is in the rejected state, the .then() method would be skipped over and go directly to the .catch() method</span><span id="39ee" class="lq ir hi lb b fi lv ls l lt lu">myPromise.then(state =&gt; {<br/>   console.log(`The Promise was ${state}.`<br/>}).catch(state =&gt; {<br/>   console.log(`The Promise ended up in the catch because it was ${state}.`<br/>})</span><span id="4a12" class="lq ir hi lb b fi lv ls l lt lu">// if myPromise is rejected, this will print `The Promise ended up in the catch because it was not successful.`</span></pre><h1 id="e706" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">多重承诺</h1><p id="4c1d" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">如果要同时运行多个承诺，可以使用<code class="du ky kz la lb b">Promise.all()</code>方法。这个函数接受一组承诺作为参数。返回值是一个承诺(待定或已解决)。</p><pre class="ld le lf lg fd lm lb ln lo aw lp bi"><span id="8656" class="lq ir hi lb b fi lr ls l lt lu">Promise.all([myPromise, myPromiseAgain])<br/>.then( () =&gt; console.log("All Promises are resolved."))</span></pre><p id="9340" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz kt kb kc kd kv kf kg kh kx kj kk kl hb bi translated">如果承诺数组中有任何拒绝，将显示来自最早索引的承诺的拒绝消息。关于<code class="du ky kz la lb b">Promise.all()</code>更深入的文章可以在这里阅读<a class="ae ll" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>