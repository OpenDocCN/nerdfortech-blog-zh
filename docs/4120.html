<html>
<head>
<title>Cinematic Stealth Project — Modular Patrol Waypoints</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">电影隐形项目——模块化巡逻航路点</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/cinematic-stealth-project-modular-patrol-waypoints-9-ac767b49618b?source=collection_archive---------24-----------------------#2021-07-07">https://medium.com/nerd-for-tech/cinematic-stealth-project-modular-patrol-waypoints-9-ac767b49618b?source=collection_archive---------24-----------------------#2021-07-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0eb2" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">是时候分析一下警卫的巡逻模式了！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/058da4e5c211a913b1869fe1b105d460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3vKOWV6jvWW4ZG6Ge3iRA.png"/></div></div></figure><p id="66a5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于电子游戏中的敌人来说，巡逻模式是很常见的，从一个地方移动到另一个地方，寻找玩家。很明显，一个潜行游戏总是会有讨厌的敌人在周围巡逻。</p><p id="12ae" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">所以，我实现了模块化巡逻路点，这将允许我轻松地创建新的巡逻路径和行为。让我给你演示一下这是如何工作的:</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="ca7c" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">场景设置</h1><p id="1d7e" class="pw-post-body-paragraph jj jk hi jl b jm le ij jo jp lf im jr js lg ju jv jw lh jy jz ka li kc kd ke hb bi translated">您将需要一个带有导航网格代理组件的游戏对象，以及各种将充当您的巡逻路点的空游戏对象。这真的是你需要继续下去。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lj"><img src="../Images/0f73d338a589e8457dba862d605462da.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*Uh2GbgNqoDfgRjOO9p5k6A.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">这个守卫将是我将执行巡逻行为的测试对象</figcaption></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="bf14" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">代码设置</h1><p id="1ca7" class="pw-post-body-paragraph jj jk hi jl b jm le ij jo jp lf im jr js lg ju jv jw lh jy jz ka li kc kd ke hb bi translated">创建一个新的脚本，包括<strong class="jl hj"> UnityEngine。AI </strong>库，并声明一个新的<strong class="jl hj"> NavMeshAgent </strong>变量。</p><p id="fbf1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">巡逻行为将需要参考警卫将遵循的每个路点，为此，我创建了一个<strong class="jl hj">列表</strong>变量(使用<strong class="jl hj">系统)。Collections.Generic </strong>)和一个<strong class="jl hj"> int </strong>变量来跟踪当前选择的航路点。然而，这个列表并不包含游戏对象或变换引用，它只接受具有我命名为<strong class="jl hj"> PatrolPointInfo </strong>的特定脚本的游戏对象。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/e82c6ecdbea58655161f9049f22bbe7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_5MBIlVEC9igySK9p9CQg.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">让我们暂时忘记这个脚本。</figcaption></figure><p id="46d1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一旦游戏开始，人工智能应该开始向第一个巡逻点移动。我们还将检查巡视路线点列表是否不为空，以及第一个巡视点参考是否已在检查器中分配。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lp"><img src="../Images/d2141ed359a321cf368dd0e9a7a85d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*cNAKiOWIuT1VpEVZRG8jvQ.png"/></div></figure><p id="a53a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">巡逻行为将通过代理和目的地位置之间的距离小于或等于距离阈值来不断检查代理是否已经到达其目的地。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lq"><img src="../Images/b5523a10134fab8aeeb9fd582d9a82ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o61TND7lYepaGPNVJ7k6tQ.png"/></div></div></figure><p id="fec4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于这个例子，巡逻路径将不是循环的，相反，AI将在到达路径的起点或终点后来回移动。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/bb6c592b5f43c415910b5018011603c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEICATEUUndeNQCLU1SlSA.png"/></div></div></figure><p id="2f03" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">作为奖励，我们应该能够看到我们的路点。在OnDrawGizmos方法中，我们将滚动每个点，并为我们的路点和它们之间的线创建一个球体。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ls"><img src="../Images/c001d3d042de4f4b5cc0b1e5d36646a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HhBN5A2lsOw0PFGFjtDOww.png"/></div></div></figure><p id="df28" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">就是这样！我们有一个很好的模块化巡逻路径，我们可以修改，甚至在运行时！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lt"><img src="../Images/05f7aeaf26bb51e385671f9722b51ff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*Ll9xFOVIvdRXAP8UsYrQ3Q.png"/></div></div></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="72b9" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">PatrolPointInfo脚本呢？</h1><p id="6d9a" class="pw-post-body-paragraph jj jk hi jl b jm le ij jo jp lf im jr js lg ju jv jw lh jy jz ka li kc kd ke hb bi translated">会有一些巡逻点，你希望对它们有更多的控制。也许，你想让代理停在某个点上，或者看向某个特定的方向。</p><p id="2929" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这就是这个脚本发挥作用的地方，帮助你增加巡逻行为的复杂性，同时保持它的模块化。我将添加一个额外的功能，允许我为每个航点指定一个空闲时间，代理将在这段时间内保持不变。</p><p id="5698" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个脚本非常简单，更像是一个数据容器。将此脚本添加到您的路点，并在编辑器中设置等待时间。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lu"><img src="../Images/7671d2b2eae721c3ac27e117c46aaa5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*j2j_kc0la7eTSHR-xvyz1g.png"/></div></figure><p id="f2e2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于我们的主脚本，只需用计时器检查等待时间就足够了，只需最少的努力就可以完成这项工作。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/89f7ec965c1c9bc2d0985ac947457a69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Lzk6shlUZgbBr7-BNyD9g.png"/></div></div></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="be53" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">结果</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lw"><img src="../Images/42a8d7e6ff4e4d3108a732cc63bf054f.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/1*Gr8Wq_ddC6f_5Qo7L5LXZg.gif"/></div></figure></div></div>    
</body>
</html>