<html>
<head>
<title>Rails Rack CORS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">轨道架CORS</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/rails-rack-cors-6c0c7ee438bb?source=collection_archive---------7-----------------------#2021-07-08">https://medium.com/nerd-for-tech/rails-rack-cors-6c0c7ee438bb?source=collection_archive---------7-----------------------#2021-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fd12c6d16a2d270c38d45fa6626fff81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TayTdPm0BeMzBJH3tm4zzg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">来自<a class="ae iu" href="https://www.pexels.com/photo/people-inside-building-3184455/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>的<a class="ae iu" href="https://www.pexels.com/@fauxels?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>拍摄的照片</figcaption></figure><p id="03c5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Rails简化了许多耗时的任务，而这些任务是开发人员过去花费时间和精力去解决的。这些简化的任务之一由机架CORS执行。</p><p id="7783" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">机架CORS处理跨源资源共享(CORS ),以便接受跨源AJAX请求。我怎么知道这个？因为Rails直接在位于config/initializer/cors.rb内自动生成的Rails应用程序文件夹中的CORS . Rb文件中进行注释:</p><blockquote class="jt ju jv"><p id="6c7d" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">#避免从前端应用程序调用API时出现CORS问题。</p><p id="6bd3" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">#处理跨源资源共享(CORS ),以便接受跨源AJAX请求。</p></blockquote><p id="3028" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Rails还通过注释扩展了它的有用支持:</p><blockquote class="jt ju jv"><p id="6792" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">#修改此文件时，请确保重新启动服务器。</p><p id="61db" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">#阅读更多:【https://github.com/cyu/rack-cors T4】</p></blockquote><p id="671a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">建议的Github站点进一步解释了Rack CORS是一个中间件，它为CORS提供了对Rack兼容的web应用程序的支持。我已经陈述了CORS代表什么，但是Rack是什么？Rack是一个网络服务器接口。根据维基百科:</p><blockquote class="jt ju jv"><p id="ad38" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">Rack是web服务器和用Ruby编程语言开发的web应用程序之间的模块化接口。使用Rack，用于web框架和中间件的应用程序编程接口(API)被封装到一个处理HTTP请求和响应的方法调用中。</p></blockquote><p id="fbd0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">简单地说，机架CORS允许机架兼容前端应用程序从您的Rails后端请求信息。您的数据存储在后端，因此当用户点击前端应用程序时，这些点击会向Rails后端发送获取请求，以执行任务和收集数据。这个动作被描述为跨源的，因为请求来自一个Rails后端不熟悉的实体。机架CORS允许这种请求发生，并让您控制谁可以提出请求以及可以提出什么类型的请求。</p><p id="e6c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，您可以允许请求查看姓名列表，但不允许请求将姓名添加到列表中。还可以使用星号(*)允许来自任何来源的对任何资源的请求。</p><p id="fb10" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要在Rails后端实现机架CORS，请在Gemfile中取消注释或添加以下内容:</p><p id="b0c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">宝石'架-cors' </strong></p><p id="a351" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行软件包更新来安装这个gem。然后在您的cors.rb文件中，取消对cors中间件的注释，如果您希望允许所有请求，请确保origins和resource带有星号:</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/473b199d80b27f3040d817ea017b9a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xCeR92prnxoPXfUmf5elHA.png"/></div></div></figure><p id="58ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样！现在可以向Rails后端发出获取请求，给用户一个完整的交互体验。</p><p id="5dc2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，当您设计和构建Rails后端API时，请记住您的用户，并设置机架CORS来反映他们将如何使用您的数据或与您的数据交互。</p><p id="b6e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">机架上的文档可在以下位置找到:<br/><a class="ae iu" href="https://guides.rubyonrails.org/rails_on_rack.html" rel="noopener ugc nofollow" target="_blank">https://guides.rubyonrails.org/rails_on_rack.html</a></p><p id="e857" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于CORS的文件可以在https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS<br/><a class="ae iu" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank"/>找到</p></div></div>    
</body>
</html>