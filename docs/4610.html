<html>
<head>
<title>Make ToDo List Application using React Native Expo for IOS and Android device</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 React Native Expo 为 IOS 和 Android 设备制作待办事项列表应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/make-todo-list-application-using-react-native-expo-for-ios-and-android-device-1de436168f86?source=collection_archive---------3-----------------------#2021-07-29">https://medium.com/nerd-for-tech/make-todo-list-application-using-react-native-expo-for-ios-and-android-device-1de436168f86?source=collection_archive---------3-----------------------#2021-07-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c5d0" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用 react native Expo 的 CRUD 操作</h2></div><p id="7fb6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您好，React 原生开发者..！！</p><p id="96bd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您经常想知道如何创建一个遵循所有 CRUD 操作(即创建、读取、更新、删除)的应用程序。制作一个遵循 CRUD 操作的应用程序是非常重要的。因为所有的应用程序都遵循这些 CRUD 规则。因此，让我们使用 React Native Expo 制作一个遵循所有 CRUD 操作的移动应用程序。抓住你的座位，喝杯咖啡，让我们开始吧。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/c3b09c82bfae7d17942bb7673914060b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aFTPlbS0figWWe3G"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">在<a class="ae kj" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kj" href="https://unsplash.com/@euwars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法扎德·纳齐菲</a>拍摄的照片</figcaption></figure><h1 id="1601" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">设置和安装</h1><blockquote class="lc ld le"><p id="3fbd" class="ix iy lf iz b ja jb ij jc jd je im jf lg jh ji jj lh jl jm jn li jp jq jr js hb bi translated">1.制作一个目录并导航到它<br/> 2。在这个目录中打开终端或命令提示符，运行命令:expo init ToDo <br/> 3。选择空白模板并继续下载<br/> 4。导航至“待办事项”文件夹<br/> 5。使用命令安装一个包:NPM install react-native-swipe-list-view<br/>6。使用命令安装另一个包:NPM install native-base @ 2 . 13 . 0<br/>7。使用以下命令安装另一个软件包:npm install uuid-random</p></blockquote><p id="0a3f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完成以上所有步骤后，我们就完成了安装部分。现在，在您最喜欢的文本编辑器中打开这个项目，并开始编码。</p><h1 id="ad1a" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">React 本机 Expo 中待办事项列表的代码</h1><p id="1892" class="pw-post-body-paragraph ix iy hi iz b ja lj ij jc jd lk im jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">在父目录中创建一个文件，并将其命名为“ToDoList.js”。</p><h2 id="c9ae" class="lo kl hi bd km lp lq lr kq ls lt lu ku jg lv lw kw jk lx ly ky jo lz ma la mb bi translated">ToDoList.js</h2><pre class="ju jv jw jx fd mc md me mf aw mg bi"><span id="02f8" class="lo kl hi md b fi mh mi l mj mk">import React, { useContext, useState } from 'react'<br/>import { TodosContext } from './App'<br/>import { SwipeListView } from 'react-native-swipe-list-view';<br/>import { Header, Item, Input } from 'native-base';<br/>import { StyleSheet, TouchableOpacity, View, Text, Button } from 'react-native';<br/>import uuid from 'uuid-random';</span><span id="2795" class="lo kl hi md b fi ml mi l mj mk">export default function ToDoList() {<br/>    // receive state and dispatch from App.js<br/>    const {state, dispatch} = useContext(TodosContext); <br/>    const [todoText, setTodoText] = useState("")<br/>    const [editMode, setEditMode] = useState(false)    <br/>    const [editTodo, setEditTodo] = useState(null)    <br/>    const buttonTitle = editMode ? "Edit" : "Add";</span><span id="f17d" class="lo kl hi md b fi ml mi l mj mk">const handleSubmit = () =&gt;{<br/>        if(editMode){            <br/>            dispatch({type: 'edit', payload:{...editTodo,text:todoText}})<br/>            setEditMode(false)<br/>            setEditTodo(null)<br/>        }<br/>        else{<br/>            const newToDo = {id: uuid(), text: todoText};<br/>            dispatch({type: 'add', payload: newToDo})<br/>        }              <br/>        setTodoText('') // to clear field after adding     <br/>    }</span><span id="e307" class="lo kl hi md b fi ml mi l mj mk">const renderItem = data =&gt; (<br/>        &lt;View style={styles.rowFront}&gt;<br/>            &lt;Text&gt;{data.item.text}&lt;/Text&gt;<br/>        &lt;/View&gt;<br/>    );</span><span id="8de3" class="lo kl hi md b fi ml mi l mj mk">const renderHiddenItem = (data, rowMap) =&gt; (<br/>        &lt;View style={styles.rowBack}&gt;<br/>            &lt;TouchableOpacity onPress={() =&gt; editRow(data.item, rowMap)}&gt;<br/>                &lt;Text&gt;Edit&lt;/Text&gt;<br/>            &lt;/TouchableOpacity&gt;  <br/>            &lt;TouchableOpacity<br/>                style={[styles.backRightBtn]}<br/>                onPress={() =&gt; deleteRow(data.item)}                <br/>            &gt;<br/>                &lt;Text style={{color: '#FFF'}}&gt;Delete&lt;/Text&gt;<br/>            &lt;/TouchableOpacity&gt;<br/>        &lt;/View&gt;<br/>    );</span><span id="a79d" class="lo kl hi md b fi ml mi l mj mk">const deleteRow = (todo) =&gt; {<br/>        dispatch({type:'delete',payload:todo});<br/>    };</span><span id="bc52" class="lo kl hi md b fi ml mi l mj mk">const editRow = (todo,rowMap) =&gt; {        <br/>        setTodoText(todo.text)<br/>        setEditMode(true)<br/>        setEditTodo(todo)<br/>        if (rowMap[todo.id]) {<br/>            rowMap[todo.id].closeRow();<br/>        }        <br/>    };</span><span id="0ed8" class="lo kl hi md b fi ml mi l mj mk">return (<br/>        &lt;View&gt; <br/>            &lt;Header searchBar&gt;<br/>                &lt;Item&gt;                <br/>                    &lt;Input <br/>                        placeholder="Enter Todo" <br/>                        onChangeText={text =&gt; setTodoText(text)} <br/>                        value={todoText} <br/>                    /&gt;                <br/>                &lt;/Item&gt;<br/>                &lt;Button transparent onPress={handleSubmit} title={buttonTitle} /&gt;<br/>                                     <br/>            &lt;/Header&gt;</span><span id="e01f" class="lo kl hi md b fi ml mi l mj mk">&lt;SwipeListView<br/>                data={state.todos}<br/>                renderItem={renderItem}<br/>                renderHiddenItem={renderHiddenItem}<br/>                leftOpenValue={75}<br/>                rightOpenValue={-75}<br/>            /&gt;          <br/>        &lt;/View&gt;<br/>    );<br/>}</span><span id="33fa" class="lo kl hi md b fi ml mi l mj mk">const styles = StyleSheet.create({<br/>    rowFront: {<br/>        alignItems: 'center',<br/>        backgroundColor: '#FFF',<br/>        borderBottomWidth: 0.25,<br/>        justifyContent: 'center',<br/>        height: 50,<br/>    },<br/>    rowBack: {<br/>        alignItems: 'center',<br/>        backgroundColor: '#DDD',<br/>        flex: 1,<br/>        flexDirection: 'row',<br/>        justifyContent: 'space-between',<br/>        paddingLeft: 15,<br/>    },<br/>    backRightBtn: {<br/>        alignItems: 'center',<br/>        bottom: 0,<br/>        justifyContent: 'center',<br/>        position: 'absolute',<br/>        top: 0,<br/>        width: 75,<br/>        backgroundColor: 'red',<br/>        right: 0<br/>    }<br/>});</span></pre><p id="540c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们首先从 javascript 库中导入所有需要的依赖项。之后，在 ToDoList 函数中，我们使用 react hooks 概念。为了添加和编辑待办事项，我们使用了钩子。因为它改变了状态。它从初始状态变化到当前状态(我们所改变的)。</p><p id="513c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们使用与编辑和添加 todo 相同的输入空间。所以，在“handleSubmit”箭头函数中，我们设置了两个条件。一种是，如果状态处于编辑模式，则采用初始状态并用当前状态替换它们。另一个是如果状态处于添加模式，这意味着用户然后添加待办事项，用新 id 分配待办事项，并添加待办事项。</p><p id="2e36" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们正在制作，swipeable 编辑和删除功能。那些东西被藏起来了。为了渲染它，我们使用了箭头函数，对于 UI 部分，我们使用了一些样式。为了呈现 todo 项，我们使用了 arrow 函数，并通过一些样式将它们返回到文本字段中。</p><p id="b042" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">删除和编辑箭头功能也是如此，我们将它与 App.js 中的 reducer 连接，后者处理状态并呈现当前状态。</p><p id="70c8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们选择简单的 UI，因此在 UI 部分，在标题搜索栏中我们设置输入字段。在它的右边，我们设置了一个会相应改变的按钮，如果用户编辑了什么，那么按钮文本将会是 edit，如果用户添加了什么，那么按钮文本将会显示 add。</p><p id="9628" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这下面，我们添加了待办事项列表。这个列表是可滑动的，这意味着你可以向左或向右滑动它们。当你向左滑动时，你会看到删除按钮，当你向右滑动列表时，你会看到编辑按钮。</p><p id="514b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">剩下的部分就是造型了。你可以根据你的想象来改变它们。</p><h2 id="4075" class="lo kl hi bd km lp lq lr kq ls lt lu ku jg lv lw kw jk lx ly ky jo lz ma la mb bi translated">App.js</h2><pre class="ju jv jw jx fd mc md me mf aw mg bi"><span id="30bf" class="lo kl hi md b fi mh mi l mj mk">import React, { useReducer } from 'react';<br/>import ToDoList from './ToDoList';</span><span id="4b93" class="lo kl hi md b fi ml mi l mj mk">const todosInitialState = { <br/>  todos:[{ id:'1', text: "finishing writing hooks chapter"},<br/>    { id:'2', text: "play with kids"},<br/>    { id:'3', text: "read books"}<br/>  ]<br/>};</span><span id="8301" class="lo kl hi md b fi ml mi l mj mk">export const TodosContext = React.createContext()</span><span id="1e58" class="lo kl hi md b fi ml mi l mj mk">export default function App() {</span><span id="460a" class="lo kl hi md b fi ml mi l mj mk">const [state, dispatch] = useReducer(todosReducer,todosInitialState)</span><span id="41ce" class="lo kl hi md b fi ml mi l mj mk">return (<br/>    &lt;TodosContext.Provider value={{state,dispatch}}&gt;      <br/>      &lt;ToDoList /&gt;<br/>    &lt;/TodosContext.Provider&gt;    <br/>  )<br/>}</span><span id="ac95" class="lo kl hi md b fi ml mi l mj mk">function todosReducer(state, action){ <br/>  switch(action.type){ <br/>    case 'add':      <br/>      // add new todo onto array<br/>      const addedToDos = [...state.todos,action.payload]<br/>      // spread our state and assign todos<br/>      return {...state,todos:addedToDos} <br/>    case 'edit':   <br/>      const updatedToDo = {...action.payload} <br/>      const updatedToDoIndex = state.todos.findIndex(t =&gt; t.id === action.payload.id)<br/>      const updatedToDos = [<br/>        ...state.todos.slice(0,updatedToDoIndex),<br/>        updatedToDo,<br/>        ...state.todos.slice(updatedToDoIndex + 1)<br/>      ];<br/>      return {...state, todos: updatedToDos}      <br/>    case 'delete':<br/>      const filteredTodoState = state.todos.filter( todo =&gt; todo.id !== action.payload.id)<br/>      return {...state, todos: filteredTodoState}<br/>    default:<br/>      return todosInitialState<br/>  }<br/>}</span></pre><p id="3e00" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在 App.js 文件中导入“ToDoList.js”。出于测试目的，我们设置了初始 todos。可以删除，也可以编辑。之后，我们在主函数中调度 Reducer，因为 Reducer 处理应用程序的全局状态变化。我们将初始状态设置为 todosReducer。</p><p id="c6ff" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在在 App 函数的返回中，我们只是返回了 ToDoList，它在上下文标签里面。React 上下文允许我们与组件树中需要这些值的任何组件共享值。并且提供者将该值提供给子组件。</p><p id="e04e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在“todosReducer”功能中，添加了四种情况。我们在“add”的情况下添加，用现有的 todos(“…”spread 操作符)创建一个新数组，并向它添加一个 newToDo。这里我们不修改状态，而是返回新的状态。为了进行编辑，我们首先找到元素的索引，然后为更新后的元素创建一个新的数组。</p><p id="9fa9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，使用以下命令在终端中运行 expo 应用程序:npm start</p><p id="5b7d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从您的设备上扫描 QR 码。这个待办事项列表可以在 Android 和 IOS 设备上运行。查看项目运行情况。你会看到这样的东西。</p><div class="ju jv jw jx fd ab cb"><figure class="mm jy mn mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><img src="../Images/c02a98c4b4fb2ee6998e33eb98e5a625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*fJNz-_9udYuCzKkdaTnc4Q.jpeg"/></div></figure><figure class="mm jy mn mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><img src="../Images/b2a42578a8af462725cd5e5f8061d34d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ehDbLCQFopFiJAPwG5Fo_g.jpeg"/></div></figure></div><div class="ab cb"><figure class="mm jy mn mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><img src="../Images/304c7ec9d31ae0cba206736667a11c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Wul9Ni17d4mnm-lqHKPIgg.jpeg"/></div></figure><figure class="mm jy mn mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><img src="../Images/09e6fcd473139c8799f235d7ea3ad923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*uRgMd4WWr_c_BlFe7xdb9g.jpeg"/></div></figure></div><p id="e95c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你面临任何困难，请在评论区告诉我。这个项目的 Github 代码是<a class="ae kj" href="https://github.com/imrohit007/To-Do-List-in-React-Native-Expo" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><p id="df56" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读！如果这篇文章对你有帮助，那就鼓掌直到你的手流血。</p></div></div>    
</body>
</html>