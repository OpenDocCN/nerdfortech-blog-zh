<html>
<head>
<title>How to set up Cloud Composer, Cloud SQL, and Google Cloud SDK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设置Cloud Composer、Cloud SQL和Google Cloud SDK</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/setting-up-cloud-composer-cloud-sql-and-google-cloud-sdk-22f02bc0d1cd?source=collection_archive---------10-----------------------#2021-03-13">https://medium.com/nerd-for-tech/setting-up-cloud-composer-cloud-sql-and-google-cloud-sdk-22f02bc0d1cd?source=collection_archive---------10-----------------------#2021-03-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/80b06ed16e0fb000be0e4157136484ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cha_-zpQh9_hR5u3"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">拉杰什瓦尔·巴楚在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="b46c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是设置Google服务帐户、Cloud Composer、Cloud SQL和Google Cloud SDK的分步指南。本指南是将Cloud Composer连接到云SQL的更大指南的一部分:</p><div class="jt ju ez fb jv jw"><a href="https://dorlabor1.medium.com/connecting-gcp-composer-to-cloud-sql-via-proxy-305743a388a" rel="noopener follow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">通过代理将GCP合成器连接到云SQL</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">这是一个非常详细的指南，一步一步地介绍了如何将从Kubernetes集群运行的GCP Composer连接到GCP SQL…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">dorlabor1.medium.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk io jw"/></div></div></a></div><p id="d838" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是一个比理论更实用的指南。因此，如果您希望了解这些技术的小细节和架构，您可以随时查看每个部分中的链接。</p><h1 id="1577" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">这本指南适合谁？</h1><p id="9a95" class="pw-post-body-paragraph iv iw hi ix b iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">如果您是第一次使用Google Cloud Platform，如果您希望将Cloud Composer连接到Cloud SQL，如果您想要相关文档的参考，或者只是希望以快速高效的方式设置这些环境，那么本指南就是为您准备的。</p><h1 id="b486" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">我们开始吧！</h1><div class="jt ju ez fb jv jw"><a href="https://cloud.google.com/" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">云计算服务|谷歌云</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">新客户可以获得300美元的免费积分，在谷歌云上消费。所有顾客都可以免费使用20多种产品。看…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">cloud.google.com</p></div></div><div class="kf l"><div class="lo l kh ki kj kf kk io jw"/></div></div></a></div><p id="85a3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">若要登录，您必须添加免费试用的付款方式。其中包括300美元的信用额度，可在未来90天内使用。如果您用完了点数，不要担心，除非您打开自动计费，否则不会向您收费。</p><p id="4829" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，请登录您的帐户。</p><p id="aadf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">选择“转到控制台”按钮-&gt;“导航菜单”并按下:</p><ul class=""><li id="aa6c" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">我是管理员。</li><li id="4e62" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">API和服务。</li><li id="deb3" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">Kubernetes发动机。</li><li id="28d7" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">计算引擎。</li><li id="4023" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">存储。</li><li id="17ba" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">SQL。</li><li id="30c1" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">作曲家。</li></ul><p id="fcfb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果这是你第一次建立连接，我建议你开一个新账户，这样你就可以选择是否在这项服务上花钱。</p><h1 id="8791" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">创建服务帐户—云IAM和管理</h1><ol class=""><li id="93e3" class="lp lq hi ix b iy lj jc lk jg md jk me jo mf js mg lv lw lx bi translated">转到IAM &amp; Admin。</li></ol><ul class=""><li id="2708" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">转到服务帐户。</li></ul><figure class="mi mj mk ml fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/05bc4f07ccec890362ceec9e318ccffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_7sHlZBbnLjEQtuWh3JLCA.png"/></div></div></figure><p id="78cc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.创建具有“编辑”权限的服务帐户:</p><ul class=""><li id="f2c1" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">在阶段2 -&gt; "选择一个角色"-&gt; "基本"-&gt; "编辑"。</li></ul><p id="49c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者，您也可以:</p><ul class=""><li id="4c4b" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">“添加另一个角色”-&gt;“选择一个角色”-&gt;“云SQL”-&gt;“云SQL编辑器”。</li></ul><p id="3bcc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在任何缺少权限的情况下，请联系您的经理\admin，告诉他\她为您提供继续操作的特定权限，并向他\她提供红色矩形内的信息。</p><p id="6614" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如:</p><figure class="mi mj mk ml fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/088078d6c03da95d8b667ca1091cea6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MNL1lVgQcUDBngXgvC_puA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">这不是我们的情况，但它可以给你一个我所说的感觉。</figcaption></figure><p id="15c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.请注意“电子邮件”和“姓名”的详细信息:</p><ul class=""><li id="ac64" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">转到IAM &amp; Admin--&gt;“服务帐户”。</li><li id="eec1" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated"><strong class="ix hj">注意“邮件”和“姓名”的细节。</strong></li></ul><p id="3d77" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们到了😃。</p><h1 id="cbbc" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">云作曲家</h1><p id="d2e5" class="pw-post-body-paragraph iv iw hi ix b iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">1.创建Cloud Composer环境:</p><div class="jt ju ez fb jv jw"><a href="https://cloud.google.com/composer/docs/how-to/managing/creating?hl=en" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">创建环境| Cloud Composer | Google云</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">本页说明了如何创建Cloud Composer环境并在…期间覆盖默认气流环境设置</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">cloud.google.com</p></div></div><div class="kf l"><div class="mn l kh ki kj kf kk io jw"/></div></div></a></div><ul class=""><li id="f7bb" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">进入“导航菜单”-&gt;“作曲”。</li><li id="9451" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">单击Cloud Composer API下的启用。</li><li id="d782" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">创造环境。</li><li id="5766" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">注意你选择的地点、区域和名字。</li><li id="460d" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">指定“名称”-&gt;“位置”-&gt;“节点计数”= 3 -&gt;“区域”-&gt;“机器类型= " n1-标准-1-&gt;“服务帐户”=选择您刚刚创建的帐户。-&gt;“镜像版”-&gt;“Python版”-&gt;“创建”。</li><li id="c548" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">系统创建您的环境大约需要25分钟。</li><li id="5607" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">同时，安装谷歌云SDK。</li><li id="dbe6" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">如果你已经有一个作曲家进入“导航菜单”-&gt;“作曲家”-&gt;点击你的作曲家的名字-&gt;“环境配置”-&gt; <strong class="ix hj">注意位置，区域，名称和服务帐户。</strong></li><li id="b18f" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">请确保您的服务帐户具有您需要的角色(如前所述),并且您已被添加到其中。</li></ul><h1 id="e818" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">安装Google Cloud SDK</h1><div class="jt ju ez fb jv jw"><a href="https://cloud.google.com/sdk/docs/install" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">安装Google Cloud SDK | Cloud SDK文档</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">" type": "thumb-down "，" id ":"难以理解"，" label ":"难以理解" }，{ "type": "thumb-down "，" id"…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">cloud.google.com</p></div></div><div class="kf l"><div class="mo l kh ki kj kf kk io jw"/></div></div></a></div><ul class=""><li id="a790" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">下载<a class="ae iu" href="https://dl.google.com/dl/cloudsdk/channels/rapid/GoogleCloudSDKInstaller.exe" rel="noopener ugc nofollow" target="_blank">云SDK安装程序</a>。</li><li id="45f6" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">启动安装程序并按照提示进行操作。</li><li id="d3ed" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">云SDK需要Python支持的版本有Python 3(首选，3.5到3.8)和Python 2 (2.7.9或更高)。</li></ul><p id="c56e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装完成后，安装程序会显示几个选项。确保选择了以下选项:</p><ul class=""><li id="9aec" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated"><strong class="ix hj">启动Google Cloud SDK Shell。</strong></li><li id="b083" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">运行gcloud init。</li><li id="3b32" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">转到代码编辑器(如Visual Studio代码)中的终端，运行:</li></ul><pre class="mi mj mk ml fd mp mq mr ms aw mt bi"><span id="0481" class="mu km hi mq b fi mv mw l mx my">gcloud init</span></pre><ul class=""><li id="9c5c" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">创建新配置-&gt;选择名称-&gt;选择帐户或“使用新帐户登录”(应该会打开一个网页供您选择电子邮件)-&gt;选择您的电子邮件帐户(网页)-&gt;确认(网页)-&gt;选择云项目(终端)-&gt;“配置默认计算区域和分区”(<em class="mz"> y </em> )- &gt;我建议您选择与composer zone相同的区域。</li></ul><p id="12e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行:</p><pre class="mi mj mk ml fd mp mq mr ms aw mt bi"><span id="4bb7" class="mu km hi mq b fi mv mw l mx my">gcloud components install kubectl</span></pre><div class="jt ju ez fb jv jw"><a href="https://cloud.google.com/sdk/docs/components" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">管理SDK组件|云SDK文档| Google云</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">" type": "thumb-down "，" id ":"难以理解"，" label ":"难以理解" }，{ "type": "thumb-down "，" id"…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">cloud.google.com</p></div></div><div class="kf l"><div class="na l kh ki kj kf kk io jw"/></div></div></a></div><p id="2e19" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您的Google Cloud SDK已经在使用中，请运行以下命令来检查是否有“可用更新”:</p><pre class="mi mj mk ml fd mp mq mr ms aw mt bi"><span id="bdea" class="mu km hi mq b fi mv mw l mx my">gcloud components list</span></pre><p id="01ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后<em class="mz"> : </em></p><pre class="mi mj mk ml fd mp mq mr ms aw mt bi"><span id="63c7" class="mu km hi mq b fi mv mw l mx my">gcloud components update (it will update everything all at once)</span></pre><p id="5749" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者:</p><pre class="mi mj mk ml fd mp mq mr ms aw mt bi"><span id="6c7b" class="mu km hi mq b fi mv mw l mx my">run gcloud components remove kubectl</span></pre><p id="5e6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并且:</p><pre class="mi mj mk ml fd mp mq mr ms aw mt bi"><span id="3725" class="mu km hi mq b fi mv mw l mx my">gcloud components install kubectl</span></pre><p id="f522" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">继续创建云SQL instance✌.</p><h1 id="fd9b" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">创建云SQL实例</h1><p id="f0e5" class="pw-post-body-paragraph iv iw hi ix b iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">1.在云SQL中创建数据库:</p><ul class=""><li id="30eb" class="lp lq hi ix b iy iz jc jd jg lr jk ls jo lt js lu lv lw lx bi translated">进入“导航菜单”-&gt;“SQL”。</li><li id="b071" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">创建实例。</li><li id="4aea" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">选择PostgreSQL。</li><li id="22be" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">填写“实例ID”-&gt;“密码”-&gt;“数据库版本”= PostgreSQL 13 -&gt;“地区”-&gt;“创建实例”。</li><li id="095c" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">转到SQL下主实例中的“概述”-&gt;“连接到此实例”-&gt; <strong class="ix hj">注意“公共IP地址”和“连接名称”的详细信息。</strong></li><li id="4d01" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">转到主实例-&gt; <strong class="ix hj">下的“用户”，记下您在创建实例中创建的“用户名”和密码(在选择PostgreSQL之后)。</strong></li><li id="a724" class="lp lq hi ix b iy ly jc lz jg ma jk mb jo mc js lu lv lw lx bi translated">转到主实例-&gt; <strong class="ix hj">下的“数据库”，注意“名称”的详细信息。</strong></li></ul><p id="6833" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，如果需要，您可以继续将Cloud Composer连接到云SQL。</p><div class="jt ju ez fb jv jw"><a href="https://dorlabor1.medium.com/connecting-gcp-composer-to-cloud-sql-via-proxy-305743a388a" rel="noopener follow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">通过代理将GCP合成器连接到云SQL</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">这是一个非常详细的指南，一步一步地介绍了如何将从Kubernetes集群运行的GCP Composer连接到GCP SQL…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">dorlabor1.medium.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk io jw"/></div></div></a></div><p id="1679" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请继续关注更新和您可能需要的任何其他信息。请对流程中出现的任何问题发表评论。</p><p id="2945" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">祝你好运！</p></div></div>    
</body>
</html>