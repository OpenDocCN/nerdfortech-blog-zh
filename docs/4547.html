<html>
<head>
<title>Triggering a finished cutscene | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">触发完成的过场动画| Unity</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/triggering-a-finished-cutscene-unity-42007f1b4ce4?source=collection_archive---------0-----------------------#2021-07-26">https://medium.com/nerd-for-tech/triggering-a-finished-cutscene-unity-42007f1b4ce4?source=collection_archive---------0-----------------------#2021-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="6ef2" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何在Unity中触发和返回已完成的过场动画的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/5ab87b83fba0e561a22b9168feb58b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WhchQMl1LWnQjSQqKV7XCQ.gif"/></div></div></figure><p id="d905" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在Unity游戏中实现一个完成的过场动画。</p><p id="0ad0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我介绍了<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-security-cameras-unity-691fc591b67b">如何在我们的游戏中用Unity </a>实现安全摄像头。现在，是时候实现一个系统，在游戏过程中触发一个完成的过场动画，并在Unity中返回。</p><h1 id="435d" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">过场动画</h1><p id="1afd" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">如果你一直在关注<a class="ae ko" href="https://fas444.medium.com/" rel="noopener">我最近的帖子</a>，你会记得我们在下一个帖子中创作的过场动画:</p><div class="lm ln ez fb lo lp"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/composing-a-cutscene-in-unity-330bc8b99d4c"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">在Unity中合成过场动画</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">关于在Unity中构建过场动画的快速指南</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">medium.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md jq lp"/></div></div></a></div><p id="475f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">好了，过场动画已经完成，相应的动画和激活轨道与Cinemachine摄像机同步:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es me"><img src="../Images/2312f791793283b608156b5fd50407a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g0c1E6Ql1Y3n-UTM243Ypg.png"/></div></div></figure><p id="b9c5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们的过场动画应该在玩家接近隔壁桌睡着的警卫时触发:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mf"><img src="../Images/577c8f703b9126839e83b9506e915ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v5MKrumHh7SoHsvopMytSw.png"/></div></div></figure><h1 id="25ec" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">触发过场动画</h1><p id="4def" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">因此，为了触发过场动画，让我们创建一个空的游戏对象，它带有一个可以检测玩家何时进入该区域的碰撞器:</p><div class="jh ji jj jk fd ab cb"><figure class="mg jl mh mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/b0eef2d5216750b8ef17c6a14719634c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*XBGINE_5N5uE2xuRamaA6g.png"/></div></figure><figure class="mg jl mm mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/90080737accd9981fe75a0851de5e604.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*Oehm6qCpflV92QQa2cyg6w.png"/></div></figure></div><p id="a09e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">那么，让我们:</p><ul class=""><li id="4a9f" class="mn mo hi ju b jv jw jy jz kb mp kf mq kj mr kn ms mt mu mv bi translated">确保碰撞器的<em class="mw"> </em> <strong class="ju hs"> <em class="mw">被触发</em> </strong>属性启用。</li><li id="99da" class="mn mo hi ju b jv mx jy my kb mz kf na kj nb kn ms mt mu mv bi translated">附加一个新的刚体，并确保<strong class="ju hs"> <em class="mw">使用重力</em> </strong>属性被禁用。</li><li id="30fd" class="mn mo hi ju b jv mx jy my kb mz kf na kj nb kn ms mt mu mv bi translated">创建并附加一个新的脚本来控制带碰撞器的空游戏对象和玩家之间的触发交互。</li></ul><div class="jh ji jj jk fd ab cb"><figure class="mg jl nc mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/117807055165fae15374c009cba216fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/1*SqFPzeckmQqOPku9NnfrqQ.gif"/></div></figure><figure class="mg jl nd mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/31c87f40f7c48ea5511e21a13106c7a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/1*Npzc_AlG3xcHfSjUqV-cZQ.gif"/></div></figure><figure class="mg jl ne mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/f40ebc6e78261ffbe26dd28c41c0af0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/1*Oz2Emy6NmPOWdLEThUXDCA.gif"/></div></figure></div><p id="68a2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们打开新的脚本并创建一个新的私有变量来存储对过场动画游戏对象(包含可播放的director组件)的引用。不要忘记使用<strong class="ju hs">【serialize field】</strong>将游戏对象拖到检查器中:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nf"><img src="../Images/8a5c6a82d9b06b9e65d8a585b1712311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*r1FVjNXtVm3-9lEQde5CgQ.png"/></div></figure><p id="fad9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了检测玩家的碰撞器和空游戏对象之间的碰撞，让我们使用<strong class="ju hs"> OnTriggerEnter </strong>方法，并使用<strong class="ju hs"> CompareTag </strong>方法检查来自另一个碰撞器的标签是否属于玩家。如果是这样的话，让我们启用各自的过场动画游戏对象:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ng"><img src="../Images/f840e193199c30e7b9fabf278e49bcb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*i03_kdNGuCfo21G8z4Rl7Q.png"/></div></figure><p id="3a1b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，让我们通过检查器将包含过场动画的游戏对象和可播放的导演拖到各自的位置:</p><div class="jh ji jj jk fd ab cb"><figure class="mg jl nh mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/39ae942b904dd2fb0b6e6905726ecc69.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/1*cmjCoXz0rx8gWbjKN4wKKA.gif"/></div></figure><figure class="mg jl ni mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/b921f8e67a08d2e505dadd8851946242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/1*tk2cMySWWQROLU5V_5-6Eg.gif"/></div></figure></div><p id="7d47" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们用Unity运行游戏，我们将能够在玩家进入碰撞器定义的区域时触发过场动画。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/b8c959c986e9117fc5c07171a308743e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JVv9hRuSzN1JZ2-Ru1tXlA.gif"/></div></div></figure><p id="912c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">但是还有一个问题，当过场动画结束时，我们仍然在看最后一帧。</p><h1 id="bfa3" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">从过场动画回来</h1><p id="f5ac" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">因此，为了在过场动画结束后返回游戏，让我们首先通过将相应的动画和激活轨迹组织到一个跟踪组中来摆脱混乱:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es me"><img src="../Images/035876a2beac4657b8f820104675e043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ITd3Hz82XE53HXRMFu8tCg.gif"/></div></div></figure><p id="d603" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">幸运的是，在时间线中有一个选项可以实现我们问题的解决方案:时间线信号。</p><p id="cfec" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">时间轴信号提供了一种在时间轴和外部系统之间建立通信的方式。当过场动画结束时，我们可以利用时间线信号根据我们的要求做出反应，而不是使用自定义脚本来处理时间线。</p><p id="2d1b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，要开始使用时间线信号，让我们单击带有标记的按钮来提示时间线标记行。然后，让我们右键单击该行并选择添加一个新的信号发射器。添加后，让我们将信号发射器拖到过场动画的最后一帧(因为过场动画结束时，它将禁用过场动画):</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es me"><img src="../Images/3d58e23f8bff24a8224e82c1a0ee14f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yHT-mqN8S5td17obBoH4fA.gif"/></div></div></figure><p id="f0ce" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">时间轴信号需要三部分才能工作:</p><ul class=""><li id="39c2" class="mn mo hi ju b jv jw jy jz kb mp kf mq kj mr kn ms mt mu mv bi translated">信号发射器</li></ul><p id="d77b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们已经在时间线中创建了它，它应该包含对信号资产的引用。</p><ul class=""><li id="7955" class="mn mo hi ju b jv jw jy jz kb mp kf mq kj mr kn ms mt mu mv bi translated">信号资产</li></ul><p id="41c8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">其将信号发射器和信号接收器相关联，并将作为时间线内的事件工作。</p><ul class=""><li id="2280" class="mn mo hi ju b jv jw jy jz kb mp kf mq kj mr kn ms mt mu mv bi translated">信号接收器</li></ul><p id="3f1e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">它将包含将被链接到信号资产的反应列表。</p><p id="e6ba" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，让我们单击信号发射器，并使用检查器中的“下一步”按钮创建一个新的信号资源:</p><div class="jh ji jj jk fd ab cb"><figure class="mg jl nj mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/de963fe8ea712752637d67e2ba583e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/1*FDgIbi4gcHq908JxZiibYg.gif"/></div></figure><figure class="mg jl nk mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/1c5576d2865edaf4e50c8e78923e0ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/1*jZns-ivyUSD05FxKIuAYxQ.gif"/></div></figure></div><p id="34ad" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">创建信号资产后，让我们使用检查器中的按钮创建相应的信号接收器。信号接收器将在游戏对象中用过场动画导演来创建。</p><p id="804d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，为了在过场动画结束后返回游戏，让我们选择<strong class="ju hs"> SetActive </strong>方法作为信号接收器的反应，并在信号发出时禁用相应的过场动画游戏对象:</p><div class="jh ji jj jk fd ab cb"><figure class="mg jl nl mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/bc700280eccfb324d378c3c644de8a39.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/1*xWLXdyuEUd5PXMyTjLb0zQ.gif"/></div></figure><figure class="mg jl nm mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/71c0c4fd175f6e33f290a6dcca1b5b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/1*LXjdyg0UGB7vNFyeKTHMDw.gif"/></div></figure></div><p id="8108" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们选择包含过场动画的游戏对象，我们将能够在检查器中看到信号接收器组件:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nn"><img src="../Images/38917bcacf452d48a1dc6a784c70a41b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lTU0ohrDEcFOyd7-PMNdyg.gif"/></div></div></figure><p id="6fd1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果您想了解更多关于时间轴信号的信息，您可以访问Unity博客:</p><div class="lm ln ez fb lo lp"><a href="https://blog.unity.com/technology/how-to-use-timeline-signals" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">如何使用时间轴信号| Unity博客</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">自2017年Timeline推出以来，我们知道您一直在耐心地等待一种发送事件的方式。嗯，等等…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">blog.unity.com</p></div></div><div class="ly l"><div class="no l ma mb mc ly md jq lp"/></div></div></a></div><p id="912e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们用Unity运行游戏并触发过场动画，我们将看到当过场动画结束时，信号被发出，过场动画游戏对象被禁用，我们返回游戏:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/c9613e55a93c6186a9587979f1f37b87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yPswIOD-vd5gBteDxGmDsw.gif"/></div></div></figure><p id="bf2d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们用Unity触发并从一个完成的过场动画中返回！:d .下一篇文章再见，我将展示如何用Unity创建一个管理器类。</p></div><div class="ab cl np nq gp nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="hb hc hd he hf"><blockquote class="nw nx ny"><p id="696c" class="js jt mw ju b jv jw is jx jy jz iv ka nz kc kd ke oa kg kh ki ob kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>