<html>
<head>
<title>Whatsapp Bot that Detects Chat Messages and joins your Zoom Meetings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Whatsapp Bot可以检测聊天消息并加入您的Zoom会议</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/whatsapp-bot-that-detects-chat-messages-and-joins-your-zoom-meetings-2b035776f9c7?source=collection_archive---------4-----------------------#2021-09-27">https://medium.com/nerd-for-tech/whatsapp-bot-that-detects-chat-messages-and-joins-your-zoom-meetings-2b035776f9c7?source=collection_archive---------4-----------------------#2021-09-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c501" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像我一样懒又讨厌复制粘贴缩放会议id/密码？那么，你真的需要这个bot！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/46f7245b28a1fb8c778ee7eec0005da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l0MR1tW22RPWaRCzFYJxjg.png"/></div></div></figure><p id="850a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好。！我想我已经很久没有写信了。事实上，我的考试很快就要开始了，而且我正在做一个新的React-native项目，一旦完成我会马上发布。最近在浏览我的<a class="ae jp" href="https://github.com/harsh317" rel="noopener ugc nofollow" target="_blank"> Github </a>时，我发现了一个非常有用的程序和一个非常基本的python程序，这是我在疫情期间做的。如果你熟悉python中的一些“机器人的东西”，你肯定猜对了！我们将使用<em class="jq"> Twilio </em>(使用它我们将与WhatsApp交互)和<em class="jq"> Pyautogui(用于点击、拖动、滚动、移动<em class="jq">的</em> Python自动化库)。</em>所以，在开始使用<strong class="ih hj">模块解释和安装部分</strong>之前，我们先来看看App是如何工作的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/c056201a2d6705b669244560a5339b9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*PVm-3Vp48hxV4QrjhYJa9w.gif"/></div></figure><p id="eff0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有趣吧？这是一个非常小而容易的小程序，如果你是初学者，你可以很容易理解。这可能非常简单明了，但在你连续开会的情况下非常有用。因此，没有任何进一步的延误，让我们安装所有的模块，我们需要的。</p><h1 id="a516" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">模块说明和安装</h1><ul class=""><li id="f79a" class="kq kr hi ih b ii ks im kt iq ku iu kv iy kw jc kx ky kz la bi translated"><strong class="ih hj"> PyautoGui </strong></li></ul><p id="8714" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你只是打破了名称，你将能够理解——‘Py’+‘Auto’+‘Gui’(图形用户界面)。所以，基本上，这是一个python GUI自动化库，用来控制鼠标和键盘做各种事情。没什么复杂的</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="5050" class="lg jt hi lc b fi lh li l lj lk">pip install pyautogui</span></pre><ul class=""><li id="f91c" class="kq kr hi ih b ii ij im in iq ll iu lm iy ln jc kx ky kz la bi translated"><strong class="ih hj">烧瓶</strong></li></ul><p id="2ed7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，基本上<code class="du lo lp lq lc b">flask</code>是一个用python编写的微型网络框架，我们将在我们的机器人中使用它作为‘服务器’。你也可以使用‘Django ’,但是由于它的轻量级和简单性，通常推荐使用它</p><p id="0c39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，“<strong class="ih hj">我们为什么需要烧瓶？</strong> " <br/>通常，当我们发送消息时，我们会从“用户1”向WhatsApp服务器发送一条消息，然后这条消息会被发送给“用户2”。因此，在我们的机器人中，我们希望用我们的机器人替换“用户2”。所以，它会自动回复给我们。现在我们该怎么做呢？我们提供了一个Twilio Rest API的回调URL。“回调URL”基本上是告诉我们不要将消息发送给“用户2 ”,而是发送给我们提供的那个URL。该URL将是我们flask应用程序的Url。我们的flask应用程序或服务器将是真正的机器人，它将响应消息并将其发送回我们。哦，那是一口。现在，让我们安装它。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="4334" class="lg jt hi lc b fi lh li l lj lk">pip install flask</span></pre><ul class=""><li id="300e" class="kq kr hi ih b ii ij im in iq ll iu lm iy ln jc kx ky kz la bi translated"><strong class="ih hj"> Twilio </strong></li></ul><p id="f288" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还需要Twilio包来与API交互。所以，我们来装吧。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="8c97" class="lg jt hi lc b fi lh li l lj lk">pip install twilio</span></pre><p id="3439" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想我们现在不需要别的了。当然，我们需要“ngrok ”,但我们会在以后安装它。现在，让我们开始，首先让我们配置Twilio WhatsApp沙盒</p><h1 id="573c" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">配置Twilio WhatsApp沙盒</h1><p id="11f6" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">因此，让我们首先将我们的智能手机连接到Twilio沙盒。为此，我们需要创建一个新的Twilio帐户，我们可以在<a class="ae jp" href="https://www.twilio.com/try-twilio" rel="noopener ugc nofollow" target="_blank">这里</a>创建。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/ada2e35980856effd5f89fcbe0a784f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fVxlUzzKGMe1M_gJuhBJgA.png"/></div></div></figure><p id="5eea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，请按“开始免费试用”,然后通过发送到您邮件中的链接进行验证。单击该链接后，它会将您带到登录页面，在这里您可以使用刚才创建的凭据登录。然后你会被要求验证你的电话号码。在下一页，输入以下信息开始。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/9980db2ff77179fe6ce177ccf68a9a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*AmqJ8VbbdLNvBi-tL-ymLw.png"/></div></figure><p id="4172" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们正处于将智能手机连接到twilio sanbox的最后一步。进入下一步后，我们将看到以下屏幕。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/f472c75bd68509bea79d60aa4c7425bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*I0ow89xOz8qxzr2F.png"/></div></figure><p id="2f64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个沙盒页面将显示分配给你的帐户的沙盒号码，以及一个加入代码。要为您的智能手机启用WhatsApp沙盒，请向分配给您的帐户的号码发送带有给定代码的WhatsApp消息</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/6d334d99de9eb504dbc12eebf8b7ba04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdtes3Wz6mK2_VH0VAGquQ.png"/></div></div></figure><p id="0468" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们准备开始制作我们的机器人。因此，现在让我们首先创建我们的基本flask应用程序，然后将它连接到ngrok，这样我们就可以通过WAN(也可以是我们网络之外的任何地方)访问它，并将其提供给twilio回调url(如上所述)</p><h1 id="627f" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">创建我们的基本Flask应用程序并将其连接到ngrok</h1><blockquote class="ly lz ma"><p id="a28e" class="if ig jq ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated">遵循Python的最佳实践，我们将为我们的聊天机器人项目创建一个单独的目录，并在其中创建一个<a class="ae jp" href="https://docs.python.org/3/tutorial/venv.html" rel="noopener ugc nofollow" target="_blank">虚拟环境</a>。然后，我们将在上面安装我们的聊天机器人所需的Python包。</p><p id="9e74" class="if ig jq ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated">如果您使用的是Unix或Mac OS系统，请打开终端并输入以下命令来执行上述任务:</p><p id="5d86" class="if ig jq ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated"><code class="du lo lp lq lc b"><em class="hi">$ mkdir whatsapp-bot<br/>$ cd whatsapp-bot<br/>$ python3 -m venv whatsapp-bot-venv<br/>$ source whatsapp-bot-venv/bin/activate</em></code></p><p id="7671" class="if ig jq ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated">对于那些学习Windows教程的人，请在命令提示符窗口中输入以下命令:</p><p id="76ec" class="if ig jq ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated"><code class="du lo lp lq lc b"><em class="hi">$ mkdir whatsapp-bot<br/>$ cd whatsapp-bot<br/>$ python3 -m venv whatsapp-bot-venv<br/>$ whatsapp-bot-venvScripts\activate</em></code> <br/>来自Twilio博客</p></blockquote><p id="4431" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在这个文件夹中创建一个名为“app.py”的文件，并用一个<a class="ae jp" href="https://sendgrid.com/blog/whats-webhook/" rel="noopener ugc nofollow" target="_blank"> webhook </a>定义在其中添加这个基本的flask代码。我希望你熟悉flask框架，但如果不只是谷歌它。下面是我们app.py的基本代码，在评论中有解释:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="ee22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，简单吧？现在，让我们尝试在ngrok上运行这个简单的应用程序，然后将它连接到我们的回调URL，然后我们就可以实现实际的打开和关闭缩放。</p><p id="2160" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在将它连接到ngrok之前，让我们简单地运行它:</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="117f" class="lg jt hi lc b fi lh li l lj lk">python3 -m flask run</span></pre><p id="f098" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它将在我们系统的端口5000上的本地主机上运行我们的应用程序，但我们无法在网络外部访问它。因此，我们将使用名为“ngrok”的服务，你可以从<a class="ae jp" href="https://ngrok.com/download" rel="noopener ugc nofollow" target="_blank">这里</a>安装。下载并解压后，打开一个新的命令提示符或终端，进入exe文件所在的目录。并运行命令</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="f5f9" class="lg jt hi lc b fi lh li l lj lk">./ngrok.exe http 5000</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mg"><img src="../Images/c1a03e6e33c0fc888c6c92b2c21b7e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UZXD39eNNet9wm8WanthOA.png"/></div></div></figure><p id="6fdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“forwarding”后面的Url是我们的公共Url，它会将请求重定向到我们的本地主机。现在，这将是我们的回调Url，但是如果你记得我们实际的bot是在'/bot '端点，所以我们将把<code class="du lo lp lq lc b">/bot</code>附加到我们原来的ngrok Url。因此，在我的例子中，URL将是:</p><p id="1dcb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">" http://7 ECB-122-173-30-108 . ngrok . io/bot "</p><p id="831d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们添加这个网址作为我们的回拨网址<a class="ae jp" href="https://console.twilio.com/us1/develop/sms/settings/whatsapp-sandbox?frameUrl=%2Fconsole%2Fsms%2Fwhatsapp%2Fsandbox%3Fx-target-region%3Dus1" rel="noopener ugc nofollow" target="_blank">这里</a>像这样:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/e788137648202581d903d684e28cd6a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*VdrOGK89DNnv45qkCX5KFQ.png"/></div></figure><p id="826e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后按底部的保存。现在让我们检查一下我们的基本Whatsapp bot！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/58faaf7da7e70c2913eb118661f5ce09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OCg8Fbwen8uP49gABX1Vdg.png"/></div></div></figure><p id="dbb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好，现在，让我们添加逻辑来检测缩放链接消息，并为我们打开缩放应用程序。下面是它的代码，我想你现在已经知道了，解释将会在__________ ✅Yes，“评论”:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="5d51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果有任何疑问，请查看评论。最后，我们的WhatsApp-Zoom-Bot已经准备好了！！！！！！现在让我们来测试一下</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/2ee4c9d26bec3cc06617df6ca831e6c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_D8WqXbJLuw5RXNTASdszw.gif"/></div></div></figure><p id="b5d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的gif中，你可能已经看到，在我发送缩放会议的链接之前，我将鼠标移到了加入按钮的位置，这是因为Pyautogui在录制时无法找到加入按钮。但是没有“SCREENCAST-O-MATIC”记录我的屏幕，它也能很好地工作。所以，现在我们的zoom meeting joiner机器人完成了！当然，你可以通过使用一些对话引擎，如“对话流”等，来增强这个机器人或简单地将其转换为“WhatsApp聊天机器人”。</p><p id="e568" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望你喜欢这个小教程，下次我会带着一个正在进行的新项目与你见面。</p><h2 id="1177" class="lg jt hi bd ju mk ml mm jy mn mo mp kc iq mq mr kg iu ms mt kk iy mu mv ko mw bi translated">在那之前保持安全，保持健康</h2><h2 id="4310" class="lg jt hi bd ju mk ml mm jy mn mo mp kc iq mq mr kg iu ms mt kk iy mu mv ko mw bi translated">谢谢你</h2></div></div>    
</body>
</html>