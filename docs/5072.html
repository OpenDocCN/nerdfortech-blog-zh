<html>
<head>
<title>Adding a Player Health Bar</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">添加玩家健康栏</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/adding-a-player-health-bar-d59d629c1311?source=collection_archive---------3-----------------------#2021-08-26">https://medium.com/nerd-for-tech/adding-a-player-health-bar-d59d629c1311?source=collection_archive---------3-----------------------#2021-08-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="cfe9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">创建 UI 元素:滑块</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/ec77a491b215680c0182a08cfa41ad6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aaiOKsTt-joQicKAzIZnwg.png"/></div></div></figure><p id="379a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这篇文章中，我将继续改进 UI，添加一个健康栏，直观地显示玩家的健康状况。因为我们已经有了一个<a class="ae kf" rel="noopener" href="/nerd-for-tech/adding-health-to-the-player-24d594b8fb11">健康系统</a>，我们可以通过引入一个<strong class="jl hj">滑块组件</strong>并将我们当前的健康状况与它联系起来。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h2 id="ee38" class="kn ko hi bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh bi translated">滑块组件</h2><p id="0258" class="pw-post-body-paragraph jj jk hi jl b jm li ij jo jp lj im jr js lk ju jv jw ll jy jz ka lm kc kd ke hb bi translated">可以在最小值和最大值之间移动的标准滑块。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ln"><img src="../Images/50bd6c08a846e55b77829503463f4471.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*KjcxBzI8gU38XaK3d20Ehg.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">默认滑块</figcaption></figure><blockquote class="ls lt lu"><p id="2591" class="jj jk lv jl b jm jn ij jo jp jq im jr lw jt ju jv lx jx jy jz ly kb kc kd ke hb bi translated">滑块组件是一个可选择的 T4，它控制填充、手柄或两者。使用时，填充从最小值跨越到当前值，而使用时，句柄跟随当前值。</p></blockquote><p id="051a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">填充和手柄矩形变换的锚点由滑块驱动。填充和手柄可以是带有滑块的游戏对象的直接子对象，或者可以在它们之间放置中间的 RectTransforms 以进行额外的控制。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h2 id="767a" class="kn ko hi bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh bi translated">创建滑块组件</h2><p id="74e9" class="pw-post-body-paragraph jj jk hi jl b jm li ij jo jp lj im jr js lk ju jv jw ll jy jz ka lm kc kd ke hb bi translated">作为<em class="lv"> UI 管理器</em>所连接的画布的子组件，创建一个新的 Slider UI 组件。在我们的例子中，我们只是想直观地展示玩家的健康状况，我们不需要可调节的手柄，所以我们可以删除<em class="lv">手柄滑动区域</em>组件。根据您的喜好定位和固定健康栏。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lz"><img src="../Images/aa6efabf545180c207003a860a4adfa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*pX9IVKyqnV_jcw8tMfTzbQ.png"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="d19c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我把图像换成了背景和填充图像，并将<em class="lv">填充图像</em>的颜色设置为绿色，你可以使用任何你喜欢的图像，它也适用于默认图像。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ma"><img src="../Images/174e6a19429f05723abe18f68400c84e.png" data-original-src="https://miro.medium.com/v2/resize:fit:264/format:webp/1*Q9nTIc08SQz5VA9DsJXGCQ.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">26FF21</figcaption></figure><p id="ed16" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于填充图像，我使用水平填充方法将图像类型设置为填充。这样做是为了防止填充图像与背景重叠。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mb"><img src="../Images/3b04d98f6b0c713bc675028f6f984315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5_BUfdqZxdiIIw_8KZo-NQ.png"/></div></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="2328" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们还必须对滑块组件进行轻微调整，使其不至于<strong class="jl hj">难以处理</strong>。非常重要，因为否则，即使不使用句柄，我们仍然可以通过鼠标交互来调整值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mc"><img src="../Images/5082d3edb5bae2a2e36c471cb8c489bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*XqPE1HJlGBu4ag3Wgk6pMQ.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">不需要指定任何转换</figcaption></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="66c3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在 UI Manager.cs 脚本中，创建两个新的引用类型变量。一个引用健康栏，一个引用填充区域'<em class="lv">填充图像</em>'。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/024569f968b0351f533f4d91142120ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*hP8HZKDmpUWrxrxlXCMC-g.png"/></div></figure><p id="55f3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后我们可以在检查器中分配它们；</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/d21d00ebd0bb98f3229e2b2f916a07b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_HJY8FpLZjW6cMgv16HsjQ.png"/></div></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h2 id="6c87" class="kn ko hi bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh bi translated">将健康栏与玩家健康联系起来</h2><p id="308d" class="pw-post-body-paragraph jj jk hi jl b jm li ij jo jp lj im jr js lk ju jv jw ll jy jz ka lm kc kd ke hb bi translated">如果我们进入游戏模式，当然什么也不会发生，因为我们还没有把我们的健康值和填充图像联系起来。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mf"><img src="../Images/9c7f1fe1585012e7464e121a0a80ad7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*CJl0OJ9NAcacGqsRo2GrFA.png"/></div></figure><p id="05f7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了使健康栏与玩家健康同步，我们需要在 UIManager.cs 脚本中创建两个新方法；一种方法允许我们传递<strong class="jl hj"><em class="lv"/></strong>的初始生命值，另一种方法更新<strong class="jl hj"><em class="lv"/></strong>的当前生命值。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="c6e1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">初始化<em class="lv"> UIManager.cs </em>中的<br/> </strong>首先我们需要指出<em class="lv">填充图像</em>的最大值是多少。我们抓住我们的健康栏，设置最大值。通过关键字<strong class="jl hj"> <em class="lv">访问值。maxValue </em> </strong>，并更新生命值栏。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mg"><img src="../Images/84b29161f88ce93e68925ecfb428d63e.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*jVTEqFCqAOj1i1c7bdMW8g.png"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="2d30" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<em class="lv">player . cs 中的<em class="lv"> Start() </em>方法中，</em>我们已经有了一个在游戏开始时设置我们最大生命值的方法。我们现在需要做的就是将该值传递给 UI 管理器。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/fb8167da74cbdfe186939c4ef653bbe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*8v2dukgleToYv_f1ujU4mQ.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">在游戏模式下，现在我们的健康栏更新到最大健康值。</figcaption></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="f268" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">更新玩家健康栏<br/> </strong>我们还需要 UI 管理器中的一个方法来更新健康栏，以便在当前玩家健康发生变化时使用。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mh"><img src="../Images/cc58257260baefbd55a6c93d4e4d7eca.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*2Ex65VehVz8heuShshk4DA.png"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="d726" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们的例子中(目前)，当玩家<strong class="jl hj"><em class="lv"/></strong>承受伤害，当我们<strong class="jl hj"> <em class="lv">加生命值</em> </strong>加力量时。在<em class="lv"> Players.cs </em>脚本中，每次发生这种情况时，我们都会更新健康栏，方法是:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mi"><img src="../Images/fd03cd82e377a541a908858cc649eafa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*KGiF-EaeR7kNjM3sBJ4OTQ.png"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mj"><img src="../Images/03d3fdb15227bfa466dad59af6d92f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*fy0u3eaVTQGDISFBmX74Ng.png"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h2 id="1ef1" class="kn ko hi bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh bi translated">向健康栏添加渐变</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mk"><img src="../Images/c0149c9ebb4e184e773811f8692d7399.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/1*touosgZamr4lt-Hmykg1Yw.gif"/></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="45ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你可以看到，在预览图像中，如果玩家的健康下降到 20%以下，健康栏会变成红色。这是因为我们用在检查器中设置的自定义渐变覆盖了它；</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ml"><img src="../Images/38539ed033891a54e30e359c720cf368.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*qbCzSx4tUIe9E91dXhPOXA.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mm"><img src="../Images/4dd73d7b84fb532702418f7ea5ba8760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QPyw8zhstX96U_3qXlirxQ.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mn"><img src="../Images/ed1fb40dd399e5a4fabc5989f7bb9763.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*p-G209hHtBqsgBEP1RX56g.png"/></div></figure><p id="f5cf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">首先，我们需要指出与玩家健康状况相比，梯度的最大值是多少(相对于从 0 到 1 的浮动)。我们可以这样说:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mo"><img src="../Images/814e7efb423d479120b2c30bf92fff3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*e7HSkLo765wwpthjyTJDjQ.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">滑块的最大值</figcaption></figure><p id="aeea" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了更新梯度，我们现在需要寻找与我们的健康状况相对于标准化值进行比较的当前值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/46e20aacfd48fcc9f2a1a29b9c98530e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AvOWtEjPQGvtNG5mOn5IyQ.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">滑块的当前值规范化为 0 到 1 之间的值。</figcaption></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="cbcb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">掌握了这些知识，你应该能够创建自己的健康栏，但是如果你有任何问题，请不要犹豫，我会尽快回答。祝你好运！</p><p id="1a33" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">接下来我们将看看为玩家整合一个盾牌系统。</p><p id="98c6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">← <a class="ae kf" rel="noopener" href="/nerd-for-tech/creating-basic-game-over-behaviour-df4fa70b6f98">上一张</a> | <a class="ae kf" href="https://gert-coppens.medium.com/adding-the-player-shield-f56b7fea039b" rel="noopener">下一张</a> →</p></div></div>    
</body>
</html>