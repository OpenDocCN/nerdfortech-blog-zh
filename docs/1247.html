<html>
<head>
<title>OWASP Juice Shop: Level 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OWASP果汁店:第一层</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/owasp-juice-shop-level-1-2bb04f14375b?source=collection_archive---------2-----------------------#2021-03-11">https://medium.com/nerd-for-tech/owasp-juice-shop-level-1-2bb04f14375b?source=collection_archive---------2-----------------------#2021-03-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/a694e6489bb3b4bf38ae3d6947a83c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*LTmzJ9NBQtFkO0op.png"/></div></figure><h1 id="4748" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">找到计分板</h1><p id="526c" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">使用<a class="ae ki" href="https://github.com/bkimminich/juice-shop#deploy-on-heroku-free-0month-dyno" rel="noopener ugc nofollow" target="_blank"> OWASP Juice Shop GitHub库</a>在Heroko上创建应用程序后，第一个任务是找到计分板。从最初的应用程序漫游提示来看，很明显我必须查看网页的源代码和其他JS文件。因此，我从源代码开始，搜索各种术语，如<em class="kj"> dash、dashboard、score </em>和<em class="kj"> scoreboard </em>，但什么也没找到。接下来要看的是JS文件。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kk"><img src="../Images/7af54d66850f55e486d654f9e7c34a41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3reuc0FylYscqPEqDFRvlg.png"/></div></div></figure><p id="cfd7" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">第一个可以看到的文件是<code class="du ky kz la lb b">main-es2018.js</code>。当我们<strong class="jm hj">再次搜索像<em class="kj"> dash、dashboard、score </em>和<em class="kj"> scoreboard </em> </strong>这样的术语时，我们可以在这里找到一些结果。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/2627a7381a53b6bb4acc9cc7264a6152.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*SwkJEdM6_NNQYNMCIN8OzQ.png"/></div></figure><blockquote class="ld le lf"><p id="e19b" class="jk jl kj jm b jn kt jp jq jr ku jt ju lg kv jx jy lh kw kb kc li kx kf kg kh hb bi translated">尽可能尝试搜索半个术语，因为如果我们在这里搜索“记分牌”，我们不会找到任何结果，因为还有一个连字符！</p></blockquote><h1 id="9a13" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">给商店一个毁灭性的零星级反馈</h1><p id="8abd" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">每当我们遇到任何要求我们给出一些评级的平台时，都有一个最小值和一个最大值。在果汁店的情况下，最小值为1，最大值为5，我们被要求给0分。</p><p id="551a" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">要完成这项任务，我们需要从左侧菜单进入<a class="ae ki" href="https://random-juice.herokuapp.com/#/contact" rel="noopener ugc nofollow" target="_blank">客户反馈页面</a>。一旦在页面上，我们可以写评论，并解决验证码的价值。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/b5eea26ab817d54474560dfdabc33316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*X9f5Tx4Tnszl9r-S1KQcCA.png"/></div></figure><p id="d672" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">但是我们不能输入低于1的评分。但是我们肯定可以使用Burp Suite通过<strong class="jm hj">拦截和修改正在传递的值</strong>来动态修改值。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lk"><img src="../Images/2649f070761c453d4b7a9601b82517d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jbca0sHR7rZtZmIda1RdZw.png"/></div></div></figure><p id="d813" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">现在，当我们转发此请求时，已发送的额定值为0。</p><p id="7d72" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖:</strong></p><ul class=""><li id="a956" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated"><strong class="jm hj">这表明服务器没有验证评级值，在这种情况下，客户端验证是完全可信的，可以很容易地绕过。</strong></li></ul><h1 id="817d" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">阅读我们的隐私政策</h1><p id="8c08" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">为了解决这个挑战，我们可以首先尝试探索网站上的每一个可能的链接，因为隐私政策的链接通常会在一些菜单中或网页的底部提供。但在这种情况下，我们找不到任何直接链接(剧透:如果你还没有登录！).因此，我们可以再次采用我们在寻找记分牌时采用的相同方法，开始在源代码和JS文件中寻找术语<em class="kj"> privacy </em>。</p><p id="d637" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">在源代码中，我们什么也找不到，但是在<code class="du ky kz la lb b">main-es2018.js</code>文件中，我们可以看到术语<em class="kj"> privacy </em>的多个结果。仔细查看结果，我们可以发现两条路径:</p><figure class="kl km kn ko fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/12da84fea522fedc46be45db113983e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*URLO814gVkPVOPiFlZrX1g.png"/></div></figure><p id="91e8" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">现在，如果我们仔细观察，可以发现页面<code class="du ky kz la lb b">privacy-policy</code>是<code class="du ky kz la lb b">privacy-security</code>的子页面。因此，要访问隐私政策，我们需要访问链接:<a class="ae ki" href="https://random-juice.herokuapp.com/#/**privacy-security/privacy-policy" rel="noopener ugc nofollow" target="_blank">https://random-juice . heroku app . com/#/* * privacy-security/privacy-policy</a>。**</p><blockquote class="ld le lf"><p id="6245" class="jk jl kj jm b jn kt jp jq jr ku jt ju lg kv jx jy lh kw kb kc li kx kf kg kh hb bi translated">如果您已登录，可以在右上角的“帐户”选项卡下找到隐私和安全相关信息</p></blockquote><p id="adaf" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖:</strong></p><ul class=""><li id="ba67" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated"><strong class="jm hj">隐私政策等重要信息应放在易于获取的位置，因为这些是重要的链接。</strong></li></ul><h1 id="3c02" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">查阅机密文件</h1><p id="35aa" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">同样，对于这个任务，我们需要从其他工具获得帮助，例如<a class="ae ki" href="https://github.com/ffuf/ffuf" rel="noopener ugc nofollow" target="_blank"> FFUF </a>。我们可以在域上运行目录遍历攻击，以获得一些有趣目录的列表。然后我们可以开始探索这些目录，看看它们是否包含一些机密文件。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lv"><img src="../Images/e260d88893d44417855e448a24143512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kqod-gC3j5lknsrfasf2Ug.png"/></div></div></figure><blockquote class="ld le lf"><p id="5e38" class="jk jl kj jm b jn kt jp jq jr ku jt ju lg kv jx jy lh kw kb kc li kx kf kg kh hb bi translated"><code class="du ky kz la lb b">-fw </code>用于过滤字数为206的结果，因为即使目录不存在，服务器也会返回200的响应。但是对于所有这些不存在的页面，200响应的字数是206。</p></blockquote><p id="671e" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">在这里，我们可以看到一个名为<code class="du ky kz la lb b">ftp</code>的目录被检测到。在浏览目录时，我们可以找到许多存储在那里的文件。我们可以试着把它们一个一个打开，检查它们是否包含一些机密信息。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lw"><img src="../Images/7ab2032fe2b8a5097d50d3710381b222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cmQgI5RjNDMimxYUIDIJlg.png"/></div></div></figure><p id="7281" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">在所有这些文件中，名为<code class="du ky kz la lb b">[acquisitions.md](&lt;http://acquisitions.md&gt;)</code>的文件包含一行文字说明<strong class="jm hj">这是一份机密文件</strong>。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/5fae67587f03e8cbf8d3eb025781e207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*AT9DEWeBztvteIKtsWXOfQ.png"/></div></figure><p id="d282" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖:</strong></p><ul class=""><li id="2517" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated"><strong class="jm hj">机密文件不应存放在此类公开目录中。</strong></li><li id="5ce1" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh lq lr ls lt bi translated"><strong class="jm hj">必须正确实施访问控制，以便非预期用户可以访问此类文件。</strong></li></ul><h1 id="dce3" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">引发了一个处理得既不优雅也不一致的错误</h1><p id="938a" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在同一个<code class="du ky kz la lb b">/ftp</code>目录下，当打开所有文件时我们可以找到一个名为<code class="du ky kz la lb b">coupons_2013.md.bak</code>的文件。当我们试图打开这个文件时，它抛出一个错误，只说明。md和。允许pdf文件。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es md"><img src="../Images/54d092a1d79a599146dd4ba143f63a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sxbu05oZ89BwIeuv3yww_w.png"/></div></div></figure><p id="8019" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖</strong></p><ul class=""><li id="b7b5" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated">必须妥善处理错误。应该通过实现在配置级别处理的全局错误来向用户返回一般响应。</li><li id="a8ef" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh lq lr ls lt bi translated">与此同时，所有此类错误都应该记录下来，只有必要的管理员才能访问。</li></ul><h1 id="db65" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">注册用户时遵循DRY原则</h1><p id="c6ea" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jm hj">干代表不重复自己。</strong>如果我们查看注册页面，我们会发现我们需要重复两次密码。所以，也许我们需要以某种方式绕过它。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/3c40a2e0565d4c7be7ff7c6180ab7e87.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*X5-HS9CdWjFexYYJN4121g.png"/></div></figure><p id="5f6e" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">同样，要做到这一点，我们可以使用Burp Suite并修改我们的请求，就像我们处理评级值的情况一样。我们需要做的就是拦截Burp Suite上的注册请求，并修改两个值之一，即<em class="kj">密码</em>或<em class="kj">密码重复</em>。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es me"><img src="../Images/ecd3c2646ad73547f10e63dbe5c8a2cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ff1K-bdKWkriwwxqG0NsNA.png"/></div></div></figure><p id="875d" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">现在，当我们转发这个请求<strong class="jm hj">时，即使两个密码值不同，它也会被接受</strong>。</p><p id="8419" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖</strong></p><ul class=""><li id="b3c7" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated"><strong class="jm hj">输入不仅要在客户端进行验证，还要在服务器端进行验证。</strong></li><li id="66e5" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh lq lr ls lt bi translated"><strong class="jm hj">信任客户不是一种好的做法。</strong></li></ul><h1 id="6dc9" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">让我们将您重定向到我们的一个加密货币地址，该地址不再促销</h1><p id="13df" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">同样，我们可以采用相同的方法来搜索加密相关的关键字，如*bit、crypto、currency、coin等。* * * * *通过源代码和JS文件。由于过去在<code class="du ky kz la lb b">main-es2019.js</code>文件中查找链接，我们可以直接只从那个文件开始搜索这些关键字。</p><p id="3ad0" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">在那里，我们可以找到多个关于术语<em class="kj"> bit的<strong class="jm hj">结果，其中一个还包含一个比特币钱包的URL</strong>。</em></p><figure class="kl km kn ko fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/9ae4684958349f57157a9407370f414b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*IaAEYhP0_1N3nVHaAknPBg.png"/></div></figure><h1 id="44a2" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">找到为流行的监控系统收集的使用数据提供服务的端点</h1><p id="d8ea" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">这里，我们给出了一个名为<a class="ae ki" href="https://github.com/prometheus/prometheus" rel="noopener ugc nofollow" target="_blank"> Prometheus </a>的系统和服务监控系统的参考链接。我们可以直接在谷歌上搜索“Prometheus endpoints ”,然后进入它的<a class="ae ki" href="https://prometheus.io/docs/prometheus/latest/getting_started/#starting-prometheus" rel="noopener ugc nofollow" target="_blank">文档页面</a>,在这里我们可以发现所有的指标都可以在<code class="du ky kz la lb b">localhost:9090/metrics</code>访问。所以，可以做同样的事情并尝试<strong class="jm hj">访问</strong><a class="ae ki" href="https://random-juice.herokuapp.com/metrics" rel="noopener ugc nofollow" target="_blank"><strong class="jm hj"/></a><strong class="jm hj">其中提供了使用数据</strong>。</p><p id="31bc" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖:</strong></p><ul class=""><li id="5605" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated"><strong class="jm hj">不应直接访问系统指标的重要链接。</strong></li><li id="b69c" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh lq lr ls lt bi translated"><strong class="jm hj">访问控制应该到位，以确保只有被允许的用户才能访问此类关键信息。</strong></li></ul><h1 id="154d" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">从支持聊天机器人接收优惠券代码</h1><p id="e189" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">即使浏览了所有可用的链接，我们也找不到聊天机器人的任何链接。因此，它可能只对已登录的用户可用。因此，我们可以创建一个帐户，登录并寻找聊天机器人。</p><p id="52eb" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">正如所料，支持聊天选项出现在左侧菜单中。现在，我们的任务是从这个机器人那里得到优惠券。别忘了这个任务有一个<em class="kj">蛮力</em>的标记。因此，我们可以不断地发送消息<em class="kj">优惠券</em>一次又一次，看看我们是否能从机器人那里得到一些东西。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mg"><img src="../Images/a86f15b8af16750930b4cb6dc1ddaec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sl10MCNzUu0-oFFZj7R9dw.png"/></div></div></figure><p id="7564" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖:</strong></p><ul class=""><li id="e961" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated">聊天机器人背后运行的引擎必须经过适当的训练，并且不应该容易受到任何此类暴力攻击。</li></ul><h1 id="7159" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">用<code class="du ky kz la lb b">&lt;iframe src="javascript:alert('xss')"&gt;</code>执行一次多姆XSS攻击</h1><p id="f74f" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">我们知道，XSS通常在用户传递一些非法输入时执行。因此，我们需要寻找一些点，在那里我们可以输入提供的有效载荷。</p><p id="9bef" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">我们可以看到，我们有一个搜索栏，可以从中搜索可用的产品。因此，我们可以在那里输入提供的有效载荷，并检查它是否工作。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mh"><img src="../Images/f7bcf086e083a4c21de5b00c0bda51c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1BHXlBcF-nl4ekuPNyJ0yw.png"/></div></div></figure><p id="83ea" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><strong class="jm hj">外卖:</strong></p><ul class=""><li id="db70" class="ll lm hi jm b jn kt jr ku jv ln jz lo kd lp kh lq lr ls lt bi translated"><strong class="jm hj">来自用户的输入决不能被信任，因此不应被直接处理。</strong></li><li id="77dd" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh lq lr ls lt bi translated"><strong class="jm hj">始终对用户输入和字符编码进行净化，以避免此类XSS攻击，因为它们可能导致恶意重定向，甚至窃取敏感信息。</strong></li></ul><h1 id="5b8a" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">在多姆XSS挑战赛中使用奖励有效载荷<code class="du ky kz la lb b">&lt;iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="[&lt;https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/771984076&amp;color=%23ff5500&amp;auto_play=true&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true&gt;](&lt;https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/771984076&amp;color=%23ff5500&amp;auto_play=true&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true&gt;)"&gt;&lt;/iframe&gt;</code></h1><p id="3ba7" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">对于这个挑战，我们需要做的就是将提供的有效负载粘贴到搜索栏中，并在理解有效负载如何放置iframe的同时收听song！</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mi"><img src="../Images/7667f2ca6f95b343b0494b736092f7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tf8fpJVFkJrZ3TgVKK-jTw.png"/></div></div></figure><h1 id="e0d1" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">检索比约恩的猫在“近战战斗模式”的照片</h1><p id="e0ff" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在浏览所有链接时，我们可以回忆起有一个<em class="kj">照片墙</em>。我们可以快速转到该页面，看到有一个图像没有正确加载。这似乎是我们需要访问的图像。</p><figure class="kl km kn ko fd ij er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mj"><img src="../Images/a3747087c5f252ae809c578e585282ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HsqH6pZ9BLXVNX7BHf3iTA.png"/></div></div></figure><p id="203c" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">我们可以检查源代码，将它的代码与其他图像的代码进行比较，但找不到任何有用的东西。但是，如果我们看得清楚，可以看到图像路径包含表情符号(😼)在里面。这可能是网站无法处理的情况。</p><p id="205a" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">在谷歌上做了一些研究后，我们可以发现这些被称为punycodes，它们也可以用在URL中。但是我们仍然可以尝试<a class="ae ki" href="https://www.punycoder.com/" rel="noopener ugc nofollow" target="_blank">将这个punycode转换成unicode </a>，在图片路径中用unicode替换表情符号，然后尝试访问图片。但即使这样也不起作用。</p><p id="ddf2" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">这意味着表情符号没有问题，但网址中有其他东西。</p><p id="b023" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">我们可以搜索“URL中允许的字符”并找到<a class="ae ki" href="https://www.urlencoder.io/learn/" rel="noopener ugc nofollow" target="_blank">这个页面</a>，在这里我们可以了解URL的不同部分。在这里，我们可以看到字符hash(#)在URL中起着重要的作用，因为它定义了页面上的片段。在我们的文件名中也有两个散列。这意味着浏览器将哈希后的内容解释为页面上的片段。</p><p id="f607" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">为了解决这个问题，我们需要对散列进行URL编码，然后尝试访问该URL。</p><p id="1ac0" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">因此，我们需要做的就是在URL 中用%24替换#<strong class="jm hj">,然后我们的URL看起来就像这样:</strong></p><p id="69e6" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated"><a class="ae ki" href="https://random-juice.herokuapp.com/assets/public/images/uploads/%F0%9F%98%BC-%23zatschi-%23whoneedsfourlegs-1572600969477.jpg" rel="noopener ugc nofollow" target="_blank">https://random-juice . heroku app . com/assets/public/images/uploads/😼-% 23zatschi-% 23who needs four legs-1572600969477 . jpg</a></p><h1 id="076d" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">参考链接:</h1><ol class=""><li id="a4e5" class="ll lm hi jm b jn jo jr js jv mk jz ml kd mm kh mn lr ls lt bi translated">OWASP果汁店GitHub资源库:<a class="ae ki" href="https://github.com/bkimminich/juice-shop" rel="noopener ugc nofollow" target="_blank">https://github.com/bkimminich/juice-shop</a></li><li id="152c" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh mn lr ls lt bi translated">普罗米修斯GitHub库:<a class="ae ki" href="https://github.com/prometheus/prometheus" rel="noopener ugc nofollow" target="_blank">https://github.com/prometheus/prometheus</a></li><li id="708c" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh mn lr ls lt bi translated">普罗米修斯文档:<a class="ae ki" href="https://prometheus.io/docs/prometheus/latest/getting_started/#starting-prometheus" rel="noopener ugc nofollow" target="_blank">https://Prometheus . io/docs/Prometheus/latest/getting _ started/# starting-Prometheus</a></li><li id="6b2f" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh mn lr ls lt bi translated">将Punycode转换为Unicode的工具:<a class="ae ki" href="https://www.punycoder.com/" rel="noopener ugc nofollow" target="_blank">https://www.punycoder.com/</a></li><li id="b0c2" class="ll lm hi jm b jn ly jr lz jv ma jz mb kd mc kh mn lr ls lt bi translated">博客上的网址编码:<a class="ae ki" href="https://www.urlencoder.io/learn/" rel="noopener ugc nofollow" target="_blank">https://www.urlencoder.io/learn/</a></li></ol><p id="e5fc" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">继续第二关挑战:<a class="ae ki" href="https://0xnirvana.medium.com/owasp-juice-shop-level-2-2ead67a77b5e" rel="noopener">https://0x nirvana . medium . com/owasp-juice-shop-Level-2-2 EAD 67 a 77 b 5 e</a></p></div><div class="ab cl mo mp gp mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hb hc hd he hf"><p id="8787" class="pw-post-body-paragraph jk jl hi jm b jn kt jp jq jr ku jt ju jv kv jx jy jz kw kb kc kd kx kf kg kh hb bi translated">一定要看看我在https://github.com/0xNirvana的其他作品和评论</p></div></div>    
</body>
</html>