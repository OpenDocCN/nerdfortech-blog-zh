<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-display-an-image-picker-controller-using-swift-5cfa9892d0b6?source=collection_archive---------1-----------------------#2021-04-06">https://medium.com/nerd-for-tech/how-to-display-an-image-picker-controller-using-swift-5cfa9892d0b6?source=collection_archive---------1-----------------------#2021-04-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><p id="955b" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">如何使用 Swift 显示图像拾取器控制器</strong></p><p id="f4a5" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if"> <em class="ig">小背景故事</em> </strong></p><p id="78e2" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">我正在做一个个人项目，必须使用一个 UIImagePickerController，这样用户就可以从库中拍摄或选择要在视图控制器上显示的图片。尽管这项任务的处理相对于我的个人应用程序来说有点复杂，但从图像拾取器显示图像的主要概念是相当流畅的。</p></div><div class="ab cl ih ii gp ij" role="separator"><span class="ik bw bk il im in"/><span class="ik bw bk il im in"/><span class="ik bw bk il im"/></div><div class="hb hc hd he hf"><p id="fda9" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">从哪里开始？</strong></p><p id="5670" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">让我们在故事板上创建一个带有按钮和图像视图的视图控制器。确保将它们连接到视图控制器，如下所示:</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es io"><img src="../Images/c4fad670131787836d45d1f466e3e000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2oxHUzrNgVwVifRiTnTxMg@2x.jpeg"/></div></div></figure><p id="e72d" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">当运行应用程序时，它应该是这样的(忽略背景色的黑白渐变。我也有我的图像查看占位符图像)</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es ja"><img src="../Images/9a3e9ec95cc221121463ed7d3d41870f.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*hFazg9Ow1A6GaWeKNBFdOQ@2x.jpeg"/></div></figure><p id="653a" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">现在让我们创建一个返回图像拾取器控制器的函数。UIImagePickerController 让我们指定源类型。源类型是给用户从图库或保存的相册中选择图片或选择新拍摄的照片的选项。这是我们的函数⬇️</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es jb"><img src="../Images/d3334983f78a0a7d1f5bdeaa651af7dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgJxBAuQr5KeqGLS589cAQ@2x.jpeg"/></div></div></figure><p id="9551" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">接下来，我们将创建一个函数，该函数将根据用户选择的源类型(库或相机)显示图像拾取器控制器</p><p id="931c" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">这是我们的函数⬇️</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es jc"><img src="../Images/de8af10a87c01b1d318433f52ca1c561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYN-2lwfGD62FhJdClvPUw@2x.jpeg"/></div></div></figure><p id="8e8b" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">完成后，当用户点击我们之前创建的按钮时，我们将调用这个函数，如下所示:</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es jd"><img src="../Images/de9392bece6c7c583bde800a8491df8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sISNGzU6PqpgdNvCQigFYQ@2x.jpeg"/></div></div></figure><p id="1e0b" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">现在，如果你点击那个按钮，你应该得到这个:👀👀</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es ja"><img src="../Images/af5cec26c6c7ce517e5ef02b16f5336e.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*GY2WgLDzVh6Ktb2TK5PqTQ@2x.jpeg"/></div></figure><p id="c328" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">我们有相机选项和图书馆选项。让我们从库选项开始。</p><p id="810a" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">在我点击图书馆选项后，将会显示:⬇️</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es je"><img src="../Images/bdf8f1646bdb088a816ead6467e801ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGhuxVwPqiw-PVydw9xelA@2x.jpeg"/></div></div></figure><p id="9b4d" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">但是，如果您点击一张图片，UIImagePickerController 将被关闭，但我们不会有我们选择的图片的引用，因此我们可以将它分配给我们的 imageView。</p><p id="cf4a" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">为此，我们需要找到一种方法让 UIImagePickerController 与我们的视图控制器进行通信。幸运的是，已经存在一对协议可以为我们处理它，那就是 UIImagePickerControllerDelegate 和 UINavigationControllerDelgate。</p><p id="dc25" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">因此，让我们创建一个视图控制器的扩展，像这样扩展这两个协议:⬇️</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es jc"><img src="../Images/fce96d97242055ad19d95b0ca646423f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcr4Qb6-06SLr2t69KC2Yg@2x.jpeg"/></div></div></figure><p id="afe4" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">然后，我们将使用 info 为 didfinishPickingMedia 实现图像拾取器控制器方法。这个回调让我们知道用户已经完成了图片的选择。一旦这个方法被调用，我们就用那个方法设置图像，然后关闭视图⬇️</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es jf"><img src="../Images/f1126c0b4ad720b9e3c1bcc6c0e39b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aKW0Gle3P9t_B_CPCMXRmQ@2x.jpeg"/></div></div></figure><p id="eafa" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">还有一件事</strong></p><p id="6b0d" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">我们忘记设置图像拾取器的代理。如果我们不设置委托，什么都不会发生，这意味着我们将无法从我们之前实现的委托方法中获取消息。</p><p id="f55a" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">所以让我们回到 showImagePickerOptions 函数，添加这两行:⬇️</p><div class="ip iq ir is fd ab cb"><figure class="jg it jh ji jj jk jl paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><img src="../Images/4c659b4c474906df272e46976eb757b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*U2lSXzSml-ws8W5q02SlAg@2x.jpeg"/></div></figure><figure class="jg it jm ji jj jk jl paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><img src="../Images/825b3408e3b7fab2aacb83f235407dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*iYiz9unJeJg3FIsZzGxf2Q@2x.jpeg"/></div></figure></div><p id="c466" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">最后一件事😅</p><p id="46aa" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">为了相机选项正常工作(更像是为了它不崩溃),在信息列表⬇️中添加此权限</p><figure class="ip iq ir is fd it er es paragraph-image"><div role="button" tabindex="0" class="iu iv di iw bf ix"><div class="er es jn"><img src="../Images/00b544457fc14e6eab1f53261019773f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IvbcMZmQzWPXtCCYwAdsvA@2x.jpeg"/></div></div></figure><p id="5d9c" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">现在运行应用程序，当你选择一张图片时，你应该得到这个</p><figure class="ip iq ir is fd it er es paragraph-image"><div class="er es ja"><img src="../Images/c56e36de37d72ac8f9c771f6e8c4088d.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*WQi1HmIxUjtbpxh7rbuFzQ@2x.jpeg"/></div></figure><p id="aa7a" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">就是这样。成功了！</p><p id="2364" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">我希望你喜欢它，并随时添加任何意见的建议和更多的问题在这个话题上。</p><p id="9dc8" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">编码快乐！</p></div></div>    
</body>
</html>