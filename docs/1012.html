<html>
<head>
<title>ContextAPI and useContext vs Redux for smaller React projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对于较小的React项目，使用ContextAPI和useContext vs Redux</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/contextapi-and-usecontext-vs-redux-for-smaller-react-projects-8ee31b79fdc9?source=collection_archive---------9-----------------------#2021-03-01">https://medium.com/nerd-for-tech/contextapi-and-usecontext-vs-redux-for-smaller-react-projects-8ee31b79fdc9?source=collection_archive---------9-----------------------#2021-03-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8d73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在创建React应用程序时，状态管理是最重要的考虑因素之一。根据项目的大小，您可能希望实现一个像Redux这样的库，以便在一个地方(即存储区)收集状态。</p><p id="ce50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问题是设置Redux需要大量的工作和大量的文件，对于一个中小型项目来说，这种麻烦和复杂并不总是值得的。介于两者之间吗？是的，输入Context API来存储数据，并使用Context钩子来检索数据。</p><p id="9f6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据反应文件，</p><blockquote class="je jf jg"><p id="780b" class="if ig jd ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">“上下文提供了一种通过组件树传递数据的方式，而不必在每一级手动向下传递属性。”</p></blockquote><p id="597d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文档解释说，这对于您可能希望保留在“全局”状态的某些信息特别有用，包括UI主题、语言首选项和当前用户。</p><p id="1267" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了在我自己的环境中进行测试，我将大量数据转移到上下文中。</p><p id="c94c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为一点参考，我正在部分重构的项目是一个以恐怖电影为中心的社交媒体网站，一个供恐怖电影粉丝搜索、分类和评论他们最喜欢的作品并与视频参考一起讨论这些作品的平台。</p><p id="b4f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">整个项目实现了一个Rails后端作为API，它允许在特定的路由中内置很多特性。我不会改变这一切。现在，我将简单地重新定位数据，并以不同的方式访问它。</p><p id="b228" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我没有调用OMDB API，而是将来自OMDB的特定JSON数据保存到一个文件中，我称之为FILM_DATA。它只是一个电影对象的集合，每个对象都包含标题、发行年份、海报图像url和电影描述等信息。</p><p id="17de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了组件之外，我还创建了一个上下文文件，就像您创建一个单独的redux文件一样。我在里面放了一个FilmContext文件。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/1d0256c95324ddaa2a4a5ea115e6fee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OJOuEzGsjtwtmYXL6oiLfw.png"/></div></div></figure><p id="681a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以上是访问信息并在应用程序中传递信息所需的全部内容。</p><p id="da28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从React导入的createContext方法可以接受字符串、对象、数组等，它是我们将从其他地方提取我们想要的电影值FILM_DATA的来源。</p><p id="ff87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在上面的代码中放置了一个注释，FilmContext表示FILM_DATA对象的初始状态。我有意使用这种语言，因为上下文API就像一个Redux reducer，其中您总是引用INITIAL_STATE。通过上下文提供者，我可以跟踪并实现对这个初始状态的任何上下文更改。</p><p id="b62f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在最初调用外部API的电影容器组件中，我导入FilmContext文件并从React导入useContext。我不再需要useEffect，因为我不再获取数据。</p><p id="b815" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">useContext挂钩允许我们获取上下文中的值，并将其存储为常量。所以现在，在容器组件内部，我可以说const collection = useContext，并传入我想使用的上下文，在本例中是FilmContext。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jw"><img src="../Images/5cb67b92c855c1b71c735e8a2c07b77c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JO-QxNz4ZODwRGRVWBpEVQ.png"/></div></div></figure><p id="9c6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我现在可以访问所有相同的电影数据。您可以看到，我已经注释掉了之前保存在state中并作为道具传递的API数据。我现在正在做同样的事情，除了从上下文API访问数据。这并不是一个完美的例子，因为我仍然将数据作为一个道具传递下去，但是这显示了实现useContext挂钩是多么容易，以及在许多组件中访问这些信息是多么容易，而不需要Redux。</p><p id="6710" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上下文并不是React的新特性，但是useContext钩子提供了很多独立于Redux和其他状态管理库的功能。值得注意的是，像React- Redux这样的库在幕后使用上下文API。这就是商店和所有与Redux实现相关的东西(如分派和将状态匹配到道具)如何到达应用程序的其余部分。</p><p id="bba5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终，上下文API看起来不像是一个完全的Redux替代。随着您的应用程序规模的增长，您可能会有许多上下文提供程序(允许您动态地利用除初始状态之外的上下文)，您需要将这些提供程序包装在应用程序周围，以便广泛访问。但是，使用Redux，您只需要一个提供者，它传递存储，然后存储被分解成多个reducers。基本上，坚持使用Redux，你会得到一个更整洁的index.js文件。</p><p id="48fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，如果您的应用程序非常大，有很多可重用的组件和特性，您可能希望坚持使用Redux。否则，上下文API和useContext挂钩可能是一个不错的折中解决方案。</p></div></div>    
</body>
</html>