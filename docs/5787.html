<html>
<head>
<title>Roll Animation — Joys and Pains of the Update() Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">滚动动画Update()方法的优缺点</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/roll-animation-joys-and-pains-of-the-update-method-5a82e6f797a?source=collection_archive---------11-----------------------#2021-11-15">https://medium.com/nerd-for-tech/roll-animation-joys-and-pains-of-the-update-method-5a82e6f797a?source=collection_archive---------11-----------------------#2021-11-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/0a16bc629ec2d2eea3013dc5a329aede.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/1*BOPrJmqylLrjUix0YX86XA.gif"/></div></figure><p id="9f5c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">目标</strong>:实现一个翻滚功能，让角色向前跳跃并进入狭窄的空间</p><p id="f0ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这个教程中，我将展示我如何将一个<strong class="io hj">滚动动画</strong>压缩到这个项目中。像往常一样，我从Mixamo.org进口动画，就地烘焙。</p><p id="7a17" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当角色滚动时，我们希望播放动画，提升水平速度，并有可能通过<strong class="io hj">狭窄的</strong>路径挤压角色。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/b0e7a939bb7f6c3346afb6f48e4f9eeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrlTwHJq2Miu26-colf5ug.png"/></div></div></figure><p id="a74f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦动画被导入，我就把它放到animator网站上，试图找出如何把它和其他状态联系起来。转换到滚动状态非常容易:必须用键盘输入设置一个“onRoll”触发器。</p><p id="c946" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">相反，转换回空闲或运行状态(唯一与滚动相关的状态)是很棘手的。</p><p id="51e7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">但是让我们从第一步开始。</p><h2 id="6da2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated">接受输入(正确)</h2><p id="4f4c" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">正如文章的标题所暗示的那样，让它按预期的那样工作绝非易事。最大的障碍是获取输入的方式，或者更多的输入，每帧<strong class="io hj"/>。</p><p id="7f92" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你浏览以前的文章，你会发现每一帧都有运动输入，从<strong class="io hj">水平输入轴</strong>转换成水平速度。然后，如果一个跳跃可以被执行，垂直速度被设置，重力将会使它越来越小，为负，当角色再次落地时最终为零。在所有这些过程中，玩家可以连续提供(水平)输入并移动角色<strong class="io hj">而不影响</strong>跳跃/下落程序。</p><p id="37a3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">滚动时不能这样做，因为它影响水平速度。我举一个简单的例子:让我们把翻滚当作水平跳跃，让我们使用相同的逻辑，唯一的例外是翻滚设置一个值给<code class="du kt ku kv kw b">velocity.z</code>。</p><p id="b8e1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这样做，我们仍然有一个类似于每帧执行<strong class="io hj">的命令。结果将是只有在从空转状态滚动的情况下速度才能正确工作，而从运行状态滚动的速度<strong class="io hj">将被输入的</strong>超越。</strong></p><p id="7b88" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了解决这个问题，我不得不重新思考收集信息的方式。</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="9057" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们不只是收集输入，而是要检查角色<strong class="io hj">是否在滚动</strong>:如果不是，我们可以接受输入(不再覆盖)。然后，如果它能滚动，就调用roll方法。</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="9a1f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果角色被固定(很明显)并且还没有翻滚，那么它可以翻滚。Roll方法与Jump非常相似:设置速度，使用面向方向的角色，rolling boolean设置为true并触发动画。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/4a79ab5f7a6bc6bed8fcd073308665f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/1*7_845SN3K27QOxqxC-9dSQ.gif"/></div></figure><h2 id="2bc3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated">用于完成任务的状态机器行为</h2><p id="43d9" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">那么，现在这个角色<code class="du kt ku kv kw b">isRolling</code>，我们什么时候怎么能说它是<strong class="io hj">而不再是</strong>？</p><p id="4103" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">正如本系列中多次发生的那样，我们将使用动画行为。我们还将完成我们的目标，并赋予角色挤进隧道的能力！</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="453c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在<strong class="io hj">进入</strong>状态时，我们抓取了一个角色控制器和运动脚本的参考:我们降低了控制器碰撞器的高度，并修改了中心以保持最低的部分在模型的脚下。拥有一个更小的碰撞器，这个角色将会比以前更适合更窄的空间。</p><p id="e87a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在<strong class="io hj">更新</strong>状态时，我们只是保持设置速度，以确保角色在整个动画中移动。</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="cdea" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在<strong class="io hj">退出</strong>状态时，我们重置所有值，包括<code class="du kt ku kv kw b">isRolling</code> bool。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es if"><img src="../Images/0a16bc629ec2d2eea3013dc5a329aede.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/1*BOPrJmqylLrjUix0YX86XA.gif"/></div></figure><p id="cb64" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们在一个狭窄的区域里试试吧！</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es la"><img src="../Images/3cc9d9c9a47f0fbe40672b73a102d750.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/1*aaB8HLvpHeMDiAH-s4H01g.gif"/></div></figure></div></div>    
</body>
</html>