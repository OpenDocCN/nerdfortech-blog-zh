<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/testing-android-studio-apps-on-a-physical-android-device-8ba505d1c1ca?source=collection_archive---------25-----------------------#2021-05-21">https://medium.com/nerd-for-tech/testing-android-studio-apps-on-a-physical-android-device-8ba505d1c1ca?source=collection_archive---------25-----------------------#2021-05-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><p id="037b" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">在物理 Android 设备上测试 Android Studio 应用</strong></p><p id="afa4" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">虽然使用 Android 虚拟设备(AVD)测试应用程序可以实现很多目标，但在物理 Android 设备上执行真实世界的应用程序测试是不可替代的，并且有许多 Android 功能只能在物理 Android 设备上使用。与 AVD 实例和连接的 Android 设备的通信由 Android 调试桥(ADB)处理。</p><p id="81bc" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">配置 adb 环境的步骤，以便在基于 macOS、Windows 和 Linux 系统的物理 Android 设备上进行应用测试。7.1 </strong></p><p id="cbeb" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">Android 调试桥(ADB)概述 ADB 的主要目的是促进开发系统(在这种情况下是 Android Studio)与 AVD 仿真器和物理 Android 设备之间的交互，以便运行和调试应用程序。ADB 由一个客户端、一个在开发系统后台运行的服务器进程和一个在 AVDs 或真正的 Android 设备(如手机和平板电脑)上运行的后台进程组成。亚行客户可以采取多种形式。例如，在 Android SDK platform-tools 子目录中，以名为 adblocated 的命令行工具的形式提供了一个客户端。同样，Android Studio 也内置了客户端。使用 adb 命令行工具可以执行各种任务。例如，可以使用 devices 命令行参数获得当前活动的虚拟或物理设备的列表。以下命令输出指示系统上存在 AVD，但没有物理设备:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es ig"><img src="../Images/8f16f712587bfda85090a76eb3fb2872.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*GwqjHPtMVaKuUAEwQ3NvJA.png"/></div></figure><p id="ef03" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if">在基于 Android 的设备上启用 ADB</strong></p><p id="8e31" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">在 ADB 可以连接到 Android 设备之前，必须首先将该设备配置为允许连接。在运行 Android 6.0 或更高版本的手机和平板设备上，实现这一点的步骤如下:</p><ol class=""><li id="f026" class="io ip hi hj b hk hl ho hp hs iq hw ir ia is ie it iu iv iw bi translated">打开设备上的设置应用程序，选择关于平板电脑或关于手机选项(在较新版本的 Android 上，这可以在设置应用程序的系统页面上找到)。</li></ol><p id="f718" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">2.在 About 屏幕上，向下滚动到 Build number 字段并点击七次，直到出现一条消息，指示已启用开发人员模式。如果内部版本号没有在“关于”屏幕上列出，则可以通过“软件信息”选项获得。或者，如果可用，展开列表的高级部分。</p><p id="9826" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">3.返回到主设置屏幕，注意标题为“开发者选项”的新选项的出现。选择此选项，并在标题为 USB 调试的开发人员屏幕上找到设置。启用它旁边的开关。</p><p id="3057" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">4.从屏幕顶部向下滑动以显示通知面板，并注意设备当前已连接调试。</p><p id="d2e1" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">此时，设备已配置为在开发系统上接受来自 adb 的调试连接。剩下的工作就是配置开发系统，以便在设备连接时对其进行检测。虽然这是一个相对简单的过程，但是根据开发系统运行的是 Windows、macOS 还是 Linux，所涉及的步骤会有所不同。请注意，以下步骤假设 Android SDK 平台工具目录包含在操作系统 PATH 环境变量中。</p><p id="704c" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if"> macOS ADB 配置</strong></p><p id="0f47" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">要在 macOS 系统上配置 adb 环境，请使用 USB 电缆将设备连接到计算机系统，打开终端窗口并执行以下命令来重启 ADB 服务器:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es ix"><img src="../Images/91bc1458ca1936c12bc669754eae3a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*rh-4Zx8gOo__fMMsllRWow.png"/></div></figure><p id="c024" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">一旦服务器成功运行，执行以下命令以验证设备已被检测到:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es iy"><img src="../Images/7c4ab45c681a765e1c93fc627a40074b.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*xDzrXcWimF2mGAiHTyL0Ow.png"/></div></figure><p id="1a66" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果设备被列为离线，转到 Android 设备并检查是否存在如图 1.0 所示的对话框，寻求允许 USB 调试的权限。启用“始终允许”选项旁边的复选框</p><p id="de34" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">在单击“确定”之前。重复 adb devices 命令现在应该会将设备列为可用:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es iz"><img src="../Images/e2348330895e00bf910783423f346e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*k_qmp9SYGx-n31BVVxEQ8A.png"/></div></figure><p id="2445" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果设备未列出，请尝试注销，然后重新登录到 macOS 桌面，如果问题仍然存在，请重新启动系统。</p><p id="caa0" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if"> Windows ADB 配置</strong></p><p id="98ca" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">配置基于 Windows 的开发系统以使用 ADB 连接到 Android 设备的第一步是在系统上安装适当的 USB 驱动程序。要安装的 USB 驱动程序将取决于 Android 设备的型号。如果你有一个谷歌 Nexus 设备，那么就需要在你的 Windows 系统上安装和配置谷歌 USB 驱动程序包。实现这一点的详细步骤在以下网页中列出:【https://developer.android.com/sdk/win-usb.html】T4 对于不支持谷歌 USB 驱动程序的 Android 设备，需要下载设备制造商提供的驱动程序。驱动程序列表以及下载和安装信息可从以下网址在线获得:<a class="ae ja" href="https://developer.android.com/tools/extras/oem-usb.html" rel="noopener ugc nofollow" target="_blank">https://developer.android.com/tools/extras/oem-usb.html</a>安装驱动程序后，设备现在被识别为正确的设备类型，打开命令提示符窗口并执行以下命令:</p><p id="5826" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><em class="jb">亚行设备</em></p><p id="9ee4" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">此命令应输出有关所连接设备的信息，如下所示:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es jc"><img src="../Images/823b41b70b7a03b680c1bd3aca6f2f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*WO09od-uZOpIr-2AdqMbLw.png"/></div></figure><p id="e4d4" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果设备被列为离线或未授权，请转到设备显示屏，查看图 1.0 所示的对话框，寻求允许 USB 调试的权限。</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es jd"><img src="../Images/9e060f885ce38cbc1d3722c2a697d791.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*FZunmxGaVIZGDp3nMxv_-g.png"/></div><figcaption class="je jf et er es jg jh bd b be z dx translated">图 1.0</figcaption></figure><p id="acca" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">在单击“确定”之前，启用“始终允许来自此计算机”选项旁边的复选框。重复 adb devices 命令现在应该会将设备列为就绪状态:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es ji"><img src="../Images/4e5cda150101263cb77f28f453024f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*B5Vt3Mlo5Unb3lDP4AliJg.png"/></div></figure><p id="12c6" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果设备未列出，请执行以下命令来重新启动 ADB 服务器:</p><p id="9545" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><em class="jb"> adb kill-server </em></p><p id="f3fd" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">在物理 Android 设备上测试 Android Studio 应用</p><p id="cf80" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><em class="jb">亚行启动服务器</em></p><p id="6248" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果设备仍未列出，请尝试执行以下命令:</p><p id="bd92" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><em class="jb">安卓更新 adbNote </em></p><p id="9b52" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">可能还需要重新启动系统。</p><p id="cbdd" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj if"> Linux adb 配置</strong></p><p id="7c39" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">我们将再次使用 Ubuntu Linux 作为参考示例，在 Linux 上配置 adb 以连接到物理 Android 设备进行应用程序测试。在 Ubuntu Linux 上进行物理设备测试需要安装一个名为 android-tools-adb 的包，这个包反过来要求 Android Studio 用户是 plugdev 组的成员。这是大多数 Ubuntu 版本的默认用户帐号，可以通过运行 id 命令来验证。如果 plugdev 组没有列出，运行以下命令将您的帐户添加到该组:</p><p id="d510" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><em class="jb">sudo usermod-aG plug dev＄LOGNAME</em></p><p id="c3c3" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">满足组成员资格要求后，可以通过执行以下命令来安装 android-tools-adb 软件包:</p><p id="8924" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><em class="jb"> sudo apt-get 安装 android-tools-adb </em></p><p id="4365" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">完成上述更改后，重启 Ubuntu 系统。系统重启后，打开终端窗口，启动 adb 服务器并检查连接的设备列表:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es jj"><img src="../Images/4dff6b5b620aae27108e39d476a380b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*MiPGat9nduYtLapWwnoITw.png"/></div></figure><p id="0f46" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果设备被列为离线或未授权，转到 Android 设备并检查图 1.0 所示的对话框，寻求允许 USB 调试的权限。</p><p id="736c" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">测试 adb 连接假设 adb 配置在您选择的开发平台上已经成功，下一步是尝试在设备上运行“在 Android Studio 中创建示例 Android 应用程序”一章中创建的测试应用程序。启动 Android Studio，打开 AndroidSample 项目，并验证该设备出现在设备选择菜单中，如图 1.1 所示:</p><figure class="ih ii ij ik fd il er es paragraph-image"><div class="er es jk"><img src="../Images/d4d6eb50183a4bd3f94372dfe1de3308.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*anLKrF5OdmBcP0WZbxxp6A.png"/></div><figcaption class="je jf et er es jg jh bd b be z dx translated">图 1.1</figcaption></figure></div></div>    
</body>
</html>