<html>
<head>
<title>Laravel Project Deployment On Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Heroku 上的 Laravel 项目部署</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/laravel-project-deployment-on-heroku-71fbecb491da?source=collection_archive---------10-----------------------#2021-06-10">https://medium.com/nerd-for-tech/laravel-project-deployment-on-heroku-71fbecb491da?source=collection_archive---------10-----------------------#2021-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6f324f7626623323e802797929fea95c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4CEUaEQLzhJOBExcNIVpMA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由 vectorjuice / Freepik 设计</figcaption></figure><p id="cdd2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Heroku 是一个云计算应用，提供平台即服务(PaaS)。该平台允许开发人员部署、管理和扩展他们的应用程序。在本文中，我将向您展示如何在 Heroku 平台上部署一个 laravel 项目。</p><p id="a0db" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们开始吧。</p><blockquote class="js jt ju"><p id="ec5d" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated">安装 heroku CLI </p></blockquote><p id="80bc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，你应该在你的电脑上安装 heroku CLI。检查此<a class="ae jz" href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" rel="noopener ugc nofollow" target="_blank">链接</a>并根据您的操作系统安装 Heroku CLI。</p><blockquote class="js jt ju"><p id="26d7" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">创建一个 laravel 项目</strong></p></blockquote><p id="efad" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">通过运行以下命令，在本地创建一个新的 laravel 项目。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="48a2" class="kj kk hi kf b fi kl km l kn ko">composer create-project --prefer-dist laravel/laravel laravelonheroku</span></pre><blockquote class="js jt ju"><p id="ce89" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">初始化一个 Git 库</strong></p></blockquote><p id="b246" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用以下命令初始化 laravel 项目文件夹中的 git 存储库。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="66bc" class="kj kk hi kf b fi kl km l kn ko">git init</span></pre><blockquote class="js jt ju"><p id="a48a" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">创建一个过程文件</strong></p></blockquote><p id="2a9f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在 laravel 项目中创建一个名为 Procfile 的文件，并在 Procfile 中添加以下代码。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="0eb6" class="kj kk hi kf b fi kl km l kn ko">web: vendor/bin/heroku-php-apache2 public/</span></pre><blockquote class="js jt ju"><p id="2f55" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">创建 Heroku App </strong></p></blockquote><p id="1214" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">通过运行以下命令创建一个 Heroku 应用程序。请注意，您应该有一个 Heroku 帐户，如果您没有帐户，请在运行以下命令之前创建一个帐户。</p><p id="5ee7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae jz" href="https://signup.heroku.com/login" rel="noopener ugc nofollow" target="_blank">在 Heroku 上创建一个账户</a></p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="523f" class="kj kk hi kf b fi kl km l kn ko">heroku create</span></pre><p id="de11" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将使用随机名称创建一个应用程序。在我的例子中，应用程序的名称是“解冻-环礁-02946”</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/d3ae87bcc928bf974ecfbad96f3937fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DeMq4QWMqgsQhARw5LwP9A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者截图</figcaption></figure><p id="dc72" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您可以使用下面给出的命令重命名它。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="eb30" class="kj kk hi kf b fi kl km l kn ko">heroku apps:rename &lt;newname&gt;</span></pre><blockquote class="js jt ju"><p id="6c7f" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">设置 Laravel 加密密钥</strong></p></blockquote><p id="f883" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要设置并运行 laravel 加密密钥:</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="e7ee" class="kj kk hi kf b fi kl km l kn ko">php artisan key:generate --show</span></pre><p id="b4ae" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦你运行上面的命令，你将得到密钥。复制密钥并运行下面给出的命令。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="f3df" class="kj kk hi kf b fi kl km l kn ko">heroku config:set APP_KEY=&lt;copied key&gt;</span></pre><blockquote class="js jt ju"><p id="4c7f" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">推送变更</strong></p></blockquote><p id="27a6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您必须将您在本地进行的所有更改推送到 git 存储库。</p><p id="588a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">逐一运行以下命令，将更改推送到 Heroku 服务器。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="587c" class="kj kk hi kf b fi kl km l kn ko">git add .<br/>git commit -m"&lt;message&gt;"<br/>git push heroku master</span></pre><blockquote class="js jt ju"><p id="2c69" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">配置数据库</strong></p></blockquote><p id="ca0c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要实现登录和注册，您应该在 heroku 服务器中设置数据库。在我的项目中，我将使用 Postgres 数据库，因为它在 Heroku 上是免费的。</p><p id="36d7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">运行以下命令为您的应用程序创建 Postgres SQL。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="44be" class="kj kk hi kf b fi kl km l kn ko">heroku addons:create heroku-postgresql:hobby-dev</span></pre><p id="17a0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在转到 database.php 文件(在项目的 config 文件夹中)，将 mysql 改为 pgsql 作为默认数据库。</p><p id="74be" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您的 database.php 文件应该如下所示。</p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="kq kr l"/></div></figure><p id="09de" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">由于您已经在 database.php 文件中进行了更改，您必须通过逐个运行以下命令将上述更改推送到 git repo。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="452f" class="kj kk hi kf b fi kl km l kn ko">git add .<br/>git commit -m"&lt;message&gt;"<br/>git push heroku master</span></pre><p id="6aed" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在您可以运行迁移了。运行以下命令来迁移您的数据库。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="538b" class="kj kk hi kf b fi kl km l kn ko">heroku run php artisan migrate</span></pre><blockquote class="js jt ju"><p id="b5e3" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">设置认证</strong></p></blockquote><p id="6290" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">由于 laravel 提供了认证工具，您可以通过运行以下命令来设置登录和注册系统。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="00d4" class="kj kk hi kf b fi kl km l kn ko">composer require laravel/ui<br/>php artisan ui:auth</span></pre><p id="c0b9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将更改推送到 heroku 服务器</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="cdc9" class="kj kk hi kf b fi kl km l kn ko">git add .<br/>git commit -m"&lt;message&gt;"<br/>git push heroku master</span></pre><p id="cb73" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，您可以成功注册并登录到您部署的 laravel 应用程序。</p><p id="a841" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">希望这篇文章对你有所帮助。感谢您的阅读！</p></div></div>    
</body>
</html>