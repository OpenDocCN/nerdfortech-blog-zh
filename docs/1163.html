<html>
<head>
<title>Webpack + React Optimised from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Webpack + React 从头开始优化</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/webpack-react-optimised-from-scratch-da8f75024ba4?source=collection_archive---------4-----------------------#2021-03-07">https://medium.com/nerd-for-tech/webpack-react-optimised-from-scratch-da8f75024ba4?source=collection_archive---------4-----------------------#2021-03-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2d372083da6f72f1a938f71af6c746b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nBNPobrQPLNmVp_a"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae iu" href="https://unsplash.com/@laurentmedia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">给</a>拍照</figcaption></figure><p id="4e65" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di">我们</span>都爱<a class="ae iu" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>如果你没有，那意味着你还没有尝试过，或者你生活在一个不同的世界。另一方面，<a class="ae iu" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应过来</a>都是喜欢的。</p><p id="75fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我会非常精确地谈论这个话题，不会解释每一个细节。</p><p id="3dfe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我们创建第一个基础项目或成熟的项目时，我们大多数人都经历过<strong class="ix hj"> Create React App </strong> (CRA)。但随着时间的推移，你会看到复杂性增加，我们希望我们的代码得到优化和健壮。虽然 CRA 在引擎盖下使用 Webpack，我们可以很容易地弹出它，并做一些自定义增强。</p><p id="c5c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将尝试涵盖这一部分。</p><blockquote class="kc kd ke"><p id="9090" class="iv iw kf ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hb bi translated"><a class="ae iu" href="https://premeena.medium.com/webpack-react-optimised-differential-serving-b53d4cf2a3da?source=your_stories_page-------------------------------------" rel="noopener"> Webpack + React 优化差分服务</a></p></blockquote></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="425e" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">设置基本配置</h1><p id="f4b2" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">首先，我们要用 npm 初始化我们的设置</p><p id="8f2d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">【这里我们用的是<strong class="ix hj">节点 v 14。</strong> *和<strong class="ix hj"> NPM 6。</strong> * ]</p><p id="559a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们开始我们的项目设置</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="bc18" class="mc kr hi ly b fi md me l mf mg"># here we are using npm feel free to use yarn <br/># with -y we are getting all default value </span><span id="34d1" class="mc kr hi ly b fi mh me l mf mg">&gt; npm init -y</span></pre><p id="13dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">让我们安装设置应用程序所需的软件包</strong></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="edf3" class="mc kr hi ly b fi md me l mf mg"># installing as dev depencies as we only require them for development mode </span><span id="d73a" class="mc kr hi ly b fi mh me l mf mg">&gt; npm install webpack webpack-cli --save-dev</span></pre><p id="409d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是我们的开发依赖树的样子</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="87b0" class="mc kr hi ly b fi md me l mf mg">{<br/> "devDependencies": {<br/>     "webpack": "^5.23.0",<br/>     "webpack-cli": "^4.5.0"<br/> }<br/>}</span></pre><p id="b982" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们向 package.json 添加一个脚本</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="5885" class="mc kr hi ly b fi md me l mf mg">"scripts": {<br/>    "dev": "webpack --mode development"<br/>  }</span></pre><p id="67b0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们已经准备好了基本的设置，我迫不及待地想看它运行。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="7f61" class="mc kr hi ly b fi md me l mf mg">&gt; npm run dev</span></pre><p id="49bf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">未找到主模块中的错误:错误:无法解决’。/src' </strong></p><h2 id="8880" class="mc kr hi bd ks mi mj mk kw ml mm mn la jg mo mp le jk mq mr li jo ms mt lm mu bi translated">发生了什么事？</h2><p id="d12f" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">我们看到这个错误是因为 webpack 正在根目录下的 src 文件夹中查找 JS 文件。但是我们还没有创造出任何东西。</p><p id="b329" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们创建基本的文件夹结构。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="d0f5" class="mc kr hi ly b fi md me l mf mg">&gt; mkdir src<br/>&gt; echo 'console.log("Hey Webpack!")' &gt; src/index.js</span></pre><p id="632f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们再运行一次</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="5f0a" class="mc kr hi ly b fi md me l mf mg">&gt; npm run dev</span></pre><p id="1951" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你会看到一个名为<strong class="ix hj"> dist </strong>的🗂文件夹和一个名为<strong class="ix hj"> main.js </strong>的文件被创建，</p><p id="babc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它基本上是你的应用程序的捆绑包。(src/index.js)</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="f484" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">让我们调整我们的网络包</h1><p id="691a" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">虽然我们已经创建了自己的包，但这还不够。我们希望从 webpack 得到更多，而 webpack 有能力做更多更好的事情。</p><p id="4024" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们创建一个配置文件，它将告诉 webpack 精确地做事情。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="f59a" class="mc kr hi ly b fi md me l mf mg">&gt; touch webpack.config.js</span></pre><p id="0186" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Webpack 是用 JavaScript 编写的，运行在 Node.js 这样的无头 JavaScript 环境之上。exports，这是 Node.js 的常见 JS 导出:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="15c2" class="mc kr hi ly b fi md me l mf mg">module.exports = {</span><span id="23f7" class="mc kr hi ly b fi mh me l mf mg">}</span></pre><p id="fbe1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">添加入口点</strong></p><p id="9a8e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">配置文件中的入口点让选择一个特定的文件作为入口点，而不是默认的。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="bbcf" class="mc kr hi ly b fi md me l mf mg">module.exports = {<br/> entry: { index: path.resolve(__dirname, "src", "index.js") }<br/> // or<br/> entry: path.resolve(__dirname, "src", "index.js")<br/> <br/>.<br/>.<br/>.<br/>// other entities<br/>}</span></pre><p id="09e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">增加输出</strong></p><p id="e8b6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与入口点相同，我们可以指定 webpack 应该在哪里创建包，而不是选择默认</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="4d70" class="mc kr hi ly b fi md me l mf mg">module.exports = {<br/>// other entities<br/>.<br/>.<br/>output : {<br/> path: path.resolve(__dirname, "dist"),<br/> filename: "bundle.js"</span><span id="e943" class="mc kr hi ly b fi mh me l mf mg">}<br/>.<br/>.</span><span id="eae9" class="mc kr hi ly b fi mh me l mf mg">}</span></pre><p id="8f4d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">添加现代 javascript 特性加载器</strong></p><p id="b432" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">添加现代 javascript 特性加载器</strong></p><p id="f34a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们对自己的包很满意，但是如果我们想在现代 Js (ES6+)上工作，但不是所有的浏览器，甚至 node.js 环境都不支持所有的现代 Js，该怎么办呢？</p><p id="50c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们可以在我们的项目中使用现代 Js，并创建一个可以在所有平台上运行的支持 Js 的包会怎么样？</p><p id="9715" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">听起来不错！</strong></p><p id="bde5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们为此添加一个加载程序。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="9627" class="mc kr hi ly b fi md me l mf mg">&gt; npm i @babel/core babel-loader @babel/preset-env --save-dev</span></pre><div class="mv mw ez fb mx my"><a href="https://www.valentinog.com/blog/preset-env/" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hj fi z dy nd ea eb ne ed ef hh bi translated">babel preset-env、core-js 和 browserslistrc 如何协同工作</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">我们心爱的前端工具的配置是热熔岩。如今，CLI 工具如 create-react-app 或 Vue CLI 抽象出…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">www.valentinog.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm io my"/></div></div></a></div><p id="5eba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们创建<strong class="ix hj"> babel.config.json </strong></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="3e9d" class="mc kr hi ly b fi md me l mf mg">&gt; touch babel.config.json</span></pre><p id="e956" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并为其添加一些配置</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="24c9" class="mc kr hi ly b fi md me l mf mg">{<br/>  "presets": [<br/>    "<a class="ae iu" href="http://twitter.com/babel/preset-env" rel="noopener ugc nofollow" target="_blank">@babel/preset-env</a>"<br/>  ]<br/>}</span></pre><p id="bf6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们添加 babel-loader babel.config.json</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="236e" class="mc kr hi ly b fi md me l mf mg">module.exports = {<br/>// other entities<br/>.<br/>.<br/>.<br/>module : {<br/> rules: [<br/>   {<br/>    test: /\.js$/,<br/>    exclude: /node_modules/,<br/>    use: ["babel-loader"]<br/>   }<br/>  ] <br/>}<br/>.<br/>.<br/>.</span><span id="cc9f" class="mc kr hi ly b fi mh me l mf mg">}</span></pre><p id="cfa1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了上面的设置，我们可以很好地进行任何现代 JS 项目，但这还不是很有用，因为我们渴望更多，让我们更深入地探索一下 webpack。</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="2f79" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">用 HTML 设置 webpack</h1><p id="fd78" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">默认情况下，Webpack 不知道如何处理 HTML，所以我们需要从其他来源获得一些帮助。</p><p id="b366" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Webpack 支持插件，我们将使用<a class="ae iu" href="https://www.npmjs.com/package/html-webpack-plugin" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">html-web pack-plugin</strong></a></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="79fd" class="mc kr hi ly b fi md me l mf mg">&gt; npm i html-webpack-plugin --save-dev</span></pre><p id="d746" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们将这个插件包含在我们的网络包中</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="75a3" class="mc kr hi ly b fi md me l mf mg">const HtmlWebpackPlugin = require('html-webpack-plugin');</span><span id="665e" class="mc kr hi ly b fi mh me l mf mg">module.exports = {<br/>.<br/>.<br/>  plugins: [<br/>    new HtmlWebpackPlugin({<br/>      template: path.resolve(__dirname, "public", "index.html")<br/>    })<br/>  ]<br/>.<br/>.<br/>};</span></pre><p id="d150" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们用根目录下公共文件夹中的一些样板文件创建一个 index.html</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="5e93" class="mc kr hi ly b fi md me l mf mg">&lt;!-- public/index.html --&gt;</span><span id="097d" class="mc kr hi ly b fi mh me l mf mg">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="UTF-8"&gt;<br/>  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>  &lt;title&gt;Webpack&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;p&gt;doing fine?&lt;/p&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="7357" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们改变 index.js</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="0791" class="mc kr hi ly b fi md me l mf mg">// src/index.js</span><span id="4b8d" class="mc kr hi ly b fi mh me l mf mg">const h1 = document.createElement('h1');<br/>h1.innerText = "Webpack";</span><span id="c0c8" class="mc kr hi ly b fi mh me l mf mg">document.body.appendChild(h1);</span></pre><p id="42ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在如果我们跑</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="9575" class="mc kr hi ly b fi md me l mf mg">&gt; npm run dev</span></pre><p id="b2cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您将看到一个捆绑包将被添加到我们的<strong class="ix hj">index.html</strong></p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="1a73" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">安装开发服务器</h1><p id="cab5" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">为了方便开发，我们需要一个开发服务器，可以直接提供我们的脚本文件</p><p id="49d3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们安装开发服务器包</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="d78f" class="mc kr hi ly b fi md me l mf mg">&gt; npm i webpack-dev-server --save-dev</span></pre><p id="3e09" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还需要对我们的 package.json 进行一些修改</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="8e26" class="mc kr hi ly b fi md me l mf mg">// package.json</span><span id="5468" class="mc kr hi ly b fi mh me l mf mg">"scripts": {<br/>    "dev": "webpack --mode development",<br/>    "start": "webpack serve --open 'chrome'",<br/>  }</span></pre><p id="1148" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看它的工作</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="9882" class="mc kr hi ly b fi md me l mf mg">&gt; npm start</span></pre><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nn"><img src="../Images/b2d97d6b6e75356d68e755661d4f21e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O3QGNlRFV-_VR9Jg"/></div></div></figure><p id="3fe2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">哇，我们已经取得了这么多，但还没有作出反应。我们很快就会做，但首先，我们将为开发人员在他们的项目中设置一些基本要求。</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="937a" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">设置 CSS</h1><p id="f745" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">喜欢 HTML webpack 也不懂 CSS。为了让 webpack 理解并编译成 HTML，我们需要一些 CSS 加载器</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="99d3" class="mc kr hi ly b fi md me l mf mg">&gt; npm i css-loader style-loader --save-dev</span></pre><p id="2567" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">css-loader::用于通过导入加载 css</p><p id="ac5e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">style-loader::用于在 DOM 中加载样式表</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="3d2d" class="mc kr hi ly b fi md me l mf mg">//</span><span id="b8ab" class="mc kr hi ly b fi mh me l mf mg">module.exports = {<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.css$/,<br/>        use: ["style-loader", "css-loader"]<br/>      }<br/>    ]<br/>  },<br/>  //<br/>};</span></pre><p id="641b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里加载程序的顺序很重要，否则构建将是无效的::[从右到左]</p><p id="fe3e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的 css-loader 示例中，首先将导入编译成 css 样式，然后样式-loader 将所有样式部署到 HTML。</p><p id="de33" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">添加 SASS 支持</strong></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="d700" class="mc kr hi ly b fi md me l mf mg">&gt; npm i sass-loader sass --save-dev</span></pre><p id="8e5a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装后，我们需要更新我们的加载数组</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="1076" class="mc kr hi ly b fi md me l mf mg">//</span><span id="dcaf" class="mc kr hi ly b fi mh me l mf mg">module.exports = {<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.css$/,<br/>        use: ["style-loader", "css-loader", "sass-loader"]<br/>      }<br/>    ]<br/>  },<br/>  //<br/>};</span></pre></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="234a" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">设置反应</h1><p id="5a07" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">为了从基础开始设置 react，我们还需要一个支持 jsx。为此，我们需要引入支持反应的巴别塔预设。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="1712" class="mc kr hi ly b fi md me l mf mg">&gt; npm i @babel/preset-react --save-dev</span></pre><p id="0ceb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们需要更新我们的<strong class="ix hj"> babel.config.json </strong></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="036c" class="mc kr hi ly b fi md me l mf mg">// babel.config.json</span><span id="9df1" class="mc kr hi ly b fi mh me l mf mg">{<br/>  "presets": ["<a class="ae iu" href="http://twitter.com/babel/preset-env" rel="noopener ugc nofollow" target="_blank">@babel/preset-env</a>", "<a class="ae iu" href="http://twitter.com/babel/preset-react" rel="noopener ugc nofollow" target="_blank">@babel/preset-react</a>"]<br/>}</span></pre><p id="0b22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们安装必要的反应包</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="8711" class="mc kr hi ly b fi md me l mf mg">npm i react react-dom</span></pre><p id="7284" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于 jsx，webpack 是不知道的，让我们改变我们的 webpack 来支持 jsx</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="bb2f" class="mc kr hi ly b fi md me l mf mg">module.exports = {</span><span id="3d40" class="mc kr hi ly b fi mh me l mf mg">module: {<br/>    rules: [<br/>      {<br/>        test: /\.jsx?$/,<br/>        use: ['babel-loader'],<br/>        exclude: /node_modules/<br/>      }<br/>  .<br/>  .</span><span id="2ea8" class="mc kr hi ly b fi mh me l mf mg">]<br/> }<br/>}</span></pre><p id="b05a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们更改 src 文件夹中的 index.js</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="92eb" class="mc kr hi ly b fi md me l mf mg">// src/index.js</span><span id="41a7" class="mc kr hi ly b fi mh me l mf mg">import React from 'react';</span><span id="b4dc" class="mc kr hi ly b fi mh me l mf mg">import ReactDOM from 'react-dom';</span><span id="3f98" class="mc kr hi ly b fi mh me l mf mg">ReactDOM.render(</span><span id="3726" class="mc kr hi ly b fi mh me l mf mg">&lt;p&gt;Hello Webpack &lt;/p&gt;,</span><span id="f981" class="mc kr hi ly b fi mh me l mf mg">document.getElementById('root')</span><span id="bb2d" class="mc kr hi ly b fi mh me l mf mg">);</span></pre><p id="f479" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">添加一个 id 为<strong class="ix hj"> root </strong> [ <em class="kf">可以使用任何名称</em>的 div 元素</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="0141" class="mc kr hi ly b fi md me l mf mg">// public/index.html</span><span id="0960" class="mc kr hi ly b fi mh me l mf mg">&lt;!DOCTYPE <em class="kf">html</em>&gt;</span><span id="a3f8" class="mc kr hi ly b fi mh me l mf mg">&lt;html <em class="kf">lang</em>="en"&gt;</span><span id="5567" class="mc kr hi ly b fi mh me l mf mg">&lt;head&gt;</span><span id="c925" class="mc kr hi ly b fi mh me l mf mg">&lt;meta <em class="kf">charset</em>="UTF-8"&gt;</span><span id="588a" class="mc kr hi ly b fi mh me l mf mg">&lt;meta <em class="kf">http-equiv</em>="X-UA-Compatible" <em class="kf">content</em>="IE=edge"&gt;</span><span id="549e" class="mc kr hi ly b fi mh me l mf mg">&lt;meta <em class="kf">name</em>="viewport" <em class="kf">content</em>="width=device-width, initial-scale=1.0"&gt;</span><span id="fc2c" class="mc kr hi ly b fi mh me l mf mg">&lt;title&gt;Webpack&lt;/title&gt;</span><span id="daeb" class="mc kr hi ly b fi mh me l mf mg">&lt;/head&gt;</span><span id="bb53" class="mc kr hi ly b fi mh me l mf mg">&lt;body&gt;</span><span id="f7b7" class="mc kr hi ly b fi mh me l mf mg">&lt;div <em class="kf">id</em>="root"&gt;&lt;/div&gt;</span><span id="0963" class="mc kr hi ly b fi mh me l mf mg">&lt;/body&gt;</span><span id="1c18" class="mc kr hi ly b fi mh me l mf mg">&lt;/html&gt;</span></pre><p id="fed9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们运行我们的应用程序</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="438e" class="mc kr hi ly b fi md me l mf mg">&gt; npm start</span></pre><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es no"><img src="../Images/718d66ce899715b1270783b9a0fbc34e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wYDhw9RH4PiODrd50M8N2g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在浏览器上运行的 React 应用程序向 Webpack 问好</figcaption></figure><p id="68a6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">耶，我们完成了我们的反应设置。现在我们可以开始优化 react 项目了。</p><p id="9db4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">谢谢，你花了这么多时间做了一件了不起的工作。👏🏼👏🏼</strong></p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="7b25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">等等！什么？</strong></p><p id="93b1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">就是这个？</strong></p><p id="ce7e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不，我只是在开玩笑，以上只是对 webpack 和 react 的基本设置，让我们开始调整我们的应用程序，以获得最佳结果。</p><p id="2448" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">(这里最好的不是最好的，我们总是有改进的余地。我是根据我目前的知识写这篇文章的。请随时纠正我，因为总有改进的机会。)</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="67e0" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">调整 Webpack</h1><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es np"><img src="../Images/509404e711536fcf856ae29d3a45e8d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N3kA-woDpEtm6_e2"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@denisseleon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹尼斯·莱昂</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="bb32" class="mc kr hi bd ks mi mj mk kw ml mm mn la jg mo mp le jk mq mr li jo ms mt lm mu bi translated"><strong class="ak">添加环境变量</strong></h2><p id="9ee1" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">对于浏览器来说，捆绑包不能访问任何环境变量，所以为了解决这个问题，我们添加了特定环境变量，通过这些变量我们可以控制外部构建及其性质</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="b2da" class="mc kr hi ly b fi md me l mf mg">// wepack.config.json</span><span id="850a" class="mc kr hi ly b fi mh me l mf mg">const webpack = require('webpack')</span><span id="5ad8" class="mc kr hi ly b fi mh me l mf mg">.<br/>.<br/>.<br/>plugins: [<br/> new webpack.EnvironmentPlugin(["ENV1", "ENV2"])<br/> // it will look for these environment variable in the working environment<br/>]<br/>.<br/>.</span><span id="1954" class="mc kr hi ly b fi mh me l mf mg">// or<br/>.<br/>.<br/>.<br/>plugins: [<br/> new webpack.DefinePlugin({<br/>   PRODUCTION: JSON.stringify(true),<br/>   VERSION: JSON.stringify('5fa3b9'),<br/>   'typeof window': JSON.stringify('object'),<br/>   'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),<br/>});<br/>]</span></pre></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h2 id="7a05" class="mc kr hi bd ks mi mj mk kw ml mm mn la jg mo mp le jk mq mr li jo ms mt lm mu bi translated">仅解析某些文件</h2><p id="723d" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">仅解析某些文件可以提高可读性，并且用 webpack 组织起来花费的时间也更少</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="dcef" class="mc kr hi ly b fi md me l mf mg">// wepack.config.json</span><span id="1742" class="mc kr hi ly b fi mh me l mf mg">.<br/>.<br/>resolve: {<br/>    extensions: ['.js', '.jsx']<br/>}<br/>.<br/>.</span></pre></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h2 id="d993" class="mc kr hi bd ks mi mj mk kw ml mm mn la jg mo mp le jk mq mr li jo ms mt lm mu bi translated">支持延迟加载/代码分割</h2><p id="02b4" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">如果我们只提供所需的文件，延迟加载和代码分割可以极大地减少包的大小，延迟加载和代码分割在提高性能方面帮了我们很多</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="2f11" class="mc kr hi ly b fi md me l mf mg">// lazy load your react component with lazy</span><span id="59e6" class="mc kr hi ly b fi mh me l mf mg">// webpack.config.js</span><span id="93a7" class="mc kr hi ly b fi mh me l mf mg">const path = require('path');</span><span id="d53a" class="mc kr hi ly b fi mh me l mf mg">output: {<br/>    chunkFilename: 'scripts/[name].[fullhash:8].bundle.js',<br/>    filename: 'scripts/[name].[fullhash:8].bundle.js',<br/>    path: path.resolve(__dirname, './dist'),<br/>    publicPath: '/',<br/>  }</span></pre><p id="aef2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">为什么选择 fullhash？</strong></p><p id="0684" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">浏览器倾向于缓存这些包，以防如果你提供一个新的包，它将使用旧的缓存文件，由于相同的名称，这可能会导致错误，为了保存，我们添加哈希，如果我们更新我们的代码库，它会改变，所以我们的最终用户将获得最新的功能，而不用担心任何事情。</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h2 id="b970" class="mc kr hi bd ks mi mj mk kw ml mm mn la jg mo mp le jk mq mr li jo ms mt lm mu bi translated">优化构建</h2><p id="7c7a" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">我不打算详细说明，但这里我们将我们的包分成多个包，这样我们可以单独下载它们，使我们的包变小，并按需需要包。更多详情请点击以下链接</p><div class="mv mw ez fb mx my"><a href="https://webpack.js.org/configuration/optimization/" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hj fi z dy nd ea eb ne ed ef hh bi translated">优化| webpack</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">由于版本 4 webpack 根据所选的为您运行优化，所有优化仍然适用于…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">webpack.js.org</p></div></div><div class="nh l"><div class="nq l nj nk nl nh nm io my"/></div></div></a></div><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="40ca" class="mc kr hi ly b fi md me l mf mg">// webpack.config.js</span><span id="7dbb" class="mc kr hi ly b fi mh me l mf mg">optimization: {<br/>    runtimeChunk: 'single',<br/>    splitChunks: {<br/>      chunks: 'all',<br/>      maxInitialRequests: Infinity,<br/>      minSize: 0,<br/>      cacheGroups: {<br/>        vendor: {<br/>          test: /[\\/]node_modules[\\/](!lodash)/, <br/>          // Here I don't want lodash to be included, you can remove                 (!lodash) to inclue it</span><span id="79f9" class="mc kr hi ly b fi mh me l mf mg">          name(module) {<br/>          <br/>// get the name. E.g. node_modules/packageName/not/this/part.js<br/>// or node_modules/packageName</span><span id="8fa1" class="mc kr hi ly b fi mh me l mf mg">          const packageName = module.context.match(/[\\/]node_modules[\\/](.*?)([\\/]|$)/)[1];</span><span id="7c5c" class="mc kr hi ly b fi mh me l mf mg">// npm package names are URL-safe, but some servers don't like @ symbols<br/>        return `npm.${packageName.replace('@', '')}`;<br/>        },<br/>      },<br/>    },<br/>  },<br/>  }</span></pre></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h2 id="daf0" class="mc kr hi bd ks mi mj mk kw ml mm mn la jg mo mp le jk mq mr li jo ms mt lm mu bi translated">一些重要的领导人</h2><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="94e8" class="mc kr hi ly b fi md me l mf mg">&gt; npm i file-loader url-loader --save-dev</span></pre><p id="2409" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们需要更新我们的规则</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="84d5" class="mc kr hi ly b fi md me l mf mg">module: {<br/> rules: [<br/>  {<br/>        test: /\.(png|svg|jpg|jpeg|gif|ico)$/i,<br/>        loader: 'file-loader',<br/>          options: {<br/>            name: '[name].[ext]',<br/>            outputPath:"images/", // create images folder and push all images.<br/>            publicPath: "../images/",<br/>            esModule: false<br/>          }<br/>      },<br/>      {<br/>        test: /\.(woff)$/i,<br/>        loader: 'file-loader',<br/>          options: {<br/>            name: '[name].[ext]',<br/>            outputPath:"fonts/",<br/>            publicPath: "fonts/",<br/>            esModule: false <br/>// take non import files into consideration<br/>          }<br/>      }<br/> ]<br/>}</span></pre></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h2 id="aef0" class="mc kr hi bd ks mi mj mk kw ml mm mn la jg mo mp le jk mq mr li jo ms mt lm mu bi translated">一些额外的有用插件</h2><p id="0d2a" class="pw-post-body-paragraph iv iw hi ix b iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated"><a class="ae iu" href="https://www.npmjs.com/package/compression-webpack-plugin" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">压缩你所有的构建</strong> </a></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="4cfe" class="mc kr hi ly b fi md me l mf mg">&gt; npm i compression-webpack-plugin --save-dev</span></pre><p id="4064" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.npmjs.com/package/webpack-utf8-bom" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> Utf-8 支持</strong> </a></p><p id="4f02" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有时你会发现一些意想不到的错误，比如不能识别一些模式或测试</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="f2bd" class="mc kr hi ly b fi md me l mf mg">&gt; npm i webpack-utf8-bom --save-dev</span></pre><p id="53b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.npmjs.com/package/error-overlay-webpack-plugin" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">显示错误如同创建 React App </strong> </a></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="8ecd" class="mc kr hi ly b fi md me l mf mg">npm i error-overlay-webpack-plugin --save-dev</span><span id="e9c8" class="mc kr hi ly b fi mh me l mf mg"># add devtool<br/># devtool = 'cheap-module-source-map';</span></pre><p id="b9b0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.npmjs.com/package/webpack-bundle-analyzer" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">集束分析仪</strong> </a></p><p id="a985" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当您想要减少捆包尺寸时，捆包处理非常方便，这将有助于您以最小的捆包占地面积高效地为您的申请人服务。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="e109" class="mc kr hi ly b fi md me l mf mg">&gt; npm i webpack-bundle-analyzer --save-dev</span></pre><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/d03c2c9517294096d965b3e9b52ff917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZvKnu2pq2EXonzhnv9Osog.png"/></div></div></figure><p id="4b20" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">用途:</strong></p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="4aae" class="mc kr hi ly b fi md me l mf mg">const CompressionPlugin = require('compression-webpack-plugin');<br/>const BomPlugin = require('webpack-utf8-bom');<br/>const ErrorOverlayPlugin = require('error-overlay-webpack-plugin');<br/>const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;</span><span id="5072" class="mc kr hi ly b fi mh me l mf mg">// in plugins array add</span><span id="e237" class="mc kr hi ly b fi mh me l mf mg">plugins: [ <br/>new CompressionPlugin(), <br/>new BomPlugin(true), <br/>new ErrorOverlayPlugin(),<br/>new BundleAnalyzerPlugin({<br/>    analyzerPort: 8001,<br/>    reportTitle: "Bundle Analyzer"<br/>  })<br/>]</span></pre><p id="3022" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">自定义插件</strong></p><p id="9465" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有时你需要配置或限制某些东西，但你找不到任何解决方案。在这种情况下，您可以创建自己的插件。</p><figure class="lt lu lv lw fd ij"><div class="bz dy l di"><div class="ns nt l"/></div></figure><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="03cb" class="mc kr hi ly b fi md me l mf mg">// this plugin will throw errow if environment variables are not present.<br/>// and stop creating bad build</span><span id="8cb9" class="mc kr hi ly b fi mh me l mf mg">// --[use]----- in webpack.config.js -----------</span><span id="4323" class="mc kr hi ly b fi mh me l mf mg">plugins: [new EnvCheckerPlugin()]</span></pre><p id="0142" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">唷！！这么大的文章。不是吗？</p><p id="143b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们给它一个句号，但在下一篇文章中，我们将涵盖更多的主题，我们帮助我们的应用程序更加优化和性能。</p><p id="0ab2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">敬请关注。</p><p id="c446" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">注意:请建议更先进的技术，或者如果你认为我留下了一些漏洞，请指出这些问题。要了解更多细节，请访问他们的文档或将他们添加到评论中。</strong></p><blockquote class="kc kd ke"><p id="4bfc" class="iv iw kf ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hb bi translated">查看本系列的另一篇文章<a class="ae iu" href="https://premeena.medium.com/webpack-react-optimised-differential-serving-b53d4cf2a3da?source=your_stories_page-------------------------------------" rel="noopener"> Webpack + React 优化差分服务</a></p></blockquote><p id="56c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谢谢你的时间。</p></div></div>    
</body>
</html>