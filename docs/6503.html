<html>
<head>
<title>Building LinkedIn Chat with Smart Replies in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中构建带有智能回复的LinkedIn聊天</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/building-linkedin-chat-with-smart-replies-in-flutter-eb51066c07b?source=collection_archive---------0-----------------------#2022-03-10">https://medium.com/nerd-for-tech/building-linkedin-chat-with-smart-replies-in-flutter-eb51066c07b?source=collection_archive---------0-----------------------#2022-03-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d39c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想知道LinkedIn聊天如何处理那些与你和你的同事的信息相对应的好的小建议吗？好了，不要再想了。在本文中，我们将构建这样的环境。对于本教程，我们将使用<strong class="ih hj"> Flutter </strong>，这是最著名的跨平台移动应用开发框架之一。除此之外，我们还将学习诸如<strong class="ih hj"> Firebase </strong>、<strong class="ih hj">雷达</strong>、<strong class="ih hj">谷歌ML工具包</strong>等技术</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/6cc326ca9c7ca25aa0675d48c0294b0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JPkVxDrgjLxA25s9U70rJA.png"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="e493" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你更喜欢视频教程，我会帮你搞定。完整实现看下面视频，我们一起来建设这个项目！</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jx jy l"/></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="45fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Firebase是谷歌应用开发的旗舰产品。从技术上来说，它是一个<strong class="ih hj">后端即服务</strong> ( <a class="ae jz" href="https://blog.back4app.com/backend-as-a-service-firebase/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> BaaS </strong> </a>)，这意味着我们可以获得大多数常用的后端功能，从而确保更快的开发周期。在我们的例子中，我们将使用Firebase对用户进行身份验证，即<strong class="ih hj"> Firebase Auth </strong>和它的NoSQL数据库<strong class="ih hj"> Cloud Firestore </strong>。</p><p id="9488" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">雷达是一个著名的位置服务提供商，我们将使用它的反向地理编码API从用户位置获取地址。</p><p id="7b26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jz" href="https://developers.google.com/ml-kit" rel="noopener ugc nofollow" target="_blank"> Google ML Kit </a>提供了很多常用的机器学习模型作为移动应用的API——比如<strong class="ih hj">视觉API</strong>(物体检测、自拍分割等。)和<strong class="ih hj">自然语言API</strong>(翻译、文字检测、智能回复等。).我们将对<strong class="ih hj">智能回复API </strong>特别感兴趣。让我们现在开始，看看如何使用这些。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="9571" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您知道我们还可以使用<strong class="ih hj">地图框</strong>进行反向地理编码和其他功能吗？它和谷歌地图一样好，只是更便宜。<a class="ae jz" rel="noopener" href="/nerd-for-tech/turn-by-turn-navigation-with-mapbox-16f874567b3c">在这里</a>我将谈论我们如何使用它的导航API来构建一个<strong class="ih hj">优步</strong>式的应用程序。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="1999" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">入门指南</h1><p id="88a2" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">为了便于入门，我为您准备了一个入门应用程序，您只需做一些更改就可以运行它。该应用程序有一个基本的LinkedIn式的用户界面和聊天功能的布局，我们已经实现了Firebase和Radar。您可以在这里找到GitHub资源库的链接。</p><div class="ld le ez fb lf lg"><a href="https://github.com/Imperial-lord/linkedin-clone" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab dw"><div class="li ab lj cl cj lk"><h2 class="bd hj fi z dy ll ea eb lm ed ef hh bi translated">GitHub-Imperial-Lord/linkedin-clone:让我们探索LinkedIn的所有令人惊叹的功能，并…</h2><div class="ln l"><h3 class="bd b fi z dy ll ea eb lm ed ef dx translated">让我们一起探索LinkedIn的所有惊人特性，同时从…构建应用程序</h3></div><div class="lo l"><p class="bd b fp z dy ll ea eb lm ed ef dx translated">github.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu jn lg"/></div></div></a></div><p id="ed01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行初始应用程序所需的更改可以在我们使用脸书的开源文档工具<strong class="ih hj"> Docusaurus </strong>构建的文档网站中找到。</p><div class="ld le ez fb lf lg"><a href="https://imperial-lord.github.io/linkedin-clone/" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab dw"><div class="li ab lj cl cj lk"><h2 class="bd hj fi z dy ll ea eb lm ed ef hh bi translated">LinkedIn克隆| LinkedIn克隆</h2><div class="ln l"><h3 class="bd b fi z dy ll ea eb lm ed ef dx translated">LinkedIn是一个非常常用的应用程序，学习如何构建一个将提供深入的见解如何…</h3></div><div class="lo l"><p class="bd b fp z dy ll ea eb lm ed ef dx translated">帝国领主. github.io</p></div></div></div></a></div><p id="074f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你运行了这个应用程序，它看起来就像这样—</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/57073e1f6670e2115ecf40a58b1e4e43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MnFRTHca7Ta2aI3F7CInCA.gif"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">一个25秒的GIF展示了在做任何改变之前最初的应用程序是什么样子</figcaption></figure><h1 id="2de2" class="ka kb hi bd kc kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx bi translated">构建聊天用户界面</h1><p id="56c4" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">我们的聊天界面将由3个部分(和相应的3个部件)组成</p><ol class=""><li id="5c99" class="mf mg hi ih b ii ij im in iq mh iu mi iy mj jc mk ml mm mn bi translated"><strong class="ih hj">用户信息</strong> —用户的姓名和标题</li><li id="fa3b" class="mf mg hi ih b ii mo im mp iq mq iu mr iy ms jc mk ml mm mn bi translated"><strong class="ih hj">聊天窗口</strong> —一个可滚动的消息列表，包含用户详细信息和发送消息的时间戳</li><li id="ecc4" class="mf mg hi ih b ii mo im mp iq mq iu mr iy ms jc mk ml mm mn bi translated"><strong class="ih hj">聊天输入</strong> —使用<code class="du mt mu mv mw b">CupertinoTextField</code>和动画按钮的输入字段，显示添加图像、gif等的附加选项。在这里，我们将使用<code class="du mt mu mv mw b">Chip</code>小部件提供建议。</li></ol><h2 id="8dca" class="mx kb hi bd kc my mz na kg nb nc nd kk iq ne nf ko iu ng nh ks iy ni nj kw nk bi translated">用户信息</h2><p id="a7b6" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">为了构建这个部分，我们将使用我们使用<strong class="ih hj">提供者</strong>和<strong class="ih hj"> MobX </strong>维护的应用程序范围的状态管理。为了显示用户名和标题，我们只需要在UI小部件<code class="du mt mu mv mw b">UserInfo()</code>中使用<code class="du mt mu mv mw b">userStore.name</code>和<code class="du mt mu mv mw b">userStore.headline</code>。这是完成后的样子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nl"><img src="../Images/4810caa9705b4283f5672615ad16da41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ZBCcE0p7DFbdRCN8ZavXw.png"/></div></div></figure><h2 id="140f" class="mx kb hi bd kc my mz na kg nb nc nd kk iq ne nf ko iu ng nh ks iy ni nj kw nk bi translated">聊天窗口</h2><p id="c865" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">为了建立这一点，我们利用了一个<code class="du mt mu mv mw b">StreamBuilder</code>，并听取流:</p><pre class="je jf jg jh fd nm mw nn no aw np bi"><span id="42a8" class="mx kb hi mw b fi nq nr l ns nt">FirebaseFirestore.instance.collection(groupChatId).doc(groupChatId).collection().snapshots()</span></pre><p id="b9a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们从那里获取数据(同时监听变化)，我们使用<code class="du mt mu mv mw b">ListView.builder()</code>按照时间降序呈现数据。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nu jy l"/></div></figure><p id="3a31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还利用一个助手函数来知道何时显示名称和时间戳(或者我称之为头)，<strong class="ih hj">只有当两个连续的消息来自不同的用户时才会显示。</strong> <em class="jw">你可以根据自己的需要更改最后一部分，来设计不同的UX。例如，您可以在两条消息相差特定时间(比如2小时或更长时间)时显示标题。</em></p><h2 id="cf19" class="mx kb hi bd kc my mz na kg nb nc nd kk iq ne nf ko iu ng nh ks iy ni nj kw nk bi translated">聊天输入</h2><p id="434b" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">为了构建这个，我们使用<code class="du mt mu mv mw b">CupertinoTextField</code>，每当提交输入时，我们使用<code class="du mt mu mv mw b">ChatStore</code>中的<code class="du mt mu mv mw b">onSendMessage</code>函数将内容存储到Firestore，如下所示。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nu jy l"/></div></figure><p id="c690" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还添加了一个动画按钮。在它的帮助下，使用<code class="du mt mu mv mw b">Visibility</code>小部件，我们创建了这个漂亮的动画来切换查看额外的选项，以添加图像、gif等。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="b8b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">喜欢这篇文章吗？继续<a class="ae jz" rel="noopener" href="/@absatyaprakash01">跟随我</a>，也记得把你自己添加到我的邮件列表中，这样<strong class="ih hj">每当我发布</strong>的时候，你都会收到一封电子邮件！</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="c523" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">显示智能回复</h1><p id="578e" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">现在进入最有趣的部分，我们将使用这个插件— <a class="ae jz" href="https://pub.dev/packages/smart_reply" rel="noopener ugc nofollow" target="_blank"> smart_reply </a>，它利用<strong class="ih hj"> Google ML Kit自然语言API</strong>来生成智能回复。最棒的是，由于这些模型在设备上运行，结果比传统上在服务器上运行要快得多。这就是生成建议的函数的样子。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nu jy l"/></div></figure><p id="b77c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，如果旧的建议不同于新的建议，我们在这里重建小部件(这样我们可以确保重建更有效)。建议以字符串数组的形式生成，最大长度为3。然后，我们利用这些作为芯片的内容，每当芯片被点击以发送消息时，我们就像以前一样调用相同的函数<code class="du mt mu mv mw b">onSendMessage</code>。最终的结果看起来像这样(点击下面的视频链接)—</p><div class="ld le ez fb lf lg"><a href="https://www.linkedin.com/feed/update/urn:li:activity:6906414938382856192/" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab dw"><div class="li ab lj cl cj lk"><h2 class="bd hj fi z dy ll ea eb lm ed ef hh bi translated">LinkedIn上的AB Satyaprakash:# Docusaurus # flutter # LinkedIn</h2><div class="ln l"><h3 class="bd b fi z dy ll ea eb lm ed ef dx translated">我只是克隆了LinkedIn聊天和智能回复🔥你也可以！😄查看评论中的第一个链接，找到…</h3></div><div class="lo l"><p class="bd b fp z dy ll ea eb lm ed ef dx translated">www.linkedin.com</p></div></div><div class="lp l"><div class="nv l lr ls lt lp lu jn lg"/></div></div></a></div><h1 id="c919" class="ka kb hi bd kc kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx bi translated">结论</h1><p id="38aa" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">就这样，我们实现了一个类似LinkedIn的聊天工具，它也支持智能回复。好的一面是，我们可以将本教程中的步骤复制到任何其他项目中，在这些项目中，您可能想要使用聊天功能(以及可选的智能回复功能)。简而言之，这就是最终实现的样子—</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/c93bd11009de84f95256871fdfbcd05f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DmU9QQoZE7cyiw4Ej2YvZA.png"/></div></div></figure><p id="9619" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有任何问题或建议，请随时联系我。您可以在这些社交媒体平台上关注我，如<a class="ae jz" href="https://www.linkedin.com/in/ab-satyaprakash/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae jz" href="https://www.youtube.com/channel/UCJ6D0HS8c9Il-eX5lGbAyGg" rel="noopener ugc nofollow" target="_blank"> YouTube </a>、<a class="ae jz" href="https://twitter.com/AbSatyaprakash" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae jz" href="https://www.instagram.com/absatyaprakash/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>了解更多更新内容！</p><p id="c0dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">一如既往！黑客快乐！😇</strong></p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="7894" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">加入我的电子邮件列表，获得更多精彩的教程和编程博客 ❤️</p></div></div>    
</body>
</html>