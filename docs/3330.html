<html>
<head>
<title>Microservices (Part 1) — Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务(第一部分)——简介</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/microservices-part-1-introduction-b1a10c2f26c?source=collection_archive---------16-----------------------#2021-06-06">https://medium.com/nerd-for-tech/microservices-part-1-introduction-b1a10c2f26c?source=collection_archive---------16-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a7f4794e6a7a95496d6d6f5ccc20100a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DeHEZfBdLjpYnM6wZ4fQtg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图1:微服务(来源:谷歌)</figcaption></figure><h1 id="084a" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">整体应用架构</h1><p id="67b3" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在微服务出现之前，单片应用程序架构是大多数开发人员创建企业级应用程序所遵循的架构。在单片应用程序中，<strong class="ju hj">所有的业务模块都在一个单独的进程中运行，这个进程通常是一个WAR/EAR文件</strong>。这些不同模块的类可以互相交流，也可以使用相同的库。这些模块之间有许多耦合。此外，整体式应用程序通常使用单个数据库，其中包含与所有可用业务模块相关的多个表。单一应用程序包含3个主要层，即客户端层、服务器层和数据库层。</p><p id="732f" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><strong class="ju hj">例如:</strong>考虑一个电子商务应用程序。该应用程序可能包含以下组件，</p><ul class=""><li id="fa53" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated">网络服务器</li><li id="b3cd" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">负载平衡器</li><li id="f20b" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">目录服务</li></ul><h2 id="4283" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated"><strong class="ak">单片的优点</strong></h2><ul class=""><li id="1873" class="kv kw hi ju b jv jw jz ka kd lx kh ly kl lz kp la lb lc ld bi translated">易于测试整体应用程序(集成测试)。</li><li id="5d94" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">易于监控。</li><li id="97f8" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">简单。</li></ul><p id="6183" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">然而，这种体系结构风格对于大型企业来说是不够的，因为它有一些主要的缺点。</p><ul class=""><li id="b092" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated">应用程序不同模块之间的强耦合。</li><li id="d9b8" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">应用程序规模大，性质复杂。</li><li id="59e4" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">开发人员更难理解并快速做出更改。</li><li id="45bd" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">任何更新都需要整个应用程序的完全重新部署。</li><li id="f318" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">扩展性较差。</li><li id="53f0" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">可重用性较差。</li></ul><h1 id="debd" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">微服务架构</h1><p id="31cb" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">定义—</p><blockquote class="ma"><p id="f751" class="mb mc hi bd md me mf mg mh mi mj kp dx translated"><em class="mk">微服务是一种将单个应用开发为一套小型服务的方法，每个服务运行自己的进程，并与轻量级机制(通常是HTTP资源API)进行通信。</em></p></blockquote><p id="466a" class="pw-post-body-paragraph js jt hi ju b jv ml jx jy jz mm kb kc kd mn kf kg kh mo kj kk kl mp kn ko kp hb bi translated">微服务基本上是一种架构风格，有助于克服单片应用程序面临的问题。在微服务架构中，所有服务都应该<strong class="ju hj">围绕特定的业务能力</strong>构建，并且应该<strong class="ju hj">可独立部署</strong>。这些服务可以用不同的编程语言编写，也可以使用不同的数据存储技术。</p><h2 id="5cb2" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">扩展:整体服务与微服务</h2><figure class="mr ms mt mu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/0efa0b3a6edc445cb260180d280b1944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrYgxcTU9K2TkcMPwb3d0w.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图2:扩展整体服务与微服务</figcaption></figure><p id="c1dc" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">单一应用程序必须在多台服务器上复制整个系统才能扩展。这是一个非常复杂和昂贵的过程，有很多缺点。由于复制实例中可能不需要某些功能，因此存在巨大的资源浪费。</p><p id="c63a" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">微服务应用程序通过在服务器之间仅分配所需的服务来进行扩展。这比单芯片应用中的缩放有许多优势。</p><ul class=""><li id="2aed" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated">资源得到更好的利用。</li><li id="9acf" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">总体费用更少。</li><li id="5d68" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">需要完成的配置更少。</li></ul><h2 id="e1da" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">微服务中的缩放立方体</h2><figure class="mr ms mt mu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/3752d38b808993f9248a2d36c87646c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0DpDxw5yaA6eFqiIk2gFkw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图3:缩放立方体</figcaption></figure><p id="0935" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">Scale cube是一本名为《<a class="ae mw" href="https://www.goodreads.com/book/show/7282390-the-art-of-scalability" rel="noopener ugc nofollow" target="_blank">可伸缩性的艺术</a>》的名著中介绍的一种伸缩模型。根据该模型，缩放在3个主轴上进行，即X、Y和z。</p><ul class=""><li id="0ecc" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated"><strong class="ju hj"> X轴</strong>:指在负载均衡器后面运行一个应用的多个副本的过程。这种扩展的问题在于，所有拷贝都需要潜在地访问所有数据。</li><li id="2fa2" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated"><strong class="ju hj"> Y轴:</strong>指的是通过将应用拆分成多个不同的服务来扩展应用。每个服务都有一个专用功能。</li><li id="15e6" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated"><strong class="ju hj"> Z轴:</strong>每台服务器运行相同的代码副本。但是，每台服务器只负责一部分数据。</li></ul><h1 id="f5df" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">微服务的特征</h1><p id="aaec" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">(据<a class="ae mw" href="https://martinfowler.com/articles/microservices.html" rel="noopener ugc nofollow" target="_blank">martinflower.com</a>。请查看网站了解更多信息。)</p><h2 id="1d2e" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">通过服务的组件化</h2><p id="a122" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在微服务架构中，所有服务都被视为组件。这意味着这些服务<strong class="ju hj">之间不共享SDK或库</strong>。这样做是为了避免这些服务之间的耦合。正如在第一部分中提到的，这些服务是可独立部署的。这意味着这些服务可以在不影响应用程序中其他服务的情况下部署，因为耦合度很低。</p><h2 id="06a4" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">围绕业务能力组织</h2><p id="d5ee" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">想想一个传统的组织。团队是根据技术来组织的。举个例子，可能有前端团队、后端团队、QA团队等团队。微服务架构遵循不同的团队结构。</p><p id="eb4e" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在微服务架构中，团队组织为库存、财务、运输等。这意味着团队是根据业务能力来组织的。这些团队是跨职能的。他们可能包含来自各个方面的人，如开发人员、QA人员等。团队可以包含8-10人(2个披萨团队)。</p><h2 id="9d42" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">产品而非项目</h2><p id="367d" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在传统的软件开发模型中，交付团队会根据现在的需求创建软件并交付。他们可能会将软件移交给维护团队，并转移到一个新的项目。</p><p id="3abd" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在微服务架构中，团队在组件的整个生命周期中都拥有组件的所有权。因此，这些组件被命名为产品。</p><h2 id="0b88" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">智能端点和哑管道</h2><p id="e42b" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在传统的软件开发过程中，开发人员使用ESB等强大的中间件来路由消息、应用业务逻辑等。在微服务架构中，智能线路在端点中，而不在端点之间。这样做是为了使应用程序更具解耦性和内聚性。</p><h2 id="756e" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">分权治理</h2><p id="13d5" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在传统的整体式应用程序开发过程中，有一组关于要遵循的技术和模式的预定义的固定规则。例如，应用模块用相同的语言编写，并且可以使用相同类型的数据库。这在微服务架构中是不同的。每个服务都有自己的治理。</p><h2 id="ac30" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">分散数据管理</h2><p id="bf9c" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在整体式应用程序中，对数据库的更改会影响所有组件，因为只有一个中央数据库。在微服务架构中，每个服务都对自己的数据和持久性负责。没有唯一的数据模型方法。</p><h2 id="f93e" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">基础设施自动化</h2><p id="8859" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">它是用于减少人类与It系统交互的技术。这是通过为可重复的动作创建脚本或函数来实现的。微服务需要实现持续交付、蓝绿部署等服务。</p><h2 id="98d7" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">故障设计</h2><p id="5e30" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">所有服务都有可能在给定时间失败。因此，必须以正确的方式处理这些故障。微服务架构可以使用监控工具来检查不同服务的状态，并更好地为故障做准备。此外，还有像“混沌钱”这样的工具，用于测试服务的弹性。</p><h2 id="dbc7" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">进化设计</h2><p id="5200" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在微服务架构中，应该有更细粒度的发布计划。应始终尝试识别变更影响，并尽快修复它们。</p><h1 id="1c04" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">要点</h1><ul class=""><li id="2b4e" class="kv kw hi ju b jv jw jz ka kd lx kh ly kl lz kp la lb lc ld bi translated">需要注意的是，微服务架构的实现应该非常小心。如果开发人员试图创建细粒度的微服务，该架构将会失败。为什么？</li></ul><p id="d14b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">考虑一个应用程序有用户登录和用户注册过程的情况。如果我们尝试将这两个功能放在不同的服务中会怎么样？</p><p id="b6d5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">由于微服务需要时间相互通信，应用程序会变慢。因此，在这些服务之间应该有<strong class="ju hj">正确的平衡。</strong></p><ul class=""><li id="cef5" class="kv kw hi ju b jv kq jz kr kd kx kh ky kl kz kp la lb lc ld bi translated">在实现微服务架构之前，开发人员应该始终对应用程序的领域和目标有一个清晰的想法。</li><li id="0233" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">开发者可以使用任何语言来开发微服务。然而，大多数开发人员选择Java。</li><li id="6394" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">设计应该总是一个<strong class="ju hj">领域驱动的设计</strong>。在尝试开发解决方案之前，必须对与特定领域相关的流程和规则有很好的理解。</li></ul><h2 id="6753" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">微服务架构的优势</h2><ul class=""><li id="64d6" class="kv kw hi ju b jv jw jz ka kd lx kh ly kl lz kp la lb lc ld bi translated">高度可扩展。</li><li id="5607" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">因为没有依赖性，所以易于迁移。</li><li id="237f" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">高度可用。</li><li id="45d0" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">代码库更容易理解。</li><li id="c888" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">保持模块化。</li></ul><h2 id="e11e" class="lj iv hi bd iw lk ll lm ja ln lo lp je kd lq lr ji kh ls lt jm kl lu lv jq lw bi translated">微服务架构的缺点</h2><ul class=""><li id="24b4" class="kv kw hi ju b jv jw jz ka kd lx kh ly kl lz kp la lb lc ld bi translated">依赖性管理很难。</li><li id="9ff6" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">更难监控整个应用程序。</li><li id="404b" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">更难测试。</li><li id="8c5d" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">更难进行版本控制和部署。</li><li id="aaae" class="kv kw hi ju b jv le jz lf kd lg kh lh kl li kp la lb lc ld bi translated">理解整个应用程序架构很复杂。</li></ul><p id="b5b6" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">本文的第2部分描述了微服务架构中需要遵循的基本最佳实践。我使用了Krishntha Dinesh先生的以下播放列表来收集所需的信息。</p><figure class="mr ms mt mu fd ij"><div class="bz dy l di"><div class="mx my l"/></div></figure></div><div class="ab cl mz na gp nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="hb hc hd he hf"><h1 id="4d6c" class="iu iv hi bd iw ix ng iz ja jb nh jd je jf ni jh ji jj nj jl jm jn nk jp jq jr bi translated">参考</h1><div class="nl nm ez fb nn no"><a href="https://martinfowler.com/articles/microservices.html" rel="noopener  ugc nofollow" target="_blank"><div class="np ab dw"><div class="nq ab nr cl cj ns"><h2 class="bd hj fi z dy nt ea eb nu ed ef hh bi translated">微服务</h2><div class="nv l"><h3 class="bd b fi z dy nt ea eb nu ed ef dx translated">詹姆斯·刘易斯·詹姆斯·刘易斯是ThoughtWorks的首席顾问，也是技术顾问委员会的成员。詹姆斯的…</h3></div><div class="nw l"><p class="bd b fp z dy nt ea eb nu ed ef dx translated">martinfowler.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc io no"/></div></div></a></div><div class="nl nm ez fb nn no"><a href="https://martinfowler.com/tags/domain%20driven%20design.html" rel="noopener  ugc nofollow" target="_blank"><div class="np ab dw"><div class="nq ab nr cl cj ns"><h2 class="bd hj fi z dy nt ea eb nu ed ef hh bi translated">领域驱动设计</h2><div class="nv l"><h3 class="bd b fi z dy nt ea eb nu ed ef dx translated">在编程时，我经常发现将事物表示为一个复合物是很有用的。2D坐标由一个x值组成…</h3></div><div class="nw l"><p class="bd b fp z dy nt ea eb nu ed ef dx translated">martinfowler.com</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc io no"/></div></div></a></div><div class="nl nm ez fb nn no"><a href="https://microservices.io/patterns/microservices.html" rel="noopener  ugc nofollow" target="_blank"><div class="np ab dw"><div class="nq ab nr cl cj ns"><h2 class="bd hj fi z dy nt ea eb nu ed ef hh bi translated">微服务模式:微服务架构模式</h2><div class="nv l"><h3 class="bd b fi z dy nt ea eb nu ed ef dx translated">您正在开发一个服务器端企业应用程序。它必须支持各种不同的客户端，包括…</h3></div><div class="nw l"><p class="bd b fp z dy nt ea eb nu ed ef dx translated">微服务. io</p></div></div><div class="nx l"><div class="oe l nz oa ob nx oc io no"/></div></div></a></div><div class="nl nm ez fb nn no"><a href="https://microservices.io/articles/scalecube.html" rel="noopener  ugc nofollow" target="_blank"><div class="np ab dw"><div class="nq ab nr cl cj ns"><h2 class="bd hj fi z dy nt ea eb nu ed ef hh bi translated">比例立方体</h2><div class="nv l"><h3 class="bd b fi z dy nt ea eb nu ed ef dx translated">《可伸缩性的艺术》这本书描述了一个非常有用的三维可伸缩性模型:scale cube。在这个…</h3></div><div class="nw l"><p class="bd b fp z dy nt ea eb nu ed ef dx translated">微服务. io</p></div></div><div class="nx l"><div class="of l nz oa ob nx oc io no"/></div></div></a></div></div></div>    
</body>
</html>