<html>
<head>
<title>Composition API: The need to know basics and 3 things to keep in mind.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">组合API:需要知道基础知识和3件要记住的事情。</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/composition-api-the-need-to-know-basics-and-3-things-to-keep-in-mind-be664aaedb3a?source=collection_archive---------19-----------------------#2021-07-14">https://medium.com/nerd-for-tech/composition-api-the-need-to-know-basics-and-3-things-to-keep-in-mind-be664aaedb3a?source=collection_archive---------19-----------------------#2021-07-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="91a9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Vue 3迷你剧</h2></div><p id="f48d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你好！因此，我一直在学习在Vue 3上编码，并决定就我迄今为止看到的一些最令人兴奋的事情写一组文章。<strong class="iz hj"> Composition API </strong>不用多说，第一个。</p><h2 id="8203" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">🤔但是为什么呢？？？</h2><p id="355d" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">从一开始，我就对Vue的多才多艺和“初级程序员”的友好印象深刻。选项API，就像Composition的孪生兄弟(开玩笑的！不邪恶，只是双胞胎😜)非常直观，学起来也很好玩。Options API通过选项名来构造代码逻辑，使其易于学习。</p><p id="2101" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是Vue 3决定用这种方法解决一个共同的问题，(一个非常重要的问题):<strong class="iz hj">可伸缩性</strong>。随着应用程序变得越来越大和越来越复杂，这种方法将组件的功能逻辑分成小块，分散在整个文件中，这使得维护变得很困难，特别是如果您最初没有编写组件的话。下面的示例展示了如何在Options API中组织单个功能的逻辑，每个功能逻辑用不同的颜色表示:</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es kt"><img src="../Images/c944d7dea674466bc2f7b66a478e0f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/0*85kIfpCqYe4RCbwU.png"/></div><figcaption class="lb lc et er es ld le bd b be z dx translated">不是我的。这是Vue的。</figcaption></figure><p id="8a84" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你有兴趣了解更多关于如何使用组合API组织选项API逻辑的信息，请务必阅读Vue团队的<a class="ae lf" href="https://v3.vuejs.org/guide/composition-api-introduction.html#why-composition-api" rel="noopener ugc nofollow" target="_blank">文档页面</a>。</p><p id="3ad3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一方面，Vue团队希望确保有一种实用的方法来创建可重用的代码，因此引入了<strong class="iz hj"> composables或组合函数</strong>(我们将在下一篇文章中讨论)。</p><h2 id="3c84" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">👾好吧，那怎么做？</h2><p id="9dfd" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">Composition API引入了在任何生命周期挂钩之前运行的<strong class="iz hj"> setup()选项。一旦解析了属性并准备好使用，Setup()将在组件创建之前运行🤗。在这个平台上，你可以编写任何你需要的JavaScript逻辑。看起来像这样:</strong></p><pre class="ku kv kw kx fd lg lh li lj aw lk bi"><span id="1f4e" class="jt ju hi lh b fi ll lm l ln lo">&lt;!-- MyComponent.vue --&gt;<br/>&lt;template&gt;<br/>  &lt;h1&gt;Title&lt;/h1&gt;<br/>  &lt;div&gt;Hello, my name is {{ name }}, and I'm {{ age }} years old.&lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>   export default {<br/>    setup() {<br/>      let name = 'Pato'<br/>      let age = 35<br/><br/>      // Return the properties so they can be accessed by template<br/>      return {<br/>        name,<br/>        age<br/>      }<br/>    }<br/>  }<br/>&lt;/script&gt;</span></pre><p id="3523" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，每个特性的逻辑都在一起，使得组件可伸缩且易于维护。</p><p id="a607" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">setup()函数有两个参数:第一个是<strong class="iz hj"> props </strong>，第二个是<strong class="iz hj"> context </strong>。</p><p id="b9c3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="lp">道具</em> </strong> <em class="lp">是反应性的，所以如果你需要使用ES6析构，你应该使用toRefs，否则会影响道具的反应性。</em></p><p id="ff3c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="lp">上下文</em> </strong> <em class="lp">是一个普通的JS对象，它不是反应式的，我们下面会讲到这个。</em></p><h1 id="4acc" class="lq ju hi bd jv lr ls lt jz lu lv lw kd io lx ip kg ir ly is kj iu lz iv km ma bi translated">⚠️需要牢记的三件事</h1><p id="1bd5" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">作文的API面不全是彩虹和阳光。开个玩笑，但请注意:</p><ol class=""><li id="be3d" class="mb mc hi iz b ja jb jd je jg md jk me jo mf js mg mh mi mj bi translated">默认情况下，setup()上声明的值是无效的。您可能还记得，在Options API上，数据对象将其属性转换为getter/setter，使它们<strong class="iz hj">反应</strong>，因此每当我们做出更改，它<strong class="iz hj">就会反映在DOM上</strong>。在setup()上，为了反映变化，您需要通过使用<strong class="iz hj"> Ref或reactive来确保该值是电抗性的。</strong></li><li id="8f5d" class="mb mc hi iz b ja mk jd ml jg mm jk mn jo mo js mg mh mi mj bi translated"><strong class="iz hj">“this”关键字在setup()中不可用。</strong>在选项API上,“this”关键字指的是组件，但在组合API上,“this”是未定义的。因为setup()在任何其他生命周期挂钩之前被调用，所以“this”不会是对当前活动实例的引用，因此不会像在其他选项中一样。</li><li id="0ec5" class="mb mc hi iz b ja mk jd ml jg mm jk mn jo mo js mg mh mi mj bi translated"><strong class="iz hj">每当您希望组件的模板访问上下文的属性以及传递给setup()的属性时，Setup()必须返回一个对象</strong>。无论您想在组件模板中使用setup()中的哪个属性，都需要在JS对象中返回。</li></ol><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es mp"><img src="../Images/5473b1b83feabad3169b4692d01cab34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLQZguBekLYGlJL0t3k46w.jpeg"/></div></div><figcaption class="lb lc et er es ld le bd b be z dx translated">这个例子不是我的，它来自Vue docs。<a class="ae lf" href="https://v3.vuejs.org/guide/composition-api-setup.html#accessing-component-properties" rel="noopener ugc nofollow" target="_blank">这里是链接</a>。</figcaption></figure><h2 id="1433" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">🤩总之…</h2><p id="9f93" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">我认为重要的是要记住，Vue 3允许在创建组件时使用选项API和组合API。你甚至可以把它们结合起来，所以没有必要满足于一个。</p><p id="4977" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是，随着Vue框架的发展，它希望通过为开发人员提供新的特性来改进自己，使代码更加整洁和可重用；我认为这绝对是值得研究和利用的东西，尤其是在开发更大更复杂的应用程序时。</p><p id="cef0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望你试一试。下次见！👋</p></div></div>    
</body>
</html>