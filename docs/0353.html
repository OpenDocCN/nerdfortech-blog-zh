<html>
<head>
<title>AppSync GraphQL Gateway as a Router in Gateway design Pattern and Strangler Pattern to migrate from Monolith to Microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AppSync GraphQL 网关作为网关设计模式和扼杀者模式中的路由器，从整体服务迁移到微服务</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/create-an-appsync-graphql-gateway-as-a-router-in-gateway-design-pattern-and-strangler-pattern-to-b92d2a2ad5b9?source=collection_archive---------1-----------------------#2020-10-22">https://medium.com/nerd-for-tech/create-an-appsync-graphql-gateway-as-a-router-in-gateway-design-pattern-and-strangler-pattern-to-b92d2a2ad5b9?source=collection_archive---------1-----------------------#2020-10-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0f29fab9d84a0a81008ad9ea8269e192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_wPtzRSLPRMZ1bPDw8mbhQ.png"/></div></div></figure><p id="2021" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">两个著名的微服务设计模式是“API 网关设计模式”和“扼杀者模式”。在本文中，我提出了一个设计，它将使用 AWS 无服务器方法将两种模式融合在一起。</p><h2 id="5d74" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">扼杀者模式</h2><p id="81e2" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">扼杀者模式用于从遗留系统(例如:单片系统)迁移到现代系统(例如:微服务)。它在微软设计模式中定义于<a class="ae ko" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/strangler" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/architecture/patterns/stranger</a>。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/b4ec8b42f859b83822b6790bd8161147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLvPDHu_Vn7PLVxzraoC_w.png"/></div></div></figure><p id="4ec6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如上图所示，有一个“扼杀者外观”，它会将迁移的调用路由到现代系统，并继续扼制旧系统，直到最终删除外观，只调用现代系统。</p><h2 id="4a82" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">API 网关模式</h2><p id="12ff" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">正如在 https://microservices.io/patterns/apigateway.html<a class="ae ko" href="https://microservices.io/patterns/apigateway.html" rel="noopener ugc nofollow" target="_blank">的定义，API 网关用于拥有一个单一的系统网关</a></p><figure class="kq kr ks kt fd ij er es paragraph-image"><div class="er es ku"><img src="../Images/be66781853dbe1a4aa8cb236b2255b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*xOzi7CR0RzUigwmmCNjzwg.png"/></div></figure><h2 id="27fe" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">AppSync 作为 API 网关和扼杀者门面</h2><p id="423a" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">在本文中，下面的设计使用 AWS AppSync 作为 API 网关和扼杀者 Facade，正如在 https://aws.amazon.com/blogs/mobile/appsync-microservices/的<a class="ae ko" href="https://aws.amazon.com/blogs/mobile/appsync-microservices/" rel="noopener ugc nofollow" target="_blank">的 AWS 文档中所解释的。</a></p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/32ed977cf0217bd660cea17beb8aba33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdlAq8226iWTGqt0pabJTA.png"/></div></div></figure></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/f21e5f8dc10cc9376517d025ee429bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*50hiTFr-W5a-2lw3oqjrIg.png"/></div></div></figure><p id="b1d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是最终的设计:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/4dc094f43edaf16232fe2f9b98719f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BeRpDC_BVqTF1PuWguWjyA.png"/></div></div></figure><p id="e3b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢谢</p><p id="7819" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">兰尼·埃尔豪斯尼</p><p id="db1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ko" href="https://eur05.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.linkedin.com%2Fin%2Franyelhousieny%2F&amp;data=04%7C01%7C%7C908ea6dcab0a41047a4b08d89acaa17f%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C637429542376455645%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=0Y6AohJuroaNF2%2BjN1XN8AK43UnY8nlYIFgnKSfq6h0%3D&amp;reserved=0" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/ranyelhousieny/</a></p><p id="71d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ko" href="https://eur05.safelinks.protection.outlook.com/?url=https%3A%2F%2Frany.elhousieny.com%2F&amp;data=04%7C01%7C%7C908ea6dcab0a41047a4b08d89acaa17f%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C637429542376465641%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=E0KUccdu6bz8EERxaWg7ZX7FTyRr9Nlvua75Rtk6oFA%3D&amp;reserved=0" rel="noopener ugc nofollow" target="_blank">https://rany.elhousieny.com/</a></p><p id="1426" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ko" href="https://eur05.safelinks.protection.outlook.com/?url=https%3A%2F%2Fresume.rany.elhousieny.com%2F&amp;data=04%7C01%7C%7C908ea6dcab0a41047a4b08d89acaa17f%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C637429542376465641%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=Hms%2FFGhmX%2FfFx7EUlsgS2oL3y8MaLcKSbFKpu7IRuyA%3D&amp;reserved=0" rel="noopener ugc nofollow" target="_blank">https://resume.rany.elhousieny.com</a></p><p id="d4d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">https://ranyel.medium.com/<a class="ae ko" href="https://eur05.safelinks.protection.outlook.com/?url=https%3A%2F%2Franyel.medium.com%2F&amp;data=04%7C01%7C%7C908ea6dcab0a41047a4b08d89acaa17f%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C637429542376475634%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=k%2BdfbOy%2B1ViLfgsxW7omMKXyJm6fSPenrns78CsZwg0%3D&amp;reserved=0" rel="noopener ugc nofollow" target="_blank"/></p><p id="4aee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">【https://ranyelhousieny.tk/ T4】</p><p id="fe9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ko" href="https://eur05.safelinks.protection.outlook.com/?url=https%3A%2F%2Frany.tk%2F&amp;data=04%7C01%7C%7C908ea6dcab0a41047a4b08d89acaa17f%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C637429542376475634%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=FjRYnScf9vJio9UH%2Foqni7G6iAnWZFif8zcOMFveXs4%3D&amp;reserved=0" rel="noopener ugc nofollow" target="_blank"> https://rany.tk </a></p><h1 id="6284" class="lf jp hi bd jq lg lh li ju lj lk ll jy lm ln lo kb lp lq lr ke ls lt lu kh lv bi translated">参考资料:</h1><div class="lw lx ez fb ly lz"><a href="https://www.linkedin.com/pulse/building-appsync-graphql-using-aws-amplify-rany-elhousieny/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hj fi z dy me ea eb mf ed ef hh bi translated">使用 AWS AppSync 和 Amplify 构建 GraphQL 微服务</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">由于我们创建了 REST 微服务，我想创建一个 GraphQL 微服务。AWS Amplify 和 AppSync 使它…</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">www.linkedin.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn io lz"/></div></div></a></div><div class="lw lx ez fb ly lz"><a href="https://www.linkedin.com/pulse/from-rest-serverless-graphqlappsync-progressive-rany-elhousieny/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hj fi z dy me ea eb mf ed ef hh bi translated">从 REST 进行无服务器 GraphQL(AppSync)渐进式迁移</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">本周，我提出了一个使用 AWS AppSync 迁移到无服务器 GraphQL 系统的架构</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">www.linkedin.com</p></div></div><div class="mi l"><div class="mo l mk ml mm mi mn io lz"/></div></div></a></div><div class="lw lx ez fb ly lz"><a rel="noopener follow" target="_blank" href="/@madhukaudantha/microservice-architecture-and-design-patterns-for-microservices-e0e5013fd58a"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hj fi z dy me ea eb mf ed ef hh bi translated">微服务架构和微服务的设计模式</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">微服务可以对你的企业产生积极的影响。因此，值得知道的是，如何处理…</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">medium.com</p></div></div><div class="mi l"><div class="mp l mk ml mm mi mn io lz"/></div></div></a></div><div class="lw lx ez fb ly lz"><a rel="noopener follow" target="_blank" href="/@rmmeans/serverless-strangler-pattern-on-aws-31c88191268d"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hj fi z dy me ea eb mf ed ef hh bi translated">AWS 上的无服务器扼杀者模式</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">如何使用 Lambda@Edge 和基于区域的 API 网关端点在 AWS 上实现无服务器扼杀者</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">medium.com</p></div></div><div class="mi l"><div class="mq l mk ml mm mi mn io lz"/></div></div></a></div><div class="lw lx ez fb ly lz"><a href="https://microservices.io/patterns/apigateway.html" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hj fi z dy me ea eb mf ed ef hh bi translated">微服务模式:API 网关模式</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">让我们假设您正在构建一个使用微服务架构模式的在线商店，并且您…</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">微服务. io</p></div></div><div class="mi l"><div class="mr l mk ml mm mi mn io lz"/></div></div></a></div><div class="lw lx ez fb ly lz"><a href="https://aws.amazon.com/blogs/mobile/appsync-microservices/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hj fi z dy me ea eb mf ed ef hh bi translated">通过 AWS AppSync 和 AWS Amplify 简化对多个微服务的访问|亚马逊网络服务</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">本文由云架构师 Faraz Masood 撰写，AWS 的现代应用程序和架构是用…</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">aws.amazon.com</p></div></div><div class="mi l"><div class="ms l mk ml mm mi mn io lz"/></div></div></a></div><div class="lw lx ez fb ly lz"><a href="https://aws.amazon.com/appsync/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hj fi z dy me ea eb mf ed ef hh bi translated">AWS AppSync |托管 GraphQL APIs | Amazon Web Services</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">使用可伸缩的 GraphQL APIs 加速应用程序开发组织选择使用 GraphQL 构建 API 是因为…</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">aws.amazon.com</p></div></div><div class="mi l"><div class="mt l mk ml mm mi mn io lz"/></div></div></a></div></div></div>    
</body>
</html>