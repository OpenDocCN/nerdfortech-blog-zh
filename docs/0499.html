<html>
<head>
<title>What is Closure?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是终结？</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/what-is-closure-64f1274c1847?source=collection_archive---------0-----------------------#2021-01-02">https://medium.com/nerd-for-tech/what-is-closure-64f1274c1847?source=collection_archive---------0-----------------------#2021-01-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bc35dd5e86aa84e2c20e831e9058180e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DF6zNMII2rQVvn5GxKAfYQ.png"/></div></div></figure><p id="7e37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，朋友们，在本帖中我们将会看到闭包的含义，以及为什么理解它对每个开发者来说如此重要。对于 javascript 或前端面试准备来说，闭包是最重要的话题之一。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="05ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们来谈谈<strong class="is hj">闭包</strong>到底是什么？</p><p id="b79c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">闭包只不过是函数及其词法范围环境。希望大家熟悉什么是词法作用域？</p><p id="a774" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我给你一个简单的闭包例子。假设我们有一个名为 inner()的函数嵌套在另一个名为 outer()的函数中，我们希望在内部函数中访问外部函数中的变量。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="fc14" class="ke kf hi ka b fi kg kh l ki kj">function outer(){<br/>  var a = 7;<br/>  function inner(){<br/>     console.log(a);<br/>  }<br/>}outer();</span></pre><p id="e046" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的例子中，当我们调用函数 outer()时，它的控制台将输出记录为 7。因为函数 inner()与其父函数的词法环境形成了一个闭包，因此我们能够访问函数 inner()内部的变量。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/31fb22ba9d2e0b718632d265b6805f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atmvTOU_-WipnumnagtmJA.png"/></div></div></figure><p id="502d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看另一个闭包的例子来更好地理解这个主题。假设我们想打印从 1 到 5 的数字，数字 1 延迟 1 秒，数字 2 延迟 2 秒，依此类推。</p><p id="cdc2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了解决上述问题，大多数开发人员将简单地编写一个 for 循环，并在循环中使用 setTimeout，如下所示，我们将得到奇怪的输出。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="dde6" class="ke kf hi ka b fi kg kh l ki kj">function x(){<br/>   for(var i=1; i&lt;=5; i++){<br/>      setTimeout(function(){<br/>         console.log(i)<br/>      }, i*1000)<br/>  }<br/>}====== OUTPUT WILL BE =====<br/>6<br/>6<br/>6<br/>6<br/>6</span></pre><p id="46bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么它会这样…？让我破解密码，向你解释这里到底发生了什么。因此，在上面的代码 var 中，I 从 1–6 递增，并且在 console.log(i)运行变量 I 时，为引用 I 的每次迭代设置 setTimeout，变量 I 的值将为 6，因此每次都打印 6。</p><p id="1429" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那么我们如何使用闭包来解决上述问题呢？让我们看看下面的代码。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="3b3d" class="ke kf hi ka b fi kg kh l ki kj">function x(){<br/>   for(var i=1; i&lt;=5; i++){<br/>      function y(t){<br/>         setTimeout(function(){<br/>            console.log(t)<br/>         }, t*1000)<br/>      }<br/>      y(i)<br/>   }<br/>}<br/>===== OUTPUT WILL BE ======<br/>1<br/>2<br/>3<br/>4<br/>5</span></pre><p id="fb16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这一次，我们为 I 的每次迭代调用函数 y(t ),它为自己创建 I 的新副本，并分别传递给 setTimeout 函数。</p><p id="cd39" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以最后的结论是“闭包只不过是函数与其词法环境的捆绑”。</p><blockquote class="kl km kn"><p id="b36a" class="iq ir ko is b it iu iv iw ix iy iz ja kp jc jd je kq jg jh ji kr jk jl jm jn hb bi translated"><em class="hi">如果你仍然不清楚什么是终结？我会推荐在阿克谢赛尼的 Youtube 频道</em>  <em class="hi">观看</em> <a class="ae ks" href="https://www.youtube.com/watch?v=qikxEIxsXco&amp;t=927s" rel="noopener ugc nofollow" target="_blank"> <em class="hi">封关视频。这个帖子也是看他的 Namaste Javascript 系列写的。</em></a></p></blockquote></div></div>    
</body>
</html>