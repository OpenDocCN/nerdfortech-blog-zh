<html>
<head>
<title>Programming Fractals in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 编程分形</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/programming-fractals-in-python-d42db4e2ed33?source=collection_archive---------3-----------------------#2021-03-02">https://medium.com/nerd-for-tech/programming-fractals-in-python-d42db4e2ed33?source=collection_archive---------3-----------------------#2021-03-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2ca2" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">了解如何通过 Python 创建美丽的分形。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/2a1d8150f50303c1cc9e630387b381a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZbAk-LUKVCJAqPMi"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://unsplash.com/@adrienconverse?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿德里安·匡威</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="da16" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">分形:概述</h1><p id="14d6" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">蕨类植物是什么形状的？一条河甚至一座山呢？我们不能用简单的欧几里得几何将它们定义为正方形或圆柱形。这就是为什么我们有分形几何学:美丽结构的几何学。分形在自然界中随处可见，是由一遍又一遍的步骤重复形成的。</p><p id="eb2c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">分形可能很难真正定义，并由这些共同的特征联系在一起:缩放对称，从简单到复杂和分数维。另一个有趣的事实是，大多数分形不是一维或二维形状，而是介于两者之间。</p><p id="5603" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">无论如何，足够的信息，让我们进入三个分形，我们将编码:科赫雪花，巴恩斯利蕨类植物和曼德尔布罗集！</p><h1 id="4cdd" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">科赫雪花</h1><p id="2eb7" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">科赫雪花，也被称为科赫岛，是基于瑞典数学家赫尔格·冯·科赫在 1904 年创造的科赫曲线。</p><p id="41e3" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">雪花是通过反复重复一系列步骤构建的，从等边三角形开始，然后:</p><ol class=""><li id="eea0" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb lm ln lo lp bi translated">将线段分成 3 等长</li><li id="c00a" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">在中间线段上画一个向上的等边三角形</li><li id="2eb8" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">移除中间线段(三角形的底边)</li></ol><p id="5284" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">对于这个分形，我们将使用一个名为“Turtle”的 Python 库来绘制它，并且需要导入它:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="16ea" class="ma jp hi lw b fi mb mc l md me"><strong class="lw hj">import</strong> turtle</span></pre><p id="ff49" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">现在，让我们通过为科赫曲线创建一个函数来开始科赫雪花的创建。我们将使用递归，即函数直接或间接调用自身。该函数的参数是:</p><ul class=""><li id="e043" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb mf ln lo lp bi translated"><strong class="ki hj">乌龟</strong>，它将是绘制分形的乌龟</li><li id="a96f" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb mf ln lo lp bi translated"><strong class="ki hj"> divis </strong>，这是我们要“做”上述步骤的次数</li><li id="92f8" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb mf ln lo lp bi translated"><strong class="ki hj">尺寸</strong>，定义等边三角形的每条边的长度</li></ul><p id="9731" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">然后，在这个函数中，我们有一个基本情况，当除法的次数达到 0 时，我们将海龟向前移动一个边的长度。然而，如果 divisions 大于 1，我们将有一个 for 循环，它使用 Lindenmayer 系统来绘制分形。</p><p id="b068" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">Lindenmayer 系统是一种以字符串形式表示递归分形的方法。用科赫雪花，初始字符串为“F-F-F”和字符串重写规则，“F”→“F+F-F+F”和 60°角。“F”表示向前移动，“+”表示按角度向右转，“-”表示按角度向左转。这样，我们得到以下函数:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="1dbf" class="ma jp hi lw b fi mb mc l md me"><strong class="lw hj">def </strong>koch_fract(turtle, divis, size):<br/>   <strong class="lw hj">if</strong>(divis == 0):<br/>      turtle.forward(size)<br/>   <strong class="lw hj">else</strong>:<br/>      <strong class="lw hj">for </strong>angle <strong class="lw hj">in </strong>[60, -120, 60, 0]:<br/>         koch_fract(turtle, divis - 1, size / 3)               <br/>         turtle.left(angle)</span></pre><p id="3c35" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">创建函数后，我们可以为要输入函数的参数设置一些变量:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="4951" class="ma jp hi lw b fi mb mc l md me">divis = 10 # any number of divisions, the larger the number, the more detailed the diagram<br/>size = 2000 # any length</span></pre><p id="4602" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">然后，我们必须设置海龟和屏幕来绘制分形:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="9af2" class="ma jp hi lw b fi mb mc l md me">wn = turtle.Screen()<br/>wn.setup(width=1000, height=500)<br/>turtle.speed(100)<br/>turtle.pendown()</span></pre><p id="714c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">之后，我们将使用 for 循环来使用 Koch 曲线函数创建 Koch 雪花。我们将调用这个科赫曲线函数 3 次，每次都将海龟逆时针旋转 120°。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="4dda" class="ma jp hi lw b fi mb mc l md me">for i in range(0, 3):<br/>   koch_fract(turtle, divis, size)<br/>   turtle.left(-120)</span></pre><p id="1642" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">它应该是这样的:</p><h1 id="9ded" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">巴恩斯利蕨</h1><p id="256b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">让我们继续巴恩斯利蕨类植物！这是一种分形，由英国数学家迈克尔·巴恩斯利在他的著作《分形无处不在》中首次提出。它被称为“迭代函数系统”(IFS)分形。这种分形的构建利用了矩阵，要了解更多关于矩阵的知识，我推荐<a class="ae jn" href="https://www.khanacademy.org/math/precalculus/x9e81a4f98389efdf:matrices#x9e81a4f98389efdf:mat-intro" rel="noopener ugc nofollow" target="_blank">这个网站</a>。</p><p id="85db" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">巴恩斯利蕨就是利用这种矩阵变换创建的:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mg"><img src="../Images/d2c5d11af60f30e3857451f77a4752a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*53rpQFWdDCpB2mQCld-zCA.png"/></div></figure><p id="b4b6" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">使用了四种不同的转换，如下表所示。变量<strong class="ki hj"> a 到 f </strong>是系数，<strong class="ki hj"> p </strong>是概率因子。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/95b1e8fcdb1e749af8e59867c970f74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQAGFMf7VT-iyGpKdbTLnA.png"/></div></div></figure><p id="a776" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">从这个表中，我们可以为我们的程序创建 4 个函数:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mi"><img src="../Images/e269aa72e30cbf4647490bda1311fa62.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*8o9BJdCW3qZWoTrrqIhynA.png"/></div></figure><p id="0559" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">现在我们对巴恩斯利蕨是如何产生的有了基本的了解，我们可以开始编码了！</p><p id="1a03" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">首先，导入以下库:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="c864" class="ma jp hi lw b fi mb mc l md me"><strong class="lw hj">import </strong>matplotlib.pyplot <strong class="lw hj">as </strong>plt <br/><strong class="lw hj">from</strong> random <strong class="lw hj">import </strong>randint</span></pre><p id="cb3f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">因为我们将在散点图上绘制蕨类植物，所以我们需要为 x 和 y 数组创建一个列表</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="bf71" class="ma jp hi lw b fi mb mc l md me">x = [0]<br/>y = [0]</span></pre><p id="197b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">创造分形！我们将使用一个<strong class="ki hj"> for 循环</strong>迭代<strong class="ki hj"> n </strong>次，程序运行次数越多，分形越精细。为了创建概率因子，我们将使用来自<strong class="ki hj"> random </strong> Python 库中的<strong class="ki hj"> randint </strong>函数来随机选择 1 到 100 之间的一个整数。基于概率因子，<strong class="ki hj"> p </strong>，我们将执行上述函数，并将结果添加到<strong class="ki hj"> x </strong>和<strong class="ki hj"> y </strong>列表中。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="d64c" class="ma jp hi lw b fi mb mc l md me">for i in range(0, 50000): <br/>  <br/>    p = randint(1, 100) <br/>      <br/>    if p == 1: <br/>        x.append(0) <br/>        y.append(0.16*(y[i])) <br/>         <br/>    if p &gt;= 2 and p &lt;= 86: <br/>        x.append(0.85*(x[i]) + 0.04*(y[i])) <br/>        y.append(-0.04*(x[i]) + 0.85*(y[i])+1.6) <br/>      <br/>    if p &gt;= 87 and p &lt;= 93: <br/>        x.append(0.2*(x[i]) - 0.26*(y[i])) <br/>        y.append(0.23*(x[i]) + 0.22*(y[i])+1.6) <br/>          <br/>    if p &gt;= 94 and p &lt;= 100: <br/>        x.append(-0.15*(x[i]) + 0.28*(y[i])) <br/>        y.append(0.26*(x[i]) + 0.24*(y[i])+0.44)</span></pre><p id="aa88" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">一旦我们有了所有的点，我们可以使用 plt.scatter 绘制它。参数<strong class="ki hj"> c </strong>是图上点的颜色，我使用十六进制设置为绿色。如果你想隐藏轴，使用函数 plt.axis("off ")！</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="1c80" class="ma jp hi lw b fi mb mc l md me">plt.scatter(x, y, s = 0.2, c ='#5dbb63') <br/>plt.axis("off")<br/>plt.show()</span></pre><p id="4068" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这就是你如何创造巴恩斯利蕨类植物！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/4f2cf4f706911d2a51e58515b0c81d69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E--zBKDmOHE3IPpz3KDWLw.png"/></div></div></figure><h1 id="c250" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">曼德勃罗集合</h1><p id="9b2b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">最后是 Mandelbrot 集，在我看来，它是有史以来最美丽的分形之一！Mandelbrot 集是函数迭代时不发散的复数集。你可以在这个网站上找到更多关于曼德尔布罗集合背后的数学知识。为了对此进行编程，我们将使用迭代！</p><p id="c2f5" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">像巴恩斯利蕨类植物一样，我们将使用 matplotlib 和 numpy 在图上绘制 Mandelbrot 集合！因此，我们需要导入这些库:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="5fed" class="ma jp hi lw b fi mb mc l md me"><strong class="lw hj">import</strong> numpy <strong class="lw hj">as</strong> np<br/><strong class="lw hj">import</strong> matplotlib.pyplot <strong class="lw hj">as</strong> plt</span></pre><p id="9b34" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">然后，我们需要决定需要多少行和列，这决定了集合的详细程度，以及我们将使用的迭代次数。</p><p id="91ef" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">之后，我们需要编写两个不同的函数:</p><ol class=""><li id="d3ae" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb lm ln lo lp bi translated">第一个函数将计算 Mandelbrot 集合中的一个特定数字</li><li id="eba7" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">第二个函数将计算 Mandelbrot 集合中的数字</li></ol><p id="bef9" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">下面是第一个函数:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="cec6" class="ma jp hi lw b fi mb mc l md me">def mandelbrot(c, z):<br/>   global iterations<br/>   count = 0<br/>   for a in range(iterations):<br/>      z = z**2 + c<br/>      count += 1        <br/>      if(abs(z) &gt; 4):<br/>         break<br/>   return count</span></pre><p id="16c2" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">参数 c 和 z 分别表示复平面和坐标中的点。</p><p id="6cd4" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">第二个功能是:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="eedc" class="ma jp hi lw b fi mb mc l md me">def mandelbrot_set(x, y):<br/>   m = np.zeros((len(x), len(y)))<br/>   for i in range(len(x)):<br/>      for j in range(len(y)):<br/>         c = complex(x[i], y[j])<br/>         z = complex(0, 0)<br/>         count = mandelbrot(c, z)<br/>         m[i, j] = count    <br/>   return m</span></pre><p id="0f25" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">参数<strong class="ki hj"> x </strong>和<strong class="ki hj"> y </strong>是 x 和 y 坐标的<strong class="ki hj"> numpy </strong>数组。我们将首先创建一个形状为 x 和 y 坐标的数组，名为<strong class="ki hj"> m </strong>，并将是复平面坐标。然后，我们将使用 for 循环遍历<strong class="ki hj"> x </strong>数组和<strong class="ki hj"> y </strong>数组。我们将创建<strong class="ki hj"> x </strong>和<strong class="ki hj"> y </strong>值的复数，并调用之前的<strong class="ki hj"> mandelbrot(c，z) </strong>函数。然后，该计数将被添加到<strong class="ki hj"> m </strong>数组中。之后，我们将返回<strong class="ki hj"> m </strong>数组。</p><p id="603c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">现在，我们需要从这些函数中创建 Mandelbrot 集合，并使用 matplotlib 绘制它！</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="a1b7" class="ma jp hi lw b fi mb mc l md me"><strong class="lw hj"># creating our x and y arrays</strong><br/>x = np.linspace(-2, 1, rows)<br/>y = np.linspace(-1, 1, cols)</span><span id="1276" class="ma jp hi lw b fi mk mc l md me"><strong class="lw hj"># create our mandelbrot set</strong><br/>m = mandelbrot_set(x, y) </span><span id="e470" class="ma jp hi lw b fi mk mc l md me"><strong class="lw hj"># plot the set (best colors: binary, hot, bone, magma)</strong><br/>plt.imshow(m.T, cmap = "magma")<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="87cd" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这是它应该有的样子！是不是很美？</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/9fd73149a50c187e91a687a6ab7bcde5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4fkO3oewR7WVjxxqLM-etA.png"/></div></div></figure><p id="cac3" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这就是你如何编码科赫雪花，巴恩斯利蕨类植物和曼德尔布罗集！我希望你学到了很多，并喜欢编码它们。请随意从我的 GitHub 下载我的代码。</p><p id="4351" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">科赫雪花:<a class="ae jn" href="https://github.com/itsliterallymonique/Koch-Fractal-o_O" rel="noopener ugc nofollow" target="_blank">https://github.com/itsliterallymonique/Koch-Fractal-o_O</a>T24】巴恩斯利蕨:<a class="ae jn" href="https://github.com/itsliterallymonique/Barnsley-Fern" rel="noopener ugc nofollow" target="_blank">https://github.com/itsliterallymonique/Barnsley-Fern</a>T27】曼德勃罗集:<a class="ae jn" href="https://github.com/itsliterallymonique/Mandelbrot-Set" rel="noopener ugc nofollow" target="_blank">https://github.com/itsliterallymonique/Mandelbrot-Set</a></p></div></div>    
</body>
</html>