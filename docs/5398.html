<html>
<head>
<title>How to orchestrate AWS Services? |AWS Step Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何编排AWS服务？AWS阶跃函数</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-orchestrate-aws-services-aws-step-functions-3471ac52af67?source=collection_archive---------3-----------------------#2021-09-27">https://medium.com/nerd-for-tech/how-to-orchestrate-aws-services-aws-step-functions-3471ac52af67?source=collection_archive---------3-----------------------#2021-09-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6ac3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要在AWS中协调多个Lambda函数。你推荐什么？有没有可以实现的AWS服务？让我们检查AWS步骤函数来找到我们的答案:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/87a3c2db6458fe0721252fb99d7e0133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*toAifuuQkzwrnJK5XFEMmg.png"/></div></div></figure><p id="0d58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS Step函数允许我们将任何工作流建模为状态机。它构建了跨不同服务协调任务的工作流。<strong class="ih hj"> </strong>这可用于订单履行、数据处理或任何工作流程。</p><p id="f319" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您在下面看到的，工作流是在JSON中定义的。它给出了工作流的可视化，工作流的执行，以及历史。该步骤可以是lambda函数，将数据插入Dynamo DB、任何特定的ECS任务等。因此，通过steps函数，它将编排流程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/e488c02c96c549a2c15ddf1b9ad06bc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I5kQouxR62RxfkB1qso5cg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">资源:AWS控制台</figcaption></figure><p id="7173" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从工作流入手，我们可以使用SDK调用、API网关或者CloudWatch事件。任务状态可以是任何AWS服务调用，例如，调用可以在JSON中定义的lambda函数，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/3bb6743c6023860c01a8f66c60fa86a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9BcAVLdvzVaPwFareaB6cw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">调用lambda函数的任务状态</figcaption></figure><p id="dfd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在示例中，我们可以看到，类型是“Task”，资源是“Lambda Invoke”，必需的参数和next是“Next State”。现在，让我们讨论一下在阶跃函数中可以使用哪些状态:</p><ul class=""><li id="e6d3" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">选择状态:测试发送到特定分支的条件</li><li id="2f24" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">失败或成功状态:以失败或成功停止执行的结束状态。</li><li id="0575" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">传递状态:该状态将其输入传递给下一个状态，而不执行任何工作，或者只是将一些固定数据注入下一个状态</li><li id="7161" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">等待状态:提供特定时间的延迟</li><li id="104e" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">映射状态:动态迭代步骤</li><li id="b582" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">并行状态:开始并行执行分支</li></ul><p id="7094" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是可视化工作流在执行过程中的样子:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/326fb5b4964ea1c8a1e978018f26c176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WX1v4tskKRFbIr1KoaNDdQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">状态机中的可视化工作流，</figcaption></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="283f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们准备一起进行一个简短的动手操作。开始吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kr"><img src="../Images/0babbda0557cf147b43d14f4be4231ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*lyhGGy-toyvnm_3k.gif"/></div></figure><p id="6279" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录https://aws.amazon.com/<a class="ae ks" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">打开AWS控制台</a>:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/ef71e2b1056f503025ead465e13f28b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kXbJMMTzS5ctsZpliVn8ng.png"/></div></div></figure><p id="aee8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在服务中搜索步骤功能，然后单击“开始”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/857c7df98f306a20453d62d5a593f52a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qaJm_TH4NFPA7-JXLl1_ug.png"/></div></div></figure><p id="b2f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以看到如下的Hello World工作流。我将向您展示它是如何基于‘IsHelloWorldExample’变量工作的，该变量决定执行的分支。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kv"><img src="../Images/70158040403b2af38b8090a60a938d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0SBj_E884QPMazUu69ARqQ.png"/></div></div></figure><p id="7e56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，让我们继续，单击“Next”创建它。在第2步中，我们需要指定一些细节，比如状态机名称，就像我给的“HelloWorld”一样。让其他参数保持原样。单击“创建状态机”按钮:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kw"><img src="../Images/a821ba73187dac4a6740adfb0c73b00a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iPlfWW6xNVaBU5jDTNNltg.png"/></div></div></figure><p id="a948" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们首先将“IsHelloWorld”的输入设为“true ”:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kx"><img src="../Images/9b1e0ae20790dc3e73a0805d91e08294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_t02x7BbuMuIxYqPTzd5A.png"/></div></div></figure><p id="a022" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以看到执行正在发生:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/3e87ef0664c36191d2255926f509cf5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aUOEwVEzzNTiLfTDmdWG1A.png"/></div></div></figure><p id="a51e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">等待3秒钟后，我们可以看到执行输出。对于执行中发生的所有步骤，我们可以在“执行事件历史”选项卡中查看它们。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kz"><img src="../Images/07bbd9823a6f33cc3b7a6abad9c6e3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hk1quHcnzuDEqclq5H6aqw.png"/></div></div></figure><p id="4063" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们使用输入变量“false”运行相同的执行:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es la"><img src="../Images/19a2d342a46888be6e5ff6185d4403c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eDuwb2a6Bb5-dLMRQ5vh1A.png"/></div></div></figure><p id="5c77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一次，我们可以根据之前的输入看到失败状态:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/011cf391a98e95698d14dabdfe40d8e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2EZ-nU1tBGssdgfzmaImg.png"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="f265" class="lc ld hi bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">它还能做什么？</h1><p id="4dc8" class="pw-post-body-paragraph if ig hi ih b ii ma ik il im mb io ip iq mc is it iu md iw ix iy me ja jb jc hb bi translated">撰写AWS资源，包括:</p><ul class=""><li id="e7d5" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">自动气象站λ</li><li id="af66" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">弹性集装箱服务</li><li id="5f5f" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">AWS Fargate</li><li id="eeb6" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">AWS批次</li><li id="03ef" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">AWS发电机数据库</li><li id="fa75" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">AWS SNS(简单通知服务)</li><li id="a543" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">SQS(简单队列服务)</li><li id="966d" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">AWS SageMaker</li><li id="75f1" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">AWS事件桥</li><li id="3897" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">AWS EMR(弹性映射简化)</li></ul></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="a1c8" class="lc ld hi bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">使用案例:</h1><p id="dd73" class="pw-post-body-paragraph if ig hi ih b ii ma ik il im mb io ip iq mc is it iu md iw ix iy me ja jb jc hb bi translated">AWS步骤功能使我们能够将业务流程实现为组成工作流的一系列步骤。下面是一些业务用例。每个用例的细节可以在最后的参考文献中找到。</p><ul class=""><li id="6eca" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">结合Lambda函数构建基于web的应用程序</li><li id="82ea" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">为IAM策略创建协调安全事件响应</li><li id="0948" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">同步来源和目标S3时段之间的数据</li><li id="d96f" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">为流数据构建数据处理管道</li><li id="ec59" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">运行ETL作业并构建、训练和部署机器学习模型</li><li id="6acc" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">使用AWS Step函数Data Science SDK自动化机器学习工作流</li><li id="c192" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">从PDF或图像中提取数据进行处理</li></ul></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="578c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望你理解了AWS步骤功能的基本流程。现在，您可以使用任何AWS服务创建自己的状态机。</p><p id="6839" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有任何相关的疑问，请随时联系我。如果可以的话，我很乐意帮助你。保持联系:)</p><h2 id="1ed2" class="mf ld hi bd le mg mh mi li mj mk ml lm iq mm mn lq iu mo mp lu iy mq mr ly ms bi translated">如果你喜欢这个帖子，请为它鼓掌并在Medium上关注我！</h2><h2 id="4754" class="mf ld hi bd le mg mh mi li mj mk ml lm iq mm mn lq iu mo mp lu iy mq mr ly ms bi translated">领英:<a class="ae ks" href="http://www.linkedin.com/in/sakshikhandelwal276" rel="noopener ugc nofollow" target="_blank">www.linkedin.com/in/sakshikhandelwal276</a>推特:<a class="ae ks" href="https://twitter.com/SakshiKhandlwl" rel="noopener ugc nofollow" target="_blank">https://twitter.com/SakshiKhandlwl</a></h2></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="22da" class="lc ld hi bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">参考资料:</h1><ul class=""><li id="d78f" class="jv jw hi ih b ii ma im mb iq mt iu mu iy mv jc ka kb kc kd bi translated">【https://aws.amazon.com/step-functions T4】</li><li id="e9b8" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><a class="ae ks" href="https://aws.amazon.com/step-functions/use-cases/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/step-functions/use-cases/</a></li></ul></div></div>    
</body>
</html>