<html>
<head>
<title>Essential Statistics for Data Assessment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据评估的基本统计</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/essential-statistics-for-data-assessment-4f47d9cf03e9?source=collection_archive---------9-----------------------#2021-05-11">https://medium.com/nerd-for-tech/essential-statistics-for-data-assessment-4f47d9cf03e9?source=collection_archive---------9-----------------------#2021-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b824dec970d0162c65b100c12252ff5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*afxbCjegWYvjRJandFAbAg.png"/></div></div></figure><p id="fe3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将了解用于数据评估的<strong class="is hj">基本统计数据</strong>，通常也称为<strong class="is hj">描述性统计数据</strong>。描述性统计提供数据集的简单、定量的摘要，通常与图表相结合。正如我们将很快看到的，它们可以展示集中化的趋势，提供特性可变性的度量，以及更多其他方面。</p><p id="f59e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，还有另一种统计，称为<strong class="is hj">推断统计</strong>，它试图从生成数据集或从中取样的人口分布中获取信息。这里，我们假设数据覆盖了整个人口，而不是从分布中抽样的子集。</p><p id="405d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将讨论的主题包括:</p><ul class=""><li id="22e3" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">对数字和分类变量进行分类</li><li id="d285" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">理解均值、中位数和众数</li><li id="28d2" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">了解方差、标准差、百分位数和偏斜度</li><li id="547e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">知道如何处理分类变量和混合数据类型</li><li id="1602" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用二元和多元描述性统计。</li></ul><p id="94f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Python提供了实际的例子，Python可能是数据科学中最流行的编程语言。</p><h1 id="5f92" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">对数字和分类变量进行分类</strong></h1><p id="7f93" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">描述性统计都是关于<strong class="is hj">变量</strong>的。您必须知道您所描述的是什么，才能定义相应的描述性统计。</p><p id="e3d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在其他文献中，变量有时被称为<strong class="is hj">特征</strong>或<strong class="is hj">属性</strong>。它们的意思都一样:表格数据集中的一列。</p><p id="5d2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本节中，您将检查两个最重要的变量类型，<strong class="is hj">数值型</strong>和<strong class="is hj">分类型</strong>，并学习区分它们。分类变量是<em class="lf">离散的</em>，通常代表一个项目的分类属性。数值变量是<em class="lf">连续的</em>，并且是定量描述的。适用于一种变量的描述性统计可能不适用于另一种变量，因此区分它们先于分析。</p><h2 id="45cd" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">区分数值变量和分类变量</strong></h2><p id="b5c6" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了理解这两类变量之间的差异，我将使用美国农业部发布的人口估计数据集的例子。它包含2010年至2018年美国县一级的估计人口数据。可以从官网获取数据，<a class="ae lu" href="https://www.ers.usda.gov/data-products/county-level-data-sets/download-data/" rel="noopener ugc nofollow" target="_blank">https://www . ers . USDA . gov/data-products/county-level-data-sets/download-data/</a>。</p><p id="6133" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下Python代码片段加载数据并检查前几行:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="8295" class="lg kd hi ma b fi me mf l mg mh">import pandas as pd<br/>df = pd.read_excel("PopulationEstimates.xls",skiprows=2)<br/>df.head(8)</span></pre><p id="5f28" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输出是一个超过140列的表。下面是显示开始列的屏幕截图:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/2b5b6f60e0cffe2a4050a32bece85d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*UcYYymtrREITJ2lgq_GVDg.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图dfad()输出的前6列</strong></figcaption></figure><p id="dd7b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在数据集中有一个变量叫做<em class="lf">农村-城市_连续体代码_2013 </em>。它接受整数值。这导致熊猫自动解释这个变量；熊猫会自动将其解释为数字。然而，相反，变量实际上是绝对的。</p><blockquote class="mn mo mp"><p id="fb3c" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hj">你应该永远信任图书馆吗？</strong></p><p id="4792" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated">不要总是相信Python库给你的函数。他们可能是错的，开发者，也就是你，要做最后的决定。</p></blockquote><p id="d4fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">经过一番研究，我们在这个页面上找到了变量描述:<a class="ae lu" href="https://www.ers.usda.gov/data-products/rural-urban-continuum-codes/" rel="noopener ugc nofollow" target="_blank">https://www . ers . USDA . gov/data-products/rural-urban-continuum-codes/</a>。</p><p id="59d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据2013年发布的代码标准，<em class="lf">Rural-urban _ Continuum _ Code _ 2013</em>变量表示一个地区的城市化程度。</p><p id="b2f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">农村-城市_连续体代码_2013的含义如图2所示。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/006374054be14e0e075cc615c4df546c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*doRk9A6w20Cvb7RsXZdhdA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图2 -城乡代码解读_2013 </strong></figcaption></figure><blockquote class="mn mo mp"><p id="2d68" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hj">注</strong></p><p id="5255" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated">Pandas对变量类型进行智能的自动解释，但它经常是错误的。由数据科学家来研究变量类型的确切含义，然后更改它。</p></blockquote><p id="c7b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">许多数据集使用整数来表示分类变量。将它们视为数值可能会导致机器学习等下游任务的严重后果，这主要是因为数值之间的人为<em class="lf">距离</em>将被引入。</p><p id="8214" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一方面，数值变量通常具有<em class="lf">直接</em>的数量意义。例如，R_NET_MIG_2013表示特定区域2013年的净移民率。这个数字变量的直方图给出了美国移民趋势的更具描述性的总结，但是除了简单的计数之外，绘制代码没有什么意义。</p><p id="ed3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们用下面的代码片段来查看2013年的净移民率:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="e069" class="lg kd hi ma b fi me mf l mg mh">plt.figure(figsize=(8,6))<br/>plt.rcParams.update({'font.size': 22})<br/>plt.hist(df["R_NET_MIG_2013"],bins=np.linspace(np.nanmin(df["R_<br/>NET_MIG_2013"]),np.nanmax(df["R_NET_MIG_2013"]),num=100))<br/>plt.title("Rate of Net Immigration Distribution for All<br/>Records, 2013");</span></pre><p id="eb2b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果如下所示。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es mu"><img src="../Images/065db1b558d4c97e91e59f63b918e4c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*xHeqMHkkyyfgmdMrnwjgTw.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图3 -数据集中所有记录的移民率分布</strong></figcaption></figure><p id="180a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是从图3 中得出的观察结果:</p><ul class=""><li id="3d8f" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">对于分类变量和数值变量，可以引入结构来构造特殊情况。典型的例子是<em class="lf">日期</em>或<em class="lf">时间</em>。根据不同的场景，日期和时间可以被视为分类变量，也可以被视为具有半连续结构的数值变量。</li><li id="0693" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">根据一些规则将数值变量转换成分类变量是很常见的。《城乡法》就是一个典型的例子。这样的转换容易传达第一印象。</li></ul><p id="e950" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">既然我们已经学会了如何区分数字变量和分类变量，让我们继续理解统计学的一些基本概念，即均值、中位数和众数。</p><h1 id="7bc3" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">理解均值、中位数和众数</h1><p id="d743" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">均值、中值和众数描述了<em class="lf">集中趋势</em>的各个方面。均值和中值仅适用于数值变量，而众数适用于分类变量和数值变量。在这一节中，我们将重点关注数值变量的均值、中值和众数，因为它们的数值交互通常会传递有趣的信息。</p><h2 id="9ffc" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">平均</h2><p id="4a81" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">平均值，或算术平均值测量变量的<em class="lf">加权中心</em>。让我们用<em class="lf"> n </em>来表示条目的总数并作为索引。平均值由以下表达式给出:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/18c8b43bbdafd184bf6b7b58472bae7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:194/format:webp/1*5vPdyNST4vejShMjOFVGCQ.png"/></div></figure><p id="960a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">均值受总体中每个条目的值的影响。</p><p id="fbe2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我举个例子。以下代码统一生成1，000个从0到1的随机数，绘制它们，并计算它们的平均值:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="0ae2" class="lg kd hi ma b fi me mf l mg mh">import random<br/>random.seed(2019)<br/>plt.figure(figsize=(8,6))<br/>rvs = [random.random() for _ in range(1000)]<br/>plt.hist(rvs, bins=50)<br/>plt.title("Histogram of Uniformly Distributed RV");</span></pre><p id="72ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">生成的直方图如下所示:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/2465647b9260d839068240ad2186ac46.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*GlNZ97uaYaIklVEIq0pKxA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图4-0和1之间均匀分布变量的直方图分布</strong></figcaption></figure><p id="af73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">平均值约为0.505477，非常接近我们的预期。</p><h2 id="2962" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">中位数</strong></h2><p id="8807" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">中位数测量变量的未加权中心<em class="lf">。如果条目数为奇数，则中间值取中间值。如果有偶数个条目，则中位数取中间两个条目的平均值。中位数可能不会受到每个条目的值的影响。由于这一特性，中值比平均值更具代表性。我将使用与前面部分相同的条目集作为示例。</em></p><p id="e66f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下代码计算中值:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="55d2" class="lg kd hi ma b fi me mf l mg mh">np.median(rvs)</span></pre><p id="2d19" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果是0.5136755026003803。现在，我将把一个条目更改为1，000，这是数据集中最大可能值的1，000倍，并重复计算:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="d959" class="lg kd hi ma b fi me mf l mg mh">rvs[-1]=1000<br/>print(np.mean(rvs))<br/>print(np.median(rvs))</span></pre><p id="22be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果是1.5054701085937803和0.5154761964872。平均值增加了大约1，但中位数是稳健的。</p><p id="9f7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">均值和中值之间的关系通常很有趣，值得研究。通常，较大的中值和较小的平均值的组合表明在较大值一侧有更多的点，但是也存在极小的值。当中位数小于平均数时，情况正好相反。我们将在后面用一些例子来证明这一点。</p><p id="7620" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">模式</strong></p><p id="d4de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一组值的众数是一个集合中最常见的元素。在直方图中很明显，它表示峰值。如果分布只有一个模式，我们称之为单峰。两个峰的高度不必相等的分布称为双峰分布。</p><blockquote class="mn mo mp"><p id="a96d" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hj">双峰和双峰分布</strong></p><p id="4907" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated">有时候，双峰的定义是错误的。<strong class="is hj">双峰</strong>的性质通常是指具有两个模态的性质，根据模态的定义，要求峰的高度相同。然而，术语<strong class="is hj">双峰分布</strong>通常指具有两个局部极大值的分布。仔细检查您的发行版，并清楚地说明模式。</p></blockquote><p id="2ce1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码片段演示了分别具有单峰和双峰形状的两种分布:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="5df2" class="lg kd hi ma b fi me mf l mg mh">r1 = [random.normalvariate(0.5,0.2) for _ in range(10000)]<br/>r2 = [random.normalvariate(0.2,0.1) for _ in range(5000)]<br/>r3 = [random.normalvariate(0.8,0.2) for _ in range(5000)]</span><span id="91d7" class="lg kd hi ma b fi mx mf l mg mh">fig, axes = plt.subplots(1,2,figsize=(12,5))<br/>axes[0].hist(r1,bins=100)<br/>axes[0].set_title("Unimodal")<br/>axes[1].hist(r2+r3,bins=100)<br/>axes[1].set_title("Bimodal");</span></pre><p id="14f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">产生的两个支线剧情如下:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es my"><img src="../Images/149fd6a766c426b1bc2112be7c8ad1c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*NysItW7lBFdEi9HHhlyF0w.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图5 -具有一个模式和两个模式的单峰和双峰数据集的直方图</strong></figcaption></figure><p id="55ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">到目前为止，我们已经讨论了均值、中值和众数，这是数据集的前三个统计值。它们是几乎所有探索性数据分析的开始。</p><h1 id="06de" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">了解方差、标准差、四分位数、百分位数和偏斜度</strong></h1><p id="003d" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在上一节中，我们学习了均值、中值和众数。它们都在一定程度上描述了数据集中心部分的属性。在本节中，我们将学习如何描述数据的<em class="lf">传播</em>行为。</p><p id="bf27" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">差异</strong></p><p id="9b18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用相同的符号，总体的方差定义如下:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es mz"><img src="../Images/bbb1e70298608f229427719b634b6f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*rjB6BQpGCT-AWjEM34rhjg.png"/></div></figure><p id="f0fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">直觉上，元素离平均值越远，方差越大。这里，我用不同的方差绘制了两个数据集的直方图。左侧子图中的一个具有0.09的方差，右侧子图中的一个具有0.009的方差，即小10倍。</p><p id="61f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码片段从这两个发行版中生成示例并绘制它们:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="2b6e" class="lg kd hi ma b fi me mf l mg mh">r1 = [random.normalvariate(0.5,0.3) for _ in range(10000)]<br/>r2 = [random.normalvariate(0.5,0.1) for _ in range(10000)]</span><span id="b21a" class="lg kd hi ma b fi mx mf l mg mh">fig, axes = plt.subplots(1,2,figsize=(12,5))<br/>axes[0].hist(r1,bins=100)<br/>axes[0].set_xlim([-1,2])<br/>axes[0].set_title("Big Variance")<br/>axes[1].hist(r2,bins=100)<br/>axes[1].set_title("Small Variance")<br/>axes[1].set_xlim([-1,2]);</span></pre><p id="1c3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果如下:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es na"><img src="../Images/b0aecf0aae0fea93a518422a2b27dd5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*mkGpShJm-VkCpAwwEdOoDQ.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图6 -均值为0.5的大方差和小方差</strong></figcaption></figure><p id="180e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码片段生成了一个散点图，将更清楚地展示这种差异。<em class="lf"> x </em>轴上的变量分布更广:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="c759" class="lg kd hi ma b fi me mf l mg mh">plt.figure(figsize=(8,8))<br/>plt.scatter(r1,r2,alpha=0.2)<br/>plt.xlim(-1,2)<br/>plt.ylim(-1,2)<br/>plt.xlabel("Big Variance Variable")<br/>plt.ylabel("Small Variance Variable")<br/>plt.title("Variables With Different Variances");</span></pre><p id="380e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果如下所示:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nb"><img src="../Images/09805ae5998dcab300490243ea7c96ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*RbwndTzyn93H9zWcrpyhqA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图7 -大方差和小方差变量的散点图</strong></figcaption></figure><p id="8c01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<em class="lf"> x </em>轴上的分布明显大于在<em class="lf"> y </em>轴上的分布，这表明了差异大小的差异。一个常见的错误是没有得到正确的范围。默认情况下，Matplotlib将尝试确定范围。需要用plt.xlim()之类的代码来强制，否则结果可能会误导。</p><h2 id="266d" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">标准偏差</strong></h2><p id="21c5" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">标准差是方差的平方根。它更常用于测量离差水平，因为它与原始数据具有相同的单位。总体标准差的公式为:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nc"><img src="../Images/fcd86cee3a17a04823dd880e2f151fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:344/format:webp/1*8FpiFqP6yTHgdb1aGSbo2g.png"/></div></figure><p id="6a2b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">标准偏差在科学制图中极其重要。标准偏差通常与数据一起绘制，代表对可变性的估计。</p><p id="3be9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我将使用德克萨斯州2011年至2018年的净移民率作为例子。在下面的代码片段中，我将首先提取县级数据，将平均值和标准差附加到一个列表中，然后在最后绘制它们。使用numpy.std()获得标准差，使用matplotlib.pyplot.errorbar()绘制误差线:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="be17" class="lg kd hi ma b fi me mf l mg mh">dfTX = df[df["State"]=="TX"].tail(-1)</span><span id="abe4" class="lg kd hi ma b fi mx mf l mg mh">YEARS = [year for year in range(2011,2019)]<br/>MEANS = []<br/>STDS = []<br/>for i in range(2011,2019):<br/>    year = "R_NET_MIG_"+str(i)<br/>    MEANS.append(np.mean(dfTX[year]))<br/>    STDS.append(np.std(dfTX[year]))</span><span id="5f91" class="lg kd hi ma b fi mx mf l mg mh">plt.figure(figsize=(10,8))<br/>plt.errorbar(YEARS,MEANS,yerr=STDS)<br/>plt.xlabel("Year")<br/>plt.ylabel("Net Immigration Rate");</span></pre><p id="6750" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输出如下图所示:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/aefa249963dadc5c2d209f9243508610.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*7pnCLreyudgAhqxW7cqWVQ.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图8-2011年至2018年德克萨斯州各县净移民率</strong></figcaption></figure><p id="0e66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以在<em class="lf">图8 </em>中看到，虽然得州的净移民只是略微为正，但是标准差是巨大的。一些县可能有很大的正净比率，而其他县可能会遭受人力资源的损失。</p><h2 id="21a9" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">四分位数</strong></h2><p id="6f2e" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">四分位数是一种特殊的分位数，它将数据分成许多相等的部分。例如，四分位数将数据分成四等份，1/2四分位数作为中位数。十分位数和百分位数分别将数据分成10和100等份。</p><p id="3f81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一个四分位数，也称为下四分位数<em class="lf"> Q </em> 1，取的值是所有数据的25%位于它下面。第二个四分位数是中位数。第三个四分位数，<em class="lf"> Q </em> 3，也被称为上四分位数，所有数值的25%位于其上。</p><p id="0395" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">四分位数可能是最常用的<strong class="is hj">分位数</strong>，因为它们与称为<strong class="is hj">箱线图</strong>的统计图相关联。我们用同一套德州净移民数据来研究一下。</p><p id="6d24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NumPy中的函数是quantile()，我们指定一个分位数列表作为我们要计算的分位数的参数，如下面的单行代码片段所示:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="3f4a" class="lg kd hi ma b fi me mf l mg mh">np.quantile(dfTX["R_NET_MIG_2013"],[0.25,0.5,0.75])</span></pre><p id="be25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输出如下所示:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="9da2" class="lg kd hi ma b fi me mf l mg mh">plt.figure(figsize=(12,5))<br/>plt.hist(dfTX["R_NET_MIG_2013"],bins=50,alpha=0.6)<br/>for quartile in np.quantile(dfTX["R_NET_<br/>MIG_2013"],[0.25,0.5,0.75]):<br/>    plt.axvline(quartile,linestyle=':',linewidth=4)</span></pre><p id="4cd0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从下面的输出可以看出，垂直虚线表示三个四分位数:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es ne"><img src="../Images/5e52c98348c0aa9334755368febb009e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*OC26pd83Ply93NWodtOfvA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图9-2013年净移民数据的四分位数</strong></figcaption></figure><p id="07bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上四分位数和下四分位数恰好保留了中间50%的数据值。<em class="lf"> Q </em> 3 — <em class="lf"> Q </em> 1是指被称为<strong class="is hj">四分位间距</strong> ( <strong class="is hj"> IQR </strong>)的四分位间距，它在异常值检测中起着重要的作用。我们很快会看到更多的内容。</p><h2 id="b548" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">偏斜度</strong></h2><p id="1972" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">偏斜度不同于前面小节中讨论的三种可变性度量。它测量数据的走向和数据分布倾斜的程度。偏斜度由以下等式给出:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nf"><img src="../Images/98b123195662f3352bf186cee9df28db.png" data-original-src="https://miro.medium.com/v2/resize:fit:266/format:webp/1*8U8A4-EL3iPmeIWyFFzybg.png"/></div></figure><blockquote class="mn mo mp"><p id="e351" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hj">偏斜度的各种定义</strong></p><p id="35a8" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated">我们前面定义的偏度，准确的说就是皮尔逊第一偏度系数。它是通过模式定义的，但是偏斜度还有其他的定义。例如，偏斜度可以通过中位数来定义。</p></blockquote><p id="5aef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">偏斜度没有单位。如果均值大于众数，偏度为正，我们说数据向右偏。否则，数据会向左倾斜。</p><p id="6520" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是生成两组倾斜数据并绘制它们的代码片段:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="5967" class="lg kd hi ma b fi me mf l mg mh">r1 = [random.normalvariate(0.5,0.4) for _ in range(10000)]<br/>r2 = [random.normalvariate(0.1,0.2) for _ in range(10000)]<br/>r3 = [random.normalvariate(1.1,0.2) for _ in range(10000)]</span><span id="49b8" class="lg kd hi ma b fi mx mf l mg mh">fig, axes = plt.subplots(1,2,figsize=(12,5))<br/>axes[0].hist(r1+r2,bins=100,alpha=0.5)<br/>axes[0].axvline(np.mean(r1+r2), linestyle=':',linewidth=4)<br/>axes[0].set_title("Skewed To Right")<br/>axes[1].hist(r1+r3,bins=100,alpha=0.5)<br/>axes[1].axvline(np.mean(r1+r3),linestyle=':',linewidth=4)<br/>axes[1].set_title("Skewed to Left");</span></pre><p id="5404" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">垂直虚线表示平均值的位置，如下所示:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es ng"><img src="../Images/7fe4c92e2cbb8a5631eb0510868c5276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*Gg2yVZcQYW09wJ8SXZQx8w.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图10 -偏斜度演示</strong></figcaption></figure><p id="20ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想想收入不平等的问题。假设你有一张不同财富水平的人口直方图。一个更大的值，就像其中的<em class="lf"> x </em>轴值表示财富的数量，而<em class="lf"> y </em>轴值表示属于某个财富数量范围的人口比例。更大的x值意味着更多的财富。y值越大，意味着越多的人属于这个财富范围。正偏度(图10左边的副曲线)意味着，尽管平均收入看起来不错，但这可能是由极少数超级富豪推高的，而大多数人的收入相对较低。负偏度(图10 右侧的子曲线)表明大多数人的收入可能高于平均值，因此可能有一些非常贫穷的人需要帮助。</p><h2 id="1d07" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">重新检查异常值检测</strong></h2><p id="90c8" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">现在让我们用我们所学的知识来重新审视离群点检测问题。</p><p id="614e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">z分数<strong class="is hj">也称为<strong class="is hj">标准分数</strong>，是检测异常值的一个很好的标准。它测量条目和总体均值之间的距离，并考虑总体方差:</strong></p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nh"><img src="../Images/c3e84a9ed84472fdb97b72150dcb70a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:198/format:webp/1*QEma-hbNe3dCviAPYtvqWQ.png"/></div></figure><p id="2943" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果基础分布为正态分布，则z值大于3或小于0的情况只有大约0.27%的概率。即使基础分布不是正态的，切比雪夫定理也保证了一个强索赔，使得总人口的至多1/( <em class="lf"> k^ </em> 2)，其中<em class="lf"> k </em>是一个整数，可以落在<em class="lf"> k </em>标准差之外。</p><p id="4955" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，下面的代码片段生成10，000个数据点，它们遵循正态分布:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="e228" class="lg kd hi ma b fi me mf l mg mh">random.seed(2020)<br/>x = [random.normalvariate(1, 0.5) for _ in range(10000)]<br/>plt.figure(figsize=(10,8))<br/>plt.hist(x,bins=100,alpha=0.5);<br/>styles = [":","--","-."]<br/>for i in range(3):<br/>    plt.axvline(np.mean(x) + (i+1)*np.std(x),<br/>        linestyle=styles[i],<br/>        linewidth=4)<br/>    plt.axvline(np.mean(x) - (i+1)*np.std(x),<br/>        linestyle=styles[i],<br/>        linewidth=4)<br/>plt.title("Integer Z values for symmetric distributions");</span></pre><p id="29a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在生成的直方图中，虚线表示<em class="lf"> z </em> = 1的位置。虚线表示<em class="lf"> z </em> = 2的位置。点划线表示<em class="lf"> z </em> = 3的位置；</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es ni"><img src="../Images/f6d897d30affbd2516bbd329445ff51b.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*lKCdx5LW5tWbu6Yb9Wn-OA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图11 -正态分布对称数据的整数z值边界</strong></figcaption></figure><p id="a0a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们改变数据点，分布将会改变，但z分数标准将保持有效。正如您在下面的代码片段中看到的，生成的是非对称分布，而不是正态分布:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="5579" class="lg kd hi ma b fi me mf l mg mh">x = [random.normalvariate(1, 0.5) + random.expovariate(2) for _<br/>in range(10000)]</span></pre><p id="b183" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这会产生以下输出:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nj"><img src="../Images/3bfb129804c0908a24bff3d94cf9f041.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*Bo_iDy9fU-MWkjd79bgg6Q.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图12 -不对称数据的整数z值边界</strong></figcaption></figure><blockquote class="mn mo mp"><p id="5825" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hj">关于极端异常值影响的说明</strong></p><p id="9999" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated">z得分的一个缺点是平均值本身也会受到极端异常值的影响。中值可以代替平均值来消除这种影响。</p></blockquote><p id="f481" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们已经介绍了对数据集中的方差进行建模的几个最重要的统计数据。在下一节中，让我们研究要素的数据类型。</p><h1 id="10c6" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">知道如何处理分类变量和混合数据类型</strong></h1><p id="f9b0" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">分类变量通常比连续变量具有更简单的结构或描述性统计。在这里，我们介绍频率和比例，并讨论一些有趣的描述性统计例子时，转换连续变量到分类。</p><p id="faa0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们已经介绍了对数据集中的方差进行建模的几个最重要的统计数据。在下一节中，让我们研究要素的数据类型。</p><h1 id="a4b2" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">知道如何处理分类变量和混合数据类型</strong></h1><p id="759d" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">分类变量通常比连续变量具有更简单的结构或描述性统计。在这里，我们介绍频率和比例，并讨论一些有趣的描述性统计例子时，转换连续变量到分类。</p><h2 id="ac2e" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">频率和比例</strong></h2><p id="7e78" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">当我们讨论分类变量的模式时，我们引入了Counter，它输出一个字典结构，其键值对是元素计数对。下面是一个计数器的示例:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="64c1" class="lg kd hi ma b fi me mf l mg mh">Counter({2.0: 394, 3.0: 369, 6.0: 597, 1.0: 472, 9.0: 425, 7.0:<br/>434, 8.0: 220, 4.0: 217, 5.0: 92})</span></pre><p id="1b9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下代码片段以条形图的形式展示了频率，其中计数的绝对值变得很直观:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="8c16" class="lg kd hi ma b fi me mf l mg mh">counter = Counter(df["Rural-urban_Continuum Code_2013"].<br/>dropna())<br/>labels = []<br/>x = []<br/>for key, val in counter.items():<br/>    labels.append(str(key))<br/>    x.append(val)<br/>plt.figure(figsize=(10,8))<br/>plt.bar(labels,x)<br/>plt.title("Bar plot of frequency");</span></pre><p id="a7d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将生成如下所示的条形图:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nk"><img src="../Images/09ea8c37fd2e86f7772a3caac24ea354.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*dYdRzzxoIFo5fEzE1QIXwA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图13 -城乡连续体代码柱状图</strong></figcaption></figure><p id="981b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了成比例，只需将每个计数除以计数的总和，如下面的代码片段所示:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="e1b3" class="lg kd hi ma b fi me mf l mg mh">x = np.array(x)/sum(x)</span></pre><p id="0095" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">条形图的形状保持不变，但是<em class="lf"> y </em>轴刻度发生了变化。为了更好地检查组件的相对大小，我在以下代码片段的帮助下绘制了一个饼图:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="733a" class="lg kd hi ma b fi me mf l mg mh">plt.figure(figsize=(10,10))<br/>plt.pie(x=x,labels=labels,)<br/>plt.title("Pie plot for rural-urban continuum code");</span></pre><p id="080e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将创建一个漂亮的饼图，如下所示:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nl"><img src="../Images/626d4c21f911425adcb45f73c3a83bbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*NJQYooLQuhD8UR4zkfzLgA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图14 -城乡结合部代码饼状图</strong></figcaption></figure><p id="ba23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">很明显，代码2.0包含的样本是代码8.0的两倍。</p><p id="cb06" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与平均值和中位数不同，分类数据确实有一个模式。我们将重复使用相同的数据:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="5dfa" class="lg kd hi ma b fi me mf l mg mh">Counter(df["Rural-urban_Continuum Code_2013"].dropna())</span></pre><p id="26e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输出如下所示:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="388c" class="lg kd hi ma b fi me mf l mg mh">Counter({2.0: 394, 3.0: 369, 6.0: 597, 1.0: 472, 9.0: 425, 7.0:<br/>434, 8.0: 220, 4.0: 217, 5.0: 92})</span></pre><p id="ca1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">模式为6.0。</p><blockquote class="mn mo mp"><p id="0ce9" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hj">注</strong></p><p id="bf29" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated">这种模式意味着，在美国，城市人口在2，500到19，999人之间的大都市地区最常见，而不是数字6.0。</p></blockquote><h2 id="da2f" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">将连续变量转化为分类变量</strong></h2><p id="4b60" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">有时，我们可能需要将连续变量转换成分类变量。我们以寿命为例。80岁以上的年龄组应该很小。在分类任务中，它们中的每一个都代表一个可以忽略的数据点。如果能将他们分组在一起，那么这个年龄段的个体点的稀疏性引入的噪音就会减少。</p><p id="7a01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">执行分类的常用方法是使用分位数。例如，quartiles会将数据集分成四个部分，每个部分包含相同数量的条目。这避免了诸如数据不平衡的问题。</p><p id="24db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，以下代码显示了净移民率(一个连续变量)分类的临界值:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="ffbf" class="lg kd hi ma b fi me mf l mg mh">series = df["R_NET_MIG_2013"].dropna()<br/>quantiles = np.quantile(series,[0.2*i for i in range(1,5)])<br/>plt.figure(figsize=(10,8))<br/>plt.hist(series,bins=100,alpha=0.5)<br/>plt.xlim(-50,50)<br/>for i in range(len(quantiles)):<br/>    plt.axvline(quantiles[i],linestyle=":", linewidth=4)<br/>plt.title("Quantiles for net immigration data");</span></pre><p id="5eb8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如您在下面的输出中看到的，垂直虚线将数据分成5个相等的集合，这很难用肉眼发现。我截断了<em class="lf"> x </em>轴来选择-50和50之间的部分。结果如下所示:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nk"><img src="../Images/fbad4915ce42538584f4c0147238dc47.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*cDuvTkG6axMmWgFOo83PiQ.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图15 -净移民率的分位数</strong></figcaption></figure><blockquote class="mn mo mp"><p id="0c04" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hj">关于信息丢失的说明</strong></p><p id="8215" class="iq ir lf is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated">分类破坏了连续变量中丰富的结构。只有在绝对需要的时候才使用它。</p></blockquote><h1 id="179e" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">使用二元和多元描述性统计</strong></h1><p id="c33b" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在这一节中，我们简要地谈谈二元描述统计。双变量描述性统计应用两个变量，而不是一个。我们将关注连续变量的相关性和分类变量的交叉制表。</p><h2 id="7f7b" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">协方差</strong></h2><p id="bb26" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">单词<em class="lf">协方差</em>经常被错误地用作<em class="lf">相关性</em>。然而，有一些基本的区别。协方差通常衡量两个变量的联合可变性，而相关性更关注可变性的强度。相关系数在不同的用例中有几种定义。最常见的描述性统计是皮尔逊相关系数。我们也会用它来描述两个变量的协方差。总体中变量<em class="lf"> x </em>和<em class="lf"> y </em>的相关系数定义如下:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nm"><img src="../Images/0931168cc525d7e8b7ba93f705480c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*-5Nm65vzeEEwW3LAbUz5mw.png"/></div></figure><p id="7da5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们首先检查表达式的符号。当<em class="lf"> x </em>大于其均值且<em class="lf"> y </em>也大于其自身均值时，系数为正。</p><p id="109e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一种情况是当<em class="lf"> x </em>和<em class="lf"> y </em>分别小于它们的平均值时。乘积求和，然后通过每个变量的标准差得到归一化的<em class="lf"/>。因此，正系数表示<em class="lf"> x </em>和<em class="lf"> y </em>共同向同一方向变化。你可以对负系数做类似的论证。</p><p id="9835" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下面的代码片段中，我们选择德克萨斯州各县的净移民率作为数据集，并使用corr()函数来检查跨年度的相关系数:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="32c9" class="lg kd hi ma b fi me mf l mg mh">corrs = dfTX[['R_NET_MIG_2011','R_NET_MIG_2012', 'R_NET_<br/>MIG_2013', 'R_NET_MIG_2014', 'R_NET_MIG_2015','R_NET_MIG_2016',<br/>'R_NET_MIG_2017', 'R_NET_MIG_2018']].corr()</span></pre><p id="0ae9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输出是所谓的<em class="lf">相关矩阵</em>，其对角元素是自相关系数，仅为1:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nn"><img src="../Images/faee1f07e68b07b034e8b81eb0bb6c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*qgDpa4i3iQYAicsljqpbzA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图16 -净移民率的相关矩阵</strong></figcaption></figure><p id="9a38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可视化这个矩阵的一个好方法是使用Seaborn库中的heatmap()函数。以下代码片段生成了一个漂亮的热图:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="90e8" class="lg kd hi ma b fi me mf l mg mh">import seaborn as sns<br/>plt.figure(figsize=(10,8))<br/>plt.rcParams.update({'font.size': 12})<br/>sns.heatmap(corrs,cmap="YlGnBu");</span></pre><p id="d9ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果如下:</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es no"><img src="../Images/79db7e4962e367a690287e736bfe5db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*AuAKOX7_5epWMo1enFZyqw.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图17 -德克萨斯州净移民率相关矩阵热图</strong></figcaption></figure><p id="c152" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们确实看到了一个有趣的模式，奇数年之间的相关性更强，偶数年之间的相关性也更强。然而，在偶数年和奇数年之间，情况并非如此。也许有一个2年的循环模式，相关矩阵的热图正好帮助我们发现了它。</p><h2 id="3dde" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated"><strong class="ak">交叉制表</strong></h2><p id="3567" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">交叉制表可被视为分类变量相关性检测的离散版本。它有助于获得无数的见解，并揭示了下游任务的设计。</p><p id="49f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里有一个例子。我正在创建一个天气信息列表和另一个高尔夫球手是否去打高尔夫球的决定列表。crosstab()函数生成下表:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="57c4" class="lg kd hi ma b fi me mf l mg mh">weather = ["rainy","sunny","rainy","windy","windy",<br/>           "sunny","rainy","windy","sunny","rainy",<br/>           "sunny","windy","windy"]<br/>golfing = ["Yes","Yes","No","No","Yes","Yes","No","No",<br/>           "Yes","No","Yes","No","No"]<br/>dfGolf = pd.DataFrame({"weather":weather,"golfing":golfing})<br/>pd.crosstab(dfGolf.weather, dfGolf.golfing, margins=True)</span></pre><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es np"><img src="../Images/cb4f8c2fcf7f65916e55a6adf77cfb4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:242/format:webp/1*rSMzv2TE63MHHQv1Pfmg_A.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx translated"><strong class="bd ke">图18 -高尔夫决策交叉列表</strong></figcaption></figure><p id="5a8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如您所见，列和行给出了精确的计数，由列名和行名标识。对于要素数量有限的数据集，这是一种检查不平衡或偏差的简便方法。</p><p id="d653" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以知道，如果天气晴朗，高尔夫球手会去打高尔夫球，而在雨天或刮风天，他们很少去打高尔夫球。</p><h1 id="c072" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">总之</strong></h1><p id="223e" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在本文中，我们解释了什么是描述性统计，以及它们能告诉你什么。您已经了解了如何从数据集中提取信息，并使用描述性统计进行定量判断。希望现在已经很清楚了，理解不同的描述性统计，知道何时使用它们，以及从您的数据中获得它们的实际能力，是数据科学家的工具箱中不可或缺的项目。</p><p id="efd0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">掌握了这些知识，您可以从统计学的角度加深对数据科学和数据分析的理解，并使用Python编程从数据中提取有意义的见解。看看李荣鹏的书<a class="ae lu" href="https://packt.live/3dTBde4" rel="noopener ugc nofollow" target="_blank">非STEM数据分析师的基本统计</a>。</p></div></div>    
</body>
</html>