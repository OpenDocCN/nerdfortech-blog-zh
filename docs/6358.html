<html>
<head>
<title>Running E2E tests in a Dockerized Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Dockerized环境中运行E2E测试</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/running-e2e-tests-in-a-dockerized-environment-9e7dfe5adf24?source=collection_archive---------1-----------------------#2022-02-09">https://medium.com/nerd-for-tech/running-e2e-tests-in-a-dockerized-environment-9e7dfe5adf24?source=collection_archive---------1-----------------------#2022-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a9abdff96ab12506308227a0a8e0125e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z3M-hyg79aC3XDdE1svK_Q.png"/></div></div></figure><p id="1070" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大家好。在本文中，我将分享我在为OpenMRS做贡献时获得的新体验。</p><p id="2be0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">端到端(E2E)测试</strong></p><p id="57d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">端到端测试是一种从头到尾测试整个软件的技术，以确保应用程序流按预期运行。它定义了产品的系统依赖关系，并确保所有集成功能按预期协同工作。端到端(E2E)测试的主要目的是通过模拟真实的用户场景和验证系统，从最终用户的体验出发进行测试。E2E测试可以手动进行，也可以通过自动方法进行。</p><p id="e162" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">OpenMRS 3.x使用Cypress和Cucumber来自动化他们的测试。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/a47185205bcb8940a30e452a81b1e0da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OvwCNqdsEpPUE5P23tj0Ug.png"/></div></div></figure><p id="fe40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在OpenMRS 3中。x E2E测试是在生产服务器上进行的。3.x QA团队在修复和改进E2E测试工作流程时，遇到了各种各样的问题。主要原因是生产服务器需要很长时间来加载。因此，有时预览不显示或者测试找不到一些组件。由于这些原因，一些测试工作流会失败。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/a8476c0b524f65a58bd4b85b90039fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWHJz7DOXqjJ0o1W7NZ0nQ.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">针对生产服务器进行测试</figcaption></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/29bec4dc3249fb0eb53939ce63752527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*278gle4ygH1b_swstTs0FA.png"/></div></div></figure><p id="fd5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为这个问题的解决方案，他们考虑对docker容器中托管的OpenMRS应用程序运行测试。这以前已经实现过，但是由于docker镜像中的一些问题而失败了。然而最近docker镜像中的问题已经解决了，我有机会实现它。</p><p id="52ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了实现这个特性，我首先获得了3.x图像文件，并在本地机器的docker容器中构建它。接下来，为了测试这一点，我使用了患者搜索测试。当根据docker图像运行患者搜索测试时，该测试应该首先在系统中创建一个患者，因为最初数据库中没有记录患者。因此，一旦完成这些更改，接下来我将更改患者搜索Github操作工作流的结构，以便针对docker图像运行。这是之前由<a class="jz ka ge" href="https://medium.com/u/cd6875870f78?source=post_page-----9e7dfe5adf24--------------------------------" rel="noopener" target="_blank"> Jayasanka Weerasinghe </a>完成的，所以它对我帮助很大。</p><p id="30cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我在Github中将更改推送到我的原点(forked repo ),并手动触发工作流进行测试。几分钟后宾果！！工作流通过。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/6e06797ef6da1b4c17770744a446e6db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6py2VB48xcqcMHbG7XHfNw.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">Github操作中的构建结果</figcaption></figure><p id="4adf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kc"> Github动作构建</em> <a class="ae kd" href="https://github.com/kumuditha-udayanga/openmrs-contrib-qaframework/runs/4949350651?check_suite_focus=true" rel="noopener ugc nofollow" target="_blank"> <em class="kc">链接</em> </a> <em class="kc">。</em></p><p id="e34d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这解决了在OpenMRS 3.x的E2E测试中出现的许多问题</p><p id="26f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是用docker运行患者搜索测试的屏幕记录。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/53bc30de2da90cc12dd7384ae623b8f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*T2b5MrWEVjFNT6w_I7ECGw.gif"/></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">根据docker映像进行测试</figcaption></figure><p id="1043" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就把我们带到了文章的结尾。别忘了也看看我的其他文章。有兴趣为OpenMRS做贡献吗？请访问此<a class="ae kd" href="https://openmrs.org/get-involved/" rel="noopener ugc nofollow" target="_blank">链接</a>，看看您如何开始投稿。<br/>感谢您的阅读，保持安全…</p></div></div>    
</body>
</html>