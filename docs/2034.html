<html>
<head>
<title>How to use Axios with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何配合 React 使用 Axios</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-use-axios-with-react-cb7d9c224582?source=collection_archive---------2-----------------------#2021-04-18">https://medium.com/nerd-for-tech/how-to-use-axios-with-react-cb7d9c224582?source=collection_archive---------2-----------------------#2021-04-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4dcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是我如何使用 Axios 和 react(你需要知道的一切)的经验</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/b530ca2b0e24961072533ed0eee7b826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d_SS97L5IJeekXnEOD9JXg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">React 中 API 调用的 Axios</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><blockquote class="ka kb kc"><p id="851a" class="if ig kd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">过去 3 年一直在研究 react。这是一个巨大的旅程，为解决世界问题提供了许多信心。和主要思想过程，为开始学习 react 的开发人员(初级或中级)写下这段文字，以帮助他们如何使用 Axios 在 react 中使用 API 调用。</p></blockquote><p id="39ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在深入研究 Axios 之前，您需要具备 javascript 和 XMLHttpRequest 的基础知识。XMLHttpRequest 对象可用于从 web 服务器请求数据。XMLHttpRequest 对象是开发人员的梦想，因为您可以:</p><ul class=""><li id="4bab" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">更新网页而不重新加载页面</li><li id="069c" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">从服务器请求数据—在页面加载后</li><li id="4ebb" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">在后台向服务器发送数据</li><li id="f453" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">从服务器接收数据—在页面加载后</li></ul><p id="5e03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae kv" href="https://javascript.info/xmlhttprequest" rel="noopener ugc nofollow" target="_blank"> XMLHttpRequest </a>的信息。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="acfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我将解释如何在 React 应用程序中使用 Axios 进行 GET、POST、PUT 和其他 HTTP 请求</p><h1 id="ae9a" class="kw kx hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">Axios 是什么？</h1><p id="494b" class="pw-post-body-paragraph if ig hi ih b ii lu ik il im lv io ip iq lw is it iu lx iw ix iy ly ja jb jc hb bi translated">Axios 是一个受欢迎的、基于 promise 的 HTTP 客户端，它拥有一个易于使用的 API，可以在浏览器和 Node.js 中使用。我们可以使用 Axios 和 React 向 API 发出请求，从 API 返回数据，然后在 React 应用程序中处理这些数据。</p><p id="4083" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了 Axios，开发人员还可以利用 async/await 获得更可读的异步代码。</p><h2 id="baba" class="lz kx hi bd ky ma mb mc lc md me mf lg iq mg mh lk iu mi mj lo iy mk ml ls mm bi translated">安装 Axios</h2><p id="4acd" class="pw-post-body-paragraph if ig hi ih b ii lu ik il im lv io ip iq lw is it iu lx iw ix iy ly ja jb jc hb bi translated">首先，我们需要将 Axios 安装到 react 项目中。使用以下命令安装。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="725e" class="lz kx hi mo b fi ms mt l mu mv">// Install with npm<br/>npm install axios</span><span id="b6f7" class="lz kx hi mo b fi mw mt l mu mv"><strong class="mo hj">or</strong></span><span id="d316" class="lz kx hi mo b fi mw mt l mu mv">// Install with yarn<br/>yarn add axios</span><span id="6aee" class="lz kx hi mo b fi mw mt l mu mv"><strong class="mo hj">or</strong></span><span id="1186" class="lz kx hi mo b fi mw mt l mu mv">// Install with bower<br/>bower install axios</span></pre><p id="5c95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您在 package.json 中安装了 Axios，让我们开始编写一些代码片段。要打电话给 Axios，我们需要知道如何跟进-</p><ol class=""><li id="01f0" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc mx kn ko kp bi translated">请求的 URL。</li><li id="392b" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc mx kn ko kp bi translated">方法— (GET、POST 或 PUT 等。,)</li><li id="8e18" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc mx kn ko kp bi translated">头球</li></ol><p id="20f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是你的应用程序中 Axios 调用的文件夹结构</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="07aa" class="lz kx hi mo b fi ms mt l mu mv">src/components-<br/>    -- Datalayer<br/>         -- axiosMethodCalls.js<br/>         -- datalayerUtilities.js<br/>    -- Configuration<br/>         -- config_url.js</span></pre><p id="165b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将所有端点保存在一个特定的文件中——在这个场景中是<strong class="ih hj"> config_url.js </strong>。因此，我们可以在应用程序的一个文件中跟踪所有端点。<br/> <strong class="ih hj">例如— config_url.js </strong></p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="ef73" class="lz kx hi mo b fi ms mt l mu mv">// All Endpoints.<br/>export const jokeCategoriesUrl = `<a class="ae kv" href="https://api.chucknorris.io/jokes/categories" rel="noopener ugc nofollow" target="_blank">https://api.chucknorris.io/jokes/categories</a>`;</span><span id="8ffe" class="lz kx hi mo b fi mw mt l mu mv">export const mockablePostUrl = `<a class="ae kv" href="https://www.google.com/url?q=http://demo0725191.mockable.io/post_data&amp;sa=D&amp;source=hangouts&amp;ust=1618854235003000&amp;usg=AFQjCNGnjVmyaEF9avGv91AlqoNrVntG0g" rel="noopener ugc nofollow" target="_blank">http://demo0725191.mockable.io/post_data</a>`;</span><span id="e75e" class="lz kx hi mo b fi mw mt l mu mv">export const mockablePutUrl = `<a class="ae kv" href="https://www.google.com/url?q=http://demo0725191.mockable.io/post_data&amp;sa=D&amp;source=hangouts&amp;ust=1618854235003000&amp;usg=AFQjCNGnjVmyaEF9avGv91AlqoNrVntG0g" rel="noopener ugc nofollow" target="_blank">http://demo0725191.mockable.io/put_data</a>`;</span><span id="b9df" class="lz kx hi mo b fi mw mt l mu mv">export const mockableDeleteUrl = `<a class="ae kv" href="https://www.google.com/url?q=http://demo0725191.mockable.io/post_data&amp;sa=D&amp;source=hangouts&amp;ust=1618854235003000&amp;usg=AFQjCNGnjVmyaEF9avGv91AlqoNrVntG0g" rel="noopener ugc nofollow" target="_blank">http://demo0725191.mockable.io/delete_data</a>`;</span></pre><p id="b145" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将所有 Axios 方法调用保存在特定文件中——在这个场景中<strong class="ih hj">axiomethodcalls . js</strong>,我们可以在应用程序的一个文件中跟踪所有 Axios 方法调用。<br/> <strong class="ih hj">比如—axiomethodcalls . js<br/></strong>我为 Axios 方法调用创建了一些通用函数，比如 GET、POST、PUT、DELETE。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="9abe" class="lz kx hi mo b fi ms mt l mu mv">// API Axios Get Call.<br/>export const getAPICall = (url) =&gt; {<br/>    return axios.get(url);<br/>}</span><span id="bcd2" class="lz kx hi mo b fi mw mt l mu mv">// API Axios Post Call.<br/>export const postAPICall = (url, data) =&gt; {<br/>    return axios.post(url, data);<br/>}</span><span id="1229" class="lz kx hi mo b fi mw mt l mu mv">// API Axios Put Call.<br/>export const putAPICall = (url, data) =&gt; {<br/>    return axios.put(url, data);<br/>}</span><span id="8f64" class="lz kx hi mo b fi mw mt l mu mv">// API Axios Delete Call.<br/>export const deleteAPICall = (url) =&gt; {<br/>    return axios.delete(url);<br/>}</span></pre><p id="fb19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将所有 Axios 调用保存在特定文件中——在这个场景中<strong class="ih hj"> datalayerUtilities.js </strong>我们可以在应用程序的一个文件中跟踪所有 API 调用。<br/> <strong class="ih hj">例如— datalayerUtilities.js </strong></p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="3393" class="lz kx hi mo b fi ms mt l mu mv">// Import the endpoints.<br/>import { jokeCategoriesUrl, mockablePostUrl, mockablePutUrl, mockableDeleteUrl } from  './configuration/config_url';</span><span id="59a9" class="lz kx hi mo b fi mw mt l mu mv">// Import the axios Method.<br/>import { getAPICall, postAPICall, putAPICall, deleteAPICall } from './axiosMethodCalls';</span></pre><h2 id="1ac6" class="lz kx hi bd ky ma mb mc lc md me mf lg iq mg mh lk iu mi mj lo iy mk ml ls mm bi translated">获取请求-</h2><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="8888" class="lz kx hi mo b fi ms mt l mu mv">// Axios Get Call - Get all jokes categories.<br/>export const getJokeCategorieData = async () =&gt; {<br/>    try {<br/>        const response = await getAPICall(jokeCategoriesUrl);<br/>        return response.data;<br/>    }<br/>    catch(error){<br/>        return error.response;<br/>    }<br/>}</span></pre><h2 id="61a3" class="lz kx hi bd ky ma mb mc lc md me mf lg iq mg mh lk iu mi mj lo iy mk ml ls mm bi translated">发布请求-</h2><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="d830" class="lz kx hi mo b fi ms mt l mu mv">// Axios Post Call - MockablePost.<br/>export const mockablePostData = () =&gt;{<br/>     try {<br/>        const response = await postAPICall('mockablePostUrl', {<br/>              posted_data: 'example' });<br/>        console.log('👉 Returned data:', response);   <br/>     } <br/>     catch (error) {<br/>        console.log(`😱 Axios request failed: ${error}`);<br/>     }<br/>}</span></pre><h2 id="fc9e" class="lz kx hi bd ky ma mb mc lc md me mf lg iq mg mh lk iu mi mj lo iy mk ml ls mm bi translated">上传请求-</h2><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="e04c" class="lz kx hi mo b fi ms mt l mu mv">// Axios Put Call - MockablePut.<br/>export const mockablePutData = () =&gt;{<br/>     try {<br/>        const response = await putAPICall('mockablePostUrl', {<br/>              posted_data: 'example' });<br/>        console.log('👉 Returned data:', response.data);   <br/>     } <br/>     catch (error) {<br/>        console.log(`😱 Axios request failed: ${error}`);<br/>     }<br/>}</span></pre><h2 id="d0f4" class="lz kx hi bd ky ma mb mc lc md me mf lg iq mg mh lk iu mi mj lo iy mk ml ls mm bi translated">删除请求-</h2><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="460a" class="lz kx hi mo b fi ms mt l mu mv">// Axios Delete Call - MockableDelete.<br/>export const mockableDeleteData = () =&gt;{<br/>     try {<br/>        const response = await deleteAPICall('mockablePostUrl');<br/>        console.log('👉 Returned data:', response.data);   <br/>     } <br/>     catch (error) {<br/>        console.log(`😱 Axios request failed: ${error}`);<br/>     }<br/>}</span></pre><h2 id="12a1" class="lz kx hi bd ky ma mb mc lc md me mf lg iq mg mh lk iu mi mj lo iy mk ml ls mm bi translated">反应成分—</h2><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="3116" class="lz kx hi mo b fi ms mt l mu mv">import React from 'react';<br/>import { getJokeCategorieData, mockablePostData, mockablePutData, mockableDeleteData } from '../Datalayer/datalayerUtilities';</span><span id="3a97" class="lz kx hi mo b fi mw mt l mu mv">class App extends Component{<br/>    constructor(props){<br/>        super(props);<br/>        this.state = {<br/>             ListOfJokeCatgories: "",<br/>             isLoading: true,<br/>        }<br/>    }<br/>    handlerListOfJokesCategories = async() =&gt; {<br/>         const responseData = await getJokeCategorieData();<br/>         this.setState({ <br/>             ListOfJokeCatgories: responseData.data,<br/>             isLoading: false<br/>         });<br/>    }</span><span id="85f3" class="lz kx hi mo b fi mw mt l mu mv">componentDidMount(){<br/>        this.handlerListOfJokesCategories();<br/>    }<br/>    <br/>    render(){<br/>       return (<br/>          &lt;div className="container"&gt;<br/>              { this.state.isLoading ?<br/>                   &lt;div&gt;Loading.....&lt;/div&gt;<br/>                :<br/>                   // Render your api call logic here...<br/>              }<br/>          &lt;/div&gt;<br/>       )<br/>    }<br/>}<br/>export default APP;</span></pre><h1 id="641d" class="kw kx hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="2de3" class="pw-post-body-paragraph if ig hi ih b ii lu ik il im lv io ip iq lw is it iu lx iw ix iy ly ja jb jc hb bi translated">用 Axios 处理请求非常容易理解。还有改进的空间，比如增加更多的抽象和结构，但那是额外的时间。</p><p id="cbbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用 React 和 Axios 会相信什么？是否有人认为我遗漏了或应该涵盖某些特征？请在下面的评论中告诉我！</p></div></div>    
</body>
</html>