<html>
<head>
<title>What is the Redux.js?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redux.js 是什么？</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/what-is-the-redux-js-b74b172423ef?source=collection_archive---------18-----------------------#2021-04-11">https://medium.com/nerd-for-tech/what-is-the-redux-js-b74b172423ef?source=collection_archive---------18-----------------------#2021-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5c0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux 是一个用于处理 web 应用程序状态的开源 js 库。这个库可以在 React 和 Angular 等不同的 web app 框架中使用。下面概述了如何在 react web 应用程序中使用 redux。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/540183472b385b2a232ed6101bfeca78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2DNKy3eF9Pn5fJ8HWghxxw.jpeg"/></div></div></figure><h1 id="6c6a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">如何安装</h1><p id="2317" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">如果您想要初始化一个新的 react 应用程序，或者将 redux 添加到您当前的 react 应用程序，有两种方法可以将 redux 添加到您的项目中。</p><h2 id="b149" class="ks jq hi bd jr kt ku kv jv kw kx ky jz iq kz la kd iu lb lc kh iy ld le kl lf bi translated">用 redux 创建一个 react 应用</h2><p id="880e" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">如果您想使用 redux 创建一个 react 应用程序，可以简单地编写以下命令:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="58ec" class="ks jq hi lh b fi ll lm l ln lo">npx create-react-app my-app --template <strong class="lh hj">redux</strong></span></pre><p id="376e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">否则，如果您喜欢通过 TypeScript 进行编码，您可以运行以下命令:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="5615" class="ks jq hi lh b fi ll lm l ln lo">npx create-react-app my-app --template <strong class="lh hj">redux-typescript</strong></span></pre><p id="9ebe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过运行上面的代码，它创建了一个集成了 Redux 的 react app。</p><h2 id="3b87" class="ks jq hi bd jr kt ku kv jv kw kx ky jz iq kz la kd iu lb lc kh iy ld le kl lf bi translated">Redux 包的手动安装</h2><p id="4a97" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">通过运行以下 npm 命令，您可以在当前项目中安装 redux 包:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="9c6a" class="ks jq hi lh b fi ll lm l ln lo">npm install <strong class="lh hj">redux</strong></span></pre><p id="2d5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="dded" class="ks jq hi lh b fi ll lm l ln lo">yarn add <strong class="lh hj">redux</strong></span></pre><p id="d40c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您还需要安装 react-redux 和 redux-devtools-extension 包:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="2aca" class="ks jq hi lh b fi ll lm l ln lo">npm install <strong class="lh hj">react-redux<br/></strong>npm install <strong class="lh hj">redux-devtools-extension</strong></span></pre><p id="840c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="9ec9" class="ks jq hi lh b fi ll lm l ln lo">yarn add <strong class="lh hj">react-redux<br/></strong>yarn add <strong class="lh hj">redux-devtools-extension</strong></span></pre><h1 id="8f9a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">如何实施</h1><h2 id="8123" class="ks jq hi bd jr kt ku kv jv kw kx ky jz iq kz la kd iu lb lc kh iy ld le kl lf bi translated">商店</h2><p id="d65b" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">首先，您需要为应用程序创建一个全局商店(store.js):</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="c6f7" class="ks jq hi lh b fi ll lm l ln lo">import { applyMiddleware, createStore } from 'redux';<br/>import { composeWithDevTools } from 'redux-devtools-extension'<br/>import reducers from './reducers';<br/><br/>const middlewares = [];<br/>const <strong class="lh hj"><em class="lp">store </em></strong>= createStore(reducers, composeWithDevTools(applyMiddleware(...middlewares)));<br/>export default <strong class="lh hj"><em class="lp">store</em></strong>;</span></pre><p id="dba8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码通过添加 reducers 和中间件创建了一个全局存储。在这种情况下，为了简单起见，中间件是空的，但您可以添加路由器和 saga 中间件作为示例。</p><p id="f4fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，需要将商店添加到 app (index.js)中:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="3138" class="ks jq hi lh b fi ll lm l ln lo">import React<strong class="lh hj"><em class="lp"> </em></strong>from 'react';<br/>import ReactDOM from 'react-dom';<br/>import App from './App';<br/>import { Provider } from 'react-redux';<br/>import <strong class="lh hj"><em class="lp">store</em></strong> from './store';<br/><br/>ReactDOM.render(<br/>    &lt;React.StrictMode&gt;<br/>        &lt;Provider store={<strong class="lh hj"><em class="lp">store</em></strong>}&gt;<br/>            &lt;App/&gt;<br/>        &lt;/Provider&gt;<br/>    &lt;/React.StrictMode&gt;,<br/>    document.getElementById('root')<br/>);</span></pre><h2 id="bcc9" class="ks jq hi bd jr kt ku kv jv kw kx ky jz iq kz la kd iu lb lc kh iy ld le kl lf bi translated">还原剂</h2><p id="f64d" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">Reducers 是纯函数，它将当前状态和一个动作作为参数，并返回更新后的状态。reducer 被组合起来添加到存储(reducer.js)中。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="6fa8" class="ks jq hi lh b fi ll lm l ln lo">import { combineReducers } from 'redux'<br/>import exampleReducers from "./exampleReducers";<br/>const <strong class="lh hj"><em class="lp">reducers </em></strong>= combineReducers({<br/>    example: exampleReducers,<br/>});<br/>export default <strong class="lh hj"><em class="lp">reducers</em></strong>;</span></pre><p id="477a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，作为一个例子，只有一个 reducer 被添加到存储中(exampleReducers.js)。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="8937" class="ks jq hi lh b fi ll lm l ln lo">import exampleTypes from './exampleTypes';<br/><br/>const initialState = {<br/>    name: '',<br/>    age: 0,<br/>}<br/><br/>const <strong class="lh hj"><em class="lp">exampleReducers</em></strong> = (state = initialState, action) =&gt; {<br/>    switch (action.type) {<br/>        case exampleTypes.CHANGE_NAME:<br/>            return {<br/>                ...state,<br/>                name: action.payload<br/>            }<br/>        case exampleTypes.CHANGE_AGE:<br/>            return {<br/>                ...state,<br/>                age: action.payload<br/>            }<br/>        default:<br/>            return state;<br/>    }<br/>}<br/><br/>export default <strong class="lh hj"><em class="lp">exampleReducers</em></strong>;</span></pre><p id="ce78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，reducer 函数是一个返回更新状态的纯函数。在上面的例子中，有两种不同的类型可以改变状态，CHANGE_NAME 用于改变名字，CHANGE_AGE 用于改变年龄。</p><h2 id="a140" class="ks jq hi bd jr kt ku kv jv kw kx ky jz iq kz la kd iu lb lc kh iy ld le kl lf bi translated">类型</h2><p id="e900" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">它显示了可用的操作类型。例如，有两种不同的类型 CHANGE_NAME 和 CHANGE_AGE:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="2e7b" class="ks jq hi lh b fi ll lm l ln lo">const <strong class="lh hj"><em class="lp">exampleTypes</em></strong> = {<br/>    CHANGE_NAME: `CHANGE_NAME`,<br/>    CHANGE_AGE: `CHANGE_AGE`,<br/>}<br/>export default <strong class="lh hj"><em class="lp">exampleTypes</em></strong>;</span></pre><h2 id="27ff" class="ks jq hi bd jr kt ku kv jv kw kx ky jz iq kz la kd iu lb lc kh iy ld le kl lf bi translated">行动</h2><p id="0e0b" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">动作是基于输入参数(例如 Actions.js)返回动作对象(类型和有效负载)的纯函数</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="2131" class="ks jq hi lh b fi ll lm l ln lo">import exampleTypes from "./exampleTypes";<br/>const <strong class="lh hj"><em class="lp">exampleActions </em></strong>= {<br/>    changeName: (name) =&gt; ({<br/>        type: exampleTypes.CHANGE_NAME,<br/>        payload: name<br/>    }),<br/>    changeAge: (age) =&gt; ({<br/>        type: exampleTypes.CHANGE_AGE,<br/>        payload: age<br/>    }),<br/>}<br/><br/>export default <strong class="lh hj"><em class="lp">exampleActions</em></strong>;</span></pre><h2 id="21f4" class="ks jq hi bd jr kt ku kv jv kw kx ky jz iq kz la kd iu lb lc kh iy ld le kl lf bi translated">选择器</h2><p id="1efe" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">选择器是采用 redux 状态并从该状态返回派生数据的纯函数(例如 Selectors.js)。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="c217" class="ks jq hi lh b fi ll lm l ln lo">const <strong class="lh hj"><em class="lp">exampleSelectors </em></strong>= {<br/>    getName: (state) =&gt; state.example.name,<br/>    getAge: (state) =&gt; state.example.age,<br/>}<br/><br/>export default <strong class="lh hj"><em class="lp">exampleSelectors</em></strong></span></pre><h1 id="4e1f" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">如何使用反应功能元件</h1><p id="3741" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">为了分派动作，您需要编写:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="77dd" class="ks jq hi lh b fi ll lm l ln lo">const dispatch = useDispatch();<br/>dispatch(exampleActions.changeName('Test'))</span></pre><p id="bc21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了获得状态变量的值，我们使用 useSelector:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="6f89" class="ks jq hi lh b fi ll lm l ln lo">const name = useSelector(exampleSelectors.getName);</span></pre><p id="7f5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，这是如何调度操作并在 react 组件(App.js)上显示状态值:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="e751" class="ks jq hi lh b fi ll lm l ln lo">import React, { useEffect } from 'react';<br/>import { useDispatch, useSelector } from 'react-redux';<br/>import exampleSelectors from './exampleSelectors';<br/>import exampleActions from './exampleActions';<br/><br/>const <strong class="lh hj"><em class="lp">App</em></strong> = () =&gt; {<br/>    const dispatch = useDispatch();<br/>    const name = useSelector(exampleSelectors.getName);<br/>    const age = useSelector(exampleSelectors.getAge);<br/><br/>    useEffect(()=&gt;{<br/>        dispatch(exampleActions.changeName('Test'))<br/>        dispatch(exampleActions.changeAge(20))<br/>    }, []);<br/><br/>    return (<br/>        &lt;&gt;<br/>            &lt;div&gt;Name: ${name}&lt;/div&gt;<br/>            &lt;div&gt;Age: ${age}&lt;/div&gt;<br/>        &lt;/&gt;<br/>    );<br/>}<br/><br/>export default <strong class="lh hj"><em class="lp">App</em></strong>;</span></pre><p id="4f6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是添加 Redux Saga:点击<a class="ae lq" href="https://zaraco.medium.com/redux-saga-54d7a4489ce0" rel="noopener">这里</a></p></div></div>    
</body>
</html>