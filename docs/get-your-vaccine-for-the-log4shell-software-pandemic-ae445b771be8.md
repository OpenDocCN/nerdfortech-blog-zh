# 为 Log4Shell 软件疫情获得您的疫苗

> 原文：<https://medium.com/nerd-for-tech/get-your-vaccine-for-the-log4shell-software-pandemic-ae445b771be8?source=collection_archive---------2----------------------->

![](img/22fffa884555e6de61fa135a9ffaa087.png)

这是一场重大的全球疫苗接种运动，与 COVID 无关。虽然您可以调用 Log4Shell，开源 Apache 日志库 [Log4j](https://www.synopsys.com/blogs/software-security/mitigating-impact-of-log4j-log4shell/?cmp=pr-sig&utm_medium=referral) 中的一组漏洞，它是 Omicron COVID 变体的数字等价物。

因为这是疫情。只不过它不需要扩散。当它在 12 月初公开时，它已经存在于数亿到数十亿个系统、服务、网站和设备中。如果您在组织中的任何地方使用 Log4j，您就容易受到攻击。

因此，人们疯狂地努力寻找它，修补或减轻它——事实上，有些人把它称为接种[疫苗](https://threatpost.com/log4shell-bug-smbs-experts/177021/)。有充分的理由。Log4Shell 缺陷被称为“远程代码执行”漏洞，通过远程控制运行 Java 应用程序的计算机，网络攻击者可以让您的组织非常不舒服。Java 是世界上最流行的编程语言之一。

更糟糕的是，利用 Log4Shell 很容易。新思软件完整性团队的技术总监兼首席架构师迈克尔·怀特在最近的博客文章中写道“执行起来很简单”

“Log4j 广泛用于各种消费者和企业服务、网站和应用程序，以及运营技术产品，以记录安全和性能信息，”怀特写道。"未经验证的远程参与者可以利用此漏洞控制受影响的系统."

到目前为止，对 Log4j 的攻击造成的损害从加密挖掘到美国联邦贸易委员会(FTC)上周发出的警告“个人信息的丢失或泄露、财务损失和其他不可挽回的伤害”

美国网络安全和基础设施安全局(CISA)局长 Jen Easterly [称](https://www.cisa.gov/news/2021/12/11/statement-cisa-director-easterly-log4j-vulnerability) Log4Shell 是“我整个职业生涯中见过的最严重的事件之一，如果不是最严重的话。”

怀特认为它是“典型的冰山”。有 30 亿台设备运行 Java，Log4j 是一个非常常见的日志库，”他说。

事实上，国家漏洞数据库给 Log4Shell 漏洞的严重性评级为 10.0 。这是 10 分中的 10 分——最差的可能。所以，把非常严厉和非常容易执行结合起来，就等于非常非常糟糕。如果你不能信任你的软件，它可能运行在你业务的每一个环节，你就有麻烦了。软件风险是商业风险。

**数字疫苗**

作为回应，Apache 已经推出了针对 Log4Shell 和其他漏洞的[多项更新](https://logging.apache.org/log4j/2.x/security.html)——如果你愿意的话，可以称之为数字疫苗，可能已经有数百万个——也许数千万个甚至数亿个——这些补丁由拼命保护其资产免受网络犯罪分子攻击的组织应用，到圣诞节前一周，网络犯罪分子正以每秒超过一个的速度发起攻击，试图利用这些漏洞。对于那些手头没有计算器的人来说，这一数字在每天 10 万左右。

政府也在认真对待这一问题，要求进行疫苗接种。CISA 于 12 月 17 日发布了 22–02 紧急指令，要求所有民用联邦机构(国家安全系统、国防部和情报机构除外)在 12 月 23 日之前找到其系统中的所有 Log4j 组件，并修补、缓解或删除它们。

FTC 同样严厉，警告称，它“打算利用其全部法律权力，追究那些未能采取合理措施保护消费者数据免受 Log4j 或未来类似已知漏洞影响的公司。”

在某种程度上，这听起来应该不会太难。数字疫情的好处在于，你不必预约，不必开车去任何地方，也不必为接种疫苗或购买检测工具等上几个小时。补丁和更新一旦可用，每个人都可以立即获得。有点像，“你的门没锁。锁上你的门！”一切都会好的。

但事情没那么简单。许多专家预测 Log4j 的噩梦可能会持续多年，因为这个库深深地埋藏在许多组织的软件供应链中。

这是数字感染的负面影响。太多的组织直到开始出现症状(网络攻击)时才知道自己易受攻击。虽然一个组织可能没有意识到使用 Log4j，但是它的软件的一个或多个组件很可能依赖于它。

微软威胁情报中心(Microsoft Threat Intelligence Center)在 1 月 3 日发布的对 12 月 11 日发布的建议的更新中称，“客户可能不知道这个问题在他们的环境中有多普遍”，这可能是一种严重的轻描淡写

正因为如此，而且“由于许多软件和服务受到影响，并且考虑到更新的速度，预计这将有一个长长的补救尾巴，需要持续不断的警惕，”该公告称。

那么，疫苗接种活动已经开始一个月了，进展如何？

在民间是不可能知道的。在公共部门，至少在联邦一级，根据 CISA 的说法，情况相当不错，尽管该机构的一份声明泛泛而谈，缺乏细节。它表示，该指令涵盖的联邦机构已经补救或减轻了“大多数受影响的应用程序，这些应用程序支持从互联网接受数据输入的‘解决方案堆栈’。”

大多数，当然，可能在 50%到 100%之间。

声明还指出，CISA 已收到所有“大型”机构的状况报告。但它没有定义大，也没有定义占总数的多少或百分比是什么意思。它确实表示，这些大型机构已经“解决了成千上万与互联网相关的资产带来的风险”，而且“CISA 将继续与每个机构合作，推动在补救所有风险资产方面取得进一步进展。”

怀特说，在公共和私营部门，“没有人知道什么受到了影响，或者我们在补救方面的成功率是多少，这一事实本身就凸显了整个问题。理想情况下，我应该能够说，‘当然，我们有 500 个这样的系统，30%获得豁免，20%需要代码更改，50%已经修复’，等等。”

**SBOM 时间到了**

不管情况如何，具有讽刺意味的是，目前的恐慌在很大程度上是可以避免的。有一种方法可以避免在 Log4j 或任何其他具有已知漏洞的软件组件中查找并修复漏洞这一耗时的噩梦。它已经存在很多年了。它被称为[软件材料清单(SBOM)](https://www.synopsys.com/blogs/software-security/software-bill-of-materials-bom/?cmp=pr-sig&utm_medium=referral)——一个组织的软件供应链中每个组件的严格清单。

有了 SBOM，组织只需进行数据库搜索，就能知道它是否使用了 Log4j 这样的库。这种事情应该是标准的。正如在安全会议上一直宣扬的那样，如果你不知道你拥有什么，你就无法保护它。

但是创建和维护 SBOM 需要正确的技能和工具。没有他们，任务可能会令人望而生畏，甚至无法完成。几乎每一个现代软件项目都是由已经存在的组件组装而成的，而不是编写的——无论是商业的还是开源的。这些组件中的每一个都可能依赖于许多其他组件或库来运行。一个应用程序可以很容易地拥有数百个这样的“依赖关系”,这些“依赖关系”深入到多个层次。

好消息是，有自动化工具可以帮助完成这项任务，包括[软件组成分析](https://www.synopsys.com/software-integrity/security-testing/software-composition-analysis.html?cmp=pr-sig&utm_medium=referral)，它有助于找到开源组件及其依赖关系。只是应急数字疫情并不是开始建设的最佳时机。

正如 Synopsys 的政府和关键基础设施项目总监 Joe Jarzombek 所言，“许多联邦首席信息安全官(CISOs)可能会担心，‘如果我的网络连接资产只有 SBOMs，那么我就知道 Log4j 可能会影响我们的哪些地方。’"

Jarzombek 补充说，供应商可能在创建软件组件时就知道 Log4J 这样的漏洞，但“许多人断言某些已知的漏洞是不可利用的——也就是说，直到他们像 Log4j 一样，因为未能进行适当的依赖性分析。”

但是，尽管 Log4j 疫情很糟糕，如果它成为促使 SBOMs 成为主流的催化剂，那也是一线希望。事实上，拜登总统于 2021 年 5 月 12 日发布的[“关于改善国家网络安全的行政命令”(T3)明确要求每个软件产品都要有 SBOM。](https://www.whitehouse.gov/briefing-room/presidential-actions/2021/05/12/executive-order-on-improving-the-nations-cybersecurity/)

White 说，这应该意味着，“软件组件信息应该在产品供应商和他们的客户之间更无缝地流动。现在，这项任务变成了简单的数据库搜索，而不是给每个供应商打电话确认部件信息。”

目前，组织应该将获得 Log4Shell 的疫苗作为他们的首要任务。联邦贸易委员会提供指导:

*   将您的 Log4j 软件包更新至最新版本，此处可找到:【https://logging.apache.org/log4j/2.x/security.html 
*   请参考 [CISA 指南](https://www.cisa.gov/uscert/apache-log4j-vulnerability-guidance)来缓解该漏洞。
*   确保贵公司的做法不违反法律。未能识别和修补该软件的实例可能会违反[FTC 法案](https://www.ftc.gov/enforcement/statutes/federal-trade-commission-act)。
*   将此信息分发给向易受攻击的消费者销售产品或服务的任何相关第三方子公司。

现在就做。如果你不能解决 Log4j 的问题，你可能会遇到不仅仅是政府机构的麻烦。网络罪犯就像病毒一样，不会给予延期或豁免。