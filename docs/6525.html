<html>
<head>
<title>An investigative guide to React JS[DOM, Virtual DOM and JSX] Part-V</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调查指南反应 JS[DOM，虚拟 DOM 和 JSX]第五部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/an-investigative-guide-to-react-js-dom-virtual-dom-and-jsx-part-v-ca095cabe41c?source=collection_archive---------1-----------------------#2022-03-15">https://medium.com/nerd-for-tech/an-investigative-guide-to-react-js-dom-virtual-dom-and-jsx-part-v-ca095cabe41c?source=collection_archive---------1-----------------------#2022-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3913" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">部分亮点— <a class="ae jd" href="https://www.pansofarjun.com/post/an-investigative-guide-to-react-js-dom-virtual-dom-and-jsx-part-iv" rel="noopener ugc nofollow" target="_blank">四</a></p><ul class=""><li id="2553" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">每次在真实的 DOM 树中发生新的重画，都会带来巨大的性能代价。这是因为涉及到更多的计算。</li><li id="3095" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">浏览器会识别回流和重绘，以优化流程</li><li id="7f30" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">React 在浏览器前增加了一个额外的层。这个额外的层被称为虚拟 DOM。</li><li id="a7ee" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">当任何东西被更新时，react 都会创建新的虚拟 DOM。这反过来与旧的虚拟 DOM 相比。这个过程叫做<strong class="ih hj">差</strong>。</li><li id="88e1" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">DOM 中的所有更改都被发送到队列中，然后对这个队列进行批处理。</li><li id="9cbe" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">这些批量更改作为对原始 DOM 的单个更新发送。这使得它成为<strong class="ih hj">批量更新</strong>。正是这种批量更新使它变得更容易并优化了性能。</li></ul><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es js"><img src="../Images/9f75e0715b15919ad234d3d4f6e68a48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*iqCPA43dVTWus3uN.jpg"/></div></figure><h1 id="b0aa" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">从 JS 角度理解虚拟 DOM</h1><p id="2ce3" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">我们知道 DOM 有一个树形数据结构。在 Javascript 中，树由<strong class="ih hj"> javascript 对象表示。由于 JS 是一个真实的 DOM 操纵器，我们可以将它用于虚拟 DOM 操纵器。就像我们通过 DOM 查询操纵真实 DOM 一样，我们通过<strong class="ih hj"> React DOM 查询操纵虚拟 DOM。</strong>就像 DOM 是由 DOM 元素组成的一样，React/Virtual DOM 也是由 React 元素组成的。</strong></p><p id="cee4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ld">注:以上解释是为了更容易理解。事实上，DOM 元素和 React 元素是不一样的。实际上，react 元素是创建浏览器/真实 DOM 的指令。</em></p><h2 id="7bff" class="le kb hi bd kc lf lg lh kg li lj lk kk iq ll lm ko iu ln lo ks iy lp lq kw lr bi translated">创建 React 元素</h2><blockquote class="ls lt lu"><p id="9754" class="if ig ld ih b ii ij ik il im in io ip lv ir is it lw iv iw ix lx iz ja jb jc hb bi translated"><em class="hi"> React 使用 React.createElement 创建元素</em></p></blockquote><p id="0511" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想在浏览器 DOM 中有一个 h1 元素，我们应该首先在 react DOM 中创建。</p><p id="5cca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为 react 负责浏览器 DOM，所以我们不需要负责浏览器 DOM。我们将只关心<strong class="ih hj"> React 元素。</strong></p><p id="00a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">React.createElement</p><p id="c616" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">(</p><p id="f20d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">h1</strong>’，</p><p id="cde3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">{</p><p id="5437" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> id:“博客</strong>”</p><p id="9321" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">},</p><p id="8a32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">潘索法君</strong>’，</p><p id="052b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">)</p><p id="c692" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的方法(createElement)在实际的 DOM 中创建了<em class="ld">&lt;h1 id = ' blog '&gt;PansofArjun&lt;/h1&gt;</em></p><p id="1d41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你观察，在上面的 createElement 方法中有三个参数。</p><p id="9640" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一个——我们想要创建的元素类型，即<strong class="ih hj"> h1 </strong></p><p id="07ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二个—元素属性，即<strong class="ih hj"> id:“博客”</strong></p><p id="3b5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三个——元素子元素——在开始和结束标记之间插入的任何节点，即<strong class="ih hj"> PansofArjun </strong></p><p id="7828" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设如果您想要控制台记录这个 react 元素，我们需要创建一个变量来存储这个元素，因为我们不能直接控制台记录 React.createElement。</p><p id="1489" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，</p><p id="5394" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">const element = react . createelement</p><p id="371d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">(</p><p id="585b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> h1 </strong>'，</p><p id="05a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">{</p><p id="7a93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> id:“博客</strong>”</p><p id="35b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">},</p><p id="e06b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">PansofArjun</strong>’，</p><p id="f093" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">)</p><p id="c46b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你是控制台日志，你会得到一个 JS 对象</p><p id="7f49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">{</p><p id="f407" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">类型</strong>:‘h1’，</p><p id="9590" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">键:</strong>空、</p><p id="3c8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ref </strong>:空，</p><p id="2314" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">道具</strong> :{</p><p id="49c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> id </strong>:“博客”</p><p id="efb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">子女</strong>:‘PansofArjun’</p><p id="c9d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">},</p><p id="c263" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">_ 所有者</strong>:空，</p><p id="19de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">_ 商店</strong> :{}</p><p id="0258" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">}</p><p id="2e5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对象关键字是类型、关键字、引用、属性、_ 所有者和 _ 商店。我们现在将学习'<strong class="ih hj">类型'</strong>和'<strong class="ih hj">道具'</strong>。</p><blockquote class="ls lt lu"><p id="5538" class="if ig ld ih b ii ij ik il im in io ip lv ir is it lw iv iw ix lx iz ja jb jc hb bi translated"><em class="hi">类型——我们想要在真实的 DOM 中创建什么类型的元素</em></p><p id="a539" class="if ig ld ih b ii ij ik il im in io ip lv ir is it lw iv iw ix lx iz ja jb jc hb bi translated"><em class="hi">props——构建真实 DOM 所需的数据和子对象</em></p></blockquote><h2 id="2ad3" class="le kb hi bd kc lf lg lh kg li lj lk kk iq ll lm ko iu ln lo ks iy lp lq kw lr bi translated">道具魔术，孩子们！</h2><p id="e394" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">在上面的例子中，<strong class="ih hj"> props.children </strong>被设置为'<strong class="ih hj"> PansofArjun </strong>'这是一个文本节点。我们也可以将它设置为另一个元素节点，如列表。</p><p id="f5b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">React.createElement</p><p id="410b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">(</p><p id="d7b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ld">ul</em>’，</p><p id="d966" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">空，</p><p id="bb0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ld"> React.createElement('li '，null，' one ')，</em></p><p id="8ef9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ld"> React.createElement('li '，null，' two ')，</em></p><p id="2b10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ld"> React.createElement('李'，null，'三')</em>，</p><p id="320f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">)</p><p id="58c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们像前面一样控制台记录这个</p><p id="9017" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">{</p><p id="662a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类型:“ul”</p><p id="4e5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">道具:{</p><p id="50bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">孩子:[{ </strong></p><p id="6e74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ld">类型:【李】，道具:【儿童:】【一】等，</em></strong></p><p id="666e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ld">类型:【李】，道具:【儿童:【二等】，</em>，</strong></p><p id="54b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ld">类型:【李】，道具:【儿童:【三】等】</em> </strong></p><p id="8f6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> }] </strong></p><p id="8f3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">等等</p><p id="e604" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">}</p><p id="70dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">}</p><p id="593f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:它包括密钥、ref、所有者和商店。</p><p id="b6d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们说‘道具’包括数据和子对象来构造真正的 DOM。但是等等！这里的数据在哪里？就是<strong class="ih hj">道具.儿童</strong>键——<em class="ld">一</em>、<em class="ld">二</em>和<em class="ld">三的值。</em></p><p id="d631" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以像<em class="ld"> const arr = [one，two，three]一样将数据存储为数组。</em></p><p id="ea26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">React.createElement(</p><p id="806b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ul '，</p><p id="a2df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">空，</p><p id="b5b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="ld">arr . map(data =&gt;react . createelement(' Li '，null，data)) </em> </strong></p><p id="ca88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">)</p><p id="61db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们上面所做的是将数据从 UI 元素中分离出来，即<strong class="ih hj"> <em class="ld">我们存储数据分离变量(arr)并使用 javascript 逻辑(映射函数)</em> </strong>将它们  <strong class="ih hj"> <em class="ld">集成到 UI 中</em></strong></p><p id="0ac8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将数据与 UI 分离是使用 React 的主要优势之一。</p><p id="e716" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面我们可以很舒服的说'<strong class="ih hj"> React 是由 React 元素</strong>组成的，这一点从 props.children 就不言而喻了！</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="5fce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ld">原载于 2022 年 3 月 15 日 https://www.pansofarjun.com</em><em class="ld">的</em> <a class="ae jd" href="https://www.pansofarjun.com/post/an-investigative-guide-to-react-js-dom-virtual-dom-and-jsx-part-v" rel="noopener ugc nofollow" target="_blank"> <em class="ld">。</em></a></p></div></div>    
</body>
</html>