<html>
<head>
<title>C# — Implementing some C# Interfaces and Extension Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C# —实现一些C#接口和扩展方法</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-some-c-interfaces-and-extension-methods-f8093f1e29fd?source=collection_archive---------3-----------------------#2021-09-30">https://medium.com/nerd-for-tech/implementing-some-c-interfaces-and-extension-methods-f8093f1e29fd?source=collection_archive---------3-----------------------#2021-09-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d628" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我只想写一篇文章，介绍一些如何使用扩展方法的例子和一些最常见的C#接口。</p><p id="c2bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">哎呀:我想在一些图片上，我的方法是错误的。请记住这一点，因为它不符合标准。</p><h1 id="d51b" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">扩展方法</h1><p id="312d" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">使用扩展方法，您可以向C#中的任何类型/类添加方法。例如，在下面，我们向字符串类型添加了一个扩展方法。然后我们可以从任何字符串调用该方法。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/5537fa528bd207f22e30cb797bfaaa89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4JyvlTKxxnv0HzQNemceqw.png"/></div></div></figure><h1 id="6de4" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">INotifyPropertyChanged</h1><p id="0247" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">当您的属性需要在更改时触发事件(已更改)时，请实现此接口。在属性更改时触发事件，并让您想要的任何订阅者订阅它，以便您可以在通知到来时做一些事情。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ks"><img src="../Images/47950db40decd1b48a04a1d088585cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tVoW4uLU1DhfzKtWf0pkmQ.png"/></div></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kt"><img src="../Images/e28e91686824f576af54face686002c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VfBvVX22hh1JDLourN5IrQ.png"/></div></div></figure><h1 id="c96d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">I可比</h1><p id="acd5" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">当您想要提供一个方法来比较您的类时，请实现它。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ku"><img src="../Images/6dc55b34e03c95b8eb777e570d1af0f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xKCZ1CzP2EzwO6g6NmiR7Q.png"/></div></div></figure><p id="82a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦有了上面的内容，您就可以对比较类型的对象列表进行排序，它将根据CompareTo:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kv"><img src="../Images/a53246b6aaf6e542ddd09e50f61572c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*R4KaInKWPEo8y_Ic-3_lUA.png"/></div></figure><h1 id="6bac" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">我比较</h1><p id="b17e" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">IComparer还用于比较两个对象，并可用于对自定义类型进行排序。当你能控制正在排序的类时，IComparable将帮助你进行排序，所以你可以用你喜欢的方式进行比较。然而，有可能您有了用于比较对象的objects，但是您并不希望该类中的CompareTo用于您的排序，现在您希望它们以某种其他方式排序。</p><p id="70c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将向该类添加一些其他属性，然后您将使用这些其他属性对您的对象进行排序，而不是使用数组{Lexus，Toyota，BMW，Ford}中的索引。</p><p id="aa52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面我们已经有的ObjectForComparing类中，只需添加这个新属性:</p><pre class="kh ki kj kk fd kw kx ky kz aw la bi"><span id="4f53" class="lb je hi kx b fi lc ld l le lf">public int ThePrice { get; set; }</span></pre><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lg"><img src="../Images/52b1ff6352df45f7067d744986f9e9fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8CtZ9f763bHAcluNkossRQ.png"/></div></div></figure><h1 id="6f29" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">可等式化</h1><p id="7eff" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">你知道你可以用equals来比较字符串，你希望你的类也有类似的东西。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lh"><img src="../Images/94d6263b248eef8e5573f38a673fd1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*xa7Qczfw24Nt6VD_J3Oz7Q.png"/></div></figure><h1 id="6d23" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">IEqualityComparer</h1><p id="9681" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">类似于IEquatable，但是您在另一个类中创建它，该方法将接受两个参数进行比较。</p><p id="c0c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的例子有点傻，但我只是展示了如何使用它，以及你需要的任何比较。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es li"><img src="../Images/c4573ca9b373ba30d455f45940a1ebcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xFiub0hQvXxa4BbtkGnFqQ.png"/></div></div></figure><p id="ff33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码是可以的，但是如果你想让GetHashCode按照Equals的方式工作，比如说你不会在字典中得到重复的键，它应该看起来更像这样:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lj"><img src="../Images/d6bfe8e61a2ce748e9fac99558023f8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-cTz3bggNS7uo08_-iq2fA.png"/></div></div></figure><h1 id="f7f1" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">IEnumerable</h1><p id="30a1" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">当您希望能够迭代自定义集合时，您需要添加此选项。</p><p id="5063" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将在列表中使用这种类型的对象。</p><pre class="kh ki kj kk fd kw kx ky kz aw la bi"><span id="b4f8" class="lb je hi kx b fi lc ld l le lf">class MyObject<br/>{<br/>   public string TheColor { get; set; }<br/>   public int TheTone { get; set; }<br/>}</span></pre><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lk"><img src="../Images/c061ea4781039c5999d92848d49ccc0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bV8SiWgt0FxO1iDqD_lJqA.png"/></div></div></figure><p id="e941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的代码中，也可以使用注释掉的部分，而不是foreach (return myList。get enumerator()；)</p><p id="5f94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要使用它:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ll"><img src="../Images/df13bca8754b56b384388c474c47306c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*3Ua0XuPBTo_Zw2PHGvoZNw.png"/></div></figure><p id="9b95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也可以这样做，而不是让构造函数将对象添加到列表中，在这种情况下，我们将把它们添加到列表中。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lm"><img src="../Images/bf5d778b7c244225ad813309f680343b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e5IZSQ0PrXVBcAG6Yxg4ag.png"/></div></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ln"><img src="../Images/96ba43826df3e4f53980ee78ac96ada7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*3CgvJN1CHynBjXZhhKzYCg.png"/></div></figure><p id="e792" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:使用IEnumerable，要点是你将有一个列表或数组，并且你提供了一种在GetEnumerator中遍历它的方法。不管你的类需要通过构造函数还是调用你创建的Add方法来创建列表。</p><h1 id="465f" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">IEnumerator</h1><p id="45e6" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">注意，在上面的例子中，GetEnumerator()方法返回一个IEnumerator <myobject>，所以这将是相关的。IEnumerable和foreach的使用隐藏了枚举器的复杂性。但是您可以使用自己的枚举器。</myobject></p><p id="4774" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的例子获取了一个整数列表，并提供了遍历它的枚举器(不用管我给的名字)。</p><p id="1fb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可枚举对象仍然与我们使用的IEnumerable相似:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lo"><img src="../Images/6ffdbfceafe3f819fbb0ca8d17137c65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*HE_MikvS5mcLqpiPfMgkRQ.png"/></div></figure><p id="bf3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要使用它，它将与IEnumerable相似。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lp"><img src="../Images/3c4f9f952faaeb6932a09dd79ff7e7d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*PjCEn3Q8R9xZTVq9yGNSTQ.png"/></div></figure><p id="a2ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是请注意，在我的列表中，我添加了1，2，3，4。但这是我在控制台上看到的:</p><pre class="kh ki kj kk fd kw kx ky kz aw la bi"><span id="26e1" class="lb je hi kx b fi lc ld l le lf">10<br/>20<br/>30<br/>40</span></pre><p id="57b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为什么？因为自定义分子:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lq"><img src="../Images/48f0a57fb32dd6a4689f22f782603b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dl8EgAqxYTrj-Fgqnl6x-A.png"/></div></div></figure><p id="ae3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我认为这可能会引起混淆，所以我修改了上面的代码，现在可以处理字符串列表，但是也可以处理您的特定类:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lr"><img src="../Images/188a5317a9e8cd77cecd53fbeb22f871.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*Ro-nkFTeRHbYhEwE90eJmA.png"/></div></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ls"><img src="../Images/2dd283f74ed206bebb0a069dd1276b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*ufPduNGGbSSBwmP_rl9KRw.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lt"><img src="../Images/96119f1f98a024051569c7f11e094ce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*Dbh8-q9RG0SBFWDacoW1VQ.png"/></div></figure><h1 id="e84b" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">太多了！我希望这些例子有助于澄清概念。</h1></div></div>    
</body>
</html>