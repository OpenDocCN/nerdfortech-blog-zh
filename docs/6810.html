<html>
<head>
<title>Create Microservice Application using Spring Boot, Spring Cloud &amp; Eureka Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Spring Boot、Spring Cloud 和 Eureka 服务器创建微服务应用</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/create-microservice-application-using-spring-boot-spring-cloud-eureka-server-7bc2f6092f10?source=collection_archive---------0-----------------------#2022-05-16">https://medium.com/nerd-for-tech/create-microservice-application-using-spring-boot-spring-cloud-eureka-server-7bc2f6092f10?source=collection_archive---------0-----------------------#2022-05-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/5875ffc24e7d7341e332d115da53fd2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/0*5t8MYXpyEXclubeT.jpg"/></div></figure><p id="1623" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">大家好！</p><p id="cd83" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇博文中，我将向你展示如何使用<strong class="io hj"> Spring cloud </strong>、<strong class="io hj"> Eureka Server </strong>和<strong class="io hj"> Spring Boot </strong>创建一个微服务应用。这将是一个理解微服务架构逻辑的非常基本的 Spring Boot 应用。</p><p id="51cb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们开始吧。</p><h1 id="7ed4" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">设置 Eureka 服务器</h1><p id="1337" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">首先，我们将创建我们的尤里卡服务器。<strong class="io hj"> Eureka </strong>是由<strong class="io hj">网飞</strong>开发的一个库，它允许微服务从<strong class="io hj">单点</strong>相互通信。</p><p id="f1b1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们走<a class="ae kn" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank"><em class="ko">https://start.spring.io/</em></a>。选择下面的依赖关系<em class="ko">(尤其是尤里卡服务器依赖关系)</em>。并使用<em class="ko">生成</em>按钮下载项目。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kp"><img src="../Images/107fa7dc35b1dfadf33a76077371718e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMC2ame8tI5Si4MuhtaSLg.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">尤里卡服务器</figcaption></figure><p id="c9a4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开您的项目。您将在您的<strong class="io hj"> pom.xml </strong>文件上看到<strong class="io hj"> Eureka Server </strong>依赖项。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lc"><img src="../Images/f986475ded33a0aca41361edc60b3b6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3jyNcKeEi8Wku2NvVwn5DA.png"/></div></div></figure><p id="979d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在主类中，让我们添加依赖关系<strong class="io hj"> @EnableEurekaServer: </strong></p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ld"><img src="../Images/c8e9e74e276a05ba360edbf11c1a8484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6s1VWSm9ay3ou_iRzf0WBQ.png"/></div></div></figure><p id="ede2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在<strong class="io hj"> application.properties </strong>文件中，让我们添加这些信息:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es le"><img src="../Images/f14de06ad70c78933e3087b0d85b0e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wzV46CtS3yTMWNGvTNciNA.png"/></div></div></figure><blockquote class="lf lg lh"><p id="fc94" class="im in ko io b ip iq ir is it iu iv iw li iy iz ja lj jc jd je lk jg jh ji jj hb bi translated">server . port = 8888<br/>eureka . instance . hostname = localhost<br/>eureka . client . registerwitheureka = false<br/>eureka . client . fetchregistry = false</p></blockquote><p id="f858" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，让我们转到<strong class="io hj"> localhost:8888 </strong>，我们将看到<strong class="io hj">尤里卡服务器</strong>正在运行:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ll"><img src="../Images/912e84c19c3908c9c0a08cec4d0f242b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6eNUgQ85IJBoEsiaSzrJtQ.png"/></div></div></figure><h1 id="8b1d" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">设置国家服务器</strong></h1><p id="4428" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">现在，让我们创建我们的国家服务器。这一次，我们将选择<strong class="io hj">尤里卡发现客户端</strong>作为依赖项。此外，我正在添加<strong class="io hj">龙目</strong>图书馆。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lm"><img src="../Images/bf0ff216817875bc32f5a1641223a993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mR9VenMekfCBvSHkk6jcbw.png"/></div></div></figure><p id="180a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开<strong class="io hj">国家服务器</strong>项目，在 pom.xml 文件中，你会看到<strong class="io hj">尤里卡客户端</strong>的依赖关系:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ln"><img src="../Images/dc90fc4194ca4735d7aad8d166a6da1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R8VbanKfpBw-SY1EU8V3uw.png"/></div></div></figure><p id="2b55" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，向主类添加<strong class="io hj"> @EnableDiscoveryClient </strong>注释:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lo"><img src="../Images/f2749fc4572e5f7cdf931eac6cf540fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SQMDDGZIbSyMquXTW2zchg.png"/></div></div></figure><p id="34c8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后创建<strong class="io hj">国家</strong>实体:</p><pre class="kq kr ks kt fd lp lq lr ls aw lt bi"><span id="6573" class="lu jl hi lq b fi lv lw l lx ly">import lombok.AllArgsConstructor;<br/>import lombok.Data;<br/>import lombok.NoArgsConstructor;<br/><br/><strong class="lq hj">@Data</strong><br/><strong class="lq hj">@AllArgsConstructor</strong><br/><strong class="lq hj">@NoArgsConstructor</strong><br/>public class <strong class="lq hj">Country </strong>{<br/>    private String countryName;<br/>    private String capitalName;<br/>    private String currency;<br/>}</span></pre><p id="8a15" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，让我们创建一个返回美国国家的硬编码的国家控制器类:</p><pre class="kq kr ks kt fd lp lq lr ls aw lt bi"><span id="209b" class="lu jl hi lq b fi lv lw l lx ly"><strong class="lq hj">@RestController</strong><br/>public class <strong class="lq hj">CountryController</strong> {<br/>    <strong class="lq hj">@GetMapping</strong>("/countries")<br/>    public List&lt;Country&gt; getAllCountries() {<br/>        List&lt;Country&gt; countries = new ArrayList&lt;Country&gt;();<br/>        countries.add(new Country("Turkiye", "Ankara", "TL"));<br/>        countries.add(new Country("Sweden", "Stockholm", "SEK"));<br/>        return countries;<br/>    }<br/>}</span></pre><p id="f79e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最后，我们将向<strong class="io hj"> application.properties </strong>文件添加一些信息:</p><pre class="kq kr ks kt fd lp lq lr ls aw lt bi"><span id="c3ed" class="lu jl hi lq b fi lv lw l lx ly">spring.application.name=Country-Service<br/>eureka.client.serviceUrl.defaultZone=http://localhost:8888/eureka<br/>server.port = 9000</span></pre><p id="468a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们运行<strong class="io hj">国家客户端</strong>项目并刷新我们的<strong class="io hj">尤里卡服务器</strong>页面:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lz"><img src="../Images/bdecce8acf8e638a2460fc642e37f85a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8qralKo7NhkE_PdEh5epEg.png"/></div></div></figure><p id="087b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这里，我们已经注册了我们的国家服务尤里卡服务器！</p><h1 id="b94c" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">国家客户</h1><p id="492a" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">现在，让我们制作一个<strong class="io hj">国家客户端</strong>微服务，并从客户端<strong class="io hj">向<strong class="io hj">国家服务</strong>发送请求。</strong></p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ma"><img src="../Images/e13f0f6fc44cfc87d897f3dd9d79fc4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sF3hJ_OCypO8Ij6TF_m_fw.png"/></div></div></figure><p id="8a4c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开国家客户端项目，在主类中添加<strong class="io hj"> @EnableDiscoveryClient </strong>注释，创建一个向我国服务器发送请求的<strong class="io hj">客户端控制器</strong>类:</p><pre class="kq kr ks kt fd lp lq lr ls aw lt bi"><span id="882c" class="lu jl hi lq b fi lv lw l lx ly"><strong class="lq hj">@RestController<br/>@AllArgsConstructor</strong><br/>public class CountryClientController {<br/>    private <strong class="lq hj">DiscoveryClient</strong> discoveryClient;<br/><br/>   <strong class="lq hj"> @GetMapping("/")</strong><br/>    public List&lt;Country&gt; <strong class="lq hj">handleRequest</strong>() {<br/>        List&lt;ServiceInstance&gt; instances = <strong class="lq hj">discoveryClient.getInstances("Country-Service");</strong><br/>        if (instances != null &amp;&amp; !instances.isEmpty()) {<br/>            ServiceInstance serviceInstance = instances.get(0);<br/>            String url = serviceInstance.getUri().toString();<br/>            url = url + "/countries";<br/>            RestTemplate restTemplate = new RestTemplate();<br/>            return <strong class="lq hj">restTemplate.getForObject(url, List.class)</strong>;<br/>        }<br/>     return null;<br/>    }<br/>}</span></pre><p id="4c98" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，将这些信息添加到<strong class="io hj"> application.properties </strong>文件中:</p><pre class="kq kr ks kt fd lp lq lr ls aw lt bi"><span id="8535" class="lu jl hi lq b fi lv lw l lx ly">server.port=9090<br/>eureka.client.serviceUrl.defaultZone=http://localhost:8888/eureka/<br/>spring.application.name=Country-Client</span></pre><p id="ef59" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们运行我们的客户！在 Eureka 服务器中，我们看到我们的客户端已注册:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mb"><img src="../Images/209f517ad6f1d6708415cc87cf5a8a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RqwOkPpVoPTA7V0UUY6J7g.png"/></div></div></figure><p id="2688" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们转到我们客户的<strong class="io hj"> localhost:9090 </strong>地址:</p><p id="e4c9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">塔谭。我们的迷你微服务项目正在运行:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mc"><img src="../Images/d0acdfe260a8a1878762d3eb73a5c779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VttgE9Adwa7A6Hx8zOiL9Q.png"/></div></div></figure><p id="6f71" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可以从这里找到完整的代码:<br/><a class="ae kn" href="https://github.com/minnela/Spring_Cloud_Microservice" rel="noopener ugc nofollow" target="_blank"><strong class="io hj"><em class="ko">https://github.com/minnela/Spring_Cloud_Microservice</em></strong></a></p><p id="4a0c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">感谢您的阅读:)</p></div></div>    
</body>
</html>