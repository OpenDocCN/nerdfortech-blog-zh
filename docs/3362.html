<html>
<head>
<title>Generate a QR code with Swift on macOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 macOS 上使用 Swift 生成二维码</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/qr-codes-on-macos-with-swift-be0ba2d58de2?source=collection_archive---------11-----------------------#2021-06-07">https://medium.com/nerd-for-tech/qr-codes-on-macos-with-swift-be0ba2d58de2?source=collection_archive---------11-----------------------#2021-06-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f30e0966d6ab53f0425d33e26fe029ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Eq5ttm_Qzbq9A29mOrF9A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Claudio Schwarz | @purzlbaum 在<a class="ae iu" href="https://unsplash.com/s/photos/qr-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="c32e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在创建了一个 macOS 应用程序来生成二维码并面临各种问题后，我认为分享这些知识和我最终得到的代码可能会很有趣。我必须说这是做二维码的简化版本，然而，对于增加新功能和增加定制，这可能是一个伟大的第一步。好吧，让我们开始学习教程。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h2 id="68f8" class="ka kb hi bd kc kd ke kf kg kh ki kj kk jg kl km kn jk ko kp kq jo kr ks kt ku bi translated">从结尾开始</h2><p id="1ae2" class="pw-post-body-paragraph iv iw hi ix b iy kv ja jb jc kw je jf jg kx ji jj jk ky jm jn jo kz jq jr js hb bi translated">正如我通常在创建新特性时所做的那样，我试图描绘出函数应该是什么样子，并创建空方法(如果您愿意，可以称之为框架),稍后我将着手实现这些方法。</p><p id="6f60" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="la">我必须在这里做一个小小的免责声明，这种在实际编写代码之前想象代码的做法对初学者来说可能不是最好的，因为它需要对 Swift 能提供什么以及相关 API 有一点了解。</em></p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lf lg l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">我希望最终的代码是什么样的。</figcaption></figure><p id="6372" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是在我看来，代码在实现特性的最后应该是什么样子的。由于我没有在本文中介绍测试，所以我在函数中声明了值，并且没有将它们作为参数接收。以下是其他一些相关要点:</p><ul class=""><li id="4e92" class="lh li hi ix b iy iz jc jd jg lj jk lk jo ll js lm ln lo lp bi translated">我想支持背景和前景的渐变颜色。这就是为什么我把<code class="du lq lr ls lt b">QRCodeColor</code>想象成一个带有事例<code class="du lq lr ls lt b">solid</code>和<code class="du lq lr ls lt b">gradient</code>的枚举，每个事例都带有关联值<code class="du lq lr ls lt b">NSColors</code>。</li><li id="dfa0" class="lh li hi ix b iy lu jc lv jg lw jk lx jo ly js lm ln lo lp bi translated">我想创建一个结构<code class="du lq lr ls lt b">QRGenerator</code>,它接受要编码的文本、前面描述的颜色定义、结果图像的大小以及代码的质量，也称为纠错级别。</li></ul></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h2 id="37c5" class="ka kb hi bd kc kd ke kf kg kh ki kj kk jg kl km kn jk ko kp kq jo kr ks kt ku bi translated">实施</h2><p id="0cfc" class="pw-post-body-paragraph iv iw hi ix b iy kv ja jb jc kw je jf jg kx ji jj jk ky jm jn jo kz jq jr js hb bi translated">现在让我们继续用名为<code class="du lq lr ls lt b">create(String, QRCode.Color, CGFloat, QRCode.Quality)</code>的静态函数创建结构<code class="du lq lr ls lt b">QRGenerator</code>。在这个函数中，我们将生成两幅图像，一幅带有点或编码数据，另一幅带有背景，最后我们将它们合并成一幅图像结果。</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lf lg l"/></div></figure><p id="a1e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完美！我们的特色正在形成。现在我们已经写好了框架，函数是具有特定职责的小代码块，开始单独编写它们会更容易。在我们继续之前，让我们快速定义一下我们将使用的结构。</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lf lg l"/></div></figure><h2 id="84f4" class="ka kb hi bd kc kd ke kf kg kh ki kj kk jg kl km kn jk ko kp kq jo kr ks kt ku bi translated">创建背景图像</h2><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lf lg l"/></div></figure><h2 id="74d6" class="ka kb hi bd kc kd ke kf kg kh ki kj kk jg kl km kn jk ko kp kq jo kr ks kt ku bi translated">创建前景图像</h2><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lf lg l"/></div></figure><h2 id="29c4" class="ka kb hi bd kc kd ke kf kg kh ki kj kk jg kl km kn jk ko kp kq jo kr ks kt ku bi translated">生成 QR 码层</h2><p id="7c17" class="pw-post-body-paragraph iv iw hi ix b iy kv ja jb jc kw je jf jg kx ji jj jk ky jm jn jo kz jq jr js hb bi translated">可以在<a class="ae iu" href="https://developer.apple.com/library/archive/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html#//apple_ref/doc/filter/ci/CIQRCodeGenerator" rel="noopener ugc nofollow" target="_blank">核心图像滤波器参考</a>中找到<code class="du lq lr ls lt b">CIQRCodeGenerator</code>滤波器的值<code class="du lq lr ls lt b">inputMessage</code>和<code class="du lq lr ls lt b">inputCorrectionLevel</code>。</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lf lg l"/></div></figure><h2 id="26e6" class="ka kb hi bd kc kd ke kf kg kh ki kj kk jg kl km kn jk ko kp kq jo kr ks kt ku bi translated">把所有的放在一起</h2><p id="0449" class="pw-post-body-paragraph iv iw hi ix b iy kv ja jb jc kw je jf jg kx ji jj jk ky jm jn jo kz jq jr js hb bi translated">有了这段独立的代码，我们将能够创建大量具有高度颜色定制的二维码。有更多的可能性来定制我们的代码，如线条圆形，代码中间的徽标，等等，但在本文中，我只是触及了 macOS 中二维码可能做的事情的表面。在这个<a class="ae iu" href="https://github.com/cristhianleonli/qr-codes-macos" rel="noopener ugc nofollow" target="_blank"> GitHub 资源库</a>中，您可以找到整个项目，包括我们在本文中没有涉及的扩展。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/02ff47682458fb10f376294889e0e19a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Hi3uH4FxZr6Ab5Lpjmwcw.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="eca0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="la">感谢阅读。我希望你喜欢这个教程，如果它对你有用，不要害羞👏关于这篇文章。下次见。</em></p></div></div>    
</body>
</html>