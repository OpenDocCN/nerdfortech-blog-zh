# 在 Unity 中用分支路径巡逻 AI，第 1 部分

> 原文：<https://medium.com/nerd-for-tech/waypoint-patrolling-ai-with-branching-paths-in-unity-part-1-5b6131dd5682?source=collection_archive---------2----------------------->

## 为了我的秘密项目，我必须做巡逻警卫。然而，我决定混合一些随机选择的替代路径，和一个“看方向”。

![](img/89d41f6aecf0422b60148c3546a26935.png)

**今天的目标:**创造一个简单的模块化人工智能守卫，它会沿着一些路点巡逻，有时会选择两个路点中的一个去。

# 创建系统:

## 变量:

我创建了一个名为“***AIWaypointPatroller***的新类，它将保存沿着一组路点巡逻的所有 AI 代码。

![](img/a6fbe8fe47d630a8f21a5065ebe2466c.png)

我想允许在每个航点面向一个指定的方向，加上备选航点位置的选项(我将在第 2 部分中添加)，所以我为**列表< >** 创建了一个自定义结构，而不仅仅是一个 **Vector3** 。

![](img/d31256345425c275b87a628bab45a887.png)

我还想在场景视图中显示航路点，以便于调试。

![](img/8620eb3815141c247f61a460665f82a3.png)

最后，私有变量:

![](img/8fdf1c288fbe3ededc3ef5fb3852c042.png)

## 这些功能:

清醒:

![](img/89e2a3193991a82e3c3af30e2f169376.png)

更新:

![](img/369540552b6692cda8df2cfc1b7f7877.png)

更新期间调用的函数:

![](img/b2f06b7538373f4b24fd2b5c26126b10.png)![](img/dcce778fe7a99521a98845dc38a4b12a.png)

最后，为了在场景视图中绘制漂亮的调试行，创建一个 OnDrawGizmos()方法:

![](img/a2233f686d243692946728e6570d88eb.png)

我想画三个部分:

*   当前位置，
*   路点和它们之间的线，
*   以及每个航点的观察方向。

![](img/92540070a23c740eba8b5d40e79f0f72.png)![](img/258b928caed67633fd4fa5d4d517555f.png)![](img/199327ee957154db40c408d31bc5c430.png)

# 结果是:

最后，所有的工作都得到了回报，一个非常漂亮的航点系统！

![](img/6de557b339b6667d3561153809652a5e.png)

路径点路径

在我的下一篇文章**第二部分**中，我将增加**替换路径**的可能性，并增加缓慢转动**的功能**以面对*观察方向*。