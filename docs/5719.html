<html>
<head>
<title>Dependency Injection using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 JavaScript 的依赖注入</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/dependency-injection-using-javascript-42b720485bd4?source=collection_archive---------2-----------------------#2021-11-06">https://medium.com/nerd-for-tech/dependency-injection-using-javascript-42b720485bd4?source=collection_archive---------2-----------------------#2021-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="ebd3" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是依赖？</h1><p id="a502" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">一个组件或类有时需要其他类来执行它的功能。这些都是依赖。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kb"><img src="../Images/c5e54e1a287c20724074835b2fe3cd89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-tUHLepge8k5SygTB2i_g.png"/></div></div></figure><h2 id="c299" class="kn ig hi bd ih ko kp kq il kr ks kt ip jo ku kv it js kw kx ix jw ky kz jb la bi translated">为什么我们需要依赖？</h2><p id="cebd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们把班级分开是为了更好地管理他们。在下面的例子中，<strong class="jf hj">编辑器</strong>和<strong class="jf hj">上传图片</strong>从<strong class="jf hj">创建帖子</strong>中分离出来，以便更好地管理它。</p><p id="6a5c" class="pw-post-body-paragraph jd je hi jf b jg lb ji jj jk lc jm jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">分离必须合乎逻辑，并且应该减轻我们的工作。依赖项可以有更多的依赖项。所以通过添加一个组件作为依赖项，你将会带来它所有的可传递的依赖项。</p><figure class="kc kd ke kf fd kg"><div class="bz dy l di"><div class="lg lh l"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">CreatePost 依赖于上传图像和编辑器</figcaption></figure><h2 id="365a" class="kn ig hi bd ih ko kp kq il kr ks kt ip jo ku kv it js kw kx ix jw ky kz jb la bi translated">上面的代码有什么问题？</h2><p id="3cc0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">上面的类在构造函数中创建了<strong class="jf hj">编辑器</strong>和<strong class="jf hj"> UploadImage </strong>实例。这存在以下问题。</p><blockquote class="lm ln lo"><p id="dc0c" class="jd je lp jf b jg lb ji jj jk lc jm jn lq ld jq jr lr le ju jv ls lf jy jz ka hb bi translated">难以对 CreatePost 类进行单元测试，就像难以模拟依赖关系一样。在下面的例子中，我们不能停止调用编辑器和上传的构造函数。</p></blockquote><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lt"><img src="../Images/72742871353e9116ac53d46478fb1c12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvhbMfJ5epJmBQ8ZRrKTkQ.png"/></div></div></figure><blockquote class="lm ln lo"><p id="4621" class="jd je lp jf b jg lb ji jj jk lc jm jn lq ld jq jr lr le ju jv ls lf jy jz ka hb bi translated">很难用 AdvanceEditor 这样的其他类来替换编辑器。在下面的示例中，需要更改 CreatePost 类以使用 AdvanceEditor。</p></blockquote><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lu"><img src="../Images/7dd97ba6026d8bd973062d2a56b23af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9IDd3HiGCMHfnW3cBLLsMg.png"/></div></div></figure><h1 id="19ae" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">依赖注入有助于解决这些问题</h1><p id="857b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">避免了直接依赖，以消除依赖注入中的紧密耦合。依赖项是在构造时通过构造函数添加或注入的。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lv"><img src="../Images/5351b6e9fbc2af7496916e687de5bc64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XT0tXCKIxRoIJRE07D1ClA.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">D、E 到 B 的依赖注入；f，G 到 C 和 B，C 到 A</figcaption></figure><p id="40d3" class="pw-post-body-paragraph jd je hi jf b jg lb ji jj jk lc jm jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">在下面的例子中，依赖关系由<strong class="jf hj"> CreatePost </strong>的调用者提供。这将消除类<strong class="jf hj"> CreatePost </strong>直接依赖编辑器和 UploadImage 的需要。编辑器和图像实例通过构造函数传递或注入。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lw"><img src="../Images/15eec15d5216e6ecbe831dd24ff0167e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQu6uNIAFadGwM4dXVTbBA.png"/></div></div></figure><blockquote class="lm ln lo"><p id="9ea6" class="jd je lp jf b jg lb ji jj jk lc jm jn lq ld jq jr lr le ju jv ls lf jy jz ka hb bi translated">通过 CreatePost 构造函数传递图像和编辑器，很容易模仿它们。</p></blockquote><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lx"><img src="../Images/8e83f6dfe7cefc11f87a467c4be9ec5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzxkXiUdiNtradUpKGXzmw.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">编辑器和上传是完全模仿出来的</figcaption></figure><blockquote class="lm ln lo"><p id="6540" class="jd je lp jf b jg lb ji jj jk lc jm jn lq ld jq jr lr le ju jv ls lf jy jz ka hb bi translated">易于用其他编辑器实例替换编辑器，因为只要 AdvanceEditor 支持该接口，就只传递一个编辑器实例。</p></blockquote><p id="09b4" class="pw-post-body-paragraph jd je hi jf b jg lb ji jj jk lc jm jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">依赖注入概念听起来是一个困难的概念。像 JavaScript 中的 Angular、Spring 和 Java 中的 Google Guice 这样的框架使用了它的许多附加功能，使它很难掌握。</p><p id="dbed" class="pw-post-body-paragraph jd je hi jf b jg lb ji jj jk lc jm jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">这对于编写优雅的测试和消除紧耦合非常有用。最好先编写简单的类，然后随着复杂性的增加将它们分开。通过依赖注入消除紧耦合，实现更好的分离。</p></div></div>    
</body>
</html>