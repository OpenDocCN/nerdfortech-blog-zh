<html>
<head>
<title>AWS Lambda Typescript(Charity Web App) — Student Service with Event driven server-less computing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS Lambda Typescript(慈善网络应用程序)—具有事件驱动的无服务器计算的学生服务</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/aws-lambda-typescript-charity-web-app-student-service-with-event-driven-server-less-computing-cd7f20fe97ef?source=collection_archive---------2-----------------------#2022-10-22">https://medium.com/nerd-for-tech/aws-lambda-typescript-charity-web-app-student-service-with-event-driven-server-less-computing-cd7f20fe97ef?source=collection_archive---------2-----------------------#2022-10-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f930" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嘿，伙计们，到目前为止，我们已经使用 typescript 和 NodeJS 成功地创建了一个 Hello World 应用程序。</p><div class="jd je ez fb jf"><div role="button" tabindex="0" class="ab bv ff cb dy jg jh bn ji jj jk"><div class="jl l"><div class="ab q"><div class="l di"><img alt="Dimuthu Wickramanayake" class="l de bw jm jn du" src="../Images/099c92eba7c0ef5b0373ba4d36052ba2.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*LsIMaDB2-AJKz28n02h_IQ.jpeg"/><div class="dr bw l jm jn ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated">迪穆图·维克拉马那亚克</p></div></div><div class="jq jr fg l"><h2 class="bd hj rm le dy rn ea eb ly ed ef hh bi translated">AWS Lambda(慈善网络应用)系列</h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi ro au rp rq rr od rs an fx fy rt ru rv gb gc gd de bk ge" href="https://billa-code.medium.com/list/aws-lambda-charity-webapp-series-cd878238f932?source=post_page-----cd7f20fe97ef--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="rw l dw"><span class="bd b fp z dx">5 stories</span></div></div></div><div class="kd dh ke dy ab kf dw di"><div class="di jv bv jw jx"><div class="dh l"><img alt="" class="dh" src="../Images/5e5d417a4f8e977dff5a6564ccf48d39.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*ZMefBLP2MRSPDwmix-Z0Mw.png"/></div></div><div class="di jv bv jy jz ka"><div class="dh l"><img alt="" class="dh" src="../Images/75f2267185bffd78647008c578e838b9.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*myAvjQPuBRWl1INX8ZjhAg.png"/></div></div><div class="di bv kb kc ka"><div class="dh l"><img alt="" class="dh" src="../Images/fa6bf2ff659d1783bd38eee735f02f2d.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*Mu1FtEnLQw7sXtrpNJmSHQ.png"/></div></div></div></div></div><p id="2695" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，让我们创建学生服务。在此之前，我们将花一分钟时间讨论一下我们的使用案例。所以如果我们去函数层，每个操作都应该有 Lambda 函数。例如，创建一个学生，一个 Lambda 更新一个学生，另一个 Lambda 也是如此。所以你可以看到，如果我们继续这样下去，将会造成混乱。因此，作为一种补救措施，我们有了事件驱动计算。这里我们做的是，我们创建一个 Lambda 函数，它将处理 http 事件，并使用我们在请求中使用的 http 方法，它将触发不同的功能。所以用一个函数，我们可以覆盖学生的所有 CRUD 操作。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es kk"><img src="../Images/001baec1fdd63a3b1d6810c45fbe1cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*myAvjQPuBRWl1INX8ZjhAg.png"/></div></figure><p id="a72f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们对实现已经很清楚了，到目前为止我们已经创建了一个<a class="ae kr" href="https://billa-code.medium.com/aws-lambda-typescript-charity-web-app-start-using-event-driven-server-less-computing-198288f13342" rel="noopener"> Hello World 应用程序</a>。因此，当我们从与 Lambda 函数相关的 URL 发出请求时，API Gateway 将捕获我们的请求，然后基于此创建一个事件。这个事件将触发 Lambda 函数。<strong class="ih hj">💡好了</strong>现在你应该明白我们要做什么了。我们将读取该事件并找到 httpMethod，根据该方法，我们将调用 app.ts 文件中的不同函数。到目前为止，我们还没有集成任何数据库，所以在本教程中，我将只使用带有硬编码响应的伪方法。转到 student 文件夹中的 app.ts 文件，像这样更改代码。</p><pre class="kl km kn ko fd ks kt ku kv aw kj bi"><span id="4e75" class="kw kx hi kt b fi ky kz l la lb">import { APIGatewayProxyEvent, APIGatewayProxyResult } from 'aws-lambda';<br/><br/>/**<br/> *<br/> * Event doc: https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html#api-gateway-simple-proxy-for-lambda-input-format<br/> * @param {Object} event - API Gateway Lambda Proxy Input Format<br/> *<br/> * Return doc: https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html<br/> * @returns {Object} object - API Gateway Lambda Proxy Output Format<br/> *<br/> */<br/><br/>export const lambdaHandler = async (event: APIGatewayProxyEvent): Promise&lt;APIGatewayProxyResult&gt; =&gt; {<br/>    <strong class="kt hj">let results: any;</strong><br/>    let response: APIGatewayProxyResult;<br/><br/>    try {<br/>        <strong class="kt hj">switch (event.httpMethod) {<br/>            case 'GET':<br/>                if (event.pathParameters.id</strong></span><span id="92e6" class="kw kx hi kt b fi lc kz l la lb"><strong class="kt hj">!= <em class="ld">null</em>) {<br/>                    results = await getStudent(event.pathParameters.id);<br/>                } else {<br/>                    results = await getStudents();<br/>                }<br/>                <br/>                break;<br/>            case 'POST':<br/>                results = await createStudents(event);<br/>                break;<br/>            case 'PUT':<br/>                results = await updateStudents(event.pathParameters.id)<br/>                break;<br/>            case 'DELETE':<br/>                results = await deleteStudents(event.pathParameters.id)<br/>                break;<br/>            default:<br/>                throw new Error('Unidentified event!!!');<br/>        }</strong><br/>        <br/>        response = {<br/>            statusCode: <em class="ld">200</em>,<br/>            body: JSON.stringify({<br/>                <strong class="kt hj">message: results,</strong><br/>            }),<br/>        };<br/>    } catch (err: unknown) {<br/>        console.log(err);<br/>        response = {<br/>            statusCode: <em class="ld">500</em>,<br/>            body: JSON.stringify({<br/>                message: err instanceof Error ? err.message : 'some error happened',<br/>            }),<br/>        };<br/>    }<br/><br/>    return response;<br/>};<br/><br/><strong class="kt hj">const getStudents = async () =&gt; {<br/>    return ['james', 'john'];<br/>}<br/><br/>const getStudent = async (studentId: string) =&gt; {<br/>    return studentId;<br/>}<br/><br/>const createStudents = async (event: APIGatewayProxyEvent) =&gt; {<br/>    return event;<br/>}<br/><br/>const updateStudents = async (event: APIGatewayProxyEvent) =&gt; {<br/>    return event;<br/>}<br/><br/>const deleteStudents = async (studentId: string) =&gt; {<br/>    return studentId;<br/>}</strong></span></pre><p id="6cda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，现在你应该有如何创建这些事件的问题了。当我们执行 sam init 时，我们得到了一个名为 events 的文件夹，在 events 文件夹中，我们有文件 events.json。如果您稍微看一下，就会看到这几个重要的字段。</p><ul class=""><li id="99fc" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">身体</li><li id="9581" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">httpMethod</li><li id="c4ed" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">路径参数</li></ul><p id="0862" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他的都是通用字段。为了我们的用例。我正在为创建、获取全部、获取一个、更新和删除创建 5 个不同的事件。转到下面的链接，你可以看到这 5 个文件。</p><div class="jd je ez fb jf ls"><a href="https://github.com/deBilla/serendib-scholarship-ws/tree/main/events" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">seren DIB-奖学金-ws/main deBilla/seren DIB 的活动-奖学金-ws</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">奖学金。在 GitHub 上创建一个帐户，为 deBilla/seren DIB-scholarship-ws 开发做贡献。</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">github.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg jj ls"/></div></div></a></div><p id="2e86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在留给我们的是引发这些事件。无需部署到 AWS，我们可以在本地环境中使用 SAM 来实现这一点。</p><pre class="kl km kn ko fd ks kt ku kv aw kj bi"><span id="d2e7" class="kw kx hi kt b fi ky kz l la lb">sam local invoke StudentFunction --event events/student_get_one.json</span></pre><p id="13e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，您也可以尝试调用其他 4 个事件。现在我们有一个打工学生服务。剩下的就是把这个和数据库连接起来。让我们在下一个教程中尝试一下。直到那时快乐编码！！！:p</p></div></div>    
</body>
</html>