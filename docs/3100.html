<html>
<head>
<title>Memory Allocation in C</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C语言中的内存分配</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/memory-allocation-in-c-45e505b69c49?source=collection_archive---------20-----------------------#2021-05-29">https://medium.com/nerd-for-tech/memory-allocation-in-c-45e505b69c49?source=collection_archive---------20-----------------------#2021-05-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9a95" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><em class="ix">C编程中的静态和动态内存分配。</em></h2></div><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es iy"><img src="../Images/8b65810559b6b8e6ab62fa888dc4d3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oedi3IdGdfPMrBz2R7iCtw.jpeg"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">来自<a class="ae jo" href="https://www.pexels.com/photo/photo-of-code-projected-over-woman-3861969/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">像素</a>的<a class="ae jo" href="https://www.pexels.com/@thisisengineering?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">this is工程</a>的照片</figcaption></figure><p id="b09f" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">计算机的内存只是一系列可以容纳数字、字符或布尔值的“桶”。</p><p id="7cf3" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">当变量占用计算机的内存空间时，我们称之为内存分配。</p><p id="82a8" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">解除分配表示计算机已重新获得空间，并且无法再访问该变量。</p><p id="19be" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">电脑内存分为两部分；<strong class="jr hj">堆栈内存</strong>和<strong class="jr hj">堆内存。</strong></p><ul class=""><li id="afca" class="kl km hi jr b js jt jv jw jy kn kc ko kg kp kk kq kr ks kt bi translated">堆栈内存是临时内存存储，存储由函数创建的临时变量。在堆栈中，变量在运行时被声明、存储和初始化。</li><li id="9fd4" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">堆内存大于堆栈内存，用于动态内存分配。</li></ul></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><p id="5cca" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated"><strong class="jr hj">什么是平均内存分配？</strong></p><p id="397a" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">内存分配是将物理或虚拟内存空间分配给计算机程序和服务的过程。内存分配发生在程序执行之前或期间。内存分配有两种基本类型:</p><ol class=""><li id="0d36" class="kl km hi jr b js jt jv jw jy kn kc ko kg kp kk lg kr ks kt bi translated">静态内存/编译时内存分配。</li><li id="0274" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk lg kr ks kt bi translated">动态内存/运行时内存分配。</li></ol><h1 id="54fb" class="lh li hi bd lj lk ll lm ln lo lp lq lr io ls ip lt ir lu is lv iu lw iv lx ly bi translated">静态内存分配</h1><p id="54b3" class="pw-post-body-paragraph jp jq hi jr b js lz ij ju jv ma im jx jy mb ka kb kc mc ke kf kg md ki kj kk hb bi translated">静态内存由编译器为声明的变量分配。内存分配在编译时完成。</p><p id="0659" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated"><em class="me">在静态内存分配中，</em></p><ul class=""><li id="2281" class="kl km hi jr b js jt jv jw jy kn kc ko kg kp kk kq kr ks kt bi translated">变量被永久分配。</li><li id="da4d" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">内存分配在程序执行前完成。</li><li id="0bfd" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">使用<strong class="jr hj">堆栈</strong>内存。</li><li id="5c68" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">效率较低。</li><li id="0be7" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">没有内存可重用性。</li><li id="4138" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">无法重用未使用的内存。</li><li id="99f9" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">执行速度更快。</li><li id="9da6" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">分配的内存从程序开始一直保持到程序结束。</li></ul><p id="46e0" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated"><em class="me">例如:内存分配发生在数组中。</em></p><p id="4baa" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">声明数组时，</p><pre class="iz ja jb jc fd mf mg mh mi aw mj bi"><span id="f163" class="mk li hi mg b fi ml mm l mn mo">#include&lt;stdio.h&gt;<br/>int main(){<br/>    <br/>    int arr[5];<br/>    return 0;<br/>}</span></pre><p id="dfa2" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">该数组有5个元素，下标从0到4，用垃圾填充。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es mp"><img src="../Images/206026f4cf68c57c8f717ae5d96f5bc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*cozHsSfm2HO0-Ghnxzbj3Q.png"/></div></figure><p id="36a5" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">编译时分配给<code class="du mq mr ms mg b">arr</code>数组的内存是固定的，以后不能改变。</p><p id="6f84" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">无论我们是否使用了这段记忆，这都不会改变。因此出现了内存浪费。</p><blockquote class="mt mu mv"><p id="0bff" class="jp jq me jr b js jt ij ju jv jw im jx mw jz ka kb mx kd ke kf my kh ki kj kk hb bi translated"><em class="hi">注:实际物理内存是</em> <strong class="jr hj"> <em class="hi">而不是</em> </strong> <em class="hi">在编译时分配给变量的。仅在运行时分配的实际物理内存。</em></p></blockquote></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h1 id="61c9" class="lh li hi bd lj lk mz lm ln lo na lq lr io nb ip lt ir nc is lv iu nd iv lx ly bi translated">动态存储分配</h1><p id="f4c9" class="pw-post-body-paragraph jp jq hi jr b js lz ij ju jv ma im jx jy mb ka kb kc mc ke kf kg md ki kj kk hb bi translated">内存分配是在执行时(或运行时)完成的，被定义为动态内存分配。<code class="du mq mr ms mg b">calloc()</code>和<code class="du mq mr ms mg b">malloc()</code>是支持分配动态内存的函数。当值由函数返回并分配给指针变量时，内存空间的动态分配通过使用这些函数来分配。</p><p id="cd80" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated"><em class="me">在动态内存分配中，</em></p><ul class=""><li id="c169" class="kl km hi jr b js jt jv jw jy kn kc ko kg kp kk kq kr ks kt bi translated">只有当你的程序单元被激活时，变量才会被分配。</li><li id="8eeb" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">内存分配是在程序执行期间完成的。</li><li id="a1e7" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">使用<strong class="jr hj">堆</strong>内存。</li><li id="42ff" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">内存可以重用，不需要时可以释放内存。</li><li id="da55" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">用户可以根据需要分配更多内存。此外，用户可以在需要时释放内存。</li><li id="2038" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">分配内存时，内存大小可以改变。</li><li id="b1f3" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">执行速度比静态内存分配慢。</li><li id="a23c" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">内存在运行时分配。</li><li id="b676" class="kl km hi jr b js ku jv kv jy kw kc kx kg ky kk kq kr ks kt bi translated">分配的内存可以在程序运行期间随时释放。</li></ul><p id="8178" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated"><em class="me">例如:c中的链表</em></p><blockquote class="mt mu mv"><p id="dc33" class="jp jq me jr b js jt ij ju jv jw im jx mw jz ka kb mx kd ke kf my kh ki kj kk hb bi translated">链表是一种线性数据结构，其中的元素不是存储在连续的内存位置。</p></blockquote></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><p id="23a3" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">这就是C编程中内存分配是如何发生的。希望这个信息有用。感谢您的阅读！！！。</p></div></div>    
</body>
</html>