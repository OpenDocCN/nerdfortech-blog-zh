<html>
<head>
<title>Swift Dynamic Search Bar with Multiple Criteria and Filter Persistence</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有多个标准和过滤器持久性的快速动态搜索栏</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/swift-dynamic-search-bar-with-multiple-criteria-and-filter-persistence-905ac05b6ae0?source=collection_archive---------3-----------------------#2021-05-20">https://medium.com/nerd-for-tech/swift-dynamic-search-bar-with-multiple-criteria-and-filter-persistence-905ac05b6ae0?source=collection_archive---------3-----------------------#2021-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4088" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">UITableView 搜索栏按多个标准筛选记录，并在分支时保留筛选视图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/135534455e7fe8b1c122b7649cc39dc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*5F-7GvG0HcYRTe9GXiakvg.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图书 ui 表按标题、作者和系列查看搜索栏</figcaption></figure><h1 id="7a11" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">方案</h1><p id="887f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们的应用程序允许用户使用搜索文本字符串，通过书名、作者或系列来搜索特定的记录(书籍)。搜索栏将具有以下特征:</p><blockquote class="ks kt ku"><p id="032e" class="if ig kv ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated"><strong class="ih hj">动态</strong>，当用户键入文本字符串时显示过滤后的记录。</p><p id="1988" class="if ig kv ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated"><strong class="ih hj">多重标准</strong>，显示标题、作者或系列中出现文本字符串的所有书籍</p><p id="a428" class="if ig kv ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated"><strong class="ih hj">过滤持久性</strong>，如果用户选择一条记录，更新它，然后返回到表格视图，表格视图将显示更新后的过滤记录。</p></blockquote><p id="6699" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为一个实际的例子，本文将关注 3 个标准，但是这个逻辑适用于你为你的应用程序选择的任何数量的标准。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kz"><img src="../Images/bac934eb6e7795edf8c7b4efb1bc7160.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/1*UzTom5tC3s2w61J-LNJIqw.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">GIF 图书搜索栏过滤器持久性</figcaption></figure><h1 id="01f2" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">技术</h1><p id="03dd" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">屏幕上方有一个搜索栏。搜索栏是实时动态的，它在用户键入搜索文本字符串时显示过滤后的搜索结果。搜索将查找任何标题，作者或具有搜索栏字符串的系列。</p><p id="0621" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本原理是有<strong class="ih hj"> 2 个数组</strong>:从核心数据中检索出的<strong class="ih hj">books:【Book】</strong>的原始数组和一个<strong class="ih hj">search results【Book】</strong>反映当前显示的搜索结果。对搜索栏控制器是否活动(用户在搜索栏中输入的文本)的二进制检查决定了要显示哪个数组。</p><p id="520b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">两个视图控制器(图书表和搜索栏)在它们之间传递数据(搜索栏传递文本字符串)的概念需要在 Swift 中实现<strong class="ih hj">委托</strong>功能。因此，BooksTableViewController<strong class="ih hj"/>将充当<strong class="ih hj"> UISearchBarDelegate </strong>。</p><p id="6551" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还使用了<strong class="ih hj">UISearchResultsUpdating</strong>，这是一组让我们根据用户输入搜索栏的信息(文本字符串)更新搜索结果的方法。</p><p id="da29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kv">注意</em> </strong>:在 iOS 15 之前，SwiftUI 不支持一个<strong class="ih hj">列表</strong>修饰符进行搜索。在 iOS 15 中，一个新的修饰符<em class="kv">可搜索</em>变得可用。看看这个。</p><h1 id="dc6a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">观众</h1><p id="fa66" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">本文面向寻求完整、成熟、以代码为中心的解决方案来加速开发项目的 Swift 开发人员。下面的代码片段可以通过最小的定制来使用。</p><h1 id="b159" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">应用模型</h1><p id="d51c" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们的文章基于苹果应用商店发布的<a class="ae la" href="https://appsgym.com/projects/books/" rel="noopener ugc nofollow" target="_blank">apps gam Books</a>型号应用(名为<a class="ae la" href="https://apps.apple.com/au/app/8books/id1152860892" rel="noopener ugc nofollow" target="_blank"> 8Books </a>，你可以在 AppsGym.com 上免费下载完整的<a class="ae la" href="https://appsgym.com/appsgym-books-swift-xcode-project-tour/" rel="noopener ugc nofollow" target="_blank"> Xcode 项目</a>。</p><h1 id="9ff3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">用户界面</h1><p id="aaa0" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><strong class="ih hj"> BooksTableViewController </strong>将显示核心数据中的书籍。我们将通过编程来设置和使用搜索栏，而不是通过故事板来添加它。添加 UISearchController 的代码非常简单。因此，没有特定的 UI 设置。</p><h1 id="16a6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">逻辑</strong></h1><p id="ab1b" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们声明 UISearchController 的一个实例<strong class="ih hj"> searchController </strong>。该逻辑检查搜索控制器<strong class="ih hj">是否激活</strong>。如果 searchController 是活动的(搜索栏中有一个值)，那么表格视图显示<strong class="ih hj"> searchResults </strong>数组。如果未激活(用户未输入任何搜索文本或删除了所有文本)，则表格视图显示<strong class="ih hj">书籍</strong>数组。</p><p id="4ea7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">searchController 处于活动状态检查发生在</p><p id="6f7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">numberOfRowsInSection(..)，cellForRowAt(..)，以及 canEditRowAt(..)</p><p id="11eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">搜索栏逻辑出现在</p><p id="5e13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">filterContentForSearchText(..)，以及(..)更新搜索结果</p><h1 id="f9d1" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">密码</h1><p id="3553" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><strong class="ih hj">bookstableviewcontroller . swift 初始化</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="955a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">bookstableviewcontroller . swift<strong class="ih hj">viewDidLoad()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="e715" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">bookstableviewcontroller . swift<strong class="ih hj">view willapear()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="befb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">bookstableviewcontroller . swift<strong class="ih hj">numberOfRowsInSection(..)</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="749c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">bookstableviewcontroller . swift<strong class="ih hj">cellForRowAt(..)</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="a296" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">bookstableviewcontroller . swift<strong class="ih hj">canEditRowAt(..)</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="0648" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">bookstableviewcontroller . swift<strong class="ih hj">搜索栏</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="02bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文介绍了图书表视图中搜索栏的实现。搜索栏允许用户输入一个文本字符串，所有标题、作者或系列中包含该文本字符串的图书记录将实时显示在搜索栏上(随着用户的键入而动态显示)。如果用户分支显示一本书的详细信息和/或更新它，那么搜索视图将反映用户返回时的任何变化。</p><p id="30e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望你觉得它在你的应用程序中有用。感谢阅读！</p></div></div>    
</body>
</html>