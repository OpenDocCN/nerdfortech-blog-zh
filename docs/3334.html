<html>
<head>
<title>Memento Design Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">纪念品设计模式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/memento-design-pattern-a1b83879c032?source=collection_archive---------20-----------------------#2021-06-06">https://medium.com/nerd-for-tech/memento-design-pattern-a1b83879c032?source=collection_archive---------20-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f75695248fa557a91940c7701e047ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFvznlS3fLHBHnm4Y4PC_Q.jpeg"/></div></div></figure><p id="c421" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你能回到过去，你想在生活中改变什么？比方说，如果你想改变什么，但事实是你在现实生活中无法做到。但是在<strong class="is hj"> Memento设计模式中，您可以将对象的状态恢复到之前的状态</strong>。所以欢迎回到另一篇设计模式文章。如果你是设计模式的新手，你可以参考我以前的文章。如你所知，这篇文章是关于行为类型下的纪念品设计模式的。Memento模式用于将对象的状态恢复到先前的状态。随着应用程序的运行，您可能希望在应用程序中保存检查点，并在以后恢复到这些检查点。因此Memento设计模式允许您制作对象状态的完整副本，包括私有字段，并将它们与对象分开存储。让我们看看下面的memento设计模式的UML图。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/66dff3fe65f9b2832981a401f1c634f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*lt1v6ktsmiIzr_3Jtbh1vg.jpeg"/></div></figure><p id="de0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">纪念品设计模式主要有三个组成部分。那些是，</p><ol class=""><li id="b5a3" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn jy jz ka kb bi translated"><strong class="is hj">发起者:</strong>状态为需要保存的对象。它创建了纪念品，并在将来使用它来撤销。</li><li id="8133" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><strong class="is hj"> memento : </strong>将要维持发起者状态的对象。</li><li id="b8ef" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><strong class="is hj">看守者:</strong>跟踪多个纪念品的对象。比如维护保存点。</li></ol><p id="4437" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们来举个简单的例子，学习一下这个。当我们写文章的时候，我们可以随时撤销并回到以前的状态。让我们以此为例，使用memento设计模式来实现。所以首先你需要创建一个名为Article的类。<strong class="is hj">该物品类是发起者类，这意味着该物品类对象需要保存</strong>。在article类中，我有三个属性，分别叫做id、title和content。当实现这个场景时，我只实现撤销文章的内容。所以记住这一点。我实现了类的构造函数以及内容属性的setter和getter。然后，您需要实现保存和恢复功能，如下所示。保存和恢复功能是我们主要用来保存对象和撤销的两个功能，我们可以使用恢复功能。因此，当我们保存时，我们将创建一个ArticleMemento实例，并将文章的当前内容放入其中。当我们使用revert函数时，我们获得内容的先前状态，并使用ArticleMemento将其设置为当前内容。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="ba4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后你需要创建一个纪念品类。在这里，我创建了一个名为ArticleMemento的类。所以在ArticleMemento里面你可以放入你想要撤销的属性。正如我在这里前面提到的，我只实现了撤销文章的内容。如果你想添加其他功能来撤销，你只需要对这个类做一些简单的修改。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="5094" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来你需要创建看守类，所以在这里我创建了一个名为ArticleHistory的类作为看守类。比方说，当你输入一个word文档时，你会做一些改变。那么当你第一次撤销时，你将得到最后一次改变前的状态。然后，如果您再次撤消，您将获得前一个状态之前的状态。与本文场景相同。所以是先入先出(FIFO)的顺序。我们必须为此实现一个堆栈，因为在堆栈中我们可以维护FIFO。所以在这里我实现了一个堆栈，如下图所示。然后我们有保存和恢复功能。Save将保存对象的状态，并将其推送到堆栈。“还原”将恢复对象的先前状态。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="78a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后在主程序中，您已经从Article类和ArticleHistory类创建了一个实例。接下来，您可以使用save函数保存，然后您可以使用setContent()方法对文章的内容进行一些更改，并像下面这样保存。然后，您可以使用revert()方法撤销更改，并打印实例以查看程序是否正常工作。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="9856" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">程序的输出如下所示。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/fb96684654e5a0eb5b091d04a1f4d650.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nGupdAd5TyFprtPpO33O4A.png"/></div></div></figure><h2 id="dba2" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated"><strong class="ak"/>纪念品设计模式的优势</h2><ol class=""><li id="4f70" class="jt ju hi is b it lf ix lg jb lh jf li jj lj jn jy jz ka kb bi translated">总是可以丢弃不需要的更改，并将其恢复到预期的或稳定的状态。</li><li id="bb81" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">提供了一种简单的恢复技术。</li></ol><h2 id="434c" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated"><strong class="ak">纪念品设计图案的缺点</strong></h2><ol class=""><li id="5c8b" class="jt ju hi is b it lf ix lg jb lh jf li jj lj jn jy jz ka kb bi translated">如果发起者对象非常大，那么Memento对象的大小也将非常大，并使用大量内存。</li><li id="8898" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">大量的纪念品需要更多的存储空间。同时，它们给看护者增加了额外的负担。</li></ol><h2 id="42ff" class="kk kl hi bd km kn ko kp kq kr ks kt ku jb kv kw kx jf ky kz la jj lb lc ld le bi translated">何时使用纪念品模式</h2><ol class=""><li id="eb25" class="jt ju hi is b it lf ix lg jb lh jf li jj lj jn jy jz ka kb bi translated">当您希望生成对象状态的快照，以便能够恢复对象以前的状态时。</li></ol><p id="6459" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就这样，伙计们。本文到此结束。我希望你了解纪念品设计模式。我会将代码上传到GitHub，并将链接放在参考资料中，这样你也可以参考。那么是时候说再见了，让我们从另一篇文章中见面。保持联系。</p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h1 id="ca4d" class="lr kl hi bd km ls lt lu kq lv lw lx ku ly lz ma kx mb mc md la me mf mg ld mh bi translated">参考</h1><div class="mi mj ez fb mk ml"><a href="https://github.com/Dilshanushara/Krish_LP_Training/tree/master/Design%20Patterns/Memento" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hj fi z dy mq ea eb mr ed ef hh bi translated">dilshanushara/Krish _ LP _ Training</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">在GitHub上创建一个帐户，为Dilshanushara/Krish _ LP _ Training的发展做出贡献。</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">github.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz io ml"/></div></div></a></div><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="na ki l"/></div></figure><div class="mi mj ez fb mk ml"><a href="https://www.geeksforgeeks.org/memento-design-pattern/" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hj fi z dy mq ea eb mr ed ef hh bi translated">纪念品设计模式- GeeksforGeeks</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">Memento模式是一种行为设计模式。Memento模式用于将对象的状态恢复到以前的状态…</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">www.geeksforgeeks.org</p></div></div><div class="mu l"><div class="nb l mw mx my mu mz io ml"/></div></div></a></div><div class="mi mj ez fb mk ml"><a href="https://www.tutorialspoint.com/design_pattern/memento_pattern.htm" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hj fi z dy mq ea eb mr ed ef hh bi translated">设计模式——纪念品模式</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">Memento模式用于将对象的状态恢复到先前的状态。记忆模式属于行为…</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">www.tutorialspoint.com</p></div></div><div class="mu l"><div class="nc l mw mx my mu mz io ml"/></div></div></a></div></div></div>    
</body>
</html>