<html>
<head>
<title>Unhappy anniversary: A year later, Log4Shell vulnerabilities persist</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不愉快的周年纪念:一年后，Log4Shell 漏洞依然存在</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/unhappy-anniversary-a-year-later-log4shell-vulnerabilities-persist-1ef74465fce2?source=collection_archive---------0-----------------------#2022-12-12">https://medium.com/nerd-for-tech/unhappy-anniversary-a-year-later-log4shell-vulnerabilities-persist-1ef74465fce2?source=collection_archive---------0-----------------------#2022-12-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2619510665d67dd3a05622fb098edd25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_mCHnJNFMJQa4AF7i-aHRg.jpeg"/></div></div></figure><p id="e342" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated"><span class="l jp jq jr bm js jt ju jv jw di">正如</span>大多数商界人士——尤其是软件安全行业——回忆起来，2021 年底的圣诞节或新年并不快乐。不是因为一个格林奇想破坏全球无名镇的节日气氛。因为<a class="ae jx" href="https://www.synopsys.com/blogs/software-security/mitigating-impact-of-log4j-log4shell/?cmp=pr-sig&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">log 4 shell</a>,<a class="ae jx" href="https://www.apache.org/" rel="noopener ugc nofollow" target="_blank">Apache 软件基金会</a>(ASF)的开源日志库 Log4j 的一组漏洞，Log4j 是网络世界最受欢迎的之一，拥有数十亿用户。</p><p id="c59f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">任何使用 Log4j 的人，即使它在他们的软件供应链中被隐藏了几层，也很容易受到攻击。</p><p id="bd16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一年后，当令人尖叫的头条新闻转向别处——加密货币公司 FTX 的倒闭，有人知道吗？—最初的恐慌已经消退，但这仍然是一个不愉快的一周年纪念日。</p><p id="2ee9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">据漏洞扫描供应商 Tenable 称，截至 10 月，基于超过 5 亿次测试的数据，<a class="ae jx" href="https://www.tenable.com/press-releases/tenable-research-finds-72-of-organizations-remain-vulnerable-to-nightmare-log4j" rel="noopener ugc nofollow" target="_blank">绝大多数(72%)组织</a>仍在努力全面修复其暴露于 Log4Shell 的漏洞。</p><p id="c32f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于新思科技软件供应链风险主管蒂姆·麦基来说，这并不奇怪。他说，Log4Shell 可能会有“像我们在<a class="ae jx" href="https://heartbleed.com/" rel="noopener ugc nofollow" target="_blank"> Heartbleed </a>中看到的那样长的尾巴”，这是 OpenSSL 加密库中的灾难性错误，于 2012 年引入该软件，但直到 2014 年才公开。</p><p id="39d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">麦基说，又花了四年时间，直到 2018 年，Synopsys 的年度报告“<a class="ae jx" href="https://www.synopsys.com/software-integrity/resources/analyst-reports/open-source-security-risk-analysis.html?cmp=pr-sig&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">开源安全和风险分析</a>”才发现任何使用 OpenSSL 漏洞版本的代码库。</p><p id="9013" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Log4Shell 缺陷被称为“远程代码执行”漏洞，可允许网络攻击者远程控制运行 Java 应用程序的计算机，Java 是世界上最流行的编程语言之一。</p><p id="b44d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更糟糕的是，利用 Log4Shell 很容易。新思软件完整性小组的技术总监兼首席架构师迈克尔·怀特当时在一篇博客文章中写道，这“执行起来很简单”</p><p id="ed92" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“Log4j 广泛用于各种消费者和企业服务、网站和应用程序，以及运营技术产品，以记录安全和性能信息，”怀特写道，并指出估计有 30 亿台设备运行 Java。“未经验证的远程参与者可以利用这个漏洞来控制受影响的系统，”他补充说。</p><p id="d964" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">节前恐慌</strong></p><p id="5fe6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个消息引起了恐慌，这是有原因的。ASF 推出了针对 Log4Shell 和其他漏洞的<a class="ae jx" href="https://logging.apache.org/log4j/2.x/security.html" rel="noopener ugc nofollow" target="_blank">多个更新</a>，这些漏洞被数以百万计的组织用来拼命保护他们的资产免受网络犯罪分子的攻击，到圣诞节前一周，网络犯罪分子正以每秒超过一次的速度发起攻击，试图利用这些漏洞。对于那些手头没有计算器的人来说，这一数字在每天 10 万左右。</p><p id="5a68" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">美国网络安全和基础设施安全局(CISA)局长 Jen Easterly 称 Log4Shell 为“我整个职业生涯中见过的最严重的漏洞之一，如果不是最严重的话。”</p><p id="d1db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">国家漏洞数据库给 Log4Shell 的严重性评级为 10.0——满分为 10.0。</p><p id="95cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，一年后，一个几乎每个人，甚至是绝大多数人，都更新了他们的 Log4j 漏洞版本，使他们对 Log4Shell 免疫的在线世界将成为一个快乐的周年纪念。</p><p id="e46d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">没有那么多。相反，正如 Tenable 所记录的那样，大多数人仍然在努力更新。</p><p id="84da" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">很复杂</strong></p><p id="1823" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么？一个主要原因是，更新 Log4j 这样的软件组件比简单地在智能手机上点击应用程序的“更新”图标并等待几秒钟安装要复杂得多。</p><p id="e9a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">云安全联盟的首席区块链官兼特别项目总监 Kurt Seifried 在去年 7 月表示，“许多没有打补丁的人正在使用 Log4j 运行一些无法更新的旧应用程序。”</p><p id="b134" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者正如 Mackey 所说的，告诉用户他们应该更新 Log4j“这种建议是由没有在生产中管理软件的人提出的。每一款软件都有独特的功能，每一次更新都会以某种重要的方式改变这种功能，”他说。</p><p id="1440" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“在一个应用程序中，简单地将一个组件版本替换为另一个从未使用更改后的版本进行过测试的组件版本，会产生一种应用程序可能会不正常运行的情况，这仅仅是因为应用程序开发人员做出的假设不再正确。”他说，结果可能是“垃圾数据被写入日志”，这可能会使事情变得更糟，而不是更好。</p><p id="9e26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“如果一个恶意组织知道更新可能会导致日志文件损坏，他们可能会策划一次攻击，他们的攻击指纹被损坏的日志数据所掩盖，”他说。</p><p id="9978" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这意味着拥有旧版本 Log4j 的应用程序的所有者需要用更新的版本来测试它，看看应用程序是否还能正常工作。“如果没有，他们可能需要更改一些代码，以反映更新的工作方式。这个过程创造了一个“支持配置”，他说，这可能导致另一个复杂的问题。</p><p id="bdc1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“如果软件运营商要执行 Log4j 更新，那么应用程序所有者可以声称他们的应用程序没有部署在受支持的配置中，并拒绝软件运营商对 Log4j 中的更改所导致的任何问题提供支持。这就是为什么所有软件运营商都应该与他们的软件提供商保持积极关系的一个原因，”他说。</p><p id="ea40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一个困难是，正如 Tenable 首席安全官 Bob Huber 在一篇博客文章中所说，“漏洞修复不是一个‘一劳永逸’的过程。虽然某个组织可能在某个时候已经得到了充分的补救，但随着他们向环境中添加新的资产，他们很可能会一次又一次地遇到 Log4Shell。”</p><p id="65ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Huber 确实注意到，根据该公司的数据，大多数组织都减少了风险敞口，从 2021 年 12 月的约 10%的易受影响资产降至两个月前的约 2.5%。</p><p id="81b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，这提出了一个明显的问题:为什么允许任何资产被添加到组织的环境中，而不首先测试它们是否存在 Log4j 的易受攻击版本？</p><p id="983f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">全面保证</strong></p><p id="6a34" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为再一次，事情没那么简单。麦基说，筛选新资产——台式电脑、笔记本电脑、服务器、存储设备、网络设备、手机、平板电脑、虚拟机、云实例和容器——以发现已知的高严重性漏洞“并不总是可行的”。</p><p id="c59e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，他补充说，这并不意味着公司不能做任何事情来降低风险。“这应该是一个更全面的软件保证过程的一部分，”他说。“采购团队应实施由合同语言支持的‘信任但核实’范例。例如，合同可能包含一项条款，规定采购的产品在装运之日应不存在任何 CVSS[通用漏洞评分系统] 7.0 或更高版本的漏洞，并且所有包含软件的产品必须包括在制造时设备中存在的软件的软件材料清单(SBOM)，”他说。</p><p id="8487" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“由于 SBOM 是机器可读的，因此很容易自动查询 Log4j 的易受攻击版本。如果 SBOM 列出了一个易受攻击的版本，那么可以根据该合同条款拒绝发货。”</p><p id="7595" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当一个应用程序可能有数百个所谓的“依赖项”时，组织应该如何创建 SBOM 呢？这些依赖项是其他组件运行所依赖的组件，并且深入到多个级别。</p><p id="3f81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一个好消息——一个名为<a class="ae jx" href="https://www.synopsys.com/software-integrity/security-testing/software-composition-analysis.html?cmp=pr-sig&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">软件组成分析</a> (SCA)的自动化测试工具可以帮助创建 SBOMs，这几乎是不可能手动完成的。Synopsys 网络安全研究中心的全球研究负责人 Jonathan Knudsen 说:“SCA 计算出在组装应用程序时使用了哪些开源组件。如果应用程序包含任何具有危险漏洞(如 Log4Shell)的组件，组织可以延迟部署应用程序，直到供应商解决问题</p><p id="8250" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">换句话说，减轻 Log4Shell 威胁的关键是知道它可能在哪里。安全会议上的一个长期口头禅是，不可能保护或修复你不知道自己拥有的东西。</p><p id="0bb0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Synopsys Software Integrity Group 的安全解决方案经理 Mike McGuire 表示:“这归根结底是为了建立软件应用程序组件的可见性。“对于软件构建者来说，这意味着致力于开源软件检测，并持续监控开发管道中的漏洞。对于软件用户来说，这意味着获得 SBOMs，有时甚至是一种分析供应商提供给他们的二进制文件的方法。”</p><p id="4abe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">值得</strong></p><p id="cea4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在许多层面上，做所有值得做的事情的时间、精力和金钱。根据美国联邦贸易委员会(FTC)，未能识别和更新 Log4j 可能违反<a class="ae jx" href="https://www.ftc.gov/enforcement/statutes/federal-trade-commission-act" rel="noopener ugc nofollow" target="_blank">FTC 法案</a>。如果你不确定使用哪个版本，你可以在这里找到<a class="ae jx" href="https://logging.apache.org/log4j/2.x/security.html" rel="noopener ugc nofollow" target="_blank">的最新版本</a>。</p><p id="5205" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有关于如何减轻漏洞的<a class="ae jx" href="https://www.cisa.gov/uscert/apache-log4j-vulnerability-guidance" rel="noopener ugc nofollow" target="_blank"> CISA 指南</a>。</p><p id="4ab4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了保护您的组织，这一切都是值得的。Log4Shell 仍然非常危险。</p><p id="1a80" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">麦基称之为“我所见过的最严重、同样也是最复杂的问题之一——很容易成为我的十大问题之一。这主要是因为很少有开发团队主动选择使用特定的日志记录机制，而只是使用一些权宜之计。毕竟，人们花钱买功能，不会花钱买写日志数据的代码。”</p></div></div>    
</body>
</html>