<html>
<head>
<title>sense2vec in python3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python3 中的 sense2vec</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/sense2vec-in-python3-9d3db9557495?source=collection_archive---------2-----------------------#2021-05-16">https://medium.com/nerd-for-tech/sense2vec-in-python3-9d3db9557495?source=collection_archive---------2-----------------------#2021-05-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1127" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sense2vec 是一个不可思议的工具，可以在给定关键字的情况下获得同义词和相关性。<br/>关键词不一定是一个独立的词，如“医学”，也可以是一个复合词，如“机器学习”。</p><p id="070a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sense2vec 可以马上使用，不需要训练自己的语料库。<br/>事实上，它附带了两个完全预训练的向量集，即 reddit_2019 和 reddit_2015。这里有一个<a class="ae jd" href="https://github.com/explosion/sense2vec#pretrained-vectors" rel="noopener ugc nofollow" target="_blank">链接</a>到你可以下载的官方文档。</p><p id="981d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文分为:<br/> 1 —安装<br/> 2 —导入库<br/> 3 — sense2vec <br/> 4 —常见问题</p><p id="34f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你刚开始，我建议你选择 reddit_2015 系列。它相当小，你甚至可以在一台不太强大的计算机上运行它。否则，你将会有一个 oom-kill——内存不足的错误。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/d6ec983857bcc6d811991ca042058545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8oqQuaPzVAc7_J9K.jpg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">来自<a class="ae jd" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1836089" rel="noopener ugc nofollow" target="_blank">像素库</a>的<a class="ae jd" href="https://pixabay.com/users/pexels-2286921/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1836089" rel="noopener ugc nofollow" target="_blank">像素</a>的图像</figcaption></figure><h2 id="806f" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">1 —安装</h2><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="8947" class="ju jv hi kq b fi ku kv l kw kx">pip install -U spacy<br/>python -m spacy download en_core_web_sm<br/>pip install sense2vec<br/>pip install pathlib</span><span id="5eb6" class="ju jv hi kq b fi ky kv l kw kx"># download your pretrained vector set<br/>cd directory/with/pretrained/set<br/>tar -xvf vectors_md.tar.gz # you should see a s2v_old folder now</span></pre><h2 id="6401" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">2-导入库</h2><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="41b0" class="ju jv hi kq b fi ku kv l kw kx">import spacy<br/>from sense2vec import Sense2VecComponent,Sense2Vec                                         from pathlib import Path</span></pre><h2 id="b287" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated"><strong class="ak"> 3 — sense2vec </strong></h2><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="b99b" class="ju jv hi kq b fi ku kv l kw kx">def get_correlations(KEYWORD):<br/>    nlp = spacy.load(“en_core_web_sm”) <br/>    s2v = nlp.add_pipe(“sense2vec”) <br/>    path = Path(__file__).parent.joinpath(‘s2v_old’) <br/>    s2v.from_disk(path) <br/>    doc = nlp(KEYWORD) <br/>    assert doc[:].text == KEYWORD <br/>    freq = doc[:]._.s2v_freq <br/>    vector = doc[:]._.s2v_vec <br/>    try: <br/>       closest_words = list(doc[:]._.s2v_most_similar(30)) <br/>    except ValueError: <br/>       print(“Nothing found in sense2vec.”) <br/>       return ([])<br/>    correlated = [w[0][0] for w in closest_words if w[1] &gt; 0.70]<br/>    return (list(correlated))</span></pre><p id="a863" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。我们加载英语的空间语言模型。</p><p id="fbf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。我们在 sense2vec 中添加了一个管道——sense 2 vec 已经附带了一组通过管道处理文本的操作，例如消除停用词；通过添加管道，我们在管道的<em class="kz">端</em>添加了一个额外的操作。您可以将管道视为一组相互链接的操作。</p><p id="64d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。您可以添加 Path()，以便 python 能够找到您的文件夹，无论它在您计算机上的什么位置——否则您可以在 s2v . from _ disk(Path/to/pre trained/vector/folder)中硬编码您的文件夹的相对路径</p><p id="00c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。<code class="du la lb lc kq b">doc[:].text == KEYWORD</code>在整个预训练文本中搜索关键词，然后我们可以得到它的频率和向量属性</p><p id="c8f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。我们使用 try/except，以防我们的关键字不在 word2vec <br/> With <code class="du la lb lc kq b">closest_words = list(doc[:]._.s2v_most_similar(30))</code>中，我们得到 sense2vec 找到的前 30 个相关单词。<br/>如果找到关键字，我们会创建一个包含所有得分高于 0.70 的相关单词的列表(根据需要更改该值)。</p><p id="593e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。我们用 w[0][0]和 w[1]是因为 sense2vec 返回的是一个元组列表，其中每一项都是这样结构的元组:<br/> <code class="du la lb lc kq b">((word, POS), frequency)</code> → for ex。(('问题'，'名词')，0，87)。<br/>词性表示词性，如名词、动词、ADJ……</p><p id="51ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们返回列表。</p><h2 id="d766" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated"><strong class="ak"> 4 —常见问题</strong></h2><p id="a3c2" class="pw-post-body-paragraph if ig hi ih b ii ld ik il im le io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">如果您得到以下错误，<br/> <code class="du la lb lc kq b">raise ValueError(f"Can't read file: {location}")</code> <br/> <code class="du la lb lc kq b">ValueError: Can't read file: ../filtering_models/vectors_md/cfg</code> <br/>删除您的 s2v_old 文件夹并重新解压缩 vectors_md.tar.gz <br/>如果您仍然得到此错误，请检查您的 s2v_old 文件夹的相对路径。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es li"><img src="../Images/b6fb3121a83b62733c39a61acf3a69ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FLwnaur7fLykY3UY"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">照片由<a class="ae jd" href="https://www.pexels.com/@chetanvlad?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jw">弗拉德·chețan</strong></a>拍摄自<a class="ae jd" href="https://www.pexels.com/photo/close-up-photo-of-leaves-with-droplets-1626340/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jw"> Pexels </strong> </a></figcaption></figure></div></div>    
</body>
</html>