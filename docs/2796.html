<html>
<head>
<title>Switch statements in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity 中的开关语句</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/switch-statements-in-unity-ad6d3dd88a99?source=collection_archive---------9-----------------------#2021-05-20">https://medium.com/nerd-for-tech/switch-statements-in-unity-ad6d3dd88a99?source=collection_archive---------9-----------------------#2021-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="e71a" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="20fe" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">Unity 中 switch 语句实现的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/496be3cea13ef01d642d823ce663fdad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qTORAwnyIdbymrvpJZhmlg.gif"/></div></div></figure><p id="dc62" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在 Unity 中使用 switch 语句实现一个太空射击游戏的下一个加电项目。</p><p id="9e0d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">随着太空射击游戏的发展，是时候实现列表中的下一个增强项目了，玩家的盾牌。</p><h1 id="1f6c" class="ko kp hi bd kq kr ks kt ku kv kw kx ky ix kz iy la ja lb jb lc jd ld je le lf bi translated">添加加电项目</h1><p id="09ae" class="pw-post-body-paragraph js jt hi ju b jv lg is jx jy lh iv ka kb li kd ke kf lj kh ki kj lk kl km kn hb bi translated">为了做到这一点，就像我在<a class="ae ll" rel="noopener" href="/nerd-for-tech/creating-a-power-up-for-your-game-in-unity-6810d73376a1">的最后一篇文章</a>中一样，让我们在场景中添加启动物品的精灵和触发与玩家碰撞所需的组件:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ln lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/70f53a0e5dab17fca77b10edc617cbd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1682/format:webp/1*e0IkZtUAYYl5s7SSQi728A.png"/></div></figure><figure class="lm jl ls lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/9318aaca0c91ac77a710d355d85caa71.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/1*D-83aBDboMc7WWCCZgQB1g.png"/></div><figcaption class="lt lu et er es lv lw bd b be z dx lx di ly lz translated">新的加电项目需要包含一个碰撞器、一个刚体 2D 和加电脚本。</figcaption></figure></div><p id="f4cd" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，就像我在<a class="ae ll" rel="noopener" href="/nerd-for-tech/animating-sprites-in-unity-9d02762bde96">的最后一篇文章</a>中一样，让我们使用 animator 视图制作开机精灵的动画。此外，我们需要将预设拖到繁殖管理器脚本中，以便它可以在游戏中每隔 5 到 10 秒钟与其他电源一起随机繁殖:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ma lo lp lq lr paragraph-image"><img src="../Images/53fe72c5852a1eaa9c1143197dc130ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/1*jasVUF2ANy5LksbW8C7Vqg.gif"/></figure><figure class="lm jl mb lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/7ef0110e766d9fd8f1f98186965dd830.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/1*49Ig73sSd1f8Y6urMzgRGg.gif"/></div></figure><figure class="lm jl mc lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/ae787732debe08a8d93b8bc57e8e7982.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/1*2gFY-zA090l64FqU62KpBg.gif"/></div><figcaption class="lt lu et er es lv lw bd b be z dx md di me lz translated">在上一篇文章中，我们拖动了速度启动预置，随机产生了三重启动。</figcaption></figure></div><h1 id="bd56" class="ko kp hi bd kq kr ks kt ku kv kw kx ky ix kz iy la ja lb jb lc jd ld je le lf bi translated">添加启动可视化工具</h1><p id="493a" class="pw-post-body-paragraph js jt hi ju b jv lg is jx jy lh iv ka kb li kd ke kf lj kh ki kj lk kl km kn hb bi translated">一旦启动物品准备好了，让我们把可见的盾牌精灵拖到场景中，并确保它适合玩家的飞船，使它成为一个预置:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/21790c98fc61a017d04286d3a15095ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uuu040H756_LcnU4qqdW7Q.png"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">这是玩家的飞船。</figcaption></figure><div class="jh ji jj jk fd ab cb"><figure class="lm jl mf lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/719fe7e64ecc0eb3633d3a467d979161.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/1*crblN8yfU4ekHVECcodlbQ.gif"/></div></figure><figure class="lm jl mg lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/645efb36436028ea5be2421660834530.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/1*TUAyggrEJDNCTrR3z50uzw.gif"/></div></figure><figure class="lm jl mh lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/bf73cc9cbfec8dff2671e269fac5eb24.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/1*6TFpbYLlggJtOSIxJHuewQ.gif"/></div><figcaption class="lt lu et er es lv lw bd b be z dx mi di mj lz translated">一旦盾牌适合玩家的飞船，就把它拖到相应的预设文件夹中。</figcaption></figure></div><p id="cb8d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们不需要给 shield visualizer sprite 添加碰撞器、刚体或脚本。在这种情况下，我们将通过在场景中将游戏对象设置为活动或不活动来处理它。因此，一旦我们准备好盾牌游戏对象，让我们使它成为玩家游戏对象的子对象，并停用它，因为它将保持这样，直到玩家收集到启动项目来激活它:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mk lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/2397148732614ee61bacbce66f76be44.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/1*bJbV6WkuXfdiwSGl9ldVXg.gif"/></div></figure><figure class="lm jl ml lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/ed9552239ab208ff28a73a0bf9792b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/1*hqDS3DJBI3F0iZ-LKEWjYA.gif"/></div></figure><figure class="lm jl mk lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/423571aee26582f0c794ded1926fa875.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*pJTZ2o3hkg7352kOpisXnw.png"/></div><figcaption class="lt lu et er es lv lw bd b be z dx mm di mn lz translated">盾牌精灵将保持非活动状态，直到玩家收集到盾牌增强物品。</figcaption></figure></div><h1 id="fe11" class="ko kp hi bd kq kr ks kt ku kv kw kx ky ix kz iy la ja lb jb lc jd ld je le lf bi translated">实现集合方法</h1><p id="d9a1" class="pw-post-body-paragraph js jt hi ju b jv lg is jx jy lh iv ka kb li kd ke kf lj kh ki kj lk kl km kn hb bi translated">现在，为了实现盾牌加电项目的集合，我们需要打开玩家脚本并为盾牌可视化工具添加一个新变量，该变量是玩家游戏对象的子对象:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mo"><img src="../Images/8fba4c0eeb39e56f91b02e20d1ddc2c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/1*v8axGGbdti1zRyKcHATsiA.gif"/></div></figure><p id="ae0e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">保存脚本后，让我们将盾牌从播放器拖到检查器的脚本组件中:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mp lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/34d9bd562fdd30c52dec61b2cbe7d88d.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/1*glnCjqoqQdWKDG43pT2LJQ.gif"/></div></figure><figure class="lm jl mq lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/9181b2d50ab4e1612098001272b768cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/1*dv_3Bt8VTZSYNz1hefS0Gw.gif"/></div></figure></div><p id="c57d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在我的<a class="ae ll" rel="noopener" href="/nerd-for-tech/creating-a-modular-power-up-system-e34a2414c50">上一篇文章</a>中，我说过我会将加电分为临时加电和恒定加电，但我意识到，如果时间参数(协程等待的时间)为正，我实际上可以调用协程来取消临时加电。</p><p id="8c75" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，我将对所有通电使用相同的阵列，我需要更改我用于临时通电的阵列的名称和大小:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/db1975e22c0780980e3819d2769fd2fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zO-9ka_bbepFIYIYQ4b-5Q.gif"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">添加相应的注释，以显示屏蔽索引现在是数字 2。</figcaption></figure><p id="34d2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，在启用加电的公共模块化函数中，我需要更改数组和函数名:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ms"><img src="../Images/9ac61e1dfb441e8129a8087d813277c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pMTBHUadGWDADy8-NdbScw.gif"/></div></div></figure><h2 id="a97c" class="mt kp hi bd kq mu mv mw ku mx my mz ky kb na nb la kf nc nd lc kj ne nf le ho bi translated">交换语句</h2><p id="4fcb" class="pw-post-body-paragraph js jt hi ju b jv lg is jx jy lh iv ka kb li kd ke kf lj kh ki kj lk kl km kn hb bi translated">switch 语句作为简化 if-else 结构的替代方法。Switch 接收将被评估的值或变量，并且根据其匹配，我们可以确定执行不同的动作，以便处理相应的评估。如果没有为评估规定的操作，我们可以确定要执行的默认操作。</p><p id="aa5d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">回到加电脚本，我使用 switch 语句来处理根据加电 ID 触发的动作，我需要更新前两个加电案例中调用的函数，然后在案例属于 shield 加电 ID 时添加新的函数调用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ng"><img src="../Images/2086e3942eb4eb25ddf95c3be6382bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xDsgOxdS9wl5uPR7bvOI1Q.gif"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">为了区分临时加电和持续加电，我将使用第二个参数(时间)。<strong class="bd kq">常量将发送负值</strong>，而<strong class="bd kq">临时常量将发送正值</strong>。</figcaption></figure><p id="533b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们回到玩家脚本，在这里我们使用另一个 switch 语句来处理加电，当收到的 ID(power)是盾加电项目时，让我们添加相应的动作。如果识别了盾牌 ID，我们需要在场景中激活盾牌可视化器:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nh"><img src="../Images/277fc2005356e56fa9dfee21e6384040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CPD-NMreetnLoz2Huif9sw.gif"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">switch 语句中的情况 2 属于屏蔽上电。</figcaption></figure><p id="2c58" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了区分临时加电和持续加电，我们需要检查接收到的浮点值(time)是否大于 0。如果是这种情况，我们将调用协程，在作为参数接收的时间之后禁用上电:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ni"><img src="../Images/bbb0d14bb2593b4aae7ba413e5a51e1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IsYq8N095O86qTMlLz4WMw.gif"/></div></div></figure><h1 id="8163" class="ko kp hi bd kq kr ks kt ku kv kw kx ky ix kz iy la ja lb jb lc jd ld je le lf bi translated">实现加电目的</h1><p id="90cd" class="pw-post-body-paragraph js jt hi ju b jv lg is jx jy lh iv ka kb li kd ke kf lj kh ki kj lk kl km kn hb bi translated">然后，为了实现盾牌加电的目的，让我们添加一个条件，以避免在启用盾牌的情况下减去生命。如果是这种情况，我们需要从场景中取消屏蔽，并在加电数组中将相应的 bool 设置为 false:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nj"><img src="../Images/17df5f7d3e101070afd20570ba8cc3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PB976QXt7PtH8UdhW8tFIA.gif"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">如果在 GetDamage 函数被调用时启动了护盾加电，那么<strong class="bd kq"> return </strong>语句将会停止该函数的执行，并且不会从玩家身上减去任何生命。</figcaption></figure><p id="dfd5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">另外，我们需要在 Unity inspector 中设置 shield 上电项的 ID 值，以便上电脚本能够正确识别出<strong class="ju hs"> OnTriggerEnter2D </strong>函数包含的 switch 语句中要执行的函数:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nk"><img src="../Images/d3d0f99384c263d5b29b573744e14010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*b-vTo_NIP0MkZ1jbOQKg7A.gif"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">盾牌上电项的<strong class="bd kq"> ID </strong>为 2。</figcaption></figure><p id="7d12" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们在 Unity 中运行游戏，我们会注意到加电收集和实现按预期工作:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl nl lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/d3e30307d1a46398e1592691846e9d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/1*2UqWa0u_Enp9gl5CTl8S6g.gif"/></div></figure><figure class="lm jl nm lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/22e1992cb8269a8b4a0b2478b8c96ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/1*ekh480YHNM2q0ayhBQWXlg.gif"/></div><figcaption class="lt lu et er es lv lw bd b be z dx nn di no lz translated">当玩家收集盾牌能量物品时，盾牌游戏对象在场景中被激活。当玩家击中一个敌人时，它就会关闭。</figcaption></figure></div><p id="6449" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，正如我们在<a class="ae ll" rel="noopener" href="/nerd-for-tech/animating-sprites-in-unity-9d02762bde96">的旧帖子</a>中所做的，让我们使用动画工具来制作 shield visualizer 的精灵动画:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es np"><img src="../Images/9bfc91dddd5ff9037784ef4c6888c547.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/1*RBscBBArwGXb454TFeuLFA.gif"/></div></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nq"><img src="../Images/45986df32adbbe2127da45c3de075e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/1*AiV29MrQMSay8K_OzBfsYg.gif"/></div></figure><p id="060c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在我们可以玩游戏了，每 5 到 10 秒场景中会随机产生 3 种能量:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/a5eacf063a2fbc23f2eef79f69eb07f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZhFme5zwFHZvogIv1jjQmA.gif"/></div></div></figure><p id="0e1a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就是这样，你可以在 Unity 中使用 switch 语句来处理你游戏中的不同动作！:d .下一篇文章再见，我将展示如何在 Unity 中构建 UI 元素。</p></div><div class="ab cl nr ns gp nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="hb hc hd he hf"><blockquote class="ny nz oa"><p id="17b4" class="js jt ob ju b jv jw is jx jy jz iv ka oc kc kd ke od kg kh ki oe kk kl km kn hb bi translated"><em class="hi">如果你想更多地了解我，欢迎登陆</em><a class="ae ll" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ll" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>