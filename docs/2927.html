<html>
<head>
<title>Installing Pytorch with GPU Support (CUDA) in Ubuntu 18.04 — Complete Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Ubuntu 18.04 中安装支持 GPU(CUDA)的 Pytorch 完整指南</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/installing-pytorch-with-gpu-support-cuda-in-ubuntu-18-04-complete-guide-edd6d51ee7ab?source=collection_archive---------3-----------------------#2021-05-24">https://medium.com/nerd-for-tech/installing-pytorch-with-gpu-support-cuda-in-ubuntu-18-04-complete-guide-edd6d51ee7ab?source=collection_archive---------3-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/468b7df5f32ee3bd1144431dede8015d.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*AioKW9YXX3fvo9JDl6pJBg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">PyTorch(图片来源—<a class="ae iq" href="https://pytorch.org/get-started/locally/" rel="noopener ugc nofollow" target="_blank">https://pytorch.org/get-started/locally/</a>)</figcaption></figure><p id="16ec" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这些天来，大多数研究级机器学习算法都是在支持 CUDA 的 GPU 上运行，因为在以更高速度处理网络方面有明显的优势，特别是在涉及“计算机视觉”问题时。在使用 PyTorch 进行编码和运行基准测试之前，我们需要设置环境来使用 GPU 处理我们的网络。</p><p id="a8ff" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">PyTorch 是一个比 TensorFlow 更灵活的框架，可用于此类应用，并且比 TensorFlow 更广泛地用于研究级应用。因此，为 PyTorch 设置一个能够使用 GPU 进行计算的环境非常重要。</p><p id="7713" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> <em class="jp">在 Ubuntu 18.04 中检查我的 TensorFlow GPU 安装如果你想测试出来也一样(</em> </strong> <a class="ae iq" href="https://i-pamuditha.medium.com/installing-tensorflow-gpu-enabling-cuda-in-ubuntu-18-04-complete-guide-ca9dfaa5bdd3" rel="noopener"> <strong class="it hj"> <em class="jp">点击这里</em></strong></a><strong class="it hj"><em class="jp">)</em></strong></p><p id="84c2" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这个过程比 TensorFlow 简单得多，让我们看看在 Ubuntu 18.04 中是如何实现的。</p><p id="228b" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">重要提示:</strong></p><ol class=""><li id="8376" class="jq jr hi it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy bi translated">我已经用“Anaconda”演示了这一点，并且通过为 PyTorch 创建一个单独的环境来安装这些包。如果您想删除 PyTorch 安装，或者遇到似乎无法解决的错误，您可以删除环境并通过创建一个新环境重新开始，而不用删除整个 anaconda 安装，这就很方便了。</li><li id="c6a7" class="jq jr hi it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy bi translated">我已经提到了当您运行以下命令时终端中可能出现的错误，以及如何在运行这些命令时纠正它们。如果你遇到了本文没有提到的错误，请在下面评论它们，我会尽力帮助你。在这种情况下，堆栈溢出也非常有用。</li><li id="32ee" class="jq jr hi it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy bi translated">最后，我给出了运行的示例代码，您可以用它来检查安装是否成功。建议在“jupyter 笔记本”中进行尝试。</li></ol><h1 id="9808" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">步骤 01:系统检查</h1><h2 id="460e" class="lc kf hi bd kg ld le lf kk lg lh li ko jc lj lk ks jg ll lm kw jk ln lo la lp bi translated">㈠确保你的系统能够使用 CUDA</h2><p id="35f9" class="pw-post-body-paragraph ir is hi it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hb bi translated">访问以下网站，确保您的 GPU 支持 CUDA。<a class="ae iq" href="https://developer.nvidia.com/cuda-gpus" rel="noopener ugc nofollow" target="_blank">https://developer.nvidia.com/cuda-gpus</a></p><blockquote class="lv lw lx"><p id="855f" class="ir is jp it b iu iv iw ix iy iz ja jb ly jd je jf lz jh ji jj ma jl jm jn jo hb bi translated">但是这个支持 CUDA 的 GPU 列表似乎不完整，因为我现在使用的 GPU 是支持 CUDA 的，出于某种原因，它没有列在上面给出的列表中！</p><p id="84f1" class="ir is jp it b iu iv iw ix iy iz ja jb ly jd je jf lz jh ji jj ma jl jm jn jo hb bi translated">因此，在继续此过程之前，请彻底检查。</p><p id="5479" class="ir is jp it b iu iv iw ix iy iz ja jb ly jd je jf lz jh ji jj ma jl jm jn jo hb bi translated">谷歌“CUDA 启用了吗？”你的 GPU 版本可能会给你想要的答案。</p><p id="2784" class="ir is jp it b iu iv iw ix iy iz ja jb ly jd je jf lz jh ji jj ma jl jm jn jo hb bi translated">或者，访问 NVIDIA 的官方宣传页面，看看它是否被列为 CUDA enabled。</p></blockquote><h2 id="8d18" class="lc kf hi bd kg ld le lf kk lg lh li ko jc lj lk ks jg ll lm kw jk ln lo la lp bi translated">(ii)确定哪些 CUDA/ cuDNN 软件包与您的 GPU 兼容</h2><p id="c3c3" class="pw-post-body-paragraph ir is hi it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hb bi translated">不同的 GPU 支持不同版本的 CUDA，如果你的 GPU 相对较旧，那么它很有可能无法与最新版本的 CUDA 兼容。因此，在盲目安装最新的 CUDA 工具包版本之前，检查适合您自己的 GPU 的版本是非常重要的。这可以在互联网上搜索或访问<a class="ae iq" href="https://forums.developer.nvidia.com/" rel="noopener ugc nofollow" target="_blank">NVIDIA 官方开发者论坛</a>来完成。</p><h1 id="8fe0" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">步骤 02:安装 PyTorch</h1><h2 id="de35" class="lc kf hi bd kg ld le lf kk lg lh li ko jc lj lk ks jg ll lm kw jk ln lo la lp bi translated">㈠安装 Anaconda</h2><p id="f827" class="pw-post-body-paragraph ir is hi it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hb bi translated">访问<a class="ae iq" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">https://www.anaconda.com/products/individual</a>，安装您喜欢的版本。</p><h2 id="86f4" class="lc kf hi bd kg ld le lf kk lg lh li ko jc lj lk ks jg ll lm kw jk ln lo la lp bi translated">㈡为 Pytorch 创造新的环境</h2><p id="e35d" class="pw-post-body-paragraph ir is hi it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hb bi translated">请注意，基于兼容性问题，我在此环境中使用了 python 版。将它替换为您的机器兼容的版本，以便进行全新安装。请不要以为你需要 python 3.7 或更高版本才能使用 PyTorch。</p><pre class="mb mc md me fd mf mg mh mi aw mj bi"><span id="8f36" class="lc kf hi mg b fi mk ml l mm mn">conda create -n torch-gpu python=3.7<br/>source activate torch-gpu</span></pre><p id="0a62" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> <em class="jp"> — — — —此时可能的错误:——</em>—</strong></p><pre class="mb mc md me fd mf mg mh mi aw mj bi"><span id="11f8" class="lc kf hi mg b fi mk ml l mm mn">conda: command not found</span></pre><p id="f26b" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这是因为 anaconda 安装的路径没有在您的<code class="du mo mp mq mg b">.bashrc</code>或<code class="du mo mp mq mg b">.zshrc</code>中设置</p><p id="12a9" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">试试:</strong></p><p id="0e68" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><code class="du mo mp mq mg b">export PATH="/home/username/anaconda3/bin:$PATH"</code></p><p id="e425" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> — — — — —错误解决结束— — </strong></p><h2 id="64f9" class="lc kf hi bd kg ld le lf kk lg lh li ko jc lj lk ks jg ll lm kw jk ln lo la lp bi translated">㈢安装 PyTorch</h2><p id="6a1c" class="pw-post-body-paragraph ir is hi it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hb bi translated">对于 PyTorch 来说，它比 TensorFlow 安装更简单，因为您不必单独安装 CUDA ToolKit 和 cuDNN，因为您可以使用 PyTorch 官网上给出的一个命令一次性安装它们。</p><p id="ff73" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">您只需识别合适的 CUDA 工具包版本</strong>，cuDNN 包将被自动选择，这与 TensorFlow 安装不同，这使得 PyTorch 安装非常容易。</p><p id="ba4a" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">访问<a class="ae iq" href="https://pytorch.org/get-started/locally/" rel="noopener ugc nofollow" target="_blank">https://pytorch.org/get-started/locally/</a>，网站将根据您的操作系统、其版本和 CUDA 版本自动选择合适的 pytorch 版本。如果需要更改，您可以随时更改所选的瓷砖并使其正确。</p><figure class="mb mc md me fd ij er es paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="er es mr"><img src="../Images/0e36264ea5d55c565edd05682a259eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKp153T1wutsJAOiPyCkgw.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">来源—<a class="ae iq" href="https://pytorch.org/get-started/locally/" rel="noopener ugc nofollow" target="_blank">https://pytorch.org/get-started/locally/</a></figcaption></figure><p id="afd0" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">如果你的系统比较老，可以查看 PyTorch 的<a class="ae iq" href="https://pytorch.org/get-started/previous-versions/" rel="noopener ugc nofollow" target="_blank">以前版本，选择适合你系统的。在我们为 PyTorch 创建的已经激活的环境中运行 PyTorch 网站给出的命令。</a></p><p id="26a4" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">示例代码:</strong></p><pre class="mb mc md me fd mf mg mh mi aw mj bi"><span id="cbf2" class="lc kf hi mg b fi mk ml l mm mn">conda install pytorch torchvision torchaudio cudatoolkit=10.2 -c pytorch</span></pre><h1 id="b6ce" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">步骤 03:验证安装</h1><p id="17bb" class="pw-post-body-paragraph ir is hi it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hb bi translated">在 jupyter 笔记本中运行以下程序验证安装。</p><pre class="mb mc md me fd mf mg mh mi aw mj bi"><span id="7cad" class="lc kf hi mg b fi mk ml l mm mn">import torch<br/>torch.cuda.is_available()</span></pre><p id="310b" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">或者</p><pre class="mb mc md me fd mf mg mh mi aw mj bi"><span id="f4b7" class="lc kf hi mg b fi mk ml l mm mn">import torch<br/>torch.cuda.device(0)</span></pre><p id="73df" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">或者</p><pre class="mb mc md me fd mf mg mh mi aw mj bi"><span id="ea0d" class="lc kf hi mg b fi mk ml l mm mn">import torch<br/>torch.cuda.device_count()</span></pre><p id="ad68" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">或者</p><pre class="mb mc md me fd mf mg mh mi aw mj bi"><span id="b055" class="lc kf hi mg b fi mk ml l mm mn">import torch<br/>torch.cuda.get_device_name(0)</span></pre><p id="65f6" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">尽情享受吧！</strong></p><p id="e177" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">:T7】</strong></p><p id="95d6" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> <em class="jp">在 Ubuntu 18.04 上检查我的 TensorFlow GPU 安装，如果你想测试的话也可以(</em> </strong> <a class="ae iq" href="https://i-pamuditha.medium.com/installing-tensorflow-gpu-enabling-cuda-in-ubuntu-18-04-complete-guide-ca9dfaa5bdd3" rel="noopener"> <strong class="it hj"> <em class="jp">点击这里</em></strong></a><strong class="it hj"><em class="jp">)</em></strong></p></div></div>    
</body>
</html>