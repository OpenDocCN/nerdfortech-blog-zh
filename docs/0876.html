<html>
<head>
<title>Implement REST API with Kotlin, Spring Boot and H2 Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用科特林、Spring Boot和H2数据库实现REST API</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implement-rest-api-with-kotlin-spring-boot-and-h2-database-9d0103064600?source=collection_archive---------3-----------------------#2021-02-20">https://medium.com/nerd-for-tech/implement-rest-api-with-kotlin-spring-boot-and-h2-database-9d0103064600?source=collection_archive---------3-----------------------#2021-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a3ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇<strong class="ih hj">第一部分</strong>文章中，我们将实现一个简单的小工具库(CRUD API to<strong class="ih hj">C</strong>reate，<strong class="ih hj"> R </strong> etrieve，<strong class="ih hj"> U </strong> pdate和<strong class="ih hj">D</strong>delete Gadget details)REST API with<a class="ae jd" href="https://kotlinlang.org/docs/home.html" rel="noopener ugc nofollow" target="_blank">Kotlin</a>、SpringBoot 2.x、JPA和H2内存数据库。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/6504c09a6a36ca047bc44caf0f18319f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*8InRxaX_J11NxI8CdOLuvA.png"/></div></figure><p id="39d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jm">技术/工具</em> </strong>:</p><blockquote class="jn jo jp"><p id="bf42" class="if ig jm ih b ii ij ik il im in io ip jq ir is it jr iv iw ix js iz ja jb jc hb bi translated">IDE:IntelliJ(STS/Eclipse)<br/><a class="ae jd" href="https://kotlinlang.org/docs/home.html" rel="noopener ugc nofollow" target="_blank">Kotlin</a>:1.4 . x<br/>构建工具:Maven <br/> Spring Boot: 2.4.x <br/>数据库:H2(内存数据库)<br/> Rest客户端/邮递员</p></blockquote><p id="18e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Gadget gallery API的</strong> —让我们从spring initializer创建一个sprint boot项目，它公开了6个API来执行CRUD操作，如下所示。</p><ul class=""><li id="dfdc" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">从数据库中获取所有现有小工具</li><li id="6b3f" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">向小工具表发布新的小工具详细信息</li><li id="96cb" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">基于gadgetId获取小工具数据</li><li id="af23" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">基于gadgetId更新小工具数据</li><li id="2d25" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">基于gadgetId移除/删除小工具数据</li><li id="d32b" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">从数据库中删除所有小工具数据</li></ul><p id="5d2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1 </strong> : <a class="ae jd" href="https://start.spring.io/#!type=maven-project&amp;language=kotlin&amp;platformVersion=2.4.2.RELEASE&amp;packaging=jar&amp;jvmVersion=11&amp;groupId=com.learning&amp;artifactId=springboot-kotlin-h2&amp;name=springboot-kotlin-h2&amp;description=Simple%20CRUD%20application%20with%20Kotlin%2C%20SpringBoot%20and%20H2%20database&amp;packageName=com.learning.springboot-kotlin-h2&amp;dependencies=devtools,lombok,web,h2,data-jpa" rel="noopener ugc nofollow" target="_blank">弹簧初始值设定项配置</a>(访问配置链接并下载)</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/c527403d9b30ed0846e36bfb17826811.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SXNpmuSpbhWx7zigYVY9jQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">春季app生成—<a class="ae jd" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank">https://start.spring.io/</a></figcaption></figure><p id="d750" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> pom.xml — </strong>依赖项(kotlin、spring-web、data-jpa、H2内存数据库)</p><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="ad1b" class="kv kw hi kr b fi kx ky l kz la">&lt;<strong class="kr hj">dependencies</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;spring-boot-starter-data-jpa&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;spring-boot-starter-web&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;com.fasterxml.jackson.module&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;jackson-module-kotlin&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;org.jetbrains.kotlin&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;kotlin-reflect&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;org.jetbrains.kotlin&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;kotlin-stdlib-jdk8&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;org.apache.commons&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;commons-lang3&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/><br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;spring-boot-devtools&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>      &lt;<strong class="kr hj">scope</strong>&gt;runtime&lt;/<strong class="kr hj">scope</strong>&gt;<br/>      &lt;<strong class="kr hj">optional</strong>&gt;true&lt;/<strong class="kr hj">optional</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;com.h2database&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;h2&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>      &lt;<strong class="kr hj">scope</strong>&gt;runtime&lt;/<strong class="kr hj">scope</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>   &lt;<strong class="kr hj">dependency</strong>&gt;<br/>      &lt;<strong class="kr hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="kr hj">groupId</strong>&gt;<br/>      &lt;<strong class="kr hj">artifactId</strong>&gt;spring-boot-starter-test&lt;/<strong class="kr hj">artifactId</strong>&gt;<br/>      &lt;<strong class="kr hj">scope</strong>&gt;test&lt;/<strong class="kr hj">scope</strong>&gt;<br/>   &lt;/<strong class="kr hj">dependency</strong>&gt;<br/>&lt;/<strong class="kr hj">dependencies</strong>&gt;</span></pre><p id="a162" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2 </strong>:将zip文件解压到本地目录，并将其作为maven项目导入到IDE中</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lb"><img src="../Images/6574c52d936774548b0cf715373d4f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRQtKK00qGnNcokqUVsqIQ.png"/></div></div></figure><p id="f3ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从主类开始，这是我们应用程序的起点。</p><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="6daf" class="kv kw hi kr b fi kx ky l kz la"><strong class="kr hj">package </strong>com.shasr.springbootkotlingadgetapp<br/><br/><strong class="kr hj">import </strong>org.springframework.boot.CommandLineRunner<br/><strong class="kr hj">import </strong>org.springframework.boot.autoconfigure.SpringBootApplication<br/><strong class="kr hj">import </strong>org.springframework.boot.runApplication<br/><br/>@SpringBootApplication<br/><strong class="kr hj">class </strong>SpringbootKotlinGadgetAppApplication <br/><br/><strong class="kr hj">fun </strong>main(args: Array&lt;String&gt;) {<br/>    <em class="jm">runApplication</em>&lt;SpringbootKotlinGadgetAppApplication&gt;(*args)<br/>}</span></pre><p id="387b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3 </strong>:让我们创建一个数据类:Gadget.kt，它有5个属性来携带小工具的详细信息。Koltin数据类默认提供setter/getter方法。</p><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="7b07" class="kv kw hi kr b fi kx ky l kz la"><strong class="kr hj">package </strong>com.shasr.springbootkotlingadgetapp.model<br/><br/><strong class="kr hj">import </strong>javax.persistence.Entity<br/><strong class="kr hj">import </strong>javax.persistence.GeneratedValue<br/><strong class="kr hj">import </strong>javax.persistence.GenerationType<br/><strong class="kr hj">import </strong>javax.persistence.Id<br/><strong class="kr hj">import </strong>javax.persistence.Table<br/><br/>@Entity<br/>@Table(name = <strong class="kr hj">"GADGET"</strong>)<br/><strong class="kr hj">data class </strong>Gadget(<br/><br/>    @Id<br/>    @GeneratedValue(strategy = GenerationType.<em class="jm">AUTO</em>)<br/>    <strong class="kr hj">val gadgetId </strong>: Long,<br/>    <strong class="kr hj">val gadgetName </strong>: String,<br/>    <strong class="kr hj">val gadgetCategory </strong>: String?,<br/>    <strong class="kr hj">val gagdetAvailability </strong>: Boolean = <strong class="kr hj">true</strong>,<br/>    <strong class="kr hj">val gadgetPrice </strong>: Double<br/>)</span></pre><p id="49df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4: </strong>让我们用6个方法创建一个控制器类。为了简单起见，这里我们不打算对请求参数进行严格的验证。</p><p id="6acf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从GET、POST、PUT和DELETE方法开始</p><blockquote class="jn jo jp"><p id="62bf" class="if ig jm ih b ii ij ik il im in io ip jq ir is it jr iv iw ix js iz ja jb jc hb bi translated">从数据库<br/> <a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">获取所有小工具的GET方法http://localhost:8888/API/gadgets/</a></p></blockquote><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="2636" class="kv kw hi kr b fi kx ky l kz la">@GetMapping(<strong class="kr hj">"/gadgets"</strong>)<br/><strong class="kr hj">fun </strong>fetchGadgets(): ResponseEntity&lt;List&lt;Gadget&gt;&gt; {<br/>    <strong class="kr hj">val </strong>gadgets = <strong class="kr hj">gadgetRepository</strong>.findAll()<br/>    <strong class="kr hj">if </strong>(gadgets.isEmpty()) {<br/>        <strong class="kr hj">return </strong>ResponseEntity&lt;List&lt;Gadget&gt;&gt;(HttpStatus.<em class="jm">NO_CONTENT</em>)<br/>    }<br/>    <strong class="kr hj">return </strong>ResponseEntity&lt;List&lt;Gadget&gt;&gt;(gadgets, HttpStatus.<em class="jm">OK</em>)<br/>}</span></pre><p id="35b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们使用“findall()”方法从表中检索所有小工具，并验证表中的记录是零还是多。</p><p id="18f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果表中有一个或多个小工具，我们将返回所有状态为200的记录(HttpStatus。<em class="jm">好的)。对于没有记录的表，我们返回204状态(HttpStatus。<em class="jm"> NO_CONTENT) </em></em></p><blockquote class="jn jo jp"><p id="efac" class="if ig jm ih b ii ij ik il im in io ip jq ir is it jr iv iw ix js iz ja jb jc hb bi translated">根据' gadgetId' <br/> <a class="ae jd" href="http://localhost:8888/api/gadgets/{id" rel="noopener ugc nofollow" target="_blank">获取小工具详细信息http://localhost:8888/API/gadgets/{ id</a>}</p></blockquote><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="97bd" class="kv kw hi kr b fi kx ky l kz la">@GetMapping(<strong class="kr hj">"/gadgets/{id}"</strong>)<br/><strong class="kr hj">fun </strong>fetchGadgetById(@PathVariable(<strong class="kr hj">"id"</strong>) gadgetId: Long): ResponseEntity&lt;Gadget&gt; {<br/>    <strong class="kr hj">val </strong>gadget = <strong class="kr hj">gadgetRepository</strong>.findById(gadgetId)<br/>    <strong class="kr hj">if </strong>(gadget.<em class="jm">isPresent</em>) {<br/>        <strong class="kr hj">return </strong>ResponseEntity&lt;Gadget&gt;(gadget.get(), HttpStatus.<em class="jm">OK</em>)<br/>    }<br/>    <strong class="kr hj">return </strong>ResponseEntity&lt;Gadget&gt;(HttpStatus.<em class="jm">NOT_FOUND</em>)<br/>}</span></pre><p id="b252" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们使用“findById(gadgetId)”方法检索基于“gadgetId”的特定小工具，并验证具有gadgetId的小工具是否可用。</p><p id="f6cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">方法返回状态为200的小工具详细信息(HttpStatus。<em class="jm"> OK)如果它可用，否则它返回</em> 204状态(HttpStatus。<em class="jm">未找到_ T10】</em></p><blockquote class="jn jo jp"><p id="2e4d" class="if ig jm ih b ii ij ik il im in io ip jq ir is it jr iv iw ix js iz ja jb jc hb bi translated">发布一个新的小工具<br/><a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/</a></p></blockquote><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="64f9" class="kv kw hi kr b fi kx ky l kz la">@PostMapping(<strong class="kr hj">"/gadgets"</strong>)<br/><strong class="kr hj">fun </strong>addNewGadget(@RequestBody gadget: Gadget, uri: UriComponentsBuilder): ResponseEntity&lt;Gadget&gt; {<br/>    <strong class="kr hj">val </strong>persistedGadget = <strong class="kr hj">gadgetRepository</strong>.save(gadget)<br/>    <strong class="kr hj">if </strong>(ObjectUtils.isEmpty(persistedGadget)) {<br/>        <strong class="kr hj">return </strong>ResponseEntity&lt;Gadget&gt;(HttpStatus.<em class="jm">BAD_REQUEST</em>)<br/>    }<br/>    <strong class="kr hj">val </strong>headers = HttpHeaders()<br/>    headers.setLocation(uri.path(<strong class="kr hj">"/gadget/{gadgetId}"</strong>).buildAndExpand(gadget.<strong class="kr hj">gadgetId</strong>).toUri());<br/>    <strong class="kr hj">return </strong>ResponseEntity(headers, HttpStatus.<em class="jm">CREATED</em>)<br/>}</span></pre><p id="8205" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们用“save(gadget)”方法创建一个新的小工具，并验证小工具是否创建成功。</p><p id="1b6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">方法在状态为200(http status)的响应标头中返回新创建的资源的URI。<em class="jm">好的)。在空响应方法的情况下，返回4 </em> 00状态(HttpStatus。<em class="jm"> NOT_FOUND) —这只是为了演示。</em></p><blockquote class="jn jo jp"><p id="f74f" class="if ig jm ih b ii ij ik il im in io ip jq ir is it jr iv iw ix js iz ja jb jc hb bi translated">PUT —通过gadgetId <br/> <a class="ae jd" href="http://localhost:8888/api/gadgets/{id" rel="noopener ugc nofollow" target="_blank">更新小工具详细信息http://localhost:8888/API/gadgets/{ id</a>}</p></blockquote><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="5393" class="kv kw hi kr b fi kx ky l kz la">@PutMapping(<strong class="kr hj">"/gadgets/{id}"</strong>)<br/><strong class="kr hj">fun </strong>updateGadgetById(@PathVariable(<strong class="kr hj">"id"</strong>) gadgetId: Long, @RequestBody gadget: Gadget): ResponseEntity&lt;Gadget&gt; {<br/>    <strong class="kr hj">return </strong>gadgetRepository.findById(gadgetId).map <strong class="kr hj">{ <br/></strong>gadgetDetails <strong class="kr hj">-&gt;<br/>        val </strong>updatedGadget: Gadget = gadgetDetails.copy(<br/>            gadgetCategory = gadget.gadgetCategory,<br/>            gadgetName = gadget.gadgetName,<br/>            gadgetPrice = gadget.gadgetPrice,<br/>            gagdetAvailability = gadget.gagdetAvailability<br/>        )<br/>        ResponseEntity(gadgetRepository.save(updatedGadget), HttpStatus.OK)<br/>    <strong class="kr hj">}</strong>.orElse(ResponseEntity&lt;Gadget&gt;(HttpStatus.INTERNAL_SERVER_ERROR))<br/>}</span></pre><p id="9947" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在更新记录之前，我们可以开始验证数据库中是否存在‘gadgetId’的小工具详细信息。成功获取后，更新小工具的详细信息并返回HttpStatus。OK作为回应。</p><p id="0413" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果请求的小工具细节在数据库中不存在，那么我们返回— HttpStatus。内部服务器错误</p><blockquote class="jn jo jp"><p id="29e1" class="if ig jm ih b ii ij ik il im in io ip jq ir is it jr iv iw ix js iz ja jb jc hb bi translated">通过gadgetId <br/> <a class="ae jd" href="http://localhost:8888/api/gadgets/{id" rel="noopener ugc nofollow" target="_blank">移除/删除小工具http://localhost:8888/API/gadgets/{ id</a>}</p></blockquote><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="807f" class="kv kw hi kr b fi kx ky l kz la">@DeleteMapping(<strong class="kr hj">"/gadgets/{id}"</strong>)<br/><strong class="kr hj">fun </strong>removeGadgetById(@PathVariable(<strong class="kr hj">"id"</strong>) gadgetId: Long): ResponseEntity&lt;Void&gt; {<br/>    <strong class="kr hj">val </strong>gadget = <strong class="kr hj">gadgetRepository</strong>.findById(gadgetId)<br/>    <strong class="kr hj">if </strong>(gadget.<em class="jm">isPresent</em>) {<br/>        <strong class="kr hj">gadgetRepository</strong>.deleteById(gadgetId)<br/>        <strong class="kr hj">return </strong>ResponseEntity&lt;Void&gt;(HttpStatus.<em class="jm">NO_CONTENT</em>)<br/>    }<br/>    <strong class="kr hj">return </strong>ResponseEntity&lt;Void&gt;(HttpStatus.<em class="jm">INTERNAL_SERVER_ERROR</em>)<br/>}</span></pre><p id="6807" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果请求的“gadgetId”的小工具详细信息存在，我们将调用“deleteById(gadgetId)”方法，并返回HttpStatus。<em class="jm">NO _含量。对于无效的“gadgetId ”,我们将返回— HttpStatus。<em class="jm">内部_服务器_错误(500状态)</em></em></p><blockquote class="jn jo jp"><p id="d4cd" class="if ig jm ih b ii ij ik il im in io ip jq ir is it jr iv iw ix js iz ja jb jc hb bi translated">删除所有小工具<br/><a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/</a></p></blockquote><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="1182" class="kv kw hi kr b fi kx ky l kz la">@DeleteMapping(<strong class="kr hj">"/gadgets"</strong>)<br/><strong class="kr hj">fun </strong>removeGadgets(): ResponseEntity&lt;Void&gt; {<br/>    <strong class="kr hj">gadgetRepository</strong>.deleteAll()<br/>    <strong class="kr hj">return </strong>ResponseEntity&lt;Void&gt;(HttpStatus.<em class="jm">OK</em>)<br/>}</span></pre><p id="518e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们调用“deleteAll()”方法从gadget表中删除所有Gadget细节，并返回200 status — HttpStatus。<em class="jm">确定</em></p><p id="2fdd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤5: </strong> JPA存储库:与H2数据库交互</p><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="071c" class="kv kw hi kr b fi kx ky l kz la"><strong class="kr hj">package </strong>com.shasr.springbootkotlingadgetapp.repository<br/><br/><strong class="kr hj">import </strong>com.shasr.springbootkotlingadgetapp.model.Gadget<br/><strong class="kr hj">import </strong>org.springframework.data.jpa.repository.JpaRepository<br/><strong class="kr hj">import </strong>org.springframework.stereotype.Repository<br/><br/>@Repository<br/><strong class="kr hj">interface </strong>GadgetRepository : JpaRepository&lt;Gadget, Long&gt;</span></pre><p id="7aa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个简单的存储库接口来对Gadget表执行必要的操作。<gadget long="">表示我们引用的实体名称和小工具实体中的主键类型(在外部情况下— gagdetId类型)</gadget></p><p id="b8bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Step-6 </strong>:我们可以在application.yml中配置H2数据库配置细节，如下图。</p><pre class="jf jg jh ji fd kq kr ks kt aw ku bi"><span id="179f" class="kv kw hi kr b fi kx ky l kz la"><em class="jm">## H2 Configuration<br/></em><strong class="kr hj">spring</strong>:<br/>  <strong class="kr hj">h2</strong>:<br/>    <strong class="kr hj">console</strong>:<br/>      <strong class="kr hj">enabled</strong>: true<br/>      <strong class="kr hj">path</strong>: /gadget-console<br/>      <strong class="kr hj">settings</strong>:<br/>        <strong class="kr hj">trace</strong>: false<br/>        <strong class="kr hj">web-allow-others</strong>: false<br/>  <strong class="kr hj">datasource</strong>:<br/>    <strong class="kr hj">url</strong>: jdbc:h2:mem:gadget-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE<br/>    <strong class="kr hj">username</strong>: gadgetadmin<br/>    <strong class="kr hj">password</strong>: gadgetpwd<br/>  <strong class="kr hj">jpa</strong>:<br/>    <strong class="kr hj">show-sql</strong>: true<br/>    <strong class="kr hj">hibernate</strong>:<br/>      <strong class="kr hj">ddl-auto</strong>: update<br/>    <strong class="kr hj">properties</strong>:<br/>      <strong class="kr hj">hibernate</strong>:<br/>        <strong class="kr hj">dialect</strong>: org.hibernate.dialect.H2Dialect<br/>        <strong class="kr hj">use_sql_comments</strong>: true<br/>        <strong class="kr hj">format_sql</strong>: true</span></pre><p id="1e73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们从主类运行应用程序，我们可以注意到用如下结构创建的表“GADGET ”(可以在控制台上验证)</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lc"><img src="../Images/99e36338f4f017a725ba21e40cb13e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QJ9nZzJmvILteH_sQT__8Q.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ld"><img src="../Images/f197a49b4a99891b21b7faa72b0229ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*P7SFk0tc8DPrexsEHNYlbQ.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">H2数据库</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es le"><img src="../Images/5ccaf0f19c4922f90a9c4f35610b0508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*3m3XcgvpY4ucjhT-UgGVAQ.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">在H2数据库中创建的小工具表</figcaption></figure><p id="96a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们启动服务器并验证应用程序是否按预期运行。</p><p id="17e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">帖子</strong>:<a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lf"><img src="../Images/810fc088e796fda55bc5e5563c67ba09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t1ai5jm5Ob70s2oEZPXL8Q.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lg"><img src="../Images/212ee53d54d51829c57299e98d464a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YF-iVK3gUfwdLvYWdnOCEA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:kot Lin——API测试后</figcaption></figure><p id="e668" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">GET</strong>:ALL<a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lh"><img src="../Images/18f05f0f3fa1a773d956954de87b37cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFfYApIa_RR54PFFsTUSpg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:Kotlin —获取所有API测试</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es li"><img src="../Images/cad6111577fc2aa9e96895653a86f05b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o6YqR4oLwxXGtMPO0cN33A.png"/></div></div></figure><p id="5540" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">GET</strong>:By GadgetId<a class="ae jd" href="http://localhost:8888/api/gadgets/2" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/2</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lj"><img src="../Images/d9fe2d592926a1e78ed7d5c565275bce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0f7215B3iZwtv5KXLB7_gg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:Kotlin —获取API测试</figcaption></figure><p id="2bc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">放</strong>:<a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/</a>2</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lj"><img src="../Images/b4ba6eb12eee8387ab91e98c82fb2b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZNrZIG4hcRdBbevIh9hv8g.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:kot Lin——进行API测试</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lf"><img src="../Images/92c2cc67cfb066cc314f656303b5c769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KK4Ky4v2dz63KZBNGPe4jg.png"/></div></div></figure><p id="f6eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">GET</strong>:By GadgetId<a class="ae jd" href="http://localhost:8888/api/gadgets/2" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/2</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es li"><img src="../Images/2039cef9dcd0d11812ab8f31099f13cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AkDHFcrk4SoyodixqQ8h6Q.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:Kotlin —获取API测试</figcaption></figure><p id="7c62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">删除操作之前的小工具表数据</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lk"><img src="../Images/7c3910b6af94302cb08e68f17b7dd68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5tpEWUVGu_3pzHoWi8JpnA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">验证小工具表以了解小工具详细信息</figcaption></figure><p id="8a59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">删除</strong>:<a class="ae jd" href="http://localhost:8888/api/gadgets/1" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/1</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es ll"><img src="../Images/5e1adb6791d8d53129003a5519d17662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xY5saTKb3L_mSAtneyjZJQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:Kotlin —删除API测试</figcaption></figure><p id="420a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> GET </strong>:所有小工具→<a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/Gadgets/</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lm"><img src="../Images/180014289d601082f6a6e55f08a0e4d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1rnfqUyAwv-VndOxbzQvQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:Kotlin —获取API测试</figcaption></figure><p id="fb3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">删除所有</strong>:<a class="ae jd" href="http://localhost:8888/api/gadgets/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/API/gadgets/</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es ln"><img src="../Images/16f11e2a445306a2ed9e3be79d122202.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b5uoSSLFvePSkayvPZt-aw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">例如:删除API —删除所有小工具</figcaption></figure><p id="6e84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GitHub:</p><div class="lo lp ez fb lq lr"><a href="https://github.com/shashirl9/gadget-gallery-kotlin-springboot-mysql" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">shashirl 9/gadget-gallery-kotlin-spring boot-MySQL</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">简单的休息API与科特林，Spring Boot和MySQL-shashirl 9/小工具-画廊-科特林-springboot-mysql</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">github.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf jk lr"/></div></div></a></div><p id="4f7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">概要:</strong></p><p id="ef36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们用科特林和Spring Boot创建并测试了一个简单的Gadget gallery应用程序，它公开了6个API。它允许对小工具执行创建、检索、更新和删除操作。</p><p id="af5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jm">接下来是什么</em> </strong> …</p><ul class=""><li id="d914" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated"><strong class="ih hj"> Part-2 </strong> : <a class="ae jd" href="https://techcolors.medium.com/documenting-spring-boot-rest-api-with-openapi-3-0-220a5103f0a5" rel="noopener">用OpenAPI 3.0文档化Spring Boot REST API</a></li><li id="5c76" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><strong class="ih hj"> Part-3 </strong> : <a class="ae jd" rel="noopener" href="/nerd-for-tech/create-mysql-instance-on-redhat-openshift-container-platform-ocp-482a7c3e6cb2">在Redhat Openshift容器平台(OCP)上创建MySQL实例</a></li><li id="3f82" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><strong class="ih hj">第4部分:</strong>将Spring Boot应用程序部署到OCP集群，并连接到MySQL实例(步骤3)(进行中)</li></ul><p id="645a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考文献</strong>:</p><p id="eaca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://kotlinlang.org/" rel="noopener ugc nofollow" target="_blank">https://kotlinlang.org/</a>T10<a class="ae jd" href="https://spring.io/guides/tutorials/spring-boot-kotlin/" rel="noopener ugc nofollow" target="_blank">https://spring.io/guides/tutorials/spring-boot-kotlin/</a></p></div></div>    
</body>
</html>