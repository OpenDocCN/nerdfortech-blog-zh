<html>
<head>
<title>AWS Private Link — An Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS专用链接—简介</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/aws-private-link-an-introduction-e017fe1ca52e?source=collection_archive---------2-----------------------#2020-12-24">https://medium.com/nerd-for-tech/aws-private-link-an-introduction-e017fe1ca52e?source=collection_archive---------2-----------------------#2020-12-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if"><p id="0377" class="ig ih hi bd ii ij ik il im in io ip dx translated">无需穿越互联网即可从专用网络使用服务。</p></blockquote><p id="7357" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ip hb bi translated">这就是私有链接的核心。它允许VPC私有子网中的应用程序连接到不在当前VPC中的服务，而无需离开AWS网络。VPC对等允许我们做同样的事情，但是它建立的连接范围太大。同样，对等也有不重叠CIDRs的限制。专用链接允许我们只连接我们需要的服务。它在两端(即服务提供商端和消费者端)提供控制。此外，专用链路不实施非重叠CIDRs。</p><blockquote class="if"><p id="34f4" class="ig ih hi bd ii ij jn jo jp jq jr ip dx translated">访问我的服务而不是我的VPC</p></blockquote><p id="7376" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ip hb bi translated">在下图中，我们可以看到私有子网中的资源和SNS服务API之间的连接。我们使用的是SNS服务端点，内部由专用链路供电。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/758b74ce8f2b305a31fb7401455ae221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oRogBzLwIXbpH7qImhnuNQ.png"/></div></div></figure><p id="8cef" class="pw-post-body-paragraph iq ir hi is b it ke iv iw ix kf iz ja jb kg jd je jf kh jh ji jj ki jl jm ip hb bi translated">在上图中，我们有VPC端点(接口和网关)，这是一个逻辑网络组件，是ENI的集合。每当我们调用服务时，+2 DNS解析器会覆盖服务名并返回ENI的私有ip。在我写作时，AWS通过interface endpoint支持90多种服务。</p><p id="7faf" class="pw-post-body-paragraph iq ir hi is b it ke iv iw ix kf iz ja jb kg jd je jf kh jh ji jj ki jl jm ip hb bi translated">在下图中，我们有一个消费者VPC和一个服务提供商VPC(假设是一个SaaS提供商)。这里，服务提供者中的资源使用VPC端点和端点服务向消费者公开其资源。还要注意我们使用的是NLB。我们只能使用NLB作为基于TCP的专用链路。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kj"><img src="../Images/78d4a78ada7012a0961c7c41c068ea94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eE945iZrRxUiYd8S0GLMlQ.png"/></div></div></figure><p id="6272" class="pw-post-body-paragraph iq ir hi is b it ke iv iw ix kf iz ja jb kg jd je jf kh jh ji jj ki jl jm ip hb bi translated">如果您希望将基于ALB的应用程序公开为专用链接的服务。你需要在它前面放一个NLB。→ NLB → ALB →听众</p><blockquote class="if"><p id="5473" class="ig ih hi bd ii ij jn jo jp jq jr ip dx translated">专用链路是一种支持消费者发起的、基于TCP的单向状态流的技术</p></blockquote><p id="b668" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ip hb bi translated">驱动专用链路的技术是超平面ENI。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kk"><img src="../Images/6402fea9970f6e9b66cd29841d49b77a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*067iHUjBurtcb1xPCUoaxQ.png"/></div></div></figure><ol class=""><li id="8259" class="kl km hi is b it ke ix kf jb kn jf ko jj kp ip kq kr ks kt bi translated">创造你的NLB</li><li id="63f5" class="kl km hi is b it ku ix kv jb kw jf kx jj ky ip kq kr ks kt bi translated">转到端点服务，单击<strong class="is hj">创建端点服务</strong>，选择在上一步中创建的NLB选择子网并创建。</li><li id="6972" class="kl km hi is b it ku ix kv jb kw jf kx jj ky ip kq kr ks kt bi translated">转到端点，点击<strong class="is hj">创建端点</strong>，选择<strong class="is hj">按名称查找服务</strong>，输入上一步创建的端点服务名称，点击验证。</li><li id="d5d9" class="kl km hi is b it ku ix kv jb kw jf kx jj ky ip kq kr ks kt bi translated">切换到端点连接并接受连接请求。</li></ol><h2 id="78fe" class="kz la hi bd lb lc ld le lf lg lh li lj jb lk ll lm jf ln lo lp jj lq lr ls lt bi translated">表演</h2><p id="01d8" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm ip hb bi translated">专用链路提供10 Gbps的持续吞吐量和高达40Gbps的突发容量。</p><p id="e987" class="pw-post-body-paragraph iq ir hi is b it ke iv iw ix kf iz ja jb kg jd je jf kh jh ji jj ki jl jm ip hb bi translated">注意:在多AZ资源中使用端点服务时，请注意跨区域负载平衡。</p><h2 id="d8d5" class="kz la hi bd lb lc ld le lf lg lh li lj jb lk ll lm jf ln lo lp jj lq lr ls lt bi translated">利益</h2><p id="6925" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm ip hb bi translated">安全。由于数据包从不穿过互联网，中间人攻击的机会就减少了。</p><p id="e1eb" class="pw-post-body-paragraph iq ir hi is b it ke iv iw ix kf iz ja jb kg jd je jf kh jh ji jj ki jl jm ip hb bi translated">它支持类似IAM的端点策略。使用它您可以控制谁可以在什么条件下访问什么。</p><pre class="jt ju jv jw fd lz ma mb mc aw md bi"><span id="f459" class="kz la hi ma b fi me mf l mg mh">{<br/>  "Statement": [<br/>    {<br/>      "Action": ["sns:Publish"],     <br/>      "Effect": "Allow",     <br/>      "Resource": "arn:aws:sns:us-east-2:123456789012:YourTopic"<br/>      "Principal": {<br/>        "AWS": "arn:aws:iam:123456789012:user/AllowedUserName"<br/>       }   <br/>    }<br/>  ] <br/>}</span></pre><p id="5b34" class="pw-post-body-paragraph iq ir hi is b it ke iv iw ix kf iz ja jb kg jd je jf kh jh ji jj ki jl jm ip hb bi translated">它还支持安全组。因此，作为提供商，您可以控制服务的内容。</p><p id="8cea" class="pw-post-body-paragraph iq ir hi is b it ke iv iw ix kf iz ja jb kg jd je jf kh jh ji jj ki jl jm ip hb bi translated">在PrivateLink上进行的VMWare炭黑性能测试显示，延迟降低了70%。</p><h2 id="70cd" class="kz la hi bd lb lc ld le lf lg lh li lj jb lk ll lm jf ln lo lp jj lq lr ls lt bi translated">局限性:</h2><p id="7465" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm ip hb bi translated">端点是区域性的。服务和VPC应该在同一地区。</p><h2 id="f94c" class="kz la hi bd lb lc ld le lf lg lh li lj jb lk ll lm jf ln lo lp jj lq lr ls lt bi translated">用例</h2><p id="667b" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm ip hb bi translated">共享服务架构。创建一个单独的帐户，并在那里保存所有端点。集中管理。允许其他帐户通过此帐户终结点使用服务。</p></div></div>    
</body>
</html>