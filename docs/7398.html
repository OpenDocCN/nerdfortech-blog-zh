<html>
<head>
<title>React with Typescript series (Charity Web App) — Deploying to Github pages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Typescript 系列(慈善网络应用程序)作出反应—部署到 Github 页面</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/react-with-typescript-series-charity-web-app-deploying-to-github-pages-ab86a1888fab?source=collection_archive---------0-----------------------#2022-10-20">https://medium.com/nerd-for-tech/react-with-typescript-series-charity-web-app-deploying-to-github-pages-ab86a1888fab?source=collection_archive---------0-----------------------#2022-10-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="96b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嘿，伙计们，在上一个教程中，我们用一个漂亮的表单完成了前端部分(带有保存功能)。</p><div class="jd je ez fb jf jg"><a href="https://billa-code.medium.com/react-with-typescript-series-charity-web-app-form-state-management-a411552097ff" rel="noopener follow" target="_blank"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">用 Typescript 系列(慈善 Web 应用程序)作出反应—表单状态管理</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">大家好，在我们之前的教程中，我们学习了如何使用高阶组件创建。</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">billa-code.medium.com</p></div></div><div class="jp l"><div class="jq l jr js jt jp ju jv jg"/></div></div></a></div><p id="aaec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在集成后端更改之前，在本教程中，我将向您展示如何使用 Github 操作将这个 react 应用程序部署到 Github 页面。通常我们可以创建另一个名为 gh-pages 的分支，然后在那里添加我们的构建代码，并在 Github 中获得一个运行的 UI。但在本教程中，我会给你一个全自动的方法来做到这一点。但是要记住的最重要的事情是去你的 repo 并从那里启用 Github 操作。如果没有，您将看不到它。</p><p id="0c5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不会深入到什么是 Github 动作或者我们如何创建。因为有成千上万的资源可供你参考。在这里，我将向您介绍我实现的操作，并给出我们以这种方式使用它的原因。首先在名为的文件夹中创建一个名为 page_build.yml 的文件。github/workflows/。在那里添加此代码。(如果您在 repo 中进入 Github actions 并点击 new workflow，也可以从那里创建)。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="5a54" class="kf kg hi kb b fi kh ki l kj kk">name: React Build<br/><br/>on:<br/>  pull_request:<br/>    branches: [ "main" ]<br/>    <br/>env:<br/>  CI: false<br/><br/>jobs:<br/>  build:<br/>    runs-on: ubuntu-latest<br/>    environment:<br/>      name: github-pages<br/>      url: ${{ steps.deployment.outputs.page_url }}<br/>    permissions:<br/>      contents: 'read'<br/>      id-token: 'write'<br/>      pages: 'write'<br/>      actions: 'write'<br/>      checks: 'write'<br/>      deployments: 'write'<br/>    strategy:<br/>      matrix:<br/>        node-version: [18.x]<br/>    <br/>    steps:<br/>    - uses: actions/checkout@v3<br/><br/>    - name: Use Node.js ${{ matrix.node-version }}<br/>      uses: actions/setup-node@v3<br/>      with:<br/>        node-version: ${{ matrix.node-version }}<br/><br/>    - name: Build<br/>      run: |<br/>        npm install<br/>        npm run build<br/>        <br/>    - name: Setup Pages<br/>      uses: actions/configure-pages@v2<br/>    - name: Upload artifact<br/>      uses: actions/upload-pages-artifact@v1<br/>      with:<br/>        <em class="kl"># Upload build directory content<br/>        </em>path: 'build/'<br/>    - name: Deploy to GitHub Pages<br/>      id: deployment<br/>      uses: actions/deploy-pages@v1<br/>      env:  <br/>        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</span></pre><p id="0f68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一个是显而易见的配置。这是动作的名称。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="23f6" class="kf kg hi kb b fi kh ki l kj kk">name: React Build</span></pre><p id="377b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我们有触发器。我们可以定义这应该在什么情况下触发。在这种情况下，我们将它定义为在主分支上创建拉请求时触发。如果你想在推送中触发它。那么你也可以加上这样的东西。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="3cad" class="kf kg hi kb b fi kh ki l kj kk">on:<br/> <strong class="kb hj">push:<br/>  branches: [ "main" ] </strong> <br/> pull_request:<br/>  branches: [ "main" ]</span></pre><p id="88f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们有了整个动作的环境变量。这里 CI 被设为 false，否则它会将警告视为错误，构建将会失败。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="2cbe" class="kf kg hi kb b fi kh ki l kj kk">env:<br/>  CI: false</span></pre><p id="4584" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们有一组正在运行的作业。我已经把所有的东西都放在构建工作中了。如果你愿意，你可以把它分开。在构建作业下，我们的第一个配置是运行环境。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="0c78" class="kf kg hi kb b fi kh ki l kj kk">runs-on: ubuntu-latest</span></pre><p id="3424" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来是 Github 回购的环境。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="3335" class="kf kg hi kb b fi kh ki l kj kk">environment:<br/>  name: github-pages<br/>  url: ${{ steps.deployment.outputs.page_url }}</span></pre><p id="4945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们必须添加权限。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="0432" class="kf kg hi kb b fi kh ki l kj kk">permissions:<br/>  contents: 'read'<br/>  id-token: 'write'<br/>  pages: 'write'<br/>  actions: 'write'<br/>  checks: 'write'<br/>  deployments: 'write'</span></pre><p id="8cfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来最重要的是步骤。这些第一步签出节点来运行和设置环境。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="2c9d" class="kf kg hi kb b fi kh ki l kj kk">- uses: actions/checkout@v3<br/><br/>- name: Use Node.js ${{ matrix.node-version }}<br/>  uses: actions/setup-node@v3<br/>  with:<br/>    node-version: ${{ matrix.node-version }}</span></pre><p id="a816" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们构建代码</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="f42c" class="kf kg hi kb b fi kh ki l kj kk">- name: Build<br/>  run: |<br/>    npm install<br/>    npm run build</span></pre><p id="9e8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一组步骤中，我们在复制构建文件夹内容后部署到 Github 页面。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="e584" class="kf kg hi kb b fi kh ki l kj kk">- name: Setup Pages<br/>  uses: actions/configure-pages@v2<br/>- name: Upload artifact<br/>  uses: actions/upload-pages-artifact@v1<br/>  with:<br/>    <em class="kl"># Upload build directory content<br/>    </em>path: 'build/'<br/>- name: Deploy to GitHub Pages<br/>  id: deployment<br/>  uses: actions/deploy-pages@v1</span></pre><p id="ac26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后我们有了 GITHUB_TOKEN env secret。这是必须的。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="3d54" class="kf kg hi kb b fi kh ki l kj kk">env:  <br/>  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</span></pre><p id="ea14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是我们所需要的。现在，对于我的回购以下是这个将被部署到的 URL。</p><div class="jd je ez fb jf jg"><a href="https://debilla.github.io/serendib-scholarship-ui/" rel="noopener  ugc nofollow" target="_blank"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">React 应用</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">使用 create-react-app 创建的网站</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">debilla.github.io</p></div></div></div></a></div><p id="e115" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如果你现在去这个网址。您将得到一个 404 错误。原因是我们没有为 React 应用程序正确定义主页 URL。它会将 URL 的第一部分视为 href 基根。要解决这个问题，我们必须更改 package.json 文件。新的应该是这样的。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="3ddb" class="kf kg hi kb b fi kh ki l kj kk">{<br/>  "name": "serendib-ui",<br/>  "version": "0.1.0",<br/>  "private": true,<br/>  <strong class="kb hj">"homepage": "https://debilla.github.io/serendib-scholarship-ui",</strong><br/>  "dependencies": {<br/>    "@testing-library/jest-dom": "^5.16.4",<br/>    "@testing-library/react": "^13.1.1",<br/>    "@testing-library/user-event": "^13.5.0",<br/>    "@types/jest": "^27.4.1",<br/>    "@types/node": "^16.11.31",<br/>    "@types/react": "^18.0.8",<br/>    "@types/react-dom": "^18.0.0",<br/>    "bootstrap": "^5.1.3",<br/>    "react": "^18.1.0",<br/>    "react-bootstrap": "^2.3.1",<br/>    "react-data-grid": "7.0.0-beta.15",<br/>    "react-dom": "^18.1.0",<br/>    "react-scripts": "5.0.1",<br/>    "typescript": "^4.6.3",<br/>    "web-vitals": "^2.1.4"<br/>  },<br/>  "scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>  "eslintConfig": {<br/>    "extends": [<br/>      "react-app",<br/>      "react-app/jest"<br/>    ]<br/>  },<br/>  "browserslist": {<br/>    "production": [<br/>      "&gt;0.2%",<br/>      "not dead",<br/>      "not op_mini all"<br/>    ],<br/>    "development": [<br/>      "last 1 chrome version",<br/>      "last 1 firefox version",<br/>      "last 1 safari version"<br/>    ]<br/>  }<br/>}</span></pre><p id="b05c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果你创建一个 PR 到主分支，动作将被触发，你将在 Github 页面看到部署的 UI 应用程序。快乐的编码家伙:p。下次我们将会见一个方法来创建这个应用程序的后端。</p></div></div>    
</body>
</html>