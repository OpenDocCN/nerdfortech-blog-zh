<html>
<head>
<title>Daily progress, June 11, 2021: Sleeping Guard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">每日进展2021年6月11日:沉睡的守卫</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/daily-progress-june-11-2021-sleeping-guard-eb7c336fef12?source=collection_archive---------40-----------------------#2021-06-11">https://medium.com/nerd-for-tech/daily-progress-june-11-2021-sleeping-guard-eb7c336fef12?source=collection_archive---------40-----------------------#2021-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3b80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天的工作是将睡觉的保安过场动画整合到隐形迷你游戏中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/347e63dec9ece46590b57c56f6e40951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u6AlK3XLTrzvJRpCEnmxWg.png"/></div></div></figure><p id="3f9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在睡觉的警卫桌子周围有一个名为level collider/Grab _ Cut _ Scene _ Zone的箱子碰撞器，当Darren走进去时就会触发。与之前的其他触发脚本一样，这是一个简单的例子，为过场动画创建一个占位符，然后检查_Player是否与碰撞盒发生碰撞。当然，如果没有刚体，我们就需要一个。</p><p id="bfbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们创建将附加到Grab_Cut_Scene_Zone的脚本:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/c539c7d1cc34b0ed1a0cec92a5980d99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lvpvpPbVK-EqKqlKVpd7FA.png"/></div></div></figure><p id="42f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将通过检查器将实际的过场动画拖动到支架中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/bb6a7e279359e7b6cb8f38dfde465b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SH3_wO6zwSeKHseszxE3Gw.gif"/></div></div></figure><p id="5673" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的，让我们检查一下它是否工作…</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/984ee235f3ff62a8c3ae1b73d4e8cfbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/1*IwfvELyrQzAFExwmIYQnbw.gif"/></div></figure><p id="f524" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">哇哦。那不行！当过场动画达伦在玩的时候，游戏性达伦还在那里！游戏守卫也在那里，让我们让他们消失一会儿。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/cf347837c35e45e6188cb4b8c2f9bbca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*XN6knQG6VaiKXxpAwlCtcA.gif"/></div></div></figure><p id="36d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过场动画时间线中，创建3个新的激活轨迹，一个用于Darren，另一个用于警卫，还有一个用于过场动画本身。我们需要一种方法让过场动画一旦结束就停止，还有什么更好的方法呢？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/9cf884cd572dd323621fe385a487052f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-HxQcG8cDuHyoKaw2DU9iA.gif"/></div></div></figure><p id="2eef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于过场动画本身，它是360帧，所以我们将它激活到359帧，并在最后一帧停用。对于沉睡的守卫和玩家，只需将两者都推到最后，并在最后将其缩短到几帧，这样它们将在我们渐变到黑色后激活(我们稍后会这样做)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/e9a159d1626cacb2cfe01b8405a86068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gPW8ptPf21MnktDJI0aNTA.gif"/></div></div></figure><p id="b069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们在最后添加了一个黑色的淡入淡出，这样我们可以让我们的游戏资产再次安全地出现。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/68ab4aaa65b5e00d1def499a44f4346a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*r_R1qgGjNBBU--yGYXYLLw.gif"/></div></div></figure><p id="0bdb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于某种原因，激活轨道无法在游戏模式下工作。当我清理时间线时，达伦会消失，但我一玩游戏，他就会出现，因为他的克隆人在偷守卫卡。当我在Linux上开发Unity时，我觉得我必须原谅这个引擎，因为它是一个正式的Windows程序。我想我可能很快就会勉强重装windows 10了。无论如何，我终于把事情掌握在自己手中，通过创建句柄并在协程中暂时禁用它们，手动关闭了达伦和守卫。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/4474b75662b1db250afc0b159e3dc31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKkrCWSmrjCq-7lSo1qavg.png"/></div></div></figure><p id="50e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个出现的问题是在过场动画停止播放后，摄像机不能回到原来的位置。解决方案是创建一个新的虚拟摄像机，其位置和旋转与当前的切换摄像机相同，并将其放置在场景结束前的一帧。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/4205ccea207771d06e7f40d3f607ae5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z7EPG6Vs9iI6UonrJI_UNQ.png"/></div></div></figure><p id="2bdf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一个问题，NavMesh移动时出现错误，这是因为过场动画摄像机仍在使用，而不是主摄像机。解决方案是为主过场动画添加另一个激活轨道，并在结束前一帧将其停用，但因为我在Grab_Cut_Scene_Zone级别碰撞器中手动禁用了过场动画，所以问题最初没有出现！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jv"><img src="../Images/cfe84d85eac50ce92e427270b84d3587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/1*wyh7v_iAnc-GWE0S_G0FGg.gif"/></div></figure><p id="5fbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">明天，我们将讨论如何创建管理器类！</p></div></div>    
</body>
</html>