<html>
<head>
<title>MAUI — Native Mobile Location Updates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">毛伊岛—本地移动位置更新</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/maui-native-mobile-location-updates-444939dff3af?source=collection_archive---------0-----------------------#2022-11-20">https://medium.com/nerd-for-tech/maui-native-mobile-location-updates-444939dff3af?source=collection_archive---------0-----------------------#2022-11-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9a93" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">几行代码中的原生 Android 和 iOS 位置更新</h2></div><p id="2111" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">欢迎回来伙计们👋。在今天的《如何烹饪毛伊岛》一集中，我们将看看原生的 Android &amp; iOS 实现，而不是使用毛伊岛的<code class="du jt ju jv jw b">IGeolocation</code>接口。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es jx"><img src="../Images/36fec33d8ef1e08dd3b94ad032ba0dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/1*X3ZvToEt1kWS_14QBKmrsQ.gif"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">葡萄酒供应调查</figcaption></figure><p id="bc81" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，这里的权限并不新鲜；我们需要地理位置毛伊岛文档中显示的所有内容:</p><div class="kj kk ez fb kl km"><a href="https://learn.microsoft.com/en-us/dotnet/maui/platform-integration/device/geolocation?view=net-maui-7.0&amp;tabs=android" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab dw"><div class="ko ab kp cl cj kq"><h2 class="bd hj fi z dy kr ea eb ks ed ef hh bi translated">地理定位。网毛伊岛</h2><div class="kt l"><h3 class="bd b fi z dy kr ea eb ks ed ef dx translated">本文描述了如何使用？NET 多平台 App UI(。NET MAUI)I 地理位置接口。这个…</h3></div><div class="ku l"><p class="bd b fp z dy kr ea eb ks ed ef dx translated">learn.microsoft.com</p></div></div><div class="kv l"><div class="kw l kx ky kz kv la kd km"/></div></div></a></div><p id="03f3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步是决定我们希望如何实施它:</p><ul class=""><li id="da94" class="lb lc hi iz b ja jb jd je jg ld jk le jo lf js lg lh li lj bi translated">我们可以在每个平台上使用接口和实现。</li></ul><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es lk"><img src="../Images/df49d36d67177b0d4e6075e9880a2249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*Qe4OJJ_IRE0LhVIHXpESMQ.png"/></div></figure><ul class=""><li id="640b" class="lb lc hi iz b ja jb jd je jg ld jk le jo lf js lg lh li lj bi translated">或者我们可以使用没有接口的分部类。在这里，我们也可以将我们的实现拆分到不同的平台文件夹中，甚至是带有平台文件扩展名的同一个文件夹中。</li></ul><div class="jy jz ka kb fd ab cb"><figure class="ll kc lm ln lo lp lq paragraph-image"><img src="../Images/c29dae55bbb73fa7f9a3d759ffe631f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*Y93xXAaLmRA05OSpwm68_g.png"/></figure><figure class="ll kc lr ln lo lp lq paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><img src="../Images/c2de9ebbd555fb60e28a28255204468b.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*Typ4Gd5t3N52bPM7EgJTdg.png"/></div></figure></div><p id="34de" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，如果我们只有一些 Android 和 iOS 文件夹的服务，看起来有些过头了。但是如果我们要有五个或更多的服务，这是必须的，因为这个文件夹太大了，不便于导航。</p><p id="bd73" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，我不建议对每个平台上需要几行以上的代码使用<code class="du jt ju jv jw b">#if ANDROID and #if IOS</code>,因为它很快变得难以维护。</p><p id="ead4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的解决方案中，我们将在服务文件夹中使用<code class="du jt ju jv jw b">partial service</code>,将 Android 和 iOS 文件分开。</p></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><h1 id="9b72" class="md me hi bd mf mg mh mi mj mk ml mm mn io mo ip mp ir mq is mr iu ms iv mt mu bi translated">位置服务的共享逻辑</h1><p id="326a" class="pw-post-body-paragraph ix iy hi iz b ja mv ij jc jd mw im jf jg mx ji jj jk my jm jn jo mz jq jr js hb bi translated">这里没什么复杂的；在我们的例子中，我希望得到服务更改的通知，比如提供者状态或初始化，以及获得单独的事件位置更新。</p><figure class="jy jz ka kb fd kc"><div class="bz dy l di"><div class="na nb l"/></div></figure></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><h1 id="82e7" class="md me hi bd mf mg mh mi mj mk ml mm mn io mo ip mp ir mq is mr iu ms iv mt mu bi translated">位置服务的 Android 实现</h1><p id="875b" class="pw-post-body-paragraph ix iy hi iz b ja mv ij jc jd mw im jf jg mx ji jj jk my jm jn jo mz jq jr js hb bi translated">我们将请求对<code class="du jt ju jv jw b">LocationWhenInUse</code>的许可，如果未获批准，我们将发送通知。此外，我们将检查设备上的<code class="du jt ju jv jw b">Location</code>是否为<code class="du jt ju jv jw b">Enabled</code>，以及<code class="du jt ju jv jw b">GPS Provider</code>是否为<code class="du jt ju jv jw b">Available</code>。</p><figure class="jy jz ka kb fd kc"><div class="bz dy l di"><div class="na nb l"/></div></figure></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><h1 id="1195" class="md me hi bd mf mg mh mi mj mk ml mm mn io mo ip mp ir mq is mr iu ms iv mt mu bi translated">位置服务的 iOS 实现</h1><p id="f42c" class="pw-post-body-paragraph ix iy hi iz b ja mv ij jc jd mw im jf jg mx ji jj jk my jm jn jo mz jq jr js hb bi translated">与 Android 实现非常相似，但这里我们有一个可选的<code class="du jt ju jv jw b">RequestAlwaysAuthorization</code>行，如果我们不打算在你的应用程序在后台时获取位置更新，这是不必要的。</p><figure class="jy jz ka kb fd kc"><div class="bz dy l di"><div class="na nb l"/></div></figure></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><p id="7873" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">没错，就是它！一个简单的解决方案是展示我们可以使用什么，以及如何针对基本场景进行设置。是的，它在每个平台下都有一些更令人兴奋的东西，但是你正在使用的 knowing 类，你可以在苹果和谷歌文档中找到所有信息。</p><p id="1757" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">链接到包含所有源代码的回购:</p><div class="kj kk ez fb kl km"><a href="https://github.com/bbenetskyy/MAUI-LocationUpdates" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab dw"><div class="ko ab kp cl cj kq"><h2 class="bd hj fi z dy kr ea eb ks ed ef hh bi translated">GitHub-bbenetskyy/MAUI-Location Updates:原生 iOS 和 Android 位置更新</h2><div class="kt l"><h3 class="bd b fi z dy kr ea eb ks ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ku l"><p class="bd b fp z dy kr ea eb ks ed ef dx translated">github.com</p></div></div><div class="kv l"><div class="nc l kx ky kz kv la kd km"/></div></div></a></div><p id="e058" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae nd" href="https://twitter.com/bbenetskyy" rel="noopener ugc nofollow" target="_blank">https://twitter.com/bbenetskyy</a></p><div class="kj kk ez fb kl km"><a href="https://www.buymeacoffee.com/bbenetskyy" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab dw"><div class="ko ab kp cl cj kq"><h2 class="bd hj fi z dy kr ea eb ks ed ef hh bi translated">Bohdan Benetskyi 正在为 Xamarin 创建高级 CSS 渐变，在会议上发言</h2><div class="kt l"><h3 class="bd b fi z dy kr ea eb ks ed ef dx translated">Bohdan 是 Rzeszow 的 Xamarin 软件开发人员，是 Rzeszow &amp; Cracow 的 Xamarin 本地活动的共同组织者，本地 CSS…</h3></div><div class="ku l"><p class="bd b fp z dy kr ea eb ks ed ef dx translated">www.buymeacoffee.com</p></div></div><div class="kv l"><div class="ne l kx ky kz kv la kd km"/></div></div></a></div></div></div>    
</body>
</html>