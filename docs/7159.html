<html>
<head>
<title>React with Typescript series (Charity Web App) — Components Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React with Typescript 系列(慈善网络应用)-组件开发</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/react-with-typescript-series-charity-web-app-components-development-777632dfda70?source=collection_archive---------2-----------------------#2022-08-13">https://medium.com/nerd-for-tech/react-with-typescript-series-charity-web-app-components-development-777632dfda70?source=collection_archive---------2-----------------------#2022-08-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c1f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗨，伙计们，在这个 React with typescript 系列中，到目前为止，我们已经创建了初始应用程序，然后在上一个教程中，我们为 UI 创建了一些线框设计。</p><div class="jd je ez fb jf jg"><a href="https://billa-code.medium.com/react-basic-series-charity-web-app-planning-the-ui-99da0a3a4dcc" rel="noopener follow" target="_blank"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">React 基础系列(慈善网络应用)-规划用户界面</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">大家好，在上一个教程中，我们已经了解了如何用 typescript 创建一个新的 React 项目。在这个…</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">billa-code.medium.com</p></div></div><div class="jp l"><div class="jq l jr js jt jp ju jv jg"/></div></div></a></div><div class="jd je ez fb jf jg"><a href="https://towardsdev.com/react-basic-series-charity-web-app-creating-a-react-app-with-typescript-32154afb3f19" rel="noopener  ugc nofollow" target="_blank"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">React with Typescript 系列(慈善网站应用程序)-使用 Typescript 创建 React 应用程序</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">大家好，我最近开始了一个简单的项目，为一个慈善组织创建一个 web 应用程序。他们所做的是，他们…</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">towardsdev.com</p></div></div><div class="jp l"><div class="jw l jr js jt jp ju jv jg"/></div></div></a></div><p id="8ddd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将看到如何通过创建可重用组件来实现这些设计。</p><p id="b67a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，正如我们在上一个教程中讨论的，我们必须创建一个 DataTableComponent，然后为学生和赞助商的详细信息创建两个模态组件。除此之外，我们还需要一个导航栏。第一步，我们将创建 DataTableComponent。</p><p id="88aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建我正在使用的 react-data-grid 库的 DataTableComponent，请使用“npm i react-grid”命令安装它。这个库有很多很酷的特性，而且很容易上手。我将在 src/components/datatable component 文件夹中创建一个名为 DataTableComponent.tsx 的新文件，如下所示。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="ea64" class="kg kh hi kc b fi ki kj l kk kl">import React, { Component } from 'react';<br/>import DataGrid from 'react-data-grid';<br/><br/>interface DataTableProps {<br/>    columns: columnType[],<br/>    rows: rowType[]<br/>}<br/><br/>type columnType = {<br/>    key: string;<br/>    name: string;<br/>};<br/><br/>type rowType = {<br/>    id: number;<br/>    name: string;<br/>};<br/>  <br/>export default class DataTableComponent extends Component&lt;DataTableProps&gt; {<br/>    constructor(props: DataTableProps) {<br/>        super(props);<br/>    }<br/><br/>    render(): React.ReactNode {<br/>        return &lt;DataGrid style={{height: '100vh'}} columns={this.props.columns} rows={this.props.rows} /&gt;;<br/>    }<br/>}</span></pre><p id="4863" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们试着理解我们在这里写的东西。因此，DataTableComponent 是通过扩展 React Component 创建的，这使我们能够访问构造函数和所有其他生命周期方法。如果我们把它作为函数来做，那么我们可以使用钩子来做我们的工作，但是在这个特别的教程系列中，我只使用组件(主要是因为像这样的教程比较少)。</p><p id="4365" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们使用 typescript，所以我们必须为代码中使用的每个变量定义类型。所以我定义了 columnType 和 rowType 的类型，然后定义了一个接口作为组件的 props 类型。相反，我可以在我们的代码中使用“any”类型，但这更专业、更正确。所以表组件是可以的。现在让我们编写一个单元测试来检查它是否可以渲染。我将在同一个文件夹中创建另一个名为 DataTableComponent.test.tsx 的文件，如下所示。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="b756" class="kg kh hi kc b fi ki kj l kk kl">import { render } from "@testing-library/react";<br/>import React from "react";<br/>import { describe, it, expect } from "@jest/globals";<br/>import DataTableComponent from "./DataTableComponent";<br/><br/>describe("Card", () =&gt; {<br/>  it("renders", () =&gt; {<br/>    const wrapper = render(&lt;DataTableComponent columns={[]} rows={[]} /&gt;);<br/>    expect(wrapper.container).toMatchSnapshot();<br/>  });<br/>});</span></pre><p id="9baf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们渲染组件并检查它自动创建的快照是否与当前实现相同。这是非常有价值的，当我们把后来的变化添加到应用程序中时，因为我们总是可以检测到是否有什么变化。</p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="a094" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们为学生详细信息创建一个模态弹出窗口。在此之前，我们必须安装 react-boostrap，在命令行中键入“npm i react-bootstrap”。我们将实现这种方式，用户可以从表行中的按钮打开弹出窗口。首先让我们对 StudentModalComponent 进行编码。我将在 src/components/StudentModalComponent 文件夹中创建这个文件，如下所示。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="2e40" class="kg kh hi kc b fi ki kj l kk kl">import React, { Component } from 'react';<br/>import { Modal, Button } from 'react-bootstrap';<br/><br/>interface ModalPropType {<br/>    show: boolean,<br/>    studentid: string,<br/>    onHide(): void<br/>}<br/><br/>export default class StudentModalComponent extends Component&lt;ModalPropType&gt; {<br/>    constructor(props: ModalPropType) {<br/>        super(props);<br/>    }<br/><br/>    render(): React.ReactNode {<br/>        return &lt;Modal {...this.props}&gt;<br/>            &lt;Modal.Header closeButton&gt;<br/>                &lt;Modal.Title id="contained-modal-title-vcenter"&gt;<br/>                    Details of Student {this.props.studentId}<br/>                &lt;/Modal.Title&gt;<br/>            &lt;/Modal.Header&gt;<br/>            &lt;Modal.Body&gt;<br/><br/>            &lt;/Modal.Body&gt;<br/>            &lt;Modal.Footer&gt;<br/>                &lt;Button onClick={this.props.onHide}&gt;Save&lt;/Button&gt;<br/>                &lt;Button onClick={this.props.onHide}&gt;Delete&lt;/Button&gt;<br/>                &lt;Button onClick={this.props.onHide}&gt;Close&lt;/Button&gt;<br/>            &lt;/Modal.Footer&gt;<br/>        &lt;/Modal&gt;<br/>    }<br/>}</span></pre><p id="35cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们回顾我在这里所做的，我只是使用 react-boostrap 库创建一个模型。所以你应该想知道所有的显示和隐藏是如何工作的。我们将使用下一个组件的 react 状态来处理它，处理它的方法将通过一个 prop 发送。这就是为什么我们有 onHide()和 show 作为我们的道具。道具“show”将用于此行{…this.props}的模态组件中。“onhide()”将用于关闭模式。现在让我们也为此编写单元测试。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="cc45" class="kg kh hi kc b fi ki kj l kk kl">import { render } from "@testing-library/react";<br/>import React from "react";<br/>import { describe, it, expect } from "@jest/globals";<br/>import StudentModalComponent from "./StudentModalComponent";<br/><br/>describe("StudentModalComponent", () =&gt; {<br/>  it("renders", () =&gt; {<br/>    const wrapper = render(&lt;StudentModalComponent show={<em class="kt">true</em>} studentid={"1"} onHide={jest.fn()} /&gt;);<br/>    expect(wrapper.container).toMatchSnapshot();<br/>  });<br/><br/>  it("not renders", () =&gt; {<br/>    const wrapper = render(&lt;StudentModalComponent show={<em class="kt">false</em>} studentid={"1"} onHide={jest.fn()} /&gt;);<br/>    expect(wrapper.container).toMatchSnapshot();<br/>  });<br/>});</span></pre></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="2a37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们创建按钮组件来处理学生模式的显示隐藏。我将在 src/components/StudentModalButton 文件夹中创建这个文件。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="bb88" class="kg kh hi kc b fi ki kj l kk kl">import React, { Component } from 'react';<br/>import { Button } from 'react-bootstrap';<br/>import StudentModalComponent from '../StudentModalComponent/StudentModalComponent';<br/><br/>interface StudentModalButtonComponentProps {<br/>    studentId: string<br/>}<br/><br/>export default class StudentModalButton extends Component&lt;StudentModalButtonComponentProps, { show: boolean }&gt; {<br/>    constructor(props: StudentModalButtonComponentProps) {<br/>        super(props);<br/><br/>        this.state = {<br/>            show: <em class="kt">false<br/>        </em>};<br/>    }<br/><br/>    setModalShow(showState: boolean) {<br/>        this.setState({ show: showState });<br/>    }<br/><br/><br/>    render(): React.ReactNode {<br/>        return &lt;&gt;<br/>            &lt;Button onClick={() =&gt; this.setModalShow(<em class="kt">true</em>)}&gt;{this.props.studentId}&lt;/Button&gt;<br/>            &lt;StudentModalComponent show={this.state.show} onHide={() =&gt; this.setModalShow(<em class="kt">false</em>)} studentid = {this.props.studentId} /&gt;<br/>        &lt;/&gt;<br/>    }<br/>}</span></pre><p id="32ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们所做的是保持一个名为 show 的状态，并将其发送给 StudentModalComponent 以显示和隐藏它。现在让我们也为此编写单元测试。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="3779" class="kg kh hi kc b fi ki kj l kk kl">import { render } from "@testing-library/react";<br/>import React from "react";<br/>import { describe, it, expect } from "@jest/globals";<br/>import StudentModalButton from "./StudentModalButton";<br/><br/>describe("Card", () =&gt; {<br/>  it("renders", () =&gt; {<br/>    const wrapper = render(&lt;StudentModalButton studentId={"1"} /&gt;);<br/>    expect(wrapper.container).toMatchSnapshot();<br/>  });<br/>});</span></pre></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="4f7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将通过使用上面创建的 DataTableComponent 和 ModalButton 组件，使用该组件创建 StudentTableComponent。为此，我将在 src/components/StudentTableComponent 中创建一个名为 StudentTableComponent.tsx 的文件，如下所示。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="7d13" class="kg kh hi kc b fi ki kj l kk kl">import React, { Component } from 'react';<br/>import DataTableComponent from '../../components/DataTableComponent/DataTableComponent';<br/>import ModalButtonComponent from '../../components/ModalButtonCompnent';<br/><br/>const columns = [<br/>    {<br/>        key: 'id', name: 'ID', width: <em class="kt">10</em>,<br/>        formatter(props: any) {<br/>            return (<br/>                &lt;&gt;<br/>                    &lt;ModalButtonComponent studentId={props.row.id} /&gt;<br/>                &lt;/&gt;<br/>            );<br/>        },<br/>    },<br/>    { key: 'name', name: 'Name' },<br/>    { key: 'contactNo', name: 'Contact No' },<br/>    { key: 'email', name: 'Email' },<br/>    { key: 'university', name: 'Univeristy' },<br/>    { key: 'course', name: 'Course of Study' },<br/>    { key: 'startDate', name: 'Course Start Date' },<br/>    { key: 'endDate', name: 'Course End Date' },<br/>    { key: 'scholEndDate', name: 'Schol. start Date' },<br/>    { key: 'sponsor', name: 'Sponsor Name' }<br/>];<br/><br/>const rows = [<br/>    { id: <em class="kt">0</em>, name: 'Example' },<br/>    { id: <em class="kt">1</em>, name: 'Demo' }<br/>];<br/><br/>export default class StudentTableComponent extends Component {<br/>    render(): React.ReactNode {<br/>        return &lt;DataTableComponent columns={columns} rows={rows} /&gt;;<br/>    }<br/>}</span></pre><p id="645d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我已经为行使用了一些虚拟数据，但在我们实现后端后，这些将被更改为从后端获取数据。现在我们也可以测试这个组件了，让我们编写 StudentTableComponent.test.tsx 文件。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="7615" class="kg kh hi kc b fi ki kj l kk kl">import { render } from "@testing-library/react";<br/>import React from "react";<br/>import { describe, it, expect } from "@jest/globals";<br/>import StudentTableComponent from "./StudentTableComponent";<br/><br/>describe("StudentTableComponent", () =&gt; {<br/>  it("renders", () =&gt; {<br/>    const wrapper = render(&lt;StudentTableComponent /&gt;);<br/>    expect(wrapper.container).toMatchSnapshot();<br/>  });<br/>});</span></pre></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="2ce9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们几乎已经完成了开发学生组件和与之相关的单元测试。现在，让我们在 src/containers/landing container 文件夹中创建 LandingContainer.tsx。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="3ebe" class="kg kh hi kc b fi ki kj l kk kl">import React, { Component } from 'react';<br/>import StudentTableComponent from '../../components/StudentTableComponent/StudentTableComponent';<br/>import { Navbar, Container, Nav, Button, Tab, Col, Row } from 'react-bootstrap';<br/><br/>interface LandingContainerProp { }<br/><br/>const btn = { backgroundColor: '#212529' };<br/><br/>export default class LandingContainer extends Component&lt;LandingContainerProp&gt; {<br/>    constructor(props: LandingContainerProp) {<br/>        super(props);<br/>    }<br/><br/>    render(): React.ReactNode {<br/>        return &lt;&gt;<br/>            &lt;Navbar bg="dark" variant="dark"&gt;<br/>                &lt;Container fluid&gt;<br/>                    &lt;Navbar.Brand&gt;Serendib Foundation&lt;/Navbar.Brand&gt;<br/>                &lt;/Container&gt;<br/>            &lt;/Navbar&gt;<br/>            &lt;Container style={btn} fluid&gt;<br/>                &lt;Tab.Container id="left-tabs-example" defaultActiveKey="first"&gt;<br/>                    &lt;Row style={btn}&gt;<br/>                        &lt;Col sm={<em class="kt">1</em>}&gt;<br/>                            &lt;Nav variant="pills" className="flex-column"&gt;<br/>                                &lt;Nav.Item&gt;<br/>                                    &lt;Nav.Link eventKey="first"&gt;Student&lt;/Nav.Link&gt;<br/>                                &lt;/Nav.Item&gt;<br/>                                &lt;Nav.Item&gt;<br/>                                    &lt;Nav.Link eventKey="second"&gt;Sponsors&lt;/Nav.Link&gt;<br/>                                &lt;/Nav.Item&gt;<br/>                            &lt;/Nav&gt;<br/>                        &lt;/Col&gt;<br/>                        &lt;Col sm={<em class="kt">11</em>}&gt;<br/>                            &lt;Tab.Content&gt;<br/>                                &lt;Tab.Pane eventKey="first"&gt;<br/>                                    &lt;StudentTableComponent /&gt;<br/>                                &lt;/Tab.Pane&gt;<br/>                                &lt;Tab.Pane eventKey="second"&gt;<br/>                                    &lt;StudentTableComponent /&gt;<br/>                                &lt;/Tab.Pane&gt;<br/>                            &lt;/Tab.Content&gt;<br/>                        &lt;/Col&gt;<br/>                    &lt;/Row&gt;<br/>                &lt;/Tab.Container&gt;<br/>            &lt;/Container&gt;<br/>        &lt;/&gt;<br/>    }<br/>}</span></pre><p id="35ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这段代码将创建一个很酷的引导导航组件，以给出我们在上一个教程中计划的精确外观。之后，我们将 StudentTableComponent 包含在其中。现在让我们为此编写单元测试。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="2516" class="kg kh hi kc b fi ki kj l kk kl">import { render } from "@testing-library/react";<br/>import React from "react";<br/>import { describe, it, expect } from "@jest/globals";<br/>import LandingContainer from "./LandingContainer";<br/><br/>describe("LandingContainer", () =&gt; {<br/>  it("renders", () =&gt; {<br/>    const wrapper = render(&lt;LandingContainer /&gt;);<br/>    expect(wrapper.container).toMatchSnapshot();<br/>  });<br/>});</span></pre><p id="647c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们要做的是像这样把这个容器添加到 App.tsx 文件中。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="5e1e" class="kg kh hi kc b fi ki kj l kk kl">import LandingContainer from "./containers/LandingContainer/LandingContainer";<br/><br/>export default function App() {<br/>  return (<br/>    &lt;LandingContainer /&gt;<br/>  );<br/>}</span></pre><p id="6ec1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并更新 App.test.tsx 文件</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="a373" class="kg kh hi kc b fi ki kj l kk kl">import React from 'react';<br/>import { render, screen } from '@testing-library/react';<br/>import App from './App';<br/><br/>test('renders learn react link', () =&gt; {<br/>  render(&lt;App /&gt;);<br/>  const linkElement = screen.getByText(/Serendib Foundation/i);<br/>  expect(linkElement).toBeInTheDocument();<br/>});</span></pre><p id="de77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这一步，现在一切都好了。我们已经有了我们设计的工作原型。让我们在下一个教程中见面，学习模式有趣的概念。要创建可赞助的相关组件，请尝试与我们现在相同的方法。快乐编码:D！！！！</p><p id="c190" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:代码在这里<a class="ae ku" href="https://github.com/deBilla/serendib-scholarship-ui" rel="noopener ugc nofollow" target="_blank">https://github.com/deBilla/serendib-scholarship-ui</a></p></div></div>    
</body>
</html>