<html>
<head>
<title>Streaming results to the cloud while runs locally</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在本地运行时将结果流式传输到云</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/streaming-results-to-the-cloud-while-runs-locally-c962a091c991?source=collection_archive---------19-----------------------#2021-07-20">https://medium.com/nerd-for-tech/streaming-results-to-the-cloud-while-runs-locally-c962a091c991?source=collection_archive---------19-----------------------#2021-07-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b044" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，创建一个名为“流至云”的新项目，然后单击“跳过”按钮进行下一步操作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/43d16087f9102a7d017600a1a91ee76c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jd54GnLMMmK5LYVjjAQllg.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/8039c6a85b0dbcfc07275a4ae49ec2ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QA7EA2_6ior47Rg-SLOjnw.png"/></div></div></figure><p id="2536" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后创建一个名为“resulttocloud”的加载脚本。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="5dc5" class="jv jw hi jr b fi jx jy l jz ka">import { check, sleep } from 'k6';<br/>import http from 'k6/http';</span><span id="2117" class="jv jw hi jr b fi kb jy l jz ka">export default function () {<br/>  let res = http.get('<a class="ae kc" href="http://test.k6.io/',{tags" rel="noopener ugc nofollow" target="_blank">http://test.k6.io/',{tags</a>: {'name': 'home'}});<br/>  check(res, {<br/>    'is status 200': (r) =&gt; r.status === 200,<br/>    'body contains text': (r) =&gt; r.body.includes('Collection of simple web-pages suitable for load testing.'),<br/>  });<br/>sleep(1);<br/>  res = http.get('<a class="ae kc" href="http://test.k6.io/news.php',{tags" rel="noopener ugc nofollow" target="_blank">http://test.k6.io/news.php',{tags</a>: {'name': 'news'}});<br/>  check(res, {<br/>    'is status 200': (r) =&gt; r.status === 200,<br/>    'body contains text': (r) =&gt; r.body.includes('In the news'),<br/>  });<br/>}</span></pre><p id="5025" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后将以下代码块添加到您的 resulttocloud 脚本中，并根据您自己的需要修改项目名称和 id。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="f451" class="jv jw hi jr b fi jx jy l jz ka">export let options = {<br/>  ext: {<br/>    loadimpact: {<br/>      projectID: 3544835,<br/>      // Test runs with the same name groups test runs together<br/>      name: "YOUR TEST NAME"<br/>    }<br/>  }<br/>}</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/47b2e3b6aa3a1129f362178880a1bbf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6NAgjwjEI9Engyb2h39xRw.png"/></div></div></figure><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="d57b" class="jv jw hi jr b fi jx jy l jz ka">import { check, sleep } from 'k6';<br/>import http from 'k6/http';</span><span id="9491" class="jv jw hi jr b fi kb jy l jz ka">export let options = {<br/>  ext: {<br/>    loadimpact: {<br/>      projectID: 3544835,<br/>      // Test runs with the same name groups test runs together<br/>      name: "streaming to the cloud"<br/>    }<br/>  }<br/>}<br/>export default function () {<br/>  let res = http.get('<a class="ae kc" href="http://test.k6.io/',{tags" rel="noopener ugc nofollow" target="_blank">http://test.k6.io/',{tags</a>: {'name': 'home'}});<br/>  check(res, {<br/>    'is status 200': (r) =&gt; r.status === 200,<br/>    'body contains text': (r) =&gt; r.body.includes('Collection of simple web-pages suitable for load testing.'),<br/>  });<br/>sleep(1);<br/>  res = http.get('<a class="ae kc" href="http://test.k6.io/news.php',{tags" rel="noopener ugc nofollow" target="_blank">http://test.k6.io/news.php',{tags</a>: {'name': 'news'}});<br/>  check(res, {<br/>    'is status 200': (r) =&gt; r.status === 200,<br/>    'body contains text': (r) =&gt; r.body.includes('In the news'),<br/>  });<br/>}</span></pre><p id="5cc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在是运行脚本的时候了。在此之前，您应该有自己的 API 令牌。按照以下步骤复制令牌。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/923a0baa660d88c6e36f7fa8a0271443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*dZHzKK4dp_i-K9toDbpnxA.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/7bb79bf5f43aeeeb3e9781b801ea0217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8H7QCwhd4JS6b_KvwEvj8Q.png"/></div></div></figure><p id="7ae7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入以下步骤来运行脚本</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="9094" class="jv jw hi jr b fi jx jy l jz ka">k6 login cloud --token &lt;&lt;apitoken&gt;&gt;</span><span id="b86f" class="jv jw hi jr b fi kb jy l jz ka">k6 run --vus 10 --duration 60s resulttocloud.js --out cloud</span></pre><p id="3c9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可以在云端看到结果，如果你愿意，你可以定制你想要的结果。要做到这一点，导航到他们必须给下面的链接。"<a class="ae kc" href="https://app.k6.io/runs/1052192" rel="noopener ugc nofollow" target="_blank">https://app.k6.io/runs/1052192</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kg"><img src="../Images/ec33636db8daed3b639f97c0156a7c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ef0ZqUFh6KR-xK5mfoNjSw.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kh"><img src="../Images/1e9e431276226cf056eb9092724dad44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0EyP5nZ7GOhcJSUNMfHbUQ.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ki"><img src="../Images/8f435202ca7c646905f9788a9cea26f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5Jv03GdShIW_dyMj99Srg.png"/></div></div></figure></div></div>    
</body>
</html>