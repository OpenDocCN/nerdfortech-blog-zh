<html>
<head>
<title>Vue.js &amp; Symfony — roles authentication</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js &amp; Symfony —角色认证</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/vue-js-symfony-roles-authentication-f9c5ea00d750?source=collection_archive---------2-----------------------#2021-09-19">https://medium.com/nerd-for-tech/vue-js-symfony-roles-authentication-f9c5ea00d750?source=collection_archive---------2-----------------------#2021-09-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5cb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用基于<strong class="ih hj">vue . js</strong>&amp;<strong class="ih hj">Symfony</strong>的项目验证用户角色和权限</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/6e715c0c7625899de8917763c3991470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*Dedp0UIE0_rny_5ICQeLRQ.png"/></div></figure><h1 id="119d" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">用例</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es kj"><img src="../Images/6c871442bc0f1575ec41878321accf7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-cbQg5C7_zIxvpNw8D05A.png"/></div></div></figure><p id="8333" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有基于角色的检查(在前面)都依赖于JWT令牌中的数据。一旦接收到JWT令牌，它就被存储在浏览器存储器中。</p><p id="35e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提取的JWT有效载荷如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ko"><img src="../Images/34b2d987e4f83c80c5b342fb28636fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*Z3-xCe83HtAyRFJZotbO1w.png"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">JWT有效载荷</figcaption></figure><h1 id="ba13" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">设置Vue.js路线上的角色要求</strong></h1><p id="a4ed" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated"><strong class="ih hj"> Vue.js </strong> route对象有一个名为<code class="du ky kz la lb b">meta</code>的特殊属性，允许设置所需的任何类型的附加数据。接下来，我只是这样设置<code class="du ky kz la lb b">meta</code>属性<code class="du ky kz la lb b">requiredRole</code>:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lc ld l"/></div></figure><h1 id="4e8d" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">为角色检查设置Vue.js防护</strong></h1><p id="eadb" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">现在，此解决方案还需要配置<code class="du ky kz la lb b">router</code>对象(它是<strong class="ih hj"> vue-router </strong>包的一部分)，如下所示:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lc ld l"/></div></figure><h1 id="09f5" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">奖金—基于角色的组件</strong></h1><p id="a4b3" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">按照所有的角色检查逻辑，我还添加了基于角色的小组件，将子组件包装到权限验证中。这样我就可以根据用户的角色来控制用户看到的内容(例如调试工具箱，它可以在任何环境下工作)。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lc ld l"/></div></figure></div></div>    
</body>
</html>