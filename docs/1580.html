<html>
<head>
<title>Automate Static Site Deployment to AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动将静态站点部署到AWS</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/automate-static-site-deployment-to-aws-c6ea81e57824?source=collection_archive---------17-----------------------#2021-03-26">https://medium.com/nerd-for-tech/automate-static-site-deployment-to-aws-c6ea81e57824?source=collection_archive---------17-----------------------#2021-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/0c74921aad374d19aebe714d05f6cc04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*biURNdmQ2JDCgNqUposuNQ.png"/></div></div></figure><div class=""/><p id="a4b7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你已经做了一个静态网站，那么使用AWS的S3桶很容易让它活起来。问题是每次你做一个改变(比如添加一个新页面)，你需要手动更新你的S3桶。如果你也在使用CloudFront(减少延迟，到Gzip等。)那么你也需要更新它。</p><p id="283e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以自动完成这一过程，因此您不必担心这些繁琐的任务。有两个步骤:</p><ol class=""><li id="55f8" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建一个管道，在每次向GitHub推送更改时更新S3</li><li id="02a2" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">清除CloudFront的缓存</li></ol><h1 id="354e" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">步骤0:设置GitHub存储库</h1><p id="c970" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">如果您已经在使用存储库，那么您可以跳过这一步。否则，您应该建立一个免费的GitHub帐户，并将您的代码添加到master分支。</p><h1 id="765b" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">S3</h1><p id="1168" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">这样做的目的是，每次您将更改推送到主分支时，托管站点的S3存储桶也会得到更新。AWS为此提供了一个简单的解决方案:<strong class="is hu"> CodePipeline </strong>。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lf"><img src="../Images/04ddace19e4992257f29093593891382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_wD1Tt4eU__Cp-xr6TLFQg.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">AWS截至2021年的代码管道</figcaption></figure><blockquote class="lo lp lq"><p id="4912" class="iq ir lr is b it iu iv iw ix iy iz ja ls jc jd je lt jg jh ji lu jk jl jm jn hb bi translated">确保您所在的地区与您的S3桶所在的地区相同。</p></blockquote><p id="935d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要开始，按<strong class="is hu">创建管道</strong>。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lv"><img src="../Images/acdfb3f7a5b82cfadbc7a5afd1e3904a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oINSrzasOcSASicCT3Nd5A.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">管道设置</figcaption></figure><p id="94d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我选择了名称s3_cont_deploy，但它可以是任何名称。</p><p id="b92f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击下一步前，打开同一页面的<strong class="is hu">高级设置</strong>:</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/7786b31d976240c396ed1cffdeb94d0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1HekZ3ux6-fxPT8qwyoe3g.png"/></div></div></figure><p id="67e3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择<strong class="is hu">自定义位置</strong>并搜索当前托管静态站点的桶。</p><p id="022c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将加密密钥保留为默认值。现在按下一步！</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/c2a464543c9ad1ecf49f38c70294937c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qtj5_u5czh9YUBdRfc8Y5Q.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">代码管道源代码提供程序</figcaption></figure><p id="76fe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">搜索GitHub(版本2)作为您的源代码提供者。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ly"><img src="../Images/b2ccfc78374450a690bbea67ccc74230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mCone0eGldJtr1zpx4CnQ.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">GitHub(版本2)源代码提供者</figcaption></figure><p id="bbf2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后会要求您指定一个连接。如果您之前已经从AWS连接到您的GitHub帐户，那么只需搜索该连接名称。否则，按下<strong class="is hu">连接到Github </strong>。</p><p id="a5ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦你按下<strong class="is hu">连接到Github </strong>一个新的标签将会打开。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lz"><img src="../Images/bc2728d231504ca70f369ccb57f12afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Mg4NCqbT-P8NoGJSPSj1g.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">连接到GitHub</figcaption></figure><p id="5db7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，您可以按照说明来证明您拥有GitHub帐户。</p><p id="979e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，返回代码管道页面。现在，您应该会看到刚刚创建的新连接作为选项之一。</p><p id="1ca6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加详细信息，例如代码的存储库和您想要部署的分支。我建议将此设置为主。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/5dc11093159e917e463b28c691925c4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvWhzltnT2BMEfl_4mbYtA.png"/></div></div></figure><p id="fce6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是指定构建提供者。跳过这个阶段。</p><p id="9fc8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来是部署提供者。搜索亚马逊S3，然后选择你的桶的地区和名称(我的名称是alkypal.com.au)。勾选部署前提取文件，然后点击下一步！</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mb"><img src="../Images/e3b211d57f5a0aae8eab418805760c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmN3Knplg_5itvrH6ecS0w.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">部署提供程序</figcaption></figure><p id="3403" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在您只需要检查管道并点击create。</p><h2 id="1565" class="mc kd ht bd ke md me mf ki mg mh mi km jb mj mk kq jf ml mm ku jj mn mo ky mp bi translated">快速检查一下👀</h2><p id="6433" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了确保一切按预期运行，请将一个图像文件添加到您的存储库中。它是什么并不重要，这只是为了测试。</p><p id="62f8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保将代码添加、提交并推送到主分支。</p><p id="9143" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后转到<strong class="is hu"> CodePipeline </strong>并选择具有您之前选择的名称的管道，您将看到如下内容:</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mq"><img src="../Images/4bdd037566c9ec743c598faeeca3aaf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JwU67efF2B9cxNqkB65Wmw.png"/></div></div></figure><p id="0e95" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">等待<strong class="is hu">部署</strong>阶段完成(一旦变绿，状态变为成功，你就知道了)。</p><p id="5c39" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在前往S3，选择你的桶。检查并确保图像在您的桶中。如果是，那么您的管道正在按预期工作。请确保您从存储库和S3存储桶中删除了该图像！</p><h1 id="b2c5" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">步骤2: Cloudfront</h1><p id="a1ea" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">如果你使用的是Cloudfront(大多数网站都使用),那么你也需要完成以下步骤，以确保浏览器中确实会出现变化。这个阶段有点长，所以我把它分成3个小步骤:</p><ol class=""><li id="be0d" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">设置IAM角色</li><li id="f49b" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">设置lambda函数，该函数使用在步骤1中创建的IAM角色</li><li id="4ddb" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">添加您的S3桶作为步骤2中lambda函数的触发器</li></ol><h2 id="ac18" class="mc kd ht bd ke md me mf ki mg mh mi km jb mj mk kq jf ml mm ku jj mn mo ky mp bi translated">步骤1:设置IAM角色</h2><p id="06ff" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">IAM角色可用于授予资源对其他资源执行操作的权限。在我们的例子中，我们希望创建一个角色，该角色将授予lambda在S3、Cloudfront和CloudWatch上执行操作的权限。</p><p id="5c5a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">搜索<strong class="is hu"> IAM </strong>后，选择<strong class="is hu">角色</strong>，然后选择<strong class="is hu">创建角色。</strong></p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/1b9fdd1a89a4e028c83ae4c93e8d3284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gtMK_aPTY5sgS-HuaOHRJg.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">IAM角色</figcaption></figure><p id="5efe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择<strong class="is hu"> AWS服务</strong>，然后选择<strong class="is hu">λ</strong>。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/942286c5b817f37b2d783f2f55133959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q38rcmr6z-QrsXk6Hjl5Yw.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">为lambda服务创建IAM角色</figcaption></figure><p id="1b02" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如前所述，我们需要添加3个策略。</p><ol class=""><li id="1c2b" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">S3:搜索下面的术语，然后勾选政策。</li></ol><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/13cd6ef56d377fcd17b238425a1a61c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kYpDI7MdOfKM7_dV_VS7Pw.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">步骤1:添加AmazonS3FullAccess策略</figcaption></figure><p id="91a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.CloudWatch:再次勾选完全访问选项</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mr"><img src="../Images/3190c6d4223fb1e175d5176e52c43610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QuymnJXYiHqkS-GPtRk09Q.png"/></div></div></figure><p id="966b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.CloudFront:为此，选择<strong class="is hu"> Create Policy </strong>，这将带您进入一个新的选项卡。选择JSON并插入以下代码片段:</p><pre class="lg lh li lj fd ms mt mu mv aw mw bi"><span id="bc66" class="mc kd ht mt b fi mx my l mz na">{<br/>    "Version": "2012-10-17",<br/>    "Statement": [<br/>        {<br/>            "Effect": "Allow",<br/>            "Action": "s3:*",<br/>            "Resource": "arn:aws:s3:::*"<br/>        },<br/>        {<br/>            "Effect": "Allow",<br/>            "Action": [<br/>                "cloudfront:CreateInvalidation",<br/>                "cloudfront:GetInvalidation",<br/>                "cloudfront:ListInvalidations"<br/>            ],<br/>            "Resource": "*"<br/>        }<br/>    ]<br/>}</span></pre><p id="f701" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在返回到<strong class="is hu">创建角色</strong>页面，选择您新创建的策略。</p><p id="c591" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转到下一步，添加角色名称，我选择了lambda_s3。创造角色！</p><h2 id="f797" class="mc kd ht bd ke md me mf ki mg mh mi km jb mj mk kq jf ml mm ku jj mn mo ky mp bi translated">步骤2:创建Lambda函数</h2><p id="c91d" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">确保从头选择作者并添加这些设置:</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nb"><img src="../Images/d5ff59b5a1c4dfed79de8eb0cf0b0e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JHI3hxb2PGopra2mvesUNg.png"/></div></div></figure><p id="266f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我们可以使用刚刚创建的角色来授予lambda函数权限。</p><p id="ed42" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦创建了函数，您将被带到新创建的函数，该函数目前<em class="lr">不执行任何操作</em>😩</p><p id="11d3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要添加一些代码。在代码源中添加以下代码片段，然后按deploy。这个片段来自<a class="nc nd ge" href="https://medium.com/u/cee15f751d86?source=post_page-----c6ea81e57824--------------------------------" rel="noopener" target="_blank"> Yago Nobre </a>在<a class="ae ne" rel="noopener" href="/@yagonobre/automatically-invalidate-cloudfront-cache-for-site-hosted-on-s3-3c7818099868">他的文章</a>。</p><pre class="lg lh li lj fd ms mt mu mv aw mw bi"><span id="c54c" class="mc kd ht mt b fi mx my l mz na">from __future__ import print_function<br/> <br/>import boto3<br/>import time<br/> <br/>def lambda_handler(event, context):<br/>    path = "/" + event["Records"][0]["s3"]["object"]["key"]<br/>    bucket_name = event["Records"][0]["s3"]["bucket"]["name"]<br/>   <br/>    client = boto3.client('s3')<br/>    tags = client.get_bucket_tagging(Bucket=bucket_name)<br/>    for tag in tags["TagSet"]:<br/>        if tag["Key"] == "distribution_id":<br/>            distribution_id = tag["Value"]<br/>            break<br/>   <br/>    client = boto3.client('cloudfront')<br/>    invalidation = client.create_invalidation(DistributionId=distribution_id,<br/>        InvalidationBatch={<br/>            'Paths': {<br/>                'Quantity': 1,<br/>                'Items': [path]<br/>        },<br/>        'CallerReference': str(time.time())<br/>    })</span></pre><p id="c3c6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它应该是这样的:</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nf"><img src="../Images/13a564f35ecbda97223bd5a06d6cbda3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZa5VcZRLuhnCDU8npdYiA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">使cloudfront无效的Lambda函数</figcaption></figure><h2 id="ed74" class="mc kd ht bd ke md me mf ki mg mh mi km jb mj mk kq jf ml mm ku jj mn mo ky mp bi translated">第三步:添加S3作为触发器</h2><p id="8cd3" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">回到你的S3桶，在属性下你会发现<strong class="is hu">事件通知</strong>。按下“创建事件通知”后，您应该会看到此页面:</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ng"><img src="../Images/fc6e3c2e0f4ac9243bf1dc719238aaa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*axBk1hPyF0X_XXRmjTXNXw.png"/></div></div></figure><p id="4c9b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为您的通知命名。保留前缀和后缀emtpy(我们希望lambda在每次更改时触发)。</p><p id="c923" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在事件类型下，选择所有创建和删除事件。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lv"><img src="../Images/5b2d5f6fdd7cd9abf7168fe84fcd7657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0nwV7CwNEwYHvP3FoUz_xQ.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">bucket中所有删除和创建事件的触发器</figcaption></figure><p id="b30e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择我们刚刚创建的lambda函数。并保存更改。</p><figure class="lg lh li lj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/62cd5538a0f8b4f1129e454e9c40d102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xFZLR9fxGjLD3mDA6uQQ7A.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">选择将被触发的功能</figcaption></figure><p id="13ec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，回到CloudFront，找到你的CloudFront ID。在properties下的S3存储桶中，添加一个带有关键字“distribution_id”和CloudFront ID值的标签。</p></div><div class="ab cl nh ni gp nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="hb hc hd he hf"><h1 id="944d" class="kc kd ht bd ke kf no kh ki kj np kl km kn nq kp kq kr nr kt ku kv ns kx ky kz bi translated">确保它正常工作…</h1><p id="b81a" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了确保您的更改被自动部署，您需要关闭浏览器的缓存。</p><p id="df7d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在只需更改您网站的一个文件。硬刷新页面(确保没有浏览器缓存)，你会看到变化！</p><p id="f1e1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">搞定了。！！！！</p></div></div>    
</body>
</html>