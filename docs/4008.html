<html>
<head>
<title>Understand Redux with React in few steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Redux和React的几个步骤</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/understand-redux-with-react-in-few-steps-a49853a49e37?source=collection_archive---------4-----------------------#2021-07-03">https://medium.com/nerd-for-tech/understand-redux-with-react-in-few-steps-a49853a49e37?source=collection_archive---------4-----------------------#2021-07-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/95f4db91032198318a1606d2682d158d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uov-TfA20xfGqeIZyLWfnA.png"/></div></div></figure><p id="dfcf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本教程中，你将了解作为初学者你需要知道的关于redux的一切。我们将从概念转向实际操作。在本教程结束时，我们将构建一个计数器程序来了解如何使用redux。</p><p id="d59b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://www.google.com/search?rlz=1C1CHBD_frTN939TN940&amp;sxsrf=ALeKk00fasQyt-JbxTSfTJsGMfZnn7WXIw:1625345399633&amp;q=Prerequisites&amp;spell=1&amp;sa=X&amp;ved=2ahUKEwj6kbq548fxAhUPnBQKHUd0BxAQkeECKAB6BAgBEC0" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> <em class="jp">先决条件</em> </strong> </a> : React，Javascript ES6</p><h1 id="351b" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">概念</h1><h2 id="bce3" class="ko jr hi bd js kp kq kr jw ks kt ku ka jb kv kw ke jf kx ky ki jj kz la km lb bi translated">1-了解状态管理</h2><p id="13ba" class="pw-post-body-paragraph iq ir hi is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">状态管理是以数据结构的形式呈现应用程序中使用的数据的一种方式。因此，在组件之间交换这些数据会更容易。它促进了不同组件之间的通信，并让它们以一种简单的方式了解任何更新的数据。</p><p id="f24d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在React中，有许多不同的状态管理库:Redux、反冲、上下文api等。</p><h2 id="984a" class="ko jr hi bd js kp kq kr jw ks kt ku ka jb kv kw ke jf kx ky ki jj kz la km lb bi translated">React中组件之间的通信，无冗余</h2><p id="8c61" class="pw-post-body-paragraph iq ir hi is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">在我们学习redux如何工作之前，了解一下React在不使用Redux的情况下是如何工作的是很重要的。</p><p id="c238" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">事实上，组件之间的通信是使用道具从上到下进行的。这意味着，无论何时您想要传递数据，它都应该从父节点传递到子节点。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/24d11970e08ec056ab8c0f5503c52351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*M0vfTxF1HJLclzvxWa7IRw.png"/></div></figure><p id="a5de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上图中，如果<em class="jp">子节点1.1.1 </em>需要一个在父节点中声明的数据，那么将会发生以下情况:</p><p id="ac4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">父节点将数据作为道具传递给<em class="jp">子节点1 </em>，然后<em class="jp">子节点1 </em>接收数据并将其作为道具传递给<em class="jp">子节点1.1 </em>，然后<em class="jp">子节点1.1 </em>接收数据并将其作为道具传递给<em class="jp">子节点1.1.1 </em></p><p id="1918" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将这个循环称为<strong class="is hj"> Prop-Drilling </strong>，这意味着为了将数据从一个组件传递到另一个组件，它应该遍历两个组件之间的树的所有组件，从上到下进行通信，即使它们没有请求这样做。</p><p id="436a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想象一下，如果这个应用程序变得更大，我们可能有上百个组件，使用这种方法将非常困难。光是想想就很累，让人不知所措！</p><p id="d59d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种方法的另一个缺点是，我们希望在<em class="jp">子1.1.1 </em>和<em class="jp">子2.1 </em>之间进行数据通信，这可能非常具有挑战性。</p><h2 id="51fd" class="ko jr hi bd js kp kq kr jw ks kt ku ka jb kv kw ke jf kx ky ki jj kz la km lb bi translated">3- Redux</h2><p id="67fe" class="pw-post-body-paragraph iq ir hi is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">作为对前面问题的解决方案，Redux作为状态管理库被引入。</p><p id="9e7b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Redux让一切更简单！</p><p id="5eb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">Redux如何工作？</strong></p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lm"><img src="../Images/62322ccb0ee57d82bfee2a9ed4eb683b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*GBPZo23lNc85s4n2UwAdjA.png"/></div></figure><p id="cbf4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Redux定义了一个保存所有数据(状态)的存储。每当你更新一个状态时，它将在商店中自动更新，并从商店传递到你的应用程序的所有组件。</p><p id="0b48" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，每当组件需要数据时，它就直接从存储中获取数据。</p><h1 id="ac74" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">我们来练习一下！</h1><p id="8e04" class="pw-post-body-paragraph iq ir hi is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">在这一部分，我们将使用redux构建一个计数器程序。这个应用程序非常简单，但却教授了很多东西。</p><p id="4252" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个应用程序允许你增加或减少一个状态(计数器)的值</p><p id="4b1c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 1-安装</strong></p><p id="60bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建react应用程序后，执行以下步骤来安装redux。</p><p id="0c4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用npm:</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es ln"><img src="../Images/2f869c03f181810fa710beea8201b4f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*Z_5Zxbp5tU4cxzQY5wR1Lg.png"/></div></figure><p id="94c6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">带纱线:</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/311b0c875a00d54444c9213c2d82254d.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*7y0ESTjEghmy2DwEDX1e0g.png"/></div></figure><p id="485d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意，我们需要安装redux和react-redux。</p><p id="84d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Redux允许我们创建商店，react-redux允许我们在react应用程序中使用redux。</p><p id="9a1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装后，创建一个名为Store的文件夹。在这个文件夹下，再创建两个文件夹，一个名为actions，另一个名为reducers。</p><p id="5ebb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以根据需要命名文件夹，但这是最佳做法</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/9ee485003a85ba6f802e788a5d85d68d.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*r_eyniy2ZiyYmbJKpDrByg.png"/></div></figure><p id="b2ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 2-编码</strong></p><p id="b115" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了使用redux，无论构建什么样的应用程序，都有几个步骤是适用的。你可以从任何你想要的步骤开始，但我喜欢按如下步骤进行:</p><p id="4251" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1–定义行动</p><p id="ab17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2–定义减速器</p><p id="2afa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3-定义商店</p><p id="9476" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4-分派操作</p><ul class=""><li id="bb31" class="lq lr hi is b it iu ix iy jb ls jf lt jj lu jn lv lw lx ly bi translated"><strong class="is hj">定义行动</strong></li></ul><p id="e754" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">动作只是一个函数，它返回一个具有两个属性的对象:</p><p id="574a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">-type:一个字符串，表示您正在执行的操作</p><p id="5c46" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">-有效负载:您将用来更新您的状态的数据</p><p id="d581" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的例子中，我们需要两个动作，一个增加状态，另一个减少状态。</p><p id="04ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，类型可以是:“增量”和“减量”(例如)。它只是一个字符串，你可以随意命名。最好用大写字母来写。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/1a32ba19be3edcde08ca6f65df51b5b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c67B6BZmuSHJj6sWh3psDw.png"/></div></div></figure><ul class=""><li id="c00e" class="lq lr hi is b it iu ix iy jb ls jf lt jj lu jn lv lw lx ly bi translated"><strong class="is hj">定义减速器</strong></li></ul><p id="4caf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">减速器是做增量或减量工作的函数。它需要两个参数。第一个参数是将被更新的状态，第二个参数是将在状态上执行以改变它的动作。</p><p id="e60c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">重要的是要知道，无论你在redux中作为第一个参数传递什么，redux都会将其识别为状态，并自动保存在存储中。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/674f3653e11e45a5a2dab7ac5c524611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PG1jtmAZTnBrk21zmWKCrw.png"/></div></div></figure><p id="451d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们定义了一个对象initialState，并将其传递给State参数作为它的初始化。</p><p id="bb85" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基于动作类型“递增”或“递减”,缩减器将返回状态，除了计数字段将被加上有效载荷的值之外，其他字段保持不变。</p><ul class=""><li id="3c20" class="lq lr hi is b it iu ix iy jb ls jf lt jj lu jn lv lw lx ly bi translated"><strong class="is hj">定义商店</strong></li></ul><p id="b7c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经准备好了我们的操作和reducer，我们需要创建商店。在您的<strong class="is hj"> index.js </strong>文件中执行以下操作:</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/782f065aa38c73a88f61f315f7f9a40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYzCwmsYQJ5BVIYh51xvuw.png"/></div></div></figure><p id="4d88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了创建商店，我们使用从redux导入的函数createStore。该函数将我们之前定义的reducer作为参数，因此当我们将状态传递给reducer时，它知道要存储什么状态。</p><p id="2b78" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了更好地可视化正在更新的状态，我们使用Redux dev tools扩展。只需将它添加到您的浏览器中，然后将以下内容添加到reducer旁边的createStore方法中</p><p id="f742" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">窗户。_ _ REDUX _ dev tools _ EXTENSION _ _ &amp; &amp; window。__REDUX_DEVTOOLS_EXTENSION__()</p><p id="0f51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了让所有组件都可以访问这个存储，我们使用了一个从react-redux导入的提供者。这个提供者以商店为道具，传递给我们的app。这将允许所有组件访问存储和其中的数据。</p><p id="ae01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><provider store="{store}"/></p><p id="f9bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><App/></p><p id="f732" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"/><ul class=""><li id="8dff" class="lq lr hi is b it iu ix iy jb ls jf lt jj lu jn lv lw lx ly bi translated"><strong class="is hj">定义调度员</strong></li></ul><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/00a5b3cb1cc1e0734b720878e4acb40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BHprURSxMEe04cub9fTQ3g.png"/></div></div></figure><p id="973d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jp"> useDispatch </em>是一个钩子，用来定义调度器。dispatcher是一个函数，它将一个动作作为参数，并触发reducer执行该动作。</p><p id="af2c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们单击按钮+时，调度程序将increment动作传递给reducer，这个reducer将在state上执行它。</p><p id="29a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们单击按钮-时，调度程序将减量操作传递给reducer，这个reducer将在状态上执行它。</p><p id="af14" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是我们如何从这个文件中访问状态呢？</p><p id="edad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">多亏了存储库，我们使用了<em class="jp"> useSelector </em>钩子，它默认将我们保存在存储库中的状态作为参数。</p><p id="4636" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们使用它从任何组件访问我们的状态。</p><p id="68bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">计数器将相应地更新</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/f18311274db434001e733ca0dfd3e666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBqicy9iR1vaveJXyPfYIQ.png"/></div></div></figure><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es me"><img src="../Images/53f5edd65fc410cce295f7b2a5e0a64c.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*vbevi7JS0YDhInr9Tni0Lg.png"/></div></figure><p id="e60b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你发现它势不可挡，不要担心！Redux在开始的时候有点难理解，但是自己重复这个教程，你会做得很好的！</p><p id="cd2c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你有任何问题，不要犹豫，在评论中问我！</p><p id="7ab3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完整代码:</p><div class="mf mg ez fb mh mi"><a href="https://github.com/JiheneBarhoumi/Counter_Redux" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hj fi z dy mn ea eb mo ed ef hh bi translated">JiheneBarhoumi/Counter_Redux</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">github.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw io mi"/></div></div></a></div></div></div>    
</body>
</html>