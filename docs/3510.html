<html>
<head>
<title>Setup Google Tag Manager with React Native Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React Native Firebase设置Google Tag Manager</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/setup-google-tag-manager-with-react-native-firebase-84bfc814d00c?source=collection_archive---------3-----------------------#2021-06-12">https://medium.com/nerd-for-tech/setup-google-tag-manager-with-react-native-firebase-84bfc814d00c?source=collection_archive---------3-----------------------#2021-06-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/eee85e5dadf08f644385c642aaa3a52b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xn17MpjI1JAQLgsNm-Vp2g.jpeg"/></div></div></figure><p id="1ffb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我将向您提供一些与<a class="ae jo" href="https://marketingplatform.google.com/about/tag-manager/" rel="noopener ugc nofollow" target="_blank"> Google Tag Manager </a>和<a class="ae jo" href="https://rnfirebase.io/" rel="noopener ugc nofollow" target="_blank"> React Native Firebase </a>库集成的退订瞬间。</p><p id="17e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您已经在项目中设置和使用Firebase Analytics时，这篇文章将会非常有用。什么是谷歌标签管理器(GTM)以及为什么它必须集成到您的项目中，您可以在这里找到一些信息<a class="ae jo" rel="noopener" href="/bam-tech/how-to-install-google-analytics-for-react-native-80134383e39d">。</a></p><p id="0940" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置GTM配置的步骤在官方网站上有完整的描述，你也可以在其他地方找到更多的信息，包括这里的媒体。但是，不幸的是，在我的设置过程中，我没有找到关于GTM与React Native集成的完整解释以及一些故障排除的瞬间。我花了几乎一天的时间弄清楚ta如何让Android平台与GTM一起工作。提供安装步骤不适合我，所以我尝试了不同的方法，直到找到一个工作。</p><p id="9329" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我假设你的项目在两个平台上工作，IOS和Android。所以我很快会谈到这两个问题。请再次确认你没有这篇<a class="ae jo" href="https://proandroiddev.com/firebase-with-gtm-events-not-showing-on-google-analytics-c57a550fdfba" rel="noopener ugc nofollow" target="_blank">文章</a>中描述的任何问题，并且你的所有准备步骤都已就绪。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="58c7" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">IOS设置</h1><p id="b797" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">官方页面上描述的步骤是将GTM集成到你的项目中的工作变体，以防你已经使用了firebase。除了上面列出的步骤之外，没有特别的步骤。您只需在项目根目录下创建文件夹“容器”，将导出的容器配置放在那里，然后通过菜单“文件-&gt;将文件添加到{您的项目}”将该文件夹添加到XCode应用程序中。重要的是要为“做参考”或其他东西打上一个复选框。现在，你必须在你的Podfile中添加最后一个end '<strong class="is hj">pod ' Google tag manager</strong>'，并且不要忘记在ios文件夹下做'<strong class="is hj"> pod install </strong>'。</p><p id="6973" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，要使用firebase analytics测试您的容器，请转到您的firebase项目并检查DebugView部分。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="7a5e" class="li jx hi le b fi lj lk l ll lm">import analytics from '@react-native-firebase/analytics';</span><span id="6fc3" class="li jx hi le b fi ln lk l ll lm">...</span><span id="22e4" class="li jx hi le b fi ln lk l ll lm">analytics().logEvent('YOUR_EVENT_NAME', params);</span></pre><p id="070d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一切正常，除了你的事件名称在你连接的设备的日志列表中，你还可以看到来自GTM的事件，这取决于你在容器中的设置。在我的例子中，我只是添加了一个新标签‘IOs _ test _ GTM’，由发送到firebase analytics的每个事件触发。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="064b" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">Android设置</h1><p id="5c9c" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">如前所述，GTM <a class="ae jo" href="https://developers.google.com/tag-manager/android/v5" rel="noopener ugc nofollow" target="_blank"> docs </a>中描述的Android集成步骤对我不起作用。我认为，原因是所描述的步骤是针对原生Android集成的，而不是针对react-native firebase库的，后者负责将事件发送到您的firebase分析帐户。为了使集成工作，他们要求开发人员在<strong class="is hj"> build.gradle </strong>文件中添加下一个依赖项</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="138f" class="li jx hi le b fi lj lk l ll lm">dependencies {<br/>  // ...<br/>  compile 'com.google.android.gms:play-services-tagmanager:11.0.4'<br/>}</span></pre><p id="a622" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在多次尝试和更改配置后，我发现我必须添加以下用法来代替:</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="1359" class="li jx hi le b fi lj lk l ll lm">dependencies {<br/>  // ...<br/>  implementation 'com.google.android.gms:play-services-tagmanager:17.0.0'<br/>}</span></pre><p id="ce8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">只有在那之后，我才能在firebase analytics的debugView中看到我的GTM标签。</p><h1 id="9318" class="jw jx hi bd jy jz lo kb kc kd lp kf kg kh lq kj kk kl lr kn ko kp ls kr ks kt bi translated">摘要</h1><p id="6cdb" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">差不多就这些了，伙计们！我希望，这篇短文能帮助你节省时间，并把它奉献给一些更愉快的员工。在新的或已经交付的react-native基础项目上设置GTM是相当容易的，只要所有步骤都正确通过，并且信息符合您的上下文和环境。</p></div></div>    
</body>
</html>