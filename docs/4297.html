<html>
<head>
<title>Creating a Player-Controlled Elevator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创造一个玩家控制的电梯</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-player-controlled-elevator-9e51631f77d6?source=collection_archive---------21-----------------------#2021-07-14">https://medium.com/nerd-for-tech/creating-a-player-controlled-elevator-9e51631f77d6?source=collection_archive---------21-----------------------#2021-07-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2334" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">目标:</strong>创建一个玩家可以用上下箭头控制的电梯系统。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/77dfc48228d9edbb1c246ae2051957e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/1*i88PfQRuTd6uYtNP3oK2fA.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">向下…然后向上。</figcaption></figure><p id="ca18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很像我们的移动平台(<a class="ae jp" rel="noopener" href="/nerd-for-tech/creating-a-moving-platform-ac53487f9498">https://medium . com/nerd-for-tech/creating-a-moving-platform-AC 53487 f 9498</a>)，我们希望电梯停靠的楼层将是空的<em class="jq">游戏对象</em>，只有一个<em class="jq">转换</em>组件。然而，与只有两个点的移动平台不同，我们将楼层存储在一个<em class="jq">数组</em>中，所以我们可以想要多少就有多少。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/33683361e3accc74cf6cf63b0e4023f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*LkbwxBDff5QwMg-680xd1w.png"/></div></figure><p id="989a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们电梯的<em class="jq">更新</em>功能中，如果玩家在电梯的楼层并且电梯没有当前目标，电梯将检查玩家的输入。</p><p id="bcb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们继续之前，我应该提到在下面的设置中，最高的楼层是<em class="jq">元素 0 </em>，并且下面的每一层<em class="jq">的<em class="jq">增加</em>1。如果这个系统更适合你自己的想法，你当然可以改变它。玩家将看不到这些——箭头将简单地<em class="jq">工作</em>。</em></p><p id="dc97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果玩家按了向上箭头，而电梯不在最高楼层，我们将<em class="jq">减少</em>当前楼层数并启动<em class="jq"> MoveOverSeconds </em>协程。</p><p id="a81c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果玩家按下向下箭头，而电梯不在最低层，我们将<em class="jq">增加</em>当前楼层数并启动<em class="jq"> MoveOverSeconds </em>协程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es js"><img src="../Images/7222f091d8fcaef3f7a3798a8092248e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YQi10az4AL4fcKUZFHT6tA.png"/></div></div></figure><p id="b599" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jq"> MoveOverSeconds </em>协程需要知道我们的<em class="jq"> end </em>位置(新的当前楼层的位置)以及电梯换层所需的时间。</p><p id="8358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当协程启动时，它将<em class="jq"> _hasTarget </em>标记为<em class="jq"> true </em>，以阻止玩家在电梯移动时向其发出新命令。然后，它启动一个计时器，并记录开始位置(当前位置)。</p><p id="dd95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jq">当</em><em class="jq">经过的时间</em>小于电梯完成移动所需的时间时，它将使用线性插值(<em class="jq"> Lerp </em>)来计算每一帧应该移动的距离。然后，它将更新计时器，并等待当前帧结束。</p><p id="d9fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦时间结束，升降机确定它准确地处于其结束位置，并将<em class="jq"> _hasTarget </em>设置为<em class="jq"> false </em>。现在玩家可以选择一个新的楼层。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jx"><img src="../Images/dd20b972f44192366a853eaa1a344367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*NyD88IeKLBqF6QZhcofTQQ.png"/></div></figure><p id="caf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一点:就像移动平台一样，我们需要让玩家对象在乘坐电梯时成为电梯的<em class="jq">子对象</em>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jy"><img src="../Images/4671939422c863fb2616034f8220781c.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*O3Zab_VuWD2W3NGckw7HTA.png"/></div></figure></div></div>    
</body>
</html>