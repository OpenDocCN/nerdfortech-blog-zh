<html>
<head>
<title>Hands-on Automating the App Deployment through CI/CD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过 CI/CD 实践自动化应用部署</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/hands-on-automating-the-app-deployment-through-ci-cd-4e51a680eae0?source=collection_archive---------2-----------------------#2022-07-07">https://medium.com/nerd-for-tech/hands-on-automating-the-app-deployment-through-ci-cd-4e51a680eae0?source=collection_archive---------2-----------------------#2022-07-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ec87e86cf8cdd9a7dfe8c32a11743716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KnWcoes3KuQ5u7ay7NZVQ.jpeg"/></div></div></figure><p id="b711" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">概述:</strong> <br/>在本文中，我们的目标是构建一个 CI/CD 管道来自动化应用程序部署，这意味着对项目所做的任何更改都将被自动部署。</p><p id="8efa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将要实现的图形:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/73b254631fcff3b02aeadc5ef569048a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XeKtGtmMGGt8Nk4w5IkjKg.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/a233ed3a0993e43d51de0302e3818e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LnJw5PeKVIDQX2ozUEYN4w.png"/></div></div></figure><p id="80ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第一步:派生回购<br/> </strong>我们将从 LUIT 网站为这个特定的任务派生回购。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/c4bede868cc5efa4550778d4321b985c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4qGRYgx8a_sB4eiaaTugpA.png"/></div></div></figure><p id="36b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分叉的原因:我们将使用这个网站的源代码来工作，并将使用 GitHub 作为我们代码管道的源代码。</p><p id="8d2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤 2:创建并配置 S3 存储桶。<br/> </strong>现在是时候创建 S3 桶了，并将它配置为托管一个静态网站。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/85c4cd6a0af8d9576c63383a64548bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1FIfePtXd4JylVBeC-N1ew.png"/></div></div></figure><p id="8c3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要了解如何创建 s3 bucket 来托管静态网站<a class="ae ke" rel="noopener" href="/nerd-for-tech/how-to-configure-a-static-website-using-a-custom-domain-registered-with-route-53-6f633fb86581">请点击这里</a>。这个 s3 存储桶将作为 CI/CD 管道中的“部署提供者”。这意味着，当我们创建 CI/CD 管道时，这个 S3 存储桶将托管网站，其端点可用于查看我们网站的变化。</p><p id="79a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤 3:创建 CI/CD 管道<br/> </strong>下一步是使用 AWS Codepipeline 服务创建管道。转到 AWS 代码管道并创建一个新管道。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/0851cf95ea226f8a7bf93f10836d5612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vVAvnPQ5a7-TKQCH-sgt-A.png"/></div></div></figure><p id="586b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kc">命名管道后，单击下一步添加源阶段。</em></p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/f9a7158fdf1041768d31234ab5a674bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*84J-xKfAj3PajTVflevsuQ.png"/></div></div></figure><p id="c231" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加 GitHub 版本 2 作为源代码提供者(这意味着代码管道将使用 GitHub 和指定的 repo 作为源代码的来源)。选择您的连接、repo 和 master 作为分行名称。</p><p id="ed19" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kc">点击下一步进入构建阶段</em></p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/a8b1e2b4d268ae826e2496cab2e09f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rEELnzPnGteJxLn_wuHvbA.png"/></div></div></figure><p id="3ab2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加 CodeBuild 作为构建提供程序，单击“创建项目”并命名您的项目，在“环境”下选择“托管映像”，选择“运行时”作为标准，选择映像的最新版本，并选择“新服务角色”。在 BuildSpec 下选择默认设置，然后继续管道化。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/599e3d46840bb50fd8dcd9d0f348028a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FF9hJgevwgV3EcrKDQ2Shw.png"/></div></div></figure><p id="2b61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加 s3 bucket 作为部署提供者，这是网站托管的位置。因此，每当我们在源代码中进行任何更改时，都会触发 ci/cd 管道，因此，这些更改将反映在 s3 存储桶中，并进一步反映在网站的 UI 上。</p><p id="463e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建代码管道后，您的控制台将如下所示</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/23a3f08834190930d0216370596711ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SNS8hDUICW9e_K4owCm7gw.png"/></div></div></figure><p id="de23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你点击这条管道时，它看起来像这样</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/a6f01976059a51cf2ee4d69907518746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yDV2yT4vtw4ns5tHz9kqpA.png"/></div></div></figure><p id="72de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，既然我们能够成功地创建我们的代码管道，那么是时候回到 index.html 文件的 S3 桶并检查其输出了</p><p id="433e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤 3:验证您可以访问静态网站<br/> </strong>我们现在将检查我们的 s3 存储桶是否能够成功托管静态网站。在检查 index.html 的端点时，我们得到下面的输出</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/7284da7c57785de79d0c51e8c3e6e382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_cwDNZRAEj84PzNy1hPDw.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx translated">单击 index.html 并在新窗口中打开其端点</figcaption></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/071bd55b49ca7e898438e70b8b5e6367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q_F0LgfqnTOCu0N6VBR4NA.png"/></div></div></figure><p id="6a38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这证明它在工作。现在我们需要检查我是否对我的代码或文件做了任何更改，它是否会自动部署更改。</p><p id="5428" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤 4:验证代码中的变更是否通过 CI/CD 自动部署变更</strong> <br/>现在是测试我们的 CI/CD 的时候了，它应该通过触发代码管道自动部署变更。为此，我在 GitHub 上编辑了 Index.html。我将标题改为“使用管道将代码部署到 S3 ”,这是前面的“使用管道将代码部署到 EC2”。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/4f707ab4c2b899a17d19a9d554d7ca70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dlA36lfrd9V3LnbX1YspeQ.png"/></div></div></figure><p id="9263" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦我完成了我的更改，codePipline 就进入了 progress 状态。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/8712e76c873ea47a34cf706898d99b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJsocxWP3pvT_AOI1X96yw.png"/></div></div></figure><p id="589f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">部署成功一段时间后，我重复了步骤 3 来查看我的更改，并且我得到了下面的结果，而不必手动部署它。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kq"><img src="../Images/e3387e9a46a60a3e62080260274b67b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*vJWcddHEgVUmm3_WCxRB7w.png"/></div></figure><p id="0585" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读！继续推</p></div></div>    
</body>
</html>