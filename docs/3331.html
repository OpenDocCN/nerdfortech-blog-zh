<html>
<head>
<title>Reusable dropdown in Elm with parameterized types— part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有参数化类型的 Elm 中的可重用下拉列表—第二部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/reusable-dropdown-in-elm-with-parameterized-types-part-ii-77f58515a662?source=collection_archive---------17-----------------------#2021-06-06">https://medium.com/nerd-for-tech/reusable-dropdown-in-elm-with-parameterized-types-part-ii-77f58515a662?source=collection_archive---------17-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4560" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">曾经需要在表单上有一个下拉列表吗？还是在配置页面上？也许是不同类型不同目的的多次下拉？elm-ui 很棒，但是它没有提供下拉的原语。在本指南中，您将构建一个可重用的下拉菜单，同时，您将了解参数化类型。</p><p id="d5b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将在第一部分所做工作的基础上进行构建，但是如果你熟悉 Elm，你应该不难理解。第一部分的完整代码可以在这个<a class="ae jd" href="https://github.com/diogo-aos/elm-ui-dropdown/releases/tag/partI" rel="noopener ugc nofollow" target="_blank"> Github </a>库中找到。</p><p id="9b6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第一部分中，我们构建了这个:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/e333245be76176bcae75b8fba858cb48.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/1*MQxx5Oy8X7cAVwTExGbLBQ.gif"/></div></figure><p id="c0c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们所做的方式，不能再用于其他类型。我们将构建一个简单的可重用组件，它具有一致的样式，可以通过调用视图中的函数和很少添加的逻辑来重用。</p><p id="109e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面回顾一下我们在第一部分中构建的视图和更新逻辑:</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="e422" class="jr js hi jn b fi jt ju l jv jw">type alias Model =<br/>    { favoriteFood : Maybe Food<br/>    , status : Status}</span><span id="20a6" class="jr js hi jn b fi jx ju l jv jw">type Status<br/>    = Normal<br/>    | SelectFood</span><span id="c0b7" class="jr js hi jn b fi jx ju l jv jw">view : Model -&gt; Html.Html Msg<br/>view model =<br/>    let<br/>        selectedFoodName = <br/>            case model.favoriteFood of<br/>                Nothing -&gt; "No food selected. Click here to select."<br/>                Just food -&gt; food.name<br/>				dropdown =<br/>            case model.status of<br/>                Normal -&gt;<br/>                    E.el<br/>                        [ Border.width 1<br/>                        , Border.dashed<br/>                        , E.padding 3<br/>                        , Events.onClick ClickedSelectFood<br/>                        ]<br/>                        (E.text selectedFoodName)<br/>                SelectFood -&gt;<br/>                    E.el<br/>                        [ Border.width 1<br/>                        , Border.dashed<br/>                        , E.padding 3<br/>                        , E.below (viewFoodList foodList)<br/>                        ]<br/>                        (E.text selectedFoodName)<br/>    in<br/>    E.layout<br/>        []<br/>        (<br/>        E.column<br/>            [ E.centerX<br/>            , E.centerY<br/>        ]<br/>            [ E.text "You favorite food is:"<br/>            , dropdown<br/>            , E.text "... the best food."<br/>            ]<br/>        )</span><span id="4c23" class="jr js hi jn b fi jx ju l jv jw">type Msg<br/>    = NoAction<br/>    | ClickedSelectFood<br/>      </span><span id="b6da" class="jr js hi jn b fi jx ju l jv jw">update : Msg -&gt; Model -&gt; Model<br/>update msg model =<br/>    case msg of<br/>        NoAction -&gt;<br/>            model<br/>        ClickedSelectFood -&gt;<br/>            { model | status = SelectFood }</span></pre><p id="bb68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于单个下拉菜单来说，这很好，但是如果我们有 5 个下拉菜单，我们就需要 5 个不同的状态。那是许多样板文件。我们将创建一个新的下拉列表类型来保存下拉列表的状态和值。</p><p id="4f34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们改变这一点。与 dropdown 关联的是一个选项列表和一个将选项转换为字符串(以显示)的函数。当一个选项被选中时，我们还需要一条消息来触发。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="5e3d" class="jr js hi jn b fi jt ju l jv jw">type Dropdown a<br/>	= Normal (Maybe a)<br/>	| Select</span></pre><p id="3ff1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个参数化类型。这个下拉列表可以接受任何类型(食物、国家、人、车，任何你需要的)。看到那边的那个了吗？这就是类型变量。</p><p id="7340" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此<code class="du jy jz ka jn b">Normal</code>与我们之前的状态类型相冲突。继续删除整个类型。现在，我们将更改模型以引用此下拉列表类型。我们需要一个<code class="du jy jz ka jn b">Food</code>下拉菜单——这个<code class="du jy jz ka jn b">Food</code>将是<code class="du jy jz ka jn b">Dropdown</code>的类型。</p><p id="593c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们在做的时候，也改变最初的模型。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="d8c5" class="jr js hi jn b fi jt ju l jv jw">type alias Model =<br/>    { favoriteFood : Maybe Food<br/>    }</span><span id="28a5" class="jr js hi jn b fi jx ju l jv jw">initialModel : Model<br/>initialModel =<br/>    { favoriteFood = Normal Nothing<br/>    }</span></pre><p id="99bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也不再需要地位。<code class="du jy jz ka jn b">Dropdown</code>将保持其状态在该类型内。</p><p id="544e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，让我们处理更新。由于我们不再有<code class="du jy jz ka jn b">Status</code>，我们也需要开始使用新的<code class="du jy jz ka jn b">Dropdown</code>类型。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="b459" class="jr js hi jn b fi jt ju l jv jw">update : Msg -&gt; Model -&gt; Model<br/>update msg model =<br/>    case msg of<br/>        NoAction -&gt;<br/>            model<br/>            <br/>        ClickedSelectFood -&gt;<br/>            { model | favoriteFood = Select }<br/>            <br/>        ClickedDropdownFood food -&gt;<br/>            { model | favoriteFood = Normal (Just food) }</span></pre><p id="e99a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们来看看<code class="du jy jz ka jn b">view</code>函数。继续删除整个 let 表达式。当你在的时候，删除<code class="du jy jz ka jn b">viewFood</code>和<code class="du jy jz ka jn b">viewFoodList</code>。我们将用通用函数替换它们。现在，创建一个<code class="du jy jz ka jn b">dropdownView</code>函数。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="5933" class="jr js hi jn b fi jt ju l jv jw">dropdownView : Dropdown a -&gt; List a -&gt; (a -&gt; String) -&gt; Msg -&gt; (a -&gt; Msg) -&gt; E.Element Msg<br/>dropdownView dropdownState options toString openMenuMsg clickedOptionMsg =<br/>    let<br/>        selectedName =<br/>            case dropdownState of<br/>                Normal (Just someA) -&gt; toString someA<br/>                _ -&gt; "Click to select"<br/>        menu : E.Element Msg<br/>        menu =<br/>            if not (dropdownState == Select) then<br/>                    E.el<br/>                        [ Border.width 1<br/>                        , Border.dashed<br/>                        , E.padding 3<br/>                        , Events.onClick openMenuMsg<br/>                        ]<br/>                        (E.text selectedName)<br/>            else<br/>                let<br/>                    mouseOverColor : E.Color<br/>                    mouseOverColor = E.rgb 0.9 0.9 0.1<br/>                                <br/>                    backgroundColor : E.Color<br/>                    backgroundColor = E.rgb 1 1 1<br/>                            <br/>                    viewOption : a -&gt; E.Element Msg<br/>                    viewOption option =<br/>                        E.el<br/>                            [ E.width E.fill<br/>                            , E.mouseOver [Background.color overColor]<br/>                            , Background.color white<br/>                            , Events.onClick (clickedOptionMsg option)<br/>                            ]<br/>                            (E.text &lt;| toString option)</span><span id="a616" class="jr js hi jn b fi jx ju l jv jw">                    viewOptionList : List a -&gt; E.Element Msg<br/>                    viewOptionList inputOptions =<br/>                        E.column [] &lt;|<br/>                            List.map viewOption inputOptions<br/>                                     <br/>                in<br/>                    E.el<br/>                        [ Border.width 1<br/>                        , Border.dashed<br/>                        , E.padding 3<br/>                        , E.below (viewOptionList options)<br/>                        ]<br/>                        (E.text selectedName)<br/>    in<br/>        menu</span></pre><p id="7bbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们一步一步来。该函数有 5 个参数。是的，很多。他们是做什么的？</p><ul class=""><li id="cd47" class="kb kc hi ih b ii ij im in iq kd iu ke iy kf jc kg kh ki kj bi translated"><code class="du jy jz ka jn b">dropdownState</code>:给出要绘制的下拉菜单的状态。</li><li id="da39" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><code class="du jy jz ka jn b">options</code>:给出用户可以选择的可能选项列表。</li><li id="c825" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><code class="du jy jz ka jn b">toString</code>:将选项类型转换为字符串的函数</li><li id="2fdd" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><code class="du jy jz ka jn b">openMenuMsg</code>:用户点击下拉选择选项时触发的消息。</li><li id="4d4d" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><code class="du jy jz ka jn b">clickedOptionMsg</code>:用户选择一个选项时触发的消息。</li></ul><p id="9fc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将进一步简化这一点，但那将是以后的事。现在，注意 let 表达式——所有的逻辑都在那里。这和我们之前在原始视图中看到的差不多。<code class="du jy jz ka jn b">viewFood</code>被<code class="du jy jz ka jn b">viewOption</code>取代，现在在<code class="du jy jz ka jn b">a</code>上被参数化。<em class="kp">同上<code class="du jy jz ka jn b">viewFoodList</code>和<code class="du jy jz ka jn b">viewOptionList</code>的</em>。所有的造型都一样。现在最大的不同是条件。我们现在检查下拉状态是否在<code class="du jy jz ka jn b">Select</code>上(意味着选择菜单是打开的)。</p><p id="275c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将看到以下内容:</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="4c85" class="jr js hi jn b fi jt ju l jv jw">view : Model -&gt; Html.Html Msg<br/>view model =<br/>    E.layout<br/>        []<br/>        (<br/>        E.column<br/>            [ E.centerX<br/>            , E.centerY<br/>        ]<br/>            [ E.text "You favorite food is:"<br/>            , dropdownView model.favoriteFood foodList .name ClickedSelectFood ClickedDropdownFood<br/>            , E.text "... the best food."<br/>            ]<br/>        )</span></pre><p id="b85f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下拉状态是模型中的<code class="du jy jz ka jn b">favoriteFood</code>。<code class="du jy jz ka jn b">foodList</code>是在[TODO add link]第一部分中定义的食物列表。<code class="du jy jz ka jn b">.name</code>是用于将<code class="du jy jz ka jn b">Food</code>转换为<code class="du jy jz ka jn b">String</code>的函数。然后我们有两条由两个相关事件触发的消息。</p><p id="36d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仅此而已。我们现在又有了一个可用的下拉菜单。让我们进一步简化。让我们为每个下拉列表提供一条消息，并将选项列表保留在下拉列表状态中。</p><h1 id="9df7" class="kq js hi bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">进一步简化</h1><p id="13bb" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">第一个修改是将选项列表添加到<code class="du jy jz ka jn b">Dropdown</code>的<code class="du jy jz ka jn b">Select</code>变体中。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="1b1f" class="jr js hi jn b fi jt ju l jv jw">type Dropdown a<br/>    = Normal (Maybe a)<br/>    | Select (List a)</span></pre><p id="4b29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们只需遵循编译器错误消息，并在<code class="du jy jz ka jn b">update</code>和<code class="du jy jz ka jn b">view</code>条件中进行一些更改。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="6be5" class="jr js hi jn b fi jt ju l jv jw">update : Msg -&gt; Model -&gt; Model<br/>update msg model =<br/>    case msg of<br/>        -- ...</span><span id="f19f" class="jr js hi jn b fi jx ju l jv jw">        ClickedSelectFood -&gt;<br/>            { model | favoriteFood = Select foodList }</span><span id="217a" class="jr js hi jn b fi jx ju l jv jw">        -- ...<br/>            <br/>               </span><span id="6f4f" class="jr js hi jn b fi jx ju l jv jw">dropdownView : Dropdown a -&gt; (a -&gt; String) -&gt; Msg -&gt; (a -&gt; Msg) -&gt; E.Element Msg<br/>dropdownView dropdownState toString openMenuMsg clickedOptionMsg =<br/>    let<br/>        selectedName =<br/>            case dropdownState of<br/>                Normal (Just someA) -&gt; toString someA<br/>                _ -&gt; "Click to select"</span><span id="0efa" class="jr js hi jn b fi jx ju l jv jw">        menu : E.Element Msg<br/>        menu =<br/>            case dropdownState of<br/>                Select options -&gt;<br/>                    let<br/>                        mouseOverColor : E.Color<br/>                        mouseOverColor = E.rgb 0.9 0.9 0.1<br/>                                         <br/>                        backgroundColor : E.Color<br/>                        backgroundColor = E.rgb 1 1 1<br/>                                          <br/>                        viewOption : a -&gt; E.Element Msg<br/>                        viewOption option =<br/>                            E.el<br/>                                [ E.width E.fill<br/>                                , E.mouseOver [Background.color overColor]<br/>                                , Background.color white<br/>                                , Events.onClick (clickedOptionMsg option)<br/>                                ]<br/>                                (E.text &lt;| toString option)<br/>                                    <br/>                        viewOptionList : List a -&gt; E.Element Msg<br/>                        viewOptionList inputOptions =<br/>                            E.column [] &lt;|<br/>                                List.map viewOption inputOptions<br/>                                            <br/>                    in<br/>                        E.el<br/>                            [ Border.width 1<br/>                            , Border.dashed<br/>                        , E.padding 3<br/>                        , E.below (viewOptionList options)<br/>                        ]<br/>                        (E.text selectedName)                <br/>                _ -&gt;<br/>                    E.el<br/>                        [ Border.width 1<br/>                        , Border.dashed<br/>                        , E.padding 3<br/>                        , Events.onClick openMenuMsg<br/>                        ]<br/>                        (E.text selectedName)<br/>    in<br/>        menu<br/>    <br/>                            <br/>view : Model -&gt; Html.Html Msg<br/>view model =<br/>    E.layout<br/>        []<br/>        (<br/>        E.column<br/>            [ E.centerX<br/>            , E.centerY<br/>        ]<br/>            [ E.text "You favorite food is:"<br/>            , dropdownView  model.favoriteFood .name ClickedSelectFood ClickedDropdownFood<br/>            , E.text "... the best food."<br/>            ]<br/>        )</span></pre><p id="ad9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">if 表达式被替换为 case，因为现在我们需要从 dropdown <code class="du jy jz ka jn b">Select</code> variant 中获取选项列表。</p><p id="84c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们为每个下拉菜单准备一条消息。我们将创建一个新的类型，指定可用的操作，即打开菜单并单击一个选项。之后，我们只需要为每个下拉菜单提供一条消息。从那里开始，它只是跟随编译器错误来重构程序的其余部分。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="2033" class="jr js hi jn b fi jt ju l jv jw">type DropdownAction a<br/>    = OpenList<br/>    | ClickedOption a</span><span id="cd9b" class="jr js hi jn b fi jx ju l jv jw">type Msg<br/>    = FoodDropdown (DropdownAction Food)</span></pre><p id="6b94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jy jz ka jn b">DropdownAction</code>也被参数化了，现在我们的食物下拉菜单只有一条消息，其中包含一个由用户活动触发的<code class="du jy jz ka jn b">DropdownAction</code>。我们还去掉了从第一部分的第一个例子开始就一直拖着的<code class="du jy jz ka jn b">NoAction</code>消息</p><p id="981f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将改变<code class="du jy jz ka jn b">update.</code>中的逻辑</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="eeae" class="jr js hi jn b fi jt ju l jv jw">update : Msg -&gt; Model -&gt; Model<br/>update msg model =<br/>    case msg of<br/>        FoodDropdown action -&gt;<br/>            case action of<br/>                OpenList -&gt;<br/>                    { model | favoriteFood = Select foodList }<br/>                ClickedOption food -&gt;<br/>                    { model | favoriteFood = Normal (Just food) }</span></pre><p id="a538" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本质上，我们之前的两条消息仍然存在，但现在它们只是可能的下拉操作的变体，典型的是<code class="du jy jz ka jn b">DropdownAction</code>。这实际上更有意义。如果我们想在下拉列表中添加更多的动作，我们不需要改变这个消息，只需要改变类型和结果逻辑。</p><p id="7697" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一位是<code class="du jy jz ka jn b">view</code>。由于变化很小，我将只介绍重构的几行代码。首先，我们现在只接收一条消息(它实际上是一个接收一个<code class="du jy jz ka jn b">DropdownAction</code>并在一个<code class="du jy jz ka jn b">Msg</code>中转换它的函数，因为所有类型变量也兼作函数)。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="5ddf" class="jr js hi jn b fi jt ju l jv jw">dropdownView : Dropdown a -&gt; (a -&gt; String) -&gt; (DropdownAction a -&gt; Msg) -&gt; E.Element Msg<br/>dropdownView dropdownState toString toMsg =</span></pre><p id="c0bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我们需要用相应的 DropdownAction 消息替换 onClick 事件。一、内<code class="du jy jz ka jn b">viewOption</code>。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="cf02" class="jr js hi jn b fi jt ju l jv jw">, Events.onClick (toMsg (ClickedOption option))</span></pre><p id="d891" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，在呈现默认(关闭的)下拉菜单的元素内部。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="d7c0" class="jr js hi jn b fi jt ju l jv jw">, Events.onClick (toMsg OpenList)</span></pre><p id="fb75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你知道了。在大约 1500 个单词之后(计算代码，你会说这是欺骗，是的，我知道，但我仍然不得不写它)，我们完全回到了开始的地方。啊…生命的循环。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ls"><img src="../Images/51d6af84c5240ff3c4d11daf311a049b.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/0*uNZul11K0QqK1Zr_"/></div></figure><p id="90c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是现在，我们只需很少的工作就可以添加另一个下拉列表。让我们添加一个最喜欢的汽车下拉列表。我们创建一个<code class="du jy jz ka jn b">Car</code>类型，将其添加到<code class="du jy jz ka jn b">Model</code>，在<code class="du jy jz ka jn b">initialModel</code>中初始化它，创建一个<code class="du jy jz ka jn b">CarDropdown</code>消息，基本上复制/粘贴来自<code class="du jy jz ka jn b">FoodDropdown</code>的逻辑，最后在<code class="du jy jz ka jn b">view</code>中添加两行。</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="9a48" class="jr js hi jn b fi jt ju l jv jw">type alias Model =<br/>    { favoriteFood : Dropdown Food<br/>    , favoriteCar : Dropdown Car<br/>    }</span><span id="01aa" class="jr js hi jn b fi jx ju l jv jw">type alias Car = {id : Int, name: String}</span><span id="f985" class="jr js hi jn b fi jx ju l jv jw">type Msg<br/>    = FoodDropdown (DropdownAction Food)<br/>    | CarDropdown (DropdownAction Car)</span><span id="6824" class="jr js hi jn b fi jx ju l jv jw">update : Msg -&gt; Model -&gt; Model<br/>update msg model =<br/>    case msg of<br/>        -- ...</span><span id="007c" class="jr js hi jn b fi jx ju l jv jw">        CarDropdown action -&gt;<br/>            case action of<br/>                OpenList -&gt;<br/>                    { model | favoriteCar = Select [Car 0 "BMW", Car 1 "Tesla"] }<br/>                ClickedOption car -&gt;<br/>                    { model | favoriteCar = Normal (Just car) }</span><span id="3239" class="jr js hi jn b fi jx ju l jv jw">view : Model -&gt; Html.Html Msg<br/>view model =<br/>    E.layout<br/>        []<br/>        (<br/>        E.column<br/>            [ E.centerX<br/>            , E.centerY<br/>        ]<br/>            [ E.text "You favorite food is:"<br/>            , dropdownView  model.favoriteFood .name FoodDropdown<br/>            , E.text "... the best food."<br/>            , E.text "Favorite car:"<br/>            , dropdownView model.favoriteCar .name CarDropdown<br/>            ]<br/>        )</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lt"><img src="../Images/0c0bfa2f19435de2ca74155d7d39110f.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/0*BILQHxa3ryQvhgxA"/></div></figure><p id="0b4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们完事了。一个简单的，可重复使用的下拉菜单。如果您从未使用过参数化类型，请花点时间思考一下它们的潜力和简单性。我们实际上可以根据需要进一步简化，例如，有一个根据输入更新下拉菜单的功能。优点之一是每个下拉菜单的风格一致(或者，咳咳，没有下拉菜单)。你可以在这个<a class="ae jd" href="https://github.com/diogo-aos/elm-ui-dropdown/releases/tag/partII_done" rel="noopener ugc nofollow" target="_blank"> Github </a>库中查看完整的代码。</p><p id="9224" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第三部分中，我们将使用我们刚刚获得的使用参数化类型的知识和实践来使事情变得稍微复杂一些。我们将构建一个组件，允许我们根据参数选择几个选项，或者一个都不选。这一切都是可配置的。这将基本上是一个类固醇下拉。</p></div></div>    
</body>
</html>