<html>
<head>
<title>How to Dockerize a NestJs Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何对 NestJs 项目进行分类</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-dockerize-a-nestjs-project-e80774d2459b?source=collection_archive---------1-----------------------#2022-07-09">https://medium.com/nerd-for-tech/how-to-dockerize-a-nestjs-project-e80774d2459b?source=collection_archive---------1-----------------------#2022-07-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="340d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文逐步简化并解释了 NestJs 应用程序的 docker 化过程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3aa00eb696234a6972da4bc3b49c21c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WgCqpt07s_95CjmN.png"/></div></div></figure><p id="0b69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了创建并连接到 NestJs 项目的数据库和/或部署它，我们必须对它进行 dockerize。这篇文章将以最简单的方式带你完成这个过程</p><p id="42ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，你必须确保你的系统上有 docker。然后，要对项目进行归档，只需遵循以下步骤:</p><ul class=""><li id="8c6c" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">在项目文件夹下创建一个名为 Dockerfile 的文件。将以下内容粘贴到:</li></ul><pre class="je jf jg jh fd jy jz ka kb aw kc bi"><span id="93ee" class="kd ke hi jz b fi kf kg l kh ki">FROM node:16 //edit the version to yours</span><span id="4013" class="kd ke hi jz b fi kj kg l kh ki">WORKDIR /computer_username/src/app  //edit the username to yours</span><span id="b7e1" class="kd ke hi jz b fi kj kg l kh ki">COPY package*.json ./</span><span id="0331" class="kd ke hi jz b fi kj kg l kh ki">RUN npm install</span><span id="b493" class="kd ke hi jz b fi kj kg l kh ki">COPY . .</span><span id="d70c" class="kd ke hi jz b fi kj kg l kh ki">RUN npm run build</span><span id="183d" class="kd ke hi jz b fi kj kg l kh ki">EXPOSE 8080<br/>CMD ["node", "dist/main"]</span></pre><ul class=""><li id="0557" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">创建一个名为。dockerignore 就在项目文件夹下，将下面的内容粘贴在:</li></ul><pre class="je jf jg jh fd jy jz ka kb aw kc bi"><span id="7f57" class="kd ke hi jz b fi kf kg l kh ki">node_modules<br/>npm-debug.log</span></pre><ul class=""><li id="5b15" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">要构建 docker 映像，请转到项目外的一个目录并运行:</li></ul><blockquote class="kk kl km"><p id="c3f5" class="if ig kn ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated">docker 构建 my-project-t computer _ username/my-project</p></blockquote><ul class=""><li id="f650" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">该过程完成后，通过运行以下命令验证您已经成功:</li></ul><blockquote class="kk kl km"><p id="0566" class="if ig kn ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated">docker 图像</p></blockquote><ul class=""><li id="51f8" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">要运行映像，请运行以下命令:</li></ul><blockquote class="kk kl km"><p id="4f71" class="if ig kn ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated">docker run -p 3000:8080 -d 计算机 _ 用户名/我的项目</p></blockquote><p id="10e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>上面的 3000 是 NestJs 应用程序的默认端口，您应该将其更改为您的项目使用的任何端口。另一方面，8080 是我们分配给 Dockerfile 上的映像的端口。您可以随意更改，但要确保 docker 文件中的内容与命令中的内容相匹配。</p><p id="e23f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从那时起，如果您试图通过 3000 端口访问您的项目，它将不会返回任何内容，因为项目现在将在端口 8080 上运行。</p><p id="0056" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用以下命令查看正在运行的容器:</p><blockquote class="kk kl km"><p id="1695" class="if ig kn ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated">docker ps</p></blockquote><p id="994f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将为您提供一个带有自动分配的“名称”的 docker 容器列表。如果你的容器的名字是，比如说，眼花缭乱 _ hopper 您可以使用以下命令停止该特定容器:</p><blockquote class="kk kl km"><p id="8f1a" class="if ig kn ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated">码头工人停止眼花缭乱 _ 料斗</p></blockquote><p id="1184" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧啊。我们准备好了。</p></div></div>    
</body>
</html>