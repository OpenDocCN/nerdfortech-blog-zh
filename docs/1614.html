<html>
<head>
<title>From React to Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从反应到还原</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/from-react-to-redux-350fd0f5e3a?source=collection_archive---------12-----------------------#2021-03-28">https://medium.com/nerd-for-tech/from-react-to-redux-350fd0f5e3a?source=collection_archive---------12-----------------------#2021-03-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0e5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您对 React 很熟悉，并且想要了解 Redux，那么您来对地方了。Redux 应用程序有很多样板文件。本文将帮助您理解数据流，并习惯使用新术语。</p><p id="9978" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您的 React 应用程序有一个受控制的表单。您在表单组件中处理它的状态，并通过父组件的 props 传递函数，这样您就可以向上传递表单的状态，这样您就可以将该状态向下传递给另一个子组件来显示它。在 Redux 中，您不需要指定将数据发送到哪里——所有数据都存储在存储中，并且可以从任何组件访问。</p><p id="6247" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的应用程序中，我创建了一个我喜欢的颜色列表。让我们从一个组件开始，它看起来仍然与它的 React 对应物<code class="du je jf jg jh b">AddColorForm</code>相对相似。</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/d08baa516b71729883690452d5fdacdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*5SoQTRwkjnIbDxUORy6ZNA.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">这里没有什么新的东西:我们在顶部导入了一些文件和函数(我们一会儿就会看到)，这是一个类组件，带有一些绑定的更改处理程序。</figcaption></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/5135b1386168b03399b8673400c1fab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*CMM1uX-u3toaZrdDZB0Bfg.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">我们用文本<input/>呈现一个表单，将输入的值放入这个组件的状态，然后在<input/>中显示它，这样用户就可以看到他们输入了什么。单击按钮时，我们从 state 中获取颜色，并将其作为参数传递给' this.props.addColor '。</figcaption></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ji"><img src="../Images/36f6998c346f981649165641310cba96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*r2WuYo8r6g82wDnYfZCTEQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">在这里，我们检查“addColor”是一个带有 PropTypes 的函数。我们还使用了名为“mapDispatchToProps”的新方法，该方法允许我们将“addColor”函数引入该组件，并使用“this.props.addColor”调用它。“connect”是另一个 Redux 方法，它在这里连接我们的文件。</figcaption></figure><p id="9012" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以在导入中看到，<code class="du je jf jg jh b">addColor</code>来自一个名为<code class="du je jf jg jh b">actions/action</code>的文件，所以让我们来看看这个文件。</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/12600904e1ef6ccd62191f6773e73d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*p7OFbxKqwZu2QvOya96Ltw.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">在“mapDispatchToProps”中，我们在名为“dispatch”的方法中调用了“addColor”。这允许我们的操作调用我们的 reducers，并通过它发送类型和有效负载。在这种情况下，作为参数传递给' addColor '的任何内容都将是调用' addColor '时返回的对象的' payload'。</figcaption></figure><p id="d321" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du je jf jg jh b">ADD_COLOR</code>动作将发送它的类型和有效负载，并触发我们的缩减器，所以让我们看看我们的缩减器文件，<code class="du je jf jg jh b">colorsReducer.js</code>。</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/6c20c8e8a3bb8a33a4e4eecf8d951d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*MwnUu30Owcu9YBQL03y_7Q.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">我们在这里为我们的应用程序创建了一个“initialState ”,我们将它和我们的“action”一起传递给我们的“colors”reducer。“开关”正在检查“action.type”是否与它的任何一种情况相匹配。我们传递了“ADD_COLOR”作为我们的类型，因此 case 将返回“state”和我们的新颜色(在“action.payload”中找到)。所有的 reducers 都是同时触发的，所以如果这里的类型不匹配，我们将返回默认的“state”。</figcaption></figure><p id="6965" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，我们已经将新的颜色添加到 state 中，但是我们如何从我们的<code class="du je jf jg jh b">ColorList</code>组件中访问它呢？</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/3a2b0e3a647dc716529013fec4409a72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*dvW29Q4WqrQwsoxmYRkbkw.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">这里，我们引入了“商店”中的“颜色”数组，并对其进行映射，为每种颜色创建一个“色卡”组件。我们使用了另一种常见的方法“mapStateToProps ”,来接触“商店”,只带来我们需要的东西。在这种情况下，我们希望将 colors 数组称为“colors ”,并且我们已经告诉了“mapStateToProps”如何在“store”对象中找到该数组。</figcaption></figure><p id="939d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du je jf jg jh b">ColorCard</code>组件与它在 React 中的外观没有太大的不同:</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/dfe41697a47cd3f5e64d75f4fe90ebab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*v7RkdwJqvVbfDELlw3i4bA.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">因为我们在创建每个“颜色卡”组件时传入了“颜色”,所以我们可以在参数中析构它，并在这里简单地将其称为“颜色”。</figcaption></figure><p id="8057" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了一个简洁的<code class="du je jf jg jh b">App</code>组件，因为我们不需要在这个级别处理任何状态:</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/a6357660307bc468145ef9b8554f6fc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*r3fGKEbePl8R6OEB-oRglQ.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">我们所要做的就是调用表单组件和列表组件，它们能够根据需要将状态发送到存储区或从存储区接收状态。</figcaption></figure><p id="feaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，在我们应用程序的最顶端，我们有<code class="du je jf jg jh b">index.js</code>和<code class="du je jf jg jh b">reducer.js</code>:</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/27c58ffc7737f768f2a8bb39dded459d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*SSN34UgFa1UPNX2fsp26lg.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">` index.js '位于文件结构的根中，并且是我们创建` store '的地方，传入我们的` rootReducer '和我们想要使用的任何中间件。(注意:Redux 开发工具非常有用和强大，必须作为 Chrome 扩展和中间件添加到您的应用程序中。)我们还将我们的应用程序包装在一个“Provider”标签中，这使得“store”可用于这个标签下的任何组件。</figcaption></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/d50d36558fea1352a1ace35be2c88a80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*ss5K4ITISTWzQJDZVWzP-w.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">如果你有多个 reducer 文件，你可以把它们都列在“reducer.js”里，这样整个应用程序都可以使用它们。</figcaption></figure><p id="8a39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一点点<code class="du je jf jg jh b">html</code>和<code class="du je jf jg jh b">css</code>:</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/c23a9e1954b598706cd360792e1f2888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*53gGOFwjdePY2zuq1MSKxw.png"/></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/34de026f437f60384f54a9c76ca597e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*dqcknGZr2R_kVzb7qdCguQ.png"/></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/2150bdddd24a6a436a2b583de58a5e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*chlEp4n1yRciIIw9OuyTjA.png"/></div></figure><p id="5bc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你应该有一个功能列表应用程序！</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/fa5d16650cb8e506423a7e926acd1790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*0e8_ElgRpOd6ywMtXh7bEQ.png"/></div></figure><p id="8675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你在想“这个应用似乎不需要使用 Redux”，那你就对了。Redux 对于有许多层组件的复杂应用程序来说是最强大的——但是这应该让你知道它有多强大。</p><p id="5558" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多 Redux 的练习，请查看 Traversy Media 的<a class="ae jy" href="https://www.youtube.com/watch?v=93p3LxR9xfM&amp;t=1880s" rel="noopener ugc nofollow" target="_blank">教程</a>和【Scrimba 课程。如果你想构建自己的 Redux 应用，<a class="ae jy" href="https://github.com/tsaiDavid/simple-redux-boilerplate/tree/master/src/components" rel="noopener ugc nofollow" target="_blank">这是一个很好的基本 Redux 样板。</a></p></div></div>    
</body>
</html>