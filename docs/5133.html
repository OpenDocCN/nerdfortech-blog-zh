<html>
<head>
<title>Mobile Games in Unity: Animation Set Up- Idle, Run, and Flipping the Sprite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">手机游戏在统一:动画设置-闲置，运行，并翻转精灵</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/mobile-games-in-unity-animation-set-up-idle-run-and-flipping-the-sprite-5d8e16077a72?source=collection_archive---------5-----------------------#2021-08-31">https://medium.com/nerd-for-tech/mobile-games-in-unity-animation-set-up-idle-run-and-flipping-the-sprite-5d8e16077a72?source=collection_archive---------5-----------------------#2021-08-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f7f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将涵盖几个不同的东西。设置空闲动画、运行动画和精灵翻转功能。</p><p id="3bf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，闲置的动画。</p><p id="98ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这实际上非常简单！首先，我将选择玩家游戏对象下的精灵，并导航到动画窗口。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/4b8499c12c8c2afe395d46e20de3d3af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2MN0GQy0tRF-QplgoEPLBg.png"/></div></div></figure><p id="8348" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建动画，点击创建，保存到你喜欢的目录，然后下拉“字符”文件夹。在这里你可以找到组成 2D 动画的 PNG 文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jp"><img src="../Images/bee7c811208a14142642f4a0a484a99a.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*xQq2m4stLTFhM4o9GC_IGQ.png"/></div></figure><p id="9176" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击该对象，您会看到一些东西填充了检查器窗口。导航到“精灵编辑器”。在这里，您可以分割 spritesheet，以便所有 png 都具有相同的尺寸。这对于游戏中需要创建的所有动画来说将会非常方便。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/d6bc19f40b181b54adb8d778c207ef43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6TJF6YsyXITfkrzUtIFlwg.png"/></div></div></figure><p id="db3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相应地切片。下拉空闲文件夹，你会看到 33 个文件。选择第一个，然后按住 shift 键选择最后一个。这将选择所有这些选项。现在只需将它们全部拖入动画窗口。这将为每个文件创建关键帧。播放动画，你会看到空闲的动画发生。因为这将是默认动画，我们不需要在动画窗口设置任何参数。(如果你的移动速度很快，将样本设置为 15。)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jr"><img src="../Images/d9202ed8781cd08e856062d46b680fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bbIVSj3Iwt3w4k-yWzO2LA.gif"/></div></div></figure><p id="30e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这也正是我将为跑步动画所做的。我该如何从空闲状态转换到运行状态呢？</p><p id="3b85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 animator 窗口中，我可以设置一个可以通过代码操作的参数。我做了一个参数叫“移动”。如果这个值小于 0.1，我将运行动画转换回空闲状态。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/4d85355b3aa773a7eca2fc1a889bc98b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRJ1ZuFywW7V8nIjZ_2cnQ.png"/></div></div></figure><p id="6d16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了过渡到跑步，这将需要小于零(向左跑步)或大于 0(向右跑步)。我会用绝对值来实现。看看这个。</p><p id="b54e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我创建了一个名为 PlayerAnimation 的新类。这是我处理动画的地方。我有动画师的把柄。在这个例子中，我将动画中的浮动“移动”设置为绝对值“移动”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/626081ae4d334797ad30f946760dffa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J3ayJprdxEDzZrtnRZLUAA.png"/></div></div></figure><p id="9d7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个方法必须从某个地方获取某种浮点值。在播放器脚本中，我将“horizontalInput”设置为一个 float，这就是我想要确定的 float 的值。所以！在玩家脚本中，我只需要通过创建一个变量并在 start 中赋值来访问脚本。</p><p id="4e07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ju jv jw jx b">private PlayerAnimtion _playerAnim;</code></p><p id="32c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在我的移动方法中我会放下面一行代码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jy"><img src="../Images/7735a3180c0b00b36f5233902baad900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2YYcAGtzkPf9ou_9Lyvpw.png"/></div></div></figure><p id="1121" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将调用 PlayerAnimation 中的 helper 方法，并将 float 值设置为 horizontalInput 值。因为我用的是 GetAxisRaw，这个值会直接跳到 1 或-1，这取决于方向，而且由于 Mathf 的原因，动画只会读取 1。Abs()线。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jz"><img src="../Images/abef5b792416809e0a85b224543e78e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eq22Q3qMWOW8tjh6fJpcVA.gif"/></div></div></figure><p id="77c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我需要做的就是根据玩家移动的方向翻转精灵。我将先发制人地把这个功能放在它自己的脚本中。一旦我实现更多的东西，比如挥剑动画，我会添加更多的东西。</p><p id="b660" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我需要一个精灵渲染器组件的句柄。为什么这么问？看看这个:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ka"><img src="../Images/d7f3169a97dfd33b813e3f301f82299f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*LSlQ4QpTEhr1xW3Wx0kv5Q.png"/></div></figure><p id="e3e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">精灵渲染器内置了翻转参数！我需要做的就是访问这个参数，并根据我的玩家面对的方向将其设置为真或假。</p><p id="c2bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以在 start 中，在我将 SpriteRenderer 声明为<code class="du ju jv jw jx b">_renderer</code>之后，我需要声明 getCOmponentInChildren，因为脚本在父对象上，而 Sprite Renderer 在子对象上。下面你会看到<code class="du ju jv jw jx b">Flip()</code>方法。这是一个叫做 faceRight 的 bool。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kb"><img src="../Images/7f06d036ad111fff2d841db0e2a87a94.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*6yr_D1joOsBcMJo8QFN8Mw.png"/></div></div></figure><p id="f603" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要翻转精灵，需要做的就是 type _renderer.flipX。所以如果 faceRight == true，我不会翻转它。如果它是假的，我会。在我的运动代码中，我要说的是，如果 horizontal input &gt; 0，那么 Flip 为真。如果不是它的假！轻松点。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kc"><img src="../Images/530f0e08d6018991029e650bad659c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*72pXZP_3KPN4ubPbCQiIQw.png"/></div></figure><p id="f065" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/93a67fcfb886f7e3c3842e32120c02fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AFbFxIaO37oY6sd-hhZrkw.gif"/></div></div></figure></div></div>    
</body>
</html>