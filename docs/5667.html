<html>
<head>
<title>Back to the 90s with C</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 C 语言回到 90 年代</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/back-to-the-90s-with-c-813912228f39?source=collection_archive---------6-----------------------#2021-10-29">https://medium.com/nerd-for-tech/back-to-the-90s-with-c-813912228f39?source=collection_archive---------6-----------------------#2021-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="813a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还记得那些 80 年代和 90 年代的复古游戏吗！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/258cee212bb0637714534e2a45bdfa93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7sIKW_2mJjjL8nzueCDn1A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">来源:<a class="ae jt" href="https://blog.archive.org/2019/10/13/2500-more-ms-dos-games-playable-at-the-archive/" rel="noopener ugc nofollow" target="_blank">https://blog . archive . org/2019/10/13/2500-more-ms-dos-games-playable-at-the-archive/</a>、【https://www.lifewire.com/best-ms-dos-games-4058702】T2、<a class="ae jt" href="https://boingboing.net/2021/08/27/find-out-about-new-dos-games-at-dos-haven.html" rel="noopener ugc nofollow" target="_blank">https://boing boing . net/2021/08/27/find-out-about-new-dos-games-at-dos-haven . html</a></figcaption></figure><p id="6c36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些 DOS 游戏会让你们中的一些人非常怀旧。有游戏机和所有东西的美好旧时光。今天，我将向你介绍一个由 Mattias Gustavsson 编写的令人惊叹的 C 库，它可以让你创建这些令人惊叹的复古风格游戏。</p><p id="0a20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ju">“DOS-like 是一个编程库/框架，有点像一个小型游戏引擎，用于编写与 90 年代初的 MS-DOS 产品类似的游戏和程序。但“类 dos”不是编写能在真正的 DOS 机上运行的代码，而是编写能在 Windows、Mac 和 Linux 等现代平台上运行的程序，但它试图重现旧 DOS 程序的外观、感觉和声音。”</em></p><ul class=""><li id="d905" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><a class="ae jt" href="https://itch.io/profile/mattiasgustavsson" rel="noopener ugc nofollow" target="_blank">马蒂亚斯·古斯塔夫松</a> ( <strong class="ih hj">图书馆链接:</strong><a class="ae jt" href="https://mattiasgustavsson.itch.io/dos-like" rel="noopener ugc nofollow" target="_blank">https://mattiasgustavsson.itch.io/dos-like</a>)</li></ul><p id="d282" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是您可以从该网站创建的一些示例片段:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ke"><img src="../Images/b1dbe6f718d8c0a45c7b42703d6dd0e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MSOdgdSiUx1VVTna.jpg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">来源:<a class="ae jt" href="https://github.com/mattiasgustavsson/dos-like" rel="noopener ugc nofollow" target="_blank">https://github.com/mattiasgustavsson/dos-like</a></figcaption></figure><p id="4ef5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们开始探索图书馆。事实上，它非常容易安装。首先克隆这个 GitHub 回购:<a class="ae jt" href="https://github.com/mattiasgustavsson/dos-like" rel="noopener ugc nofollow" target="_blank">https://github.com/mattiasgustavsson/dos-like</a></p><p id="0297" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目录结构应该如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/d4869f06b5eaa533def04c2716ce0382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5zmB118Sb80BuCwig5wKpA.png"/></div></div></figure><p id="c735" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编译器位于<strong class="ih hj"> tcc </strong>文件夹中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kg"><img src="../Images/3093c85570e6b1bba50dbf1b6bc9ee6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTfV2nPO9yoK7a4qJKol3g.png"/></div></div></figure><p id="d0b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“tcc.exe”是最重要的文件。(<em class="ju">我只涉及 Windows 安装</em>)你应该把它添加到路径中，这个路径应该像<strong class="ih hj"> path/tcc </strong></p><p id="50d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的 path 是存储库被克隆的位置。如果 tcc 路径设置正确，您可以在命令提示符下键入 tcc。您应该会看到类似这样的内容:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kh"><img src="../Images/ef2c6d1d5934bef9b2001e490d167b2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3JqqHe823YmOcwReAvWrA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">这意味着库安装正确</figcaption></figure><p id="bc66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看几个示例程序。这里作者已经收录了一些例子:<a class="ae jt" href="https://github.com/mattiasgustavsson/dos-like/tree/main/source" rel="noopener ugc nofollow" target="_blank">https://github . com/mattiasgustavsson/dos-like/tree/main/source</a></p><p id="ca9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基于 mandelbrot 的例子，我为燃烧的船分形写了程序:</p><pre class="je jf jg jh fd ki kj kk kl aw km bi"><span id="2c39" class="kn ko hi kj b fi kp kq l kr ks">// Burning Ship fractal inspired by Port of mandelbrot tutorial code by Lode Vandevenne <br/>// <a class="ae jt" href="https://lodev.org/cgtutor/juliamandelbrot.html#Mandelbrot_Set_" rel="noopener ugc nofollow" target="_blank">https://lodev.org/cgtutor/juliamandelbrot.html#Mandelbrot_Set_</a></span><span id="1f9c" class="kn ko hi kj b fi kt kq l kr ks">#include &lt;math.h&gt;<br/>#include &lt;stdlib.h&gt;<br/>#include "dos.h"</span><span id="0696" class="kn ko hi kj b fi kt kq l kr ks">int main(int argc, char *argv[])<br/>{<br/>  setvideomode( videomode_320x200 );<br/>  setdoublebuffer(1);<br/>  for( int i = 0; i &lt; 32; ++i ) setpal( i, 0, 0, 31 - i );  <br/>  int w = 320;<br/>  int h = 200;</span><span id="a59a" class="kn ko hi kj b fi kt kq l kr ks">//each iteration, it calculates: newz = oldz*oldz + p, where p is the current pixel, and oldz stars at the origin<br/>  double pr, pi;           //real and imaginary part of the pixel p<br/>  double newRe, newIm, oldRe, oldIm;   //real and imaginary parts of new and old z<br/>  double zoom = 1, moveX = -0.5, moveY = 0; //you can change these to zoom and change position<br/>  int maxIterations = 255;//after how much iterations the function should stop<br/>  double zoomSpd = 0.005f;<br/>  for( ; ; ) {<br/>    //loop through every pixel<br/>    for(int y = 0; y &lt; h; y++)<br/>    for(int x = 0; x &lt; w; x++)<br/>    {<br/>      //calculate the initial real and imaginary part of z, based on the pixel location and zoom and position values<br/>      pr = 1.5 * (x - w / 2) / (0.5 * zoom * w) + moveX;<br/>      pi = (y - h / 2) / (0.5 * zoom * h) + moveY;<br/>      newRe = newIm = oldRe = oldIm = 0; //these should start at 0,0<br/>      //"i" will represent the number of iterations<br/>      int i;<br/>      //start the iteration process<br/>      for(i = 0; i &lt; maxIterations; i++)<br/>      {<br/>        //remember value of previous iteration<br/>  if (newRe &lt; 0)<br/>    {<br/>    oldRe = -newRe;<br/>    }<br/>  else{<br/>    oldRe = newRe;<br/>  }<br/>        if (newIm &lt; 0)<br/>    {<br/>    oldIm = -newIm;<br/>    }<br/>  else{<br/>    oldIm = newIm;<br/>  }<br/>        //the actual iteration, the real and imaginary part are calculated<br/>  <br/>        newRe = oldRe * oldRe - oldIm * oldIm + pr;<br/>        newIm = 2 * oldRe * oldIm + pi;<br/>        //if the point is outside the circle with radius 2: stop<br/>        if((newRe * newRe + newIm * newIm) &gt; 4) break;<br/>      }<br/>      //draw the pixel<br/>      putpixel(x, y, ( i + 32 ) &amp; 255 );<br/>      if( keystate( KEY_ESCAPE ) || shuttingdown() ) exit(0);<br/>    }<br/>    swapbuffers();<br/>    zoom += zoomSpd;<br/>    moveX -= 0.0050109f / zoom;<br/>    zoomSpd *= 1.005;<br/>  }</span><span id="a025" class="kn ko hi kj b fi kt kq l kr ks">return 0;<br/>}</span></pre><p id="864c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这会产生如下结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/dd01cca1cc49070ce2ac14880b3eca22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0_n9ewECna8SaExS.png"/></div></div></figure><p id="dae3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是另一个做一些简单图形工作的示例程序。这里我们跟着鼠标指针画圆。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/bbdfeef2f1408184c65b593bb07a624b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*cmgAQAE4Uwi7w0pTRJwfYw.gif"/></div></figure><pre class="je jf jg jh fd ki kj kk kl aw km bi"><span id="6143" class="kn ko hi kj b fi kp kq l kr ks">#include &lt;stdlib.h&gt;<br/>#include "dos.h"<br/>#include &lt;windows.h&gt;</span><span id="7f8b" class="kn ko hi kj b fi kt kq l kr ks">//author: Ujjayanta<br/>int main(int argc, char **argv[]){<br/> <br/> setvideomode(videomode_320x200);<br/> <br/> int x, y;<br/> POINT xypos;</span><span id="42a5" class="kn ko hi kj b fi kt kq l kr ks">GetCursorPos(&amp;xypos);<br/> <br/> while(!shuttingdown())<br/> {<br/>  GetCursorPos(&amp;xypos);<br/>  for(int i =0 ; i&lt;5;i++){<br/>   x = xypos.x;<br/>   y = xypos.y;<br/>   setcolor(rand()%256);<br/>   circle(x%320,y%200,4);<br/>  }<br/>  for(int i =0 ; i&lt;5;i++){<br/>   x = xypos.x;<br/>   y = xypos.y;<br/>   setcolor(rand()%256);<br/>   circle(0,0,4);<br/>  }<br/>   <br/>  if( keystate( KEY_ESCAPE ) ) break;<br/>  <br/> }<br/> <br/> <br/>    return 0;<br/>}</span></pre></div></div>    
</body>
</html>