<html>
<head>
<title>Express Router for modular code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模块化代码的快速路由器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/express-router-for-modular-code-f155d4406897?source=collection_archive---------4-----------------------#2021-05-26">https://medium.com/nerd-for-tech/express-router-for-modular-code-f155d4406897?source=collection_archive---------4-----------------------#2021-05-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d9efcd6a63a0905c169661498a793257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pDDyrkJzUqFWPC_B"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://unsplash.com/@andrewtneel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安德鲁·尼尔</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="474c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ExpressJS 附带了一个<em class="jt"> Router() </em>功能，用于帮助组织您的 express 应用程序的路线。这个函数实际上是作为一个中间件使用的，用于在多个文件之间分配路径。让我们详细检查一下这个！</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="8367" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">什么是快速路由器？🤔</h2><p id="bc0a" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">它主要用于为您的 Express 应用程序编写模块化路由或端点。理论上没有更多的问题，让我们来看一个例子。</p><p id="c9bb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设我们要开发一个电子商务网站，有三个主要路径，分别命名为<em class="jt">购物车、产品</em>、<em class="jt">登录、</em>和<em class="jt">注册。</em>这些路由及其子路由可以写在一个文件中，但是随着复杂度的增加，维护这些代码将成为一场噩梦。现在，我们来看看快速路由器是如何解决这个问题的。</p><p id="62d2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，让我们为<em class="jt">购物车</em>子路线创建一个单独的文件</p><p id="0c49" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> cart.js </strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="bb66" class="kb kc hi lg b fi lk ll l lm ln">const router = require("express").Router();</span><span id="ba3c" class="kb kc hi lg b fi lo ll l lm ln">// this route is equivalent to "/cart" get method<br/>router.get("/", (req, res) =&gt; {</span><span id="d2b9" class="kb kc hi lg b fi lo ll l lm ln">  // logic for getting cart items</span><span id="b552" class="kb kc hi lg b fi lo ll l lm ln">});</span><span id="af3e" class="kb kc hi lg b fi lo ll l lm ln">// this route is equivalent to "/cart" post method<br/>router.post("/", (req, res) =&gt; {</span><span id="69b7" class="kb kc hi lg b fi lo ll l lm ln">  // logic for adding item to cart</span><span id="f7ad" class="kb kc hi lg b fi lo ll l lm ln">});</span><span id="7dc0" class="kb kc hi lg b fi lo ll l lm ln">// this route is equivalent to "/cart/:id" delete method<br/>router.delete("/:id", (req, res) =&gt; {</span><span id="2bf1" class="kb kc hi lg b fi lo ll l lm ln">  // logic for deleting item from cart</span><span id="f5d8" class="kb kc hi lg b fi lo ll l lm ln">});</span><span id="030f" class="kb kc hi lg b fi lo ll l lm ln">module.exports = router;</span></pre><p id="ce3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的代码中，为<em class="jt"> cart </em>及其子路线定义了一个<em class="jt"> Router </em>。注意"/cart "字符串没有写在任何路线之前。这是因为上述路线将从<em class="jt"> app.js </em>文件中触发。</p><p id="08e7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">同样，我们为<em class="jt">产品、登录、</em>和<em class="jt">注册编写单独的路线。</em></p><p id="a752" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> products.js </strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="def1" class="kb kc hi lg b fi lk ll l lm ln">const router = require("express").Router();</span><span id="9d32" class="kb kc hi lg b fi lo ll l lm ln">router.get("/:type", (req, res) =&gt; {</span><span id="717b" class="kb kc hi lg b fi lo ll l lm ln">  // logic for getting products</span><span id="b1be" class="kb kc hi lg b fi lo ll l lm ln">});</span><span id="9396" class="kb kc hi lg b fi lo ll l lm ln">module.exports = router;</span></pre><p id="564a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> login.js </strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="e628" class="kb kc hi lg b fi lk ll l lm ln">const router = require("express").Router();</span><span id="0cbf" class="kb kc hi lg b fi lo ll l lm ln">router.post("/", (req, res) =&gt; {</span><span id="0b2d" class="kb kc hi lg b fi lo ll l lm ln">  // logic for logging a user in</span><span id="21fb" class="kb kc hi lg b fi lo ll l lm ln">});</span><span id="8b04" class="kb kc hi lg b fi lo ll l lm ln">module.exports = router;</span></pre><p id="8d2b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> register.js </strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="e0e3" class="kb kc hi lg b fi lk ll l lm ln">const router = require("express").Router();</span><span id="5b72" class="kb kc hi lg b fi lo ll l lm ln">router.post("/", (req, res) =&gt; {</span><span id="55ee" class="kb kc hi lg b fi lo ll l lm ln">  // logic for registering a new user</span><span id="85cb" class="kb kc hi lg b fi lo ll l lm ln">});</span><span id="432a" class="kb kc hi lg b fi lo ll l lm ln">module.exports = router;</span></pre><p id="e2e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">至此，已经为我们的应用程序中的四个主要路由创建了一个<em class="jt">路由器</em>。但是这些是什么时候执行的呢？怎么称呼他们？答案是，我们将它们作为中间件传递给主路由。</p><h2 id="831e" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">通过<em class="lp">路由器</em>作为中间件</h2><p id="2b69" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">将<em class="jt">路由器</em>导入到你的<em class="jt"> app.js </em>中，并将这些作为中间件传递给主路由。</p><p id="4331" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> app.js </strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="cf77" class="kb kc hi lg b fi lk ll l lm ln">const express = require("express");</span><span id="c59e" class="kb kc hi lg b fi lo ll l lm ln">// importing our custom routers<br/>const cartRouter = require("./routes/cart");</span><span id="3f75" class="kb kc hi lg b fi lo ll l lm ln">const productRouter = require("./routes/products");</span><span id="91c5" class="kb kc hi lg b fi lo ll l lm ln">const loginRouter = require("./routes/login");</span><span id="2849" class="kb kc hi lg b fi lo ll l lm ln">const registerRouter = require("./routes/register");</span><span id="690b" class="kb kc hi lg b fi lo ll l lm ln">const app = express();</span><span id="7410" class="kb kc hi lg b fi lo ll l lm ln">// using the custom routers as middlware<br/>app.use("/cart", cartRouter);</span><span id="0691" class="kb kc hi lg b fi lo ll l lm ln">app.use("/products", productRouter);</span><span id="a4df" class="kb kc hi lg b fi lo ll l lm ln">app.use("/login", loginRouter);</span><span id="b5a8" class="kb kc hi lg b fi lo ll l lm ln">app.use("/register", registerRouter);</span><span id="8ddd" class="kb kc hi lg b fi lo ll l lm ln">const port = process.env.PORT || 5000;</span><span id="b082" class="kb kc hi lg b fi lo ll l lm ln">app.listen(port, () =&gt; {</span><span id="faaa" class="kb kc hi lg b fi lo ll l lm ln">  console.log("listening on port %s", port);</span><span id="1f42" class="kb kc hi lg b fi lo ll l lm ln">});</span></pre><p id="a79a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们结束了。上面的 app 相当于使用了直达路线。</p><p id="61c5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，如果向服务器发出“/cart/<id>”<em class="jt">delete</em>请求，它将转到<em class="jt"> cartRouter </em>，然后执行<em class="jt"> delete </em>方法中的代码。</id></p><p id="2fd2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">恭喜你，你刚刚使用路由器🥳使你的快速代码模块化</p></div></div>    
</body>
</html>