<html>
<head>
<title>Data Cleansing: 5 Principles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据清理:5项原则</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/data-cleansing-5-principles-d95849831355?source=collection_archive---------7-----------------------#2021-03-29">https://medium.com/nerd-for-tech/data-cleansing-5-principles-d95849831355?source=collection_archive---------7-----------------------#2021-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/a58064388f8b9a3c4e9d0dfc38940173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IgdKCV-p9VLwhAdBw-lHkQ.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">是的，那是黑胶，不是数据，反正不是你想的那样</figcaption></figure><div class=""/><div class=""><h2 id="4ffb" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">好了，你已经有了一些数据，你想开始分析它，你想开始寻找模式并进行可视化。问题是数据很乱。数据总是一塌糊涂。所以你必须着手清理一些数据。</h2></div><p id="0c95" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">数据科学家花80%的时间收集、清理和组织数据，只有20%的时间进行分析。所以，知道如何考虑数据清理可能是个好主意？另外，这是一个有趣的谜题，我们从哪里开始呢？</p><p id="d370" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">那么，这个数据是什么呢？假设它是来自Spotify API的曲目列表。它是巨大的。我们如何着手组织它？除非你把它组织好，否则你看不到什么是有趣的。因此，以下是考虑数据清理的五种方式。这些是原则而不是教程，所以不管你是使用Python，R，甚至Excel，但这也意味着你将需要做一些工作来找出如何为不同的语言做这些事情。我们可能会在某个时候对每一个都做一些更深入的教程，或者你可能已经知道你是不是一个完全的初学者，无论如何不要担心，外面有很多帮助。</p><h1 id="ea79" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated">1.找到看不见的问题</h1><p id="dbe5" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">空间似乎什么都没有，对吗？这里和那里多一点空间不会有坏处。好吧，这真的是错的，空格绝对是一个东西，它是一个和其他字母或数字一样的字符。此外，人们在输入数据时很容易在单词之间输入双倍空格，并在文本末尾留下尾随空格，因此很可能会有额外的空格供您处理。单词中间额外的空格相当于添加了额外的字母，所以当你想要组织和分析你的数据时，它们会给你带来很大的麻烦。</p><p id="8329" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">比方说，你想在我们的数据集中找到Ezra Furman的所有曲目，但有时Ezra Furman这个名字会被记录为“Ezra [double space] Furman”，有时会被记录为“Ezra [single space] Furman”。用我们人类的眼睛很难看出这种差异(想象那些空格在那里，而不是方括号中的单词)，如果你正在扫描一个有数万个条目的数据集，那就更难了，但在第一个版本中，以斯拉的名字和姓氏之间的双空格意味着以斯拉[双空格]弗曼记录的任何曲目都不会包括在以斯拉[单空格]弗曼的曲目计数中。数据被理解为两个独立的艺术家，而不是一个。</p><p id="0a08" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">同样，对于空白。空白单元格并不总是空白的。例如，我们数据集中的曲目可能没有作为专辑的一部分发行，所以专辑变量应该为空。但是什么是空呢？是否应该作废？这有时看起来像是一个错误，所以通常会记录为“N/A”(这是一个值)，甚至“Null”(也是一个值)。如果我们的相册列中有以上所有的值，事实上我们有Null、n/a、N/A和void单元格。为了统计有多少首歌没有专辑，我们需要确保所有的空白都以相同的方式录制，所以选择一首并坚持下去。</p><h1 id="9407" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated">2.处理你的复制品</h1><p id="38ac" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">根据您对数据的处理方式，重复可能是一个问题，也可能是一项资产。您可能希望保留它们并分析是否存在重复项，或者它们可能会在您的分析中引起问题，因此您可能希望删除它们。你需要能够识别重复，他们是如何记录的，甚至有多少。</p><p id="a217" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在我们的数据集中，我们希望有重复的。例如，会有许多歌曲将Nirvana列为艺术家，因此Nirvana在艺术家列中是一个重复值。也许你想知道这一组中有多少首曲目是涅槃乐队的，所以我们想保留每一个副本并计算实例数。</p><p id="dd67" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">我们也期望在这个数据集中会有封面版本。如果你寻找一首名为“瓦莱丽”的歌曲，它很可能会出现不止一次。也许你想对“Valerie”的版本进行数据可视化，所以你想保留Amy Winehouse版本和Zutons版本(以及其他版本)。如果艾米·怀恩豪斯有两首名为《瓦莱丽》的歌曲呢？一个来自现场录音，另一个来自录音室录音，你想把两个艾米版本的瓦莱丽包括在这个可视化中吗？或者你只是想让每个艺术家都有瓦莱丽的版本？现在，你明白我的意思了，这可以归结为你想用数据讲述的故事。</p><h1 id="7ad7" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated">3.成双成对，然后分开</h1><p id="59d4" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">不，这不是指摇滚大炮中的经典分手歌曲。这是因为我们的数据集拥有我们需要的所有数据，但可能没有按照有用的顺序排列。例如，乐队的名字被记录在这样的一栏里:“野兽男孩”，但是独唱歌手的名字和姓氏被记录在这样的两栏里:“Cherry”，“Neneh”。这是一个问题。我们希望艺术家和乐队以同样的方式记录在一个栏中。因此，我们需要将这些名称组合在一起，形成一个新的组合变量。这被称为<em class="lf">串联</em>，你会在所有语言中以某种形式发现这种功能。它将允许你完全按照你的意愿重新组织你的变量。因此，你可以将Cherry和Neneh组合成Neneh Cherry，这意味着你可以以同样的方式使用独奏艺术家和乐队。</p><p id="e446" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">如果你有一个变量，但是你需要把它分成两个，那该怎么办？比方说，出于某种原因，有人决定将跟踪时间和BPM放在一列，然后将它们连接起来(可能性极小，但只能这样)。所以我们的变量读作这样— 00:04:37 (120)。我们希望BPM是一个独立的变量。拆分功能将为您做到这一点。为了拆分任何数据，您需要找到一个可以发生拆分的点。如果你能找到一种价值，在这种价值中，分裂是有意义的，那么分手并不难。也许它是一个逗号，或者一个冒号，或者它可能是一个通配符(见下面的数字4)？为了分离出BPM，我们将在括号前的空格处断开。我们可能想通过去掉BPM值周围的括号来整理它(见第5条)。</p><h1 id="31fc" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated">4.通配符和正则表达式</h1><p id="f7a2" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">你会在Excel中找到通配符，在其他软件中找到类似但更强大的正则表达式(但那是另一个，以后的文章)。两者都像代数一样工作，当你不知道某个东西是什么的时候，它们允许你声明它。在上面的例子中，假设我们不关心BPM，我们想完全删除它。我们能做什么？我们可以如上所述分割文本，然后删除包含新BPM变量的列。或者，我们可以删除BPM，使用通配符保持时间数据不变。通配符允许您识别任何字符、任何数字、任何数量的字符和/或数字，和/或空格、标点和字符的任何组合。例如，所以(*)实际上意味着括号+任意数量的字符+括号。它们真的很强大，尤其是结合下一个技巧。</p><h1 id="5c9e" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated">5.把它换出来</h1><p id="a8c9" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">Excel中的Find and replace，Python中的replace()或re.sub()，R中的str_replace()是清理和组织数据时的超级重量级选项，尤其是在与通配符或上述正则表达式结合使用时。</p><p id="767b" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">让我们考虑一下我们的数据集。还记得王子把他的名字改成一个难念的符号吗？我们尊重他的选择，但我们不想在我们的数据集中处理它，我们希望TAFKAP的所有曲目都被记录为王子(对不起王子)，使用查找和替换将允许您搜索我们的数据集，找到TAFKAP的每个实例，并将其交换到王子。</p><p id="62dc" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">权力越大，责任越大。鲁莽地使用查找和替换，很容易删除您实际上想要保留的数据。也许你已经注意到了歌曲标题中的一些流氓感叹号，所以你认为“没关系，我只是用一个快速查找和替换并删除它们”。现在“救命！”甲壳虫乐队的歌曲只是“救命”和“嘿呀！”Outkast只是“嘿呀”。众所周知，没有感叹号就不可能理解这些歌曲，所以要小心这首歌。</p><p id="e488" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><em class="lf">数据清理是一个庞大的主题，这是一个非常简短的列表(并不详尽)。正如本文开头的统计数据所描述的，它占用了大量的时间，我</em>的<em class="lf">有时被视为角色</em>中更无聊的部分。<em class="lf">希望这能对你有所帮助，让你思考如何处理数据清理，让它变得更有趣。</em></p></div></div>    
</body>
</html>