<html>
<head>
<title>Automate your workflow with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GitHub动作自动化您的工作流程</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/automate-your-workflow-with-github-actions-7b1c9573f6c8?source=collection_archive---------19-----------------------#2021-04-29">https://medium.com/nerd-for-tech/automate-your-workflow-with-github-actions-7b1c9573f6c8?source=collection_archive---------19-----------------------#2021-04-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/919e54942a352137ac66643b432d3118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M7x7dz_0DHlC-jrO"/></div></div></figure><p id="ee96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将向您介绍GitHub Actions。去年，GitHub推出了一些新功能。其中包括GitHub Actions。</p><p id="6fc5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">GitHub Actions支持<strong class="is hj">持续集成</strong>和广泛的<strong class="is hj">自动化</strong>从您的存储库中配置。您可以创建自己的动作，使用和定制GitHub社区共享的动作，或者编写和共享您构建的动作。要共享您构建的操作，您的存储库必须是公共的。</p><p id="eba2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">GitHub Actions支持Windows、Linux和MacOS，你可以运行这些操作系统支持的任何编程语言。</p><p id="4f75" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们来看看GitHub Actions的核心概念和一些创建自己的定制工作流的例子。</p><h1 id="ee49" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">自动化工作流程</h1><p id="af3a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">自动化是通过定义工作流实现的。工作流由一个或多个称为操作的任务组成。这些操作可以在某些事件上自动运行。</p><p id="b1ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以通过编写与您的存储库交互的定制代码以及与GitHub的API和任何公开可用的第三方API集成来创建操作。例如，一个动作可以运行<a class="ae kr" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>模块，在出现关键问题时发送短信提醒，或者部署生产就绪代码。</p><p id="a465" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">动作可以直接在机器上或Docker容器中运行。您可以定义操作的输入、输出和环境变量。</p><h1 id="d576" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">利益</h1><p id="455d" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">GitHub操作:</p><ul class=""><li id="605e" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">可以直接在runner机器或Docker容器中运行。</li><li id="daa6" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">可以包括对存储库克隆的访问，允许部署和发布工具、代码格式化程序和命令行工具访问您的代码。</li><li id="ff8e" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">提供可以完成持续集成和持续部署的自动化。</li><li id="0089" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">不需要您部署代码或服务应用程序。</li><li id="7631" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">有一个简单的接口来生成和使用机密，允许操作与第三方服务进行交互，而无需存储使用该操作的人的凭据。</li></ul><h1 id="e14a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">GitHub操作的类型</h1><p id="c6c7" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">动作需要元数据文件来定义动作的输入、输出和主入口点。元数据文件名必须是<code class="du lg lh li lj b">action.yml</code>或<code class="du lg lh li lj b">action.yaml</code>。您可以构建Docker容器和JavaScript动作。</p><p id="1b43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Docker容器用GitHub动作代码打包环境。这创建了一个更加可靠和一致的工作单元，因为动作的消费者不需要关心工具或依赖关系。Docker容器动作只能在GitHub托管的Linux环境中执行。</p><p id="c6dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">JavaScript动作可以直接在运行机器上运行，并将动作代码与用于运行代码的环境分开。与Docker容器动作相比，使用JavaScript动作可以使动作代码更简单，执行速度更快。</p><h1 id="0817" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">核心概念</h1><p id="1457" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">下面给出了对GitHub动作中使用的一些重要核心概念的总体理解。</p><h2 id="8e56" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">行动</h2><p id="d21b" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">操作是工作流的最小可移植构建块，可以组合成创建作业的步骤。您可以创建自己的操作，或者使用和定制GitHub社区公开共享的操作。</p><h2 id="e8df" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">事件</h2><p id="ccfb" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">事件是触发工作流运行的特定活动。例如，当有人推送到存储库或创建拉取请求时，就会触发工作流。事件也可以配置为使用Webhooks监听外部事件。</p><h2 id="2269" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">跑步者</h2><p id="f17d" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">runner是安装了GitHub Actions runner应用程序的机器。运行程序等待可以执行的可用作业。在获得一个作业后，它运行该作业的动作，并向GitHub报告进度和结果。Runners可以托管在GitHub上，也可以自托管在自己的机器/服务器上。</p><h2 id="cf0e" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">职位</h2><p id="d96b" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">作业由多个步骤组成，在虚拟环境的一个实例中运行。如果当前作业依赖于前一个作业才能成功，则作业可以彼此独立运行，也可以按顺序运行。</p><h2 id="c300" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">步骤</h2><p id="cb2e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">步骤是可以由作业执行的一组任务。步骤可以运行命令或操作。</p><h2 id="85d6" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">工作流程</h2><p id="2782" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">工作流是定制的自动化过程，您可以在存储库中设置它，以便在GitHub上构建、测试、打包、发布或部署任何项目。工作流是使用存储库中的<code class="du lg lh li lj b">.github/workflows</code>目录中的<code class="du lg lh li lj b">yaml</code>文件定义的。</p><h1 id="91df" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">GitHub操作示例</h1><p id="611b" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">GitHub Actions使得部署DevOps自动化任务的广泛变化变得简单。下面给出的例子描述了使用GitHub动作的CI/CD和自动化。</p><h2 id="2cc7" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">示例1:持续集成</h2><p id="5802" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">持续集成(CI)在合并代码之前，自动化测试和构建代码的过程。作为一种实践，开发人员必须每天一次或多次(如果需要的话)将他们的更改提交或集成到主共享存储库中。</p><p id="d9ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">。github/workflows/workflow . yml</strong></p><pre class="ly lz ma mb fd mc lj md me aw mf bi"><span id="ad3b" class="lk jp hi lj b fi mg mh l mi mj">name: Node Continuous Integration on: pull_request: branches: [ master ] jobs: test_pull_request: runs-on: ubuntu-latest steps: - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> with: node-version: 12 - run: npm ci - run: npm test - run: npm run build</span></pre><p id="f9f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mk">来源:</em><a class="ae kr" href="https://fireship.io/lessons/five-useful-github-actions-examples/" rel="noopener ugc nofollow" target="_blank"><em class="mk">https://fireship . io/lessons/five-useful-github-actions-examples/</em></a></p><h2 id="487f" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">示例2:在发布时将包发布到NPM</h2><p id="2a12" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">如果你维护一个开源包，那么在发布一个新版本后重新发布你的包是单调的。您可以使用下面给出的工作流程来自动发布一个包到NPM或GitHub包注册表。</p><p id="7c1f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">。github/workflows/workflow . yml</strong></p><pre class="ly lz ma mb fd mc lj md me aw mf bi"><span id="c044" class="lk jp hi lj b fi mg mh l mi mj">name: Sveltefire Package on: release: types: [created] jobs: build: runs-on: ubuntu-latest steps: - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> with: node-version: 12 - run: npm ci - run: npm test publish-npm: needs: build runs-on: ubuntu-latest steps: - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> with: node-version: 12 registry-url: https://registry.npmjs.org/ - run: npm ci - run: npm build - run: npm publish env: NODE_AUTH_TOKEN: ${{secrets.npm_token}} publish-gpr: needs: build runs-on: ubuntu-lates steps: - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> with: node-version: 12 registry-url: https://npm.pkg.github.com/ scope: '@your-github-username' - run: npm ci - run: npm publish env: NODE_AUTH_TOKEN: ${{secrets.GITHUB_TOKEN}}</span></pre><p id="eeec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mk">来源:</em><a class="ae kr" href="https://fireship.io/lessons/five-useful-github-actions-examples/" rel="noopener ugc nofollow" target="_blank"><em class="mk">https://fireship . io/lessons/five-useful-github-actions-examples/</em></a></p><h2 id="006c" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">示例3:发送电子邮件或聊天信息</h2><p id="8dc5" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">将GitHub中的数据发布到聊天或电子邮件服务中，如Slack。</p><p id="3f95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">。github/workflows/workflow . yml</strong></p><pre class="ly lz ma mb fd mc lj md me aw mf bi"><span id="e0c7" class="lk jp hi lj b fi mg mh l mi mj">name: Slack Issues on: issues: types: [opened] jobs: post_slack_message: runs-on: ubuntu-latest steps: - uses: actions/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> - uses: rtCamp/<a class="ae kr" href="https://www.partech.nl/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a> env: SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }} SLACK_USERNAME: CyberJeff SLACK_CHANNEL: gh-issues</span></pre><p id="599e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mk">来源:</em><a class="ae kr" href="https://fireship.io/lessons/five-useful-github-actions-examples/" rel="noopener ugc nofollow" target="_blank"><em class="mk">https://fireship . io/lessons/five-useful-github-actions-examples/</em></a></p><h1 id="196e" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="7136" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">您可以使用GitHub操作来自动化您的GitHub工作流程。例如，GitHub操作只需要很少的配置即可使用——GitHub存储库页面上的一个简单按钮就可以触发CI/CD管道的配置，这使得开发人员可以专注于开发，而不是为Jenkins设置服务器或与CircleCI等其他供应商签约。</p></div><div class="ab cl ml mm gp mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hb hc hd he hf"><p id="adc6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mk">原发布于</em><a class="ae kr" href="https://www.partech.nl/nl/publicaties/2020/04/automate-your-workflow-with-github-actions" rel="noopener ugc nofollow" target="_blank"><em class="mk">https://www . partech . nl</em></a><em class="mk">。</em></p></div></div>    
</body>
</html>