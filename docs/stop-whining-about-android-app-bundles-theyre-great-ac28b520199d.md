# 不要抱怨 Android 应用捆绑包，它们很棒

> 原文：<https://medium.com/nerd-for-tech/stop-whining-about-android-app-bundles-theyre-great-ac28b520199d?source=collection_archive---------11----------------------->

![](img/06f09cdc3b2f4e490a87e9045553a4c8.png)

丹尼·米勒在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

[谷歌](https://www.google.co.uk/)宣布改变[开发者](http://www.apptaura.com)将应用上传到 Play 商店的方式。这可能听起来像一个微小的、过于技术性的政策变化，但它实际上具有现实世界的影响。正如媒体委婉地说的那样，它遇到了各种不同的反应

自 2021 年 8 月[起](https://www.androidauthority.com/android-apks-sunset-1636829/)，谷歌将不再允许开发者使用古老的 APK 格式上传他们的应用——这种格式自 Android 作为应用安装程序开始使用以来就一直在使用。相反，应用程序将需要由开发人员使用谷歌专有的 Android 应用程序捆绑包(AAB)发送到 Play Store，Play Store 将使用 AAB 来构建发送到设备的 apk。

这种程度的间接性，从技术上来说，赋予了谷歌对你的应用程序为所欲为的权力，是导致恐慌的原因。但这是一个有意义的决定。aab 更好，因为它们允许你向你的应用用户提供更好的体验，而不需要任何额外的开发工作。

# 那么什么是 AAB 呢？

Android 应用捆绑包是一个文件，*解释了如何为你的应用*构建 APK。当用户在你的应用上点击“安装”时，Play Store 会构建并向你的设备发送一个 APK，然后你的设备会安装它。就手机而言，它不知道 APK 是如何建造的，也不应该关心:它只是像平常一样得到一个 APK 安装程序。

那么，为什么这比仅仅向谷歌提供一个 APK 更好呢？**因为有了 AAB，谷歌可以为请求它的设备定制 APK。这确实是有益的。**

这里需要对 APK 的内部做一点解释。Android 应用程序本质上是一个盒子，里面装满了你的应用程序运行所需的一切。这包括告诉它做什么的编程代码，以及图标、图像和声音文件等资源。

不同的 Android 手机需要不同大小的资源。这完全取决于分辨率和屏幕尺寸。与 5、6 年前的手机相比，配备 4K 屏幕的现代手机需要更多的图像细节，否则与周围的一切相比，它会看起来像素化。另一方面，旧的或低规格的手机将无法处理如此大的图像(应用程序在使用时会耗尽内存)，因此它们需要一套单独的图像。总之，一个 APK 通常包含 5 组或更多的图像，其中你的手机只会使用一个。

APK 的其他地方同样是多余的；不仅仅是图像的问题。例如，有时我们必须编写特定的代码来支持旧版本的 Android。如果你的手机安装了新版本的安卓系统，那就再也不需要这些代码了。

因此，这些部分可能会变得相当沉重，特别是如果一个应用程序的外观与 Android 大相径庭。有了静态 APK，你的手机将不得不下载和存储所有这些冗余。但有了 AAB，谷歌就能为你提供一个没有它们的定制 APK。这使得应用程序更容易下载和安装，安装后也更小。对最终用户来说，只有好处。

不用说，这对于应用商店优化来说是非常好的消息。

# 安全和 APK 签名怎么样？

apk 有一个非常有价值的特性:它们可以被作者加密签名。这是一个数字证书，证明你正在下载的 APK 确实来自它所说的人。这一点很重要，因为它可以防止坏人向您的用户发布虚假的更新。

使用 AABs，任何 apk 上的加密签名都必须由 Google 执行。这意味着开发者必须将他们应用程序的加密签名密钥传递给谷歌，这引起了一些恐慌。谷歌必须得到信任，因为它现在可以使用该证书来制作自己版本的应用程序，或者在未经你同意的情况下进行更改。当然，如果谷歌的密钥库在黑客攻击中暴露了，那么其他任何人都可能做同样的事情。

不过，这在业内很正常。苹果签署所有他们的发布，而不是开发者，所以在那个平台上有更少的控制。微软也这么做。它只影响通过 Play Store 分发的应用程序，因此如果您通过其他方式分发您的应用程序，我们完全欢迎(事实上，我们鼓励您)为此使用不同的签名密钥。

不得不信任任何第三方的感觉真糟糕。我明白了。但是，在通过 Play Store 发布你的应用程序时，无论如何，有很多东西你必须信任谷歌，我不认为签署密钥问题是一个特别大的飞跃。可以说，你已经更加信任你的后端提供商，比如 Firebase、Azure 或 AWS。

将您的签名密钥存储在第三方还有一个相当重要的好处。那就是你不会失去它！我们不止一次遇到一个客户，他的签名密钥丢失了，这是一个大问题。我们不能生产任何新版本的应用程序；相反，我们必须用全新的应用和全新的受众从零开始。即使我们已经得到了所有的源代码，这也是适用的。使用 AAB，Google 持有相关的签名密钥，因此需要经历一个过程来取回(或更改)它。

# 这只影响到 Play Store

当然，谷歌的决定只影响上传到 Play Store 的应用。我真正喜欢 Android 的一点是，它不会被任何特定的应用程序商店或任何特定的大公司不可避免地控制。如果我想为你创建一个应用程序，那么我总是可以创建一个 APK 并发送给你，这一切都不需要谷歌的参与。

# 你需要做的技术改变

所有应用程序，包括现有应用程序的更新，都需要作为 AAB 交付给 Play Store。对于大多数开发人员来说，这就像在 Android Studio 中选择正确的选项一样简单。如果你的应用开发者不使用 Android Studio，他们需要确保他们的工具链支持构建 aab。

# 总之…

将您的应用作为 AAB 上传到 Play Store 将为最终用户带来更好的体验，尤其是那些使用旧设备的用户。安装后，应用程序下载速度更快，占用的存储空间更少。如果您丢失了签名密钥，可以遵循一个流程，以确保应用程序的未来连续性。你必须允许谷歌有一个适度的信任度才能工作，这当然是不可取的，但我不认为这是一个巨大的风险。

[*汤姆科尔文*](https://www.linkedin.com/in/thomas-colvin-3b3b9a31/) *是英国 app 开发机构*[*Apptaura*](http://www.apptaura.com#])*的 CTO。他和他的开发团队一起为各行各业的企业开发应用，从中小企业、初创企业到跨国全球组织。*