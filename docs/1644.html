<html>
<head>
<title>Adding Microsoft Authentication using Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Firebase 添加 Microsoft 身份验证</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/adding-microsoft-authentication-using-firebase-485f0bd1e3eb?source=collection_archive---------2-----------------------#2021-03-30">https://medium.com/nerd-for-tech/adding-microsoft-authentication-using-firebase-485f0bd1e3eb?source=collection_archive---------2-----------------------#2021-03-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2c84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用 Firebase 通过 Microsoft 验证您的用户</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/66c6f8ef4c6d696f7b40acbde643b2b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tFerwT3OIuXFmCvREjuGLQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="http://i-hate-reading-logs.vercel.app/" rel="noopener ugc nofollow" target="_blank">阅读文章</a></figcaption></figure><p id="e8e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经写了一大堆关于如何通过 Firebase 使用 Google、Twitter、Github、Email &amp; Password 和电话号码认证用户的文章。你可以通过下面的链接阅读这些文章。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="84c1" class="jz ka hi jv b fi kb kc l kd ke"><a class="ae jt" href="http://i-hate-reading-logs.vercel.app/" rel="noopener ugc nofollow" target="_blank">http://i-hate-reading-logs.vercel.app/</a></span></pre></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="f7ee" class="km ka hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">概观</h1><ol class=""><li id="0d0b" class="lj lk hi ih b ii ll im lm iq ln iu lo iy lp jc lq lr ls lt bi translated">在 Azure 门户上创建 Microsoft Azure 目录。</li><li id="ffc8" class="lj lk hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">在 azure 上创建一个新注册，并获得<strong class="ih hj"> applicationID </strong>和<strong class="ih hj"> applicationSecret。</strong></li><li id="c21f" class="lj lk hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">在 Firebase 控制台上复制粘贴 applicationID 和 applicationSecret。</li><li id="710b" class="lj lk hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">添加 Microsoft 登录方法并收集用户凭据。</li></ol><h1 id="b00a" class="km ka hi bd kn ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li bi translated">Microsoft Azure 目录</h1><p id="1c48" class="pw-post-body-paragraph if ig hi ih b ii ll ik il im lm io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">去 Azure 门户网站，如果你有一个帐户，你可以直接登录，或者你可以在 Azure 门户网站上使用 Github 创建一个新帐户(<a class="ae jt" href="https://portal.azure.com/#home" rel="noopener ugc nofollow" target="_blank">https://portal.azure.com/</a>)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/6749bec4edaf138cc67f329554f9f376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0aXUzKrnZ6mrc9zOUa_WCw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">登录后的 Azure 门户</figcaption></figure><p id="2135" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是点击“<strong class="ih hj">管理 Azure Active Directory </strong>”。它将带您到活动目录仪表板。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/06301453039244373fd658e868aeaecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b15P8nSSBITbonh5dfyUQA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Active directory 仪表板</figcaption></figure><p id="6def" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 active directory 仪表板中，转到左侧边栏管理部分下的“<strong class="ih hj">应用程序注册”</strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/8dfae70b541b896bad4fcf700853a098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rgU-EvprsVb7ez6j0Aqf3w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">应用注册</figcaption></figure><p id="3dfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在应用程序注册中，单击顶部标签栏上的新注册按钮。它将显示应用程序名称和重定向 URI 表单。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/fa03cca59326569060410af388a30749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9DDLwgV006ocAx_O-JcmDA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">申请的新注册</figcaption></figure><p id="baa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">继续操作，只输入应用程序的显示名称。</p><blockquote class="ml mm mn"><p id="d8c1" class="if ig mo ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated">注意-&gt;多个应用程序可以有多个帐户。</p></blockquote><p id="3e83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“<strong class="ih hj">注册”后，</strong>您将被重定向回应用程序注册页面，在这里您可以找到您的<strong class="ih hj">应用程序 ID。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/5a11e62c8fb84d16d1e4a92dc5f0042a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6sPjkAnMjbt2GrDKvWZrVg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">新申请的申请 ID</figcaption></figure><p id="5270" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于 applicationSecret，您需要再做一步，转到“管理”下的“<strong class="ih hj">证书&amp;机密】</strong>部分，创建一个新令牌，该令牌将成为您的<strong class="ih hj"> applicationSecret </strong>。</p><h1 id="8eb3" class="km ka hi bd kn ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li bi translated">在 Firebase 中启用 Microsoft 身份验证</h1><p id="373b" class="pw-post-body-paragraph if ig hi ih b ii ll ik il im lm io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">转到 Firebase -&gt;控制台-&gt;身份验证-&gt;登录方法选项卡。从方法列表中启用 Microsoft 部分，并在此处添加您的 Microsoft 帐户 ID 和密码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ms"><img src="../Images/3a293ca4d0406820c5bfa9841d4a17a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m3TnJHuf7paetAS9ELutnA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">消防基地控制台</figcaption></figure><p id="32f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦 ID 和秘密被添加，复制粘贴您的重定向 URI，并添加到微软应用重定向 URI 部分。通过身份验证后，Microsoft 会将用户重定向到此 URL。</p><h1 id="b07e" class="km ka hi bd kn ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li bi translated"><strong class="ak">写代码</strong></h1><p id="e62b" class="pw-post-body-paragraph if ig hi ih b ii ll ik il im lm io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">最典型的部分现在完成了。接下来是添加一个按钮，用于 Microsoft 登录，并添加 Firebase 提供的身份验证方法。我们将首先使用 firebase auth 方法为<strong class="ih hj"> MicrosoftAuthProvider </strong>创建一个提供者，然后使用 signInWithPopup 创建一个 firebase auth 方法，它接受提供者作为参数，并为我们处理身份验证部分。<strong class="ih hj"/>signInWithPopup 方法返回一个承诺，在使用。<strong class="ih hj">然后是</strong>和。<strong class="ih hj">抓</strong>的方法。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="7e4d" class="jz ka hi jv b fi kb kc l kd ke">const provider = new firebase.auth.OAuthProvider(‘microsoft.com’);</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mt"><img src="../Images/120cbdb40381d7766e463f6a6b685d37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4xdy4et_B7huKhSS1wTFQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Microsoft 登录方法</figcaption></figure><p id="13cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在通过<strong class="ih hj"> signInWithPopup </strong>方法解决承诺返回后，我们可以将控制台中的数据记录到微软返回的凭证中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mu"><img src="../Images/74583ae8e4af3d522733f31f5f5c0207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E4VcPNPDu4b-2stkRMuf1A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">最终登录页面</figcaption></figure><h1 id="02b0" class="km ka hi bd kn ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li bi translated">结论</h1><p id="f8d9" class="pw-post-body-paragraph if ig hi ih b ii ll ik il im lm io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">添加微软登录方法并不难，但创建 azure 帐户然后获取客户端 ID 和秘密是一项任务。您也可以在后端使用 passport.js 来添加这个方法，以便将凭证存储在数据库中，我将在一篇文章中对此进行介绍。</p><p id="6875" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直到，下一次，有一个美好的一天，人们。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="7f9f" class="jz ka hi jv b fi kb kc l kd ke">Code repository =&gt; <a class="ae jt" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/MicrosoftAuthentication" rel="noopener ugc nofollow" target="_blank">https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/MicrosoftAuthentication</a></span></pre></div></div>    
</body>
</html>