<html>
<head>
<title>Creating a Fake REST API and Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个假的 REST API 并部署</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-fake-rest-api-and-deploy-2a6edf1223f5?source=collection_archive---------2-----------------------#2021-03-06">https://medium.com/nerd-for-tech/creating-a-fake-rest-api-and-deploy-2a6edf1223f5?source=collection_archive---------2-----------------------#2021-03-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/86d2749d45a11fd2f1a84960e49c3cab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKnQtd9IUDqXMHgKNS1qxw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@mitchel3uo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">米切尔罗</a>在<a class="ae iu" href="https://unsplash.com/s/photos/developer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="4fa2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如今，<a class="ae iu" href="https://en.wikipedia.org/wiki/API" rel="noopener ugc nofollow" target="_blank"> API </a>在现代应用中的重要性是众所周知的事实。API 有助于构建如此高效和安全的应用程序。由于 API 的存在，与其他第三方组件的集成变得更加容易。API 的开发主要遵循三种类型的架构或协议。</p><ol class=""><li id="6d9c" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><a class="ae iu" href="https://stoplight.io/api-types/#rest" rel="noopener ugc nofollow" target="_blank">休息</a></li><li id="ccc7" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><a class="ae iu" href="https://stoplight.io/api-types/#soap" rel="noopener ugc nofollow" target="_blank">肥皂</a></li><li id="7dce" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><a class="ae iu" href="https://stoplight.io/api-types/#json-rpc-and-xml-rpc" rel="noopener ugc nofollow" target="_blank"> JSON-RPC 和 XML-RC </a></li></ol><p id="e0c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，回到这篇文章背后的主要议程。正如我们经常看到的，无论是在开发阶段还是在测试阶段，我们可能需要一些虚拟的或伪造的 API 来确保应用程序的后端功能。有时，假设与应用程序集成的实际 API 可能还没有准备好进行测试，这可能是阻塞的原因之一。为了克服这种情况，我们可以开发自己的假 API 并部署它。因此，任何地方的任何人都可以轻松使用它。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="0588" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我将演示首先在本地使用<a class="ae iu" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank"> json-server </a>创建一个假 REST API 的步骤，然后将其部署在<a class="ae iu" href="https://dashboard.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>云平台上。那么，让我们开始吧🏃‍♀️</p><p id="8018" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了便于理解，我将整个讨论分为两部分。</p><ol class=""><li id="059e" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">开发自己的 API</li><li id="8032" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">部署您的 API</li></ol><h1 id="d3e1" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">开发自己的 API</h1><p id="57d2" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">在开始实际开发之前，我们需要确保在我们的项目和系统中有以下可用的依赖关系。</p><ul class=""><li id="77da" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lr jz ka kb bi translated">检查节点的状态。JS:如果你已经在你的系统中安装了 node.js，那就没问题，否则请先从<a class="ae iu" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">这里</a>下载并安装 node.js。</li><li id="1213" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js lr jz ka kb bi translated">此外，通过检查版本，确保<code class="du ls lt lu lv b">npm</code>已正确安装在您的系统中。在命令提示符或终端上执行<code class="du ls lt lu lv b">npm -version</code></li><li id="f55c" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js lr jz ka kb bi translated">一旦完成，创建您的<code class="du ls lt lu lv b">package.json</code>，并添加所需的依赖项，如下所示。</li></ul><figure class="lw lx ly lz fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="8415" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于整个项目参考，请从这里的<a class="ae iu" href="https://github.com/iamKrishnendu/usersDummyAPI.git" rel="noopener ugc nofollow" target="_blank">克隆源代码</a>并运行<code class="du ls lt lu lv b">npm install</code>来安装和配置项目。</p><h2 id="85fb" class="mc kp hi bd kq md me mf ku mg mh mi ky jg mj mk lc jk ml mm lg jo mn mo lk mp bi translated">创建“db.json”文件</h2><p id="ecc0" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated"><code class="du ls lt lu lv b">db.json</code>是包含实际数据的主要文件，我们可以在这些数据上执行基本的 API 操作。即获取、发布、上传、修补、删除和选项。就创建这个文件而言，我们将借助另外两个库，它们可以为我们的 API 生成一些假数据。<a class="ae iu" href="https://github.com/Marak/Faker.js#readme" rel="noopener ugc nofollow" target="_blank">骗子</a>和<a class="ae iu" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank">洛达什</a>。</p><p id="887e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b">faker</code>和<code class="du ls lt lu lv b">lodash</code>的用法可以在<code class="du ls lt lu lv b">generate.js</code>文件下找到</p><figure class="lw lx ly lz fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="686f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦用<code class="du ls lt lu lv b">json-server generateData.js</code>命令执行这个文件，它将为我们的 API 生成<code class="du ls lt lu lv b">100</code>记录。下面提供了一个输出示例。</p><figure class="lw lx ly lz fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="e5db" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认情况下<code class="du ls lt lu lv b">json-server</code>现在正在<code class="du ls lt lu lv b">http://localhost:3000</code>上运行。因此您可以在浏览器上检查输出。</p><p id="d329" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，现在只需复制整个记录并将其粘贴到<code class="du ls lt lu lv b">db.json</code>文件中，您的数据就可以通过 API 访问了。</p><p id="23da" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，如果您执行<code class="du ls lt lu lv b">json-server db.json</code>，那么<code class="du ls lt lu lv b">json-server</code>会将<code class="du ls lt lu lv b">db.json</code>文件视为后端，您可以通过任何 API 客户端(如<a class="ae iu" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>)访问<code class="du ls lt lu lv b">https://localhost:3000/users</code>，所有其他操作都可以在上面执行。</p><h1 id="4bc3" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">创建` server.js '</h1><p id="5b18" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated"><code class="du ls lt lu lv b">server.js</code>负责以编程方式在默认端口上启动<code class="du ls lt lu lv b">json-server</code>。</p><figure class="lw lx ly lz fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="fce1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您已经创建了自己的 REST API，并在本地运行👨‍🔧</p><h1 id="d9af" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">部署您的 API</h1><p id="5eb0" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">现在，是时候公开你的 API 了。为此，您需要在某个服务器或云平台上部署您的 API。这里我们将使用 Heroku 进行部署。</p><ul class=""><li id="a93c" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lr jz ka kb bi translated">如果您在 Heroku 上没有任何现有帐户，请先从<a class="ae iu" href="https://signup.heroku.com/login" rel="noopener ugc nofollow" target="_blank">这里</a>注册。</li><li id="14e5" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js lr jz ka kb bi translated">你还需要在 GitHub 上为你的项目创建一个存储库</li></ul><p id="cda2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完成这些步骤后，您就可以开始下一步的部署了。</p><ol class=""><li id="7ca7" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">下载 Heroku 命令行界面(CLI)并安装</li><li id="3317" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">然后打开命令提示符或终端，执行<code class="du ls lt lu lv b">heroku login</code>。你会看到 Heroku 登录页面会在你的默认浏览器上自动打开。</li><li id="fdbe" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">登录完成后，通过执行下面的命令在本地克隆您的存储库，并导航到项目文件夹</li></ol><pre class="lw lx ly lz fd mq lv mr ms aw mt bi"><span id="6f4e" class="mc kp hi lv b fi mu mv l mw mx">git clone &lt;repository url&gt;<!-- --> <br/>cd &lt;project folder path&gt;</span></pre><p id="0ccc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.执行<code class="du ls lt lu lv b">heroku create</code>命令来创建一个<code class="du ls lt lu lv b">heroku app</code>，它将成为您的 API 项目的一个引用</p><p id="95a4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.现在，执行<code class="du ls lt lu lv b">git push heroku main</code>来完成部署过程</p><p id="2df4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.<code class="du ls lt lu lv b">Build succeeded!</code>如果成功，消息会出现在控制台上。</p><p id="282a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">7.要从命令提示符或终端打开 Heroku 应用程序，运行<code class="du ls lt lu lv b">heroku open</code>命令，您应该会看到<code class="du ls lt lu lv b">JSON Server</code>页面以及您的 API 信息。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/4e41267fa408e7e6775084dcac0e7629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZMiajgvevyxJ0X5c9Y-nQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">JSON 服务器页面</figcaption></figure><ul class=""><li id="5d90" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lr jz ka kb bi translated">这里有一个非常好的分步部署指南<a class="ae iu" href="https://devcenter.heroku.com/articles/getting-started-with-nodejs" rel="noopener ugc nofollow" target="_blank"/>。为了更加清楚，请参考这些步骤。</li></ul><p id="9bef" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意:部署 API 后，您可能会在启动 Heroku 应用程序时遇到一些错误。下面提供了一些可能解决该问题的通用步骤。</p><ul class=""><li id="0664" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lr jz ka kb bi translated">在 Heroku 应用程序的<code class="du ls lt lu lv b">Settings</code>标签下，在<code class="du ls lt lu lv b">config vars</code>部分指定<code class="du ls lt lu lv b">port</code>编号，如下所示。</li></ul><figure class="lw lx ly lz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/2268380960d226c05a296ad8a53d51cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TPMWD8McoG4pKPJsuQVRJw.png"/></div></div></figure><ul class=""><li id="cb55" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lr jz ka kb bi translated">在根项目文件夹下创建<code class="du ls lt lu lv b">Procfile</code>,它将包含<code class="du ls lt lu lv b">node</code>命令，需要执行该命令来触发您的<code class="du ls lt lu lv b">server.js</code>文件。</li></ul><figure class="lw lx ly lz fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="c091" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">仅此而已！</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="bf22" class="ko kp hi bd kq kr na kt ku kv nb kx ky kz nc lb lc ld nd lf lg lh ne lj lk ll bi translated">尾注</h1><p id="9305" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">首先感谢你阅读这篇文章，如果你觉得这篇文章有用，那么请鼓掌👏图标，并与他人分享。这将激励我写更多关于这类内容的博客。</p></div></div>    
</body>
</html>