<html>
<head>
<title>Logging with logging in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的日志记录进行日志记录</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/logging-with-logging-in-python-d3d8eb9a155a?source=collection_archive---------2-----------------------#2021-01-30">https://medium.com/nerd-for-tech/logging-with-logging-in-python-d3d8eb9a155a?source=collection_archive---------2-----------------------#2021-01-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2839" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">日志意味着跟踪你运行软件时发生的事件</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/0ba93514d13543f7877d3092510097b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_K3Vt-MeORzFp5Ei.jpg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://www.codemotion.com/magazine/dev-hub/big-data-analyst/logging-in-python-a-broad-gentle-introduction/" rel="noopener ugc nofollow" target="_blank">https://www . code motion . com/magazine/dev-hub/big-data-analyst/log-in-python-a-broad-gentle-introduction/</a></figcaption></figure><p id="dae7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在Python中，最简单的方法是在代码需要执行想要跟踪的动作时使用print()语句。如果您需要一些更高级的日志记录(例如，将日志保存在文件或数据库表中)，最简单的方法是使用<a class="ae jn" href="https://docs.python.org/3/library/logging.html" rel="noopener ugc nofollow" target="_blank">日志记录</a></p><p id="1151" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">另一个需要考虑的问题是:什么时候必须使用日志记录vs引发异常？简而言之，一如既往，这取决于你必须做什么。软件应该如何运行？错误是否严重到不能/不应该采取进一步措施？在这种情况下，例外是预期的行为。即使我们有任何错误，是否可以继续执行代码？好的，在这种情况下，让我们继续跟踪，我们得到了一些错误，但让我们继续执行代码。reddit上关于这个<a class="ae jn" href="https://www.reddit.com/r/learnpython/comments/9l0aqb/when_should_i_use_loggererror_vs_raise_exception/" rel="noopener ugc nofollow" target="_blank">话题</a>的讨论非常有趣</p><p id="7e0b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">本示例的设置:让我们生成随机整数，并假设生成的值必须符合某些阈值，这些阈值指示某个值是警告、错误还是严重错误</p><p id="cb3a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们考虑3个例子:</p><ul class=""><li id="38ec" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">例1:让我们使用print()来记录代码中发生的事情</li><li id="ccce" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">示例2:以示例1为基础，让我们使用日志模块</li><li id="f612" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">示例3:以示例2为基础，让我们以不同的方式跟踪不同的错误级别。在本例中，我还创建了SQLiteHandler.py来记录SQL表上的错误消息</li></ul><p id="61b5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">示例1</p><p id="ca12" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是一个基本示例:我们使用print()来记录控制台上代码的每一步</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ky kz l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es la"><img src="../Images/fbae47403a521fffff869b82348f4e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*1joaavpWztLUwZz7hjESnw.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">示例1.py执行</figcaption></figure><p id="5825" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">示例2</p><p id="059b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这个例子中，我们使用日志记录的基本配置将代码的步骤保存在一个文件中。消息有不同的级别(调试、信息、警告、错误和严重)。通过更改basicConfig()中的级别，我们可以更改我们记录的起始级别</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ky kz l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lb"><img src="../Images/37ef3d4b54e0529eb7b30bc19e801d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*ecdc5YxJhreO90gQ6wd0DQ.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">示例2.log</figcaption></figure><p id="b2f4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">示例3</p><p id="4a30" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这个例子中，我们为不同的日志记录级别设置了不同的处理程序，我们还使用模块SQLiteHandler在SQL表上记录从信息级别开始的消息</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ky kz l"/></div></figure><p id="255e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们来看看SQLiteHandler模块:它基于Yarin Kessler的<a class="ae jn" href="https://gist.github.com/ykessler/2662203#file_sqlite_handler.py" rel="noopener ugc nofollow" target="_blank"> sqlite_handler.py </a>。使用一个<strong class="jq hj">属性列表</strong>我们可以选择我们想要记录的信息(它们将是日志表中的列)。在这个例子中，我使用的是SQLite，但是对于我们想要使用的任何其他数据库，以同样的方式设置另一个处理程序是非常简单的</p><p id="a65b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当然，如果您更改了<strong class="jq hj">attribute _ list</strong>，记得删除/创建该表，或者在数据库上做一些事情来管理这种更改，否则当您试图在日志表中保存一条记录时，会因为列不匹配而出现错误</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ky kz l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lc"><img src="../Images/e7a9bf3b20b949a32c76984227fa5bd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*s5sWcCVOK979AG4QjzCSkw.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">例_3.py执行</figcaption></figure><p id="735c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果我们检查日志表，我们将只看到信息、错误和关键消息；如果我们检查<strong class="jq hj"> example_3_error.log </strong>，我们将只看到错误和关键消息；如果我们检查<strong class="jq hj"> example_3_critical.log </strong>，我们将只看到关键消息</p><p id="c501" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong>代码可以在这个github <a class="ae jn" href="https://github.com/simonerigoni/logging_examples" rel="noopener ugc nofollow" target="_blank">仓库</a>中找到</p></div></div>    
</body>
</html>