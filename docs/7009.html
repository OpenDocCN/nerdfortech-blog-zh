<html>
<head>
<title>Jetpack Compose State Management for Composable’s Screen made Simple.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简化可组合屏幕的 Jetpack 组合状态管理。</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/jetpack-compose-state-management-for-composables-screen-made-simple-7817e5de7f0b?source=collection_archive---------1-----------------------#2022-07-03">https://medium.com/nerd-for-tech/jetpack-compose-state-management-for-composables-screen-made-simple-7817e5de7f0b?source=collection_archive---------1-----------------------#2022-07-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7eabffe87f4c36271843d31877510ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nG50YlON4sqEtnzmcZBz_g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自<a class="ae iu" href="https://kaaneneskpc.medium.com/state-management-in-jetpack-compose-7530e8490d3d" rel="noopener">https://kaaneneskpc . medium . com/state-management-in-jetpack-compose-7530 e 8490 d3d</a></figcaption></figure><p id="df81" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大家好，😀</p><p id="ee1e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请进行第一天的<a class="ae iu" href="https://gondhalesatyam-28082.medium.com/1st-day-of-learning-jetpack-compose-db3865bc5ca4" rel="noopener"> <strong class="ix hj">简介撰写&amp;设置</strong> </a> <strong class="ix hj"> </strong> <a class="ae iu" href="https://emojipedia.org/building-construction/" rel="noopener ugc nofollow" target="_blank">🏗️ </a>如果你还没有设置一个基本的合成项目。</p><p id="3339" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经知道，<strong class="ix hj"> Jetpack Compose </strong>现在被认为是 Android 的未来，是构建原生 UI 的现代工具包。主要的特点是，它用更少的代码、更强大的工具和更多的东西使你的应用变得生动。许多公司已经开始采用它或在 Compose 中迁移他们的旧东西。</p><p id="13bd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在 Jetpack Compose 中，您会发现许多方法来管理 Web 上可组合屏幕的 Jetpack Compose  中的<a class="ae iu" href="https://developer.android.com/jetpack/compose/state" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">状态。每个人都有不同的思维过程来用自己的实现管理可组合屏幕的状态。我提到了一个<a class="ae iu" href="https://github.com/android/compose-samples/tree/master/JetNews" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> JetNews </strong> </a>示例项目思维过程，它使开发可组合屏幕时的状态管理变得容易。让我们借助一个在 99 %的应用中都能看到的屏幕的例子来讨论一下，在登机流程上的<strong class="ix hj">-【OTP 验证】</strong></strong></a></p><div class="jt ju ez fb jv jw"><a href="https://youtube.com/shorts/OkDCKJ2TIdY?feature=share" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">SendOtp 可组合屏幕</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">此视频描述了 Jetpack 可组合屏幕的成功、失败和加载的不同 UI 状态。</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">youtube.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk io jw"/></div></div></a></div><p id="474d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是屏幕的样子，有一个<a class="ae iu" href="https://developer.android.com/jetpack/compose/text#enter-modify-text" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">outlined textfield</strong></a>，<a class="ae iu" href="https://satyamgondhale-writings.medium.com/3rd-day-of-learning-jetpack-compose-button-material-design-3-d1f3dae46e39" rel="noopener"> <strong class="ix hj">按钮</strong> </a>，<a class="ae iu" href="https://www.jetpackcompose.net/jetpack-compose-progress-indicator-progressbar" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">圆形进度指示器</strong> </a>，<strong class="ix hj">错误视图</strong>用于我们的示例<strong class="ix hj">。</strong></p><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/c1dffba1e34a2681e9328ddbcb111a64.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*6MUCLnXTyKjTEBh3Vq2AjA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自 Android Studio 模拟器</figcaption></figure><h2 id="fe8b" class="kq kr hi bd ks kt ku kv kw kx ky kz la jg lb lc ld jk le lf lg jo lh li lj lk bi translated">这将如何工作？</h2><ol class=""><li id="356f" class="ll lm hi ix b iy ln jc lo jg lp jk lq jo lr js ls lt lu lv bi translated">输入手机号码</li><li id="e434" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated">在正确的手机号码后启用发送 OTP 按钮</li><li id="c728" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated">模拟<strong class="ix hj">加载</strong>发送 OTP 的行为</li><li id="60a9" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated">模拟发送 OTP <strong class="ix hj">失败</strong>的行为</li><li id="e855" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated">模拟发送 OTP <strong class="ix hj">成功</strong>的行为</li></ol><p id="8f9e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">注意</strong>:我们已经使用了<a class="ae iu" href="https://developer.android.com/topic/libraries/architecture/viewmodel" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> ViewModel </strong> </a>来处理可组合屏幕的业务逻辑，并将 VM 对象传递给可组合屏幕(在本文中，我们还没有介绍如何使用 MVVM 等来设置组合项目)</p></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><p id="9480" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">send OTP 屏幕的可能状态&amp;其表示</strong>👇</p><ol class=""><li id="6c69" class="ll lm hi ix b iy iz jc jd jg mi jk mj jo mk js ls lt lu lv bi translated"><strong class="ix hj">初始</strong>状态(当输入电话号码时，用户仅观察到 OutlinedTextField 的变化)</li><li id="524b" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><strong class="ix hj">启用发送 Otp </strong>按钮状态(当输入正确的 10 位电话号码时)</li><li id="6503" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><strong class="ix hj">发送 Otp </strong>状态(当用户按下发送 Otp 按钮时)</li><li id="815a" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><strong class="ix hj">发送 Otp 失败</strong>状态(任何情况下发生错误时)</li><li id="73ba" class="ll lm hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><strong class="ix hj">发送 otp 成功</strong>状态(当 Otp 发送成功时)</li></ol><figure class="km kn ko kp fd ij"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="a995" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于来自 VM 的 Api 响应(加载、成功、失败),我们将为我们的可组合屏幕获得更具体的 UI 状态👇</p><figure class="km kn ko kp fd ij"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="a0c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">考虑 Api 失败状态示例工作👇</p><figure class="km kn ko kp fd ij"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="fbb5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们对失败状态的期望是应该禁用按钮，不应该显示加载状态，应该显示错误状态，不应该显示成功块。这就是 SendOtpUiState 类如何简单地进行管理😀</p><p id="e597" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用于模拟行为和业务逻辑的视图模型代码👇</p><figure class="km kn ko kp fd ij"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="5af7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是关于 Compose 中<strong class="ix hj">状态管理的基础知识。本文可能不会涵盖基于您的复杂实现用例的所有内容，但是您可以从这里开始。万事如意。<a class="ae iu" href="https://emojipedia.org/grinning-face-with-big-eyes/" rel="noopener ugc nofollow" target="_blank">😃</a> <br/>您可以克隆此存储库进行基本设置。此外，源代码中所有概念都可以根据相同内容进行更新。(切换到分支<strong class="ix hj">StateManagementOfCompose</strong>)来实现。<br/><a class="ae iu" href="https://github.com/SatyamGondhale/LearnCompose" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">https://github.com/SatyamGondhale/LearnCompose</strong></a></strong></p><p id="e990" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你认为这对你有帮助，请随意<a class="ae iu" href="https://emojipedia.org/clapping-hands-light-skin-tone/" rel="noopener ugc nofollow" target="_blank">👏🏻</a>【鼓掌】&amp;分享。谢了。😄</p></div></div>    
</body>
</html>