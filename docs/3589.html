<html>
<head>
<title>Math in Unity - Calculating Angles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity 中的数学-计算角度</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/math-in-unity-calculating-angles-680bb9bc47bc?source=collection_archive---------6-----------------------#2021-06-15">https://medium.com/nerd-for-tech/math-in-unity-calculating-angles-680bb9bc47bc?source=collection_archive---------6-----------------------#2021-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="35db" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在拐角处？等等，我需要从哪个角度瞄准你？！</h2></div><p id="644f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">视频游戏中经常用到角度。我们之前讲过旋转，角度在这里是一个完美的组合！当你改变你的方向时，你可能会从另一个角度看到你。为了跟踪你，它需要计算看你的角度。今天就来看看如何实现这种行为吧！</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="43e3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一、目标是什么？<br/> 目的是让胶囊“指向”玩家立方体。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ka"><img src="../Images/94c860500b23f5c05c8448869edd5e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSszzCKVo3q0EMGiiaKC2Q.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="825c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">二。数学方面<br/>T5【我们需要一些数学函数来计算角度。我们已经给定了三角形的两条边。斜边上的值丢失，需要计算。为此，<em class="km"> tan </em>将派上用场，因为公式是对面的长度除以相邻的长度，简称为<em class="km"> Opp/Adj </em>。</strong></p><p id="bb65" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">tan 方法将返回一个值，但没有角度。要将值转换成角度，我们需要执行反正切数学函数。</p><p id="6fd2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们创建一个简单的例子:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es kn"><img src="../Images/22b4818c6c0ea8411d545f29861f83fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CeL7VhUBFbENAfE5K8IAsw.png"/></div></div></figure><p id="d583" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对面是 4，相邻的是 3 <br/> → 4/3 = 1.25</p><p id="377c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要获得角度，使用反切线函数<br/>→tan^-1(1.25)=<strong class="iz hj"><em class="km">51.34</em></strong></p><p id="f3c1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们需要的角度是 51.34。<br/>现在让我们通过代码实现计算！</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="2fe3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">三。实现计算<br/> </strong>我们先把要做的事情写下来。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ko"><img src="../Images/37f2b8e2176f337c8e51868f636bcf51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BpLFrgfU6AUvsj5WJxgmCw.png"/></div></div></figure><p id="685d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了能够计算方向，我们还需要给敌人分配一个参考。</p><p id="44a8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经在昨天的文章中讨论了如何计算方向。为了计算角度，我们使用<em class="km"> Mathf。Atan2()。</em> Atan2 因为它会把负值转化为正值。阿坦不允许任何负值。由于我们想把 tan 值转换成度数，我们需要用<em class="km"> Mathf.Rad2Deg. </em>进行转换</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ko"><img src="../Images/58d64dcfba275e9ad5e67083f8bd2691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ACh_eQTWmceyVh30fxGsA.png"/></div></div></figure><p id="2c6a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后要做的是旋转游戏对象。为此，我们将操纵欧拉角。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es kq"><img src="../Images/06df5d9219028f0a0b51bde72f62ce61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NCQqcABmt5NL-bELLqeCg.png"/></div></div></figure><p id="a52e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在 Unity 中运行这个会带回一些奇怪的东西。计算的角度似乎是正确的，然而，胶囊并没有指向玩家立方体。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es kr"><img src="../Images/1118c7fe26e4f7ef3679994280e59432.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8OuSLYPPj_MdJzB7z9_MUQ.png"/></div></div></figure><p id="4bbe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">胶囊上的方向箭头在这里很有帮助！太空舱旋转 90 度太远了！这是 Unity 独有的问题，因为 Unity 的单位圆不同于你从数学中知道的那个。要解决这个问题，我们只需将计算出的角度偏移 90°。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ks"><img src="../Images/e49221a3c113a752d2d2dcba59898719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*61n5Gbl3fCk8IRBKIQ3-DA.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="6c85" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">四。工作最终结果<br/> </strong>做完这些，让我们来看看最终结果:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es kt"><img src="../Images/9cc74c020d701ba3a9d8568805a5cb09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1gYr4zrh1DO2yXKaAebdGw.gif"/></div></div></figure><p id="881f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">无论立方体想去哪里，他现在都会一直被胶囊追踪。</p><p id="2387" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">哦，和往常一样，这里是完整的代码:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ku"><img src="../Images/114000218d28f82ead5fe0ef9ccc91a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PfRLN6gyi2BIBDpFxDNfNw.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="8adc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个新发现的东西肯定会很有帮助！数学变得如此有趣真是令人兴奋。只希望学校的数学会如此有趣…</p><p id="43e9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">无论如何，感谢您的时间和兴趣来阅读这篇文章！下次再见！</p></div></div>    
</body>
</html>