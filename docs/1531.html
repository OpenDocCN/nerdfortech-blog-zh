<html>
<head>
<title>Use Node without installation and admin access</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用没有安装和管理权限的节点</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/use-node-without-installation-and-admin-access-b492796288c9?source=collection_archive---------5-----------------------#2021-03-24">https://medium.com/nerd-for-tech/use-node-without-installation-and-admin-access-b492796288c9?source=collection_archive---------5-----------------------#2021-03-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5c3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时我们需要运行依赖于节点和npm的项目。我将向您展示与以下节点相关的不同案例，并找出解决方案。</p><ol class=""><li id="c3f1" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">我想给我的客户谁不知道我的节点项目的发展。所以，要求他们安装节点并运行我的项目是一件繁琐的事情。</li><li id="aff7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">我想在我朋友的电脑上运行这个项目，该电脑可能安装了一个节点，但我需要一个特定的版本，因为例如，我使用了导入，而不是要求支持节点14+版本。</li><li id="bcf9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">我的客户端需要该应用程序的离线版本，所以没有机会运行npm install，所有的软件包都将被下载和安装。</li><li id="8c77" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">我没有管理员权限，我的电脑管理员害怕恶意软件。所以他不会允许我安装节点</li></ol><h1 id="34d9" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated"><strong class="ak">解决思路</strong></h1><p id="576c" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">我将提供一个文件夹，在其中添加一个二进制节点，使用文件夹中的节点运行项目，并编写一个批处理文件，像运行桌面应用程序一样运行它。我将在Windows操作系统上实现它，但我相信这个想法可以在其他操作系统上实现。</p><p id="09f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经把代码上传到GitHub了。请访问<a class="ae ku" href="https://github.com/mdrafee03/nodejs-without-installation/" rel="noopener ugc nofollow" target="_blank">链接</a>查看实施情况。签出分支以检查实现。</p><h1 id="4968" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated"><strong class="ak">分步实施</strong></h1><ol class=""><li id="8895" class="jd je hi ih b ii kp im kq iq kv iu kw iy kx jc ji jj jk jl bi translated">在您喜欢的位置创建一个名为script的文件夹(无论您的项目名称是什么)。我在桌面<code class="du ky kz la lb b">C:\Users\mdraf\Desktop\script</code>上创建了它，我将在整个帖子中引用它。请使用您的位置。</li><li id="ffd9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">去nodejs官方页面下载32位/64位Windows二进制(。zip)。因为它安装了nodejs版本，并且包含兼容的npm版本。</li><li id="af17" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">解压zip文件，并将<code class="du ky kz la lb b">node.exe</code>复制到脚本文件夹(<code class="du ky kz la lb b">C:\Users\mdraf\Desktop\script\nodejs</code>)中名为nodejs的文件夹中</li><li id="11b9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如果你需要npm，把<code class="du ky kz la lb b">npm.cmd</code>和<code class="du ky kz la lb b">node_modules</code>文件夹从解压后的文件夹复制到nodejs文件夹，我稍后会解释为什么你可以跳过npm。</li><li id="bb4e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">将项目文件夹复制到脚本文件夹中</li><li id="3203" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">在项目文件夹中创建一个名为<code class="du ky kz la lb b">run.bat</code>的批处理文件。</li></ol><p id="b002" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终，文件夹结构将如下所示</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lc"><img src="../Images/c530a7f3443c8ed49935a38694cb4f1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*RNvDl9bnu2Aj3mvMlSsVhA.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">文件夹结构</figcaption></figure><h1 id="a223" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated"><strong class="ak">带说明的批次文件代码</strong></h1><figure class="ld le lf lg fd lh"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="1489" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ky kz la lb b">%~dp0</code>变量扩展了批处理文件的路径。所以<code class="du ky kz la lb b">%~dp0nodejs/node </code>指的是nodejs文件夹的node.exe，<code class="du ky kz la lb b">%~dp0nodejs/project index.js</code>指的是项目文件夹中节点项目的索引。<code class="du ky kz la lb b">call</code>是运行命令的命令。</p><p id="4d81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行批处理文件后，单击run.bat文件，它显示服务器正在运行。万岁</p><p id="2bb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这部分的完整实现上传到<a class="ae ku" href="https://github.com/mdrafee03/nodejs-without-installation/tree/npm" rel="noopener ugc nofollow" target="_blank"> Github Repo </a>。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lq"><img src="../Images/ba43628c569e78f4fb7ba8c3cf1026e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BwMf0PMPS35ybNjpX71SUg.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">运行节点服务器</figcaption></figure><h1 id="adca" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">几个音符</h1><ol class=""><li id="b2f8" class="jd je hi ih b ii kp im kq iq kv iu kw iy kx jc ji jj jk jl bi translated">您的项目中可能有<code class="du ky kz la lb b">package.json</code>,并且您有许多库需要安装。如果您的客户有在线支持，您可以运行npm安装，如果没有，您将运行npm安装，这将产生node_modules，您将在您的项目中提供它。</li><li id="16ed" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如果您的客户没有在线支持，您可以跳过npm。因为您可能不需要安装npm，所以您将把node_modules打包到项目文件夹中，如果您需要任何全局npm库，也将它们添加到脚本文件中。实现如下所示:</li></ol><p id="1de4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您需要一个全局http服务器。所以，你将在你的pc中运行<code class="du ky kz la lb b">npm i -g http-server</code>并转到<code class="du ky kz la lb b">C:\Users\[username]\AppData\Roadming\npm</code>，对我来说是<code class="du ky kz la lb b">C:\Users\mdraf\AppData\Roadming\npm</code>并将<code class="du ky kz la lb b">http-server.cmd</code>从这个文件夹复制到除了<code class="du ky kz la lb b">node.exe</code> ( <code class="du ky kz la lb b">C:\Users\mdraf\Desktop\script\nodejs)</code>)之外的nodejs文件夹，并将<code class="du ky kz la lb b">node_modules/http-server</code>复制到<code class="du ky kz la lb b">C:\Users\mdraf\Desktop\script\nodejs\node_modules</code>文件夹。现在可以拆下<code class="du ky kz la lb b">npm.cmd</code>和<code class="du ky kz la lb b">node_modules/npm</code>了。现在，您可以像nodejs一样运行http-server命令。</p><figure class="ld le lf lg fd lh"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="da30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行run.bat文件后，用127.0.01:8080打开浏览器，就可以看到服务器正在运行。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lv"><img src="../Images/14e1974549d695aafe71d8eb97436da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rBB9FYJpZmonxEETtDk2lA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">运行在127.0.0.1:8080的http服务器</figcaption></figure><p id="8472" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这部分的完整实现上传到<a class="ae ku" href="https://github.com/mdrafee03/nodejs-without-installation/tree/http-server" rel="noopener ugc nofollow" target="_blank"> Github Repo </a>。</p><h1 id="a029" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">结论</h1><p id="c82b" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">我们已经讨论了本文第一阶段提到的四个问题。以下是我们是如何做到的。</p><ol class=""><li id="63b8" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">你会把脚本文件夹给客户/任何你想给的人。他必须运行<code class="du ky kz la lb b">run.bat</code>。一切都会马上准备好。不需要安装节点或npm</li><li id="62f1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">您的朋友可能在他/她的电脑上安装了不同的nodejs版本。因为这个脚本运行本地<code class="du ky kz la lb b">node.exe</code>(不是全局的)，所以它将使用给定的nodejs和npm版本运行。</li><li id="4917" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如果客户端需要离线版本，您将添加node_modules，这将消除下载的依赖性，并根据需要添加任何全局包。</li><li id="1938" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如您所见，它没有安装nodejs，而是从您在脚本中给出的nodejs文件夹运行，不需要管理员访问。</li></ol><p id="ba7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你的阅读。如果您有任何反馈，请发表评论。干杯…</p></div></div>    
</body>
</html>