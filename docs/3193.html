<html>
<head>
<title>Angular: Don’t Go To Battle Unarmed</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">棱角分明:不要赤手空拳去战斗</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/angular-dont-go-to-battle-unarmed-813ab0d3cb4f?source=collection_archive---------8-----------------------#2021-06-01">https://medium.com/nerd-for-tech/angular-dont-go-to-battle-unarmed-813ab0d3cb4f?source=collection_archive---------8-----------------------#2021-06-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b92d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">将改进任何角度项目的工具集合</h2></div><p id="016a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个好的士兵总是在去战斗之前确保他有合适的武器，同样的道理也适用于一个开发人员，他在开始一项新任务之前需要合适的工具。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/481d27d6473368ae7b6f2b03c39c6991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aszGXrLZUej1T5U55Szr9A.jpeg"/></div></div></figure><p id="3404" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我将与你分享一些工具，它们将使你的编码更高效、更负责、更清晰。</p><h1 id="2cb2" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">1.性能:“记忆”和变更检测日志</h1><h2 id="93e8" class="kx kg hi bd kh ky kz la kl lb lc ld kp jg le lf kr jk lg lh kt jo li lj kv lk bi translated">Lodash装饰公司“memoize”</h2><p id="8652" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">正如你所知道的，当你在你的模板中调用一个函数时，它会在每次变化检测时被触发。如果函数运行一些“繁重”逻辑，可能会导致性能问题。</p><p id="dac1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有几种解决方案可以避免这种情况:</p><p id="c2dc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.将该功能转移到一个纯管道中——但是为每个用例编写一个新管道可能会很烦人。</p><p id="0f66" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.将函数编写为内联代码，类似于:</p><pre class="ju jv jw jx fd lq lr ls lt aw lu bi"><span id="5597" class="kx kg hi lr b fi lv lw l lx ly">[class.some-class]="firstVar === 'good' &amp;&amp; (secondVar ==='1' | thirdVar === '2')"</span></pre><p id="adc3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这很好，但它使模板代码非常难看，我更喜欢我的所有逻辑都放在' component.ts '文件中。</p><p id="4209" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我建议您使用另一种解决方案，即在模板中使用常规函数，但使用memoize decorator。</p><p id="cb25" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Memoize的工作原理类似于管道。它所做的是为函数接受的每个输入创建一个哈希键并缓存结果，如果该键重复，它将恢复缓存结果。</p><pre class="ju jv jw jx fd lq lr ls lt aw lu bi"><span id="b785" class="kx kg hi lr b fi lv lw l lx ly">install:<br/>npm i lodash-decorators --save</span></pre><p id="3435" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于只有1-0个参数的函数，您可以使用:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="f3eb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于采用多个参数函数，请使用:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="54ae" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mb">注意事项</em>:</p><ol class=""><li id="a533" class="mc md hi iz b ja jb jd je jg me jk mf jo mg js mh mi mj mk bi translated">注意函数中的一些内部状态会导致不同的输出。</li><li id="1518" class="mc md hi iz b ja ml jd mm jg mn jk mo jo mp js mh mi mj mk bi translated">尽量只使用基本类型，因为对象和数组是通过引用缓存的。</li><li id="a141" class="mc md hi iz b ja ml jd mm jg mn jk mo jo mp js mh mi mj mk bi translated">你可以从这个库中使用其他有用的装饰器，比如:去抖，节流等等。</li></ol></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><h2 id="af08" class="kx kg hi bd kh ky kz la kl lb lc ld kp jg le lf kr jk lg lh kt jo li lj kv lk bi translated">更改检测日志</h2><p id="1fcc" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">我在开发时总是确保运行这个技巧，它让我意识到我的应用程序中的变更检测周期以及每个周期花费了多少时间。当您集成了一些第三方软件，并想看看它会引起什么样的变化检测时，这是特别有用的。</p><p id="1feb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要实现这一点，请使用以下配置，确保这段代码只在develop中执行(我使用' isDevelopment '标志) :</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="4dbe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，您将在控制台日志中看到以下内容:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mx"><img src="../Images/fdf1c5be36b2da01297f5c9121312a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6lL4sCL3n3Mf03dg-s5idw.png"/></div></div></figure></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><h1 id="7c9d" class="kf kg hi bd kh ki my kk kl km mz ko kp io na ip kr ir nb is kt iu nc iv kv kw bi translated"><strong class="ak"> 2。单元测试:SpyHelper </strong></h1><p id="4bd2" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">是一个助手类，它将使你的项目中的模拟服务变得轻而易举。</p><p id="fa91" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在项目中定义以下类:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="43c2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于基本用法，您只需要模拟类:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="7238" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您确实需要模拟服务中的某些逻辑，您可以执行以下操作:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><h1 id="2dc8" class="kf kg hi bd kh ki my kk kl km mz ko kp io na ip kr ir nb is kt iu nc iv kv kw bi translated">4.自定义验证类</h1><p id="8bbd" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">将所有自定义验证放在一个类中，然后就可以像使用内置验证一样使用它。</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="16aa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这样做的另一个好处是，您可以共享逻辑bettwen验证功能。</p></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><h1 id="537d" class="kf kg hi bd kh ki my kk kl km mz ko kp io na ip kr ir nb is kt iu nc iv kv kw bi translated"><strong class="ak"> 4。通用安全管道</strong></h1><p id="18c3" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">当我需要向模板注入一些不安全的代码时，这是我经常使用的一个常用管道。</p><p id="195f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建以下管道:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="e405" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用法:</p><pre class="ju jv jw jx fd lq lr ls lt aw lu bi"><span id="c773" class="kx kg hi lr b fi lv lw l lx ly">&lt;div [innerHTML]="previewHtml | safe: 'html'"&gt;&lt;/div&gt;</span></pre><h1 id="25bb" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">如果你错过了:</h1><ul class=""><li id="fd72" class="mc md hi iz b ja ll jd lm jg nd jk ne jo nf js ng mi mj mk bi translated">Angular新项目配置:<a class="ae nh" href="https://tal-gershman.medium.com/angular-new-project-boilerplate-workspace-unit-testing-pre-commits-hooks-custom-library-eslint-fcc40873698a" rel="noopener">https://tal-gershman . medium . com/angular-New-Project-boilerplate-workspace-unit-testing-pre-commits-hooks-custom-library-eslint-FCC 40873698 a</a></li></ul><p id="f1d0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">感谢阅读！如果你有任何问题，请在评论中告诉我。</strong></p></div></div>    
</body>
</html>