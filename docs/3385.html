<html>
<head>
<title>Convenience Initializers in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的便利初始化器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/convenience-initializers-in-swift-19519dd57587?source=collection_archive---------5-----------------------#2021-06-08">https://medium.com/nerd-for-tech/convenience-initializers-in-swift-19519dd57587?source=collection_archive---------5-----------------------#2021-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0c90ab5266c88f507ed493b4d4cd418b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sm8Mc94zVdG4ljf0AvanXQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">卡尔·帕夫洛维奇在<a class="ae iu" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>的照片</figcaption></figure><p id="035f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">swift中的初始化器给了我们定制自定义类在创建时如何初始化的灵活性。在Swift中，苹果在他们的框架中创建了多个初始化器，给开发者更多的选择来实例化具有不同配置的对象。通常情况下，有必要为我们的自定义类编写自己的初始化器。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="0a1f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设我们正在开发一个需要多个标签的应用程序。我们正在以编程方式构建应用程序，标签需要一些自定义样式。我们可以从覆盖标签的一个指定初始化器来设置我们的自定义类开始。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/4e213ced7e33131d3a265ef08c58f84d.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*pyKWpBvcjUtRMUCSsMbkgQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">为了保持初始化器的整洁，我们将使用一个定制的配置函数来保存标签的定制。</figcaption></figure><p id="8c48" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随着我们的标签的指定init被覆盖和我们的configure函数就位，我们可以开始定制了。(注意，我们还必须使用<strong class="ix hj"> NSCoder </strong>实现所需的init，如果从我们的自定义初始化器创建我们的对象时出现问题，NSCoder 将触发并崩溃我们的应用程序)</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/ae2291fb34af1a6975ca2e8e45f2b42d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*EgXbRWQmOPAy1qYFtL6czg.png"/></div></figure><p id="0267" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的CustomLabel类现在为我们的应用程序提供了独特的样式。虽然这肯定有效，但我们的标签并不是非常动态<em class="kg">的</em>:我们创建的每个标签每次都会有这种精确的样式。例如，如果我们想改变textColor，我们就必须在应用程序生命周期的某个地方改变它。这个实现不完全是<strong class="ix hj"> <em class="kg">方便</em></strong>；有更简单的方法！</p><p id="5abe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的自定义类中，我们可以创建<strong class="ix hj">纵容初始化器</strong>，给我们的对象更多的灵活性，并分离我们的代码，使其可重用。现在你可能会想，给我们的自定义类添加一个完整的初始化器需要更多的代码，你是对的，但是它会清理我们项目中实例化对象的其他文件。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/7dcf2c199fe472fd0f344ec32fc164ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*lvgKt6m-AqdoxnyjvX9pRA.png"/></div></figure><p id="8eac" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了创建我们的便利初始化，我们从初始化器前的便利关键字开始，告诉Xcode这个初始化器可以用来实例化我们的标签。如你所见，我们得到一个错误，说明在从初始化器返回之前没有在所有路径上调用' self.init'。 这是什么意思？为了方便调用init，我们还必须在初始化器中调用父对象的一个指定初始化器。<a class="ae iu" href="https://docs.swift.org/swift-book/LanguageGuide/Initialization.html" rel="noopener ugc nofollow" target="_blank"> Swift文档</a>告诉我们:</p><p id="c95f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">"<em class="kg">指定的初始化器</em>是类的主初始化器。指定的初始化器完全初始化该类引入的所有属性，并调用适当的超类初始化器来继续超类链的初始化过程</p><p id="c68d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">前面我们覆盖了标签的父初始化器init(frame:)，并调用了我们的自定义函数，我们只需要在方便的init中调用这个初始化器，然后我们就可以为标签添加动态代码了。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/79aea9fb2e6acc6d8ca864fec98d6ce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*jAwiZL2jt46yyufmJopQ4A.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">注意，在便利init中调用的init(frame:)是我们覆盖的init。</figcaption></figure><p id="81a8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我们使用便利的init时，我们的configure函数将被自动调用，允许我们分离出我们想要动态的代码。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/317869c667a58ac7f39eb94e6b76d582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*IE84GWF9Zuv6Vsd1Y6pjTg.png"/></div></figure><p id="2752" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的便利init现在可以使用了！我们现在编写的配置函数只保存我们不想在创建的每个标签之间改变的代码！现在，当我们创建自定义标签时，Xcode会让我们选择使用新的init，并通过自动调用指定的init来处理标签的构造，然后应用我们的自定义代码。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/33c76d8f510e5e1e31c009e6595647ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a8O7vOI0y3bDgmSiJx3d8A.png"/></div></div></figure><p id="c527" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方便的初始化器确实给你的自定义类增加了更多的代码，但是它们也允许你从重复的对象中初始化动态代码，从而清除了使用对象的调用点。</p></div></div>    
</body>
</html>