<html>
<head>
<title>Wall Jumping in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">团结跳墙</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/wall-jumping-in-unity-393585161529?source=collection_archive---------15-----------------------#2021-07-01">https://medium.com/nerd-for-tech/wall-jumping-in-unity-393585161529?source=collection_archive---------15-----------------------#2021-07-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/4c92113c17eb4cc129e83a2eec03e4b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/1*OAZOyyFAAMBXwDTZ62HneQ.gif"/></div><figcaption class="im in et er es io ip bd b be z dx translated">SUNSOFT 出版的《蝙蝠侠:NES》中的经典翻墙动作。</figcaption></figure><p id="fed2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">跳墙是平台游戏中一个受欢迎的游戏机制，有充分的理由，到达顶端是具有挑战性和令人满意的！我将快速向您展示如何使用工具内置的角色控制器在 Unity 中做到这一点。</p><p id="2f37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了进行跳墙，我们需要将规则限制在:</p><ol class=""><li id="b940" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">必须离开地面</li><li id="1621" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">计算曲面法线并垂直施加力。</li></ol><p id="7fb1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">听起来很难？别担心，Unity 会做所有的重活！</p><p id="a98b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们将使用一个新工具，我们的玩家角色控制器！</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kc"><img src="../Images/747d5b2c65d44a90bdeacd2c6ab40af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rtk1METrVth7SyIEg5jf-w.png"/></div></div></figure><p id="4b61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这看起来很像 OnColliderEnter 或 OnTriggerEnter，不是吗？我们可以利用它！</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kc"><img src="../Images/47eee3dac220fefea5864e4aa5b581cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rlv0mhVtIp5vn7_D0lmARw.png"/></div></div></figure><p id="7e61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们运行这段代码时，我们将会看到一条蓝线，从玩家将会碰到的任何正常物体开始。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kl"><img src="../Images/f600b06b3f3901433ae532160ffdbe58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-HJ266fcLuppvFi9DuK6vg.gif"/></div></div></figure><p id="c50b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以为了跳墙，我们需要知道我们在墙上。最简单的方法是选择任何垂直环境元素，并将它们标记为“墙”。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es km"><img src="../Images/183ad65702a6c5b567ac23f2bfff3f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*069uAQRij6vXQR-rLgAuMw.gif"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">用“墙”标签标记垂直墙。</figcaption></figure><p id="bc66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目前，我们的玩家可以在跳跃中改变主意。为了让跳墙成功，我们需要他在玩家落地的时候跳起来。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kn"><img src="../Images/34acd1893133540ec5f34b462ebc61ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hkoPc_yw69l_luLNAFYf2Q.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">这个代码将允许玩家在跳中“改变主意”。</figcaption></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/476cd5565c277c61b317ad2a31e4817d.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/1*I6fquyFV7UnG2jOlKS1omA.gif"/></div></figure><p id="bdd0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们把方向和速度变量移到。是一个圆形零件。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kn"><img src="../Images/4c87c2ddabf979363cb2648df6720fac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tVThCaufo8WClSebuLdnwA.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/1bd7033b6e1243ec455c26ce75cca3e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/1*CUKbzskE-7lCWDxV8F-kUA.gif"/></div></figure><p id="91d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在玩家一跳，就没有回头路了！这将有助于我们的墙跳。现在让我们开始编程！让我们创建一个 boolean 来获得 walljump 的许可。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kp"><img src="../Images/7da9efb4999eace2c83d2e5e789f252d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jOh5S8rf-pL6YxhK_El06g.png"/></div></div></figure><p id="70c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，在我们的控制器代码中，我们检查我们是否不在地面上，我们是否真的碰到了一堵墙，如果是这样，我们将把 _canWallJump 设置为 true。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kq"><img src="../Images/ef5299ed7a6b9e80b9f57a0f0292812f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33WsyflpU1aoBkZ_cYyGUQ.png"/></div></div></figure><p id="d47a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了知道表面法线，我们需要一个名为 _wallNormal 的变量容器。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kq"><img src="../Images/29e70e4635628fc1f95863122ad23bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zUmZruGmJ7LrpfeQQ2C7Sw.png"/></div></div></figure><p id="3f94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来我们需要思考的是，如果跳墙是真的，什么时候是假的？Update()下的第一个命令是一个很好的例子。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kr"><img src="../Images/b558957f3219ae47b0f95380e4dbc6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DFlerTx4VTBgY_GpJs-g4Q.png"/></div></div></figure><p id="ecb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们要跳墙的地方是 else 语句，玩家通常会第二次点击 jump。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ks"><img src="../Images/fe9f426f052f72ad27b0e4805f9983bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q_ecamITOhm0zHsrzr0TBQ.png"/></div></div></figure><p id="155f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，如果玩家可以两次跳跃，他们很好，但如果我们碰到一堵墙，并且 _canWallJump 为真，那么我们将 yVelocity 乘以 _jumpHeight。我还把它放大了 0.2 倍来增加一点活力。记住速度的公式是方向乘以速度，我们将把 _wallNormal(方向)乘以 _speed 放入 _velocity 变量中。</p><p id="5a82" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应该可以了！让我们看看它的实际效果吧！</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/d6e958b39bf42b8c715940cad4d78d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/1*Jww-SGUz8QRhar7gbchrDQ.gif"/></div></figure><p id="7c8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了可见的小发明，我认为我们有一个功能性的墙跳！万岁。明天我们将学习推物体解谜。</p></div></div>    
</body>
</html>