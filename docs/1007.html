<html>
<head>
<title>Automate Instagram with Python and Instapy on Ubuntu Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Ubuntu 服务器上使用 Python 和 Instapy 自动化 Instagram</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/automate-instagram-with-python-and-instapy-on-ubuntu-server-8dcc4426324e?source=collection_archive---------3-----------------------#2021-03-01">https://medium.com/nerd-for-tech/automate-instagram-with-python-and-instapy-on-ubuntu-server-8dcc4426324e?source=collection_archive---------3-----------------------#2021-03-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c031" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将讨论如何使用 Python 和 Instapy 来自动化您的 Instagram。继之前关于用 python 自动化 twitter 的<a class="ae jd" href="https://blog.tati.digital/2021/02/18/digital-marketing-with-twitter-and-python-for-django-web-app/" rel="noopener ugc nofollow" target="_blank">教程之后，我们将对 Instagram 的可用库做类似的事情。</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/78ef34b43c8ce8bc96cb2cdefbceb355.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N7DO-BTZ4HbjOTpp.jpg"/></div></div></figure><p id="f845" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将在本教程中介绍的内容:</p><ul class=""><li id="a1b2" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">设置开发环境——专门针对 ubuntu</li><li id="cf59" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">安装 instapy</li><li id="80b9" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">创建 instagram 会话</li><li id="d3f6" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">安排 python 脚本在系统文件上运行</li></ul><h1 id="aa85" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">设置开发环境—使用 python 和 Instapy 实现 Instagram 自动化</h1><p id="09d0" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">我们将在 Ubuntu 虚拟机上工作，您可以从这里获得:</p><p id="3ad0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://m.do.co/c/7d9a2c75356d" rel="noopener ugc nofollow" target="_blank">获取数字海洋水滴</a>，并使用此视频进行设置:<a class="ae jd" href="https://www.youtube.com/watch?v=Zyl23djnsVg" rel="noopener ugc nofollow" target="_blank">初始虚拟服务器设置</a>。</p><p id="f2d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后你可以按照以下步骤操作:注意，如果你得到一个装有数字海洋的虚拟机，你应该选择最新版本的 Ubuntu，它会预装 python 3.8 (Ubuntu 20.04)。</p><p id="a95e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将遵循的步骤也可从官方的<a class="ae jd" href="https://instapy.org/" rel="noopener ugc nofollow" target="_blank"> Instapy 文档网站</a>获得。</p><p id="9988" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从下面的命令运行它——安装 python3 支持库、pip3 等。</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="7d6a" class="lm kf hi li b fi ln lo l lp lq">sudo apt-get update<br/>sudo apt-get -y install unzip python3-pip python3-dev build-essential libssl-dev libffi-dev xvfb</span></pre><p id="9ff2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装虚拟环境</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="55a3" class="lm kf hi li b fi ln lo l lp lq">pip3 install virtualenv</span></pre><p id="af8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装 Chrome 和 Firefox——Instapy 在后台使用的工具，你需要这些工具才能让 insta py 工作。使用 wget 下载 chrome:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="df62" class="lm kf hi li b fi ln lo l lp lq">cd ~<br/>wget "https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb"</span></pre><p id="8d17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装 chrome</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="fbbb" class="lm kf hi li b fi ln lo l lp lq">sudo dpkg -i google-chrome-stable_current_amd64.deb</span></pre><p id="9384" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果出现错误，只需运行以下命令:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="8bba" class="lm kf hi li b fi ln lo l lp lq">apt-get -f install</span></pre><p id="327a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">删除下载的文件:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="dd84" class="lm kf hi li b fi ln lo l lp lq">sudo rm google-chrome-stable_current_amd64.deb</span></pre><p id="2372" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装 firefox 和驱动程序</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="d0ba" class="lm kf hi li b fi ln lo l lp lq">sudo apt-get install firefox <br/>sudo apt install firefox-geckodriver</span></pre><p id="b42c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导航到您想要工作的文件夹，并创建虚拟环境</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="4fd9" class="lm kf hi li b fi ln lo l lp lq">mkdir instagram &amp;&amp; cd instagram<br/>virtualenv instagramenv<br/>source instagramenv/bin/activate</span><span id="e260" class="lm kf hi li b fi lr lo l lp lq">pip install instapy</span></pre><p id="9cf9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">成功运行以上所有命令后，您将在虚拟环境中安装 instapy，您可以开始使用。</p><h1 id="a519" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">创建 Instapy 会话—运行一些代码</h1><p id="852a" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">创建一个名为 config.py 的文件，您可以在其中输入您的 instagram 用户名和密码:</p><p id="1299" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"># <code class="du ls lt lu li b">config.py</code></p><p id="5ed3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ls lt lu li b">insta_username = 'instagram-username'<br/>insta_password = 'instagram-password'</code></p><p id="6dfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在同一个目录中，创建以下文件— main.py</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="e43d" class="lm kf hi li b fi ln lo l lp lq">from instapy import InstaPy, smart_run<br/>import config</span><span id="5cc8" class="lm kf hi li b fi lr lo l lp lq">def wordPressSession():<br/>    comments = [<br/>            'Learn more from https://skolo.online',<br/>            'Learn Wordpress https://skolo.online',<br/>            'Learn WooCommerce from https://skolo.online',<br/>            'Yes! Amazing stuff',<br/>            'Just love wordpress',<br/>            'Check us out https://skolo.online',<br/>            'Check out Youtube https://rb.gy/n7tfbn',<br/>            'Free Learning Videos https://rb.gy/n7tfbn',<br/>            'Online Learning https://rb.gy/n7tfbn',<br/>            'WooCommerce Series https://rb.gy/hgc8um',<br/>            'Learn Wordpress https://rb.gy/hgc8um',<br/>            'Learn WooCommerce https://rb.gy/hgc8um'<br/>            ]</span><span id="59ad" class="lm kf hi li b fi lr lo l lp lq">    session = InstaPy(username=config.insta_username,<br/>                      password=config.insta_password,<br/>                      headless_browser=True)</span><span id="a024" class="lm kf hi li b fi lr lo l lp lq">    try:<br/>        with smart_run(session):<br/>            session.like_by_tags(["wordpress", 'woocommerce'], amount=10)<br/>            session.set_do_comment(True, percentage=50)<br/>            session.set_comments(comments)<br/>    except:<br/>        import traceback<br/>        print(traceback.format_exc())<br/>        pass<br/></span><span id="cd83" class="lm kf hi li b fi lr lo l lp lq">wordPressSession()</span></pre><p id="7f7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码会让你登录到你的 instagram 个人资料，搜索你提供的标签:“wordpress”和“woocommerce”。然后，它会喜欢带有这些标签的许多状态，甚至会用您在列表中提供的评论对 50%的状态进行评论。</p><p id="3597" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过在命令行中输入以下命令来运行该文件:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="5f75" class="lm kf hi li b fi ln lo l lp lq">python main.py</span></pre><h1 id="6d4e" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">自动化整个过程</h1><p id="e278" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">我们在虚拟服务器上运行这些代码的原因是，我们希望能够按计划连续运行这些代码。Python 为此提供了一个<a class="ae jd" href="https://schedule.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">调度库</a>:</p><p id="d09d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仍然在虚拟环境中:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="42b3" class="lm kf hi li b fi ln lo l lp lq">pip install schedule</span></pre><p id="7d13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后编辑您的代码，如下所示:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="a0cd" class="lm kf hi li b fi ln lo l lp lq">from instapy import InstaPy, smart_run<br/>import config<br/>import schedule<br/>import time<br/>import random</span><span id="93db" class="lm kf hi li b fi lr lo l lp lq">def wordPressSession():<br/>    comments = [<br/>            'Learn more from https://skolo.online',<br/>            'Learn Wordpress https://skolo.online',<br/>            'Learn WooCommerce from https://skolo.online',<br/>            'Yes! Amazing stuff',<br/>            'Just love wordpress',<br/>            'Check us out https://skolo.online',<br/>            'Check out Youtube https://rb.gy/n7tfbn',<br/>            'Free Learning Videos https://rb.gy/n7tfbn',<br/>            'Online Learning https://rb.gy/n7tfbn',<br/>            'WooCommerce Series https://rb.gy/hgc8um',<br/>            'Learn Wordpress https://rb.gy/hgc8um',<br/>            'Learn WooCommerce https://rb.gy/hgc8um'<br/>            ]</span><span id="6867" class="lm kf hi li b fi lr lo l lp lq">    session = InstaPy(username=config.insta_username,<br/>                      password=config.insta_password,<br/>                      headless_browser=True)</span><span id="27ec" class="lm kf hi li b fi lr lo l lp lq">    try:<br/>        with smart_run(session):<br/>            session.like_by_tags(["wordpress", 'woocommerce'], amount=10)<br/>            session.set_do_comment(True, percentage=50)<br/>            session.set_comments(comments)<br/>    except:<br/>        import traceback<br/>        print(traceback.format_exc())<br/>        pass</span><span id="67cd" class="lm kf hi li b fi lr lo l lp lq">schedule.every().day.at("08:00").do(wordPressSession)</span><span id="a055" class="lm kf hi li b fi lr lo l lp lq">while True:<br/>    schedule.run_pending()<br/>    time.sleep(1)</span></pre><p id="3257" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码将在每天 08:00 运行名为:wordPressSession()的函数。</p><p id="ea34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建名为 Instagram 的系统文件:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="414e" class="lm kf hi li b fi ln lo l lp lq">sudo nano /etc/systemd/system/instagram.service</span></pre><p id="6fb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在文件中，粘贴以下内容:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="051b" class="lm kf hi li b fi ln lo l lp lq">[Unit]<br/>Description=Instagram Bot Skolo Online Service<br/>After=multi-user.target</span><span id="074a" class="lm kf hi li b fi lr lo l lp lq">[Service]<br/>Type=simple<br/>Environment="PATH=/home/username/instagram/instagramenv/bin"<br/>ExecStart=/home/username/instagram/instagramenv/bin/python /home/username/instagram/main.py<br/></span><span id="2dfa" class="lm kf hi li b fi lr lo l lp lq">[Install]<br/>WantedBy=multi-user.target</span></pre><p id="6570" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码需要根据您的使用情况进行修改:</p><p id="6b2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">环境</strong>:应该是你的 env 文件/bin 的绝对路径</p><p id="0066" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Exec Start </strong>:应该是你的 python 在 env 里面的绝对路径和你正在运行的文件位置。有点像:<strong class="ih hj"> <em class="lv"> python main.py </em> </strong> —但是有绝对路径。</p><p id="0f13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本次运行后:</p><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="589c" class="lm kf hi li b fi ln lo l lp lq">sudo systemctl start instagram<br/>sudo systemctl enable instagram<br/>sudo systemctl status instagram</span></pre><p id="6ee3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当检查系统文件的状态时，在最后一个命令之后，您应该会看到一个漂亮的绿灯——如果一切正常的话。如果没有，请检查错误消息并进行相应的修复—错误的通常原因是系统文件中的绝对路径错误。</p><h1 id="cc48" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">完整视频教程—使用 python 和 instapy 实现 instagram 自动化:</h1><p id="c901" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">下面是完整的 youtube 视频教程。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="ly lz et er es ma mb bd b be z dx translated">使用 Python 和 Instapy 自动化 Instagram</figcaption></figure></div></div>    
</body>
</html>