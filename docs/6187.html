<html>
<head>
<title>Python FastAPI with AWS DynamoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有AWS DynamoDB的Python FastAPI</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/python-fastapi-with-aws-dynamodb-931073a87a52?source=collection_archive---------1-----------------------#2022-01-13">https://medium.com/nerd-for-tech/python-fastapi-with-aws-dynamodb-931073a87a52?source=collection_archive---------1-----------------------#2022-01-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3455" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用基于NoSQL的数据库AWS DynamoDB利用FastAPI Web App</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/8668b937f71de17684a2f82323905cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Xko1qsKAjD128fRC"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">照片由<a class="ae jt" href="https://unsplash.com/@markuswinkler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·温克勒</a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="a2ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将从使用本地DynamoDB转向使用云版本。总的来说，我们的代码没有什么需要改变的。但是有一点是肯定的，我们需要改变硬编码数据库的配置。显然，您不希望对敏感数据进行硬编码。</p><p id="c031" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，本文是FastAPI和AWS DynamoDB系列的第二篇文章。如果你没有看过第一篇文章，你可以到这里:</p><p id="5a62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" rel="noopener" href="/nerd-for-tech/introduction-to-fastapi-and-local-dynamodb-595c990ed0f8">https://medium . com/nerd-for-tech/introduction-to-fastapi-and-local-dynamo db-595 c 990 ed 0 f 8</a></p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="867b" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">设置访问键</h1><p id="b811" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">在更改数据库配置之前，我们需要一个访问键。</p><p id="38aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，登录您的AWS帐户。单击包含您的AWS帐户名称的右上角。然后选择<em class="le">安全凭证</em>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lf"><img src="../Images/55365ea2380ab981f714034a5717650a.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*6fITlXza2T45bCZR_cYHpg.png"/></div></figure><p id="2393" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，您将被重定向到IAM控制台管理。在AWS IAM凭据选项卡下方，您会看到一个标题为“创建访问密钥”的按钮。单击它，并确保下载包含您的访问密钥id和秘密访问密钥的CSV文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lg"><img src="../Images/66e452a6fe69f0b0080c1e0e813b2e79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDVVUgo7VPag5z6RcKyBQg.png"/></div></div></figure><p id="f79b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您丢失了访问密钥id和秘密访问密钥，您可以停用并删除旧的，然后创建一个新的。</p><p id="b9b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到目前为止，我们已经有了访问密钥。现在，让我们创建一个DynamoDB表。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="542a" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">创建DynamoDB表</h1><p id="04e7" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">对于这个例子，我们将通过选择默认设置来简化事情。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/307cfca1c47143f5fb9a043014bf8100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tdwYKNwzLDDd0bGOhu4CLA.png"/></div></div></figure><p id="dfc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后点击<em class="le">创建表格</em>。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="5b94" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">更新代码</h1><p id="6515" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">在项目的根目录下创建<code class="du li lj lk ll b">.env</code>文件来存储我们的凭证。将这些值更改为前面生成的访问键，并指定在哪个区域创建了DynamoDB表。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="9767" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在<code class="du li lj lk ll b">db.py</code>文件中更改我们的数据库配置。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="084b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第7行和第9行，我们将包含<code class="du li lj lk ll b">.env</code>文件的项目根目录存储为<code class="du li lj lk ll b">base_dir</code>，然后加载它。</p><p id="8c45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们测试我们的应用程序。转到<a class="ae jt" href="http://localhost:5000/docs" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/docs</a>访问我们的API文档。</p><p id="4549" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用文档中的示例创建一个配方，然后获取所有配方。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lo"><img src="../Images/fdaa5b2c9feca4ce7e09fe028626cc64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*L64IprgEzGwVm2IejmkOBQ.png"/></div></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="beb2" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">结论</h1><p id="a5f2" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">在上一篇文章中，我们着重于构建应用程序和使用本地DynamoDB进行开发。在您通过开发过程之后，您想要部署您的应用程序，但是由于某些原因，您应该使用云版本而不是本地版本。AWS DynamoDB的功能将帮助您优化应用程序，减轻管理服务器的负担。</p><p id="65f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在这里获得本文的完整代码<a class="ae jt" href="https://github.com/agusrichard/aws-workbook/tree/master/fastapi-dynamo" rel="noopener ugc nofollow" target="_blank">https://github . com/agusrichard/AWS-workbook/tree/master/fastapi-dynamo</a></p><p id="2956" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读和快乐编码！</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="1006" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">资源</h1><div class="lp lq ez fb lr ls"><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GettingStarted.Python.html" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">Python和DynamoDB开发入门</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">在本教程中，您将使用AWS SDK for Python (Boto3)编写简单的程序来执行以下Amazon…</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">docs.aws.amazon.com</p></div></div></div></a></div></div></div>    
</body>
</html>