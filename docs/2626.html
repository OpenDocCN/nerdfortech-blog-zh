<html>
<head>
<title>Serverless compute on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS上的无服务器计算</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/serverless-compute-on-aws-7d45ee573b54?source=collection_archive---------23-----------------------#2021-05-13">https://medium.com/nerd-for-tech/serverless-compute-on-aws-7d45ee573b54?source=collection_archive---------23-----------------------#2021-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ad476328acfa8eda445f56cbc1beb033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8IePtWymWQPk5w7v.png"/></div></div></figure><p id="9dfa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">AWS Lambda是Amazon Web Services的一项计算服务，它允许您在不提供或管理服务器的情况下运行代码。使用AWS Lambda，您可以运行几乎任何类型的应用程序或后端服务的代码，而不需要管理员。</p><p id="9f26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Aws管理各种管理员服务:</p><ul class=""><li id="4e0f" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">计算设备的配置和容量，提供内存、CPU、网络和其他资源的平衡。</li><li id="4f8e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">服务器和操作系统维护</li><li id="d5de" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">高可用性和自动扩展</li><li id="f438" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">监控车队健康状况</li><li id="f071" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">应用安全补丁</li><li id="feaa" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">部署您的代码</li><li id="359b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">监控和记录你的lambda函数</li><li id="2995" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">AWS Lambda在高可用性计算基础设施上运行您的代码</li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/1892cd313bd5297f15f2c89ce205f11a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y6t3mRFCjabXHl5A.png"/></div></div></figure><p id="e2de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">AWS Lambda在高可用性计算基础设施上运行我们的代码。它仅在需要时执行代码，并根据应用程序的负载自动扩展。我们只支付计算时间，所以没有额外的费用。此外，先决条件是，我们必须上传我们的lambda函数形式的代码到AWS lambda。Lambda支持c#、Ruby、python、Go、Python、java、node js等多种语言。</p><p id="2ece" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基于AWS lambda的应用程序的生命周期包括创作代码、将代码部署到AWS lambda以及监控和故障排除。在这种情况下，我们不能登录实例或定制操作系统或语言运行时。如果我们想管理自己的实例，我们可以使用EC2实例或Elastic beanstalk来代替lambda。</p><p id="237b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"># # lambda如何工作？？？</p><p id="07e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，将代码上传到一个或多个Lambda函数中。</p><p id="23e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二，lambda会为我们自己执行代码。</p><p id="8351" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第三，当代码被调用时，lambda负责提供和管理所有类型服务。</p><p id="52b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"># # lambda = &gt;中的重要术语</p><p id="6c0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1.函数:函数是一种资源，您可以运行它来调用AWS lambda中的代码。函数包含处理事件的代码，以及在lambda和函数代码之间传递请求和响应的运行时环境。</p><p id="d9b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.运行时:它允许函数在相同的基础环境下用不同的语言运行。运行时充当lambda服务和功能代码之间的中介，在两者之间传递调用事件、联系信息和响应。</p><p id="81c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.EVENT:这是一个JSON格式的文档，包含函数要处理的数据。</p><p id="9c2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.事件源/触发器:诸如Amazon SNS之类的服务，或者触发您的功能并执行逻辑的定制服务。</p><p id="09ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.下游资源:一个AWS服务，比如dynamo DB table或S3 buckets，你的lambda函数调用一旦被触发。</p><p id="664d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6.并发性:在给定时间内，函数服务的请求数。</p><p id="6534" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"># # Lambda什么时候触发？</p><p id="6c8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用AWS Lambda运行您的代码来响应:-</p><ol class=""><li id="1c60" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn kh ju jv jw bi translated">事件，如亚马逊S3桶或亚马逊DynamoDB表中的数据变化。</li><li id="869d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn kh ju jv jw bi translated">使用Amazon API gateway运行您的代码来响应HTTP请求。</li><li id="4e82" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn kh ju jv jw bi translated">有了这些功能，我们可以使用lambda轻松构建数据处理触发器</li></ol><p id="989f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">## AWS lambda功能配置</p><p id="1b60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">lambda函数由代码和任何相关的依赖项组成。</p><p id="a008" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，lambda函数还有与之相关的配置信息。</p><p id="1a0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最初，我们可以在创建lambda函数时定义配置信息。</p><p id="44a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Lambda函数为我们提供了一个API来更新一些配置数据。</p><p id="5f86" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"># #λ功能配置信息包括以下关键元素:</p><p id="9f8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你需要的计算资源——我们只能指定我们想要为lambda函数分配的内存(RAM)量。</p><p id="57e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">AWS lambda通过使用与通用Amazon EC2实例类型(如M#类型)相同的比率来分配与内存成比例的CPU功率。</p><p id="60c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以更新配置，并以64 MB的增量请求从128 MB到3008 MB的额外内存。</p><p id="3ccb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大于1536Mb的函数被分配了多个线程。</p><p id="bf18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">##最大执行时间</p><p id="47ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您需要为用于运行lambda函数的AWS资源付费。为了防止lambda函数无限期运行，我们指定了一个超时时间。当到达指定的超时时间时，AWS lambda终止lambda函数。默认值为3秒，最大值为900秒[15分钟]。</p><p id="54dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">IAM Role = &gt;这是AWS lambda在代表我们执行lambda函数时承担的角色。</p><p id="9cb0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"># # AWS lambda函数访问的服务:</p><ul class=""><li id="2fb1" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">AWS服务或非AWS服务</li><li id="a511" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">在AWS VPC中的EC2实例上运行的AWS服务。</li><li id="2b3c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">默认情况下，AWS Lambda在VPC中安全地运行我们的代码。</li><li id="7b76" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">但是，要使Lambda函数能够访问VPC内部的资源，您必须提供额外的特定于VPC的配置信息，包括VPC子网ID和安全组ID。</li></ul><p id="c41f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">##调用lambda函数的不同方式。</p><ol class=""><li id="dd3f" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn kh ju jv jw bi translated">同步调用(推送)</li></ol><p id="d850" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它们是调用Lambda函数最直接的方式。在这个模型中，当您执行invoke API调用时，您的函数会立即执行。</p><p id="05a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">调用标志指定“请求响应”的值。我们等待函数处理事件</p><p id="d173" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">并返回响应。</p><p id="8329" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.异步调用(事件)</p><p id="538a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，Lambda将事件放在一个队列中，并返回一个成功的响应，没有附加信息。</p><p id="c644" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Lambda将事件排队等待处理，并立即返回响应。我们可以配置lambda向另一个服务发送调用记录，比如SQS、SNS、Lambda和事件桥。</p><p id="7617" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.基于轮询的调用(基于拉取):</p><p id="49b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">调用模型旨在允许您集成AWS流和基于队列的服务，无需代码或服务器管理，lambda将代表我们轮询以下服务，检索记录并调用您的函数。支持的服务有亚马逊Kinesis，SQS，DynamoDB流。</p></div></div>    
</body>
</html>