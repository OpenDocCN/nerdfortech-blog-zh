<html>
<head>
<title>Switching GitHub accounts in your terminal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在您的终端中切换 GitHub 帐户</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/workflow-for-switching-github-accounts-in-your-terminal-d87e50bb5511?source=collection_archive---------0-----------------------#2021-04-24">https://medium.com/nerd-for-tech/workflow-for-switching-github-accounts-in-your-terminal-d87e50bb5511?source=collection_archive---------0-----------------------#2021-04-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5261" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">更新了针对拥有 2FA 和个人访问令牌的帐户的说明</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/c06c1645c9d925775fd8bd1daff153b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SGsmXrHkepJD0xm-kfoGCA.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><a class="ae ju" href="https://unsplash.com/@yungnoma?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">张侨勇</a>在<a class="ae ju" href="https://unsplash.com/s/photos/switches?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="27c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，你有多个 GitHub 账户。一个用于个人回复，至少一个用于工作回复。无论是为了个人还是为了工作，改变项目经常发生，你只是想在签署提交和推送之前，有一个快速的单一参考来检查和改变什么。此外，您希望它适用于具有双因素身份认证(2FA)和个人访问令牌的帐户。那么，这篇文章应该提供纲要。</p><p id="e51a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我很确定有很多文章和论坛提到了你需要的改变，但是我只是想把它们放在一个参考文献中。当我切换账户时，有时会发生错误的提交，所以我希望这能防止你犯和我一样的错误。我只是想快速检查和改变，这也很酷使用 2FA 和代币。</p><p id="f13a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顺便说一句，我并不建议为不同的项目或组织使用多个 GitHub 帐户。在最后一部分会有更多的介绍。</p><h1 id="27ab" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">检查</h1><p id="f7fb" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">通常，我想检查我当前的配置，看看我是否启用了签名提交，我当前的用户名和电子邮件:</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="221d" class="ld jw hi kz b fi le lf l lg lh">git config --list</span></pre><p id="5ef0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我使用 GPG 签名，我也会检查我拥有的可用 GPG 列表。</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="de6c" class="ld jw hi kz b fi le lf l lg lh">gpg --list-secret-keys --keyid-format LONG</span></pre><p id="0e17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这也是识别即将过期密钥的简便方法。下面是一个输出示例:</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="a57e" class="ld jw hi kz b fi le lf l lg lh">sec   rsa2048/your_hash_sec_short_a 2020-01-01 [SC]<br/>      [expires: 2022-01-01]<br/>      your_hash_sec_long_a<br/>uid   [ultimate] Your Name &lt;your.name@work.com&gt;<br/>ssb   rsa2048/your_hash_ssb_a 2020-01-01 [E]<br/>      [expires: 2022-01-01]</span><span id="fe88" class="ld jw hi kz b fi li lf l lg lh">sec   rsa4096/your_hash_sec_short_b 2020-01-01 [SC]<br/>      hash_sec_long_b<br/>uid   [ultimate] Your Name (main) &lt;your.name@personal.com&gt;<br/>ssb   rsa4096/hash-ssb-b  2020-01-01 [E]</span></pre><h1 id="1448" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">变化</h1><p id="249a" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">我对我的账户使用相同的名字，所以不需要改变<code class="du lj lk ll kz b">user.name</code>，但是我需要改变以下签名的提交:</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="aae6" class="ld jw hi kz b fi le lf l lg lh">git config credential.username "your_username"<br/>git config user.email "your_email"<br/>git config user.signingkey your_ssb_hash</span></pre><p id="e577" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想为所有回购更改它们，只需添加<code class="du lj lk ll kz b">--global</code>。下面加了，方便复制粘贴。</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="6d9b" class="ld jw hi kz b fi le lf l lg lh">git config --global credential.username "your_username"<br/>git config --global user.email "your_email"<br/>git config --global user.signingkey your_ssb_hash</span></pre><h1 id="c406" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">使用 2FA 和个人访问令牌的示例</h1><p id="a9ea" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">假设您当前在终端中设置了 GitHub 工作帐户，您想要创建一个新的回购，并首先使用您的启用了 2FA 的个人 GitHub 帐户提交。只要遵循<code class="du lj lk ll kz b">Checks</code>部分提到的改变，在那之后，你应该能够像这样提交:</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="1491" class="ld jw hi kz b fi le lf l lg lh">echo "# your_new_repo" &gt;&gt; README.md<br/>git init<br/>git add README.md<br/>git commit -m "first commit"</span></pre><p id="b87b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正确设置了您的签名提交，当您输入密码时，您应该会看到正确的电子邮件和秘密子密钥。</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="f6b6" class="ld jw hi kz b fi le lf l lg lh">┌────────────────────────────────────────────────────────────────┐<br/>│ Please enter the passphrase to unlock the OpenPGP secret key:  │<br/>│ "William Infante (main) &lt;your_email&gt;"                          │<br/>│ 4096-bit RSA key, ID your_ssb_hash,                            │<br/>│ created 2020-01-01.                                            │<br/>│                                                                │<br/>│                                                                │<br/>│ Passphrase: __________________________________________________ │<br/>│                                                                │<br/>│         &lt;OK&gt;                                    &lt;Cancel&gt;       │<br/>└────────────────────────────────────────────────────────────────┘</span></pre><p id="4809" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另外，基于使用 gnupg2 和 gpg-agent 2.x 时的<a class="ae ju" href="https://stackoverflow.com/questions/39494631/gpg-failed-to-sign-the-data-fatal-failed-to-write-commit-object-git-2-10-0" rel="noopener ugc nofollow" target="_blank"> stackoverflow post </a>，我们需要设置环境变量<code class="du lj lk ll kz b">GPG_TTY</code>。我通常把它放在我的 bash rc 或 zsh rc 中。</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="397f" class="ld jw hi kz b fi le lf l lg lh">export GPG_TTY=$(tty)</span></pre><p id="7238" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，继续，你就可以走了。</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="2ff9" class="ld jw hi kz b fi le lf l lg lh">git branch -M main<br/>git remote add origin https://github.com/&lt;user&gt;/&lt;your_new_repo&gt;.git<br/>git push -u origin main</span></pre><p id="e854" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">哦，当他们问你的密码，这不是你的 GitHub 密码。我总是犯这个错误，你会得到以下提示:</p><pre class="jf jg jh ji fd ky kz la lb aw lc bi"><span id="169a" class="ld jw hi kz b fi le lf l lg lh">Password for 'https://your_username@github.com':<br/>remote: Invalid username or password.</span></pre><p id="9b5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果启用了 2FA，您将需要提供您的个人访问令牌。有时，我会忘记将个人访问令牌放在哪里。在这种情况下，只需生成一个新的，如:</p><div class="lm ln ez fb lo lp"><a href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hj fi z dy lu ea eb lv ed ef hh bi translated">创建个人访问令牌</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">您应该通过命令行或 API 创建一个个人访问令牌来代替密码。个人…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">docs.github.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md jo lp"/></div></div></a></div><p id="b6a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，要求个人访问令牌，这一过程让我可以更详细地了解我的终端中允许的设置。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es me"><img src="../Images/e5fe5d261f1889dd0ce99febee09ea67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r9kuD6b5ZmzUx-tceMCNgA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">生成 GitHub 个人访问令牌时的范围</figcaption></figure><h1 id="c48e" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">维护多个 GitHub 帐户</h1><p id="2355" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">最初，我为个人账户和工作账户创建了不同的账户。当时我确实想把我个人的项目和别人划清界限。但是如果你今天问我，如果我被要求为一个新的 github 组织提供一个 GitHub 帐户，我可能会为我的个人和工作帐户使用同一个帐户。</p><p id="c15b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，GitHub 建议我们只使用一个帐户来存放个人和工作资料。</p><div class="lm ln ez fb lo lp"><a href="https://docs.github.com/en/github/setting-up-and-managing-your-github-user-account/merging-multiple-user-accounts" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hj fi z dy lu ea eb lv ed ef hh bi translated">合并多个用户帐户</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">如果您有单独的工作帐户和个人帐户，可以合并这些帐户。提示:我们建议只使用一个…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">docs.github.com</p></div></div></div></a></div><p id="2866" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的链接甚至提供了合并多个用户账户的方法，但是如果你和我一样，我更愿意保留我在 GitHub 组织中使用的用户名。但接下来，我将只为新组织使用一个帐户。这意味着在可预见的未来，我可能会使用这个切换 github 帐户的工作流程。</p><p id="c675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总的来说，我只是想在切换我的 GitHub 账户时有一个快速的参考，并且仍然正确地显示签名的提交。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mf"><img src="../Images/14af22d35eda72ab457a7a66da1251d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H7dM1msv_e76arJ2xTiuGg.png"/></div></div></figure></div></div>    
</body>
</html>