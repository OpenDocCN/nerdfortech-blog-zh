<html>
<head>
<title>Difference between for loops and forEach in JavaScript: when needed to stop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中for循环和forEach的区别:何时需要停止</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/difference-between-for-loops-and-foreach-in-javascript-when-needed-to-stop-695f833a3b30?source=collection_archive---------12-----------------------#2021-04-17">https://medium.com/nerd-for-tech/difference-between-for-loops-and-foreach-in-javascript-when-needed-to-stop-695f833a3b30?source=collection_archive---------12-----------------------#2021-04-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1c9ddf2787c9e743e9ef5242556f187b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nIylvTrk6rD76P1-"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">什么时候停止？</figcaption></figure><p id="bc02" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">重复做某事是编程中最重要的技能之一。所有的编程语言都有自己的方式。在这篇文章中，我想具体讨论一下在JavaScript中当我们需要<strong class="iw hj"> </strong>时<strong class="iw hj">停止这个重复的过程</strong>。我们将看到<strong class="iw hj"> <em class="js"> for loops </em> </strong>和<strong class="iw hj"> <em class="js"> forEach </em> </strong>的区别。</p><p id="60d5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了比较这两组，我们将有4个数组有值，一些为真，另一些为假。我们的目标是找出一个数组是否包含所有真值元素。他们来了！</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">你能说出哪些是假values~^^吗？</figcaption></figure><h1 id="fd28" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">对于循环</h1><p id="034b" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">JavaScript中有3种for循环。虽然<code class="du lc ld le lf b">for...in</code>可以用于数组(让我们记住<em class="js">数组</em>在JavaScript中是<em class="js">对象</em>)，但这里不会处理，因为它通常是用于对象的。</p><p id="7712" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">所以，第一站是<code class="du lc ld le lf b"><strong class="iw hj">for</strong></code> <strong class="iw hj"> <em class="js"> </em> </strong>语句:</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用for语句</figcaption></figure><p id="83e5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你大概知道如何使用<code class="du lc ld le lf b"><strong class="iw hj">for</strong></code> <strong class="iw hj"> </strong>语句。如果没有，请参见<a class="ae lg" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Loops_and_iteration#for_statement" rel="noopener ugc nofollow" target="_blank">本文档</a>或<a class="ae lg" href="https://www.w3schools.com/js/js_loop_for.asp" rel="noopener ugc nofollow" target="_blank">本示例</a>。我的观点是，如果你想停止你的循环，你使用<code class="du lc ld le lf b">return</code>关键字。它会打破循环，你就出局了！</p><p id="852d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在上面的例子中，当参数数组(<code class="du lc ld le lf b">arr</code>)的一个元素是falsy时，<code class="du lc ld le lf b">if</code>语句将被触发，<code class="du lc ld le lf b">return</code>关键字将带您从<code class="du lc ld le lf b">for</code>循环中退出<code class="du lc ld le lf b">false</code>。而且，因为有了那行<code class="du lc ld le lf b">return</code>，整个<code class="du lc ld le lf b">isAlltrueByForStatement</code>函数将以返回值<code class="du lc ld le lf b">false</code>结束，这是当你有一个falsy值时，一个数组是否有所有true元素的正确答案。如果没有falsy值，那么第7行的<code class="du lc ld le lf b">return</code>值将交给您<code class="du lc ld le lf b">true</code>。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">用于…的</figcaption></figure><p id="7b30" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如你在上面看到的，<code class="du lc ld le lf b"><strong class="iw hj">for...of</strong></code>会产生同样的结果(如果你不熟悉<code class="du lc ld le lf b"><strong class="iw hj">for...of</strong></code>请参考这个链接)。总之，对于<code class="du lc ld le lf b">for</code>循环，你可以用一些关键字来停止它，比如<code class="du lc ld le lf b">return</code>(当你的循环在一个函数中)或者<code class="du lc ld le lf b">break</code>(参见<a class="ae lg" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Loops_and_iteration#break_statement" rel="noopener ugc nofollow" target="_blank">文档</a>和<a class="ae lg" href="https://www.w3schools.com/js/js_break.asp" rel="noopener ugc nofollow" target="_blank">示例</a>。)</p><h1 id="60ce" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">为每一个</h1><p id="e79b" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated"><code class="du lc ld le lf b">forEach</code>怎么样？了解这个功能的人通常认为这和<code class="du lc ld le lf b">for...of</code>差不多。是吗？</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">它们是一样的吗？</figcaption></figure><p id="a62d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">代码示例似乎表明它们是相同的。但是这个呢？</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">forEach只适用于数组！！！</figcaption></figure><p id="dfb1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><code class="du lc ld le lf b">forEach</code>在这种情况下抛出一个错误，而<code class="du lc ld le lf b">for...of</code>如预期的那样正常工作。为什么？因为<code class="du lc ld le lf b">forEach</code>只适用于数组，而不适用于字符串，而<code class="du lc ld le lf b">for...of </code>处理两者都没有问题。</p><p id="abd5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><code class="du lc ld le lf b">forEach</code>是一个真正进入数组的函数。就停止迭代而言，我的意思是，当对一个数组调用<code class="du lc ld le lf b"><strong class="iw hj"><em class="js">forEach</em></strong></code><strong class="iw hj"><em class="js"/></strong><strong class="iw hj"><em class="js">时，它将永远不会停止迭代，直到它对每个元素</em> </strong>执行完一次。所以，猜猜当下面的代码被执行时会发生什么！</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">真相时刻~</figcaption></figure><p id="eef5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你猜第10行是<code class="du lc ld le lf b">true</code>，第11行是<code class="du lc ld le lf b">false</code>，第12行是<code class="du lc ld le lf b">false</code>，第13行是<code class="du lc ld le lf b">false</code>，很抱歉你猜错了……为什么？正如我上面提到的，那是因为<code class="du lc ld le lf b">forEach</code>在为一个数组工作时从不停止！！！即使它在第4行遇到关键字<code class="du lc ld le lf b">return</code>和<code class="du lc ld le lf b">false</code>，它也不会停止！它迭代到最后，在第7行返回最终返回值，一直是<code class="du lc ld le lf b">true</code>。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/2ad90a556cc713ef2059f1caab6928de.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*hI3Vi8tn7MT9RRbabqqejg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">不开心…</figcaption></figure><p id="a4d0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当我们从一个数组中找到一个假值时，我们停止并返回<code class="du lc ld le lf b">false</code>的任务失败了，用<code class="du lc ld le lf b">forEach</code> …但是不要浪费我们的失败，记住<code class="du lc ld le lf b">forEach</code>不会在一个数组中停止！</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><p id="2de4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">总之，<em class="js">如果你想停止JavaScript中的迭代，</em> <strong class="iw hj"> <em class="js">不要使用</em> </strong> <code class="du lc ld le lf b"><strong class="iw hj"><em class="js">forEach</em></strong></code>，因为它不会在你需要的时候如你所愿的停止！这里引用一段来自<a class="ae lg" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" rel="noopener ugc nofollow" target="_blank"> MDN Web Docs </a>的话:</p><blockquote class="lp lq lr"><p id="a805" class="iu iv js iw b ix iy iz ja jb jc jd je ls jg jh ji lt jk jl jm lu jo jp jq jr hb bi translated">除了抛出异常之外，没有其他方法可以停止或中断<code class="du lc ld le lf b">forEach()</code>循环。如果您需要这样的行为，那么<code class="du lc ld le lf b">forEach()</code>方法是错误的工具。</p></blockquote></div></div>    
</body>
</html>