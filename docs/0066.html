<html>
<head>
<title>The Debian Series: Boot, Init sequence and chkconfig</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Debian 系列:引导、初始化序列和 chkconfig</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/the-debian-series-boot-init-sequence-and-chkconfig-56ee331debb?source=collection_archive---------8-----------------------#2019-11-06">https://medium.com/nerd-for-tech/the-debian-series-boot-init-sequence-and-chkconfig-56ee331debb?source=collection_archive---------8-----------------------#2019-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2431" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个故事将深入到 Debian 引导序列，以及一旦你的设备启动后会发生什么。这不是一个容易理解的概念，而且有很多事情同时发生。我不得不忽略一些以前的概念，因为我们正在关注某些任务和组件。有很多材料和更好的解释，但我会尝试用简短的讲座来总结整个过程，以便更好地理解。</p><p id="5ee1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从称为<strong class="ih hj"> BIOS 的关键组件开始，</strong>我们可以将这个元素概念化为我们计算机主板的操作系统，长话短说，这是一个特殊的芯片，它可以识别和定位必要的硬件设备，以将操作系统启动到 RAM 内存中。</p><p id="2d56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个<strong class="ih hj"> BIOS </strong>芯片将评估并检查硬件环境是否可以继续。如果一切正常，<strong class="ih hj"> BIOS </strong>会将系统控制权委托给<strong class="ih hj"> MBR </strong>或<strong class="ih hj">主引导记录。</strong>MBR 是指硬盘的<strong class="ih hj">引导扇区，是存储扇区的前 512 个字节。</strong></p><p id="cd1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> MBR </strong>代表了启动过程中几乎所有事情的关键组件。基本上确定了引导操作系统要做什么，有时可能是指用<strong class="ih hj"> GRUB </strong>引导进程(其他程序适用于不同的操作系统)，或者存储分区表(稍后会谈到)甚至是确定一个单独的存储驱动器。</p><p id="e167" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，<strong class="ih hj"> GRUB </strong>是一个让我们选择从安装在<strong class="ih hj">硬盘上的操作系统启动的程序。GRUB </strong>以其可能的基本方式加载到<strong class="ih hj"> MBR </strong>上，它也驻留在存储磁盘上，因为一旦用户决定使用哪个操作系统，它也会启动<strong class="ih hj">操作系统进程</strong>。</p><p id="cf00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在这里暂停一会儿，让我们回顾一下到目前为止我们所拥有的细节。</p><p id="36f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们说过<strong class="ih hj"> BIOS </strong>检查硬件设备。然后，<strong class="ih hj"> GRUB </strong>在<strong class="ih hj"> MBR </strong>上加载其执行的<strong class="ih hj">第一阶段</strong>并读取<strong class="ih hj"> BIOS 上的内容，</strong>此时，<strong class="ih hj"> GRUB </strong>以其最基本的可能方式加载，之后，<strong class="ih hj">第二阶段</strong>(在<strong class="ih hj"> HDD </strong>上)加载剩余的<strong class="ih hj"> GRUB </strong>程序，并显示可能安装的 OS 在用户选择要引导的操作系统后，操作系统将会加载，GRUB 将执行控制权交给<strong class="ih hj">操作系统</strong>本身。</p><p id="7299" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们掌握了操作系统，为了使用我们的硬件和做我们想做的任何事情，大多数服务必须启动。对吗？</p><p id="eb77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来谈谈 Linux 服务的<strong class="ih hj"> INIT </strong>进程和<strong class="ih hj"> runlevels </strong>层次结构。</p><p id="ee59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> INIT </strong>(或初始化)是内核加载后执行的一系列进程，这个进程是一个守护进程，一直运行到系统关闭。你可以认为它是所有过程之父。</p><p id="2326" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">严格来说，我们有一个叫做<strong class="ih hj">运行级别</strong>的概念，它基本上代表了根据在机器的特定时刻出现的用户类型而停止或启动的服务数量。</p><h2 id="9112" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">Debian 运行级别</h2><p id="5cd7" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在 Debian 7 机器上，<strong class="ih hj">运行级</strong>程序位于<code class="du kd ke kf kg b">/etc</code>目录下，具体来说是在<code class="du kd ke kf kg b">rc0.d</code>到<code class="du kd ke kf kg b">rc6.d</code>文件夹之间。你可能会想为什么是 0，为什么是 6，对吗？我一会儿就讲。</p><p id="b29e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在每个文件夹中，您会发现<code class="du kd ke kf kg b">S</code> x 个文件(大部分按顺序排列),它们包含在每个<strong class="ih hj">运行级别</strong>上运行的流程逻辑。是以一个<code class="du kd ke kf kg b">K</code>开头的文件是一个杀的过程。</p><h2 id="f21b" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">运行级别</h2><p id="411f" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">现在，我们有多个<strong class="ih hj">运行级别</strong>，每个级别代表当达到某个级别时操作系统(基于 Unix)的类型或操作模式，这里有更多信息<a class="ae kh" href="https://www.liquidweb.com/kb/linux-runlevels-explained/" rel="noopener ugc nofollow" target="_blank"/>，但概括来说，我们有:</p><p id="02ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kd ke kf kg b">0 — Halt</code>:基本停止操作系统。</p><p id="2925" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kd ke kf kg b">1 — Single</code>(或单用户)，启动时没有任何服务，是准备或停止操作系统的简单运行</p><p id="11cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kd ke kf kg b">2 to the 5</code>:多用户级别，在这一步你可以使用没有任何 GUI 的 OS，可以用于自定义目的，</p><p id="91be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kd ke kf kg b">6 — Reboot</code>:它所说的，只是重启服务器。</p><p id="dc28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我需要澄清一些事情，在<code class="du kd ke kf kg b">multi-user</code>级别，每个内部步骤做不同的事情，<code class="du kd ke kf kg b">3rd</code>步骤是系统正常启动的地方，通过<code class="du kd ke kf kg b">4th</code>步骤，我们拥有了网络接口的能力。在<code class="du kd ke kf kg b">2nd</code>上，我们几乎没有网络功能，而在<code class="du kd ke kf kg b">5th</code>上，我们启用了 GUI。</p><p id="1843" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，在很短的时间内有很多事情在进行。这将给我们一个提示，告诉我们自从机器或笔记本电脑启动以来发生了什么。</p><p id="9332" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一个名为<code class="du kd ke kf kg b">chkconfig</code>的工具，主要帮助启用或禁用系统或服务，基本上，这个实用工具帮助我们<strong class="ih hj">启动/停止</strong>服务，以便优化秒或性能，这主要取决于你的目标是什么</p><h2 id="34b2" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">怎么用？</h2><p id="d957" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">简单，举个例子。</p><p id="53a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kd ke kf kg b">chkconfig -l</code>,<code class="du kd ke kf kg b">-l</code>标志列出了带有附加<strong class="ih hj">运行级别</strong>的程序。</p><p id="e2b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关闭一个服务怎么样？好吧，看看这个。</p><p id="e2cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kd ke kf kg b">chkconfig vsftpd off</code></p><p id="47b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">很简单吧？</strong></p><p id="4c2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天到此为止。到处都有更多的相关信息，我试图让每个人都容易理解。请随意投稿。</p><p id="bd84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一个故事中，我将讨论磁盘分区和配置。</p><p id="1c51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码:)</p></div></div>    
</body>
</html>