<html>
<head>
<title>Pushing Objects in Unity to Complete Puzzles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">推动物体完成拼图</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/pushing-objects-in-unity-to-complete-puzzles-a1972b0716e?source=collection_archive---------23-----------------------#2021-07-02">https://medium.com/nerd-for-tech/pushing-objects-in-unity-to-complete-puzzles-a1972b0716e?source=collection_archive---------23-----------------------#2021-07-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/8b108e545e44d2e5f37502402cf5aab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/1*6-euXhA4lkYiDmk_TJqIlw.gif"/></div></figure><p id="799f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">另一种流行的解谜机制是将物体推到压力垫上或更高的壁架上。再次，角色控制器来拯救我们，Unity 在控制器碰撞器上的页面为我们提供了答案！</p><p id="26e9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们感兴趣的相关代码是:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="71ca" class="ju jv hi jq b fi jw jx l jy jz">void OnControllerColliderHit(<a class="ae jk" href="https://docs.unity3d.com/ScriptReference/ControllerColliderHit.html" rel="noopener ugc nofollow" target="_blank">ControllerColliderHit</a> hit)<br/>    {<br/>        <a class="ae jk" href="https://docs.unity3d.com/ScriptReference/Rigidbody.html" rel="noopener ugc nofollow" target="_blank">Rigidbody</a> body = hit.collider.attachedRigidbody;</span><span id="34fd" class="ju jv hi jq b fi ka jx l jy jz">        // Calculate push direction from move direction,<br/>        // we only push objects to the sides never up and down<br/>        <a class="ae jk" href="https://docs.unity3d.com/ScriptReference/Vector3.html" rel="noopener ugc nofollow" target="_blank">Vector3</a> pushDir = new <a class="ae jk" href="https://docs.unity3d.com/ScriptReference/Vector3.html" rel="noopener ugc nofollow" target="_blank">Vector3</a>(hit.moveDirection.x, 0, hit.moveDirection.z);</span><span id="8457" class="ju jv hi jq b fi ka jx l jy jz">        // If you know how fast your character is trying to move,<br/>        // then you can also multiply the push velocity by that.<br/><br/>        // Apply the push<br/>        body.velocity = pushDir * pushPower;</span></pre><p id="c2e6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Unity 基本上为我们写了代码！感谢团结！让我们准备好箱子，将它标记为“移动箱子”。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kb"><img src="../Images/ffab8da5826787935b6de9354a8ac83b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6IJhQZF_jHiIFlYkdOV8hQ.gif"/></div></div></figure><p id="f20c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">接下来，为了遵守 Unitys 的代码，我们需要一个变量来表示 pushing power，所以让我们创建一个全局变量。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kg"><img src="../Images/f6d6efe6871c2a493d927e77a37ba2af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ig01BRZuGjaPXbaKm0_2Hg.png"/></div></div></figure><p id="303c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，在我们的 OnControllerColliderHit 函数中，我们将检查该框:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kh"><img src="../Images/e74f2e354414ab98251516402d20e0c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R0FdxdVLOfAXrBbB4xyqjw.png"/></div></div></figure><p id="fd6d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们将开始传输我们的代码。我们将检查刚体:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kh"><img src="../Images/644e94206fa8f535edc8b15ceeb485ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wrVNpDpYf8iFvAF9yCbuXA.png"/></div></div></figure><p id="a302" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将转移剩余的代码，但把它放在一个空检查中。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es ki"><img src="../Images/0123cb30c3232c340affb1a07488e5ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TU9557YKLEIZ5sMmQo-NXg.png"/></div></div></figure><p id="d844" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请注意，我们只使用了 moveDirection.x。我们只关心水平移动，因此这是与原始示例相比我们将使用的唯一轴。其他都一模一样！</p><p id="152b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们看看它的实际效果！</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/ef6c0d666e69fa7e38a94e14a9bd9645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/1*Ysq0JEb6lZfmptv3ouXVfQ.gif"/></div></figure><p id="f352" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">它工作，但是哎呀…我们不希望盒子滚动！这很容易通过勾掉盒子刚体的旋转约束来解决。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kb"><img src="../Images/37452e466a57023347408ae88f2cb131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xpeHf5FPi94JBBhQu5_Z4g.gif"/></div></div></figure><p id="acd4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们再试一次！</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/b135f6d0dc45e2fa892ca7308debf0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/1*2D9PpX1cRGfAEyyxTBldBw.gif"/></div></figure><p id="e7f6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">完美！明天我们来处理压力垫！</p></div></div>    
</body>
</html>