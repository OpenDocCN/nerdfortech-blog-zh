# Debian 系列:交换内存

> 原文：<https://medium.com/nerd-for-tech/the-debian-series-swap-memory-78d1bee9ab9d?source=collection_archive---------4----------------------->

继续我们关于`fdisk`命令的工作，以及之前对 Debian 7 实例上的磁盘分区表管理的简单解释，现在是时候介绍一个重要的概念了，比如交换内存。

老实说，有大量关于交换内存的参考资料，暂停讲座来定义什么是交换内存有点乏味。用 TLDR 的术语来说，交换是分配在磁盘上的内存，当您的计算机由于缺少物理内存而运行缓慢时就会用到它。

**交换内存**很重要，自从在计算机上首次安装操作系统以来，它就一直存在。必须谨慎设置该值，因为它可能会由于**过量交换**或**颠簸**而导致整体性能下降，这是系统无法找到足够空闲内存时使用的术语。

我将向您介绍一些新的命令，但是整个体验与磁盘分区的生成或者在`fstab file`上手动分配几乎是一样的

前面的设置完成后，我们将插入另一个 10G 存储容量的驱动器(USB 闪存),以在其上设置**交换内存**。

有两个新的实用工具可以用于检查内存统计数据，一个是显示系统内存量和内存使用情况的`free`命令，另一个是可以让您启用或禁用设备以便为**交换分区**获得更多空间的`swapon / swapoff`命令。

`free`有两种表示方式，`-mh`(兆字节)和`-kh`(千字节)，当然，更多信息请查看`man free`

`swapon / swapoff`命令使用`-s`标志来选择一个特定的设备，类似于:`swapon -s /dev/sdb3`

在本次研讨会的最后，我们将有一个带有两个分区的磁盘，其中一个将用于使用`fdisk -l`的交换内存

**记住** : `fdisk -l`显示硬盘及其分区。

那我们走吧。

通过**根用户会话**，我们验证了`fdisk -l`的内容，我们已经配置了`/etc/sda`和`/dev/sdb`，现在让我们将提到的 USB 闪存配置为`/etc/sdc`

使用向导我们添加两个分区，设置分区顺序**和最后一个扇区**。一般来说，**的交换量**应该是硬盘物理容量的 2.5 倍，或者是 **RAM 内存的 2 倍**

通过打印分区表(向导上的`p`)进行仔细检查，如果一切正常，使用`w`写入更改。

之后，您将需要使用分区上的`t`选项来更改 ID，类似这样:`fdisk /dev/sdc1`，使用选定的分区并添加作为**十六进制代码**的值 **82** ，该值引用 **Linux 交换。**

还有另一种方法，令人难以置信的快，是通过使用`mkswap`命令，这将准备一个分区，以便在没有任何进一步的行动交换。

这里有一个例子:

`mkswap /dev/sdc1`

在那之后，你将需要写变更。然后，我们可以将配置添加到`fstab`，我们添加已创建分区的 UUID。

如果您不记得，您只需执行以下操作:`nano /etc/fstab`和

我们启用基于**交换分配**和`swapon -a`的更改(命令直接从 `/etc/fstab`读取)。我们可以在使用`free -mh`命令后验证它。

仅此而已。

如果有什么不对的地方，请随意投稿或指正。

在这个系列的下一个故事中，我将谈论 LVM。

快乐编码:)