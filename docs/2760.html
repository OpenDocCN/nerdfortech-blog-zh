<html>
<head>
<title>How imports work in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">导入在React中如何工作</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-imports-work-in-react-121e3741fb70?source=collection_archive---------1-----------------------#2021-05-19">https://medium.com/nerd-for-tech/how-imports-work-in-react-121e3741fb70?source=collection_archive---------1-----------------------#2021-05-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="8057" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我对Javascript/Node中模块系统的理解</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/72bb3baed08c052096d0534dcf73f770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_QdIOneELIPeFW1D_6hEzw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">可重复使用的反应表</figcaption></figure><p id="504f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果不真正理解Node.js模块系统和Javascript对象引用是如何工作的，那么在React和通常的Javascript中导入和导出内容可能会令人困惑。</p><p id="c4d2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这里有一些例子，可能会让人想知道幕后到底发生了什么。</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="6952" class="ko kp hi kk b fi kq kr l ks kt">import React from 'react';<br/>import * as React from 'react';<br/>import React, { useState } from 'react';<br/>import React, { Component } from 'react';</span></pre><p id="6bd5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这花了我一些时间，但我想我终于明白了！好吧，让我们看看这个大脑的内部。我可能会删除一些引用。</p><p id="a640" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">模块</strong></p><p id="245e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">首先，您应该理解模块的概念。在Node中，每个文件都被视为一个独立的模块。你应该阅读Node.js中的模块包装器</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="6514" class="ko kp hi kk b fi kq kr l ks kt">I like to think of a module as an object that represents the file.</span></pre><p id="085b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">和我在一起…</p><p id="2ae2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我可能过于简化了，但是让我们坚持模块是一个最初为空的对象文字<code class="du kv kw kx kk b">{}</code>。</p><p id="9b20" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在我们继续之前，我还想谈谈我认为我理解的两个模块系统:<code class="du kv kw kx kk b">CommonJS</code>和<code class="du kv kw kx kk b">ESModules</code>。</p><p id="1108" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">共性:<code class="du kv kw kx kk b">module.exports</code>向消费者公开，<code class="du kv kw kx kk b">require()</code>向消费者提供。你可能见过周围的<code class="du kv kw kx kk b">exports</code>。<code class="du kv kw kx kk b">exports</code>只是对<code class="du kv kw kx kk b">module.exports</code>的一个引用，输入起来更短(为了方便)。这意味着<code class="du kv kw kx kk b">exports</code>和<code class="du kv kw kx kk b">module.exports</code>指向内存中的同一个对象。</p><p id="61a7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><code class="du kv kw kx kk b">module</code>是对当前模块(一个对象)的引用，它的<code class="du kv kw kx kk b">exports</code>属性(<code class="du kv kw kx kk b">module.exports</code>)定义了模块导出的内容。</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="9ac5" class="ko kp hi kk b fi kq kr l ks kt"><em class="ky">module</em>.<em class="ky">exports</em> = {}</span><span id="9525" class="ko kp hi kk b fi kz kr l ks kt"><em class="ky">exports</em> = <em class="ky">module</em>.<em class="ky">exports</em></span></pre><p id="8581" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">ESModules: <code class="du kv kw kx kk b">export</code>公开，<code class="du kv kw kx kk b">import</code>可用。如果你像我一样，你可能学过ES6/ES2015的React，而ESModules是你可能知道的唯一模块系统。我记得在制作一些配置时遇到了<code class="du kv kw kx kk b">module.exports</code>，这让我非常困惑。</p><p id="0c02" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">CommonJS <code class="du kv kw kx kk b">module.exports</code>其实相当于ES模块<code class="du kv kw kx kk b">export default</code>。</p><p id="8932" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"> React.js </strong></p><p id="d1c9" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果您从未看过React的代码，我建议您看一看——因为这将提高您的信心和对框架的理解。你会惊讶地发现它基本上是Javascript——和你写的一样。</p><p id="5b9a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">你可以检查一下<a class="ae ku" href="https://github.com/facebook/react" rel="noopener ugc nofollow" target="_blank">回购</a>或者从查看你的本地副本开始，试着检查文件。</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="946f" class="ko kp hi kk b fi kq kr l ks kt">node_modules/react/cjs/react.development.js</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es la"><img src="../Images/8c1508c0f4098f7902d8a85917b88258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVapOQ1b-YNPPbx9zt5Dzw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">16.14.0</figcaption></figure><p id="c83e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">您意识到React代码库使用了CommonJS。<code class="du kv kw kx kk b">exports.Children</code>指向<code class="du kv kw kx kk b">module.exports.Children</code>。根据上面关于模块的知识，您可以用几种方式导入React:</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="a741" class="ko kp hi kk b fi kq kr l ks kt">import React from 'react';</span></pre><p id="7f9b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这基本上是获取暴露的对象(<code class="du kv kw kx kk b">module.exports</code>)并将其分配给消费者中一个名为<code class="du kv kw kx kk b">React</code>的变量。就像导入默认导出一样。</p><p id="4dde" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">变量可以是任何其他名称，您仍然可以获得公开的API。</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="2c0b" class="ko kp hi kk b fi kq kr l ks kt">import noStandardName from 'react';</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lb"><img src="../Images/24210cacd030802e6ebb31c6089071b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njSaisJ26nIT-20U38tNZw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">console.log(React)和console.log(noStandardName)</figcaption></figure><p id="095f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">然而，使用任何其他名字都会使程序崩溃，因为<code class="du kv kw kx kk b">'React' must be in scope when using JSX</code>。linter期望API被命名为<code class="du kv kw kx kk b">React</code>，所以它对你尖叫，但是React的所有方法和属性实际上都是可用的。</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="86e1" class="ko kp hi kk b fi kq kr l ks kt">import * as React from 'react';</span></pre><p id="5bb0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这和上面的方法类似。心智模式是它获取由<code class="du kv kw kx kk b">exports.&lt;API&gt;</code>公开的所有内容，将其组合成一个对象，并将该对象赋给一个名为React的变量——或任何其他名称。</p><p id="1b2c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">以上两种方法的结果是，现在所有的API都是React对象上的属性，可以通过<code class="du kv kw kx kk b">React.&lt;API&gt;</code>访问，例如<code class="du kv kw kx kk b">class &lt;ComponentName&gt; extends React.Component {}</code>。</p><p id="0f75" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了方便起见，您可以分别导入不同的API(或者作为一种捷径)——有点像<code class="du kv kw kx kk b">exports</code>对<code class="du kv kw kx kk b">module.exports</code>的场景，如下所示:</p><pre class="iy iz ja jb fd kj kk kl km aw kn bi"><span id="d583" class="ko kp hi kk b fi kq kr l ks kt">import React, { useState } from 'react';<br/>import React, { Component } from 'react';<br/>import React, { useState, Component } from 'react';</span></pre><p id="f130" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这种方法<strong class="jp hj">“析构”</strong>暴露的对象(<code class="du kv kw kx kk b">module.exports</code>)，因此API可以独立调用，例如<code class="du kv kw kx kk b">class &lt;ComponentName&gt; extends Component {}</code>。</p></div></div>    
</body>
</html>