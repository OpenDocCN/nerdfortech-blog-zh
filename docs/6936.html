<html>
<head>
<title>Introduction to Redis cache using NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 NodeJS 的 Redis 缓存简介</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/introduction-to-redis-cache-using-nodejs-af9db495dbfd?source=collection_archive---------2-----------------------#2022-06-19">https://medium.com/nerd-for-tech/introduction-to-redis-cache-using-nodejs-af9db495dbfd?source=collection_archive---------2-----------------------#2022-06-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8f76d038ac66363436f94e77a32fb254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mc34lwWxSPt2rLfyb0m1dg.png"/></div></div></figure><p id="0dc2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大家好，今天我想向大家介绍缓存的基础知识，以及它如何帮助您提高应用程序的性能。</p><p id="15e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你从标题中可以猜到的，我们将使用 Redis 缓存作为 NodeJS 的缓存服务。</p><p id="0e6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们先从缓存的基础开始，但在此之前，让我们先试着了解一下，什么是<strong class="is hj">缓存？</strong></p><p id="3b60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在计算领域，缓存是一个<strong class="is hj">高速</strong>数据存储层(硬件或软件),它存储数据的子集，通常是<strong class="is hj">瞬态</strong>,以便将来对该数据的请求能够比访问数据的主存储位置更快地得到满足。<em class="jo">存储在高速缓存中的数据可能来自早期的计算或存储在其他地方的数据的副本。</em></p><blockquote class="jp jq jr"><p id="f802" class="iq ir jo is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">当请求的数据可以在缓存中找到时，发生缓存命中，而当不能找到时，发生缓存未命中。缓存可以处理的请求越多，系统执行的速度就越快<strong class="is hj">。</strong></p></blockquote><p id="0b27" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">既然您已经理解了高速缓存的概念，那么您将更容易理解什么是高速缓存——答案很简单<strong class="is hj">高速缓存</strong> <strong class="is hj">是将数据存储到高速缓存</strong>中的过程。</p><p id="ae26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">现在我们来谈谈 Redis:- </strong></p><p id="9831" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从官方文档来看(<a class="ae jv" href="http://redis.io" rel="noopener ugc nofollow" target="_blank"> redis.io </a>)，redis 是一个开源的、<strong class="is hj">内存数据存储</strong>。</p><p id="8b66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它可以用作数据库、缓存、流引擎和消息代理。</p><p id="0708" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">现在您已经了解了什么是缓存和 Redis，让我们构建一个使用 Redis 实现缓存的非常基本的项目。</strong></p><p id="068f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你在 MAC 上安装 user Homebrew 来安装并开始在 Redis 上使用</p><p id="32e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，确保你已经安装了自制软件。从终端运行:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="6c99" class="kf kg hi kb b fi kh ki l kj kk">% brew --version</span></pre><p id="ebce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果该命令失败，您需要<a class="ae jv" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">按照自制软件安装说明</a>进行操作。</p><p id="3c3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">安装</strong></p><p id="8712" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从终端运行:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="75d0" class="kf kg hi kb b fi kh ki l kj kk">% brew install redis</span></pre><p id="486e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将在您的系统上安装 Redis。</p><p id="2423" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在前台启动和停止 Redis</p><p id="d367" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要测试 Redis 安装，可以从命令行运行<code class="du kl km kn kb b">redis-server</code>可执行文件:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="adea" class="kf kg hi kb b fi kh ki l kj kk">% redis-server</span></pre><p id="5955" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果成功，您将看到 Redis 的启动日志，Redis 将在前台运行。</p><p id="8b69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要停止 Redis，请输入 Ctrl-C。</p><p id="5e88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你遇到任何问题或者想在不同的操作系统上安装它，请点击此链接<a class="ae jv" href="https://redis.io/docs/getting-started/" rel="noopener ugc nofollow" target="_blank"> Redis 入门</a></p><p id="6d71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们开始与 Redis 合作</p><ul class=""><li id="6ba1" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">创建新目录</li></ul><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="393b" class="kf kg hi kb b fi kh ki l kj kk">% mkdir redis-cache-demo</span></pre><ul class=""><li id="a61f" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">导航到新目录</li></ul><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="8786" class="kf kg hi kb b fi kh ki l kj kk">% cd redis-cache-demo</span></pre><ul class=""><li id="80a6" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">生成 package.json 文件</li></ul><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="5e4b" class="kf kg hi kb b fi kh ki l kj kk">% npm init — force</span></pre><p id="8179" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> — force </strong>告诉 npm 在生成 package.json 时使用默认选项，这样就不会向您提出任何问题。</p><p id="1ed3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行上面的命令后，您应该在<em class="jo"> redis-cache-demo </em>目录中有一个 package.json 文件。</p><p id="f6b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在目录中创建一个文件 server.js。</p><p id="81a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用以下命令安装 Express、Redis 和节点获取 npm 模块</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="3145" class="kf kg hi kb b fi kh ki l kj kk">npm install — save node-fetch express redis</span></pre><p id="4be8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将按照较新的 es 规范导入模块，所以在 package.json 中添加下面一行代码(如果它还没有的话)。</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="7004" class="kf kg hi kb b fi kh ki l kj kk">“type”: “module”,</span></pre><p id="acb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您的 package.json 现在应该是这样的</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/8b5767055de89ad8308c29ea87d4bc6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_o-vTy0kjlwCyuOOO2jKlg.png"/></div></div></figure><p id="3ea8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在已经安装了 Redis，将下面的代码添加到 server.js 文件中。</p><figure class="jw jx jy jz fd ij"><div class="bz dy l di"><div class="ky kz l"/></div></figure><p id="e9f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以从终端使用<code class="du kl km kn kb b">node server.js</code>命令启动节点服务器了。</p><p id="95df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在为了测试我们的基本实现，open postman 向 todos 端点发出一个请求。</p><p id="98ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一个请求:-</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/ed95b87656ed688ee0dff1d8103383c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohjpfvoZSX1gYwUfATWd2w.png"/></div></div></figure><p id="ae5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二次请求:-</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/551ec1cbbba5ca821e479587e79e9aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEFQPAY9fOUT3PLg9sw9ng.png"/></div></div></figure><p id="37b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">记下上图中的时间。</p><p id="4ec1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一个请求花了 323 毫秒，而第二个只花了 5 毫秒。</p><p id="7b40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结论:- </strong></p><blockquote class="lc"><p id="9f5d" class="ld le hi bd lf lg lh li lj lk ll jn dx translated">Redis 是一个非常强大的内存数据存储，我们可以在应用程序中使用它来提高性能。保存和获取数据非常简单，不需要太多开销。</p></blockquote><p id="b100" class="pw-post-body-paragraph iq ir hi is b it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn hb bi translated">附注:这篇文章是与 Redis 合作的。</p></div></div>    
</body>
</html>