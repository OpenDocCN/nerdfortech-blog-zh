# Dart 中的命名构造函数与工厂构造函数

> 原文：<https://medium.com/nerd-for-tech/named-constructor-vs-factory-constructor-in-dart-ba28250b2747?source=collection_archive---------0----------------------->

这也是 dart 初学者和刚接触面向对象编程的人最困惑的话题之一。他们就像 ***“我们为什么需要这些？”*** ***“两者看起来几乎相似”“什么时候我应该更喜欢一个而不是另一个？”如果你有任何疑问，我在这里为你解答。***

## ***当我们调用一个构造函数时？***

当我们需要一个类的对象时，我们调用一个构造函数。有时我们不关心它是一个新实例还是一个已经存在的实例或者一个子类型实例，我们所需要的是一个与**兼容的**实例，但是有时，我们需要一个**新实例和一个确切的类型**(不是上面也不是下面)。这就是两个构造函数的区别所在。如果你不明白，让我解释得更清楚些。

# **命名构造器**

命名构造函数只不过是一个有名字的构造函数。你可能会问为什么我们需要一个有名字的构造函数？

如果你来自任何其他面向对象的编程语言，比如 Java，C++，只要参数不同，你就可以用不止一个构造函数来编写一个类。遗憾的是，我们在 Dart 中没有该功能😥但是命名构造函数支持我们😃而且我觉得比 Java，C++等那些重载的构造函数强多了。

让我们看一个例子

在这个例子中，我们从 Json()创建一个命名的构造函数，它接受一个 map 作为它的参数，并从 map 生成一个对象。

我们还可以将 JSON 解码逻辑移到类本身，

正如你在第 5 行看到的，我们使用了命名构造函数，类似于普通的构造函数，但是有一个名字。

## **命名构造函数有什么用？**

1.  **提高了可读性，**正如你所看到的，Person.fromJson()构造函数使得我们从 Json 创建一个实例变得非常明显。
2.  支持重载的构造函数，现在我们可以为我们的类拥有任意多的构造函数。
3.  它总是像默认构造函数一样返回精确类型(本例中为 Person)**的新实例。**

# *****工厂构造器*****

**我已经就这个话题写了两篇文章( [part-1](https://imsaravananm.medium.com/factory-constructor-in-dart-part-1-1bbdf0d0f7f0) 、 [part-2](https://imsaravananm.medium.com/factory-constructor-in-dart-part-2-7db2a5981ac3) )。所以我就简单说一下这个。**

**当我们需要时，我们使用工厂构造函数**

1.  **决定在运行时返回哪个实例( [*见本文*](https://imsaravananm.medium.com/factory-constructor-in-dart-part-1-1bbdf0d0f7f0) )**
2.  **缓存实例以供重用。**

**所以读完了他们两个，让我们来理解他们之间真正的区别**

## **1.对实例成员的访问**

*   **一个命名的构造函数可以访问 ***这个*** *关键字，因此它可以访问任何成员变量和方法。***
*   **工厂构造函数是静态的，所以它不能访问**这个**关键字。**

## **2.退货单**

*   **命名构造函数像普通构造函数一样工作，它不需要显式返回实例。(不需要 return 语句)你见过末尾有 return 语句的构造函数吗？**
*   **工厂构造函数应该显式返回一个实例。看所有的工厂构造函数，最后总有一个 return 语句。**

## **3.返回的实例类型**

*   **命名构造函数只能生成当前类的实例。**
*   **工厂构造函数可以决定在运行时返回哪个实例，它可以返回当前类的实例，也可以返回其后代类的任何实例。**

## **4.新的或旧的实例**

*   **这可能是一个小问题，但是命名构造函数总是会返回一个新的实例。**
*   **工厂构造函数可以基于我们的实现返回一个新的实例或者一个缓存的实例(更多关于这个[在这里](https://imsaravananm.medium.com/factory-constructor-in-dart-part-2-7db2a5981ac3)**

**我希望，现在你已经很清楚什么时候应该选择哪一个。竖起大拇指👍如果你喜欢这篇文章，你也可以在评论区分享你的想法。谢谢你。**