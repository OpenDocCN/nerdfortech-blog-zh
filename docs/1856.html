<html>
<head>
<title>Some Lessons on GatsbyJS: Plugins and SVGs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于 GatsbyJS 的一些经验:插件和 SVG</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/some-lessons-on-gatsbyjs-plugins-and-svgs-ddddb3246b9?source=collection_archive---------13-----------------------#2021-04-10">https://medium.com/nerd-for-tech/some-lessons-on-gatsbyjs-plugins-and-svgs-ddddb3246b9?source=collection_archive---------13-----------------------#2021-04-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="44cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">自从我在上一篇文章中称赞 GatsbyJS 作为静态站点生成器的强大功能以来，作为一个初学者，我在使用这个工具时遇到了一些障碍，我认为分享这些障碍是有帮助的，希望可以帮助其他初学者避免在堆栈溢出上花费大量时间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/0520caf77edc438fdabf2f6b39d3e303.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*XaexQS__bO_I5Vg9l24hfA.png"/></div></figure><h1 id="7aec" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Gatsby 插件和模块错误</h1><p id="e18b" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">我花了几天时间才理解的一个主要问题是，当我试图安装 Gatsby 插件和其他 npm 包时，我不断收到这个错误消息:</p><pre class="je jf jg jh fd ko kp kq kr aw ks bi"><span id="f518" class="kt jm hi kp b fi ku kv l kw kx">npm ERR! code ERESOLVE<br/>npm ERR! ERESOLVE unable to resolve dependency tree<br/>npm ERR!....</span></pre><p id="4635" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该消息继续基本陈述了各种版本冲突，包括我的 React 版本(v17)和我试图安装的插件。我的“啊哈时刻”部分归功于这个<a class="ae ky" href="https://stackoverflow.com/questions/66239691/what-does-npm-install-legacy-peer-deps-do-exactly-when-is-it-recommended-wh" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>解释:</p><blockquote class="kz la lb"><p id="7292" class="if ig lc ih b ii ij ik il im in io ip ld ir is it le iv iw ix lf iz ja jb jc hb bi translated">由于绝大多数模块没有专门将 React v17 添加为对等依赖项，因此在 v17 React 应用程序中运行 npm 安装时遇到<code class="du lg lh li kp b">unable to resolve dependency tree</code>错误是很常见的。</p></blockquote><p id="4e17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，我试图安装的模块不是为与我正在使用的 React 版本一起工作而设计的。因此，安装失败是因为一个或多个模块没有将 React 17 列为 peerDependency —而是列出了旧版本。</p><p id="cdb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解决方案</strong> : <code class="du lg lh li kp b">npm install x --legacy-peer-deps</code></p><p id="5f10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，NPM v7 会安装对等依赖，因此将此标志添加到您的安装中会绕过自动安装。</p><p id="93be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能想知道什么是对等依赖，以及它们是否不同于常规的 ol 依赖。事实上，它们是——<strong class="ih hj">peer dependencies</strong>是您的 package.json 文件中列出的对象，并且指定您的包与 npm 包的特定版本兼容；它们是模块需要处理的一组版本。<strong class="ih hj">依赖项</strong>是项目所依赖的<strong class="ih hj"> </strong> npm 包。</p><h1 id="0cb0" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">将 SVG 作为组件导入</h1><p id="c026" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">许多网站采用可缩放矢量图形(SVG)来放大它们的设计和信息。我在尝试将 SVG 复制并粘贴到 React 组件时遇到了一些问题，因为它们的语法与 JSX 不兼容。</p><p id="099d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决这个问题，假设你没有遇到插件问题，如果你打算在你的站点中包含 SVG 图标，我推荐使用插件<code class="du lg lh li kp b">gatsby-plugin-react-svg</code>。</p><p id="31ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用这个插件，您可以将 SVG 保存在您选择的目录中，并将其作为 React 组件导入，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es lj"><img src="../Images/f24f4698753bc782de49f242460de3a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gchNPfzyXrUpbLZwiEsYSA.png"/></div></div></figure><p id="9ad5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些只是我最初在我的 Gatsby 网站上遇到的几个障碍，随着我继续涉足 Gatsby，我预计将来会遇到更多的障碍，我将继续添加到这个列表中，作为那些经历类似问题的人的简要参考。</p></div></div>    
</body>
</html>