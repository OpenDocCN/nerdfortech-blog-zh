<html>
<head>
<title>Introduction to Windows Communication Foundation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Windows 通信基础简介</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/introduction-to-windows-communication-foundation-ddbb10ad092e?source=collection_archive---------13-----------------------#2021-07-13">https://medium.com/nerd-for-tech/introduction-to-windows-communication-foundation-ddbb10ad092e?source=collection_archive---------13-----------------------#2021-07-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a0c008fefb4829a6d1b1f3207446b30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oNYGMrPwsFu6gEXfhciN1A.jpeg"/></div></div></figure><p id="e742" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">编程世界正在向分布式系统发展。我们的意思是——用户执行的任何活动都是由后端的两个或更多应用程序完成的。然而，这是通过更好的用户体验和更少的延迟实现的。</p><p id="f7db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从用户的角度和系统架构的角度来看，这种方法有很多好处。由于系统是分布式的，所以维护和开发系统更容易。</p><p id="3fa4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，它还提供了用不同编程语言创建单独应用程序的优势。因此，基于需求和复杂性，开发人员和架构师可以选择他们喜欢的编程语言。</p><p id="a20e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽管我们看到了分布式系统的许多优点，但它也带来了一个复杂的挑战。让我们用一个例子来解释这一点</p><p id="0de5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想象一个被多个客户端使用的后端系统。一个实时的例子是电子商务系统的后端，它向 UI 提供用户地址的详细信息。最终用户正在使用它。此外，相同的数据被发送到传送带，以根据邮政编码对包裹进行隔离/分组。</p><p id="6d1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，UI 希望数据是 JSON 格式，而传送器希望数据是二进制格式。虽然使用了相同的数据，但需要两种不同形式的数据。</p><p id="22df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这种情况下，重复业务逻辑或编写代码来转换所需的格式将是一个繁琐的过程。此外，应用程序可能希望数据通过不同的传输协议发送，比如一个使用 HTTP，另一个使用 TCP。为了克服这个困难并提供互操作性，微软提供了 WCF。</p><p id="d430" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看什么是 WCF，以及它如何在这个博客中有用。</p><p id="bd1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目录</strong></p><ol class=""><li id="eae1" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">什么是 WCF？</li><li id="b40d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">WCF 的部件，</li><li id="84ec" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">如何创建 WCF 服务，以及</li><li id="4c43" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">结论。</li></ol><h1 id="b8f5" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是 WCF？</h1><p id="db6c" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">WCF 代表视窗通讯基金会。它是微软从。Net framework 版。它结合了 ASP。Net web 服务、企业服务、消息队列和。Net 远程处理。</p><p id="a8dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它为开发人员提供了一个重要的优势——它帮助他们专注于业务逻辑，而不是创建通信和传输协议的艰巨任务。与 WebAPIs 类似，WCF 也有端点，客户端通过端点传递输入数据并获取输出数据。</p><h1 id="abe9" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">WCF 的部件</h1><p id="eed8" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了访问 web 服务，通常使用端点。端点被配置为调用服务类中的特定方法，该方法反过来提供将通过端点进行通信的数据类型。</p><p id="7acd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">WCF 提供了涵盖其完整功能的三个基本组件(俗称 WCF 的 ABC)。那些是-</p><ul class=""><li id="3122" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn lf ju jv jw bi translated"><strong class="is hj">一个</strong>地址，</li><li id="732b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated"><strong class="is hj"> B </strong>发现</li><li id="7acb" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">合同</li></ul><h2 id="c6bb" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">地址</h2><p id="c901" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">该地址提供了您的端点的确切位置。下面是一些地址的例子</p><ul class=""><li id="0e6d" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn lf ju jv jw bi translated"><a class="ae lu" href="http://partech.com/MyService" rel="noopener ugc nofollow" target="_blank">http://partech.com/MyService</a></li><li id="5846" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">net . TCP://partech . com/my service</li></ul><p id="746a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">地址的语法是—传输模式:服务器位置:端口/路径/子路径</p><p id="a096" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，传输模式可以是 WCF 附带的任何一种传输协议。服务器位置是网页的 IP 或屏蔽地址。端口是可选的。路径和子路径表示服务中需要调用的方法。</p><h2 id="20c2" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">有约束力的</h2><p id="4be0" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">绑定保存了服务器端和客户端如何处理数据的信息，也就是说，它定义了传输和编码协议。</p><p id="e044" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一些基本的绑定类型有</p><ol class=""><li id="28cb" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">基本装订</li><li id="e972" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">TCP 绑定</li><li id="e5b9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">Web 服务(WS)绑定</li><li id="ed33" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">双工 WS 绑定</li><li id="b8a4" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">MSMQ 装订</li></ol><h2 id="443e" class="lg kd hi bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">合同</h2><p id="7db7" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">顾名思义，它是客户机和服务器之间关于将要交换的消息的内容和结构的协议。数据契约定义了消息的结构，消息契约定义了消息的内容。</p><h1 id="3e46" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">如何创建 WCF 服务？</h1><p id="3c88" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">要创建基于 WCF 的服务，用户需要安装 Visual Studio 2019 以及组件—Windows Communication Foundation(位于安装向导的单个组件页面下)。</p><p id="43b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开 Visual Studio，找到项目模板— <strong class="is hj"> WCF 服务应用。</strong>为解决方案提供有效名称。这里我们在。Net Framework 4.7.2 版本。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/2c0e5c4c27df8623206f70179709db94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/0*ck8FecADa1n2SKYY"/></div></figure><p id="b0e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将创建一个具有以下结构的项目-</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/89502997f90817b01c552efa367e0805.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/0*xnBSIwpp0EozB1up"/></div></figure><p id="a601" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们一个一个地看。首先，我们来看看 IService.cs 文件。这包含服务契约(包含端点的接口)和操作契约(将用于通信的端点)。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/df57a45dce569cf2e47021deb30dbfbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/0*dB0PlwjL-D15QUmu"/></div></figure><p id="12d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在同一个文件上，在服务协定下面，存在数据协定。这提供了将用于通信的数据成员。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/3bae078642c01c3793380d603b10d7cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/0*nksAZx6HTRePYSKI"/></div></figure><p id="929c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在 Service1.svc.cs 文件中，类实现服务协定的接口。此外，操作契约的定义是在实现服务契约的类中创建的。这里，我们在服务契约中提供了两个操作契约，同样的操作契约在 Service1 类中实现。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div class="er es md"><img src="../Images/e2ab2d951d26e17b5ea2a47e982767a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/0*ed5oKfkZG6VCpNzo"/></div></figure><p id="9fe2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在是重要的部分——web . config 文件。这里，除了. Net 应用程序的标准设置，还包括 WCF 配置。这包括将用于通信的应用程序的绑定，并将在此进行配置。根据需要，用户可以修改配置。默认情况下，使用 basicHttpsBinding 设置绑定。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/59c7ca1dd4e52e3b7d8e7c3369d0958a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Gtgd7ZkX9224k-GZ"/></div></div></figure><p id="df36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要运行该应用程序，请单击 Visual studio 中的调试图标。这将打开一个 WCF 测试客户端。测试客户端提供公开的地址和端点。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/19485c7808bee5a838fe8fd96e8291a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SP0UbNR3nqdZ8nVH"/></div></div></figure><p id="86ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用户可以提供输入，并从端点获取输出。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/b0c0a00c5dc0c4a688ffdb941b1ecc7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qN_V4wAjQGABJHw9"/></div></div></figure><p id="ed88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，可以用 XML 格式查看输入和输出。同一个应用程序可以托管在 IIS 中，并可以通过 SOAP UI(测试服务的第三方工具)调用。</p><figure class="lw lx ly lz fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/c5582e191aff55e453f97c3b33d98142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/0*GNCXzK-tRKJYQ9yg"/></div></figure><p id="b0ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类似地，应用程序可以在客户端被引用和使用。</p><h1 id="ffc6" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="12d6" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">WCF 为开发人员提供了实现互操作功能的灵活性和优势，而无需过多关注其实现方式。因此，请在您的下一个应用程序中尝试一下。</p></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><p id="30d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mn">原载于</em><a class="ae lu" href="https://www.partech.nl/nl/publicaties/2021/07/introduction-to-windows-communication-foundation" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://www . partech . nl</em></a><em class="mn">。</em></p></div></div>    
</body>
</html>