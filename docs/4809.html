<html>
<head>
<title>Command Design Pattern in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity 中的命令设计模式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/command-design-pattern-in-unity-17979cce686f?source=collection_archive---------3-----------------------#2021-08-08">https://medium.com/nerd-for-tech/command-design-pattern-in-unity-17979cce686f?source=collection_archive---------3-----------------------#2021-08-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ee3394dd19119100ef19ab02268aca24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*r40o2VtlpLmIo5LHwE7Yow.gif"/></div></div></figure><p id="57e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">命令模式是一种行为模式，允许您记录应用程序的动作或事件。一个很好的例子是在战术游戏中，玩家可以为多个角色设计多个动作，然后播放出来，如果是坏的动作就倒带。</p><p id="9dd7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了建立一个命令模式的例子，我建立了一个简单的场景，有三个立方体和一些按钮。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/7cf494c8fafab2e4d2d343c7cc470028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*zkeASE9gOBEkEYub3CV8dg.png"/></div></figure><p id="e2c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先要做的是创建一个具有 execute 和 undue 方法的接口。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/8cdb148d35dcac28c89fc3ea7223ae87.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*WAdGyKJgKFVVboryMjMkzg.png"/></div></figure><p id="4bd6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，创建一个简单的用户输入脚本，允许玩家点击。这将在玩家点击时创建一个光线投射。如果检测到立方体，将创建一个新的 ICommand。然后它将调用 execute 方法。最后，它将使用一个简单的命令管理器脚本中的方法将新的 ICommand 添加到列表中。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ju"><img src="../Images/598d12b892ba0e95a12792251df640fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fd0z-c-Tt_0c8H2KfIiaIQ.png"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx translated">注意:稍后将显示命令管理器。</figcaption></figure><p id="3895" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为将继承 ICommand 的 click 命令创建脚本。这个脚本将引用一个立方体游戏对象、一种颜色和一个先前的颜色。</p><p id="d6ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">execute 方法会将以前的颜色设置为当前颜色，然后更改立方体的颜色。</p><p id="306f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">undue 方法会将立方体的颜色设置为以前的颜色。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/f1db73b6432b62ea5a0b8fcb5aa23c1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*laF5_ngKjVTwju21bqpwww.png"/></div></figure><p id="f433" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在是时候讨论命令管理器脚本了。</p><p id="bee0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，使这个脚本成为单例脚本。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/8bfc7727772452a4fbca8064725aa096.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*4LRsCQO9uVGJc1m4gJmMhw.png"/></div></figure><p id="b84a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个包含 ICommands 的列表。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kb"><img src="../Images/3466cbfdf3f1295ca86a254d0f643578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*uawlNixFkO5rEHRIc9zPCQ.png"/></div></figure><p id="f1e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将创建一个向列表添加命令的方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kc"><img src="../Images/9acc39b2c8fb6ac8922d4171898365d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*kt9MyD5XfE4QhKXFR8S2ew.png"/></div></figure><p id="7213" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">play 方法将调用协程，协程将在每个命令上调用 execute 方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kd"><img src="../Images/6c7e5e313383478b3d5e218283fb01ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*VOcKb9n_r5ycA7sAUh1BLg.png"/></div></figure><p id="533b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个 rewind 方法，它将做 play 方法所做的事情，但是它将向后遍历列表并调用 undue 方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/a2fca6189edaa8d55f4b8dfeae9a3d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*QMKFXV8vbpsDswyR0Tb2iQ.png"/></div></figure><p id="d08b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个将所有立方体变成白色的方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/a7bf1b2e27827f485af1a6be0d87110f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*jeBc_byPs8tg9IDWjaDpUQ.png"/></div></figure><p id="3343" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和一个清除列表的重置方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/0d56410c13bb08f81189062638d90863.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*gl2zQh4LrqlTSjG_zTGc8w.png"/></div></figure><p id="2369" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在进入 unity，设置按钮为被点击的按钮调用正确的方法，你将能够记录一系列点击，并向前或向后播放。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/046f51947fdce4fc07733a071a14fe88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/1*gaiAs27gra1Ioy9yAAM7-A.gif"/></div></figure></div></div>    
</body>
</html>