<html>
<head>
<title>Basic Authentication in Swagger (Open API) .Net 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swagger(开放 API)中的基本认证。网络 5</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/basic-authentication-in-swagger-open-api-net-5-436f7d4a2f01?source=collection_archive---------4-----------------------#2021-04-10">https://medium.com/nerd-for-tech/basic-authentication-in-swagger-open-api-net-5-436f7d4a2f01?source=collection_archive---------4-----------------------#2021-04-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cb272e673bd7b9b87b1c8aa5b181106c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8q47z5cGKpVnm-EVuXlLmg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">基本认证 Swagger。网络 5</figcaption></figure><p id="9c98" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated"><span class="l jt ju jv bm jw jx jy jz ka di">在</span>这篇文章中，我们将学习如何在 ASP.NET 5.0 中使用 swagger 为我们的 API 设置基本认证。众所周知，其新推出的框架于 11 月正式发布。在这里我分享了为<a class="ae kb" href="https://dotnet.microsoft.com/download/dotnet/5.0" rel="noopener ugc nofollow" target="_blank">安装 SDK 的链接。网 5 </a></p><p id="863f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> GitHub 回购</strong></p><div class="kc kd ez fb ke kf"><a href="https://github.com/JayKrishnareddy/BasicAuth" rel="noopener  ugc nofollow" target="_blank"><div class="kg ab dw"><div class="kh ab ki cl cj kj"><h2 class="bd hj fi z dy kk ea eb kl ed ef hh bi translated">JayKrishnareddy/BasicAuth</h2><div class="km l"><h3 class="bd b fi z dy kk ea eb kl ed ef dx translated">Swagger 中的基本认证(OpenAPI)。净 5。为 JayKrishnareddy/BasicAuth 开发做出贡献，创建一个…</h3></div><div class="kn l"><p class="bd b fp z dy kk ea eb kl ed ef dx translated">github.com</p></div></div></div></a></div><p id="34b1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">本项目使用的软件包！</strong></p><ol class=""><li id="1a1a" class="ko kp hi iw b ix iy jb jc jf kq jj kr jn ks jr kt ku kv kw bi translated">Swashbuckle。AspNetCore(最新版本)</li></ol><p id="4e10" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果您使用的是 ASP.NET 核心 5.0，默认情况下会安装上述软件包</p><p id="e3a0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第一步</strong></p><p id="db1a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在 Visual Studio 中创建一个项目，并确保遵循下图所示的相同过程。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/6a5e0b8c81b46c306b163ed652c66309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9ABl4jeT72IfxSFQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Visual Studio 模板</figcaption></figure><p id="9328" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第二步</strong></p><p id="f99a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">添加服务文件夹，我们可以在其中添加业务逻辑。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/c1605dc5fb0ef294894c5edb91d27a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/0*ESNxYxhdIF3u00n_.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">服务文件夹</figcaption></figure><p id="1034" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">目前，我已经在代码中硬编码了用户名和密码，如果您有包含所有登录凭证的数据库，您可以使用该表进行验证。</p><p id="8ba8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">用户服务. cs </strong></p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="d271" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我已经在控制器级别添加了依赖注入的接口。</p><p id="0218" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> IUserService.cs </strong></p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="74de" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第三步</strong></p><p id="a513" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">添加身份验证处理程序代码，以便处理基本身份验证。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es lf"><img src="../Images/76b615900cc65fff8b5d038c13acbc64.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/0*09SD_JAgi_6fTpyX.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">API 文件夹</figcaption></figure><p id="8855" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">basicauthenticationhandler . cs</strong></p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="e693" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">添加 AuthenticationHandler 代码后，我们可以使用 Authorize 属性作为控制器中每个方法的头，以进行基本的身份验证设置。我没有添加任何其他控制器，因为我重复使用了同一个控制器。</p><p id="3f31" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">weatherforecastcontroller . cs</strong></p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="754d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第四步</strong></p><p id="0e21" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我已经在 swagger 中设置了这个基本身份验证，所以我们已经在 startup.cs 文件中添加了这个 swagger 的配置。</p><p id="48f6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> Startup.cs </strong></p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="3330" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第五步</strong></p><p id="4f03" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">运行应用程序，默认情况下，swagger URL 将使用默认端口打开。在下图中,“授权”按钮处于启用状态，每个 API 都处于未授权状态，直到您的授权成功。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/0aeccf3570c7d0e07c83ef5b6c1a5ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8hNAtMQZXgsl7pd.png"/></div></div></figure><p id="7a48" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">点击<strong class="iw hj">授权</strong>按钮。传递用户名和密码来访问 API。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/b58f16e57aff6f61aa61a36e68e86389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/0*i0UIeiWeDMQff9ig.png"/></div></figure><p id="0780" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">API 的响应</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/6f295e3e66e7c25ebb4b3ec4bf33dea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5Le7QT8as6PX6AAF.png"/></div></div></figure><p id="d581" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你想和 postman 确认，下面是通过授权访问 API 的过程。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/17163f351763e4d799ea2a40e17e7b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rVxqUYPvFgNrAyFR.png"/></div></div></figure><p id="a4f1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本文中，我们了解了如何通过 Swagger 为 API 设置基本认证，并使用 Postman 运行和测试它。如果您想要克隆项目</p><p id="b2b4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">希望这篇文章对你有帮助！！！</p><p id="8c78" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">继续学习…..！</p></div></div>    
</body>
</html>