<html>
<head>
<title>Game Programming Pattern: Singleton</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">游戏编程模式:Singleton</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/game-programming-pattern-singleton-a05511375f4c?source=collection_archive---------15-----------------------#2021-07-02">https://medium.com/nerd-for-tech/game-programming-pattern-singleton-a05511375f4c?source=collection_archive---------15-----------------------#2021-07-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="735b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">秘密游戏和电影摄影</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/0c90f44f0c2ad2c7a02896c85b1e1b40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BSf4XjIhtaRFHKj7"/></div></div></figure><p id="b8de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目标:使用单例模式创建一个游戏管理器</p><p id="6013" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经创建了游戏对象，并在其中存储了同名的脚本。现在让我们写一些代码</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/939c51fb8051189ac34d17f82f07fee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R2M-XpMrPlb_UNWRIOJFIg.png"/></div></div></figure><p id="3216" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在 GameManager 脚本中，我们创建了一个与脚本类相同类型的静态变量，并将其设置为 private，这样您就不能从脚本外部直接访问该变量。</p><p id="881c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后创建另一个静态类型的公共静态变量，但只定义 get 属性，以便其他脚本可以访问这个 script _instance 值，但不能通过只使用 get 属性来更改它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jq"><img src="../Images/b8e5ed781e942f7aef9e601a19f98436.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*--UL8HLihXzsUZchwZR-WA.png"/></div></figure><p id="a5b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，一旦 gameobejct 使用 Awake 初始化，就将脚本存储在 _instance 中。</p><p id="bc8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在有了这个，你就可以轻松地访问这个脚本中的任何公共变量和方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/6afa63c26cddbb6b35993299587ae7eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*TmKGEWuMJl2ot6KevtVfmw.png"/></div></figure><p id="5e83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了了解它是如何工作的，让我们创建一个函数来改变 bool 值，它告诉我们卡是否被盗。因此，创建一个 HasCard bool 并将其属性设置为 get 和 set，以便其他脚本可以访问和修改它的值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es js"><img src="../Images/9de2bd058d0bedf6afe9241c2612928c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*dd7VstByQfgMVFZsvkwxFA.png"/></div></figure><p id="c6dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在玩家触发偷牌过场动画后，我们可以将 HasCard 的 bool 值更改为 true，这样我们就可以通过使用 ScriptName 调用公共实例变量来完成此操作。实例(GameManager。实例)，这与您访问脚本时的工作方式相同，现在您可以访问所有的公共变量和方法。这里，我们将 HasCard 的值更改为 true。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jt"><img src="../Images/5e95a21c5af3556cd7290b833a5ad36c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*TlxsQ9hm06_8uU4uaKEwPQ.png"/></div></figure><p id="12bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也可以在其他脚本中做同样的事情。这里我们检查 HasCard 的值，这样只有当它为真时，玩家才在触发后赢得游戏。</p><p id="af0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在的问题是我们如何做到这一点？答案很简单，因为我们把变量定义为静态的，它把自己存储在一个特殊的地方，所有人都可以访问，而不需要找到它。这就像当你需要一些食物时，你可以看看冰箱里的东西，每个人都很容易拿到，不需要叫别人来找。但是如果食物没有储存在冰箱里，那么你需要联系供应商或者打电话寻求帮助。在我们的例子中，我们可以在管理器中获得所有的变量和方法，但是如果在管理器类中不可用，我们仍然需要调用其他脚本来获取值。</p></div></div>    
</body>
</html>