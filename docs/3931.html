<html>
<head>
<title>Blogging with GatsbyJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">和盖茨比一起写博客</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/blogging-with-gatsbyjs-b6fbafc198c5?source=collection_archive---------14-----------------------#2021-06-29">https://medium.com/nerd-for-tech/blogging-with-gatsbyjs-b6fbafc198c5?source=collection_archive---------14-----------------------#2021-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="394b" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何使用 Remark、Prism 和其他插件为任何读者在 GatsbyJS 上写博客</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/113a04ea70a3ad806d3f669de0c35030.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kFCwtErP67jYCN4e.jpg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">"图为<a class="ae jn" href="https://unsplash.com/@aaronburden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">亚伦·伯登</a>在<a class="ae jn" href="https://unsplash.com/s/photos/blog?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>"</figcaption></figure><p id="455e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">🔔这篇文章最初发布在我的网站上，<a class="ae jn" href="https://mihaibojin.com/personal-site/blog-on-gatsbyjs?utm_source=Medium&amp;utm_medium=organic&amp;utm_campaign=rss" rel="noopener ugc nofollow" target="_blank">MihaiBojin.com</a>。🔔</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="9cab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">本帖简单介绍了盖茨比最常见的特征(大概是):<strong class="jq hj">用</strong> <a class="ae jn" href="https://remark.js.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">备注 JS </strong> </a>写博客。</p><p id="d06e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">希望在本文结束时，您将对一些用于配置博客功能的常用插件有一个基本的了解，以及它们能带来什么好处！</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="1ad0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">实现我们目标所需的核心插件是官方的<a class="ae jn" href="https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/" rel="noopener ugc nofollow" target="_blank">Gatsby-transformer-remark</a>插件。</p><p id="c8d2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这篇文章的目的是解释一些常用的插件，你可以用它们来用 GatsbyJS 建立你自己的博客。因为配置是通用的，所以您可以面向任何受众，但是如果您不打算包含代码，您可以安全地跳过 PrismJS 插件。</p><p id="29b5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们开始吧！</p><h2 id="3ed5" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">安装盖茨比-变压器-备注</h2><p id="fb98" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">假设您已经有了一个 GatsbyJS 站点，从安装插件开始:</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="8043" class="kr ks hi ls b fi lw lx l ly lz">npm install gatsby-transformer-remark</span></pre><h2 id="9389" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">安装附加插件</h2><p id="87ee" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated"><code class="du ma mb mc ls b">gatsby-transformer-remark</code>插件支持多个输入源(例如，各种内容管理系统)，但是最简单的选择是在本地托管 markdown 文件。为此，您需要以下插件:</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="80f7" class="kr ks hi ls b fi lw lx l ly lz">npm install gatsby-source-filesystem</span></pre><h2 id="6b71" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">图像优化</h2><p id="0718" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">你很可能想在你的减价内容中包含图片。<code class="du ma mb mc ls b">gatsby-remark-images</code>插件有几个漂亮的特性，比如:</p><ul class=""><li id="ab29" class="md me hi jq b jr js ju jv jx mf kb mg kf mh kj mi mj mk ml bi translated">将图像调整到目标容器的大小</li><li id="4c44" class="md me hi jq b jr mm ju mn jx mo kb mp kf mq kj mi mj mk ml bi translated">生成多种图像大小的 srcset(支持多种设备宽度)</li><li id="2ff0" class="md me hi jq b jr mm ju mn jx mo kb mp kf mq kj mi mj mk ml bi translated">加载图像时出现“模糊”</li></ul><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="c989" class="kr ks hi ls b fi lw lx l ly lz">npm install gatsby-remark-images gatsby-plugin-sharp gatsby-transformer-sharp</span></pre><h2 id="1e01" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">内容标题链接</h2><p id="3d85" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated"><code class="du ma mb mc ls b">gatsby-remark-autolink-headers</code>插件自动为每个标题生成 HTML IDs，允许你的读者链接到你文章中的特定部分。</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="c9f0" class="kr ks hi ls b fi lw lx l ly lz">npm install gatsby-remark-autolink-headers</span></pre><h2 id="ae18" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">优化的内部链接</h2><p id="a025" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">由于 markdown 内容中的链接没有使用 React 的<a class="ae jn" href="https://www.gatsbyjs.com/docs/reach-router-and-gatsby/" rel="noopener ugc nofollow" target="_blank"> reach router </a>，所以您还需要转换它们以实现更快的导航:</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="4c12" class="kr ks hi ls b fi lw lx l ly lz">npm install gatsby-plugin-catch-links</span></pre><h2 id="b237" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">静态内容</h2><p id="4f32" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">如果您链接了 markdown 中的任何文件(如 pdf)，您会希望它们与任何其他静态资源一起被复制。</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="6ff3" class="kr ks hi ls b fi lw lx l ly lz">npm install gatsby-remark-copy-linked-files</span></pre><h2 id="9d66" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">用 PrismJS 突出显示语法</h2><p id="067d" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">假设您将在内容中包含一些代码，您将希望与<a class="ae jn" href="https://prismjs.com/" rel="noopener ugc nofollow" target="_blank"> PrismJS </a>集成:</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="494e" class="kr ks hi ls b fi lw lx l ly lz">npm install gatsby-transformer-remark gatsby-remark-prismjs prismjs</span></pre><h2 id="466d" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">配置插件</h2><p id="42ff" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">在继续之前，您需要决定在哪里存放您的文件。一个常见的选择是<code class="du ma mb mc ls b">/content</code>。您可以直接在那个目录中创建<code class="du ma mb mc ls b">.md</code>文件，或者您可以创建任意数量的子目录。您使用的路径将决定您的内容将被托管的 slugs。比如在<code class="du ma mb mc ls b">/content/my/article.md</code>下创建一个页面会渲染到下面的页面:<code class="du ma mb mc ls b"><a class="ae jn" href="https://SITE_URL/my/article." rel="noopener ugc nofollow" target="_blank">https://SITE_URL/my/article</a></code> <a class="ae jn" href="https://SITE_URL/my/article." rel="noopener ugc nofollow" target="_blank">。</a></p><blockquote class="mr ms mt"><p id="0f14" class="jo jp mu jq b jr js ij jt ju jv im jw mv jy jz ka mw kc kd ke mx kg kh ki kj hb bi translated"><em class="hi"> slug </em>是一个常用术语，用来表示 URL 中标识页面的部分。</p></blockquote><h2 id="770f" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">盖茨比-配置. js</h2><p id="f692" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">首先，将以下配置添加到您的<code class="du ma mb mc ls b">gatsby-config.js</code>中。</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="e5d5" class="kr ks hi ls b fi lw lx l ly lz">module.exports = {<br/>  plugins: [<br/>    {<br/>      resolve: `gatsby-source-filesystem`,<br/>      options: {<br/>        path: `${__dirname}/content`,<br/>        name: `blog`,<br/>      },<br/>    },<br/>    {<br/>      resolve: `gatsby-transformer-remark`,<br/>      options: {<br/>        plugins: [<br/>          {<br/>            resolve: `gatsby-remark-images`,<br/>            options: {<br/>              maxWidth: 730,<br/>            },<br/>          },<br/>          `gatsby-remark-autolink-headers`,<br/>          `gatsby-plugin-catch-links`,<br/>          `gatsby-remark-prismjs`,<br/>          `gatsby-remark-copy-linked-files`,<br/>        ],<br/>      },<br/>    },<br/>    `gatsby-transformer-sharp`,<br/>    {<br/>      resolve: `gatsby-plugin-sharp`,<br/>      options: {<br/>        defaults: {<br/>          formats: [`auto`, `webp`],<br/>          placeholder: `blurred`,<br/>          quality: 95,<br/>          breakpoints: [750, 1080, 1366, 1920],<br/>          backgroundColor: `transparent`,<br/>          tracedSVGOptions: {},<br/>          blurredOptions: {},<br/>          jpgOptions: {},<br/>          pngOptions: {},<br/>          webpOptions: {},<br/>          avifOptions: {},<br/>        },<br/>      },<br/>    },<br/>  ],<br/>};</span></pre><h2 id="5183" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">创建博客页面</h2><p id="579d" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">完成所有这些之后，最后一步是从<a class="ae jn" href="https://www.gatsbyjs.com/docs/graphql/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>中读取所有的 markdown 并生成页面。</p><p id="c89e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">编辑您的<code class="du ma mb mc ls b">gatsby-node.js</code>文件并添加以下内容(如果不存在，创建一个):</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="58f5" class="kr ks hi ls b fi lw lx l ly lz">const path = require(`path`);<br/>const { createFilePath } = require(`gatsby-source-filesystem`);<br/><br/>exports.onCreateNode = ({ node, actions, getNode }) =&gt; {<br/>  const { createNodeField } = actions;<br/><br/>  if (node.internal.type === `MarkdownRemark`) {<br/>    // generate post slug<br/>    const value = createFilePath({ node, getNode });<br/><br/>    createNodeField({<br/>      name: `slug`,<br/>      node,<br/>      value,<br/>    });<br/>  }<br/>};<br/><br/>exports.createPages = async ({ graphql, actions, reporter }) =&gt; {<br/>  const { createPage } = actions;<br/><br/>  // Get all markdown blog posts sorted by date<br/>  const result = await graphql(<br/>    `<br/>      {<br/>        allMarkdownRemark(sort: { fields: [frontmatter___date], order: ASC }) {<br/>          nodes {<br/>            id<br/>            fields {<br/>              slug<br/>            }<br/>          }<br/>        }<br/>      }<br/>    `<br/>  );<br/><br/>  if (result.errors) {<br/>    reporter.panicOnBuild(<br/>      `There was an error loading your blog posts`,<br/>      result.errors<br/>    );<br/>    return;<br/>  }<br/><br/>  // Create blog posts pages only if there's at least one markdown file<br/>  const posts = result.data.allMarkdownRemark.nodes;<br/>  if (posts.length == 0) {<br/>    reporter.warn(`No blog posts found`);<br/>    return;<br/>  }<br/><br/>  // Define a template for blog post<br/>  const component = path.resolve(`./src/components/blog-post.js`);<br/><br/>  posts.forEach((post, index) =&gt; {<br/>    const previousPostId = index === 0 ? null : posts[index - 1].id;<br/>    const nextPostId = index === posts.length - 1 ? null : posts[index + 1].id;<br/><br/>    console.log(`Creating blog page: ${post.fields.slug}`);<br/>    createPage({<br/>      path: post.fields.slug,<br/>      component,<br/>      context: {<br/>        id: post.id,<br/>        previousPostId,<br/>        nextPostId,<br/>      },<br/>    });<br/>  });<br/>};</span></pre><p id="803e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">每个页面都基于一个模板<code class="du ma mb mc ls b">./src/templates/blog-post.js</code>。继续创建这个文件，并用 React 组件填充它，该组件将显示呈现的 markdown 和其他元素。这里有一个<a class="ae jn" href="https://github.com/gatsbyjs/gatsby-starter-blog/blob/master/src/templates/blog-post.js" rel="noopener ugc nofollow" target="_blank">的例子</a>。</p><h2 id="9261" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">结论</h2><p id="1ff6" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">恭喜你！在这一点上，你应该有一个工作的博客功能，使你能够写简单的 markdown 并将其转换成页面，如你现在正在阅读的页面。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="2f03" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你喜欢这篇文章，并想阅读更多类似的文章，<a class="ae jn" href="https://motivated-founder-807.ck.page/db1cf284bf" rel="noopener ugc nofollow" target="_blank">请订阅我的简讯</a>；我每隔几周就发一封！</p></div></div>    
</body>
</html>