<html>
<head>
<title>Mobile Games In Unity: Player Jump Using Raycast</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity 中的手机游戏:玩家使用 Raycast 进行跳跃</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/mobile-games-in-unity-player-jump-using-raycast-7506fef18758?source=collection_archive---------2-----------------------#2021-08-21">https://medium.com/nerd-for-tech/mobile-games-in-unity-player-jump-using-raycast-7506fef18758?source=collection_archive---------2-----------------------#2021-08-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="acb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将使用一个返回类型的方法来设置跳转功能，让我们知道我们是否被固定了。</p><p id="7af0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是光线投射！？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/2ec1c34a6ce15636a31ed1022cb7d52c.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*mJS_UcuasFkXNJt7vVrCcA.png"/></div></figure><p id="4ba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，光线投射基本上是从玩家到地面的光线。如果射线与地面碰撞器碰撞，玩家将被禁足。如果射线没有碰到它，玩家就不会被禁足。我希望只有当玩家被禁足时才能跳跃。我已经讲述了如何将一个布尔值从 true 变为 false，反之亦然，但是在这篇文章中，我将演示如何通过使用一个<em class="jl"> </em> <strong class="ih hj"> <em class="jl">返回类型函数</em> </strong>来避免这种情况。</p><p id="2268" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在此之前，我要清理一下我的代码，这样 Update()函数就不会变得杂乱无章。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jm"><img src="../Images/aa1d81dce7a64a8e62c181dca15b405d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*EPxcDdb4HssQsz_wzLhomg.png"/></div></figure><p id="0f18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在所有处理移动的代码都在一个方法中。让我们进入接地的返回类型方法。</p><p id="6899" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先我需要做一个光线投射。为此，我只需要下面的代码。通过输入<code class="du jn jo jp jq b">Color.</code>*插入颜色名称，你可以让你的光线变成你想要的任何颜色。对我来说，我用绿色。</p><p id="eacd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将从玩家的位置向地面绘制一条射线。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/3be36a84b851ff4487c585fba8e01aee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*YsXVod_k_Usdsaohw4qWYA.png"/></div></figure><p id="c3ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我只需要创建一个函数来决定我是否被禁足。这就是接地的返回类型功能发挥作用的地方。</p><p id="339a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的跳转功能只有在我按下“Space”并且 IsGrounded() == true 时才会发生；</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es js"><img src="../Images/9a0ab01f5d870bd88c77a475be402af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*smfDOiXGhEekUyehLfR4vQ.png"/></div></figure><p id="a160" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 IsGrounded 方法中，我将绘制射线。我还需要设置一个图层蒙版。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jt"><img src="../Images/d941e6075bbbf1c2ee93ac34e258c04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RlN3KckopfEkEdhRZord7w.png"/></div></div></figure><p id="edbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着光线将忽略除第 8 层以外的所有层。我将地面层分配给这一层。现在，射线只能探测地面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jy"><img src="../Images/e34c41458e88e3809ab856a8e2ac7823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_iiyuI6S6JRlfWDGVD40cA.gif"/></div></div></figure><p id="ae59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我要说的是，如果 hitinfo.collider 不等于 null，则返回 true，否则返回 false。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jz"><img src="../Images/5a582309589aa8cd3e48e526f61dba0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2GjgbQBmz15ceU6U1rG3HQ.png"/></div></div></figure><p id="cbd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果它没有落地，这个方法返回 false。在这里，我可以创建一个 bool 来重置跳转。这将基本上帮助我防止能够垃圾邮件跳转键。</p><p id="25cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我创建了一个名为 resetJumpNeeded 的 bool，最初将它设置为 false。当我跳转的时候，我希望它被设置为真。然后等待 0.1 秒，将其设置回 false。现在我可以说如果 hitinfo.collider 不等于 null，如果 reset jump needed 为 false，则返回 true。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ka"><img src="../Images/191524d156881c8459f17ac91ab2f2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mJnHZI95GxnWd-QZ2Nu-cg.png"/></div></div></figure><p id="63a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后的结果是我把垃圾从空格键里扔了出来:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kb"><img src="../Images/c5fa47736ed01f5927849fb7ff3f60f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*upmqtxJJXyzougZAmYAzVQ.gif"/></div></div></figure><p id="daae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所见，我只能在再次着陆时跳:)</p></div></div>    
</body>
</html>