<html>
<head>
<title>On a Roll! — Player Roll Animation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">势如破竹！—玩家滚动动画</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/on-a-roll-player-roll-animation-37f99dfcfa13?source=collection_archive---------17-----------------------#2021-07-03">https://medium.com/nerd-for-tech/on-a-roll-player-roll-animation-37f99dfcfa13?source=collection_archive---------17-----------------------#2021-07-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5e08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章展示了如何为玩家增加滚动的能力来躲避障碍物。翻滚动画来自<a class="ae jd" href="https://www.mixamo.com" rel="noopener ugc nofollow" target="_blank"> Mixamo </a>，这是<a class="ae jd" href="https://kwpowers.medium.com/setting-up-3d-character-in-unity-with-mixamo-c0dd9d159fad" rel="noopener">以前的一篇文章</a>中的特色。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/7c3ef274a39fe5bc1aa0f388a8fd8e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/1*B-AAWubeSlNF7JWVH0i7HQ.gif"/></div></figure><p id="04a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将在输入掷球时通过代码更改角色控制器碰撞器，以匹配模型的更改轮廓，然后在动画结束后将其更改回正常状态。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/4cdea3b5b835e0ec9c3267e3f13e76aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ixqp2Z6d_BY0_R6Z1YchUw.gif"/></div></div></figure><p id="9067" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在玩家脚本中，我们需要一些变量来实现滚动逻辑。</p><ol class=""><li id="4dfc" class="jr js hi ih b ii ij im in iq jt iu ju iy jv jc jw jx jy jz bi translated">掷骰子时增加玩家速度的数量。</li><li id="0acc" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc jw jx jy jz bi translated">滚动时碰撞器中心的新XYZ轴值。</li><li id="efed" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc jw jx jy jz bi translated">滚动后碰撞器中心返回的起始XYZ轴值。</li><li id="3b3b" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc jw jx jy jz bi translated">滚动时碰撞器的新高度值。</li><li id="a12a" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc jw jx jy jz bi translated">滚动后碰撞器返回的起始高度值。</li><li id="8a57" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc jw jx jy jz bi translated">该bool知道玩家是否已经在滚动，以防止在滚动时跳跃和滚动。</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es kf"><img src="../Images/517f93bea15813c473a56dd0e02ac6fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2NyDSF4S4_mfJ9JSu_abbg.png"/></div></div></figure><p id="258e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们从Start中的控制器获得碰撞器中心和高度的初始值。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es kg"><img src="../Images/0672e470e82d75179f6bb9057ec4e92e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dFXuhQW-NA7tKjtF9JAcoA.png"/></div></div></figure><p id="7ede" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当玩家在地面上时，如果按下了左Shift键，但还没有滚动，我们告诉动画制作人播放滚动动画，禁用滚动和跳跃，直到滚动完成，并将碰撞器的中心和高度更改为较小的轮廓。然后，如果玩家在滚动，我们根据玩家面对的方向，从速度中加上或减去滚动力。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es kh"><img src="../Images/473f0176702b74222933a68f8e7fd046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4M5qlpWBUEsU9N-Yx_pwQ.png"/></div></div></figure><p id="7f10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要的最后一件事是一个方法，可以调用它来将rolling bool更改为false，从而允许跳跃和再次滚动，并将碰撞器的中心和高度返回到初始值。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es ki"><img src="../Images/48dca9c27909b8f181e57b149680de8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O4bfiewUIXfpYnuOgOVGHg.png"/></div></div></figure><p id="9a93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在播放器的Animator窗口中，我们需要为Roll添加一个触发参数，以过渡到滚动动画。然后在动画完成后，我们转换回空闲或运行动画。在滚动动画状态下，我们需要添加一个行为脚本。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/812303de26423c202fefa29e164042c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BuA4G7zBMdTJN4D3jflbMA.gif"/></div></div></figure><p id="f6c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在行为脚本中，当滚动动画状态完成并转换到下一个状态时，我们从动画师的父级获取PlayerController脚本，并对其调用Stop Roll方法。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es kj"><img src="../Images/1f15992279e2a6ee946e15485ebec768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FI5Vg4fQlzvR14D7q5ZEFA.png"/></div></div></figure><p id="02d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">玩家现在可以在障碍物下翻滚和移动。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es kk"><img src="../Images/2f3625200e63e211eef4d89d2f97066f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QMLZsexSJ1wrSThNlmQcLA.gif"/></div></div></figure></div></div>    
</body>
</html>