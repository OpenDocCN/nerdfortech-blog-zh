<html>
<head>
<title>useReducer hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">useReducer 挂钩</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/usereducer-hook-3f1788faa682?source=collection_archive---------30-----------------------#2021-05-23">https://medium.com/nerd-for-tech/usereducer-hook-3f1788faa682?source=collection_archive---------30-----------------------#2021-05-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/811af75bd91c1bec2e5d2d481d7decdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*At3q4klf6WVIxo0UqbLjuQ.png"/></div></div></figure><p id="6259" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">到目前为止，你可能已经使用了<strong class="is hj">使用状态</strong>钩子。它用于管理组件范围的状态。同样的任务由<strong class="is hj"> useReducer </strong>钩子完成，它帮助我们管理<strong class="is hj">复杂的状态</strong>，这些状态<strong class="is hj">相互关联</strong>。今天，让我做一个完整的指南，如何使用它。</p><p id="04bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，首先你必须从<strong class="is hj"> react </strong>导入<strong class="is hj"> useReducer </strong>钩子。</p><p id="e1d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">useReducer 中有一些特殊的部分使它从 useState 钩子中脱颖而出，</p><p id="ff03" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">a.<strong class="is hj">调度功能</strong>b .<br/>减速器功能<strong class="is hj"/></p><p id="31fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你已经使用过 redux，你可能对这些词很熟悉。那么，这两个函数做了什么工作呢？</p><p id="02c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这很简单。reducer 函数的使用提供了一个对先前状态快照采取行动并返回新值的地方。还有，dispatch 函数的作用就是说 reducer 函数你接下来要做什么。请参考下面的代码片段。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="69b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的代码中，如果我们深入研究，我们已经根据数组分解方法获取了从 useReducer 函数返回的 inputState 和 dispatchFn(所有挂钩都是函数),并且我们已经解析了两个参数 Reducer 函数和状态的初始值。</p><p id="a681" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的减速器功能中，您可以看到两个参数。state 是前一个状态快照，action 是从调度函数返回的值。现在让我们看看，一旦点击了一个按钮，我们如何调度和操作来将上述状态中的年龄改变一。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="3641" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的 onClick 事件处理函数中，你可以看到我传递了一个类型为 increaseAge 的对象(只能传递 increaseAge，但接下来让我们讨论一下为什么我们需要一个对象)。然后 reducer 函数用一个 if 语句(switch 也是可能的)捕获该动作，并返回所需的值。</p><p id="12ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的例子中，你可能会想为什么我们不能直接做 state.age++而不是一个新的对象。即使它在小的情况下也是有效的，但由于引用类型的障碍(对象是引用类型),这不是正确的方法。它们只在堆中使用指针引用变量的内存值，没有直接的联系。如果 do let obj 2 = obj 1，它只引用指针而不引用内存值。如果你需要做这样的事情，你必须使用深度克隆工具。)</p><p id="d34a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们想捕捉一个输入值，我们需要做什么？让我们看看。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="f346" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的代码片段中，您可以看到我们已经通过 dispatch 函数的值传递了事件值，然后在 reducer 函数中，我们从 action.value 中获取了该值。</p><p id="879c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是 useReducer，希望我能把你带到深水区。</p><p id="81aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">谢谢你！</p></div></div>    
</body>
</html>