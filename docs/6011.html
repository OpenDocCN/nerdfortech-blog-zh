<html>
<head>
<title>What are Side-Effects in Programming?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编程的副作用是什么？</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/what-are-side-effects-in-programming-51f7ef340f98?source=collection_archive---------0-----------------------#2021-12-19">https://medium.com/nerd-for-tech/what-are-side-effects-in-programming-51f7ef340f98?source=collection_archive---------0-----------------------#2021-12-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3047" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你已经开始学习函数式编程，你很可能会经常遇到副作用这个术语。但是你有没有想过这个术语实际上是什么意思？我将试着在这篇文章中揭开它的真正含义。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/8ef027c4301f8e83626f615cab352356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*9PM_GiCwNJ1WLKosUuf2nw.jpeg"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><a class="ae jp" href="https://www.istockphoto.com/" rel="noopener ugc nofollow" target="_blank"> istock </a>上<a class="ae jp" href="https://www.istockphoto.com/portfolio/SPmemory?mediatype=photography" rel="noopener ugc nofollow" target="_blank"> Spmemory </a>拍摄的照片</figcaption></figure><h2 id="d0e8" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">副作用</h2><p id="5d80" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">当一个函数改变一个非局部状态或者当它的输出不确定时，我们说这个函数有副作用。</p><p id="82d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们知道一个函数有它自己的范围，如果我们在它的范围内改变变量是安全的。当它<strong class="ih hj">使用或改变其作用域之外的</strong>东西时，我们称之为副作用，比如通过引用传递的变量、全局变量、从控制台读取用户输入、登录控制台、进行数据库操作等。</p><h2 id="5876" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">1.变异非本地状态</h2><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kq kr l"/></div></figure><p id="3a10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的<em class="ks"> no_of_adds </em>全局变量就像一个计数器，记录 add 函数被调用的次数。</p><h2 id="96dc" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">2.读取非本地状态</h2><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kq kr l"/></div></figure></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><p id="7f92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">全局状态不一定是全局变量，它可以是任何东西。它可以是磁盘中的文件、远程数据库、控制台屏幕等。</p><p id="68a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">是的，数据库写入、打印到控制台等</strong>也被认为是副作用，因为它们改变了外部世界的某些东西。如果你试图写一些东西到你的远程数据库，它不仅取决于你传递的参数，还取决于许多因素，如互联网连接，你拥有的权限，表是否存在，等等<strong class="ih hj">这是不确定的</strong>。</p><p id="ce72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在打印到控制台的情况下，控制台属于您的操作系统，因此写入控制台被视为改变全局状态。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kq kr l"/></div></figure><blockquote class="la"><p id="4f36" class="lb lc hi bd ld le lf lg lh li lj jc dx translated">你可以尝试做一些类似<br/>&gt;&gt;&gt;write todb(" person _ table "，{'name ':'灭霸'，' age': 1001})</p></blockquote><ul class=""><li id="954e" class="lk ll hi ih b ii lm im ln iq lo iu lp iy lq jc lr ls lt lu bi translated">第一次失败是因为您没有对<em class="ks"> person_table </em>的写权限。</li><li id="9599" class="lk ll hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">现在设置了权限，就可以成功地写入表了。</li><li id="9164" class="lk ll hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">现在假设您正在传递相同的参数，这次它失败了，因为您违反了完整性约束。即姓名是主键，灭霸已经存在(您添加的😂)</li><li id="de0c" class="lk ll hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">如你所见，结果不仅取决于传递的参数，还取决于历史和外部环境，而这些可能在我们的控制之内，也可能不在我们的控制之内。</li></ul></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><p id="000f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有副作用的程序变得很难调试，因为程序的行为变得不确定。这就是为什么人们更喜欢编写纯函数(没有副作用的函数)，但是要编写没有任何副作用的真实应用程序几乎是不可能的。</p><h2 id="2425" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">如何处理副作用？</h2><ol class=""><li id="d67d" class="lk ll hi ih b ii kl im km iq ma iu mb iy mc jc md ls lt lu bi translated">尽量把纯函数和不纯函数分开。以便您可以在测试时模仿不纯的函数。</li></ol><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kq kr l"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">我们可以在测试时模拟 getAge()函数。</figcaption></figure><p id="40fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.像 Haskell、Purescript 等许多函数式编程使用的黄金原则是<strong class="ih hj">“使副作用显式”</strong>函数签名本身就告诉我们它有副作用。例如，考虑 Haskell 中用于从用户获取输入的 getLine 函数签名。</p><pre class="je jf jg jh fd me mf mg mh aw mi bi"><span id="f718" class="jq jr hi mf b fi mj mk l ml mm">getLine :: IO String</span></pre><p id="1212" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们在方法签名本身中明确地告诉函数将要执行 IO 操作。因此，使用 getLine()的函数也必须知道它。</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><p id="dc32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，当一个函数依赖于或修改其作用域之外的状态时，就说它有副作用。即使不可能编写没有副作用的真实世界的应用程序，我们也必须小心处理它们，以避免数小时的调试，或者如果可能的话，使用函数式编程语言，使程序员在处理副作用时更加自律。程序员很难总是遵守纪律，因为我们有截止日期😵‍💫，所以尽可能选择 FP。</p><p id="5bce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">非常感谢您的阅读。拍手声👏如果你喜欢这篇文章，请在评论区分享你的想法。</p></div></div>    
</body>
</html>