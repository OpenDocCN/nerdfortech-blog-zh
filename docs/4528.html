<html>
<head>
<title>Building Pong with Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Javascript构建Pong</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/building-pong-with-javascript-c0dd0ab79c9c?source=collection_archive---------1-----------------------#2021-07-25">https://medium.com/nerd-for-tech/building-pong-with-javascript-c0dd0ab79c9c?source=collection_archive---------1-----------------------#2021-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3a45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个如何用HTML、CSS和JS构建Pong的指南。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/b4d32c10a0b7b6688cdea1edb9271fd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IJi0WsDQpWU8UB-MFMt3tg.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图片由<a class="ae jt" href="https://pixabay.com/users/startupstockphotos-690514/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=593354" rel="noopener ugc nofollow" target="_blank"> StartupStockPhotos </a>来自<a class="ae jt" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=593354" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><p id="6f37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为一名刚刚毕业的软件专业学生，我一直忙于申请工作、建立关系网和学习新技术。这个周末，我决定做一些有趣的事情，保持我的求职相对高效，所以我用香草JS制作了一个pong游戏，我玩得很开心。</p><p id="07ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我从头到尾记录了代码，这样我就可以和像我一样热爱游戏的开发人员分享，如果你想学习如何只用HTML、CSS和JS构建Pong，我就创建了这个指南。</p><p id="518e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><h1 id="5d2b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">装置</h1><p id="3deb" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">让我们从使用终端创建一个包含样板文件的文件夹开始</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="b67b" class="lc jv hi ky b fi ld le l lf lg">mkdir pong-app<br/>cd pong-app<br/>touch index.html<br/>touch game.js<br/>touch game.css</span></pre><p id="6010" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们进入我们的html文件，如果你像我一样使用VScode，你可以简单地输入html，emmet将为你构建html模板，然后我们在HTML头中添加一个链接到我们的样式表，并在我们的正文中添加game.js脚本</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="3427" class="lc jv hi ky b fi ld le l lf lg">&lt;!DOCTYPE html&gt;</span><span id="65ea" class="lc jv hi ky b fi lh le l lf lg">&lt;html lang="en"&gt;<br/>&lt;head&gt;</span><span id="661c" class="lc jv hi ky b fi lh le l lf lg">&lt;meta charset="UTF-8"&gt;<br/>&lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>&lt;title&gt;Pong Game&lt;/title&gt;<br/>&lt;link rel="stylesheet" href="game.css"&gt;</span><span id="d8cb" class="lc jv hi ky b fi lh le l lf lg">&lt;/head&gt;</span><span id="fd77" class="lc jv hi ky b fi lh le l lf lg">&lt;body&gt;</span><span id="462b" class="lc jv hi ky b fi lh le l lf lg">&lt;script src="game.js"&gt;&lt;/script&gt;</span><span id="0650" class="lc jv hi ky b fi lh le l lf lg">&lt;/body&gt;</span><span id="334f" class="lc jv hi ky b fi lh le l lf lg">&lt;/html&gt;</span></pre><p id="7506" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们设置一些简单的css代码</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="8f66" class="lc jv hi ky b fi ld le l lf lg">//css code</span><span id="2f22" class="lc jv hi ky b fi lh le l lf lg">body {</span><span id="d596" class="lc jv hi ky b fi lh le l lf lg">margin: 0;</span><span id="de49" class="lc jv hi ky b fi lh le l lf lg">background-color: rgb(39, 39, 39);</span><span id="b300" class="lc jv hi ky b fi lh le l lf lg">display: flex;</span><span id="6759" class="lc jv hi ky b fi lh le l lf lg">justify-content: center;</span><span id="923c" class="lc jv hi ky b fi lh le l lf lg">font-family: "Courier New", Courier, monospace;</span><span id="f13b" class="lc jv hi ky b fi lh le l lf lg">width: 100vw;</span><span id="cddc" class="lc jv hi ky b fi lh le l lf lg">height: 100vh;</span><span id="6f59" class="lc jv hi ky b fi lh le l lf lg">}</span></pre><p id="5e12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我选择这个灰色作为我的背景，但是如果你想要一个不同的配色方案，你可以随时更改应用程序背景颜色的值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/a8cc91ad3053c1901ec5176c0e2e1675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XoEorPeLhdt0hc1-wtmDIQ.png"/></div></div></figure><p id="35ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是时候开始编码了，下一步是为我们的游戏创建一个画布，你可以看看下面的代码，让我们看看结果。</p><p id="89c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不熟悉画布，你可以看看W3School的这个<a class="ae jt" href="https://www.w3schools.com/graphics/canvas_reference.asp" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="35e8" class="lc jv hi ky b fi ld le l lf lg">const { body } = document</span><span id="ca6d" class="lc jv hi ky b fi lh le l lf lg">//canvas code</span><span id="8849" class="lc jv hi ky b fi lh le l lf lg">const canvas = document.createElement('canvas')</span><span id="b458" class="lc jv hi ky b fi lh le l lf lg">const context = canvas.getContext('2d')</span><span id="17e5" class="lc jv hi ky b fi lh le l lf lg">const width = 500</span><span id="97dc" class="lc jv hi ky b fi lh le l lf lg">const height = 700</span><span id="c59e" class="lc jv hi ky b fi lh le l lf lg">const screenWidth = window.screen.width</span><span id="801d" class="lc jv hi ky b fi lh le l lf lg">const canvasPosition = screenWidth / 2 - width / 2</span><span id="3ffe" class="lc jv hi ky b fi lh le l lf lg">const isMobile = window.matchMedia('(max-width: 600px)')</span><span id="a370" class="lc jv hi ky b fi lh le l lf lg">//generating canvas</span><span id="2dcb" class="lc jv hi ky b fi lh le l lf lg">const renderCanvas = () =&gt; {</span><span id="5898" class="lc jv hi ky b fi lh le l lf lg">    context.fillStyle = 'black'</span><span id="5efb" class="lc jv hi ky b fi lh le l lf lg">    context.fillRect( 0, 0, width, height)</span><span id="47ab" class="lc jv hi ky b fi lh le l lf lg">}</span><span id="a881" class="lc jv hi ky b fi lh le l lf lg">const createCanvas = () =&gt; {</span><span id="701f" class="lc jv hi ky b fi lh le l lf lg">    canvas.width = width</span><span id="59da" class="lc jv hi ky b fi lh le l lf lg">    canvas.height = height</span><span id="2e5e" class="lc jv hi ky b fi lh le l lf lg">    body.appendChild(canvas)</span><span id="bd0f" class="lc jv hi ky b fi lh le l lf lg">    renderCanvas()</span><span id="73b0" class="lc jv hi ky b fi lh le l lf lg">}</span><span id="46ae" class="lc jv hi ky b fi lh le l lf lg">createCanvas()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lj"><img src="../Images/f55cd594def57a01fd1d3249f8ad2cae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZiQWrxyEkcmzykP13SgAw.png"/></div></div></figure><p id="2d34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这看起来棒极了！我们现在得到了正确的画布渲染。</p><p id="0f35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们要写桨的逻辑，如大小和定位。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="722a" class="lc jv hi ky b fi ld le l lf lg">//paddle code</span><span id="180c" class="lc jv hi ky b fi lh le l lf lg">const paddleHeight = 10<br/>const paddleWidth = 50<br/>let paddleBottomX = 225<br/>let paddleTopx = 225</span></pre><p id="c8af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这应该通过设置桨的大小并将其放置在中间来处理画布的桨，请记住，由于桨的宽度为50，因此500宽度的中间值将是225，与桨的偏移量为50。</p><p id="4962" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，让我们在渲染函数中不用桨来填充画布</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="9f9b" class="lc jv hi ky b fi ld le l lf lg">const renderCanvas = () =&gt; {</span><span id="6469" class="lc jv hi ky b fi lh le l lf lg">//canvas background<br/>context.fillStyle = 'black'<br/>context.fillRect( 0, 0, width, height)</span><span id="0a4b" class="lc jv hi ky b fi lh le l lf lg">//paddle color<br/>context.fillStyle = 'white</span><span id="398a" class="lc jv hi ky b fi lh le l lf lg">//player paddle<br/>context.fillRect(paddleBottomX, height - 20, paddleWidth, paddleHeight)</span><span id="4ef6" class="lc jv hi ky b fi lh le l lf lg">//bot paddle<br/>context.fillRect(paddleTopX, 10, paddleWidth, paddleHeight)</span><span id="f138" class="lc jv hi ky b fi lh le l lf lg">}</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/ad9999f91fc0b4a1e8510af2809fb2d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YiMZB3b0PDaJuc_CJlTf5A.png"/></div></div></figure><p id="27b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧啊。我们有了桨，接下来我们想通过设置从左到右的笔画路径来设置画布的中点。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="a146" class="lc jv hi ky b fi ld le l lf lg">//render function</span><span id="c1e1" class="lc jv hi ky b fi lh le l lf lg">//middle line<br/>context.beginPath()<br/>context.setLineDash([4])<br/>context.moveTo(0, 350)<br/>context.lineTo(500,350)<br/>context.strokeStyle = 'lime'<br/>context.stroke()</span></pre><p id="b147" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我将线条定位在画布的中间，并将颜色设置为复古的酸橙绿色。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/eb1f1d78a1c2b81328231e85014b2635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2zfHIB3Fqdjmlw_lpsvSXQ.png"/></div></div></figure><p id="b243" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们在全局变量中创建球逻辑，因为球的x和y坐标会改变。然后，我们更新渲染函数，为我们渲染一个圆球。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="2952" class="lc jv hi ky b fi ld le l lf lg">//global variables</span><span id="a49c" class="lc jv hi ky b fi lh le l lf lg">let ballX = 250<br/>let ballY = 350<br/>const ballRadius = 5</span><span id="0303" class="lc jv hi ky b fi lh le l lf lg">// in render function</span><span id="2694" class="lc jv hi ky b fi lh le l lf lg">//ball</span><span id="6352" class="lc jv hi ky b fi lh le l lf lg">context.beginPath()<br/>context.arc(ballX, ballY, ballRadius, 2 * Math.PI, false)<br/>context.fillStyle = 'white'<br/>context.fill()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/7363db0efc4744a7b140a4d1450f06b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2EYOQcAkHoDLK1FfCo8Rg.png"/></div></div></figure><p id="e507" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在球已经渲染好了，我将为玩家和我们的机器人设置一个默认分数，并在全局变量中设置获胜分数。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="2b23" class="lc jv hi ky b fi ld le l lf lg">//globally<br/>// score</span><span id="3001" class="lc jv hi ky b fi lh le l lf lg">let playerScore = 0<br/>let botScore = 0</span><span id="79c9" class="lc jv hi ky b fi lh le l lf lg">const winningScore = 7</span><span id="a479" class="lc jv hi ky b fi lh le l lf lg">//in render function<br/>// score</span><span id="9d03" class="lc jv hi ky b fi lh le l lf lg">context.font = '32px Courier New'<br/>context.fillText(playerScore, 20, canvas.height / 2 + 50)<br/>context.fillText(botScore, 20, canvas.height / 2 - 30)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lj"><img src="../Images/960dabfccb45a9acb17ce9824cfa35ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wgZNd76Ptb3n3CQtd-xKvQ.png"/></div></div></figure><p id="781f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在画布已经完成了，我又回到了refractor，创建了一个启动游戏功能来重置分数，启动画布功能和动画功能。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/6130123554e552f8cfa2e97b643130de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*evrsOF3QXXFnfki0DCViaQ.png"/></div></div></figure><p id="955b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在左边看到更新的代码，画布仍然在那里，所以我们知道它工作正常。</p><p id="cf6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们要处理游戏逻辑，我们从全局设置球速开始。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="9ee8" class="lc jv hi ky b fi ld le l lf lg">//global variable</span><span id="eeef" class="lc jv hi ky b fi lh le l lf lg">let speedY = -1<br/>let speedX = speedY<br/>let computerSpeed = 3</span></pre><p id="a225" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们编写一个函数让球移动，并在我们的动画函数中调用它。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="9be1" class="lc jv hi ky b fi ld le l lf lg">const ballMove = () =&gt; {<br/>// Vertical Speed<br/>ballY += - speedY</span><span id="ff94" class="lc jv hi ky b fi lh le l lf lg">// Horizontal Speed<br/>if (playerMoved &amp;&amp; paddleContact) {</span><span id="df02" class="lc jv hi ky b fi lh le l lf lg">  ballX += speedX</span><span id="a216" class="lc jv hi ky b fi lh le l lf lg">  }<br/>}</span></pre><p id="56f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们为游戏创建一个球重置函数。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="fe0c" class="lc jv hi ky b fi ld le l lf lg">const ballReset = () =&gt; {</span><span id="e7ef" class="lc jv hi ky b fi lh le l lf lg">ballX = width / 2</span><span id="d550" class="lc jv hi ky b fi lh le l lf lg">ballY = height / 2</span><span id="601d" class="lc jv hi ky b fi lh le l lf lg">speedY = -3</span><span id="304c" class="lc jv hi ky b fi lh le l lf lg">paddleContact = false</span><span id="6902" class="lc jv hi ky b fi lh le l lf lg">}</span></pre><p id="8835" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我们继续讨论球的边界，以决定是玩家得分还是你的机器人得分，并在animate函数中调用这个函数</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="ba66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们想要构建泰伯，我们可以通过一个简单的函数让机器人跟随球来实现。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="efc9" class="lc jv hi ky b fi ld le l lf lg">const botAI = () =&gt; {</span><span id="72c0" class="lc jv hi ky b fi lh le l lf lg">  if (playerMoved) {</span><span id="353c" class="lc jv hi ky b fi lh le l lf lg">    if (paddleTopX + paddleDiff &lt; ballX) {</span><span id="a574" class="lc jv hi ky b fi lh le l lf lg">      paddleTopX += computerSpeed</span><span id="a4cd" class="lc jv hi ky b fi lh le l lf lg">    } else {</span><span id="9c94" class="lc jv hi ky b fi lh le l lf lg">      paddleTopX -= computerSpeed</span><span id="c55f" class="lc jv hi ky b fi lh le l lf lg">    }</span><span id="a56a" class="lc jv hi ky b fi lh le l lf lg">  }</span><span id="4b75" class="lc jv hi ky b fi lh le l lf lg">}</span></pre><p id="2bf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你完成了游戏逻辑的构建，你的动画函数应该包含我们刚刚构建的游戏逻辑以及运行它的频率，接下来我们可以使用window.requestAnimationFrame来调用我们的动画函数，每一帧调用一次，每秒60帧。如果没有60fps的流畅度，这就不是一个玩家制作的游戏了。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ln lm l"/></div></figure><p id="4be9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧啊。球正在正确地运动！我们的下一步是通过在逻辑上写游戏来完成游戏逻辑。</p><p id="5b3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先我们要全局声明这个游戏是一个新游戏，是一个游戏开始/结束逻辑。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="9cec" class="lc jv hi ky b fi ld le l lf lg">///global variables<br/>//score<br/>let isNewGame = true<br/>let isGameOver = true</span></pre><p id="38de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们在startGame函数中添加'<em class="lo"> isGameOver = false' </em>,以在游戏开始时将游戏设置为正在运行。</p><p id="2c34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们想写一个游戏结束函数，当获胜分数达到时停止游戏，我们在动画函数中调用这个函数。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="5a6c" class="lc jv hi ky b fi ld le l lf lg">const gameOver = () =&gt; {</span><span id="2228" class="lc jv hi ky b fi lh le l lf lg">  if(playerScore === winningScore || botScore === winningScore) {</span><span id="848c" class="lc jv hi ky b fi lh le l lf lg">    isGameOver = true</span><span id="cf83" class="lc jv hi ky b fi lh le l lf lg">  }<br/>}</span></pre><p id="3def" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在如果你测试游戏，一旦玩家或机器人达到7分，它就会停止。</p><p id="6fd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们通过在文档中创建一个包含游戏结束消息的元素来创建一个空的div。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="519f" class="lc jv hi ky b fi ld le l lf lg">const gameOverDiv = document.createElement('div')</span></pre><p id="b057" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们创建了一个显示游戏消息的函数，它隐藏了我们的画布，并添加了另一个带有胜利消息的div，我们还创建了一个带有onclick侦听器的按钮，以便在游戏被单击后再次运行游戏。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="6940" class="lc jv hi ky b fi ld le l lf lg">const showGameOverMsg = (winner) =&gt; {</span><span id="bb17" class="lc jv hi ky b fi lh le l lf lg">//hide canvas</span><span id="028d" class="lc jv hi ky b fi lh le l lf lg">canvas.hidden = true</span><span id="8bfb" class="lc jv hi ky b fi lh le l lf lg">gameOverDiv.textContent = ''</span><span id="206b" class="lc jv hi ky b fi lh le l lf lg">const title = document.createElement('h1')</span><span id="78b5" class="lc jv hi ky b fi lh le l lf lg">title.textContent = `${winner} Wins!!!`</span><span id="59e3" class="lc jv hi ky b fi lh le l lf lg">const playAgainBtn = document.createElement('button')</span><span id="4a5e" class="lc jv hi ky b fi lh le l lf lg">playAgainBtn.setAttribute('onclick', 'startGame()')</span><span id="bfee" class="lc jv hi ky b fi lh le l lf lg">playAgainBtn.textContent = 'Play Again'</span><span id="71e1" class="lc jv hi ky b fi lh le l lf lg">gameOverDiv.append(title, playAgainBtn)</span><span id="d8d1" class="lc jv hi ky b fi lh le l lf lg">body.appendChild(gameOverDiv)</span><span id="2777" class="lc jv hi ky b fi lh le l lf lg">}</span></pre><p id="967e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经完成了在startGame函数中添加游戏的逻辑。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="5c76" class="lc jv hi ky b fi ld le l lf lg">//inside startGame function</span><span id="9aa8" class="lc jv hi ky b fi lh le l lf lg">if (isGameOver &amp;&amp; !isNewGame) {</span><span id="bfe7" class="lc jv hi ky b fi lh le l lf lg">body.removeChild(gameOverDiv)</span><span id="8592" class="lc jv hi ky b fi lh le l lf lg">canvas.hidden = false</span><span id="46b3" class="lc jv hi ky b fi lh le l lf lg">}</span><span id="66b2" class="lc jv hi ky b fi lh le l lf lg">isGameOver = false</span><span id="c513" class="lc jv hi ky b fi lh le l lf lg">isNewGame = false</span></pre><p id="8284" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！我们都完了！花了一段时间，但如果你按照这篇文章正确，一切都应该工作。你可以在这里看到我部署的示例<a class="ae jt" href="https://stevens-pong-app.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"/>，我目前部署的pong游戏在移动设备上有点问题，但在桌面上应该运行良好，让我们开始pc大师赛吧！它可能看起来与你的略有不同，这取决于你如何做CSS，如果你需要检查代码，这里是<a class="ae jt" href="https://github.com/StevenWuTG/pong-game-js" rel="noopener ugc nofollow" target="_blank"> github repo </a>。</p><p id="a29a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读，如果您喜欢并关注更多编码和技术内容，请留下您的评论。</p></div></div>    
</body>
</html>