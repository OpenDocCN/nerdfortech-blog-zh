<html>
<head>
<title>Loading scenes in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Unity 中加载场景</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/loading-scenes-in-unity-5d8bedc0a55?source=collection_archive---------12-----------------------#2021-05-24">https://medium.com/nerd-for-tech/loading-scenes-in-unity-5d8bedc0a55?source=collection_archive---------12-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="ffe7" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="409c" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何在 Unity 中加载场景的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/f1f5351081d4b16c9bbe5af0873a1d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9CRKfo2XQrnvneAD4sMvsQ.gif"/></div></div></figure><p id="6052" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在 Unity 中加载一个太空射击游戏的场景，重启游戏。</p><p id="3f3a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在我们已经<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-a-retro-game-over-behavior-in-unity-fb126c76c4bf">在太空射击游戏中实现了一个复古游戏行为</a>，让我们添加一个当玩家被摧毁时重启游戏的功能。</p><p id="6ca8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了增加这个功能，让我们<a class="ae ko" rel="noopener" href="/nerd-for-tech/creating-ui-elements-in-unity-a778929eacfa">创建一个新的 UI 元素</a>，让玩家知道游戏结束后如何重启关卡。重启游戏的一种方法是加载相同的游戏场景，我们可以在玩家按下一个键时触发它:</p><div class="jh ji jj jk fd ab cb"><figure class="kp jl kq kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/28a4b96489eb7deec059e3b17fe64ee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*iPf27idX5PMj6uTGz5Woeg.png"/></div></figure><figure class="kp jl kv kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a447b315338a9f752aff8e61240c92c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1414/1*yLgAytMwgHYT3Jm7QrMw_A.gif"/></div><figcaption class="kw kx et er es ky kz bd b be z dx la di lb lc translated">在画布中使用文本元素让玩家知道如何重新开始游戏。</figcaption></figure></div><p id="56e9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了实现重启特性，我们需要创建一个新的脚本来控制游戏流程。让我们创建一个空的游戏对象，并附上新的脚本:</p><div class="jh ji jj jk fd ab cb"><figure class="kp jl ld kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a42f54c79ed0f6e48ca38118b9c6883b.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/1*49nMQ5qQ7hv178uQ5PyLKg.gif"/></div></figure><figure class="kp jl le kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/6236c4e031b79371eb317f666b58375f.png" data-original-src="https://miro.medium.com/v2/resize:fit:388/1*Z9iseur7CIMVVnygyXC5Ag.gif"/></div></figure><figure class="kp jl lf kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/9718a6cdffcc9c14952f554996519b0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*cflR8TFjeYPuxBJn-7hPPQ.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx lg di lh lc translated">在 Unity 中，游戏管理器通常用于控制游戏流程。正如你所看到的，当我们创建一个名为 GameManager 的脚本时，一个齿轮图标出现了，因为它是 Unity 中的一个特殊名称。</figcaption></figure></div><h1 id="fe16" class="li lj hi bd lk ll lm ln lo lp lq lr ls ix lt iy lu ja lv jb lw jd lx je ly lz bi translated">加载场景</h1><p id="c36b" class="pw-post-body-paragraph js jt hi ju b jv ma is jx jy mb iv ka kb mc kd ke kf md kh ki kj me kl km kn hb bi translated">打开<strong class="ju hs">游戏管理器</strong>脚本，在脚本顶部添加<strong class="ju hs">场景管理</strong>类。我们需要这个类在运行时处理场景管理。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mf"><img src="../Images/f495673158fb3194f7448eb7d5c75053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/1*11-4wB3w8NyxXT1l39N_PA.gif"/></div></figure><p id="1c9e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们创建一个新的 bool 来知道游戏是否已经结束:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mg"><img src="../Images/02f867ccc532e47be5cbdfd25eb9ccd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/1*X_9TlGmZmalSSTTFyX0kRA.gif"/></div></figure><p id="195c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了在游戏结束时更改 bool 值，让我们创建一个公共函数:</p><div class="jh ji jj jk fd ab cb"><figure class="kp jl mh kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/826af51aecdae7e7e8a3b4812c35cd9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/1*bPrSlYCltQMVnptaeB50mw.gif"/></div></figure><figure class="kp jl mi kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a82ec36f1eeb4d8ce4f4a07eca80c58e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/1*XQlD_-WkhgTQIkxPn4Ujag.gif"/></div></figure></div><p id="5345" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了处理来自玩家的输入，让我们在<strong class="ju hs"> Update </strong>函数中添加一个条件，该条件将检查 R 键是否被按下以及游戏是否已经结束:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mj"><img src="../Images/2543625f119ed18906d603be11d93612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/1*s0yyRu7ncs8YCJ8CUNbD_Q.gif"/></div></figure><p id="5b13" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了重新加载场景，我们可以使用来自<strong class="ju hs"> SceneManager </strong>类的<strong class="ju hs"> LoadScene </strong>方法，但是我们需要指定正确的参数来加载所需的场景。我们可以通过以下方式选择场景:</p><ul class=""><li id="a9e6" class="mk ml hi ju b jv jw jy jz kb mm kf mn kj mo kn mp mq mr ms bi translated">发送场景的名称或路径。</li><li id="2f63" class="mk ml hi ju b jv mt jy mu kb mv kf mw kj mx kn mp mq mr ms bi translated">发送场景的构建索引(在构建设置中找到)。</li></ul><blockquote class="my mz na"><p id="ac61" class="js jt nb ju b jv jw is jx jy jz iv ka nc kc kd ke nd kg kh ki ne kk kl km kn hb bi translated"><em class="hi">注意:我们也可以使用</em><strong class="ju hs"><em class="hi">LoadSceneAsync</em></strong><em class="hi">方法来避免加载场景时的性能问题，但我可能会在另一篇文章中讨论它。</em></p></blockquote><h2 id="1def" class="nf lj hi bd lk ng nh ni lo nj nk nl ls kb nm nn lu kf no np lw kj nq nr ly ho bi translated">按名称加载场景</h2><p id="3eb4" class="pw-post-body-paragraph js jt hi ju b jv ma is jx jy mb iv ka kb mc kd ke kf md kh ki kj me kl km kn hb bi translated">要使用名称加载场景，我们需要在 Unity 中标识名称，并在<strong class="ju hs"> LoadScene </strong>方法中发送一个字符串:</p><div class="jh ji jj jk fd ab cb"><figure class="kp jl ns kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/de2dded3cb6372f2b003478278643f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*mKcwGiPZm0Rlkc1_io_w4w.png"/></div></figure><figure class="kp jl nt kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/33e475fb37e67b15771ed14b78fa1685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/1*0V003Uo4cBxpYQBEDAV94A.gif"/></div><figcaption class="kw kx et er es ky kz bd b be z dx nu di nv lc translated">场景名称是<strong class="bd lk"> <em class="nw">游戏</em> </strong> <em class="nw">。</em></figcaption></figure></div><h2 id="ddb3" class="nf lj hi bd lk ng nh ni lo nj nk nl ls kb nm nn lu kf no np lw kj nq nr ly ho bi translated">通过构建索引加载场景</h2><p id="af9a" class="pw-post-body-paragraph js jt hi ju b jv ma is jx jy mb iv ka kb mc kd ke kf md kh ki kj me kl km kn hb bi translated">要通过构建索引加载场景，我们需要确保场景包含在构建设置中。我们可以选择用右边的按钮添加当前打开的场景，或者我们可以将它从文件中拖到构建设置中。一旦我们添加了场景，我们将在右边看到构建索引，我们需要在<strong class="ju hs"> LoadScene </strong>方法中发送它:</p><div class="jh ji jj jk fd ab cb"><figure class="kp jl nx kr ks kt ku paragraph-image"><img src="../Images/757f07756b53234db0f29ae92eabe84c.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/1*kYXb7vOiC_6VJK7Kn2Palg.gif"/></figure><figure class="kp jl ny kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/365c9568d2b25ed8a6c3c5ca045e7251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/1*GE-Ai02ObiwyDC-kZufkLg.gif"/></div></figure></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nz"><img src="../Images/be476bf778b3bca75970b9bd686a0f3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SKSXTATpOwN1ziilklWl2w.gif"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx translated">场景的建造指数为<strong class="bd lk"> 0 </strong>。</figcaption></figure><h1 id="1e58" class="li lj hi bd lk ll lm ln lo lp lq lr ls ix lt iy lu ja lv jb lw jd lx je ly lz bi translated">执行场景加载</h1><p id="3921" class="pw-post-body-paragraph js jt hi ju b jv ma is jx jy mb iv ka kb mc kd ke kf md kh ki kj me kl km kn hb bi translated">现在，为了触发场景加载，我们可以打开<strong class="ju hs"> UI 管理器</strong>脚本并创建一个新变量来存储对附加到游戏管理器游戏对象的<strong class="ju hs">游戏管理器</strong>脚本组件的引用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es oa"><img src="../Images/1b186282569afdf4a00b539c8442e3b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/1*JRMP0WIO93cgVYNv4rmHAg.gif"/></div></figure><p id="aac7" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">让我们找到<strong class="ju hs"> Start </strong>函数中的脚本组件引用，并将其分配给变量，检查它是否为空，以打印一条错误消息，这是一个好的做法:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ob"><img src="../Images/3782f0e77c297093178a44cee3df4e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*66pF7fr1y6KT4kwU_VgWCA.gif"/></div></div></figure><p id="f701" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，在显示游戏结束警告的函数中，让我们从<strong class="ju hs">游戏管理器</strong>脚本中调用<strong class="ju hs"> GameOver </strong>函数来指示游戏结束:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es oc"><img src="../Images/5cb47c8922ae9811a986819aab46ce77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*S3gDYLrzxQH2OOkIm9Wl9w.gif"/></div></div></figure><p id="8457" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们在 Unity 中运行游戏，我们会看到当玩家被摧毁后按下 R 键时，我们可以重新加载游戏场景:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/cf089f0dc2597fe18b02b8f18a93c7de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mWl68UvACuWFEhL9E7edzQ.gif"/></div></div></figure><p id="2846" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就是这样，你可以在 Unity 中加载你的场景！:d .我会在下一篇文章中看到你，在那里我将展示如何用 Unity 在太空射击游戏中制造敌人爆炸。</p></div><div class="ab cl od oe gp of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="hb hc hd he hf"><blockquote class="my mz na"><p id="17b4" class="js jt nb ju b jv jw is jx jy jz iv ka nc kc kd ke nd kg kh ki ne kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>