<html>
<head>
<title>Galaxy Shooter 2D — Camera Shake</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">银河射手 2D——相机抖动</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/galaxy-shooter-2d-camera-shake-21-f88583db0779?source=collection_archive---------38-----------------------#2021-05-29">https://medium.com/nerd-for-tech/galaxy-shooter-2d-camera-shake-21-f88583db0779?source=collection_archive---------38-----------------------#2021-05-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="50be" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">增加伤害反应的冲击力和强度！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/08be1d594e7659701961cbbe157496fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SxwApUDZGzxQVPQQ7nO6Kw.gif"/></div></div></figure><p id="7fdf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">视频游戏中经常使用相机抖动来增加游戏的感觉，强化某些动作，增加沉浸感。这是一个混乱的细节，但却是一个改善玩家体验的微妙细节(当它没有被过度使用或处理不当时)。</p><p id="785f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当玩家被击中时，我使用相机抖动，随着 VFX 伤害增加强度。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="c4ff" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">设置</h1><p id="ffc1" class="pw-post-body-paragraph jj jk hi jl b jm le ij jo jp lf im jr js lg ju jv jw lh jy jz ka li kc kd ke hb bi translated">要摇动相机，我需要修改相机的变换位置，但这样做会阻止我移动它(它会不断地将相机的位置覆盖回摇动的值)。</p><p id="2a9d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了解决这个问题，相机将是一个空游戏对象的子游戏对象，我将它命名为 CameraContainer，在那里将发生抖动。这样，相机将能够自由移动，并保持从父游戏对象的抖动。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lj"><img src="../Images/36b90d6435faeb1a3371880ddb31df29.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*dr1VIg9Kx2oD4TsXXemPsw.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/8c6168e1c576789580e81b308e8580d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-2eAn9PlFFlKSQAKjgVorw.png"/></div></div></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="40ee" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">震动</h1><p id="3b06" class="pw-post-body-paragraph jj jk hi jl b jm le ij jo jp lf im jr js lg ju jv jw lh jy jz ka li kc kd ke hb bi translated">为了正确地摇动相机，我至少需要两个变量或值:摇动相机的随机方向和摇动的强度。</p><p id="115f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了在任何方向随机移动相机，我首先使用了 Random。返回-1 和 1 之间的随机值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ll"><img src="../Images/146a8cd87dc6172b3ec1d054ebcaa69b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XRryACkEUDB_wuXgqutLHg.png"/></div></div></figure><p id="e2f0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这种方法的问题是运动不平稳。在较高的值，这很容易被注意到，它是混乱的，有点令人不快。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d91b9e43273aa8cda94ff3e93ad9cb99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nepy30CGeYznlgQDdaoqww.gif"/></div></div></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="484f" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated"><strong class="ak">平稳摇动</strong></h1><blockquote class="lm ln lo"><p id="4e15" class="jj jk lp jl b jm jn ij jo jp jq im jr lq jt ju jv lr jx jy jz ls kb kc kd ke hb bi translated"><a class="ae lt" href="https://docs.unity3d.com/ScriptReference/Mathf.PerlinNoise.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj"> Unity API: </strong> Mathf。柏林噪声</a></p></blockquote><p id="b8f7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">通过使用柏林噪声，它可以生成一个保持连续性的随机值，它非常适合我试图实现的目标:平滑的抖动。</p><p id="c50b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">PerlinNoise 接受两个参数:X 和 Y 值。它所做的是生成一个 2D 柏林噪声纹理，寻找给定坐标的灰度值，并返回该值，范围在 0 和 1 之间(纯黑、所有灰色阴影和纯白)。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lu"><img src="../Images/71ad261e208a8119580aa61c22bddd87.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/0*VHkU3Zic98HgsmNc.png"/></div></figure><p id="d1d9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我将使用 X 参数设置一个“随机”的固定种子，使用 Y 参数使用<strong class="jl hj"> <em class="lp"> Time.time </em> </strong>在纹理中不断移动。在轴之间设置不同的 X 值非常重要，否则整个运动将在同一方向同步。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/98ad7ec83154eea151e96b760ab18af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*rdA_WTgZ-lnGnaxY7fm7XQ.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">此外，该数值范围并不理想，因为这意味着它不会向轴的负方向移动。为了解决这个问题，我们将 PerlinNoise 的值乘以 2，然后减去 1，将其转换为-1…1。</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/3abf8e70f5945f65e1e5307c9fca7af9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rIEfrB36B_ct2vv6rEumzw.gif"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">如果我们在 X，Y，Z 柏林噪声中设置相同的 X 值，就会发生这种情况</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/c86a1aff452388c7f2d62141403f0b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uLHTgErAyKnX9O-kGjI72A.gif"/></div></div></figure><p id="c30a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这样好多了，但是移动相当慢，而且是因为 Y 参数(<strong class="jl hj"> <em class="lp"> Time.time </em> </strong>)滚动太慢。添加一个新的变量“shakeFrequency”并将其乘以 Y 参数将解决这个问题。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ma"><img src="../Images/813352459242b9749565911a1985c6ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cL78T__sRy5AeFs7pBGpHQ.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/ab705e781550b5a3c77f86df50365ff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YmAu_8CIpFHiS3t6erZepQ.gif"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">频率设置为 8。这样不是感觉好多了吗？</figcaption></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="c9da" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">更多改进</h1><p id="039d" class="pw-post-body-paragraph jj jk hi jl b jm le ij jo jp lf im jr js lg ju jv jw lh jy jz ka li kc kd ke hb bi translated">这篇文章有点长，所以，我把我做的其他改进列在这里(你也可以做):</p><ul class=""><li id="5054" class="mb mc hi jl b jm jn jp jq js md jw me ka mf ke mg mh mi mj bi translated">脚本还可以抖动相机的旋转。</li><li id="471d" class="mb mc hi jl b jm mk jp ml js mm jw mn ka mo ke mg mh mi mj bi translated">从更新切换到协程，以避免每帧执行代码。</li><li id="c2ed" class="mb mc hi jl b jm mk jp ml js mm jw mn ka mo ke mg mh mi mj bi translated">设置最大平移/旋转量，以避免相机过度抖动。</li><li id="bb20" class="mb mc hi jl b jm mk jp ml js mm jw mn ka mo ke mg mh mi mj bi translated">添加创伤和创伤衰减(这是介于 0 和 1 之间的相机抖动量)。</li><li id="e329" class="mb mc hi jl b jm mk jp ml js mm jw mn ka mo ke mg mh mi mj bi translated">通过动画曲线修改创伤值，使抖动更加平滑。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/31f535eccc62ca13f3e29e714d0bc4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RoZ2otiyq8lba_VSStKnJA.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/edc7cb68ab5b255081cb0c256aa89ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-hI6QzDh-ZA3YNA4yZYrBg.png"/></div></div></figure></div></div>    
</body>
</html>