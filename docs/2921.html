<html>
<head>
<title>Getting Started with Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redux入门</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/getting-started-with-redux-992abdf4e8e9?source=collection_archive---------31-----------------------#2021-05-23">https://medium.com/nerd-for-tech/getting-started-with-redux-992abdf4e8e9?source=collection_archive---------31-----------------------#2021-05-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4d29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">状态管理是任何应用程序的一个关键方面。应用程序的状态是应用程序中任何时间点的值。应用程序中状态的一个常见示例是，当有一个简单的表单时，每个表单输入框中的初始值将是一个空字符串，一旦用户在框中键入输入，状态就会发生变化，状态中的值也会发生变化。</p><p id="fbc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每当用户与应用程序进行交互时，许多值都有可能改变，并且会对状态产生影响。在一个小的应用程序中，比如一个简单的表单，跟踪这些状态变化是相当容易的。随着应用程序的增长，跟踪在应用程序的各个部分和应用程序的不同功能中使用和更改的状态会变得更加困难。</p><p id="0679" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决这个问题，状态管理变得很重要。Redux库就是这样一个流行的状态管理工具。</p><p id="aa4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux库可以用于各种前端框架。在Redux库中，编排状态管理的三个主要部分是<strong class="ih hj"> <em class="jd">、存储、缩减器和动作</em> </strong>。</p><h1 id="a6ea" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">商店</h1><p id="751e" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">编排状态管理的第一部分是存储。存储将保存状态和负责更改、监听和检索状态的代码。通过从Redux库中调用create store函数并传入一个reducer函数来创建一个存储。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="85e0" class="kq jf hi km b fi kr ks l kt ku">import { createStore } from "redux";<br/>import mainReducer from "../reducers/index";</span><span id="6244" class="kq jf hi km b fi kv ks l kt ku">const store = createStore(mainReducer);</span><span id="4e1f" class="kq jf hi km b fi kv ks l kt ku">export default store;</span></pre><h1 id="414f" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">该减速器</h1><p id="884a" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">传递到存储中的reducer负责创建状态。这个缩减器是redux库中的一个函数，它有两个参数。当前状态和动作(改变状态的指令)。</p><p id="a162" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">redux reducer的关键特性是它不会就地改变状态，它是一个纯函数。纯函数是指对于给定的输入会产生相同输出的函数。redux reducer将返回一个新的状态，而不是原地改变状态。例如，React框架不使用纯函数来改变状态。为了改变状态，您调用setState()方法。这种方法就地改变了原始状态。</p><p id="a3d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要查看减速器的运行情况，我们可以查看减速器的基本功能。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="f7e6" class="kq jf hi km b fi kr ks l kt ku">const state = {<br/> reviews: []<br/>};</span><span id="4947" class="kq jf hi km b fi kv ks l kt ku">function mainReducer(state , action){<br/> return state;<br/>}</span></pre><p id="9213" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个示例缩减器目前没有做太多工作。它只是返回状态。接下来，我们将深入研究这个动作做了什么，以及它在与reducer一起产生状态时的作用。</p><h1 id="4c46" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">行动</h1><p id="422e" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">动作是为了通知状态需要改变而分派的对象。这个动作有两个属性。类型和有效负载。type属性是更改状态时将采取的操作类型。有效负载是将被合并到状态中的变更。type属性是必需的，payload属性不是必需的。这里有一个简单的例子。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="1e8a" class="kq jf hi km b fi kr ks l kt ku">payload: { title: 'New Restaurant Review', id: 1 }</span><span id="daf6" class="kq jf hi km b fi kv ks l kt ku">export function addReview(payload) {<br/>  return { type: "ADD_REVIEW", payload }<br/>};</span></pre><p id="5d3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，您可以看到action对象被包装在一个函数中。这是Redux中的最佳实践。这使得对象的创建被抽象掉了。addReview函数产生一个action，其action类型为添加新的评论和一个包含要添加的新评论的有效负载。</p><h1 id="a44d" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">把所有的放在一起</h1><p id="f5e7" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">现在，为了展示reducer和action一起工作来产生一个状态，我们有下面的代码</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="93e3" class="kq jf hi km b fi kr ks l kt ku">const state = {<br/> reviews: []<br/>}</span><span id="3465" class="kq jf hi km b fi kv ks l kt ku">function mainReducer(state, action){<br/> if(action.type = "ADD_REVIEW"){<br/>  return Object.assign({}, state, {<br/>   reviews: state.reviews.concat(action.payload)<br/>  });<br/> }<br/> return state<br/>}</span><span id="8f22" class="kq jf hi km b fi kv ks l kt ku">export default mainReducer;</span></pre><p id="1f6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，您可以看到这个reducer接收了一个操作，并且在if条件中检查了操作类型。如果类型是“ADD_REVIEW”类型，那么我们返回一个新的状态，小心地保持reducer是一个纯函数。为了保持它是一个纯粹的函数，它使用Object.assign将一个reviews属性分配给一个新的对象，并进行concat，以便在不改变原始reviews数组的情况下向reviews数组中的当前值添加一个新的review。</p><p id="7a48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可能在想——一个动作是如何发送的？，如何在状态改变时执行代码？还有怎么随时找回状态？为此，redux库有三个可以在存储上调用的方法。这些方法是getState、dispatch和subscribe。</p><ul class=""><li id="227b" class="kw kx hi ih b ii ij im in iq ky iu kz iy la jc lb lc ld le bi translated">getState方法(store.getState())检索应用程序的状态。</li><li id="09ed" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">分派方法(store.dispatch(action))发出一个动作来改变状态。</li><li id="7d7d" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">Subscribe方法(store . Subscribe(()= &gt; console . log(' run some code '))用于监听状态的变化，当状态发生变化时，可能会运行一些代码作为响应。</li></ul></div></div>    
</body>
</html>