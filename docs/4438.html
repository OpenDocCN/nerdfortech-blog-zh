<html>
<head>
<title>Full Stack Zoom Clone</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">全栈缩放克隆</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/full-stack-zoom-clone-943289af8f7d?source=collection_archive---------2-----------------------#2021-07-21">https://medium.com/nerd-for-tech/full-stack-zoom-clone-943289af8f7d?source=collection_archive---------2-----------------------#2021-07-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5c313aa3333c3a9a48cead43db55c2c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*m1NcbqMfHXQxR330loY6Ag.gif"/></div></div></figure><p id="6a35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大家好，最近我用 node js，Express，peer js 创建了自己的 Zoom 克隆。这些概念可能有点难，但我会尽力解释。但是在开始之前，让我们先了解一下它的一些核心特性:</p><ul class=""><li id="551b" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">加入或主持会议的介绍页面</strong></li><li id="44c3" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">视频和语音聊天</strong></li><li id="2c4d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">文字聊天</strong></li></ul><p id="b352" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，在开始之前，我假设您对 node js、Html、Css 和 Javascript 有一些了解。你可以从<a class="ae kc" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">这里</a>安装 node js。我个人更喜欢使用<a class="ae kc" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> Visual Studio 代码</a>，但是你可以使用任何你选择的 IDE。好了，现在让我们安装我们将要使用的所有模块。</p><h1 id="d9b2" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">模块说明和安装</h1><p id="9a4d" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">首先，让我们使用以下命令创建 package.json 文件:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="f8ae" class="lp ke hi ll b fi lq lr l ls lt">npm init</span></pre><p id="faf2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它将包含关于项目依赖项的所有信息(这些依赖项是在项目构建之前安装的)。<em class="lu">注意:当它询问你你的 app 入口点</em> <strong class="is hj"> <em class="lu">时，输入 server.js。</em> </strong> <br/>现在我们来安装一些模块:</p><ul class=""><li id="4f32" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj"> <em class="lu"> EJS </em> </strong></li></ul><p id="c160" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用 ejs，我们可以将数据作为 javascript 对象传递，我们可以在 HTML 文档中使用这些对象的键来传递数据。但是你的页面应该在。ejs 的格式。因此，基本上，我们将数据定义到模板中，模板呈现一个 HTML 文档，我们可以在其中使用我们定义的数据。</p><p id="f68f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">安装<em class="lu">安装</em>安装</strong></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="e481" class="lp ke hi ll b fi lq lr l ls lt">npm install ejs</span></pre><ul class=""><li id="12ba" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj"> <em class="lu"> UUID </em> </strong></li></ul><p id="41dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">UUID 用于创建唯一的 ID，我们将使用这些唯一的 id 来创建房间。因此，如果一个用户想“主持一个新的会议”，一个新的独特的链接将为他使用 UUID 创建，否则他可以加入已经由其他用户一次。</p><p id="b18d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lu">安装</em> </strong></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="6719" class="lp ke hi ll b fi lq lr l ls lt">npm install uuid</span></pre><ul class=""><li id="2ccf" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj"> <em class="lu">表示</em> </strong></li></ul><p id="c975" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Express 是最流行的框架之一，用于创建单页面或多页面 web 应用程序。它主要用于以不同的方法(GET、POST、PUT、DELETE)处理不同路由的请求。我们还可以将不同的模板引擎与 express 集成，express 允许我们将数据输入到 HTML 文件中(在我们的例子中，我们使用的是 Ejs 模板引擎)。<br/>现在让我们安装 express</p><p id="031f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lu">安装</em> </strong></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="9194" class="lp ke hi ll b fi lq lr l ls lt">npm install express --save</span></pre><ul class=""><li id="e1fd" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">【T42<em class="lu">socket . io</em>T45】</li></ul><p id="f4ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Socket.io 用于客户端(浏览器)和服务器之间的实时和基于事件的通信。</p><p id="e418" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lu">安装</em> </strong></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="6473" class="lp ke hi ll b fi lq lr l ls lt">npm install socket.io</span></pre><ul class=""><li id="82ef" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj"> <em class="lu">同行 js </em> </strong></li></ul><blockquote class="lv lw lx"><p id="1913" class="iq ir lu is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hb bi translated"><strong class="is hj"> PeerJS </strong>简化了 WebRTC <strong class="is hj">对等</strong>到<strong class="is hj">对等</strong>的数据、视频和音频通话。<strong class="is hj"> PeerJS </strong>包装了浏览器的 WebRTC 实现，以提供一个完整的、可配置的、易于使用的<strong class="is hj">对等</strong>到<strong class="is hj">对等</strong>连接 API</p></blockquote><p id="48d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，那么什么是<strong class="is hj"> webrtc </strong>？<br/> Webrtc 用于设备间的实时媒体通信(语音和视频聊天)。webrtc 允许我们捕获设备的麦克风、摄像头或屏幕，我们可以与其他用户共享这些数据。</p><p id="9250" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以 peer js 允许我们毫不费力地完成所有这些功能。因此，peer js 包装了浏览器的 webrtc 实现，基本上为我们的语音和视频聊天提供了对等连接。</p><p id="d930" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你现在有疑问，你一定会用代码来理解。现在让我们安装它</p><p id="cca6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lu">安装</em> </strong></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="1e85" class="lp ke hi ll b fi lq lr l ls lt">npm install peer</span></pre><p id="7032" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你的包裹。安装完所有模块后，Json 可能看起来像这样</p><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/65b9131f60b9fd9e931bdb9b8e8f80b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/0*1GIlpze2-_VE-qNw.png"/></div></figure><h2 id="aaf1" class="lp ke hi bd kf mc md me kj mf mg mh kn jb mi mj kr jf mk ml kv jj mm mn kz mo bi translated"><strong class="ak"> <em class="mp">现在让我们开始编码</em> </strong></h2><p id="49a1" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">首先，让我们从服务器端编码开始。因此，如果您还没有创建 server.js 文件，那么就创建它。供您参考，这将是该应用程序的<strong class="is hj"> <em class="lu">总文件结构</em> </strong>。</p><h1 id="77fc" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> <em class="mp">应用程序的文件结构</em> </strong></h1><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/d09d34d250b7cb24f9538dd8233487ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:334/format:webp/0*1KVVWgHMA2rs3J4o.png"/></div></figure><p id="87c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们开始对我们项目的<strong class="is hj"> <em class="lu"> server.js 文件</em> </strong>进行编码，其解释在这个代码片段下面</p><h1 id="d05f" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><span class="l mr ms mt bm mu mv mw mx my di"> S </span> <strong class="ak"> <em class="mp"> erver.js 代码</em> </strong></h1><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="8e95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里的代码相当简单:)<strong class="is hj"> <em class="lu">我已经在评论</em> </strong>中解释了所有的代码，但是在代码片段的第 13 行需要注意的是，我们只是告诉 express 使用 ejs 作为我们之前安装的模板引擎。默认情况下，express 将在 views 文件夹中查找我们的 ejs 文件(如果有疑问<a class="ae kc" href="#77fc" rel="noopener ugc nofollow">请再次查看图片</a>)。但是，如果您想通过以下方式更改视图的默认路径:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="c712" class="lp ke hi ll b fi lq lr l ls lt">app.set('views', path.join(__dirname, '/yourViewDirectory'));</span></pre><p id="c009" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，创建一个视图文件夹，这个视图文件夹将包含您的 ejs 文件。我已通过 ejs 文件命名为“房间”。“ejs”但是你可以随意命名它，只需在第 40 行相应地更改名称。</p><p id="6253" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们在<strong class="is hj"> <em class="lu">视图文件夹</em> </strong>中创建我们的 ejs 文件(用于主克隆页面)</p><h1 id="8011" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> <em class="mp"> Ejs 文件</em> </strong></h1><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="5857" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在文件的第 21 行和第 22 行，我们只是在 main.js 文件中添加了我们需要的变量。我们在这个格式 <em class="lu"> varName </em>  % &gt;之间添加我们在 server.js 中定义的变量来获取数据。现在，让我们也添加我们的<strong class="is hj"> <em class="lu"> styles.css </em> </strong>文件(对于主克隆页面)这是<strong class="is hj"> <em class="lu">静态文件夹</em> </strong></p><h1 id="22d8" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> <em class="mp"> Styles.css 文件为 Ejs 文件</em> </strong></h1><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="7b6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，你可能会说，我们的介绍页面的 HTML 和 CSS 文件怎么办？是的，我完全忘记了，让我们把它添加到静态文件夹中，命名为 index.html。如有疑问，请再次检查<a class="ae kc" href="#77fc" rel="noopener ugc nofollow">文件结构</a></p><h1 id="01b7" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> <em class="mp">介绍页面的 Html 文件</em> </strong></h1><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="ea65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在它的造型怎么样？现在，让我们为我们的介绍页面添加<strong class="is hj"> <em class="lu"> Style.css </em> </strong></p><h1 id="7ea4" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> <em class="mp"> Style.css 文件用于介绍页面</em> </strong></h1><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="cba5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好了，这就是这个项目所有的 CSS 和 HTML。现在是 main.js 文件的时候了，它将在客户机的浏览器中执行。我已经检查了大部分代码👇👇在评论里。</p><h1 id="9f30" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> <em class="mp">客户端</em> </strong>的 Main.js 文件</h1><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="6c19" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经在评论中解释了上面所有的代码，但是如果你有任何其他的疑问，你当然可以评论和提问。所有这些代码在我的<a class="ae kc" href="https://www.github.com/harsh317" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> <em class="lu"> Github 页面</em> </strong> </a>上也有。因此，只需克隆回购进行测试</p><p id="b862" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，就这些了。您可以随意增强这个缩放克隆，并测试您自己的创造力。比如当用户关闭视频时，你可以发出一个改变视频的函数。</p><h2 id="f5a2" class="lp ke hi bd kf mc md me kj mf mg mh kn jb mi mj kr jf mk ml kv jj mm mn kz mo bi translated">在那之前保持安全，保持健康</h2><h2 id="94df" class="lp ke hi bd kf mc md me kj mf mg mh kn jb mi mj kr jf mk ml kv jj mm mn kz mo bi translated">谢谢你</h2></div></div>    
</body>
</html>