<html>
<head>
<title>Payworks - PayButton swift version</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Payworks - PayButton swift版本</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/payworks-paybutton-swift-version-3dcc8653af03?source=collection_archive---------8-----------------------#2021-01-30">https://medium.com/nerd-for-tech/payworks-paybutton-swift-version-3dcc8653af03?source=collection_archive---------8-----------------------#2021-01-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0ae1fa1db43bf36857f1ab058fc575d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UP278kPEBiA8lcQe0wIivQ.jpeg"/></div></div></figure><p id="ac4b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">集成Payworks支付网关——Objective-C中的PayButton可能是一项简单的工作，因为他们有Objective-C中的文档。我必须将Objective-C中的代码转换为swift。</p><p id="c5d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当时并没有那么难。坦率地说，这很有趣。现在他们有了斯威夫特的页面。但我仍然想与其他开发者分享这项工作，因为社区中没有太多关于iOS版swift中Payworks集成的内容。</p><p id="55b8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们开始吧…</p><h1 id="b226" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">第一步:</h1><p id="ac90" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">首先你需要处理豆荚。将以下内容放入pod文件中。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="2d91" class="la jp hi kw b fi lb lc l ld le">source 'https://github.com/CocoaPods/Specs.git'<br/>source 'https://bitbucket.org/payworks/io.payworks.repo.pods.git'<br/>use_frameworks!<br/><br/>target :"&lt;your-app-target&gt;" do<br/>    pod 'payworks',           ''<br/>    pod 'payworks.paybutton', ''<br/>end</span></pre><p id="055e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装吊舱。</p><h1 id="b9d1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">第二步:</strong></h1><p id="8d48" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">如下所示创建mPosUi对象。我们目前有。TEST，dummy ID &amp; secret key作为本教程的参数。你需要改变它。活，输入真实的ID和你拥有的秘钥。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="4483" class="la jp hi kw b fi lb lc l ld le">let mPosUi = MPUMposUi.initialize(with: .TEST, merchantIdentifier:"ID",</span><span id="45db" class="la jp hi kw b fi lf lc l ld le">merchantSecret:"secret")</span></pre><h1 id="7da5" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">第三步:</h1><p id="70ff" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">基于你所拥有的设备，你需要在两者之间做出选择。用如下所示的所需参数实现TCP或外部附件参数。输入设备连接的远程地址。据我所知，港口还是老样子。</p><p id="519e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">用于通过WiFi或以太网的Verifone阅读器</strong></p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="30de" class="la jp hi kw b fi lb lc l ld le">// When using Verifone readers via WiFi or Ethernet, use the following parameters:</span><span id="679a" class="la jp hi kw b fi lf lc l ld le">let accessoryParameters = MPAccessoryParameters.tcpAccessoryParameters(with: .verifoneVIPA,</span><span id="6aba" class="la jp hi kw b fi lf lc l ld le">remote:"192.168.254.123",</span><span id="1ffe" class="la jp hi kw b fi lf lc l ld le">port:16107,</span><span id="243f" class="la jp hi kw b fi lf lc l ld le">optionals:nil)</span></pre><p id="a407" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">用于蓝牙米乌拉</strong></p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="474b" class="la jp hi kw b fi lb lc l ld le">//When using the Bluetooth Miura, use the following parameters:</span><span id="26b4" class="la jp hi kw b fi lf lc l ld le">let accessoryParameters = MPAccessoryParameters.externalAccessoryParameters(with: .miuraMPI, protocol: “com.miura.shuttle”, optionals: nil)</span></pre><p id="893b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lg">注:</em> </strong>如果需要配置ingenico，告诉我。我也补充一下。</p><h1 id="c068" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">第四步:</h1><p id="a41c" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">在交易参数中，我们需要传递金额和货币。剩下的就看你的了。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="4d0a" class="la jp hi kw b fi lb lc l ld le">let transactionParameters = MPTransactionParameters.charge(withAmount: NSDecimalNumber(string: "100"),currency:MPCurrency.USD,</span><span id="f7ea" class="la jp hi kw b fi lf lc l ld le">optionals:{ (optionals:MPTransactionParametersOptionals!) in</span><span id="54fc" class="la jp hi kw b fi lf lc l ld le">optionals.subject = “Automobile Purchase”</span><span id="1874" class="la jp hi kw b fi lf lc l ld le">optionals.customIdentifier = “yourReferenceForTheTransaction”</span></pre><h1 id="c84b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">第五步:</h1><p id="8efb" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">使用我们创建的mPosUi对象配置navigationBarTint和navigationBarTextColor的外观。我总是使用colorLiteral，这是一种选择颜色的友好方式。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="1da1" class="la jp hi kw b fi lb lc l ld le">mPosUi.configuration.appearance.navigationBarTint = colorLiteral(red: 0.05154533684, green: 0.1255731881, blue: 0.2839779854, alpha: 1)</span><span id="be75" class="la jp hi kw b fi lf lc l ld le">mPosUi.configuration.appearance.navigationBarTextColor = colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0)</span></pre><h1 id="60fe" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">第六步:</h1><p id="3b2e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">配置终端参数，我们创建的附件参数应该已经传递到这里。根据需要配置摘要功能。您可以通过电子邮件发送收据、退款、打印收据或捕捉交易。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/7d75994d437ab7758e14c2f09142bf3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*rnYcBHuiruYun5xnWGuQhQ.png"/></div></figure><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="0ef1" class="la jp hi kw b fi lb lc l ld le">mPosUi.configuration.terminalParameters = accessoryParameters</span><span id="fbd4" class="la jp hi kw b fi lf lc l ld le">mPosUi.configuration.summaryFeatures = MPUMposUiConfigurationSummaryFeature.sendReceiptViaEmail</span></pre><h1 id="d627" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">第七步:</h1><p id="4f97" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">最后，使用mPosUi对象创建带有事务参数的事务viewcontroller。使用完成处理程序中的MPUTransactionResult来了解批准状态。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="777c" class="la jp hi kw b fi lb lc l ld le">let viewController:UIViewController! = mPosUi.createTransactionViewController(with: transactionParameters,</span><span id="404a" class="la jp hi kw b fi lf lc l ld le">completed:{ (controller:UIViewController,result:MPUTransactionResult,transaction:MPTransaction?)</span><span id="b8ed" class="la jp hi kw b fi lf lc l ld le">in</span><span id="6299" class="la jp hi kw b fi lf lc l ld le">self.dismiss(animated: true, completion:nil)</span><span id="6d70" class="la jp hi kw b fi lf lc l ld le">let alert = UIAlertController(title: "Result", message: "", preferredStyle: .alert)</span><span id="e515" class="la jp hi kw b fi lf lc l ld le">let alertAction = UIAlertAction(title: "OK", style: .default, handler: nil)</span><span id="5aac" class="la jp hi kw b fi lf lc l ld le">alert.addAction(alertAction)</span><span id="125b" class="la jp hi kw b fi lf lc l ld le">if result == MPUTransactionResult.approved {</span><span id="d600" class="la jp hi kw b fi lf lc l ld le">alert.message = "Payment was approved!"</span><span id="8feb" class="la jp hi kw b fi lf lc l ld le">} else {</span><span id="3acf" class="la jp hi kw b fi lf lc l ld le">alert.message = "Payment was declined/aborted!"</span><span id="f121" class="la jp hi kw b fi lf lc l ld le">}</span><span id="c045" class="la jp hi kw b fi lf lc l ld le">self.present(alert, animated: true, completion: nil)</span><span id="654a" class="la jp hi kw b fi lf lc l ld le">})</span></pre><p id="8d8f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">🎥<strong class="is hj">查看此视频，了解它应该如何工作。</strong></p><figure class="kr ks kt ku fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="35a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lg">就这样了伙计们，我该离开了。</em>T15】</strong></p><p id="e2b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">供你们测试的swift项目示例:</p><p id="57dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lk" href="https://github.com/Rajaikumar-iOSDev/Payworks-Swift" rel="noopener ugc nofollow" target="_blank">https://github.com/Rajaikumar-iOSDev/Payworks-Swift</a></p><div class="ll lm ez fb ln lo"><a href="https://github.com/Rajaikumar-iOSDev/Payworks-Swift" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hj fi z dy lt ea eb lu ed ef hh bi translated">rajaikumar-IOs dev/Payworks-Swift</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">这是payworks支付网关SDK与iOS-Swift集成的演示。单击中型徽章阅读…</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">github.com</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc io lo"/></div></div></a></div></div></div>    
</body>
</html>