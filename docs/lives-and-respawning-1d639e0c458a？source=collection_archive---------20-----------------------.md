# 生命和重生

> 原文：<https://medium.com/nerd-for-tech/lives-and-respawning-1d639e0c458a?source=collection_archive---------20----------------------->

在今天的班级挑战中，如果玩家从屏幕上掉下来，我们将实施一个生命机制。

有几种方法可以做到这一点，我们可以试着在场景下面放一个空的碰撞盒，然后当玩家触发它时移除一个生命。

![](img/21739ac9b5a0ceb79a7746b1af5f7c73.png)

不过这需要一些额外的步骤，我想我会删除一个生命，当玩家在 y 轴上低于某个数字时让玩家重生。

![](img/431e57a958649461107dacda255c5d5f.png)

我已经把玩家移动到了我认为是一个好的死亡区域的地方。-12 似乎是 y 轴上的神奇数字，所以这将是我们玩家的死亡点，但首先让我们建立一个生命系统。

在玩家脚本中，我们将从变量 _ lives 开始。

![](img/ed94c7ee4e19e1af3177ba3d64d51c9a.png)

接下来，让我们创建一个变量来保存我们的玩家将失去一条生命的 y 轴数字。

![](img/892970a6feb61975eefe7a9d83391fe1.png)

现在让我们检查一下玩家何时越过那条线。让我们为 CheckIfDead()创建一个函数，我们也将把它放在我们的更新中。

![](img/00c641a798d1d2bcaffde4a1e0888c96.png)

我还没有输入任何减去生命的代码，因为我想确定它是否有效，所以让我们检查一下！

![](img/697343a99f515d7f6508c28cbd82628f.png)

好吧！有用！让我们开始减少生命吧！

我们应该将它添加到我们的 UI 画布中，所以让我们复制 coinsText，将其重命名为 LivesText，并将其上移一点。当然，我们会将文本改为类似“生命:”的内容。

![](img/b839760b019b925e5c9b263f08d05705.png)

现在我们将在 UIManager 中创建一个它的容器，就像我们在 CoinText 中做的那样。

![](img/5c743cb8a46ad8508e7cd9a2ccf7d403.png)

然后把它拖进来…

![](img/42eeb978f53db601a832f29f74b4af5c.png)

更新我们生活的功能是硬币功能的精确重复，所以这将是熟悉的。

![](img/9d078ccb81afa9656380793d79141a31.png)

现在，我们将把代码放入播放器中以减去生命，但首先，我们将在 start 中初始化 UI。

![](img/873dbcc6f403ec92933315d756a242a1.png)

让我们看看它是否有效:

![](img/e3c08f3c6286ee67f7c90221c45402c0.png)

呜！呜！是时候减去一些生命了！

![](img/e9191803a43c26b382eef8846dd6cc60.png)

每当有变化时，我们都需要更新 UI 管理器，所以我们只需在从 lifes 变量中减去一个生命后添加一行代码就可以了。看看有没有效果！

![](img/93bd4883a73d808ae720bb519330c1c2.png)

哇哦。失去的生命太多了！如果我们立刻把玩家放回某个地方会怎么样？

![](img/74f04ef5c8f4db21337b6d2c2bb449c6.png)![](img/e4a8691a2653558ed0212c4ba2b1e908.png)

好的，现在可以接受。如果我们想在一个人死亡后保持屏幕不变，我们可能需要创建一个布尔值来表示玩家已经死亡，以防止更多的生命被减去，但这是目前可以接受的修正。

通过最后一次检查，我们已经部分解决了 resp Shawn 问题，但是让我们做得稍微好一点。让我们用一个空的作为一个航路点。

在屏幕上你希望玩家重生的地方放一个空的地方，叫它“重生点”或类似的名字。

![](img/70c7d668f514163196e3095101e6aadf.png)

接下来，我们将让 Unity 用 GameObject 来寻找它。找到，然后在繁殖点的位置繁殖玩家！

![](img/953235b855ea677a97bcf4b4c32e2a12.png)

让我们看看它是否有效:

![](img/1aa3def0d8cbdabece6ff5fde84a9874.png)

这似乎很有效，但我认为如果我们确保它只需要一条生命，我会感觉更好，所以让我们采取一些保护措施:

我们来做一个名为 _isDead 的布尔型；

![](img/3268421fdc9028d816acd842663dc2cf.png)

接下来，我们将把 Respawn 代码移到它自己的名为 Respawn()的函数中。

![](img/06a2d0e239ad5512c1607e42c74cc632.png)

我们将在以前的 CheckIfDead 代码中调用 respawn。

![](img/7a911d9f9f631737a252b836bfbc3a9b.png)

现在，我们将放入我们的安全措施，我们将使用我们的 _isDead 布尔值来确保我们只减去一个死亡。

![](img/9f35eedf7908149d618f8370d9a49104.png)

由于 CheckIfDead 正在更新中，我们将每秒 60 次检查玩家是否死亡。这确保了如果我们删除一个生命，它只会发生一次，直到我们再次将 boolean _isDead 设置为 false。我们什么时候能做那件事？大概是玩家安然无恙的时候，比如..玩家重生的地方！

![](img/907fad4532e6481390666f19b47fdeca.png)

为了确保物理工作正常，让我们将 Update()改为 FixedUpdate()。

![](img/4a261467e8e42539c66741c0e435fae9.png)

太好了！让我们看看现在事情是否正常:

![](img/3d6d0e86e6f1a5f89b2a5126ca6c4f9b.png)

厉害！我们现在每次跌倒都只是失去一条生命！然而，我还想分享一个技巧，那就是在重新闪现之前将屏幕冻结一秒钟，明天我会详细介绍，到时见！