<html>
<head>
<title>Dynamic Markdown Blogs in Next.js/React using gray-matter, react-markdown and react-syntax-highlighter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js/React的动态降价博客使用灰色物质，反应-降价和反应-语法-高亮</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/dynamic-markdown-blogs-in-next-js-react-c0ed10d2d8a2?source=collection_archive---------1-----------------------#2021-01-09">https://medium.com/nerd-for-tech/dynamic-markdown-blogs-in-next-js-react-c0ed10d2d8a2?source=collection_archive---------1-----------------------#2021-01-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b105" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你正在寻找一个可持续的、可扩展的解决方案来创建动态博客，无论是为你的网站，还是其他人的网站，那么react-markdown就是它的解决方案。显然，这篇博客假设你正在和Next.js/React.一起工作</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/11fd18288238751f0bca76f98c47826c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZqkBELtxVeDk-HJNXUfNg.png"/></div></div></figure><p id="3d74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，创建一个目录，比如“_snippets”，并在该目录中创建一个示例降价文件，比如<strong class="ih hj">“使用gray-matter、react-markdown和react-syntax-highlighter.md在Next.js中动态降价博客”</strong>。特定博客的路由段将从markdown文件名本身导出。</p><p id="94b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是降价样本，供您复制:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="4100" class="ju jv hi jq b fi jw jx l jy jz">---<br/>title: 'Dynamic Markdown Blogs in Next.js/React using gray-matter, react-markdown and react-syntax-highlighter'<br/>excerpt: 'Implementing markdown blogs in Next.js/React with remark-markdown in just 5 minutes. Thinking of using strings? Nah, they are too old, use markdown. Export statically to achieve great perfomance.'<br/>date: '2021-01-06'<br/>---<br/><br/>You are looking for a sustainable, scalable solution to create dynamic blogs whether it be for your website, or someone else's, then react-markdown is the solution for it. This blog assumes, obviously, you are working with Next.js/React.</span></pre><p id="9d36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成内容🚀通过在您的终端上执行以下操作来继续操作:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="b163" class="ju jv hi jq b fi jw jx l jy jz">npm i react-syntax-highlighter gray-matter react-markdown</span></pre><p id="88d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装完毕🚀，继续创建以下组件:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="c388" class="ju jv hi jq b fi jw jx l jy jz">// File: /components/MarkdownHighlight.js<br/><br/>import React from 'react'<br/>import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'<br/>import {<br/>  materialDark,<br/>  materialLight,<br/>} from 'react-syntax-highlighter/dist/cjs/styles/prism'<br/><br/>const MarkdownHighlight = ({ darkMode, language, value }) =&gt; {<br/>  return (<br/>    &lt;SyntaxHighlighter<br/>      language={language}<br/>      style={darkMode ? materialLight : materialDark}<br/>    &gt;<br/>      {value}<br/>    &lt;/SyntaxHighlighter&gt;<br/>  )<br/>}<br/><br/>export default MarkdownHighlight</span></pre><p id="0445" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个组件将负责突出显示你的markdown代码块，无论是html、css、js还是markdown。浏览<strong class="ih hj">react-syntax-highlight er/dist/cjs/styles/prism</strong>探索不同种类的滤镜，如{coy}、{dark}除了{materialDark}、{materialLight}。</p><p id="b976" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码将处理来自markdown文件的博客数据的格式。增加了对每个功能的解释。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="c834" class="ju jv hi jq b fi jw jx l jy jz">// File: /lib/markdown.js<br/><br/>import { join } from 'path'<br/>import fs from 'fs'<br/>import matter from 'gray-matter'<br/><br/>// Directory of snippets<br/>const pagesDirectory = join(process.cwd(), '_snippets')<br/><br/>// Form slugs from the markdown names<br/>export function getSlugsFromDirectory(dir) {<br/>  return fs.readdirSync(dir)<br/>}<br/><br/>/**<br/> * Gets the contents of a file<br/> * The gray-matter (metadata at the top of the file) will be<br/> * added to the item object, the content will be in<br/> * item.content and the file name (slug) will be in item.slug.<br/> */<br/>export function getBySlug(dir, slug, fields = []) {<br/>  const realSlug = slug.replace(/\.md$/, '')<br/>  const fullPath = join(dir, `${realSlug}.md`)<br/>  const fileContents = fs.readFileSync(fullPath, 'utf8')<br/>  const { data, content } = matter(fileContents)<br/>  const items = {}<br/>  fields.forEach((field) =&gt; {<br/>    if (field === 'slug') {<br/>      items[field] = realSlug<br/>    }<br/>    if (field === 'content') {<br/>      items[field] = content<br/>    }<br/>    if (data[field]) {<br/>      items[field] = data[field]<br/>    }<br/>  })<br/>  return items<br/>}<br/><br/>// Returns contents of a page in the _snippets directory<br/>export function getPageContentBySlug(slug, fields = []) {<br/>  return getBySlug(pagesDirectory, slug, fields)<br/>}<br/><br/>// Returns pages in the _snippets directory<br/>export function getAllSnippets(fields = []) {<br/>  const slugs = getSlugsFromDirectory(pagesDirectory)<br/>  const pages = slugs.map((slug) =&gt; getPageContentBySlug(slug, fields))<br/>  return pages<br/>}</span></pre><p id="ec95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成创建帮助功能🚀，让我们继续创建动态博客页面:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="d195" class="ju jv hi jq b fi jw jx l jy jz">// File: /pages/snippet/[slug].js<br/><br/>import { useRouter } from 'next/router'<br/>import ReactMarkdown from 'react-markdown'<br/>import MarkdownHighlight from '@/components/MarkdownHighlight'<br/>import { getAllSnippets, getPageContentBySlug } from '@/lib/markdown'<br/><br/>const Snippet = ({ page, darkMode }) =&gt; {<br/>  const router = new useRouter()<br/>  return router.isFallback ? (<br/>    &lt;div&gt;Loading...&lt;/div&gt;<br/>  ) : (<br/>    &lt;div className="container"&gt;<br/>      &lt;h1&gt;{page.title}&lt;/h1&gt;<br/>      &lt;div className={styles['mt-3']}&gt;<br/>        &lt;div className={darkMode ? 'text-white' : 'text-dark'}&gt;<br/>          &lt;ReactMarkdown<br/>            source={page.content}<br/>            renderers={{<br/>              code: ({ language, value }) =&gt; {<br/>                /* Automatically takes in the language &amp; value from the markdown file when: ```&lt;html/css/js&gt;<br/>                  Content here<br/>                  ``` in the markdown file*/<br/>                return (<br/>                  &lt;MarkdownHighlight<br/>                    language={language}<br/>                    value={value}<br/>                    darkMode={darkMode}<br/>                  /&gt;<br/>                )<br/>              },<br/>            }}<br/>          /&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/><br/>export default Snippet<br/><br/>export async function getStaticProps({ params }) {<br/>  const { slug } = params<br/>  const page = getPageContentBySlug(slug, [<br/>    'title',<br/>    'image',<br/>    'slug',<br/>    'content',<br/>    'date',<br/>  ])<br/>  return {<br/>    props: {<br/>      page: {<br/>        ...page,<br/>        markdown: page.content,<br/>      },<br/>    },<br/>  }<br/>}<br/><br/>export async function getStaticPaths() {<br/>  const posts = getAllSnippets(['slug'])<br/>  const paths = posts.map(({ slug }) =&gt; ({<br/>    params: {<br/>      slug,<br/>    },<br/>  }))<br/>  return {<br/>    paths,<br/>    fallback: 'blocking'<br/>  }<br/>}</span></pre><p id="a870" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">一切就绪！希望你喜欢:)</strong></p></div></div>    
</body>
</html>