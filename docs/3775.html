<html>
<head>
<title>I Never Thought a Simplified Spinnaker Was Possible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从没想过简化的三角帆是可能的</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/i-never-thought-a-simplified-spinnaker-was-possible-6cef90651234?source=collection_archive---------14-----------------------#2021-06-23">https://medium.com/nerd-for-tech/i-never-thought-a-simplified-spinnaker-was-possible-6cef90651234?source=collection_archive---------14-----------------------#2021-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d07e6c6aec48a1e103320e6a0f09a9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nO_hylhAPLsiRFrZg5ehYg.jpeg"/></div></div></figure><p id="caea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我认为这是一个公平的说法，它传达了2021年的软件工程师不仅工作努力，而且工作聪明。基于过去五年的经验教训，现在创建的应用和服务尽可能具有动态性，旨在满足以激光为中心的业务需求。</p><p id="0f3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">同样的方法也出现在DevOps领域，我经常提到的“* as code”允许以声明方式创建组件。这种方法利用了相同的git版本控制系统，功能开发人员已经为他们的源代码使用了超过15年。DevOps工程师在交付持续集成(CI)管道方面也取得了巨大的进步，这些管道提供了可以交付的打包软件。</p><p id="ca63" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，直到今天，持续交付(CD)方面仍然存在挑战。挑战暴露了经常阻碍成功部署的差距。我经常直接看到的一些挑战是:</p><ol class=""><li id="a51b" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">没有预先检查部署的简单方法，这可能导致在一个环境中成功的部署失败，而在其他环境中不会失败。</li><li id="5d81" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">回滚到先前的部署并不是真正的回滚，而是重新部署到所提供的提交的早期版本，而不是回滚到整个应用程序或服务的先前状态。</li></ol><p id="61cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些差距需要被解决，以完全完成软件开发生命周期。</p><h1 id="6749" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">为什么Spinnaker很棒</h1><p id="f4ce" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated"><a class="ae lf" href="https://spinnaker.io/" rel="noopener ugc nofollow" target="_blank"> Spinnaker </a>是一个开源解决方案，专注于多云持续交付和部署，面向所有主要的云服务提供商(AWS、Azure、Google)。Spinnaker专注于CI/CD的CD方面，与所有业界领先的CI工具一起工作。</p><p id="48e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Spinnaker通过对计划的部署执行自动预检来弥补上述缺陷。预检阶段完成后，Spinnaker部署一只金丝雀，然后监控金丝雀发出的遥测信号，留意金丝雀和现有舰队之间的变化。如果成功，Spinnaker将在应用程序环境的剩余部分使用蓝/绿部署。</p><p id="a912" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Spinnaker，回滚可以自动化，并且实际上将整个应用程序或服务恢复到先前的状态。这与简单地将现有版本重新部署为新版本形成对比。采用真正的回滚方法会对整个应用程序生态系统产生较小的干扰影响，并减少与简单地将旧版本重新部署为新版本相关的潜在外部影响。</p><p id="ff35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Spinnaker受到了众多IT知名企业的信任，包括Adobe、Airbnb、Comcast、网飞、SAP、TransUnion和Salesforce。</p><p id="7221" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，Spinnaker面临的最大挑战是，它是一个非常复杂的平台，需要很长的学习曲线。下图是Spinnaker的设计和架构:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/b2458b17417e4a295e6a25a25f4cb2c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGjYbuyu6OqMS757DwI3gQ.png"/></div></div></figure><h1 id="ed10" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">军械库能帮上什么忙</h1><p id="455f" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated"><a class="ae lf" href="https://www.armory.io/" rel="noopener ugc nofollow" target="_blank"> Armory </a>的创建不仅是为了简化Spinnaker解决方案，也是为了真正扩展多云持续交付和部署平台的价值。Armory在应用程序生命周期的CD方面引入的一些关键特性如下:</p><ul class=""><li id="b7ca" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ll ju jv jw bi translated">引入复杂的管道作为代码，通过允许集中式管道更进一步。</li><li id="b210" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">简化扩展选项，以轻松添加/删除元素，如:开发环境、应用程序实例、部署环境的变化和集群规模</li><li id="6ddd" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">使用<a class="ae lf" href="https://docs.armory.io/docs/armory-agent/" rel="noopener ugc nofollow" target="_blank">库伯内特军械库代理</a>更好地管理库伯内特</li><li id="5559" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">允许自定义策略的策略引擎</li></ul><p id="3ae4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些增强开放了DevOps工程师使用Spinnaker可以做的事情，而不需要投入大量时间在本机产品中构建类似的选项。</p><h1 id="9442" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">军械库如何提供价值</h1><p id="5cfc" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">前一节提供了Armory如何帮助应用程序生命周期的CD方面的一些高级特性。这些特性有可感知的价值，但是最大的挑战是从“零到Spinnaker”而不消耗sprint的时间。</p><p id="4622" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是任何人如何在军械库试验评估过程的早期看到价值的一些关键方面。</p><h2 id="dc61" class="lm kd hi bd ke ln lo lp ki lq lr ls km jb lt lu kq jf lv lw ku jj lx ly ky lz bi translated">明纳克</h2><p id="c2d2" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">军械库的<a class="ae lf" href="https://github.com/armory/minnaker" rel="noopener ugc nofollow" target="_blank"> Minnaker </a>开源项目旨在通过在大约10分钟内自动创建一个全功能的环境，包括军械库的最新版本，来消除Spinnaker的混乱！是的，零到三角帆和军械库600秒。事实上，使用我的MacBook Pro，我能够毫无问题地遵循这些说明:</p><p id="1f49" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" href="https://github.com/armory/minnaker#installation" rel="noopener ugc nofollow" target="_blank">https://github.com/armory/minnaker#installation</a></p><p id="710c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，我可以使用以下指令访问Spinnaker安装:</p><p id="aa00" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" href="https://github.com/armory/minnaker#accessing-spinnaker" rel="noopener ugc nofollow" target="_blank">https://github.com/armory/minnaker#accessing-spinnaker</a></p><p id="5e4e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对细节感兴趣的人可以访问Spinnaker自己提供的“入门”页面:</p><p id="1487" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" href="https://spinnaker.io/guides/user/get-started/" rel="noopener ugc nofollow" target="_blank">https://spinnaker.io/guides/user/get-started/</a></p><h2 id="28b9" class="lm kd hi bd ke ln lo lp ki lq lr ls km jb lt lu kq jf lv lw ku jj lx ly ky lz bi translated">完全声明式设计</h2><p id="9804" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">随着Spinnaker和Armory的运行，可以使用Dinghy通过<a class="ae lf" href="https://en.wikipedia.org/wiki/YAML" rel="noopener ugc nofollow" target="_blank">YAML</a>(YAML Ain not Markup Language)数据序列化语言使用声明性方法开始构建预期的设计。下面是一个用于交付“管道代码”的小型文件示例:</p><pre class="lh li lj lk fd ma mb mc md aw me bi"><span id="1ef0" class="lm kd hi mb b fi mf mg l mh mi">{<br/>   "application":"helloworldapp",<br/>   "globals":{<br/>      "save_app_on_update":true<br/>   },<br/>   "spec":{<br/>      "appmetadata":{<br/>         "dataSources":{<br/>            "enabled":[<br/>               "securityGroups",<br/>               "loadBalancers",<br/>               "executions",<br/>               "serverGroups"<br/>            ],<br/>            "disabled":[<br/>               "canaryConfigs"<br/>            ]<br/>         },<br/>         "cloudProviders":[<br/>            "kubernetes",<br/>            "aws"<br/>         ],<br/>         "customBanners":[<br/>            {<br/>               "backgroundColor":"var(--color-alert)",<br/>               "enabled":true,<br/>               "text":"Your custom banner text",<br/>               "textColor":"var(--color-text-on-dark)"<br/>            }<br/>         ]<br/>      }<br/>   },<br/>   "pipelines":[<br/>      {<br/>         "application":"helloworldapp",<br/>         "name":"my-pipeline-name",<br/>         "stages":[<br/>            {<br/>               "name":"one",<br/>               "type":"wait",<br/>               "waitTime":10<br/>            }<br/>         ]<br/>      }<br/>   ]<br/>}</span></pre><p id="d5b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，YAML设计的结果可以包含在基于git的存储库中，这些存储库可以在从沙盒到生产的所有实现中使用。</p><h2 id="c297" class="lm kd hi bd ke ln lo lp ki lq lr ls km jb lt lu kq jf lv lw ku jj lx ly ky lz bi translated">二等奖；荣誉奖；H奖</h2><p id="b2ba" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在考虑军械库带来的价值时，还有几个我认为值得提及的项目要记住:</p><ul class=""><li id="bee6" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ll ju jv jw bi translated">部署预检查:通过底层的Spinnaker实现，部署预检查减轻了对遗漏配置或依赖性的担心。</li><li id="f782" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">以开发人员为中心的支持:Armory使得知识最丰富的团队能够拥有一个给定的服务，从端到端，利用声明式设计。</li><li id="6168" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">真正的回滚:使用Spinnaker/Armory设计，可以100%回滚给定的服务，包括它的依赖项。回滚设计甚至可以通过观察监控环境来实现自动化。</li></ul><h2 id="4ba9" class="lm kd hi bd ke ln lo lp ki lq lr ls km jb lt lu kq jf lv lw ku jj lx ly ky lz bi translated">以应用程序为中心的仪表板(附加产品)</h2><p id="7310" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">使用<a class="ae lf" href="https://www.splunk.com/" rel="noopener ugc nofollow" target="_blank"> Splunk </a>的客户可以创建一个以应用为中心的仪表板，提供Armory/Spinnaker实施的总体视图。以下是“持续验证”选项卡中可能出现的内容示例:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/ca505519db7468db997624bd15225250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*75OvoIyCBgHyyU-RTWzxJg.png"/></div></div></figure><p id="723c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对Accelerate或DevOps研究和评估(DORA)指标感兴趣的人可能会认识到上例中包含的平均恢复时间(MTTR)分析，它是Splunk集成的一部分，而不是Armory产品的一部分。</p><h1 id="68e3" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="9f35" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">从2021年开始，我开始关注以下我认为适用于任何IT专业人士的使命宣言:</p><blockquote class="mk ml mm"><p id="2501" class="iq ir mn is b it iu iv iw ix iy iz ja mo jc jd je mp jg jh ji mq jk jl jm jn hb bi translated"><em class="hi">“将您的时间集中在提供能够扩展您知识产权价值的特性/功能上。将框架、产品和服务用于其他一切。”<br/> - J. Vester </em></p></blockquote><p id="30c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Armory解决方案当然属于服务的范畴，它允许功能团队继续关注交付业务价值，同时简化有点复杂的连续交付(CD)解决方案。军械库提供附加价值，例如:</p><ul class=""><li id="288c" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ll ju jv jw bi translated">使用橡皮艇和YAML的声明式设计</li><li id="0323" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">Minnaker允许在10分钟内快速启动</li><li id="b6d8" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">应用程序范围的扩展选项</li><li id="d586" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ll ju jv jw bi translated">真正的回滚功能</li></ul><p id="50e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">任何寻求针对主要云提供商的CD解决方案的人都应该将Armory纳入要评估的产品和服务的短名单中。Armory扩展成熟的Spinnaker解决方案的方式将简化软件开发生命周期的交付方面，在此过程中提供额外的功能。</p><p id="05b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">祝你今天过得愉快！</p></div></div>    
</body>
</html>