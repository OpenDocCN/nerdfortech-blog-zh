<html>
<head>
<title>2.5D Game Development: Puzzles: Part 1 — Elevator System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2.5D游戏开发:谜题:第1部分—电梯系统</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/2-5d-game-development-puzzles-part-1-elevator-system-715d768ec65e?source=collection_archive---------22-----------------------#2021-07-20">https://medium.com/nerd-for-tech/2-5d-game-development-puzzles-part-1-elevator-system-715d768ec65e?source=collection_archive---------22-----------------------#2021-07-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6f0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在接下来的几篇文章中，我将介绍一些不同的拼图元素，以及我是如何在2.5D环境中处理它们的。这将涵盖像电梯系统，跳墙，推动物体到开关。</p><h1 id="b54c" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated"><strong class="ak">电梯系统:</strong></h1><p id="2865" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我在这里设置了一个简单的场景。一旦我走上移动平台，就有一个亮着红灯的盒子。我希望能够按下“E”键，并呼叫电梯到我所在的楼层。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/a9e371af4b06d8ca6e83d7875b5ab9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RhAbg-fCdY7nGAkC16pMzg.png"/></div></div></figure><p id="99c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“电梯面板”上有这个触发碰撞器。所以你可能已经知道，我们需要检测与它的碰撞，然后检查E是否被按下。很多人会说使用OnTriggerStay()是解决这个问题的方法。我发现了一种不同的方法，我个人认为效果更好。这个方法利用了布尔函数！</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ks"><img src="../Images/48f0645cd987324e215aa39b120e45fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRI4zBmmVWakd6dRGDns7g.png"/></div></div></figure><p id="63e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OnTriggerEnter和OnTriggerExit都将名为<code class="du kt ku kv kw b">isTouchingPlayer</code>的布尔值翻转为开和关。所以如果isTouchingPlayer为真，E被按下电梯向下移动。当玩家退出触发碰撞器并按下E键时，什么也没发生。与OnTriggerStay的功能相同，但我只是喜欢对事情有更多的控制，所以这种方法是我的最爱。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kx"><img src="../Images/af185428b6dff0134bf4606561f2e6f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*AtWCejDrPxBnbzO9gzsprA.png"/></div></figure><p id="c59a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在更新函数中，我们有一点要解开。有一种叫做电梯的书。电梯呼叫自动为假。所以如果它为假，而isTouchingPlayer为真，那么我们继续下一组条件。在播放器脚本中，我设置了一个方法来处理硬币计数。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ky"><img src="../Images/f3eb91dad46fdd05ee5500ba6f6a1261.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*pygqdw6YvgTG8BiMIOItDA.png"/></div></figure><p id="77f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这只是返回硬币。这是一个int变量类型。我在电梯脚本中还有一个int类型的变量，名为requiredCoins。因此，如果coinCount()返回一个大于或等于requiredCoins的数字，电梯将会下降。我设置requiredCoins = 8。你可以按照你认为合适的方式来设置。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kz"><img src="../Images/d4e1d5bebf251c1fe037c9219314dce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*SvLGg9mxKf6u-s1YZYabdQ.png"/></div></div></figure><p id="60d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我将获取elevatorButton游戏对象的MeshRenderer，以便在按下E键时更改材质颜色。elevatorCalled设置为true，然后是elevator。CallElevator()是从电梯脚本中调用的。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es la"><img src="../Images/7970dab55c096bec3ed51a78e5617477.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*geQybRXDLczn0ZtZWHttxQ.png"/></div></figure><p id="6c97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我所做的只是将goingDown(a bool) =设为相反的值。这样，如果电梯在上面，我按E，它就下来，如果我在上面，我按E，它就上升。这与上一篇文章中提到的移动平台的设置几乎相同。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lb"><img src="../Images/c09c6984b4e782ffb1176f36fba311f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ix9SlBS8OG1hh7gbXs8RMw.png"/></div></div></figure><p id="789b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么为什么你的角色会在电梯上升的时候掉下去呢？为什么这么紧张？我们一定要在一个固定的更新时间内处理电梯运动()。这还不是全部。我们想让玩家游戏对象成为电梯游戏对象的子对象。怎么会？</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lc"><img src="../Images/3ef74ec77a882a377c4e27323618eee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yj9hyQdYjIlns0gGa3zYeQ.png"/></div></div></figure><p id="4ce2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在电梯里设置了另一个触发碰撞器。当玩家与它碰撞时，由于电梯脚本中的OnTriggerEnter和Exit，它变成了电梯的子对象。</p><p id="5100" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在所有的都已经设置好了，最终的结果应该是这样的。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ld"><img src="../Images/afda007bc4c1fa69630b8d3cc1edccec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0Ldy0cI8s-mL81j0i8b8Ng.gif"/></div></div></figure><p id="08e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按E，按钮变绿，电梯下降。进入电梯碰撞器，玩家成为电梯的孩子。按E键，电梯上升。退出碰撞器，现在玩家不再是电梯的孩子了。漂亮！在下一篇文章中，我将介绍如何设置跳墙:)</p></div></div>    
</body>
</html>