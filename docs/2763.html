<html>
<head>
<title>Roll The Dice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掷色子</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/roll-dice-162e7a3e3079?source=collection_archive---------4-----------------------#2021-05-19">https://medium.com/nerd-for-tech/roll-dice-162e7a3e3079?source=collection_archive---------4-----------------------#2021-05-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="52d0" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">使用掷骰子示例应用程序，以有趣的方式学习React基础知识</h2><div class=""/><div class=""><h2 id="46b1" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">React的初学者教程</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/99b17caad0edb9138be9f1a66e9a2bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mPU1nulbKbqVNLQtjLi-Aw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图1:掷骰子，React内置的示例应用程序</figcaption></figure><p id="6849" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">React是一个流行的用于UI(用户界面)的JavaScript库。这是一个由脸书推动的开源项目。它是基于组件的、声明性的，因此更适合为web和移动设备构建用户界面。</p><p id="235b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">这里，我有一个掷骰子的小React应用程序。该页面显示了掷一个或两个骰子的两个选项。骰子有六个面。React组件为每个骰子生成一个介于1和6之间的随机数。如果你在玩棋盘游戏，可以在手机或iPad(甚至是台式机)上随意打开<a class="ae ks" href="http://jsfiddle.net/kvkirthy/726wvay5/531/show" rel="noopener ugc nofollow" target="_blank">这一页</a>，掷骰子。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="kt ku l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">JS小提琴，掷骰子样品</figcaption></figure><p id="ef0b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">然而，这个应用程序的主要目的是解释以下React基础知识，</p><ul class=""><li id="4f5d" class="kv kw hi jy b jz ka kc kd kf kx kj ky kn kz kr la lb lc ld bi translated">React中的组件</li><li id="fae1" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">使用props在组件之间传递数据</li><li id="26b8" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">演示useState和useEffect挂钩。</li></ul><h1 id="362b" class="lj lk hi bd ll lm ln lo lp lq lr ls lt ix lu iy lv ja lw jb lx jd ly je lz ma bi translated">成分</h1><p id="6aff" class="pw-post-body-paragraph jw jx hi jy b jz mb is kb kc mc iv ke kf md kh ki kj me kl km kn mf kp kq kr hb bi translated">组件是独立的UI元素。在掷骰子的例子中，骰子是呈现六个面之一的组件。它是可重用的，因此可以在应用程序的任何地方使用。</p><p id="9867" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">在React中创建组件非常简单。在16.8版本之前，组件必须是类。现在，一个组件可以是一个函数。函数组件使用pascal大小写名称，并返回React元素/ JSX。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mg"><img src="../Images/6ebbdae3d2b16887ab597c86d78aaf50.png" data-original-src="https://miro.medium.com/v2/resize:fit:262/format:webp/1*PmCOcfrAgs4KGbsWqRWtZw.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图2:骰子的第五面</figcaption></figure><p id="5b1e" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">考虑下面的代码片段。我们创建一个函数<em class="mh"> Dice() </em>。该函数是一个组件，它返回用于呈现骰子的React元素。React元素或JSX与HTML非常相似，几乎没有细微的差别。例如，注意，我们没有使用CSS类的<em class="mh">类</em>。JSX使用<em class="mh"> className </em>，在HTML DOM中被翻译成<em class="mh">class。</em></p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="e912" class="mn lk hi mj b fi mo mp l mq mr">function Dice(){<br/>  return &lt;div className="dice face-1"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="9370" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">注意，类名是face-1。它代表骰子的一面。有关CSS类的定义，请参见下面的代码片段。目前，这个组件正在返回单侧。我们将进一步发展组件，以显示所有六个方面。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="487d" class="mn lk hi mj b fi mo mp l mq mr">.img-1{<br/>  background-image: url('<a class="ae ks" href="https://imgur.com/a005G8C.png'" rel="noopener ugc nofollow" target="_blank">https://imgur.com/a005G8C.png'</a>);<br/>}</span><span id="d438" class="mn lk hi mj b fi ms mp l mq mr">/*<br/>   It is rather a simplistic approach to show a side of a dice. Created six images, each representing a number. The CSS class sets it as the background for the HTML element.</span><span id="5eea" class="mn lk hi mj b fi ms mp l mq mr">See below, the HTML element matches height and width of the element to the image's width and height.<br/>*/</span><span id="6112" class="mn lk hi mj b fi ms mp l mq mr">.dice {<br/>  width: 100px;<br/>  height: 100px;<br/>}</span></pre><p id="9074" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">要在应用程序的其余部分使用组件Dice，请将其编写为(不同组件的)JSX中的一个元素。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="895f" class="mn lk hi mj b fi mo mp l mq mr">&lt;Dice /&gt; // sample Dice element in JSX of a different component.</span></pre><h1 id="b46f" class="lj lk hi bd ll lm ln lo lp lq lr ls lt ix lu iy lv ja lw jb lx jd ly je lz ma bi translated">Props:将数据从父组件传递到子组件</h1><p id="00cf" class="pw-post-body-paragraph jw jx hi jy b jz mb is kb kc mc iv ke kf md kh ki kj me kl km kn mf kp kq kr hb bi translated">我们知道组件返回React元素，这是组件的输出。另一方面，props(properties的缩写)是输入。一个函数组件可以有一个参数。它封装了其他组件可能传入的所有属性。</p><p id="0753" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">让我们更新骰子组件以显示所有六个面。但是，在任何时间点显示哪一面是由父组件(使用骰子的组件)决定的。它将边值作为道具传入。考虑下面的代码示例。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="ace2" class="mn lk hi mj b fi mo mp l mq mr">function Dice(props){<br/> if(props.draw === 1){<br/>   return &lt;div className="dice img-1"&gt;&lt;/div&gt;;<br/>  } else if(props.draw === 2){<br/>   return &lt;div className="dice img-2"&gt;&lt;/div&gt;;<br/>  } else if(props.draw === 3){<br/>   return &lt;div className="dice img-3"&gt;&lt;/div&gt;;<br/>  } else if (props.draw === 4) {<br/>  return &lt;div className="dice img-4"&gt;&lt;/div&gt;;<br/>  } else if (props.draw === 5){<br/>   return &lt;div className="dice img-5"&gt;&lt;/div&gt;;<br/>  } else if (props.draw === 6) {<br/>   return &lt;div className="dice img-6"&gt;&lt;/div&gt;;<br/>  } else {<br/>   return &lt;div className="dice "&gt;!!!&lt;/div&gt;;<br/>  }<br/>}</span></pre><p id="6f17" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">该组件现在使用一个函数参数props。目前我们只有一个名为<em class="mh"> draw </em>的道具。它支持六种可能的值。最后的<em class="mh"> else </em>处理错误情况，如果父组件提供不正确的值，比如10或一个字符串，或者根本不提供属性。</p><blockquote class="mt mu mv"><p id="3cdb" class="jw jx mh jy b jz ka is kb kc kd iv ke mw kg kh ki mx kk kl km my ko kp kq kr hb bi translated">在JavaScript中===强制数据类型检查。如果我们使用==，我们可以使用props.draw == "2 "，对于数值2，它仍然返回true。因此，使用前者(===)进行精确的条件检查是一个很好的实践。</p></blockquote><p id="4ab4" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">考虑下面的代码片段，它显示了父组件为道具<em class="mh"> draw提供一个值。</em>这里，我们传递一个值5。因此骰子显示的是第五面。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="f7d0" class="mn lk hi mj b fi mo mp l mq mr">&lt;Dice draw={5} /&gt;</span></pre><p id="4acd" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">注意，这个值用花括号括起来，表示一个表达式。这里，我们传递一个字面量。然而，我们可以传递一个变量。骰子根据变量的值动态显示边。见下文。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="a1a2" class="mn lk hi mj b fi mo mp l mq mr">&lt;Dice draw={drawVariable} /&gt;</span></pre></div><div class="ab cl mz na gp nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="hb hc hd he hf"><p id="0b0c" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">让我们更深入地研究dice代码示例。除了骰子组件，还有两个附加组件。下面是对每个组件的意图和功能的简要介绍。</p><p id="8473" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><strong class="jy hs">骰子</strong>——可以画六个面。显示任意时间点的六个面之一。</p><p id="d0f7" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><strong class="jy hs">掷骰子</strong> —它是实际掷骰子的组件。它会生成一个介于1和6之间的随机数。它使用上面的组件Dice来显示给定的抽签。</p><p id="af70" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><strong class="jy hs">游戏棋盘</strong> —很少有游戏使用单个骰子。很少有人用两个骰子。游戏板组件允许用户选择一个或两个骰子来抽奖。选中后，使用上面的“掷骰子”组件掷骰子。</p></div><div class="ab cl mz na gp nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="hb hc hd he hf"><h1 id="b125" class="lj lk hi bd ll lm ng lo lp lq nh ls lt ix ni iy lv ja nj jb lx jd nk je lz ma bi translated">钩住</h1><p id="7de2" class="pw-post-body-paragraph jw jx hi jy b jz mb is kb kc mc iv ke kf md kh ki kj me kl km kn mf kp kq kr hb bi translated">钩子是React版本中添加的新特性。与功能组件挂钩一起，React简化了组件的构建。它们是用于构建真实React应用程序的附加特性。我们将在本文中看到几个钩子的例子。</p><h2 id="8224" class="mn lk hi bd ll nl nm nn lp no np nq lt kf nr ns lv kj nt nu lx kn nv nw lz ho bi translated">使用状态</h2><p id="9f76" class="pw-post-body-paragraph jw jx hi jy b jz mb is kb kc mc iv ke kf md kh ki kj me kl km kn mf kp kq kr hb bi translated">大多数组件维护一个内部状态，它是表示组件在某个时间点的状态的数据。让我们考虑一下游戏板组件。它允许用户选择一个或两个骰子滚动。用户选择为组件设置状态。在某个时间点，组件可以滚动单个骰子(状态1)或两个骰子(状态2)。考虑下面的代码片段，它显示了用于选择一个或两个骰子的下拉菜单。根据用户在下拉列表中的选择，为组件设置状态。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="a259" class="mn lk hi mj b fi mo mp l mq mr">function GameBoard(){  <br/> <br/><strong class="mj hs">  const [diceCount, setDiceCount] = useState(2);<br/></strong>  const updateDiceCount = (evt) =&gt; setDiceCount(parseInt(evt.target.value));</span><span id="60f7" class="mn lk hi mj b fi ms mp l mq mr">// The component returns elements for a dropdown<br/>return &lt;div className="go-center"&gt;<br/>           &lt;select name="dice-count" defaultValue={diceCount} onChange={ updateDiceCount } id="dice-count" &gt;<br/>            &lt;option value="1"&gt;●&lt;/option&gt;<br/>            &lt;option value="2"&gt;●●&lt;/option&gt;<br/>        &lt;/select&gt;<br/>       &lt;/div&gt;;<br/>}</span></pre><p id="16ec" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">注意，组件为下拉列表返回<em class="mh">选择</em>和<em class="mh">选项</em>元素。考虑到下面关于<em class="mh">的细节，useState() </em>函数以粗体显示。</p><ul class=""><li id="1b28" class="kv kw hi jy b jz ka kc kd kf kx kj ky kn kz kr la lb lc ld bi translated">我们传递一个默认值2。当组件第一次挂载时，意味着要掷出两个骰子。</li><li id="fc57" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">我们将返回值命名为diceCount和setDiceCount。前者是国家的名称。后者是一个设置值的函数。在React组件中，不要直接设置状态变量的值(diceCount)。使用set <state variable="" name="">重新渲染组件，更新用户界面。</state></li></ul><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="2b9b" class="mn lk hi mj b fi mo mp l mq mr">❌ diceCount = 1</span><span id="b357" class="mn lk hi mj b fi ms mp l mq mr">✅ setDiceCount(1)</span></pre><p id="072b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">注意，<em class="mh">选择游戏板组件中的</em>元素。在下拉选择改变时，我们调用一个函数，<em class="mh"> updateDiceCount()。</em>它为组件设置骰子计数状态。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="2bfb" class="mn lk hi mj b fi mo mp l mq mr">const <strong class="mj hs">updateDiceCount </strong>= (evt) =&gt; setDiceCount(parseInt(evt.target.value));</span><span id="cd8b" class="mn lk hi mj b fi ms mp l mq mr">&lt;select <strong class="mj hs">onChange={ updateDiceCount }</strong> &gt;<br/>   ...<br/>&lt;/select&gt;</span></pre><p id="2471" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">让我们更新游戏板组件，使用下拉菜单设置的状态。请记住，游戏板组件的责任只是选择一个或两个骰子。然后，它使用Draw Dice组件来掷骰子，而掷骰子又使用Dice组件来显示它选择的一方。考虑下面代码片段中的粗体代码行。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="0f44" class="mn lk hi mj b fi mo mp l mq mr">function GameBoard(){  <br/> <br/>  const [diceCount, setDiceCount] = useState(2);<br/>  const updateDiceCount = (evt) =&gt; setDiceCount(parseInt(evt.target.value) || 2);</span><span id="af23" class="mn lk hi mj b fi ms mp l mq mr">return  &lt;div className="flex-column-container"&gt;<br/><strong class="mj hs">          { diceCount === 1 ? &lt;div className="flex-row-container"&gt;&lt;RollDice isIsolated={false}/&gt;&lt;/div&gt;<br/>            :  &lt;div className="flex-row-container"&gt;&lt;RollDice single={true}/&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt; &lt;RollDice isIsolated={true}/&gt;&lt;/div&gt;}</strong><br/>        <br/>        &lt;div className="go-center"&gt;<br/>           &lt;select name="dice-count" defaultValue="2" onChange={ updateDiceCount } id="dice-count" &gt;<br/>            &lt;option value="1"&gt;●&lt;/option&gt;<br/>            &lt;option value="2"&gt;●●&lt;/option&gt;<br/>        &lt;/select&gt;<br/>        &lt;/div&gt;</span><span id="8bf0" class="mn lk hi mj b fi ms mp l mq mr">&lt;/div&gt;;<br/>}</span></pre><p id="f61b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">注意，我们对diceCount状态变量执行条件检查。设置状态后，组件会重新呈现。根据状态，它返回<em class="mh"> roll dice </em>组件的一个或两个元素。</p><h2 id="1eab" class="mn lk hi bd ll nl nm nn lp no np nq lt kf nr ns lv kj nt nu lx kn nv nw lz ho bi translated">使用效果</h2><p id="3a06" class="pw-post-body-paragraph jw jx hi jy b jz mb is kb kc mc iv ke kf md kh ki kj me kl km kn mf kp kq kr hb bi translated">这是React中另一个非常有用的钩子。效果(或副作用)超出了组件主要功能的范围。例如，一个效果从一个远程服务或一个Web套接字的订阅中检索数据，等等。组件主要执行演示。然而，由不同的JavaScript对象检索的数据会影响组件及其表示；因此产生了副作用。</p><p id="50bb" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">在当前示例的范围内，我们使用这个钩子在组件安装后以及每次组件发生变化时执行一个动作。效果钩子在组件第一次安装后被调用，每次组件中发现一个变化时被调用，这样就可以执行清除操作了。</p><p id="651f" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">掷骰子组件为骰子生成随机数。它需要在每次父组件游戏板呈现变化时发生。如上所述，每当组件识别出一个变化时，就会调用一个效果挂钩。考虑以下从Roll Dice组件复制的代码片段。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="0e85" class="mn lk hi mj b fi mo mp l mq mr">1. useEffect(() =&gt; {<br/>2.  setDraw(Math.round((Math.random()*5) + 1));    <br/>3. }, [props.isIsolated]);</span></pre><ul class=""><li id="0a64" class="kv kw hi jy b jz ka kc kd kf kx kj ky kn kz kr la lb lc ld bi translated">useEffect的第一个参数是一个函数。我们用调用效果时需要运行的代码行来定义这个函数。React在适当的时候调用这个函数作为效果。</li><li id="f34d" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">在上面的例子中，effect调用了一个<em class="mh"> setDraw() </em>函数，该函数为变量<em class="mh"> draw设置状态。</em>我们稍后将看到在JSX从组件返回时，状态变量<em class="mh"> draw </em>为骰子的一面保存一个数字。每次改变时，骰子滚动一面。</li><li id="61b9" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">随机数是使用数学函数生成的。它生成一个介于0和1之间的浮点数。第2行确保它被转换为值1到6中的一个。</li><li id="5ad2" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">useEffect的第二个参数是一个预期会改变的变量数组。React仅在识别到这些变量的变化时调用效果。</li></ul><blockquote class="mt mu mv"><p id="cd39" class="jw jx mh jy b jz ka is kb kc kd iv ke mw kg kh ki mx kk kl km my ko kp kq kr hb bi translated">如果您只需要在组件挂载后调用一个效果，并且不再调用(在组件的生命周期中调用一次)，请为第二个参数传递一个空数组。</p></blockquote><p id="c506" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">或者，我们可以从效果中返回一个函数，在组件卸载时调用该函数进行清理。考虑下面的代码片段，</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="0b86" class="mn lk hi mj b fi mo mp l mq mr">useEffect(() =&gt; {<br/> setDraw(Math.round((Math.random()*5) + 1));  <br/><strong class="mj hs"> return () =&gt; console.log ("clean up happens here");</strong><br/>}, [props.isIsolated]);</span></pre><p id="cb8b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">到目前为止，在本节中，我们已经看到了Roll Dice组件中的核心逻辑。然而，骰子在最终显示一个值(或一面)之前滚动了几次。为了模拟这种行为，我修改了示例，使其在显示数字之前滚动任意15次。请参见下面的最后一个组件。</p><pre class="jh ji jj jk fd mi mj mk ml aw mm bi"><span id="59f8" class="mn lk hi mj b fi mo mp l mq mr">function RollDice(props){<br/>  const [draw, setDraw] = useState(1);  <br/>  let counter= 0;<br/>  <br/>  useEffect(() =&gt; {<br/><strong class="mj hs">    const interval = setInterval(() =&gt; {<br/>      counter += 1;<br/>      if(counter &gt;= 15)<br/>        clearInterval(interval);</strong></span><span id="1c21" class="mn lk hi mj b fi ms mp l mq mr"><strong class="mj hs">setDraw(Math.round((Math.random()*5) + 1));     <br/>    }, 100);</strong></span><span id="55a9" class="mn lk hi mj b fi ms mp l mq mr">}, [props.isIsolated]);<br/> <br/>  return &lt;Dice draw={draw} /&gt;;<br/>}</span></pre><p id="514a" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">注意，我们使用<em class="mh"> setInterval </em> () JavaScript函数来运行每隔几毫秒(准确地说是一百毫秒)掷骰子的语句。一旦计数器达到15，即掷骰子的次数，我们就清除间隔并显示骰子的最终抽签结果。</p><p id="e8dc" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">请记住，掷骰子的主要功能是生成一个随机数并将该值传递给骰子组件，以便它在骰子上显示给定的数字。注意，返回语句。它在draw时传递生成的随机数作为骰子组件的道具。</p><p id="e8eb" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">有关组件代码示例，请参考下面的jsdild。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="kt ku l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">JS小提琴，掷骰子样品</figcaption></figure><h1 id="8dcc" class="lj lk hi bd ll lm ln lo lp lq lr ls lt ix lu iy lv ja lw jb lx jd ly je lz ma bi translated">结论</h1><p id="daf5" class="pw-post-body-paragraph jw jx hi jy b jz mb is kb kc mc iv ke kf md kh ki kj me kl km kn mf kp kq kr hb bi translated">在本文中，我们创建了一个掷骰子的React示例应用程序。我们创建了三个组件。</p><p id="ce3d" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">a.骰子组件呈现骰子以显示骰子的六个面之一。</p><p id="4d1c" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">b.Roll Dice组件，它生成一个随机数，并使用上述组件在骰子上显示随机数。</p><p id="a702" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">c.游戏板组件，允许用户选择滚动一个或两个骰子。</p><p id="2cf4" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">使用这个代码示例，我们讨论了React的基础知识</p><ul class=""><li id="e41c" class="kv kw hi jy b jz ka kc kd kf kx kj ky kn kz kr la lb lc ld bi translated">成分</li><li id="53c3" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">小道具</li><li id="3a3c" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">使用状态挂钩</li><li id="fdc3" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">使用效果挂钩</li></ul><blockquote class="nx"><p id="c8c5" class="ny nz hi bd oa ob oc od oe of og kr dx translated"><em class="oh">编码快乐！顺便在这里多了解一下我和我的看法，</em><a class="ae ks" href="https://codevenkey.com/" rel="noopener ugc nofollow" target="_blank"><em class="oh">CodeVenkey</em></a><em class="oh">/</em><a class="ae ks" href="https://twitter.com/keertikotaru" rel="noopener ugc nofollow" target="_blank"><em class="oh">Twitter</em></a></p></blockquote><h1 id="a0c6" class="lj lk hi bd ll lm ln lo lp lq lr ls lt ix oi iy lv ja oj jb lx jd ok je lz ma bi translated">参考资料和有用的链接</h1><ul class=""><li id="2857" class="kv kw hi jy b jz mb kc mc kf ol kj om kn on kr la lb lc ld bi translated">React文档—<a class="ae ks" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/</a></li><li id="2662" class="kv kw hi jy b jz le kc lf kf lg kj lh kn li kr la lb lc ld bi translated">为了呈现骰子，代码示例使用了一个图像。你可以选择用CSS构建骰子。参考JavaScript Jeep关于<em class="mh">在CSS中的Flexbox中创建骰子的文章—</em><a class="ae ks" href="https://betterprogramming.pub/creating-dice-in-flexbox-in-css-a02a5d85e516" rel="noopener ugc nofollow" target="_blank">https://better programming . pub/Creating-Dice-in-Flexbox-in-CSS-a02a 5d 85 e 516</a></li></ul></div></div>    
</body>
</html>