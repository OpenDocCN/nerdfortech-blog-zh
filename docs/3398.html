<html>
<head>
<title>Implementing space shooter game features - Camera shake</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现太空射击游戏功能-相机抖动</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-camera-shake-51c6eb02704a?source=collection_archive---------18-----------------------#2021-06-08">https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-camera-shake-51c6eb02704a?source=collection_archive---------18-----------------------#2021-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="ed1f" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="4c94" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">Unity空间射击游戏新增功能快速回顾</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/053d42a0675c4c99f3b6ec46f9bd35c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*G-2Tw6qYqVnTLTPzqAmbAw.gif"/></div></div></figure><p id="5db7" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:用Unity实现一个太空射击游戏的相机抖动效果。</p><p id="eb41" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在之前的帖子中，我用Unity实现了一个<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-space-shooter-game-features-ammo-limit-4da7533e2d71">系统来限制我的太空射击游戏中玩家</a>的弹药。现在是时候实现一个相机抖动效果来显示玩家每次受到的伤害。</p><h1 id="641e" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">创建摇动效果</h1><p id="3f9f" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了创建抖动效果，让我们创建一个新的脚本并将其附加到主摄像机:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ln lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/6e1b848ea44df891376926fc77b94149.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/1*GKbV_Ko7V70esarxT_fy4A.gif"/></div></figure><figure class="lm jl ls lo lp lq lr paragraph-image"><img src="../Images/5ff7de1b215f46f5671439954feaf3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*WDwZ2Sck4_AdLga9m7SlUA.png"/></figure></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lt"><img src="../Images/40c79c8e6c41b28679f766edf6bbf270.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vfh5Pjrz-mXXIYcXdTobgw.png"/></div></div><figcaption class="lu lv et er es lw lx bd b be z dx translated">附加到主摄像机的新脚本。</figcaption></figure><p id="bfb4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们打开脚本并创建变量来存储新属性的值，相机将不得不模拟抖动:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ly lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/7f1da8e5e64335a81d173d41be9606bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*mwZpCugz1TJ0gYBuMDxXzg.png"/></div></figure><figure class="lm jl lz lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/3425538113de323a9ccb1ebf3f88515d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*rjQKYuADYaX04PO2BmBsKA.png"/></div><figcaption class="lu lv et er es lw lx bd b be z dx ma di mb mc translated">第一幅图像的值将用于修改第二幅图像的原始值。</figcaption></figure></div><p id="52f6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">通过使用<strong class="ju hs">【序列化字段】</strong>，我们将能够从检查器中编辑私有变量以尝试不同的值:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es md"><img src="../Images/791e32eefa9c822976b8373bdc390b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yd6XPVn_ptWVWe5tXFw_Zw.png"/></div></div></figure><p id="38b3" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">让我们也添加新的变量来存储相机的原始值，以在模拟抖动效果后恢复它们:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es me"><img src="../Images/96b45b946ddf4659f51f168e113db27a.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*3mGE_pLCI4ommpdiyn0ggQ.png"/></div></div></figure><p id="5d10" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们创建一些变量来帮助这个过程:</p><ul class=""><li id="fbd2" class="mf mg hi ju b jv jw jy jz kb mh kf mi kj mj kn mk ml mm mn bi translated"><em class="mo">_延迟</em></li></ul><p id="63c3" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了避免内存分配，我们创建了一个WaitForSeconds变量，我们将在后面定义这个变量，并在一个协程中使用它来帮助实现shake效果。</p><ul class=""><li id="f5b5" class="mf mg hi ju b jv jw jy jz kb mh kf mi kj mj kn mk ml mm mn bi translated"><em class="mo"> _newPos </em>，<em class="mo"> _newRot </em></li></ul><p id="121b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">定义摄像机新位置和旋转的Vector3值。</p><ul class=""><li id="ef65" class="mf mg hi ju b jv jw jy jz kb mh kf mi kj mj kn mk ml mm mn bi translated"><em class="mo"> _invertXYPos </em></li></ul><p id="7521" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">乘以位置向量，只反转X轴和Y轴。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mp"><img src="../Images/58e61bedb5945b02a49ee7ac97d59913.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*CLX2YwVPVd493TMwrqqEIw.png"/></div></figure><p id="9232" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在在<strong class="ju hs"> Start </strong>方法中，让我们初始化摄像机和帮助变量的初始值:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mq lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/d9c7c41eb82ea43d10f502dc4fe8b4d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*S6-d7PD-3EDOju94cjgK-Q.png"/></div></figure><figure class="lm jl mr lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/af8ab9d299b80306f00befd951c68f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*HOdBkZA_sTzFI9rz_bZhbw.png"/></div><figcaption class="lu lv et er es lw lx bd b be z dx ms di mt mc translated">延迟除以3，因为它将在协程中使用3次。</figcaption></figure></div><p id="9c35" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们<a class="ae ko" href="https://fas444.medium.com/using-coroutines-in-unity-5fa1d51e0055" rel="noopener">创建一个新的协程</a>来模拟震动效果:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mu"><img src="../Images/2d3b47af8e300ba791b64b45349ba1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yLNMhxDSVTvrdfE9R8GfIQ.gif"/></div></div><figcaption class="lu lv et er es lw lx bd b be z dx translated">该方法是公开的，玩家在受到伤害时可以调用。</figcaption></figure><p id="3f0b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">首先，让我们用新值改变主摄像机的视野(FOV)，然后，让我们等待延迟运行下一行:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mv"><img src="../Images/bffa3c59af4b22108c763f797773452a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qx9NpQ8FuicFByiqDlQrRg.png"/></div></div></figure><p id="60db" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们用新值更改摄像机的位置和旋转，然后，让我们等待另一个延迟来运行下一行:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mw"><img src="../Images/4dbbb83abc644390ddae3319a45b2f05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SXASsdNy-Gq-XLrJIqECzw.png"/></div></div></figure><p id="6a4f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们用反转的新值来改变摄像机的位置和旋转，以等待最后的延迟:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mx"><img src="../Images/a92876ef8b341bebd6f26009bfc555cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZV4aDsv9cJsSW_jMIP_Xcg.png"/></div></div></figure><p id="7316" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，让我们恢复主摄像头的原始值(FOV、位置和旋转):</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es my"><img src="../Images/2c95f3b910aab6c6e8ae2c506b142bc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BnWmBYtbqWzuIbxva2r3Fw.png"/></div></div></figure><h1 id="d1cd" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">触发震动效果</h1><p id="7237" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了执行摇动效果，让我们打开播放器脚本并创建一个新变量来存储对主摄像机的<strong class="ju hs"> CameraShake </strong>脚本组件的引用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mz"><img src="../Images/b4415ef4c17a9f2d3a8c44024d4cfd47.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*MAJ5RpkXdF14oCi4fs3W0w.png"/></div></figure><p id="1be4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们初始化<strong class="ju hs">开始</strong>方法中的变量:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es na"><img src="../Images/33e378329cfbca7b960c08925fbc9961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DzMEW4Kl3B9vjAvFW-cBRQ.png"/></div></div></figure><p id="b3e1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">不要忘记添加相应的条件来检测是否没有找到脚本:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nb"><img src="../Images/38b61b606ab37a448462bd436b39eb28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*LQJ2fheQg31dbwZ8L-zeBw.png"/></div></figure><p id="12d0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，在处理玩家伤害的方法中，让我们使用<strong class="ju hs"> StartCoroutine </strong>方法添加对相机抖动协程的调用:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl nc lo lp lq lr paragraph-image"><img src="../Images/b997f917c3b06b41ac79501d358c0903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*InGoatwGNw9DEViyISJHmg.png"/></figure><figure class="lm jl nd lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/8d25f8ea29b7bdf5eee08864b119c88e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*_IT3skpDcUJYBms3k2c8Dw.png"/></div></figure></div><p id="73e7" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们在Unity中运行游戏，我们会看到每次玩家受到伤害时，摄像机都会抖动:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/983e83e6a9203d49d0db417c7d6175a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mfjv1RK_mKM1NllE1OOROw.gif"/></div></div></figure><p id="e756" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们实现了一个相机抖动效果！:d .我会在下一篇文章中看到你，在那里我会展示更多添加到我的Unity太空射击游戏中的功能。</p></div><div class="ab cl ne nf gp ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="hb hc hd he hf"><blockquote class="nl nm nn"><p id="17b4" class="js jt mo ju b jv jw is jx jy jz iv ka no kc kd ke np kg kh ki nq kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>