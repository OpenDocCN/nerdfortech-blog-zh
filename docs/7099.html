<html>
<head>
<title>Dash’s RISC-y business</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">达什的 RISC-y 业务</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/dashs-risc-y-business-d39e2ba9d042?source=collection_archive---------1-----------------------#2022-07-21">https://medium.com/nerd-for-tech/dashs-risc-y-business-d39e2ba9d042?source=collection_archive---------1-----------------------#2022-07-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ef81" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在 RISC-V 上使用 Dart</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/762febe0d664527c842b81e76c7ba340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tclSZ5Qc_MoSgAyK"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">林 2022 年，破折号抓住一块荔枝板</figcaption></figure><h1 id="6216" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">介绍</h1><p id="a312" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">Dart 2.17 发布会包括增加对 RISC-V 架构的(实验性)支持，这对我来说是该版本的亮点之一。</p><p id="a3cd" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">对于那些以前可能没有听说过它的人来说，<a class="ae lb" href="https://en.wikipedia.org/wiki/RISC-V" rel="noopener ugc nofollow" target="_blank"> RISC-V </a>是一种相对较新的 CPU 架构，重要的是它有一个开放的标准指令集架构(ISA ),经过十多年，现在终于出现在真正的硬件产品中。</p><h1 id="642b" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">选择正确的缩写</h1><p id="d9ec" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">虽然已经有一些 RISC-V SoC 开发板发布，但第一批价格合理且广泛可用的是<a class="ae lb" href="https://linux-sunxi.org/Sipeed_Lichee_RV" rel="noopener ugc nofollow" target="_blank"> Sipeed Lichee RV </a>和<a class="ae lb" href="https://linux-sunxi.org/D1" rel="noopener ugc nofollow" target="_blank"> Allwinner D1 SoC </a>。</p><p id="0590" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">从他们的网上商店订购了一个之后，我最近收到了一个荔枝房车板，并热衷于在上面使用 Dart 进行测试！</p><p id="d48d" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">需要注意的一件重要事情是，Dart 仅支持在 Linux 上的 RISC-V <a class="ae lb" href="https://github.com/dart-lang/sdk/wiki/Supported-Architectures" rel="noopener ugc nofollow" target="_blank"> rv32gc 和 rx64gc 上运行，并且还有 RISC-V ISA 的其他变体，例如功率低得多的 RV32IMC，它开始出现在微控制器中，如</a><a class="ae lb" href="https://www.espressif.com/en/news/ESP32_C3" rel="noopener ugc nofollow" target="_blank"> Espressif ESP32-C3 </a>。</p><h1 id="2f40" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">BS 什么？</h1><p id="93b6" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">当然，没有软件，硬件只不过是一纸空文。这些开发板的供应商通常会提供一个操作系统，作为<a class="ae lb" href="https://en.wikipedia.org/wiki/Board_support_package" rel="noopener ugc nofollow" target="_blank">板支持包(BSP) </a>的一部分在板上运行。然而，尽管这些 bsp 几乎总是基于 Linux(或 Android 风格),但通常基于过时(甚至古老)的 Linux 内核版本和类似过时的主流 Linux 发行版(例如 Ubuntu 或 Debian ),并且可能包含二进制 blobs 或其他对专有软件的依赖。几乎不是我们在嵌入式设备上运行 Dart 的理想起点！</p><h1 id="70e3" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">安装在 D1 上</h1><p id="fd4a" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">虽然使用供应商 bsp 的另一种选择是从头开始构建自己的 Linux 内核或 Linux 发行版，但对我来说幸运的是，其他人已经在这方面做了大量工作，并为此铺平了道路。</p><p id="028a" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">所以我最终使用安德里亚斯的<a class="ae lb" href="https://andreas.welcomes-you.com/boot-sw-debian-risc-v-lichee-rv/" rel="noopener ugc nofollow" target="_blank">预建 Linux 内核和 rootfs 来放在 SD 卡上。一旦你把它插入到 Lichee boards 的 sd 卡插槽中，你就可以在主板上运行 Debian 发行版了，不会有任何问题。网页上的说明非常全面，所以我不会在这里重复，除了指出我无法让板直接连接到我的 wifi AP 上，所以我最终将 USB UART 适配器连接到它和我的笔记本电脑，以获得对板的串行控制台访问。</a></p><p id="ba6c" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">一旦 Debian 在 Lichee 上启动并运行，很简单的事情就是设置 Wifi，然后在 SSH 可用的情况下，使用<code class="du lh li lj lk b">scp</code>复制 RISC-V 的 Dart SDK(RV 64 GC ),现在您可以从<a class="ae lb" href="https://dart.dev/get-dart/archive#beta-channel" rel="noopener ugc nofollow" target="_blank"> Beta </a>或 Dev Dart 通道获得。</p><p id="be8d" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">一旦安装了 Dart SDK，就可以像在任何其他运行 Linux 的机器上一样使用它。</p><h1 id="c126" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">状态</h1><p id="e946" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">鉴于 RISC-V 的 Dart“实验”状态，当然 RISC-V 端口仍有许多已知的问题。其中包括<a class="ae lb" href="https://github.com/dart-lang/sdk/issues/48164" rel="noopener ugc nofollow" target="_blank">不完全的 FFI 支持</a>以及<a class="ae lb" href="https://github.com/dart-lang/sdk/issues/49253" rel="noopener ugc nofollow" target="_blank">在非 AOT 模式下的低性能</a>。第二个问题是目前最大的限制，也就是说只有 AOT 能够提供足够好的性能在 Lichee 板上运行 Dart 应用程序。</p><h1 id="ac46" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">输入－输出</h1><p id="25fe" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">当然，让 Dart 命令行程序在 SSH 会话中工作只是一个开始，对于小型嵌入式开发板来说并不令人兴奋，所以在下一篇文章中，我将研究如何让您的 Dart 应用程序与 Lichee 板上可用的一些硬件 I/O 进行对话。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="aef8" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">我希望这对你有所帮助，如果有或者你有任何其他方便的技巧可以分享，请在下面的评论中或者通过<a class="ae lb" href="https://twitter.com/mklin" rel="noopener ugc nofollow" target="_blank"> Twitter </a>告诉我。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="b1ab" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated"><em class="ls">原载于</em><a class="ae lb" href="https://manichord.com/blog/posts/dash-risc-y-business.html" rel="noopener ugc nofollow" target="_blank"><em class="ls">https://manichord.com</em></a><em class="ls">。</em></p></div></div>    
</body>
</html>