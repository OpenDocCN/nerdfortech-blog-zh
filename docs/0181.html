<html>
<head>
<title>How To Deploy Laravel Project on EC2 AWS .</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在EC2 AWS上部署Laravel项目？</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-deploy-laravel-project-on-ec2-aws-6d004a57bb1f?source=collection_archive---------0-----------------------#2020-06-27">https://medium.com/nerd-for-tech/how-to-deploy-laravel-project-on-ec2-aws-6d004a57bb1f?source=collection_archive---------0-----------------------#2020-06-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5293" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将学习如何在AWS EC2(弹性云计算)实例上部署laravel项目。</p><p id="1657" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">先决条件</strong></p><p id="bad0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在AWS EC2实例上创建一个Ubuntu服务器。<br/>如果还没有创建？<strong class="ih hj"> </strong> <a class="ae jd" rel="noopener" href="/@rahul26021999/how-to-create-a-ubuntu-20-04-server-on-aws-ec2-elastic-cloud-computing-5b423b5bf635"> <strong class="ih hj">了解如何在AWS EC2(弹性云计算)上创建Ubuntu 20.04服务器</strong> </a></p><h1 id="e5b7" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">在EC2上部署Laravel项目的步骤</h1><p id="8e14" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">使用您的私钥(密钥对)连接到EC2实例。<br/> <a class="ae jd" rel="noopener" href="/@rahul26021999/how-to-connect-to-ec2-instance-aws-from-windows-ubuntu-da97c0cc9c8">了解如何连接到EC2实例</a>。</p><h2 id="5f75" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">更新您的库</strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="ce32" class="kh jf hi la b fi le lf l lg lh">$ sudo apt-get update</span></pre><h2 id="8cc6" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">安装Apache2 </strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="a817" class="kh jf hi la b fi le lf l lg lh">$ sudo apt-get install apache2</span></pre><p id="7875" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在复制EC2实例的IPv4公共IP地址，并点击浏览器。如果你看到一个类似下面的屏幕，你就可以开始了。Apache服务器正在工作！</p><figure class="kv kw kx ky fd lj er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es li"><img src="../Images/1cfb9ed98280d7474d3b1590632b013f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7wwp_vyk3qeTkLghR8PKFQ.png"/></div></div></figure><h2 id="93fb" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">安装PHP和有用的包</strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="8a9f" class="kh jf hi la b fi le lf l lg lh">$ sudo apt-get install php</span><span id="3b50" class="kh jf hi la b fi lq lf l lg lh">$ php --version</span><span id="3fa6" class="kh jf hi la b fi lq lf l lg lh">$ sudo apt-get install php7.4-cli php7.4-common php7.4-curl php7.4-gd php7.4-json php7.4-mbstring php7.4-intl php7.4-mysql php7.4-xml php7.4-zip</span></pre><p id="3bac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常，当用户从web服务器请求一个目录时，Apache会首先寻找一个名为<strong class="ih hj">index.html</strong>的文件。如果你想改变Apache来服务php文件而不是其他文件，移动<strong class="ih hj">index.php</strong>到<strong class="ih hj"> dir.conf </strong>文件的第一个位置，如下所示。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="03e2" class="kh jf hi la b fi le lf l lg lh">$ sudo vi /etc/apache2/mods-enabled/dir.conf</span></pre><figure class="kv kw kx ky fd lj er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es lr"><img src="../Images/4e97770ec0d075e9ab4fca8625e3c892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wInQPCivfCempNvNbNLPsQ.png"/></div></div></figure><h2 id="1c9b" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated">安装MySQL服务器</h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="de83" class="kh jf hi la b fi le lf l lg lh">$ sudo apt-get install mysql-server</span></pre><p id="d226" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将安装mysql服务器，但不会提示配置mysql。</p><h2 id="6cae" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated">配置MySQL</h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6bae" class="kh jf hi la b fi le lf l lg lh">$ sudo mysql_secure_installation</span></pre><p id="cb42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，您可以对MySQL安装的安全选项进行一些更改。</p><p id="192c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，尽管您已经为根用户设置了密码，但是这个用户在连接到MySQL shell时并没有被配置为使用密码进行验证，因为它默认使用的是T0。</p><p id="2729" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了使用密码作为根用户<strong class="ih hj">连接到MySQL，您需要使用以下命令将其认证方法从<code class="du ls lt lu la b">auth_socket</code>切换到<code class="du ls lt lu la b">mysql_native_password </code>。</strong></p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="fb69" class="kh jf hi la b fi le lf l lg lh">$ sudo mysql</span></pre><p id="e2a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要配置<strong class="ih hj"> root </strong>帐户使用密码进行身份验证，请运行以下<code class="du ls lt lu la b">ALTER USER</code>命令。请注意，该命令将更改您在<strong class="ih hj"> mysql_secure_installation中设置的<strong class="ih hj"> root </strong>密码。</strong></p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="561b" class="kh jf hi la b fi le lf l lg lh">mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'yourpassword';</span></pre><p id="d15e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，运行<code class="du ls lt lu la b">FLUSH PRIVILEGES</code>,它告诉服务器重新加载授权表并使您的新更改生效:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="adb1" class="kh jf hi la b fi le lf l lg lh">FLUSH PRIVILEGES;</span></pre><p id="4e19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您已经完成了在EC2上设置mysql服务器的工作。您可以在您的laravel项目中使用您的凭据。</p><h2 id="0244" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">安装作曲者</strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="ca04" class="kh jf hi la b fi le lf l lg lh">$ php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"</span><span id="33d6" class="kh jf hi la b fi lq lf l lg lh">$ php -r "if (hash_file('sha384', 'composer-setup.php') === 'e0012edf3e80b6978849f5eff0d4b4e4c79ff1609dd1e613307e16318854d24ae64f26d17af3ef0bf7cfb710ca74755a') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;"</span><span id="799b" class="kh jf hi la b fi lq lf l lg lh">$ php composer-setup.php</span><span id="ec26" class="kh jf hi la b fi lq lf l lg lh">$ <!-- -->php composer-setup.php --install-dir=bin --filename=composer</span><span id="a4ad" class="kh jf hi la b fi lq lf l lg lh">$ php -r "unlink('composer-setup.php');"</span><span id="3829" class="kh jf hi la b fi lq lf l lg lh">$ composer --version<br/></span></pre><h2 id="1327" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">安装Git </strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="3c01" class="kh jf hi la b fi le lf l lg lh">$ sudo apt-get install git-core</span></pre><h2 id="8ab2" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">克隆您的存储库</strong></h2><p id="c601" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">切换到<strong class="ih hj"> /var/www/html </strong>目录，使用下面的命令克隆您的Laravel项目。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6b03" class="kh jf hi la b fi le lf l lg lh">$ cd /var/www/html</span><span id="648c" class="kh jf hi la b fi lq lf l lg lh">$ sudo git clone <a class="ae jd" href="https://github.com/rahul26021999/Prepareurself.git" rel="noopener ugc nofollow" target="_blank">https://github.com/username/reponame.git</a></span><span id="f92d" class="kh jf hi la b fi lq lf l lg lh">$ cd reponame</span></pre><h2 id="c014" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">添加。将env文件添加到您的Laravel项目中</strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6a5e" class="kh jf hi la b fi le lf l lg lh">$ sudo vi .env</span></pre><h2 id="a81f" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">在项目中安装库</strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6c1a" class="kh jf hi la b fi le lf l lg lh">$ sudo composer install</span></pre><h2 id="26f3" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">项目的读写权限</strong></h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="1060" class="kh jf hi la b fi le lf l lg lh">sudo chmod 777 -R storage/<br/>sudo chmod 777 -R bootstrap/</span></pre><h2 id="fbee" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated"><strong class="ak">阿帕奇配置</strong></h2><p id="1c99" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">默认情况下，Apache open <code class="du ls lt lu la b">/var/www/html/index.html </code>现在，当我们转到EC2的公共IP时，我们必须打开我们的Laravel项目。<br/>转到<code class="du ls lt lu la b">/etc/apache2/sites-available/000-default.conf </code>并如下所示更改DocumentRoot。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="734a" class="kh jf hi la b fi le lf l lg lh">$ sudo vi /etc/apache2/sites-available/000-default.conf</span></pre><figure class="kv kw kx ky fd lj er es paragraph-image"><div class="er es lv"><img src="../Images/6213dcbb8001dcb778032c319990a90e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*25KAlZHqeG6H8iK22_3fRw.png"/></div></figure><h2 id="e680" class="kh jf hi bd jg ki kj kk jk kl km kn jo iq ko kp js iu kq kr jw iy ks kt ka ku bi translated">重启你的Apache</h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="f675" class="kh jf hi la b fi le lf l lg lh">$ sudo systemctl restart apache2</span></pre><p id="406a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您已经成功地在AWS上部署了您的laravel项目，<br/>您可以通过您的公共IPV4 IP地址轻松地访问它。</p></div></div>    
</body>
</html>