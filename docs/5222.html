<html>
<head>
<title>From Zero to Hero Django Admin: Set-Up (Part1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从零到英雄Django管理:设置(第一部分)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/from-zero-to-hero-django-admin-set-up-part1-253cd3a5a723?source=collection_archive---------5-----------------------#2021-09-09">https://medium.com/nerd-for-tech/from-zero-to-hero-django-admin-set-up-part1-253cd3a5a723?source=collection_archive---------5-----------------------#2021-09-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="052a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">设置，模型注册，元关键字，应用程序部分，管理网站标题</h2></div><p id="4be2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大家好！想要喘口气，我决定在学习数据的同时开始写这个系列。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/621589dae0758c3f0ab73e538a132334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o22fbIZ82oppUXc8jHfeDQ.jpeg"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">费萨尔在<a class="ae kj" href="https://unsplash.com/s/photos/django?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5aa2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我参加了一个为期4个月的机器学习训练营。在此期间，我想只关注与数据相关的主题。老实说，与此同时我仍然想继续web开发，但是我不能提高我关于web开发的新技术的知识，因为我不愿意在这段时间花精力在数据以外的事情上。因此，我决定开始这个系列。我将根据我已有的信息来写。这个系列将是关于“Django Admin”的定制。事实上，我已经有了一个关于这个话题的<a class="ae kj" href="https://youtube.com/playlist?list=PLhbONZ0ITs2QKo-fFNhq5mTPISqLSIBei" rel="noopener ugc nofollow" target="_blank"> Youtube视频系列</a>和几个故事，<a class="ae kj" href="https://mebaysan.medium.com/django-admin-dashboard-g%C3%B6r%C3%BCn%C3%BCm-eklemek-d2c6ab28f5d5" rel="noopener">这个</a>和<a class="ae kj" href="https://mebaysan.medium.com/django-admin-dashboard-g%C3%B6r%C3%BCn%C3%BCmleri-%C3%B6zelle%C5%9Ftirmek-d2fbf36cae67" rel="noopener">这个</a>但是它们是土耳其语的。在用英语制作之前，我需要先提高它。为了达到这个英语水平，我的英语老师经常督促我写文章。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es kk"><img src="../Images/0ae319ffe00ba08acf42e59e1a1e123d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EbJ36UqM6tjLwYh8kK6PtQ.jpeg"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">维塔利·塔拉诺夫在<a class="ae kj" href="https://unsplash.com/s/photos/freelance-money?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9d43" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其实我也不知道这个系列会包括多少部分。我会试着在“Django Admin”中触及细节。我将展示一些使我们的管理面板更有效的包。我们将触摸“模型管理”，“自定义模板”，“导入和导出”，添加新的视图到“Django管理”等。我希望你会喜欢这次旅行。我已经开始享受这个旅程了，因为我看到了“Django Admin”的力量。我用“Django Admin”做了一些自由职业项目，得到了很好的客户反馈。如果您可以定制您的仪表板，您就不需要使用其他仪表板模板或实现仪表板前端。</p><h1 id="d550" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">让我们开始旅程吧</h1><p id="5c43" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">对于这个故事，我创建了一个虚拟环境“venv ”,并安装了Django。你可以从<a class="ae kj" href="https://github.com/mebaysan/DjangoAdminForMedium" rel="noopener ugc nofollow" target="_blank">这里</a>访问该项目的GitHub链接。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="bcd1" class="ln km hi lj b fi lo lp l lq lr">pip install django</span></pre><p id="4a25" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我将创建一个简单的Django项目并运行服务器。我将进行迁移并创建一个超级用户。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="2e5e" class="ln km hi lj b fi lo lp l lq lr">django-admin startproject fzthadmin</span><span id="db8f" class="ln km hi lj b fi ls lp l lq lr">cd fzthadmin</span><span id="f53f" class="ln km hi lj b fi ls lp l lq lr">python manage.py migrate</span><span id="b922" class="ln km hi lj b fi ls lp l lq lr">python manage.py createsuperuser</span><span id="f9eb" class="ln km hi lj b fi ls lp l lq lr">python manage.py runserver</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lt"><img src="../Images/6b8863bc33f419cce0af04da9c34164b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d1IrsoBelG8TIEOHerowQA.png"/></div></div></figure><p id="5cab" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在此之前，我们还没有做过任何有趣的事情。</p><h1 id="001c" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">创建模型</h1><p id="33f1" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">目前，我们的Django应用程序只有一个博客模型。我要创建一个新的应用程序。</p><blockquote class="lu lv lw"><p id="a05a" class="ix iy lx iz b ja jb ij jc jd je im jf ly jh ji jj lz jl jm jn ma jp jq jr js hb bi translated">正如<!-- -->你可能知道的，我们使用<code class="du mb mc md lj b">startapp</code>命令在Django中创建新的应用。</p></blockquote><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="39c4" class="ln km hi lj b fi lo lp l lq lr">python manage.py startapp blog</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es me"><img src="../Images/db551327c8252c19ee6476e652d627a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0E5B5hxpTRkRjgMPfHdfaQ.png"/></div></div></figure><p id="fed9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建模型后，我们需要进行迁移。什么是迁移？我们可以说，我们让Django知道了数据库的修改。我们使用“makemigrations”命令让Django知道，并使用“migrate”命令将它们应用到数据库。首先，我们需要将博客应用程序保存到Django的已安装应用程序中。如果我们不这样做，Django将不会理解我们有与博客应用程序相关的模型或东西。</p><p id="1df8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了将博客应用程序添加到已安装的应用程序中，我将使用<code class="du mb mc md lj b">settings.py </code>文件。正如我们所知，这个文件包含了Django项目的核心设置。我需要将应用程序添加到<code class="du mb mc md lj b">INSTALLED_APPS</code>列表中。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es me"><img src="../Images/4bb9acf9210ad8848f2e3ff21f0848ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_WSOxiiUUYbdbdaSM8KWPA.png"/></div></div></figure><p id="9b13" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我可以执行<code class="du mb mc md lj b">makemigrations</code>和<code class="du mb mc md lj b">migrate</code>命令了。如果您看到如下输出，那么您的方法是正确的。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es me"><img src="../Images/4f7ef87e55c3bb2ba3d8235faa43320c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IwL1t2m9EgRrqanyo6fhcQ.png"/></div></div></figure><h1 id="4972" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">模型注册</h1><p id="6b66" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">在本节中，我们将把博客模型注册到Django管理应用程序中。为此，我将使用位于<code class="du mb mc md lj b">blog</code>文件夹下的<code class="du mb mc md lj b">admin.py</code>。我们使用这个文件来注册模型。每个Django应用都有自己的<code class="du mb mc md lj b">admin.py</code>文件。</p><p id="1548" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在这个文件中导入了博客模型，并使用<code class="du mb mc md lj b">admin.site.register</code>函数将它注册到管理应用程序中。该功能帮助我们将模型注册到管理应用程序中。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es me"><img src="../Images/e939ddc593722e118c2625ddcd8d5ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Pw-giJLJLvaMxipYNoZDg.png"/></div></div></figure><p id="1ad1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我要去管理仪表板，我可以看到“博客”部分，如果事情做得正确。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lt"><img src="../Images/2206d37450885bf24a5d24bdde374527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXPs5o6IcUGWMdWgxNDuTg.png"/></div></div></figure><h1 id="829e" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">更改应用程序部分标题</h1><p id="001f" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">在我们去元课堂之前，我想分享一个花絮。如果我们想改变应用程序的部分标题，我们需要进入它的<code class="du mb mc md lj b">apps.py</code>文件并配置<code class="du mb mc md lj b">AppConfig </code>类。如果我设置了<code class="du mb mc md lj b">verbose_name</code>字段，则部分标题将接受它。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="a626" class="ln km hi lj b fi lo lp l lq lr">from django.apps import AppConfig</span><span id="ae0a" class="ln km hi lj b fi ls lp l lq lr">class BlogConfig(AppConfig):</span><span id="b559" class="ln km hi lj b fi ls lp l lq lr">      default_auto_field = 'django.db.models.BigAutoField'</span><span id="bb87" class="ln km hi lj b fi ls lp l lq lr">      name = 'blog'</span><span id="5c26" class="ln km hi lj b fi ls lp l lq lr">      verbose_name = 'My Blog Section'</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lt"><img src="../Images/a77d1949cf5b7f469891ad57f50df8b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLXb7CT2AtJOeqrxjAEgzw.png"/></div></div></figure><h1 id="7eb7" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">元类</h1><p id="1ee4" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">在Django，我们有“元”类。我不会解释什么是元类，但是我会提到在Django admin中使用元类可以做什么。你可以从Django的官方文档中获得更多信息。</p><p id="8a76" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以在元类中改变模型的显示名称。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/d4da96c5e9d843311f1a8fb44b573ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVJuzAfJL9BaaLgvZzp_ew.png"/></div></div></figure><p id="a42b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我告诉Django，在管理仪表板中更改模型的显示名称。如果有多个博客，Django会说“我的博客”，如果只有一个博客，它会说“我的博客”，如下所示。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mg"><img src="../Images/c10e8c8d50c1ae537d86e1bff2087c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*6_LufmyzxQkk_oP3QkEVBQ.png"/></div></figure><p id="1e02" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我会在我的应用程序中添加一些博客。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lt"><img src="../Images/1590a5a1af4a4f529e6a4b73371728f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XUzGSA3qwgcYYWaWshOm5w.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">单个博客的示例</figcaption></figure><p id="2b90" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在有另一件事可以让管理页面变得更好。如果我们转到“我的博客”页面，我们会在表格中看到类似于<code class="du mb mc md lj b">Blog object(1)</code>的博客。</p><blockquote class="lu lv lw"><p id="c64a" class="ix iy lx iz b ja jb ij jc jd je im jf ly jh ji jj lz jl jm jn ma jp jq jr js hb bi translated">不要忘记进行迁移并应用它们，因为我们已经更改了模型类。</p></blockquote><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mh"><img src="../Images/9028328500f642522791ceb9e63d07a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5AcYND9VESTz8Q76OasBOw.png"/></div></div></figure><p id="685e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以改变模型内部的<code class="du mb mc md lj b">__str__</code>方法。这是一个纯粹的Python特性。如果不知道是什么，可以在这里<a class="ae kj" href="https://www.educative.io/edpresso/what-is-the-str-method-in-python" rel="noopener ugc nofollow" target="_blank">学习</a>。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="f93c" class="ln km hi lj b fi lo lp l lq lr">def __str__(self):</span><span id="4c59" class="ln km hi lj b fi ls lp l lq lr">    return self.title</span></pre><p id="3741" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在上面的模型类中编写了代码，Django会理解它必须将对象的<code class="du mb mc md lj b">title</code>字段放到表中。这意味着它用它的标题来表示对象。如果我们从Django shell执行下面的代码，那么对象将由它的标题特性来表示。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mi"><img src="../Images/04027bb8a2fa9aa191ce5832b3942ff4.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*TBW34kxfuRpFYQOQuQCC0w.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">python manage.py shell</figcaption></figure><h1 id="ab2f" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">更改Django管理员头衔</h1><p id="033b" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">在这一节中，我们将看到如何更改Django admin的头衔。</p><ul class=""><li id="8d52" class="mj mk hi iz b ja jb jd je jg ml jk mm jo mn js mo mp mq mr bi translated"><code class="du mb mc md lj b">admin.site.title</code></li><li id="342e" class="mj mk hi iz b ja ms jd mt jg mu jk mv jo mw js mo mp mq mr bi translated"><code class="du mb mc md lj b">admin.site.header</code></li><li id="f46a" class="mj mk hi iz b ja ms jd mt jg mu jk mv jo mw js mo mp mq mr bi translated"><code class="du mb mc md lj b">admin.site.index_title</code></li></ul><p id="fa2d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于这种情况，我们需要转到<code class="du mb mc md lj b">urls.py</code>文件。下面的代码将改变管理仪表板的网站标题。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="52a7" class="ln km hi lj b fi lo lp l lq lr">admin.site.site_title = 'From Zero To Hero Django Admin'</span></pre><p id="aeaf" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的代码将改变管理员的标题。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="3e36" class="ln km hi lj b fi lo lp l lq lr">admin.site.site_header</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mx"><img src="../Images/25a0844bb81374e43b0db514febfdc24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8wxL5bOGO4i3jHMAVfxaA.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">此部分是网站标题</figcaption></figure><p id="05dd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的代码将改变索引页面的标题。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="1db5" class="ln km hi lj b fi lo lp l lq lr">admin.site.index_title = 'Welcome To FZTH Django Admin'</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es my"><img src="../Images/c9554fd9d9ae8879b4a2933694372093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWedoLr0dKC1h3jXlRRlVQ.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">这是索引标题</figcaption></figure><h1 id="e948" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">最后的想法</h1><p id="7def" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">希望你喜欢。正如我所说的，如果我们知道如何正确使用Django admin，它会对我们的项目非常有用。下一个故事再见😇</p><p id="7713" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">亲切的问候。</p></div></div>    
</body>
</html>