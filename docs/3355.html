<html>
<head>
<title>Flutter series — Connecting UI to spring boot backend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter系列—将UI连接到spring boot后端</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/flutter-series-connecting-ui-to-spring-boot-backend-f9874dc3dcd5?source=collection_archive---------4-----------------------#2021-06-07">https://medium.com/nerd-for-tech/flutter-series-connecting-ui-to-spring-boot-backend-f9874dc3dcd5?source=collection_archive---------4-----------------------#2021-06-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1375ed167a95f5223d293caba2ed17b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ud1Bm33nkF2kBtppWyhzDQ.png"/></div></div></figure><p id="a777" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，伙计们，这是股市应用程序创建教程的最后一个教程。在未来，如果可能的话，我会尝试通过向你们介绍网络套接字来修改这一点，并在我们的应用程序中获取实时市场数据。但是不要担心，伙计们，因为到目前为止，我们已经走上了创建一个完整的市场观察列表的道路。</p><p id="12cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本教程中，我将讨论如何将spring boot rest API连接到我们的Flutter UI，我们在上一个教程中几乎已经完成了。所以现在我们已经有了大部分我们需要的东西。我们的后端返回我们需要的数据，在前端，当我们获得数据时，我们有一个模型可以使用。所以我们要做的就是把这些点连接起来。</p><div class="jo jp ez fb jq jr"><a href="https://billa-code.medium.com/flutter-series-implementing-stock-market-watch-list-ui-dccd37a9ef34" rel="noopener follow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">Flutter系列—实现股票市场观察列表UI</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">嗨伙计们。在上一个教程中，我告诉你们，我们将使用Flutter来创建一个前端应用程序，以便…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">billa-code.medium.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf io jr"/></div></div></a></div><div class="jo jp ez fb jq jr"><a href="https://billa-code.medium.com/flutter-series-creating-the-first-flutter-application-793e5816f816" rel="noopener follow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">颤振系列——创造第一个颤振应用</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">嗨伙计们。所以在我们的系列教程中，现在你应该已经创建了一个spring boot应用程序，它有一个获取股票的端点…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">billa-code.medium.com</p></div></div><div class="ka l"><div class="kg l kc kd ke ka kf io jr"/></div></div></a></div><div class="jo jp ez fb jq jr"><a href="https://billa-code.medium.com/spring-boot-series-sending-stock-market-data-in-json-form-cce978a9a90d" rel="noopener follow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">Spring boot系列—以JSON形式发送股票市场数据</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">嗨伙计们。因此，我们创建了股票数据服务来获取单只股票的数据，在本教程中，我将…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">billa-code.medium.com</p></div></div></div></a></div><div class="jo jp ez fb jq jr"><a href="https://billa-code.medium.com/spring-boot-series-unit-testing-basics-3ce566250465" rel="noopener follow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">弹簧靴系列—单元测试基础</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">嗨伙计们。所以到目前为止，我们已经开发了一个基本的spring boot应用程序，它从Yahoo finance API获取数据并显示…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">billa-code.medium.com</p></div></div><div class="ka l"><div class="kh l kc kd ke ka kf io jr"/></div></div></a></div><div class="jo jp ez fb jq jr"><a href="https://billa-code.medium.com/spring-boot-series-stock-market-data-end-point-356592487254" rel="noopener follow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">春靴系列—股市数据终点</h2><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">billa-code.medium.com</p></div></div></div></a></div><div class="jo jp ez fb jq jr"><a href="https://billa-code.medium.com/create-the-first-spring-boot-app-4e930d812a22" rel="noopener follow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">创建第一个春季启动应用程序</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">我不打算深入了解许多功能和描述，而只是深入了解Spring boot的世界…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">billa-code.medium.com</p></div></div><div class="ka l"><div class="ki l kc kd ke ka kf io jr"/></div></div></a></div><p id="d868" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Flutter应用程序中，我们将使用一个名为“http”的库来让实用程序连接到我们的spring boot rest API。为此，我将更新pubspec.yaml文件中的依赖项。</p><pre class="kj kk kl km fd kn ko kp kq aw kr bi"><span id="e7bc" class="ks kt hi ko b fi ku kv l kw kx">dependencies:<br/>  http: "0.13.3"<br/>  intl: ^0.16.1<br/>  flutter:<br/>    sdk: flutter</span></pre><p id="b1f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们创建一个名为HttpService的新类来完成数据处理部分。为此，我将创建一个名为http_service.dart的文件。该类将用于连接到在URL<a class="ae ky" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a>中运行的spring boot应用程序，并访问向我们发送数据的特定端点，我们将访问<a class="ae ky" href="http://localhost:8080/getStock" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/getStock</a>。因此，如果您看一看spring boot系列的上一篇教程(上面显示了URL ),这个端点会返回一组JSON格式的数据。使用这个HttpService类可以访问这些数据。文件http_service.dart的代码如下。</p><pre class="kj kk kl km fd kn ko kp kq aw kr bi"><span id="12b3" class="ks kt hi ko b fi ku kv l kw kx">import 'dart:convert';<br/>import 'package:http/http.dart';<br/>import 'package:stock_ui/stock.dart';<br/><br/>class HttpService {<br/>  final String stockURL = "http://localhost:8080/getStock";<br/><br/>  Future&lt;List&lt;Stock&gt;&gt; getStocks() async {<br/>    Response res = await get(Uri.parse(stockURL));<br/><br/>    if (res.statusCode == 200) {<br/>      final obj = jsonDecode(res.body);<br/>      print(obj['stock'][0]['symbol']);<br/>      List&lt;Stock&gt; stocks =  new List&lt;Stock&gt;();<br/><br/>      for (int i = 0; i &lt; obj['stock'].length; i++) {<br/>        Stock stock = new Stock(company: obj['stock'][i]['name'], symbol: obj['stock'][i]['symbol'], price: obj['stock'][i]['price'], chg: obj['stock'][i]['chg']);<br/>        stocks.add(stock);<br/>      }<br/><br/>      return stocks;<br/>    } else {<br/>      throw "Unable to retrieve stock data.";<br/>    }<br/>  }<br/>}</span></pre><p id="cba7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Flutter中，当我们使用异步方法时，结果被存储到一个名为Future的数据类型中。所以为了在UI中显示这些数据，我必须使用一个名为FutureBuilder的包装器。如果我们快速看一下上面的代码，首先我们使用get函数获得响应，然后我们对数据进行解码。之后，我们循环stock参数中的数据列表，并将这些值映射到我们的Stock对象，并返回Future数据类型的股票列表。</p><p id="f63c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在对于UI部分，我们正在从home_page.dart文件添加股票数据。如果你快速浏览上一个教程，你可以看到当我们在home_page.dart中初始化StockList时，我们添加了这些来自getStocks方法的股票虚拟数据。现在，我们必须在这里进行更改，以显示我们的真实数据。</p><p id="c993" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我之前提到的，当我们使用Future data type时，必须首先创建一个FutureBuilder包装器，然后在其中我们将从HttpService类中获取数据并显示在这里。home_page.dart的代码如下。</p><pre class="kj kk kl km fd kn ko kp kq aw kr bi"><span id="2ac4" class="ks kt hi ko b fi ku kv l kw kx">import 'package:flutter/material.dart';<br/>import 'package:stock_ui/http_service.dart';<br/>import 'package:stock_ui/stock.dart';<br/>import 'package:stock_ui/stock_list.dart';<br/>import 'package:intl/intl.dart';<br/><br/>class MyHomePage extends StatelessWidget {<br/>  final title;<br/>  HttpService httpService = HttpService();<br/><br/>  MyHomePage({this.title});<br/><br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>        body: Stack(children: &lt;Widget&gt;[<br/>      Container(<br/>        padding: EdgeInsets.all(15),<br/>        width: MediaQuery.of(context).size.width,<br/>        color: Colors.black,<br/>        child: SafeArea(<br/>          child: Column(<br/>            crossAxisAlignment: CrossAxisAlignment.start,<br/>            children: &lt;Widget&gt;[<br/>              Row(<br/>                children: &lt;Widget&gt;[<br/>                  Expanded(<br/>                    flex: 1,<br/>                    child: Text(<br/>                      "Watch List",<br/>                      style: TextStyle(<br/>                          color: Colors.white,<br/>                          fontSize: 30,<br/>                          fontWeight: FontWeight.bold),<br/>                    ),<br/>                  ),<br/>                  Expanded(<br/>                    flex: 1,<br/>                    child: Text(<br/>                      DateFormat('dd MMMM yyyy').format(DateTime.now()),<br/>                      textAlign: TextAlign.right,<br/>                      style: TextStyle(<br/>                          color: Colors.grey[500],<br/>                          fontSize: 24,<br/>                          fontWeight: FontWeight.bold),<br/>                    ),<br/>                  ),<br/>                ],<br/>              ),<br/>              Column(<br/>                crossAxisAlignment: CrossAxisAlignment.stretch,<br/>                children: [<br/>                  Text(<br/>                    DateFormat().add_jm().format(DateTime.now()),<br/>                    textAlign: TextAlign.right,<br/>                    style: TextStyle(<br/>                        color: Colors.grey[500],<br/>                        fontSize: 24,<br/>                        fontWeight: FontWeight.bold),<br/>                  ),<br/>                ],<br/>              ),<br/>              Padding(<br/>                padding: const EdgeInsets.only(top: 15),<br/>                child: FutureBuilder(<br/>                  future: httpService.getStocks(),<br/>                  builder: (BuildContext context,<br/>                      AsyncSnapshot&lt;List&lt;Stock&gt;&gt; snapshot) {<br/>                    if (snapshot.hasData) {<br/>                      List&lt;Stock&gt; stocks = snapshot.data;<br/>                      return SizedBox(<br/>                          height: MediaQuery.of(context).size.height - 310,<br/>                          child: StockList(<br/>                            stocks: stocks,<br/>                          ));<br/>                    } else {<br/>                      return Center(child: CircularProgressIndicator());<br/>                    }<br/>                  },<br/>                ),<br/>              )<br/>            ],<br/>          ),<br/>        ),<br/>      )<br/>    ]));<br/>  }<br/>}</span></pre><p id="5614" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我们首先初始化了HttpService类，然后在FutureBuilder中，我们得到了从HttpService类返回的股票集作为未来变量。在加载数据之前，我们只需使用一个if条件来检查数据是否存在，从而显示一个循环的CircularProgressIndicator(内置小部件)。因此，现在当你运行flutter应用程序时，你将获得我们在spring boot应用程序中硬编码的符号集的实时数据。最终结果将是这样的。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/c7526e56834a3b21c7f77f5e6141628d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*TkgUuRaaiU4npaJbbKp_Ew.png"/></div></figure><p id="b28f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我想你已经从这些教程中学到了一些关于使用spring boot和Flutter创建web应用程序的实用知识。请鼓掌跟随我这里，我将继续张贴这些类型的酷项目教程。</p><p id="ef19" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">快乐的编码伙计们！！！</p><p id="7753" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ky" href="https://www.fiverr.com/share/AL4ej4" rel="noopener ugc nofollow" target="_blank">https://www.fiverr.com/share/AL4ej4</a></p></div></div>    
</body>
</html>