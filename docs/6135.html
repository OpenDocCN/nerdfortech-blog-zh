<html>
<head>
<title>Introduction to Playwright Trace Viewer &amp; Test Generator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">剧作家跟踪查看器和测试生成器简介</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/introduction-to-playwright-trace-viewer-test-generator-c08dcb83a752?source=collection_archive---------0-----------------------#2022-01-05">https://medium.com/nerd-for-tech/introduction-to-playwright-trace-viewer-test-generator-c08dcb83a752?source=collection_archive---------0-----------------------#2022-01-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="c006" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是跟踪查看器</h1><p id="4b86" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这是一个图形用户界面(GUI)工具，用于在脚本运行后分析捕获的剧作家痕迹。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kb"><img src="../Images/ef5e7d3dd4060f48c034241a9fa21361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Zfyy8tr-4U_98O5s.png"/></div></div></figure><h1 id="8a18" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">记录痕迹<a class="ae kn" href="https://playwright.dev/docs/trace-viewer#recording-a-trace" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="5a15" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在测试配置文件中，启用trace:“on-first-retry”选项。这将为每个重试的测试生成一个trace.zip文件。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ko"><img src="../Images/cde57e6462512b73d6c2773367808c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*up-MMkKIjKhaEOTh3yNScg.png"/></div></div></figure><p id="8fb2" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">选择</p><ul class=""><li id="c0ca" class="ku kv hi jf b jg kp jk kq jo kw js kx jw ky ka kz la lb lc bi translated"><code class="du ld le lf lg b">'off'</code> -不记录任何痕迹。</li><li id="00cc" class="ku kv hi jf b jg lh jk li jo lj js lk jw ll ka kz la lb lc bi translated"><code class="du ld le lf lg b">'on'</code> -记录每次测试的轨迹。</li><li id="23d8" class="ku kv hi jf b jg lh jk li jo lj js lk jw ll ka kz la lb lc bi translated"><code class="du ld le lf lg b">'retain-on-failure'</code>——为每个测试记录一个跟踪，但是从成功的测试运行中删除它。</li><li id="4541" class="ku kv hi jf b jg lh jk li jo lj js lk jw ll ka kz la lb lc bi translated"><code class="du ld le lf lg b">'on-first-retry'</code> -仅在第一次重试测试时记录轨迹。</li></ul><h1 id="1ae2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">查看痕迹<a class="ae kn" href="https://playwright.dev/docs/trace-viewer#viewing-the-trace" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="8ae9" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">您可以使用剧作家CLI访问存储的跟踪:</p><pre class="kc kd ke kf fd lm lg ln lo aw lp bi"><span id="6d5a" class="lq ig hi lg b fi lr ls l lt lu">// npx playwright show-trace &lt;&lt;path of trace.zip&gt;&gt;<br/>npx playwright show-trace test-results/tests-demo-demo-feature-demo-test-chromium/trace.zip</span></pre><p id="fa75" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">您可以通过输入远程跟踪的URL来查看它们。它们可能是作为CI运行的一部分创建的，使得检查远程跟踪变得简单，而无需显式下载文件。</p><pre class="kc kd ke kf fd lm lg ln lo aw lp bi"><span id="31c6" class="lq ig hi lg b fi lr ls l lt lu">npx playwright show-trace https://example.com/trace.zip</span></pre><h1 id="cbe9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">行动</h1><p id="ea82" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">当您打开trace时，您会在左侧看到由剧作家执行的活动列表:</p><p id="8f10" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">选择每个动作会显示:</p><ul class=""><li id="56f0" class="ku kv hi jf b jg kp jk kq jo kw js kx jw ky ka kz la lb lc bi translated">动作快照，</li><li id="b24c" class="ku kv hi jf b jg lh jk li jo lj js lk jw ll ka kz la lb lc bi translated">动作日志，</li><li id="1cbf" class="ku kv hi jf b jg lh jk li jo lj js lk jw ll ka kz la lb lc bi translated">源代码位置，</li><li id="54d3" class="ku kv hi jf b jg lh jk li jo lj js lk jw ll ka kz la lb lc bi translated">此操作的网络日志</li></ul><p id="9928" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">在属性窗格中。您还将看到与每个动作相关联的渲染DOM快照。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lv"><img src="../Images/9cb7f08db1f0788c3ffeaa1ea36daa3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLYC0kSbg-2OrfKBVK58fA.png"/></div></div></figure><h1 id="a33b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">截屏</h1><p id="2592" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在跟踪过程中启用屏幕截图选项时，每个跟踪记录一个屏幕截图，并以电影胶片的形式呈现。将光标悬停在电影胶片上可获得放大的图片。</p><h1 id="dfa1" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">快照</h1><p id="cd9c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">当使用快照选项进行跟踪时，剧作家为每个操作拍摄一系列完整的DOM快照。根据活动的种类，它将捕获:</p><p id="fc20" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">之前:调用动作时的快照。</p><p id="b127" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">动作:输入执行时的快照。这种图像有助于确定剧作家点击了哪里。</p><p id="cf3a" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">After:动作后的快照。</p><h1 id="f520" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是测试生成器</h1><p id="5ff6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">剧作家有能力直接构建开箱即用的测试。</p><h1 id="339f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">创建测试</h1><p id="f8ec" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">运行codegen并与浏览器交互。剧作家将为用户交互生成代码。codegen将尝试构建持久的基于文本的选择。</p><pre class="kc kd ke kf fd lm lg ln lo aw lp bi"><span id="44f8" class="lq ig hi lg b fi lr ls l lt lu">npx playwright codegen <a class="ae kn" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank">https://playwright.dev/</a></span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lw"><img src="../Images/628b3f2794ac8420be3c9f3615ffa12a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yc7KBCFhFI0j7T2eitaHUA.png"/></div></div></figure><p id="4fc6" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">您可以通过单击record按钮旁边的按钮来复制生成的代码。</p><h1 id="ed3b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">模拟设备</h1><p id="bec7" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">当模仿一个设备时，你可以记录脚本和测试。</p><pre class="kc kd ke kf fd lm lg ln lo aw lp bi"><span id="0c7d" class="lq ig hi lg b fi lr ls l lt lu"># Emulate iPhone 11.<br/>npx playwright codegen --device="iPhone 11" <a class="ae kn" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank">https://playwright.dev/</a></span></pre><h1 id="c4e4" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">模拟颜色方案和视口大小</h1><p id="da24" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">脚本和测试也可以在模仿各种浏览器功能时被记录。</p><pre class="kc kd ke kf fd lm lg ln lo aw lp bi"><span id="240a" class="lq ig hi lg b fi lr ls l lt lu"># Emulate screen size and color scheme.<br/>npx playwright codegen --viewport-size=800,600 --color-scheme=dark <a class="ae kn" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank">https://playwright.dev/</a></span></pre><h1 id="de3a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">模拟地理位置、语言和时区</h1><pre class="kc kd ke kf fd lm lg ln lo aw lp bi"><span id="b896" class="lq ig hi lg b fi lr ls l lt lu"># Emulate timezone, language &amp; location<br/># Once page opens, click the "my location" button to see geolocation in action<br/>npx playwright codegen --timezone="Europe/Rome" --geolocation="41.890221,12.492348" --lang="it-IT" maps.google.com</span></pre></div></div>    
</body>
</html>