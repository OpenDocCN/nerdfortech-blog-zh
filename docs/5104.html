<html>
<head>
<title>Introducing a Fuel System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引入燃油系统</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/introducing-a-fuel-system-cef229d1bcfd?source=collection_archive---------3-----------------------#2021-08-28">https://medium.com/nerd-for-tech/introducing-a-fuel-system-cef229d1bcfd?source=collection_archive---------3-----------------------#2021-08-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="82cb" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">游戏功能</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6ebe47ba6cca48c3eda5afaccf267f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3_cFQnFXnyOa4OruS1ZWQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">福尔科·马西在<a class="ae jn" href="https://unsplash.com/s/photos/fuel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="6d42" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在今天的文章中，我们将提高玩家的速度。我们将实现一个燃料机制，只有当玩家有足够的燃料时才允许增压，此外，只要玩家增压，燃料就会被消耗。我们也将视觉上表现玩家的增强，并为它制作新的增强。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kk"><img src="../Images/ce9b2d9bfe818ce251ac4bcc404c2bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/1*pjp_atM_FMgT2LABU0hVCg.gif"/></div></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><h2 id="41e7" class="ks kt hi bd ku kv kw kx ky kz la lb lc jx ld le lf kb lg lh li kf lj lk ll lm bi translated">燃油系统</h2><p id="939d" class="pw-post-body-paragraph jo jp hi jq b jr ln ij jt ju lo im jw jx lp jz ka kb lq kd ke kf lr kh ki kj hb bi translated">类似于我们如何创建健康和护盾行为，我们必须在<em class="ls"> Player.cs </em>中创建一些新方法:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lt"><img src="../Images/ecb225374bdc8f748d1ebba3876ae701.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*hLkQNa2bz0SmdHJWETXk2Q.png"/></div></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><h2 id="80ff" class="ks kt hi bd ku kv kw kx ky kz la lb lc jx ld le lf kb lg lh li kf lj lk ll lm bi translated">消耗燃料</h2><p id="982a" class="pw-post-body-paragraph jo jp hi jq b jr ln ij jt ju lo im jw jx lp jz ka kb lq kd ke kf lr kh ki kj hb bi translated">为了减少升压过程中的燃料消耗，我们可以使用 while 循环实现一个协程。首先，在我们当前的<em class="ls"> SetPlayerSpeed() </em>方法中，我们检查我们是否在加速。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lu"><img src="../Images/7fe55ee678d43aebb4c148abbdb6d0b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*6c9Qn-dXrofOIF_HN2niiQ.png"/></div></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="a79f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后我们可以创建一个协程，由<em class="ls"> Update() </em>中的<em class="ls"> ConsumeFuel() </em>初始化:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lv"><img src="../Images/0926b20a88f4104e0bb95f42da645905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*wWDte3lv3Pw_FQyHa979zg.png"/></div></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="9e8d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">人们可能会想:为什么不将<em class="ls"> ConsumeFuel() </em>绑定到一个键码？嗯，我们可以这样做，它会运行得很好，除了后来，当我们要添加燃料动力时，我们会遇到一个问题:在拿起燃料动力之前按住键会导致一个持久的提升，直到玩家松开那个键。<br/>如果我们要使用<em class="ls">输入。GetKeyDown </em>(按下键时)它会正常工作，但如果我们在按住该键期间添加燃料，协程将不会重新激活，因为我们在添加燃料之前只启动了一次。这将导致只要钥匙被按住，就能一直推进，因为没有燃料被消耗。使用<em class="ls">输入。GetKey </em>(按键按下期间)也不是一个选项，因为它会在每一个<em class="ls"> </em>帧中运行<em class="ls"> Update() </em>协程，这不是我们想要的。因此，我们必须使用一个外部变量，独立于一个键绑定。可选地，我们可以使用<em class="ls">输入。协程本身内部的 GetKey </em>。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><h2 id="1c4e" class="ks kt hi bd ku kv kw kx ky kz la lb lc jx ld le lf kb lg lh li kf lj lk ll lm bi translated">添加燃料棒</h2><p id="cd4a" class="pw-post-body-paragraph jo jp hi jq b jr ln ij jt ju lo im jw jx lp jz ka kb lq kd ke kf lr kh ki kj hb bi translated">现在我们可以为它创建一个新的 UI 元素，这次我还添加了一个文本引用来显示燃油量，单位为%。目前这是好的，因为我们的最大。燃料是 100，每当我们选择调整，我们可以回来，数学上更新函数。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lv"><img src="../Images/f10a0a0ceb4374bd4ba2477121f2563f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*rr3dndNGsRQ2efNCrErWuA.png"/></div></figure><p id="b6d2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这一次我没有使用水平条，而是使用了一个圆形背景图像和一个类似的重叠图像，其图像类型设置为 Filled，使用 Fill 方法；径向 360 度。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lw"><img src="../Images/efa18c9c70dbf767c80512a323beaa1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*FQk9U7zPgy5i45SDCUAzoA.png"/></div></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><h2 id="f30f" class="ks kt hi bd ku kv kw kx ky kz la lb lc jx ld le lf kb lg lh li kf lj lk ll lm bi translated">燃料动力不间断电源</h2><p id="3e93" class="pw-post-body-paragraph jo jp hi jq b jr ln ij jt ju lo im jw jx lp jz ka kb lq kd ke kf lr kh ki kj hb bi translated">现在我们可以添加燃料动力 Ups 的逻辑:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lx"><img src="../Images/d7019739b475fd87ff2d421e01bb5948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WYWtt2zwbgWxl00BlogzyQ.png"/></div></div></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="0759" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意这次当我们添加燃料时，我们做的有点不同。举例来说，玩家有 97 个燃料，我们得到一个燃料能力，加上 5 个燃料，我们得到 102 个燃料。在<em class="ls"> FuelBehaviour() </em>中，当当前值超过最大值时，我们确实会将其设置回最大值，但我们还有另一种方法可以防止这种情况。在我们添加一些燃料量之前，我们检查它是否超过最大值。燃油并计算剩余燃油。如果更多，那么把剩余的燃料加到(从)燃料量中，然后我们再把它加到当前的燃料中。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="b64c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们现在要做的是修改加电枚举，更新负责激活不同加电行为的开关方法，并创建三个我们可以添加的新预置。如果你一直在关注这篇文章，那么你很有可能已经熟悉如何让它有一个好的结局。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ly"><img src="../Images/2cff45f1b79c42e5e592f82a42ab442c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*veKgNAqUBBELLfD_p3enqQ.png"/></div></figure></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="e8ed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在下一篇文章中，我们将会看到当小行星或敌人被摧毁时，如何将我们在小行星或敌人身上投放的各种物品随机化。之后我们将为玩家引入一种新的武器。</p><p id="9483" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">← <a class="ae jn" href="https://gert-coppens.medium.com/adding-the-player-shield-f56b7fea039b" rel="noopener">上一张</a> | <a class="ae jn" href="https://gert-coppens.medium.com/randomising-item-drops-9c5c32c08327" rel="noopener">下一张</a> →</p></div></div>    
</body>
</html>