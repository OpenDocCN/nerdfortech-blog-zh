<html>
<head>
<title>Design Patterns: Singleton Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设计模式:单例模式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/design-patterns-singleton-pattern-97646e28e80e?source=collection_archive---------4-----------------------#2022-03-15">https://medium.com/nerd-for-tech/design-patterns-singleton-pattern-97646e28e80e?source=collection_archive---------4-----------------------#2022-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a026261f5ff8b73a4d748fbd5b634d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vT9N7aBvvd5Us-74XK5XLg.jpeg"/></div></div></figure><p id="47ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Singleton </strong>设计模式也属于<strong class="is hj">creative</strong>设计模式。单体设计模式的简单定义是<strong class="is hj">一个类中的一个对象</strong>。它确保您得到的是您所检索的任何类型的相同实例。</p><p id="4930" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们程序中的一个类对于所有客户端都必须有一个实例，那么 Singleton 模式会很有帮助。</p><p id="a790" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们来看看单例模式的实现。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/ebf6e6014a6ac10a70baf3ec2e255b5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*0YotI2y20JKFZC-hL2nxkA.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">单体模式的 UML</figcaption></figure><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="9017" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我们将构造函数设为私有，因为这样一来。无法实例化此单例类。此外，我们可以调用<strong class="is hj"> getInstance() </strong>方法，而无需通过声明为“static”来实例化该类。</p><p id="a6fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当<strong class="is hj"> getInstance() </strong>方法第一次调用时，它创建新的实例并再次返回同一个实例。此外，我们需要注意的是，我们没有提前创建<strong class="is hj">单例实例</strong>。只有在调用<strong class="is hj"> getInstance() </strong>方法时，才会创建<strong class="is hj">单例实例</strong>。</p><p id="9549" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面提到的实现的问题不是线程安全的。</p><p id="47e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以简单地通过同步<strong class="is hj"> getInstance() </strong>方法<strong class="is hj">来解决这个问题。</strong></p><p id="ab61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它确保只有一个线程可以执行<strong class="is hj"> getInstance() </strong>方法。这可能会降低你的程序的性能，但是如果你想要一个完美和简单的解决方案，这是更好的。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="59e9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里有一些单例模式的优点和缺点。</p><h1 id="f898" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">优势</h1><ul class=""><li id="9d88" class="kx ky hi is b it kz ix la jb lb jf lc jj ld jn le lf lg lh bi translated">因为不是在每次请求时都创建实例，所以可以节省内存。</li><li id="d8d8" class="kx ky hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated">对唯一实例的受控访问。</li></ul><h1 id="992a" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">缺点</h1><ul class=""><li id="bf3c" class="kx ky hi is b it kz ix la jb lb jf lc jj ld jn le lf lg lh bi translated">很难保持跟踪。</li><li id="d65e" class="kx ky hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated">单元测试时复杂。</li></ul><p id="f15a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望这篇文章能有所帮助。</p><p id="4710" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢谢大家！</p><h1 id="2d70" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">参考</h1><p id="ab3c" class="pw-post-body-paragraph iq ir hi is b it kz iv iw ix la iz ja jb ln jd je jf lo jh ji jj lp jl jm jn hb bi translated">四人组设计模式—<a class="ae lq" href="https://edeleastar.github.io/design-patterns/topic00/pdf/c-logica-gof-catalogue.pdf" rel="noopener ugc nofollow" target="_blank">https://edeleastar . github . io/Design-Patterns/topic 00/pdf/c-logica-GoF-catalogue . pdf</a></p></div></div>    
</body>
</html>