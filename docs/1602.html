<html>
<head>
<title>AutoScaling in Kubernetes ( HPA / VPA )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes中的自动缩放(HPA / VPA)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/autoscaling-in-kubernetes-hpa-vpa-ab61a2177950?source=collection_archive---------0-----------------------#2021-03-28">https://medium.com/nerd-for-tech/autoscaling-in-kubernetes-hpa-vpa-ab61a2177950?source=collection_archive---------0-----------------------#2021-03-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8bb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用垂直Pod自动缩放器(VPA)和水平Pod自动缩放器(HPA)在Kubernetes中自动缩放您的应用程序</p><p id="d12c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是自动缩放？</p><p id="5ef4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">自动缩放是一种方法，它根据应用程序的需求动态地增加/减少分配给应用程序的计算资源的数量。例如，您可能会遇到这样一种情况，即您的网站负载仅在每个月底增加。您可能需要额外的web服务器来处理每个月底的负载。但是在接下来的日子里，您的服务器处于闲置状态，而您每月的云账单也在增加。启用自动扩展后，可以根据负载和用户数量增加/减少服务器数量。随着世界走向Kubernetes时代，自动伸缩在容器化应用程序的可伸缩性中扮演着重要角色。在本文中，我们将尝试了解Kubernetes中可用的各种类型的自动缩放器，并尝试了解最适合Kubernetes应用的自动缩放器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/b40db7c35bba78aa6cd120ce0f6e7829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xHPFSf2EV4_TGufv4IsC9w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Kubernetes中的自动缩放。使用<a class="ae jt" href="https://app.cloudskew.com/" rel="noopener ugc nofollow" target="_blank"> cloudskew </a>:)的图像归功于Pavan Kumar</figcaption></figure><h1 id="0155" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">整个故事是关于什么的？(TLDR)</h1><ol class=""><li id="47c4" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">了解Kubernetes ( HPA / VPA)中各种类型的自动缩放。</li><li id="620c" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">水平Pod自动缩放器(HPA)和垂直Pod自动缩放器(VPA)的现场演示。</li></ol><h1 id="0b7b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">先决条件</h1><ol class=""><li id="83cb" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">Kubernetes集群(可以是本地、AKS、EKS、GKE、Kind)。</li></ol><h1 id="15bb" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">故事资源</h1><ol class=""><li id="adf3" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">GitHub链接:【https://github.com/pavan-kumar-99/medium-manifests T2】</li><li id="845b" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">GitHub分支:自动缩放</li></ol><h2 id="1080" class="li jv hi bd jw lj lk ll ka lm ln lo ke iq lp lq ki iu lr ls km iy lt lu kq lv bi translated">正在安装度量服务器</h2><p id="1fe4" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq lw is it iu lx iw ix iy ly ja jb jc hb bi translated">要使水平Pod自动缩放器(HPA)和垂直Pod自动缩放器(VPA)工作，需要从kubelet导出指标。Metrics Server从Kubelets收集资源指标，并通过Metrics API在Kubernetes apiserver中公开这些指标，供水平Pod自动缩放器和垂直Pod自动缩放器使用。你可以从<a class="ae jt" href="https://github.com/kubernetes-sigs/metrics-server" rel="noopener ugc nofollow" target="_blank">这里</a>安装度量服务器。但是如果您在本地集群(例如Kind、自托管Kubernetes集群等)上安装metrics服务器，您必须添加metrics服务器文档中提到的这两个附加标志。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="9e92" class="li jv hi ma b fi me mf l mg mh">- --kubelet-insecure-tls<br/>- --kubelet-preferred-address-types=InternalIP</span></pre><p id="937a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经通过添加上述条目创建了清单。您可以通过克隆我的GitHub repo将它们安装到您的集群中。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="cfa3" class="li jv hi ma b fi me mf l mg mh">$ git clone <a class="ae jt" href="https://github.com/pavan-kumar-99/medium-manifests.git" rel="noopener ugc nofollow" target="_blank">https://github.com/pavan-kumar-99/medium-manifests.git</a> \<br/>-b autoscaling</span><span id="e03b" class="li jv hi ma b fi mi mf l mg mh">$ cd medium-manifests/ </span><span id="e6ed" class="li jv hi ma b fi mi mf l mg mh">$ kubectl apply -f metrics-server.yaml </span><span id="343c" class="li jv hi ma b fi mi mf l mg mh">$ kubectl top po ( This should now return all the metrics of your Pod ). </span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/a0a0116da24591d29bbc8587fedb2bf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NDxYGbDNavGJv8CWXBgGPA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">来自度量服务器的Pod度量</figcaption></figure><h2 id="b584" class="li jv hi bd jw lj lk ll ka lm ln lo ke iq lp lq ki iu lr ls km iy lt lu kq lv bi translated"><strong class="ak">水平Pod自动缩放器(HPA ) </strong></h2><p id="fa5e" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq lw is it iu lx iw ix iy ly ja jb jc hb bi translated">水平机架自动缩放扩展部署中的机架数量。Statefulset、ReplicaSet基于CPU/内存利用率或应用程序公开的任何自定义指标。HPA在控制回路上工作。每个部署、Statefulset、Replicaset都有单独的HPA。HPA对象根据您指定的内存/CPU阈值不断检查部署、状态集、副本集的指标，并不断增加/减少副本计数。通过使用HPA，我们只需在需要时为额外的资源付费。好了，谈够了，现在让我们开始行动吧。</p><p id="3cba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用Kubernetes服务类型作为负载平衡器来部署一个样例Nginx部署。部署就绪后，让我们部署一个水平Pod自动缩放器(HPA ),它会在CPU利用率超过50%时缩放副本。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="c0de" class="li jv hi ma b fi me mf l mg mh">$ git clone <a class="ae jt" href="https://github.com/pavan-kumar-99/medium-manifests.git" rel="noopener ugc nofollow" target="_blank">https://github.com/pavan-kumar-99/medium-manifests.git</a> \<br/>-b autoscaling</span><span id="6ac1" class="li jv hi ma b fi mi mf l mg mh">$ cd medium-manifests/</span><span id="0aac" class="li jv hi ma b fi mi mf l mg mh">$ kubectl apply -f deploy.yaml </span><span id="c16d" class="li jv hi ma b fi mi mf l mg mh">$ kubectl get svc k8s-autoscaler -o jsonpath='{.status.loadBalancer.ingress[0].ip}'</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/3f76a09f596a2bd78ae6c307e828547b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLTwcIZWYdWz8owF1dIUPQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">部署和服务</figcaption></figure><p id="b239" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">部署就绪后，我们现在来创建HPA。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="2de1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，此HPA表示，部署k8s-autoscaler应始终具有最小副本数量2，并且每当单元的CPU利用率达到50%时，单元应扩展到10个副本。当CPU利用率低于50%时，副本将缩减到2。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="3342" class="li jv hi ma b fi me mf l mg mh">$ kubectl apply -f hpa.yaml</span></pre><p id="0e11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将向之前创建的服务发送一些curl请求。当CPU利用率达到50%时，我们应该看到副本扩展到10个。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="3d67" class="li jv hi ma b fi me mf l mg mh">$ external_ip=$(kubectl get svc k8s-autoscaler -o jsonpath='{.status.loadBalancer.ingress[0].ip}')</span><span id="ee11" class="li jv hi ma b fi mi mf l mg mh">$ while true; do curl $external_ip ; done </span></pre><p id="532e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦CPU超过阈值(即50%)，我们现在应该看到在HPA的事件中pod被扩大。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="2e11" class="li jv hi ma b fi me mf l mg mh">$ kubectl desribe hpa k8s-autoscaler</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/43116a9df7b0d400f1012f478b0acec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PJGcQ4DCLC9MMoNkCgtm_A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">吊舱自动缩放到10</figcaption></figure><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="96a1" class="li jv hi ma b fi me mf l mg mh">$ kubectl get deploy k8s-autoscaler</span><span id="90be" class="li jv hi ma b fi mi mf l mg mh">NAME             READY   UP-TO-DATE   AVAILABLE   AGE</span><span id="4769" class="li jv hi ma b fi mi mf l mg mh">k8s-autoscaler   10/10   10           10          28m</span></pre><p id="1dc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们现在停止发送curl请求。现在，您应该会看到副本缩减为两个(即minReplicas)。</p><p id="2c48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">清理</strong></p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="2c0c" class="li jv hi ma b fi me mf l mg mh">$ kubectl delete deploy k8s-autoscaler</span><span id="88b7" class="li jv hi ma b fi mi mf l mg mh">$ kubectl delete svc k8s-autoscaler</span><span id="e31a" class="li jv hi ma b fi mi mf l mg mh">$ kubectl delete hpa k8s-autoscaler</span></pre><h2 id="03cf" class="li jv hi bd jw lj lk ll ka lm ln lo ke iq lp lq ki iu lr ls km iy lt lu kq lv bi translated"><strong class="ak">垂直Pod自动缩放器(VPA ) </strong></h2><p id="c29a" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq lw is it iu lx iw ix iy ly ja jb jc hb bi translated">与水平Pod自动缩放器(HPA)不同，垂直Pod自动缩放器(VPA)会自动调整Pod的CPU和内存属性。垂直pod自动缩放器(VPA)将自动使用合适的CPU和内存属性重新创建您的Pod。这将为其他pods释放CPU和内存，并帮助您更好地利用Kubernetes集群。Kubernetes工作节点得到了有效的利用，因为Pods使用的正是它们所需要的。垂直Pod自动缩放器(VPA)可以建议内存/CPU请求和限制，如果用户启用，它还可以自动更新。这将减少工程师运行性能/基准测试来确定CPU和内存请求的正确值所花费的时间。好吧，现在让我们开始行动吧。</p><p id="8d40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，HPA附带K8s集群。让我们在K8s集群中安装VPA。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="fb67" class="li jv hi ma b fi me mf l mg mh">$ git clone <a class="ae jt" href="https://github.com/kubernetes/autoscaler.git" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/autoscaler.git</a></span><span id="8a95" class="li jv hi ma b fi mi mf l mg mh">$ cd autoscaler/vertical-pod-autoscaler/</span><span id="a4f1" class="li jv hi ma b fi mi mf l mg mh">$ ./hack/vpa-up.sh </span><span id="444c" class="li jv hi ma b fi mi mf l mg mh">$ kubectl get po -n kube-system </span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/3b9e22ed300d8c0b8332fde72839e952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXVsNxRMWLe5VsFmZxZd2g.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">VPA组件</figcaption></figure><p id="804c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们部署一个nginx部署示例，它需要1GB的RAM和200m的CPU，限制是50Gi的RAM和500m的CPU。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="311a" class="li jv hi ma b fi me mf l mg mh">resources:</span><span id="946d" class="li jv hi ma b fi mi mf l mg mh"> limits:</span><span id="1860" class="li jv hi ma b fi mi mf l mg mh">  cpu: 500m</span><span id="1df1" class="li jv hi ma b fi mi mf l mg mh">  memory: 50Gi</span><span id="9acb" class="li jv hi ma b fi mi mf l mg mh"> requests:</span><span id="096d" class="li jv hi ma b fi mi mf l mg mh">  cpu: 200m</span><span id="545d" class="li jv hi ma b fi mi mf l mg mh">  memory: 1Gi</span></pre><p id="c22c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，上面的规范对于一个空闲的nginx部署来说太多了。让我们看看垂直吊舱自动缩放(VPA)如何帮助我们在这里。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="3343" class="li jv hi ma b fi me mf l mg mh">$ git clone <a class="ae jt" href="https://github.com/pavan-kumar-99/medium-manifests.git" rel="noopener ugc nofollow" target="_blank">https://github.com/pavan-kumar-99/medium-manifests.git</a> \<br/>-b autoscaling</span><span id="79f1" class="li jv hi ma b fi mi mf l mg mh">$ cd medium-manifests/</span><span id="f395" class="li jv hi ma b fi mi mf l mg mh">$ kubectl apply -f deploy.yaml</span></pre><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="8e34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的垂直Pod自动缩放器(VPA)表示使用垂直Pod自动缩放器(VPA)提供的CPU/内存值在部署中自动重新创建Pod。如果updateMode设置为<code class="du mo mp mq ma b">"Off"</code>，它只会给出建议，但不会自动更新(部署中的)pod。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="d273" class="li jv hi ma b fi me mf l mg mh">$ kubectl apply -f vpa.yaml</span></pre><p id="c73e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，当您描述VPA时，您应该看到VPA已经为我们的pod提供了建议，并使用新的内存请求和限制重新创建了它们。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/40d8477797d3b18a3fbb9f54d17f1cdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_jxtSDhwUeHjMo1qdeY4Q.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">VPA对豆荚的建议</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mr"><img src="../Images/e287283d4659ab2951dbaf904a75228d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5H9g-BQY5Nk4r7F9RDMA6A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">用新的规格重新创建的吊舱</figcaption></figure><p id="14e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将通过选择其中一个副本并描述其内存/CPU资源来验证这一点。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="3fdd" class="li jv hi ma b fi me mf l mg mh">$ kubectl get po k8s-autoscaler-588f96c849-j5h4m -o jsonpath='{.spec.containers[0].resources}' | jq .</span><span id="fdf9" class="li jv hi ma b fi mi mf l mg mh">{</span><span id="4424" class="li jv hi ma b fi mi mf l mg mh">"limits": {</span><span id="5b0a" class="li jv hi ma b fi mi mf l mg mh">"cpu": "62m",</span><span id="a4a0" class="li jv hi ma b fi mi mf l mg mh">"memory": "12500Mi"</span><span id="d342" class="li jv hi ma b fi mi mf l mg mh">},</span><span id="f617" class="li jv hi ma b fi mi mf l mg mh">"requests": {</span><span id="a248" class="li jv hi ma b fi mi mf l mg mh">"cpu": "25m",</span><span id="818f" class="li jv hi ma b fi mi mf l mg mh">"memory": "262144k"</span><span id="d778" class="li jv hi ma b fi mi mf l mg mh">}</span><span id="2c6c" class="li jv hi ma b fi mi mf l mg mh">}</span></pre><p id="aa08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果希望将这些VPA应用到Kubernetes集群中所有名称空间的所有部署中，可以使用存储库中的脚本。这将为您的Kubernetes集群中的所有pod启用VPA自动模式，除了kube-system，因为如果api-server pod多次重启，您可能不希望您的集群停机。</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="5252" class="li jv hi ma b fi me mf l mg mh">$ sh enable_vpa_all.sh</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ms"><img src="../Images/3ce3f6749be4f0fb98a7c4bdc76e5b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oxT2H6oiNmaW5GQxYjQycw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">所有名称空间和所有部署的VPA</figcaption></figure><p id="98c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，这些是由垂直吊舱自动缩放器(VPA)指定的。但不幸的是，这种方法有一个局限性。如果您创建了一个updateMode为“Auto”的垂直Pod自动缩放器，则当需要更改Pod的资源请求时，Vertical Pod Autoscaler会收回Pod。这可能会导致pod立即重启，从而导致我们的应用程序不一致。为了限制重启和保持一致性，这种情况可以由podisruptionbudget(PDB的)来处理。你可以在这里了解更多关于podisruptionbudget(PDB的)<a class="ae jt" href="https://kubernetes.io/docs/concepts/workloads/pods/disruptions/" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="6608" class="li jv hi ma b fi me mf l mg mh">$ kubectl apply -f pdb.yaml</span></pre><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="731b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个PDB确保了deploy k8s-autoscaler的1个副本一直运行，没有任何重启。这将最终确保我们的应用程序在各种集群中断中的高可用性和一致性。</p><p id="cfe6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">清理</strong></p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="5bbd" class="li jv hi ma b fi me mf l mg mh">$ kubectl delete deploy k8s-autoscaler</span><span id="4dc5" class="li jv hi ma b fi mi mf l mg mh">$ kubectl delete svc k8s-autoscaler</span><span id="c243" class="li jv hi ma b fi mi mf l mg mh">$ kubectl delete vpa k8s-autoscaler</span><span id="99e0" class="li jv hi ma b fi mi mf l mg mh">$ kubectl delete pdb k8s-autoscaler-pdb</span></pre><h2 id="ab67" class="li jv hi bd jw lj lk ll ka lm ln lo ke iq lp lq ki iu lr ls km iy lt lu kq lv bi translated">结论</h2><ol class=""><li id="473b" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">水平Pod自动缩放和垂直Pod自动缩放可以一起使用，称为<code class="du mo mp mq ma b">MultidimPodAutoscaler</code> ( GKE功能)。</li><li id="32b8" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">HPA和VPA不应一起用于评估CPU/内存。然而，理想的情况是，VPA可用于评估CPU或内存，而HPA可用于评估外部指标(如HTTP请求数或活动用户数等)。</li></ol><p id="cd13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读我的文章。希望你喜欢它。以下是我的一些其他文章，你可能会感兴趣。</p><p id="d502" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直到我们再次相遇……..</p><h1 id="e7e2" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">被推荐的</h1><div class="mt mu ez fb mv mw"><a href="https://www.techmanyu.com/creating-self-hosted-github-runners-in-a-kubernetes-cluster-fd05560de34a" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">在Kubernetes集群中创建自托管GitHub运行程序</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">在您自己的Kubernetes集群上运行GitHub操作</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">www.techmanyu.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jn mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/introduction-to-crossplane-2f873ae0f9f3"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">交叉平面简介</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">如何使用Kubernetes清单和Crossplane在云上创建任何资源。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">medium.com</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk jn mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a href="https://faun.pub/introduction-to-bitnami-sealed-secrets-bb5ae74d9a25" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">比特纳米密封秘密介绍</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">如何使用Sealed Secrets和Kubese在GitHub中存储您的秘密</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">faun.pub</p></div></div><div class="nf l"><div class="nm l nh ni nj nf nk jn mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/deploying-rabbitmq-on-kubernetes-using-rabbitmq-cluster-operator-ef99f7a4e417"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">使用RabbitMQ集群操作器在Kubernetes上部署RabbitMQ</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">在Kubernetes上运行RabbitMQ，并使用一个简单的Golang应用程序进行测试。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">medium.com</p></div></div><div class="nf l"><div class="nn l nh ni nj nf nk jn mw"/></div></div></a></div><h2 id="05df" class="li jv hi bd jw lj lk ll ka lm ln lo ke iq lp lq ki iu lr ls km iy lt lu kq lv bi translated">参考</h2><div class="mt mu ez fb mv mw"><a href="https://cloud.google.com/kubernetes-engine/docs/tutorials/autoscaling-metrics" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">利用云监控指标自动扩展部署</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">发送反馈本教程演示了如何自动扩展您的谷歌Kubernetes引擎(GKE)工作负载基于…</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">cloud.google.com</p></div></div><div class="nf l"><div class="no l nh ni nj nf nk jn mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a href="https://github.com/kubernetes-sigs/metrics-server" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">kubernetes-sigs/metrics-服务器</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">Metrics Server是一个可伸缩的、高效的容器资源度量源，用于Kubernetes内置的自动伸缩…</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">github.com</p></div></div><div class="nf l"><div class="np l nh ni nj nf nk jn mw"/></div></div></a></div></div></div>    
</body>
</html>