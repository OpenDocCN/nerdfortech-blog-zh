<html>
<head>
<title>The Debian Series: SWAP memory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Debian系列:交换内存</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/the-debian-series-swap-memory-78d1bee9ab9d?source=collection_archive---------4-----------------------#2019-11-08">https://medium.com/nerd-for-tech/the-debian-series-swap-memory-78d1bee9ab9d?source=collection_archive---------4-----------------------#2019-11-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="353d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">继续我们关于<code class="du jd je jf jg b">fdisk</code>命令的工作，以及之前对Debian 7实例上的磁盘分区表管理的简单解释，现在是时候介绍一个重要的概念了，比如交换内存。</p><p id="7787" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">老实说，有大量关于交换内存的参考资料，暂停讲座来定义什么是交换内存有点乏味。用TLDR的术语来说，交换是分配在磁盘上的内存，当您的计算机由于缺少物理内存而运行缓慢时就会用到它。</p><p id="ec9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">交换内存</strong>很重要，自从在计算机上首次安装操作系统以来，它就一直存在。必须谨慎设置该值，因为它可能会由于<strong class="ih hj">过量交换</strong>或<strong class="ih hj">颠簸</strong>而导致整体性能下降，这是系统无法找到足够空闲内存时使用的术语。</p><p id="927c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将向您介绍一些新的命令，但是整个体验与磁盘分区的生成或者在<code class="du jd je jf jg b">fstab file</code>上手动分配几乎是一样的</p><p id="6d0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">前面的设置完成后，我们将插入另一个10G存储容量的驱动器(USB闪存),以在其上设置<strong class="ih hj">交换内存</strong>。</p><p id="ad3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两个新的实用工具可以用于检查内存统计数据，一个是显示系统内存量和内存使用情况的<code class="du jd je jf jg b">free</code>命令，另一个是可以让您启用或禁用设备以便为<strong class="ih hj">交换分区</strong>获得更多空间的<code class="du jd je jf jg b">swapon / swapoff</code>命令。</p><p id="f350" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">free</code>有两种表示方式，<code class="du jd je jf jg b">-mh</code>(兆字节)和<code class="du jd je jf jg b">-kh</code>(千字节)，当然，更多信息请查看<code class="du jd je jf jg b">man free</code></p><p id="5e88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">swapon / swapoff</code>命令使用<code class="du jd je jf jg b">-s</code>标志来选择一个特定的设备，类似于:<code class="du jd je jf jg b">swapon -s /dev/sdb3</code></p><p id="1bee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本次研讨会的最后，我们将有一个带有两个分区的磁盘，其中一个将用于使用<code class="du jd je jf jg b">fdisk -l</code>的交换内存</p><p id="ff1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">记住</strong> : <code class="du jd je jf jg b">fdisk -l</code>显示硬盘及其分区。</p><p id="9857" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那我们走吧。</p><p id="5cfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过<strong class="ih hj">根用户会话</strong>，我们验证了<code class="du jd je jf jg b">fdisk -l</code>的内容，我们已经配置了<code class="du jd je jf jg b">/etc/sda</code>和<code class="du jd je jf jg b">/dev/sdb</code>，现在让我们将提到的USB闪存配置为<code class="du jd je jf jg b">/etc/sdc</code></p><p id="260f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用向导我们添加两个分区，设置分区顺序<strong class="ih hj">和最后一个扇区</strong>。一般来说，<strong class="ih hj">的交换量</strong>应该是硬盘物理容量的2.5倍，或者是<strong class="ih hj"> RAM内存的2倍</strong></p><p id="6185" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过打印分区表(向导上的<code class="du jd je jf jg b">p</code>)进行仔细检查，如果一切正常，使用<code class="du jd je jf jg b">w</code>写入更改。</p><p id="6ad2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，您将需要使用分区上的<code class="du jd je jf jg b">t</code>选项来更改ID，类似这样:<code class="du jd je jf jg b">fdisk /dev/sdc1</code>，使用选定的分区并添加作为<strong class="ih hj">十六进制代码</strong>的值<strong class="ih hj"> 82 </strong>，该值引用<strong class="ih hj"> Linux交换。</strong></p><p id="2076" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有另一种方法，令人难以置信的快，是通过使用<code class="du jd je jf jg b">mkswap</code>命令，这将准备一个分区，以便在没有任何进一步的行动交换。</p><p id="b9d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有一个例子:</p><p id="1a52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">mkswap /dev/sdc1</code></p><p id="71be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在那之后，你将需要写变更。然后，我们可以将配置添加到<code class="du jd je jf jg b">fstab</code>，我们添加已创建分区的UUID。</p><p id="a146" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不记得，您只需执行以下操作:<code class="du jd je jf jg b">nano /etc/fstab</code>和</p><p id="6a82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们启用基于<strong class="ih hj">交换分配</strong>和<code class="du jd je jf jg b">swapon -a</code>的更改(命令直接从<code class="du jd je jf jg b"> /etc/fstab</code>读取)。我们可以在使用<code class="du jd je jf jg b">free -mh</code>命令后验证它。</p><p id="f09d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仅此而已。</p><p id="2e58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果有什么不对的地方，请随意投稿或指正。</p><p id="952f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个系列的下一个故事中，我将谈论LVM。</p><p id="a118" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码:)</p></div></div>    
</body>
</html>