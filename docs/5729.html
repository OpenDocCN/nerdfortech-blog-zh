<html>
<head>
<title>Creating a loot system | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创造一个战利品系统|团结</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-loot-system-unity-27476f9948be?source=collection_archive---------2-----------------------#2021-11-08">https://medium.com/nerd-for-tech/creating-a-loot-system-unity-27476f9948be?source=collection_archive---------2-----------------------#2021-11-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="2c50" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">如何在 Unity 中创建一个简单的战利品系统的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/272a580e4a909d901aff332c209f322c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8xlCgFNI0iQzgBTZdeDdtA.gif"/></div></div></figure><p id="b064" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">目标:在一个 2D 游戏中，为玩家创造一个收集钻石的战利品系统。</p><p id="a59b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我介绍了<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-hitbox-detection-for-melee-combat-unity-bc1912178e63">如何用 Unity </a>实现一个 hitbox 检测系统。现在，是时候创建一个战利品系统来让我们的玩家在 2D 游戏中收集钻石了。</p><h2 id="2e14" class="kp kq hi bd kr ks kt ku kv kw kx ky kz kb la lb lc kf ld le lf kj lg lh li ho bi translated">初速电流状态</h2><p id="17d7" class="pw-post-body-paragraph js jt hi ju b jv lj is jx jy lk iv ka kb ll kd ke kf lm kh ki kj ln kl km kn hb bi translated">首先，让我们看看 2D 游戏的现状。目前，我们可以攻击和接受敌人的攻击:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/7c37a71885709385c636811188dec1c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Qz27KGxRGdMnVR5Nz595BA.gif"/></div></div></figure><p id="ad0e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">此外，我们已经有了几颗钻石，可以通过战利品系统收集:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/8de9b3fbe70f1232b4ec8e3b5bd882e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xoPXG9yaAXkuaniLguk8-g.png"/></div></div></figure><h1 id="2b55" class="lo kq hi bd kr lp lq lr kv ls lt lu kz ix lv iy lc ja lw jb lf jd lx je li ly bi translated">打造钻石</h1><p id="7e42" class="pw-post-body-paragraph js jt hi ju b jv lj is jx jy lk iv ka kb ll kd ke kf lm kh ki kj ln kl km kn hb bi translated">为了介绍各自的钻石，我们使用 2D 精灵编辑器对包含钻石精灵的精灵表进行了切片，并制作了动画:</p><div class="jh ji jj jk fd ab cb"><figure class="lz jl ma mb mc md me paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/51d7541600307e4ddbaa8e6ec580c45e.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*h-c6By2DtwfAoYdCyhCUsQ.png"/></div></figure><figure class="lz jl mf mb mc md me paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/28d3441c1860c1106722ef6f87488692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*jXShrq-6HW8j7TicjdXBZA.png"/></div></figure></div><p id="a908" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，我们用下面的组件创建了一个新的游戏对象:</p><ul class=""><li id="1ac3" class="mg mh hi ju b jv jw jy jz kb mi kf mj kj mk kn ml mm mn mo bi translated">精灵渲染器</li><li id="baf2" class="mg mh hi ju b jv mp jy mq kb mr kf ms kj mt kn ml mm mn mo bi translated">鼓舞者</li><li id="9790" class="mg mh hi ju b jv mp jy mq kb mr kf ms kj mt kn ml mm mn mo bi translated">刚体 2D</li></ul><p id="3e9b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">重力刻度设置为 0，这样钻石就不会掉下来并保持在它的位置上。</p><ul class=""><li id="37be" class="mg mh hi ju b jv jw jy jz kb mi kf mj kj mk kn ml mm mn mo bi translated">2D 环形对撞机</li></ul><p id="77cf" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">启用<strong class="ju hs"> <em class="mu">是触发器</em> </strong>属性，以检查玩家何时与钻石发生碰撞，并处理代码中发生的情况。</p><div class="jh ji jj jk fd ab cb"><figure class="lz jl mv mb mc md me paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/0952eb5c13c70ff557cac510bc75bcf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*FsbuGyz9qJrW7dZtJiZDRA.png"/></div></figure><figure class="lz jl mw mb mc md me paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/86474a173cdb7f7bad4c831c19d7be04.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*1NMnDbkxLGwWRZnODzx0gQ.png"/></div></figure></div><p id="85ea" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">一旦我们有了这些组件，我们就可以把游戏对象变成一个预置，并按照我们的意愿把它们放在 2D 的环境中:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mx"><img src="../Images/50a5884202fa237e3b7938963f99bdee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*auPDdN3XQWp47gGI4LnExA.png"/></div></div></figure><h1 id="7aeb" class="lo kq hi bd kr lp lq lr kv ls lt lu kz ix lv iy lc ja lw jb lf jd lx je li ly bi translated">创建战利品系统</h1><p id="1af5" class="pw-post-body-paragraph js jt hi ju b jv lj is jx jy lk iv ka kb ll kd ke kf lm kh ki kj ln kl km kn hb bi translated">现在，为了创建我们的战利品系统，让我们开始创建一个新的 C#脚本，我们将附加到钻石预置:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es my"><img src="../Images/54edb2effefef0f874fb64886165e122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*iDhXH4VrwdZNXB0LzF67EA.png"/></div></figure><p id="b64a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">创建完成后，让我们打开脚本:</p><ul class=""><li id="0c7d" class="mg mh hi ju b jv jw jy jz kb mi kf mj kj mk kn ml mm mn mo bi translated">在顶部包含<strong class="ju hs">系统</strong>名称空间。</li><li id="c0af" class="mg mh hi ju b jv mp jy mq kb mr kf ms kj mt kn ml mm mn mo bi translated">告诉脚本需要一个刚体 2D 和一个碰撞器 2D，以避免检查这些组件是否包含在游戏对象中。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mz"><img src="../Images/641bc7fd8d4c1f1342e313a69d6e8fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s3LQ1hQPNaHNBts9BqY_Sg.png"/></div></div></figure><p id="0279" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们创建一个新的公共静态动作委托，作为每次收集钻石时的通知方式:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es na"><img src="../Images/723eeea11699fd7680db03f43746f858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*OWMbOwH660EgdAGhy8OUkw.png"/></div></figure><p id="4e4a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果您想了解有关动作代表的更多信息，可以访问 Microsoft 文档:</p><div class="nb nc ez fb nd ne"><a href="https://docs.microsoft.com/en-us/dotnet/api/system.action?view=net-5.0" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hs fi z dy nj ea eb nk ed ef hr bi translated">动作委托(系统)</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">封装没有参数且不返回值的方法。公共委托 void Action()；公共…</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">docs.microsoft.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns jq ne"/></div></div></a></div><p id="432a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们使用 OnTriggerEnter2D 方法来检查另一个碰撞器何时与菱形碰撞。一旦发生这种情况，让我们:</p><ul class=""><li id="9543" class="mg mh hi ju b jv jw jy jz kb mi kf mj kj mk kn ml mm mn mo bi translated">检查来自另一个碰撞器的标签是否属于玩家(因为我们希望玩家收集钻石)。</li><li id="efd6" class="mg mh hi ju b jv mp jy mq kb mr kf ms kj mt kn ml mm mn mo bi translated">检查操作委托是否有人订阅了事件来执行它。</li><li id="4c85" class="mg mh hi ju b jv mp jy mq kb mr kf ms kj mt kn ml mm mn mo bi translated">摧毁钻石游戏对象。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nt"><img src="../Images/d0d54c861eacb8e4067dfcbcc2aa5260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*_IhgFzm-hzFROp4ORsmJmg.png"/></div></figure><h2 id="34de" class="kp kq hi bd kr ks kt ku kv kw kx ky kz kb la lb lc kf ld le lf kj lg lh li ho bi translated">玩家脚本</h2><p id="6164" class="pw-post-body-paragraph js jt hi ju b jv lj is jx jy lk iv ka kb ll kd ke kf lm kh ki kj ln kl km kn hb bi translated">一旦我们将钻石脚本附加到预设，让我们打开玩家脚本并创建一个新的变量来保存收集到的钻石的数量:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nu"><img src="../Images/c1ed3d0e827eff1be0459876560d4a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*-qQGQ__X-9UdPIG1d2ErwA.png"/></div><figcaption class="nv nw et er es nx ny bd b be z dx translated">使用<strong class="bd kr">【serialize field】</strong>或<strong class="bd kr">公共</strong>变量来查看钻石何时通过检查员被收集。</figcaption></figure><p id="5945" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，让我们使用<strong class="ju hs"> Start </strong>或<strong class="ju hs"> Awake </strong>方法为玩家订阅来自钻石脚本的动作委托。这样，我们可以使用一个匿名方法，将单个菱形添加到我们创建的变量中:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nz"><img src="../Images/96e951930fe71816bf64b6e649abcecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v8ggYXbEsUzXGMOxadC6YA.png"/></div></div></figure><p id="5533" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">有关匿名方法的更多参考，您可以访问 Microsoft 文档:</p><div class="nb nc ez fb nd ne"><a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/lambda-expressions" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hs fi z dy nj ea eb nk ed ef hr bi translated">Lambda 表达式- C#参考</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">使用 lambda 表达式创建匿名函数。使用 lambda 声明运算符= &gt;来分隔…</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">docs.microsoft.com</p></div></div><div class="nn l"><div class="oa l np nq nr nn ns jq ne"/></div></div></a></div><p id="225f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们在 Unity 编辑器中运行游戏，我们会看到当玩家与钻石碰撞时，钻石会被收集起来:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/fcb7a24e67df7bb210aae7121c0e589e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MDBqYPns2iAOQ0-jL7hhPw.gif"/></div></div></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ob"><img src="../Images/7d98b9f06f5ad5857ce0dec0a10aa53d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/1*Dli9H7AKXF-3M7TNHKBwuA.gif"/></div><figcaption class="nv nw et er es nx ny bd b be z dx translated">每次收集钻石时，diamonds 变量的值都会改变。</figcaption></figure><p id="7aad" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们创造了一个战利品系统，允许玩家在我们的 2D 游戏中用 Unity 收集钻石！:d .我会在下一篇文章中看到你，在那里我会展示一个关于 Unity 中 UI 事件的教程。</p></div><div class="ab cl oc od gp oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="hb hc hd he hf"><blockquote class="oj ok ol"><p id="4311" class="js jt mu ju b jv jw is jx jy jz iv ka om kc kd ke on kg kh ki oo kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>