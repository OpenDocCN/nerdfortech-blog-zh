<html>
<head>
<title>React Text Editor With Syntax Highlighting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有语法高亮显示的反应文本编辑器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/reacttext-editor-with-syntax-highlighting-9ae15d93cac0?source=collection_archive---------0-----------------------#2020-08-18">https://medium.com/nerd-for-tech/reacttext-editor-with-syntax-highlighting-9ae15d93cac0?source=collection_archive---------0-----------------------#2020-08-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0ea6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最近，我在 React 和 Rails 项目上花了很多时间，该项目将整合用户认证、Redux、Thunk、一个健壮的后端和许多其他特性。我非常喜欢这个项目，然而，作为一个 JavaScript 和 Ruby 用户，我已经习惯了快速和毫不犹豫地构建整个应用程序的奢侈，这些应用程序可以以同样快的速度放到 web 上。我有一个像这样的快速和有趣的项目的愿望，这导致是一个文本编辑器！在这里，我将简单介绍一下这个版本的一些有趣的特性。它叫 codepen。https://github.com/JCGuest/codepen<a class="ae jd" href="https://github.com/JCGuest/codepen" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/fdb8fb602c8baa65a23c6d3930d2016d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*SZWr96UMcVWUmxSLRoJapQ.png"/></div></figure><p id="8d7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于语法突出显示(我也想快速完成)，我使用了一个轻量级的包和库 PrismJs/prism。您可以设计一个自定义配色方案，并决定要在他们的网站上包含哪些语言。【https://prismjs.com/index.html T4】</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/f94e000933c14dfa257843c4c34c70bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0XdAcg6Q3-62nYq04eaAw.png"/></div></div></figure><p id="3558" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它们生成 JavaScript 和 CSS 文件，您需要将这些文件合并到 React 应用程序中。导入 Prism 类后，您需要按照 Prismjs 文档提供两个标准 HTML 元素。这是您的文本将被呈现的地方。</p><pre class="jf jg jh ji fd jr js jt ju aw jv bi"><span id="e269" class="jw jx hi js b fi jy jz l ka kb">&lt;pre className="code-output"&gt;</span><span id="f3be" class="jw jx hi js b fi kc jz l ka kb">    &lt;code className={`language-${props.language}`}&gt;{content}&lt;/code&gt;</span><span id="e4cf" class="jw jx hi js b fi kc jz l ka kb">&lt;/pre&gt;</span></pre><p id="560e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能会注意到我的道具。从 App.js 传递到唯一的组件 CodeEditor.js。在 App.js 中，我有一个菜单供用户选择语言，并使用 useState()；我更新语言并呈现代码编辑器。</p><pre class="jf jg jh ji fd jr js jt ju aw jv bi"><span id="7c46" class="jw jx hi js b fi jy jz l ka kb">export default function App() {</span><span id="721b" class="jw jx hi js b fi kc jz l ka kb">    const [editorLanguage, setEditorLanguage] = useState("javascript");</span><span id="753f" class="jw jx hi js b fi kc jz l ka kb">return ( </span><span id="05e8" class="jw jx hi js b fi kc jz l ka kb">    &lt;div className="App"&gt;</span><span id="4a01" class="jw jx hi js b fi kc jz l ka kb">    &lt;h1&gt;React Code Editor&lt;/h1&gt;</span><span id="ab48" class="jw jx hi js b fi kc jz l ka kb">&lt;fieldset&gt;</span><span id="bd43" class="jw jx hi js b fi kc jz l ka kb"> &lt;legend&gt;Choose language:&lt;/legend&gt;</span><span id="a4a1" class="jw jx hi js b fi kc jz l ka kb">&lt;input type="radio" id="javascript" name="language"</span><span id="94da" class="jw jx hi js b fi kc jz l ka kb">value="javascript" checked={editorLanguage === "javascript"}</span><span id="deff" class="jw jx hi js b fi kc jz l ka kb">onChange={() =&gt; setEditorLanguage("javascript")}</span><span id="c072" class="jw jx hi js b fi kc jz l ka kb">/&gt;</span></pre><p id="eca4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将文本传递给 Prism，可以调用 Prism . highlight all()；。我再次使用了钩子，这样整个应用程序可以在不产生任何反应的情况下运行。组件类。这里使用的钩子叫做 use effect()；它在这里工作是因为当提供的元素被更新时它被调用。</p><pre class="jf jg jh ji fd jr js jt ju aw jv bi"><span id="3277" class="jw jx hi js b fi jy jz l ka kb">useEffect(() =&gt; {Prism.highlightAll();}, [props.language, content]);</span></pre><p id="25d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的应用程序利用了一些棘手的 CSS，我不会在这里深入讨论，但这是最终的结果。这里你可以看到我选择了不同的语言来突出显示。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kd"><img src="../Images/7f13c1a774a0c75bd9cb6c769e9f9ef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/1*WCx5xdqFj_Rlo6dvFFvVYA.gif"/></div></figure><p id="e5b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个构建的目的是在一两个小时内完成一个产品，并在这个过程中学习一些东西。它做得很漂亮，非常有趣。</p></div></div>    
</body>
</html>