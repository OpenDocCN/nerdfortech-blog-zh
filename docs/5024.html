<html>
<head>
<title>Slack Automated Messaging with Webhooks using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 通过 Webhooks 进行松散的自动消息传递</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/slack-automated-messaging-with-webhooks-using-python-7c7849e9a954?source=collection_archive---------3-----------------------#2021-08-21">https://medium.com/nerd-for-tech/slack-automated-messaging-with-webhooks-using-python-7c7849e9a954?source=collection_archive---------3-----------------------#2021-08-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9edf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好，我希望一切都很好，今天我们将看到在 Slack 应用程序中使用 web hooks 和 python 编程语言的自动消息传递。我们潜水吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/f74c54e851b8d4234a19fab2173c59e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*L3M0BFmzyb1aI5V0Hk2ssg.png"/></div></figure><h2 id="4d07" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">松弛的网钩</h2><p id="c402" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi kl translated">你可能已经在你的空闲设置中看到了一个 webhook 选项，并且不知道这是否是你应该使用的一个选项。牺牲 webhooks one 将从一个应用程序向不同的应用程序发送机器控制的消息(JSON 有效载荷)。这可以在响应特定事件时触发。创建一个传入的 Webhook 为您提供了一个新颖的通用资源定位器，您可以向它发送一个 JSON 有效负载，其中包含消息文本和一些选项。</p><h2 id="651c" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">webhooks 入门</h2><p id="d1c8" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">第一步:通过<a class="ae ku" href="https://slack.com/get-started#/create" rel="noopener ugc nofollow" target="_blank">点击这里</a>创建一个宽松的工作空间</p><p id="376d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:进入<strong class="ih hj">浏览 Slack </strong>，点击<strong class="ih hj"> Apps +图标</strong>，搜索<strong class="ih hj"> incoming webhook，</strong>点击<strong class="ih hj">添加</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/182c943a7a6287f8e93f6faeb0d8232b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*Ipj5fg6aHKra2HvmP2kBeQ.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx translated">传入 webhook</figcaption></figure><p id="5c17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤 3:从应用程序目录页面，将传入的 webhooks 添加到 slack</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/32b56a2ca15f04727c38542d53a015dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*-B7Uwre2_qRrP2t4IVmTCw.png"/></div></figure><p id="1e9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤 4:添加 webhooks 后，它将重定向到频道配置页面，在<strong class="ih hj">选择您的频道</strong>然后点击添加频道。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/e528f40ebf84450904869688a33d467c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*FCHNpyX50JCjxZ2DIcFtfw.png"/></div></figure><p id="17f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第五步:不要忘记复制<strong class="ih hj"> </strong>的<strong class="ih hj">网页挂钩网址</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/0bbbce98cfd53d0c61ebd44d987521b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*FUiunrooqKS3o30RlWTifA.png"/></div></figure><p id="d349" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤 6:之后，我们松弛通道看起来像这样，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/b245d0946cf017e948882fd757c356f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*ow0eZmEhSmoS-TCW6M1iYw.png"/></div></figure><p id="9e13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第 7 步:然后创建一个名为 app.py 的新 python 文件，你可以用你喜欢的文件名命名它。py 扩展</p><p id="3315" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第八步:</p><blockquote class="la lb lc"><p id="adf3" class="if ig ld ih b ii ij ik il im in io ip le ir is it lf iv iw ix lg iz ja jb jc hb bi translated">先决条件:安装请求模块</p><p id="7f76" class="if ig ld ih b ii ij ik il im in io ip le ir is it lf iv iw ix lg iz ja jb jc hb bi translated">Pip 安装请求</p></blockquote><pre class="je jf jg jh fd lh li lj lk aw ll bi"><span id="cbcf" class="jl jm hi li b fi lm ln l lo lp">import json</span><span id="5166" class="jl jm hi li b fi lq ln l lo lp">import sys</span><span id="eb88" class="jl jm hi li b fi lq ln l lo lp">import random</span><span id="ab0b" class="jl jm hi li b fi lq ln l lo lp">import requests</span><span id="c436" class="jl jm hi li b fi lq ln l lo lp">if __name__ == ‘__main__’:</span><span id="0430" class="jl jm hi li b fi lq ln l lo lp">     url = “&lt;Webhook URL&gt;”<br/>     message = (“A Sample message by bot”)<br/>     title = (f”New Incoming Message :zap:”)<br/>     slack_data = {<br/>    “username”: “AshBot”,<br/>    “icon_emoji”: “:satellite:”,<br/>    “channel” : “general”,<br/>    “attachments”: [<br/>    {<br/>      “color”: “#9737EE”,<br/>      “fields”: [<br/>      {<br/>       “title”: title,<br/>       “value”: message,<br/>       “short”: “false”,<br/>       }<br/>      ]}<br/>      ]}<br/>    byte_length = str(sys.getsizeof(slack_data))<br/>    headers = {‘Content-Type’: “application/json”, ‘Content-Length’:     byte_length}<br/>    response = requests.post(url, data=json.dumps(slack_data),    headers=headers)<br/>   if response.status_code != 200:<br/>       raise Exception(response.status_code, response.text)</span></pre><p id="9846" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第 9 步:最后，我们的通道将从我们的源文件中获得一条消息</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/72bf41c0aadbf63e429aa628e79e002c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*sbMxDrcr_PCrgr5G-e9hlQ.png"/></div></figure><p id="34b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢大家！</p></div></div>    
</body>
</html>