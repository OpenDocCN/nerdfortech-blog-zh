<html>
<head>
<title>Simple Form Validation Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript的简单表单验证</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/we-will-create-a-basic-form-with-input-elements-and-we-will-give-these-input-elements-an-attribute-57c3018c0ed2?source=collection_archive---------4-----------------------#2021-12-29">https://medium.com/nerd-for-tech/we-will-create-a-basic-form-with-input-elements-and-we-will-give-these-input-elements-an-attribute-57c3018c0ed2?source=collection_archive---------4-----------------------#2021-12-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/27b4a435381b351ce17ac0c870417b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L5XNllPfqHUapdYuh4-Ylw.png"/></div></div></figure><p id="fba6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我最近接受了一个任务，用JavaScript开发一个简单的表单验证。我花了2个多小时完成这个任务，逻辑很简单。</p><h2 id="5a3a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">我们的形式</h2><p id="05ab" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">我们将创建一个包含输入元素的基本表单，我们将为这些输入元素赋予属性myValidator，然后我们将在该属性中指定验证规则。</p><ul class=""><li id="3e21" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">r表示(表格字段为必填)。</li><li id="39f7" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">e表示(表单输入必须是有效的电子邮件地址)。</li><li id="2cd7" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">n表示(表单输入必须是有效数字)。</li></ul><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="ce6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码将查找具有属性<strong class="is hj"> myValidator </strong>的输入元素，将验证规则存储在一个变量中，然后继续验证表单。</p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><blockquote class="li lj lk"><p id="f54c" class="iq ir ll is b it iu iv iw ix iy iz ja lm jc jd je ln jg jh ji lo jk jl jm jn hb bi translated">我选择将验证规则存储在变量中的原因是为了防止用户使用inspect工具删除myValidator属性，这是我们的验证工作所必需的。</p></blockquote><p id="8c65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这意味着一旦我们的页面加载完毕，它会检查所有<em class="ll">输入</em>元素中存在的验证规则，并使用语法将其存储在一个变量中。</p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><h2 id="6ec7" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">我们的职能</h2><p id="5899" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">让我们创建一个父函数来处理验证规则。当所有表单验证无误地完成时，我们的返回类型将是<em class="ll"> true </em>，当有验证错误时，返回类型将是<em class="ll"> false </em>。</p><p id="dbbe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将检查变量(validate)是否包含需要验证的输入，然后我们将遍历每个数据并执行必要的验证。</p><p id="3b49" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请记住，如果您将验证规则指定为；</p><ul class=""><li id="58a0" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated"><em class="ll"> R </em>，表示需要表单输入。</li><li id="f479" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated"><em class="ll"> E </em>，表示该表单输入的值必须是有效的电子邮件地址。</li></ul><p id="a701" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，在循环中，我们需要一个变量<strong class="is hj"> continueValidation </strong>，它检查一个验证规则是成功通过还是失败。</p><p id="27ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果这个变量的值是(0)，这意味着一个验证规则失败了，所以我们需要停止进一步的验证，直到这个特定的验证成功通过。</p><p id="510d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一个验证规则成功通过，我们将递增这个变量，以便可以执行下一个验证规则。</p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><h2 id="6016" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">必需的验证规则</h2><p id="306f" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">这条规则主要检查表单输入是否包含值。使用方法<strong class="is hj">。includes() </strong>我们能够遍历验证规则，找到一个匹配(R)的规则，R代表<strong class="is hj">必需的</strong>。</p><p id="487a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦找到匹配，我们将使用输入元素的<em class="ll"> id </em>查询输入元素，然后检查该输入元素的值是否为空。</p><p id="561f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果值为空，我们将向该输入元素附加一个错误，并附加一个事件侦听器，当验证无错误通过时，该事件侦听器将删除错误。</p><h2 id="4e61" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">电子邮件验证规则</h2><p id="4afe" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">我们已经处理了必填表单字段的验证规则，它主要检查表单输入是否包含值。现在要执行电子邮件验证，我们需要一个<strong class="is hj"> <em class="ll">正则表达式</em> </strong>来检查有效的电子邮件地址。</p><p id="bab0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果提供的电子邮件无效，我们会将错误附加到表单中，并通过将变量<strong class="is hj"> continueValidation </strong>的值设置为零(0)来阻止我们的脚本处理下一个验证规则，直到该特定规则成功通过。</p><p id="3dc8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，我们的电子邮件验证规则将如下所示；</p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><h2 id="d600" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">我们的验证规则</h2><p id="5661" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">在验证任何规则时，我们将一个<strong class="is hj"> focusout </strong>事件监听器附加到特定的元素上，以便在提供值时自动重新验证表单输入。</p><p id="8df8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果在验证期间出现错误，我们将通过函数<strong class="is hj"> myValidateNewError() </strong>将该错误附加到表单中，稍后当验证成功执行时，我们将通过函数<strong class="is hj">myValidateRemoveError()</strong>删除该错误。</p><p id="bcc6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是函数:</p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><h2 id="b671" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">试运转</h2><p id="aea9" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">为了测试这个脚本，我们需要将父函数(<strong class="is hj"> myValidate() </strong>)中的函数组合在一起，调用这个函数，然后在单击提交按钮时检查它的返回值。</p><p id="b561" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果返回值为<strong class="is hj">假</strong>，这意味着存在验证错误。但是如果返回值为<strong class="is hj"> true </strong>，这意味着所有的验证都成功通过，表单可以处理了。</p><p id="69a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的剧本</p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="5547" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的HTML</p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="3678" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将脚本复制到一个空白页面的脚本标记和同一页面内的HTML中，然后尝试在不提供值的情况下提交表单。</p><p id="b8a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我得到的结果</p><figure class="lc ld le lf fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/e31b9174c716e1f8279bc19e5462d073.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/0*ZSJ2WU5irLKmTxQZ.png"/></div></figure><p id="cd3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果我应该输入一个值，并离开表单输入，focusOut事件将被触发，它将清除表单错误。</p><figure class="lc ld le lf fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/4bcf35c21bdb9c1b377246ea07f40957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/0*BUuu5EFFvwUDeTjF.png"/></div></figure><p id="21e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请记住，我们添加了一个电子邮件验证规则。</p><p id="dbb1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们提供了一个无效的电子邮件地址，然后尝试提交表格，这是我们得到的结果。</p><figure class="lc ld le lf fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/41db1bad5aadca759c2f038042698c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/0*7wUJG0lVzDBczS-Z.png"/></div></figure><p id="d685" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经解释了脚本是如何工作的。您可以添加表单验证规则，并且可以放心，这种验证只在客户端是完美的。您可能还需要在应用程序的服务器端进行重新验证。</p><p id="e1ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我用octaValidate扩展了这个脚本，以支持更多的验证规则。您也可以通过提供您的验证规则来为此项目做出贡献。</p><p id="ec59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我的<a class="ae ls" href="http://github.com/Octagon-simon/octaValidate" rel="noopener ugc nofollow" target="_blank"> GitHub上查看一下这里</a></p></div></div>    
</body>
</html>