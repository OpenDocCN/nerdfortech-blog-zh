<html>
<head>
<title>Yet another analysis on BigQuery GitHub dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对 BigQuery GitHub 数据集的另一种分析</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/yet-another-analysis-of-bigquery-github-dataset-3be93c0857ff?source=collection_archive---------15-----------------------#2021-05-25">https://medium.com/nerd-for-tech/yet-another-analysis-of-bigquery-github-dataset-3be93c0857ff?source=collection_archive---------15-----------------------#2021-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0764" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">早在 2016 年，谷歌就将所有开源项目相关的 GitHub 回购信息作为公共数据集发布在谷歌 BigQuery 上。这为进行有趣的分析打开了大门。在本帖中，我们将分析这个数据集，并尝试对过去二十年开源项目中编程语言的流行程度得出一些见解。</p><p id="e726" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章的 Python 笔记本可以在<a class="ae jd" href="https://colab.research.google.com/drive/1Nu5cRwtw6MsQZKC2jAStLMZqOWiaHHeT?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>找到</p><p id="397b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有几个这样的分析已经在这个数据集上完成，更多细节请参考本文末尾的链接。</p><p id="8281" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="je">请注意，github_repos 数据集非常庞大，在运行这些查询时，您很容易就会超过免费层每月 1TB 已处理数据的限制。</em></p><p id="d809" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一个查询想要探索跨各种开源仓库的编程语言。languages 表中有这些信息，可以很容易地用这样的查询进行查询</p><blockquote class="jf jg jh"><p id="1074" class="if ig je ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">SELECT t0.name，t0 . repo _ name FROM(SELECT repo _ name，l.name</p><p id="7689" class="if ig je ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">来自` big query-public-data . github _ repos . languages '</p><p id="ba14" class="if ig je ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">左连接 unnest(语言)作为 l</p><p id="ae90" class="if ig je ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">极限 5000)作为 t0；</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/887ba4054c927ae3adcb360be68f12b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SnZ87CU9QyawpxdpwH25kg.png"/></div></div></figure><p id="3dd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Google DataStudio 可以方便地以饼状图的形式查看结果，如下所示</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jx"><img src="../Images/1e69be68c32c811d7a5814b6b63ad21e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-7ZkJUt7vs4KHp7JQZ6-TQ.jpeg"/></div></div></figure><p id="67bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有人会认为 Python 会很流行，所以结果可能会有点令人惊讶。为了更深入地挖掘这一点，让我们进一步分析一下，看看这些回购中有多少是活跃的。</p><p id="62e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该信息在提交表中。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jy"><img src="../Images/096a0fc1f1200acd09d8a108502875c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ln35gALzGTLzxZt2GgS3Eg.png"/></div></div></figure><p id="aa69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">提交</strong>表拥有所有回购的所有提交的完整历史。你可以想象这是一张巨大的桌子。幸运的是，有一个<strong class="ih hj"> sample_commits </strong>表，其中包含来自 commits 表的示例数据，供我们使用。请注意，sample_commits 表与 commits 表的结构并不完全匹配，您必须相应地修改查询，例如，sample_commits 中的 repo_name 是一个字符串类型，但在 commits 表中，它是一个重复元素。</p><p id="19c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过连接 commits 和 languages 表，我能够获得我正在寻找的信息。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jz"><img src="../Images/6bb2b61d6e3ec47c29bd6f67e4517b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4qF8egjcezsjNVERKzkMpQ.png"/></div></div></figure><p id="feb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，为了便于分析，让我们将查询结果加载到 Pandas 数据框中。数据如下所示:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es ka"><img src="../Images/813d2a089a34b666474c47473095feef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*afjGF2zVawRnssBEIIBJiQ.png"/></div></figure><p id="427c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该列表包含非编程语言回购提交，经过一些清理后，让我们看看 2020 年 1 月的前 10 个提交，看起来是这样的</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jx"><img src="../Images/8ddc559db92e1fab029b7f6a954054cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Les63d0w4r7jYLswSn7uFg.png"/></div></div></figure><p id="5e24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看起来 C 语言 repos 在 2000 年有最多的提交。</p><p id="3df8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们查看 2020 年 1 月的提交，它看起来像下面这样</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jx"><img src="../Images/7ee9aa0f15d7d1c5b9c1a008bd3d471d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oTo5_VPDpg5HEAKekyesHA.png"/></div></div></figure><p id="52aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看到，C 语言的回购提交从 249，624 增加到 801，955，但是 Python 语言的回购提交从 206，586 增加到 1，163，594。</p><p id="fbed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Matplotlib 有一个漂亮的图形和动画包。通过一些简单的编码，我们可以创建一个连续的条形图动画，显示过去 20 年中各种语言的提交情况，从而了解趋势。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kb"><img src="../Images/0ceff1533a8e0605cca3d076f5935814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MA-cofXSiiF8C0wLNCW_SQ.png"/></div></div></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kc"><img src="../Images/4f2d728795fb5ae0335d3b0d227015ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uQI_vRXIjdldbE2zqYgVpw.png"/></div></div></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kd"><img src="../Images/2864143042ebc7017089ef97a62ab0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OURZ5lVAMk48IOz-F_nk1g.png"/></div></div></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ke"><img src="../Images/d0c76d0153024b4f0b0dc5fa5015f38a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*s1IFjGwWmZQYcAdxrbeKLA.gif"/></div></div></figure><p id="ef8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一些假设可能会扭曲结果并导致一些重复计算</p><ul class=""><li id="f27c" class="kf kg hi ih b ii ij im in iq kh iu ki iy kj jc kk kl km kn bi translated">如果一个回购协议有多种语言，任何提交都将计入所有语言</li><li id="c8d9" class="kf kg hi ih b ii ko im kp iq kq iu kr iy ks jc kk kl km kn bi translated">数据中的提交日期/作者日期有时不可靠，有时也是未来的日期。</li></ul><h1 id="14cc" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">有用的链接</h1><ol class=""><li id="ba60" class="kf kg hi ih b ii lr im ls iq lt iu lu iy lv jc lw kl km kn bi translated"><a class="ae jd" href="https://codelabs.developers.google.com/codelabs/bigquery-github#0" rel="noopener ugc nofollow" target="_blank">https://code labs . developers . Google . com/code labs/big query-github</a></li><li id="a0e1" class="kf kg hi ih b ii ko im kp iq kq iu kr iy ks jc lw kl km kn bi translated"><a class="ae jd" href="https://cloud.google.com/blog/topics/public-datasets/github-on-bigquery-analyze-all-the-open-source-code" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/blog/topics/public-datasets/github-on-big query-analyze-all-the-open-source-code</a></li><li id="5bd2" class="kf kg hi ih b ii ko im kp iq kq iu kr iy ks jc lw kl km kn bi translated">【https://github.com/fhoffa/analyzing_github T4】</li></ol></div></div>    
</body>
</html>