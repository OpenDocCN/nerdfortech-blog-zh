<html>
<head>
<title>Navigator Clipboard API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">导航剪贴板 API</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/navigator-clipboard-api-b96be187df5d?source=collection_archive---------0-----------------------#2021-09-12">https://medium.com/nerd-for-tech/navigator-clipboard-api-b96be187df5d?source=collection_archive---------0-----------------------#2021-09-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="8108" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在主流浏览器中支持异步剪贴板 API</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/3a348d7d284e5f962ca892c7164adf03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*haNpgXPKWNkLg28uKyjcZw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">来自<a class="ae jn" href="https://www.pexels.com/photo/person-holding-white-paper-with-blue-pen-9480111/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae jn" href="https://www.pexels.com/@gabby-k?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">龟背竹</a>摄影</figcaption></figure><p id="90da" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">剪贴板是一个临时存储数据的空间。这些 API 用于开发应用程序中的剪切、复制和粘贴功能。Navigator 剪贴板浏览器 API 用于将各种数据写入剪贴板，也用于读取剪贴板数据。这些在所有主流浏览器(Chrome、Safari 和 Firefox)中都有，支持程度不同。</p><h1 id="b222" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">导航器剪贴板 API</h1><ul class=""><li id="c801" class="lc ld hi jq b jr le ju lf jx lg kb lh kf li kj lj lk ll lm bi translated"><a class="ae jn" href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText" rel="noopener ugc nofollow" target="_blank">navigator . clipboard . write text</a></li><li id="1404" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj lj lk ll lm bi translated">navigator.clipboard.wri  te</li><li id="9012" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj lj lk ll lm bi translated"><a class="ae jn" href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText" rel="noopener ugc nofollow" target="_blank">navigator . clipboard . read text</a></li><li id="db20" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj lj lk ll lm bi translated"><a class="ae jn" href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/read" rel="noopener ugc nofollow" target="_blank">navigator . clipboard . read</a></li></ul><h1 id="1ced" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">支持的 Mime 类型</h1><p id="4a49" class="pw-post-body-paragraph jo jp hi jq b jr le ij jt ju lf im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">Mime 类型定义了数据的类型。这些是在写入和读取剪贴板时指定的，用于指示数据的种类。这些是通常支持的 MimeTypes。</p><ol class=""><li id="943f" class="lc ld hi jq b jr js ju jv jx lv kb lw kf lx kj ly lk ll lm bi translated">所有浏览器都支持文本/纯文本格式</li><li id="aaaf" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">所有浏览器都支持文本/html、html 格式</li><li id="12dd" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">所有浏览器都支持图像/png 图形格式</li><li id="6cff" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">text/uri-list，URL 列表，仅在 Safari 中受支持。</li><li id="f31d" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">“web text/*”、<a class="ae jn" href="https://developer.chrome.com/blog/web-custom-formats-for-the-async-clipboard-api/" rel="noopener ugc nofollow" target="_blank"> Web 自定义格式</a>，仅在 Chrome 中受支持</li><li id="e911" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">“web 应用/*”、<a class="ae jn" href="https://developer.chrome.com/blog/web-custom-formats-for-the-async-clipboard-api/" rel="noopener ugc nofollow" target="_blank"> Web 自定义类型</a>，仅在 Chrome 中受支持</li></ol><h1 id="f026" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">navigator.clipboard.writeText</h1><h2 id="bc58" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">支持的浏览器</h2><p id="c5ff" class="pw-post-body-paragraph jo jp hi jq b jr le ij jt ju lf im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">所有主流浏览器(Chrome、Firefox 和 Safari)</p><h2 id="8083" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">用例</h2><p id="2485" class="pw-post-body-paragraph jo jp hi jq b jr le ij jt ju lf im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">复制到剪贴板按钮。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/d63947862a4483b9ad14be3dc60d686c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-UN_f8ODJ2teZh5X-n5rg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://codepen.io/rohinikumar4073/pen/yLXMmpP?editors=1111" rel="noopener ugc nofollow" target="_blank">https://codepen.io/rohinikumar4073/pen/yLXMmpP?editors=1111</a></figcaption></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mo mp l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">navigator.clipboard.writeText</figcaption></figure><h1 id="3125" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">导航器. clipboard.write</h1><h2 id="c94f" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">支持的浏览器</h2><ol class=""><li id="2759" class="lc ld hi jq b jr le ju lf jx lg kb lh kf li kj ly lk ll lm bi translated">Chrome，Safari</li><li id="846b" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">Firefox 通过将 asyncClipboard 标志设置为 true 来支持。这些配置可通过浏览<strong class="jq hj">关于:配置</strong>获得。</li></ol><h2 id="2765" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">用例</h2><ol class=""><li id="9c48" class="lc ld hi jq b jr le ju lf jx lg kb lh kf li kj ly lk ll lm bi translated">上下文菜单副本</li><li id="8742" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">将图像写入剪贴板</li></ol><h2 id="7b60" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">描述</h2><p id="84c7" class="pw-post-body-paragraph jo jp hi jq b jr le ij jt ju lf im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated"><a class="ae jn" href="https://developer.mozilla.org/en-US/docs/Web/API/ClipboardItem" rel="noopener ugc nofollow" target="_blank"> ClipboardItems </a>数组作为参数传递给 clipboard.write. Blobs 用于创建剪贴板项目。</p><h2 id="43ab" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">遇到的错误</h2><h2 id="0228" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">旅行队</h2><blockquote class="mq mr ms"><p id="2615" class="jo jp mt jq b jr js ij jt ju jv im jw mu jy jz ka mv kc kd ke mw kg kh ki kj hb bi translated">用户代理或平台在当前上下文中不允许该请求，可能是因为用户拒绝了权限。</p></blockquote><p id="d4ac" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">多个问题都可能发生这种情况。</p><ol class=""><li id="8457" class="lc ld hi jq b jr js ju jv jx lv kb lw kf lx kj ly lk ll lm bi translated"><a class="ae jn" href="https://developer.mozilla.org/en-US/docs/Glossary/Transient_activation" rel="noopener ugc nofollow" target="_blank">瞬时激活</a>后发生剪贴板写入。如果用户操作和写入剪贴板的时间延迟超过 1 秒。(Safari 支持为剪贴板项目返回承诺和解析 blobs 以避免此问题)。</li></ol><h2 id="2572" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">铬</h2><blockquote class="mq mr ms"><p id="fde2" class="jo jp mt jq b jr js ij jt ju jv im jw mu jy jz ka mv kc kd ke mw kg kh ki kj hb bi translated">文档未聚焦</p></blockquote><p id="2b54" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个错误发生在 Chrome 中，当写入剪贴板时有延迟，用户没有聚焦在窗口上。</p><h2 id="275d" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">Chrome 浏览器、火狐浏览器</h2><blockquote class="mq mr ms"><p id="157d" class="jo jp mt jq b jr js ij jt ju jv im jw mu jy jz ka mv kc kd ke mw kg kh ki kj hb bi translated">写入时不支持类型{mimeType}</p></blockquote><p id="14c3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当编写的 mimeType 不是文本、html 或图像时，在 Chrome 中会发生此错误。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mx"><img src="../Images/910f3bbe3d2a6b83297b8ec69045965d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l6gJalb0D-1D5Ru05ybNBQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">【https://codepen.io/rohinikumar4073/pen/xxrdxxR T4】</figcaption></figure><p id="cceb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Safari 还支持使用 blobs 的承诺创建 clipboardItem。当要写入的数据必须从服务器获取时，这很有帮助。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mx"><img src="../Images/ef892f750b231ab788826f671a547dbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BJapzD1XtAALPZwYurmsag.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Safari 承诺返回剪贴板项目 blobs</figcaption></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mo mp l"/></div></figure><h1 id="33b2" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">navigator.clipboard.readText 和 navigator.clipboard.read</h1><h2 id="770a" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">支持的浏览器</h2><ol class=""><li id="6bb2" class="lc ld hi jq b jr le ju lf jx lg kb lh kf li kj ly lk ll lm bi translated">Chrome，Safari</li><li id="f921" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">Firefox 通过设置 asyncClipboard 标志来支持这一点，正如我们在 write 中所讨论的。</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/5dbbc558b0f62aed57c5f3c73f4999f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSuAzs3NGKZBYvQ8L56UUg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">navigator.clipboard.readText</figcaption></figure><h1 id="2f32" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">导航器. clipboard.read</h1><h2 id="f4d4" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">错误</h2><h2 id="c16d" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">铬</h2><blockquote class="mq mr ms"><p id="61ad" class="jo jp mt jq b jr js ij jt ju jv im jw mu jy jz ka mv kc kd ke mw kg kh ki kj hb bi translated">读取权限被拒绝</p></blockquote><p id="a1c9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">navigator.clipboard.read 上有一个允许剪贴板访问的提示。当提示出现时，如果用户单击阻止剪贴板访问，就会出现此错误。</p><blockquote class="mq mr ms"><p id="bc8c" class="jo jp mt jq b jr js ij jt ju jv im jw mu jy jz ka mv kc kd ke mw kg kh ki kj hb bi translated">剪贴板上没有有效数据。</p></blockquote><p id="367a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当剪贴板中没有文本、html 或图像，并且包含一些其他数据类型或空剪贴板时，会出现此错误。</p><h2 id="de6c" class="lz kl hi bd km ma mb mc kq md me mf ku jx mg mh kw kb mi mj ky kf mk ml la mm bi translated">旅行队</h2><blockquote class="mq mr ms"><p id="6f1b" class="jo jp mt jq b jr js ij jt ju jv im jw mu jy jz ka mv kc kd ke mw kg kh ki kj hb bi translated">用户代理或平台在当前上下文中不允许该请求，可能是因为用户拒绝了权限</p></blockquote><ol class=""><li id="2b7d" class="lc ld hi jq b jr js ju jv jx lv kb lw kf lx kj ly lk ll lm bi translated">在 navigator.clipboard.read 上如果剪贴板数据不是来自同一个浏览器按钮，Safari 中会显示一个额外的粘贴按钮。如果没有单击，将会引发此错误。</li><li id="8605" class="lc ld hi jq b jr ln ju lo jx lp kb lq kf lr kj ly lk ll lm bi translated">当我们试图在类似上下文菜单的事件中调用 navigator.clipboard.read 时，就会显示这一点。</li></ol><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mo mp l"/></div></figure></div></div>    
</body>
</html>