<html>
<head>
<title>Steps to setup Kafka cluster on Local And Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在本地和Docker上设置Kafka集群的步骤</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/steps-to-setup-kafka-cluster-on-local-and-docker-ae84324cde86?source=collection_archive---------2-----------------------#2021-02-27">https://medium.com/nerd-for-tech/steps-to-setup-kafka-cluster-on-local-and-docker-ae84324cde86?source=collection_archive---------2-----------------------#2021-02-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="88cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将看到在Docker (Docker工具箱)或本地机器上安装和运行Kafka集群的步骤。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/50d8b037f37086af137346b4113a7afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VBzmKORxuRChicQAojBFCg.png"/></div></div></figure><blockquote class="jp jq jr"><p id="4903" class="if ig js ih b ii ij ik il im in io ip jt ir is it ju iv iw ix jv iz ja jb jc hb bi translated"><a class="ae jw" rel="noopener" href="/nerd-for-tech/apache-kafka-quick-start-1edeef53773e">阿帕奇卡夫卡:快速入门</a><br/>T3】卡夫卡连接:快速入门</p></blockquote><p id="191c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:这里我们设置了一个Kafka集群，有3个代理和一个Zookeeper实例。</p><p id="b045" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在本地机器上安装Kafka(windows):</strong></p><p id="eade" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从下面的链接下载卡夫卡:</p><div class="jx jy ez fb jz ka"><a href="https://kafka.apache.org/downloads" rel="noopener  ugc nofollow" target="_blank"><div class="kb ab dw"><div class="kc ab kd cl cj ke"><h2 class="bd hj fi z dy kf ea eb kg ed ef hh bi translated">阿帕奇卡夫卡</h2><div class="kh l"><h3 class="bd b fi z dy kf ea eb kg ed ef dx translated">2.7.0是最新版本。目前的稳定版本是2.7.0。您可以通过以下方式验证您的下载…</h3></div><div class="ki l"><p class="bd b fp z dy kf ea eb kg ed ef dx translated">kafka.apache.org</p></div></div><div class="kj l"><div class="kk l kl km kn kj ko jn ka"/></div></div></a></div><p id="4759" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦kafka被下载到本地机器上，将Kafka解压到目录中，并创建两个目录来保存Zookeeper和Kafka broker的日志，如下所示。</p><p id="d1ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kafka CLI命令在local/docker中启动Kafka集群(windows) <br/> <em class="js"> Windows命令路径:</em> <strong class="ih hj"> <em class="js">../Kafka _ 2.12v/bin/windows</em></strong></p><ol class=""><li id="3110" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated"><em class="js">启动/停止Zookeeper</em><br/><em class="js">-Zookeeper-server-start . bat<br/>-Zookeeper-server-stop . bat</em></li><li id="781d" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><em class="js">开始/停止Kafka经纪人</em><br/><em class="js">-Kafka-server-start . bat<br/>-Kafka-server-stop . bat</em></li><li id="a99c" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><em class="js">为卡夫卡选题</em><br/><em class="js">-Kafka-topics . bat</em></li><li id="d018" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><em class="js">创建控制台制作人</em> <br/> <em class="js"> -卡夫卡-控制台-制作人. bat </em></li><li id="b3b3" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><em class="js">创建控制台消费者</em> <br/> <em class="js"> -卡夫卡-控制台-消费者. bat </em></li><li id="ad77" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><em class="js">创建主机消费群</em><br/><em class="js">-Kafka-consumer-groups . bat</em></li></ol><p id="7094" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注</strong>:以下命令对于linux机器是相同的:../卡夫卡_2.12v/bin</p><p id="a87d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用Kafka CLI命令启动Zookeeper和Kafka代理/服务器，如下所示</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="bec3" class="li lj hi le b fi lk ll l lm ln"><strong class="le hj">## START ZOOKEEPER</strong><br/>zookeeper-server-start &lt;LOCAL-KAFKA-PATH&gt;/etc/kafka/zookeeper.properties</span><span id="318e" class="li lj hi le b fi lo ll l lm ln"><strong class="le hj">## START 2 KAFKA BROKERS (on port - 9091, 9092: configured in server properties)</strong><br/>kafka-server-start &lt;LOCAL-KAFKA-PATH&gt;/etc/kafka/server-0.properties<br/>kafka-server-start &lt;LOCAL-KAFKA-PATH&gt;/etc/kafka/server-1.properties</span><span id="1763" class="li lj hi le b fi lo ll l lm ln"><strong class="le hj">## CREATE TOPIC - NUMBERS</strong><br/>kafka-topics --bootstrap-server localhost:9091 --create --topic squaredNumbers --partitions 3 --replication-factor 2</span><span id="f541" class="li lj hi le b fi lo ll l lm ln"><strong class="le hj">## TOPICS LIST FROM CURRENT CLUSTER</strong><br/>kafka-topics --bootstrap-server localhost:9091 --list</span><span id="7590" class="li lj hi le b fi lo ll l lm ln"><strong class="le hj">## DESCRIBE TOPIC "NUMBERS"</strong><br/>kafka-topics --bootstrap-server localhost:9091 --topic  numbers --describe</span></pre><p id="c698" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在Docker桌面/Docker工具箱上设置Kafka集群:</strong></p><p id="eb4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js"> Docker安装:</em><br/><a class="ae jw" href="https://docs.docker.com/docker-for-windows/install/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/docker-for-windows/install/</a><br/><a class="ae jw" href="https://docs.docker.com/docker-for-windows/install-windows-home/" rel="noopener ugc nofollow" target="_blank">https://docs . Docker . com/Docker-for-windows/install-windows-home/</a><br/><a class="ae jw" href="https://docs.docker.com/docker-for-mac/install/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/docker-for-mac/install/</a></p><p id="ef5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">执行以下任何命令来验证docker安装</p><blockquote class="jp jq jr"><p id="dbc0" class="if ig js ih b ii ij ik il im in io ip jt ir is it ju iv iw ix jv iz ja jb jc hb bi translated">对接器版本<br/></p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lp"><img src="../Images/cd4f30b361753673587c267118ad7b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*iPOcMCcwTjv0uBoX3IQWOg.png"/></div></figure><p id="921e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们进入Docker终端或命令提示符，使用docker pull命令和Kafka-image-name "<a class="ae jw" href="https://hub.docker.com/r/confluentinc/cp-kafka" rel="noopener ugc nofollow" target="_blank">CP-Kafka</a>"</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lq"><img src="../Images/449218fa27670b073ce7dfd0c93ccd9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*0uNT8gq9ghM7yx89sNkpaw.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx translated">Docker hub —卡夫卡图像</figcaption></figure><p id="c9ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jw" href="https://docs.confluent.io/3.3.0/installation/docker/docs/quickstart.html" rel="noopener ugc nofollow" target="_blank">在docker容器上启动Zookeeper和Kafka Broker</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/a6c072ebc031508d5e7f9918a22373f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*Xp5ML7zuXRu4EPEWn6aGQA.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/ba4ca1d476a0a12d5dd4ba373adf6420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLJVLlSLm1mj-439eisZPg.png"/></div></div></figure><p id="2892" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们首先创建一个主题“numbers ”,其中分区为3，复制因子为2。</p><p id="167b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:“kafka-1”是运行Kafka broker的docker容器名。</p><p id="f8c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">IP: 192.168.99.100 : Docker工具箱默认IP</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="284d" class="li lj hi le b fi lk ll l lm ln">## CREATE TOPIC - NUMBERS<br/>docker exec kafka-1 kafka-topics --bootstrap-server 192.168.99.100:9092 --create --topic numbers --partitions 3 --replication-factor 2</span><span id="59d1" class="li lj hi le b fi lo ll l lm ln">## TOPICS LIST FROM CURRENT CLUSTER<br/>docker exec kafka-1 kafka-topics --bootstrap-server 192.168.99.100:9092 --list</span><span id="ddf5" class="li lj hi le b fi lo ll l lm ln">## DESCRIBE NUMBERS TOPIC<br/>docker exec kafka-1 kafka-topics --bootstrap-server 192.168.99.100:9091 --topic  numbers --describe</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/fa4d96532ab64d114a8b044f3565304a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0NRKZk3G2RvORHru4Gxeog.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/f77bca04e53dade9699d10130e332a82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*toSaBTQrFRDIE2tnfFlqKA.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/9bfcbc77ed05f084a46e786833b7912b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8YSdPvdYnk6n679Z4JKqw.png"/></div></div></figure><p id="5481" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考文献</strong>:</p><ul class=""><li id="5336" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ma kv kw kx bi translated"><a class="ae jw" href="https://docs.confluent.io/platform/current/quickstart/ce-quickstart.html" rel="noopener ugc nofollow" target="_blank">在本地设置卡夫卡</a></li><li id="e3d5" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ma kv kw kx bi translated"><a class="ae jw" href="https://docs.confluent.io/platform/current/quickstart/ce-docker-quickstart.html?utm_medium=sem&amp;utm_source=google&amp;utm_campaign=ch.sem_br.nonbrand_tp.rmkt_tgt.kafka_mt.mbm_rgn.india_lng.eng_dv.all&amp;utm_term=%2Bkafka%20%2Bdocker&amp;creative=&amp;device=c&amp;placement=&amp;gclid=Cj0KCQiA-OeBBhDiARIsADyBcE4dvxHvl_A4egCzX2-unAd-1DptauuPKcQQwNUnfNnIcHIflutjfFIaAiymEALw_wcB#" rel="noopener ugc nofollow" target="_blank">在Docker上设置Kafka</a></li></ul></div></div>    
</body>
</html>