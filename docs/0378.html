<html>
<head>
<title>Talking data user demographics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对话数据用户人口统计</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/talking-data-user-demographics-f97dea332bde?source=collection_archive---------0-----------------------#2020-11-11">https://medium.com/nerd-for-tech/talking-data-user-demographics-f97dea332bde?source=collection_archive---------0-----------------------#2020-11-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0928" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个难题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/8eed29a48f2a4adfa2279f6dab353598.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*sY3XrlZwH0LNypqKBvO05Q.gif"/></div></figure><p id="b8c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在瞬间的动力、冲动的决策和在 AI 上狂看电影的瞬间，我决定解决这个 Kaggle 问题。让我们开始吧。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h2 id="ef8a" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">问题:</h2><p id="51e4" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">简而言之，我们提供了用户移动使用数据，通过这些数据我们可以预测用户的年龄和性别。请在 Kaggle 网站上查看完整的<a class="ae ks" href="https://www.kaggle.com/c/talkingdata-mobile-user-demographics/data" rel="noopener ugc nofollow" target="_blank">问题陈述</a>。</p><p id="bfce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，最终的预测应该是由性别和年龄范围组成的群体。</p><p id="3356" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如:M32–38，F24–26 等。</p><h2 id="fae8" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">数据:</h2><p id="bdf7" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">这里重点说一下“移动使用数据”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/5c6bde6d62f4e0909ecb26fa6635d10f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*qvElsUBTLgNQfJIOD6BkEA.png"/></div></div></figure><p id="64bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上图所示，提供了 7 个文件，其中性别年龄是列车数据，其他 5 个文件是列车和测试设备的数据。第 7 个文件类似于 gender_age，只包含设备 id，跳过其余部分。</p><p id="e817" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将 device_id 作为指示设备的主键，它与事件数据相链接。app_events、标签和标签类别通过 event_id、app_id 和 label_id 链接。</p><h2 id="f441" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">分析:</h2><p id="7847" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我在分析过程中的主要观察结果是:</p><ul class=""><li id="55df" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">有 12 组，男性用户比女性用户多。</li><li id="1c73" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">男性年龄范围-&gt; 22–39 岁以上</li><li id="f55b" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">女性年龄范围-&gt; 23–43 岁以上</li><li id="8580" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">在年龄方面，我们有更多的女性数据，男性数据也更多。</li><li id="359b" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">男性和女性的 25 和 75 百分位年龄值相似</li><li id="6b76" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">MAD 对男性和女性都一样</li><li id="6a3a" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">尽管男性人数多于女性，但两者的数据分布是相似的。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lm"><img src="../Images/ee1ba908094e141761f0117f2333f13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXU93ck7kQ-epg4p7N0wyw.png"/></div></div></figure><ul class=""><li id="48e9" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">大多数(68.77%)训练数据都有事件</li><li id="cc92" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">大多数(68.80%)测试数据都有事件</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ln"><img src="../Images/6d8ad056f0872e6ffe952385ae588c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*znDQ-Pl5_2glsGDVJBEKlg.png"/></div></figure><ul class=""><li id="af80" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">数据来自 2016 年 4 月 30 日晚上 11:52 到 5 月 8 日上午 12 点</li><li id="484a" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">m32–38 有很多人在晚上 11 点至凌晨 3 点之间打电话。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lo"><img src="../Images/ad91d03950330005bbb3a68e0cb79702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*KpMU1-7iBQ-ER0c7Dec2xQ.png"/></div></figure><ul class=""><li id="89a2" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">相比之下，男性在晚上使用手机的次数比女性多。</li><li id="00df" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">假设事件计数越多，意味着用户使用设备的次数越多。但在我们的数据集中，我们可以说，用户的年龄和性别与用户使用设备的时间量之间没有关系。</li><li id="63f4" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">在每个事件中，用户使用了多个应用，并且这些应用属于多个类别。最常用的类别包括:</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lp"><img src="../Images/6d5260f88d828589ac11bc377ba895f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*22lBGpwv1HJT1j5Y-w6E2A.png"/></div></figure><ul class=""><li id="b012" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">这里安装了所有注册的应用程序，但只有 39.21%的应用程序在使用(Train)。</li><li id="ad9f" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">电话数据中存在需要删除的重复项</li><li id="a781" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">前三大品牌拥有 58.78%的手机，因此它们主宰着手机行业。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lq"><img src="../Images/af042e08ec2b873c0f83f3880a4c5e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6GgS11RfFlwfS4Tpo7cQxQ.png"/></div></div></figure><h2 id="6d15" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">特点:</h2><p id="7205" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">经过分析和一些参考，我想出了以下特点。</p><ul class=""><li id="6e55" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">(所有事件和时间戳的)经度的模式/中值。</li><li id="c30e" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">纬度(所有事件和时间戳)的模式/中值。</li><li id="3ad0" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">特定设备使用(活动)的应用程序的 TFIDF 方法。</li><li id="af6c" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">特定设备使用(安装)的应用程序标签的 BOW 方法。</li><li id="c929" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">手机品牌的 BOW 方法(一键编码，因为这些包含不同的语言)。</li><li id="5fba" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">电话模型的 BOW 方法(一键编码，因为这些由不同的语言组成)。</li><li id="d98e" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">TFIDF 事件发生的工作日。</li><li id="6581" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">TFIDF 活动时间。</li><li id="190f" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">事件的小时箱。</li><li id="7cd8" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">活跃应用程序和已安装应用程序的比率。</li><li id="71e8" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">使用纬度和经度将位置聚类为 10 个聚类。</li></ul><h2 id="914d" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">预测:</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lr"><img src="../Images/18c621870a7540be0d46fdbdaf9676e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*b4Ol1PBBxzZIDgop7jtIoA.gif"/></div></div></figure><p id="9df3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于 32%的数据没有事件数据，我将预测分为两部分:</p><ul class=""><li id="3eba" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">有事件</li><li id="c68b" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">没有事件</li></ul><p id="3c1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将为每个数据集建立单独的预测模型，最后将结果连接起来。</p><p id="0867" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我尝试过逻辑回归、XGBoost 和神经网络，因此模型的基础是我尝试的方法的集合。我所做的是，在获得每个算法的预测后，根据它们的 CV_logloss(交叉验证)对结果进行加权。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ls"><img src="../Images/a4ef32e19eac6f98b1ee22c0e82a1d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bG8Kv5-0GqgTtPLCiLmlHg.png"/></div></div></figure><p id="826a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，由于神经网络中存在差异，即它们每次都有不同的预测(即使参数相同)，因此我对每个神经网络都进行了集成。更像是取了网络得到的所有结果的平均值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lt"><img src="../Images/545acf611ec75b8ae58ea93e9ac6ac26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*gtKOUCljBB4a-Lo4mgPrKw.png"/></div></figure><p id="2774" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，我为每个数据集训练了 2 个神经网络 10 次，并取了结果的平均值，然后还应用了逻辑回归和 XGBoost。您必须找到想要应用的功能的正确组合，以获得最佳效果。</p><p id="f3c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后最终连接两个数据集的最终结果。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lu"><img src="../Images/d7782112753f75537dd122fa50cc76e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T-hiZ26F1KHT-vJHZhjn6Q.png"/></div></div></figure><p id="81e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的最终模型中，我只使用了神经网络进行预测，并能够达到排行榜中前 10%的排名，私人得分为 2.24054，公共得分为 2.23523。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lv"><img src="../Images/7509d5ca1e1c71ac086a1d4b66bd3a0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XZ1CSmdjtaJA4gNP4SBwzA.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/09cb76f1b69a1be5848cc47388c96c55.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*ovfaDlZbmAKKstRmOZsnSQ.png"/></div></figure><h2 id="edb1" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">进一步改进:</h2><p id="26a8" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我看到许多其他参与者通过给其他算法很低的权重得到更好的分数，如 LR 的 0.1，lightGBM 等。你也可以尝试一下，最终，这都是关于正确的特性和正确的方法来获得最好的结果。</p><p id="6ab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请查看我在 GitHub 中的<a class="ae ks" href="https://github.com/akhildasari/talking_data_user_demographics" rel="noopener ugc nofollow" target="_blank">代码，了解详细的实现，如果你有更好的结果或不同的方法，请告诉我。我们可以通过</a><a class="ae ks" href="https://www.linkedin.com/in/akhil-dasari/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系。</p><h2 id="ac50" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">参考资料:</h2><ul class=""><li id="c073" class="ky kz hi ih b ii kn im ko iq lx iu ly iy lz jc ld le lf lg bi translated">【https://www.appliedaicourse.com/ T4】</li><li id="5ff9" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><a class="ae ks" href="https://machinelearningmastery.com/ensemble-methods-for-deep-learning-neural-networks/#:~:text=Ensemble%20learning%20combines%20the%20predictions,and%20how%20predictions%20are%20combined." rel="noopener ugc nofollow" target="_blank">https://machine learning mastery . com/ensemble-methods-for-deep-learning-neural-networks/</a></li><li id="55d6" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><a class="ae ks" href="https://machinelearningmastery.com/ensemble-methods-for-deep-learning-neural-networks/#:~:text=Ensemble%20learning%20combines%20the%20predictions,and%20how%20predictions%20are%20combined." rel="noopener ugc nofollow" target="_blank">https://machine learning mastery . com/ensemble-methods-for-deep-learning-neural-networks/</a></li><li id="faab" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><a class="ae ks" href="https://github.com/MahendharReddy16/Talking-data-" rel="noopener ugc nofollow" target="_blank">https://github.com/MahendharReddy16/Talking-data-</a></li><li id="de4e" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><a class="ae ks" rel="noopener" href="/kaggle-blog/talkingdata-mobile-user-demographics-competition-winners-interview-3rd-place-team-utc-1-3-896fb3bfc79f">https://medium . com/ka ggle-blog/talking data-mobile-user-demographics-competition-winders-interview-季军-团队-utc-1-3-896fb3bfc79f </a></li></ul></div></div>    
</body>
</html>