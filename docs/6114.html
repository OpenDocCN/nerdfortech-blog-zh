<html>
<head>
<title>What are Ruby Lambda functions?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是 Ruby Lambda 函数？</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/what-are-ruby-lambda-functions-6cb6bfe9b20c?source=collection_archive---------3-----------------------#2021-12-31">https://medium.com/nerd-for-tech/what-are-ruby-lambda-functions-6cb6bfe9b20c?source=collection_archive---------3-----------------------#2021-12-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a83a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">介绍 Lambda 及其一流的地位</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/1c6026f972269d71bd9c22c4b7c138a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l7xqt4ostA2Hd1XnlyeGaw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">法比奥·桑塔尼耶洛·布鲁恩通过 unsplash.com<a class="ae jn" href="https://unsplash.com/photos/Y6tGu-OH8lA" rel="noopener ugc nofollow" target="_blank">拍摄</a><a class="ae jn" href="https://unsplash.com/@fabiosbruun" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="ca84" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你搜索的是 AWS Lambda 函数，那么你来错地方了。Ruby Lambda 函数是它们自己的东西，尽管它们不像 AWS Lambda 那样华丽或者广为人知，但我认为作为一名 Ruby 开发者理解它们同样重要。我的希望是在这篇博文中让你相信这一点。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="aebc" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">兰姆达斯是什么？</h1><p id="8fdd" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">如果你熟悉 JavaScript，你就会知道 JavaScript 把它的函数视为一等公民。如果你不是，这只是一种奇特的说法，函数可以作为变量存储，作为参数传递给其他函数，并作为函数的返回值。</p><p id="686e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">与 JavaScript 不同，Ruby 不把它的函数视为一等公民，这在一定程度上限制了它的功能。在 Ruby 中，lambda 弥合了这一鸿沟，允许我们创建被视为一等公民的函数。这允许我们封装某个代码块和其中包含的任何内容，并在应用程序的其他地方使用它！</p><p id="11bd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi lo translated">事实上，在写这篇文章的过程中，我发现 lambda 并不是 Ruby 独有的，在大多数编程语言中都存在。</p><h1 id="4a3e" class="kr ks hi bd kt ku lx kw kx ky ly la lb io lz ip ld ir ma is lf iu mb iv lh li bi translated">lambdas 怎么写？</h1><p id="a704" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">现在我们已经讨论了什么是 lambdas，让我们来看看定义它们的几种方法。</p><pre class="iy iz ja jb fd mc md me mf aw mg bi"><span id="0736" class="mh ks hi md b fi mi mj l mk ml"># lambda<br/>1. my_lambda = lambda { puts "Hello from my lambda!" }</span><span id="9621" class="mh ks hi md b fi mm mj l mk ml"># literal lambda<br/>2. my_literal_lambda = -&gt;() { puts "Hello from my literal lambda!" }</span></pre><p id="ff67" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">调用你新的很酷的 lambda 函数可以通过以下任何一种方式来完成。</p><pre class="iy iz ja jb fd mc md me mf aw mg bi"><span id="43ad" class="mh ks hi md b fi mi mj l mk ml">1. my_lambda.call</span><span id="e332" class="mh ks hi md b fi mm mj l mk ml">2. my_lambda.()</span><span id="0341" class="mh ks hi md b fi mm mj l mk ml">3. my_lambda.[] # this can also be called as my_lambda[]</span><span id="8bd0" class="mh ks hi md b fi mm mj l mk ml">4. my_lambda.===</span></pre><p id="2883" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想使用参数呢？</p><pre class="iy iz ja jb fd mc md me mf aw mg bi"><span id="2a85" class="mh ks hi md b fi mi mj l mk ml">1. lambda_with_arg = lambda { |name| puts "Hi, my name's #{name}!" }</span><span id="1cfa" class="mh ks hi md b fi mm mj l mk ml">2. literal_lambda_arg = -&gt;(name) { puts "Hi my name's #{name}!" }</span></pre><p id="c6a6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以用以下方式称呼这些兰姆达斯。</p><pre class="iy iz ja jb fd mc md me mf aw mg bi"><span id="6ccf" class="mh ks hi md b fi mi mj l mk ml">1. lambda_with_arg.call("David")</span><span id="6f2d" class="mh ks hi md b fi mm mj l mk ml">2. lambda_with_arg.("David")</span><span id="9ea0" class="mh ks hi md b fi mm mj l mk ml">3. lambda_with_arg["David"]</span><span id="c896" class="mh ks hi md b fi mm mj l mk ml">4. lambda_with_arg.==="David"</span></pre><p id="aef3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您想使用多个参数，只需像往常一样用逗号分隔即可。我正在用 Ruby 3 . 0 . 1 版本测试这个，不管出于什么原因，方括号<code class="du mn mo mp md b">[]</code>只能通过移除分隔 lambda 名称和方括号的<code class="du mn mo mp md b">.</code>来调用。</p><p id="c108" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Lambdas 也可以通过使用 do-end 关键字写成多行块。</p><pre class="iy iz ja jb fd mc md me mf aw mg bi"><span id="1eee" class="mh ks hi md b fi mi mj l mk ml">1. multi_line_lambda = lambda do |name|<br/>2.   puts "Hello!"<br/>3.   puts "What's your name?"<br/>4.   puts "My name is #{name}."<br/>5. end</span></pre><p id="880c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">可以用 lambda 语法写一个多行 lambda，但是约定是在那种情况下使用常规的 lambda 关键字来提高可读性。</p><p id="4dc6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这基本上涵盖了如何写信和打电话给 lambdas，但如果我不涵盖他们的独特之处，他们的一等公民身份，我会给你带来伤害。</p><h1 id="d0f8" class="kr ks hi bd kt ku lx kw kx ky ly la lb io lz ip ld ir ma is lf iu mb iv lh li bi translated">一等兰达斯</h1><p id="41c0" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">我们已经看到了兰达斯成为一等公民的一面。上面的每个例子都使用一个变量来存储 lambda 函数。我不能夸大它的重要性，因为它允许 lambda 函数作为参数传递和作为值返回。</p><p id="7b5e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们来看看如何做到这两点。</p><pre class="iy iz ja jb fd mc md me mf aw mg bi"><span id="dca1" class="mh ks hi md b fi mi mj l mk ml">1. def say_hello(first_name, last_name, lambda_arg)</span><span id="8701" class="mh ks hi md b fi mm mj l mk ml">2.   name = lambda_arg.call(first_name, last_name)</span><span id="f99a" class="mh ks hi md b fi mm mj l mk ml">3.   puts "Hello my name is #{name}."</span><span id="fb9e" class="mh ks hi md b fi mm mj l mk ml">4. end</span><span id="811c" class="mh ks hi md b fi mm mj l mk ml">5. forward_lambda = lambda do |first, last|</span><span id="4467" class="mh ks hi md b fi mm mj l mk ml">6.   return "#{first} #{last}"</span><span id="60d0" class="mh ks hi md b fi mm mj l mk ml">7. end</span><span id="eecc" class="mh ks hi md b fi mm mj l mk ml">8.  backwards_lambda = lambda do |first, last|</span><span id="9a43" class="mh ks hi md b fi mm mj l mk ml">9.    return "#{last}, #{first}"</span><span id="f41a" class="mh ks hi md b fi mm mj l mk ml">10. end</span><span id="62cb" class="mh ks hi md b fi mm mj l mk ml">11. say_hello "david", "polcari", forward_lambda</span><span id="4f3c" class="mh ks hi md b fi mm mj l mk ml">12. say_hello "david", "polcari", backwards_lambda</span><span id="7247" class="mh ks hi md b fi mm mj l mk ml">=&gt; Hello my name is david polcari. </span><span id="cb7b" class="mh ks hi md b fi mm mj l mk ml">=&gt; Hello my name is polcari, david.</span></pre><p id="3b18" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如你在上面看到的，我们能够定义一个函数，创建两个独立的 lambdas，并在将它们传递给同一个函数之前将它们存储在变量中。</p><p id="e7d4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是一个返回 lambda 的例子。</p><pre class="iy iz ja jb fd mc md me mf aw mg bi"><span id="144c" class="mh ks hi md b fi mi mj l mk ml">1. def calculate_tax <em class="mq">subtotal</em></span><span id="fcb1" class="mh ks hi md b fi mm mj l mk ml">2.   tax =  (subtotal * 0.0825).round(2)</span><span id="699e" class="mh ks hi md b fi mm mj l mk ml">3.   return lambda { puts tax }</span><span id="1503" class="mh ks hi md b fi mm mj l mk ml">4. end</span><span id="f1dc" class="mh ks hi md b fi mm mj l mk ml">5. first_tax = calculate_tax(10)</span><span id="7ad0" class="mh ks hi md b fi mm mj l mk ml">6. second_tax = calculate_tax(100)</span><span id="ceb8" class="mh ks hi md b fi mm mj l mk ml">7. first_tax.call</span><span id="ac6f" class="mh ks hi md b fi mm mj l mk ml">8. second_tax.call</span><span id="d1bc" class="mh ks hi md b fi mm mj l mk ml">=&gt; 0.83<br/>=&gt; 8.25</span></pre><p id="eb23" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想抽象出一些功能并存储起来，以便在程序执行的后期使用，这真的很有帮助。</p><p id="154a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这基本上概括了 Ruby lambdas 以及如何使用它们。希望你能意识到这些是多么的强大，并且能够在你未来的项目中实现它们。</p><p id="8a4e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">顺便说一句，对于那些好奇的人来说，lambda 函数实际上是 Ruby 中 Proc 类的一个实例。过几周再回来看我的下一篇文章，讨论 Ruby 中 proc 和 lambda 的区别。</p><p id="3dc5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一如既往地在下面留下评论，让我知道你是如何在你自己的项目中使用 lambda 的！</p></div></div>    
</body>
</html>