<html>
<head>
<title>Configuring Docker Containers using Ansible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ansible配置Docker容器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/configuring-docker-containers-using-ansible-a2073ab8e2de?source=collection_archive---------0-----------------------#2021-07-18">https://medium.com/nerd-for-tech/configuring-docker-containers-using-ansible-a2073ab8e2de?source=collection_archive---------0-----------------------#2021-07-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/9a7ecfcb2a6e250289cb6130a9542db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*os6_sXexHKZL42FZcYcPyg.png"/></div></figure><p id="88ef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇博客中，我将演示如何使用Ansible执行以下操作:</p><ol class=""><li id="29d9" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jp jq jr js bi translated">在Centos 8或RedHat 8上配置Docker</li><li id="167c" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">启动并启用Docker服务</li><li id="afa8" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">从GitHub中提取Docker图像</li><li id="2dd8" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">运行Docker容器</li><li id="8860" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">将此新容器用作受管主机。</li><li id="c58c" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">在容器管理的主机中配置apache2 web服务器，并将其公开。</li></ol><h1 id="1572" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">步骤1:为ansible控件节点创建工作区</h1><p id="76b9" class="pw-post-body-paragraph im in hi io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated"><strong class="io hj"> $ mkdir ansible-ws </strong></p><p id="9e3c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> $ cd ansible-ws </strong></p><p id="ede0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> $ mkdir inventorydb/ </strong></p><p id="3d18" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">创建ansible.cfg文件并将这些值添加到其中</p><p id="e00d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> $ vim ansible.cfg </strong></p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lb"><img src="../Images/882d694c4769d8ff0e1fc1af3ae2f1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h_bvnZHXbRFXQfeM9v3T7Q.png"/></div></div></figure><p id="f766" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，为我们的托管节点创建一个静态清单文件</p><p id="ac1d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> $ vim库存数据库/库存</strong></p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lk"><img src="../Images/08906a1516bd8e6ac4d3741030923526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SwlhUefnpj5a96ANgzioMA.png"/></div></div></figure><h1 id="08e4" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">步骤2:创建一个可行的剧本，用于在受管节点上配置Docker。</h1><p id="b7c4" class="pw-post-body-paragraph im in hi io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated"><strong class="io hj">$ vim docker _ configure . yml</strong></p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="62a0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行本行动手册:</p><p id="be3c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">$ ansi ble-playbook docker _ configure . yml</strong></p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es ln"><img src="../Images/4f35b01a6d152d567daa9875e937b626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ymLZqW865vqrYFm9A9x_g.png"/></div></div></figure><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lo"><img src="../Images/276b27c97031b918fc63b783ae318e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-JzZs8XG5PBwga9tYLj-w.png"/></div></div></figure><h1 id="b742" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">步骤2:创建一个运行一个容器的Ansible剧本，然后用该容器动态更新库存，然后用Apache2 webserver配置该容器</h1><p id="cb57" class="pw-post-body-paragraph im in hi io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated"><strong class="io hj">$ vim container _ configure . yml</strong></p><figure class="lc ld le lf fd ij"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="f0c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行本行动手册:</p><p id="bfeb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">$ ansi ble-playbook container _ configure . yml</strong></p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es ln"><img src="../Images/4f35b01a6d152d567daa9875e937b626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ymLZqW865vqrYFm9A9x_g.png"/></div></div></figure><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lo"><img src="../Images/276b27c97031b918fc63b783ae318e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-JzZs8XG5PBwga9tYLj-w.png"/></div></div></figure><p id="95ac" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们检查托管主机和我们的清单:</p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lp"><img src="../Images/93360cdc97e42e8a483fadfd16435569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xICkzBw-BNES8PCZxFeH_g.png"/></div></div></figure><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lq"><img src="../Images/60d0168b9d7f1beb3e01c2666f8947b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z0pIQesmaX_fq5oJJfcTOQ.png"/></div></div></figure><p id="0f31" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以清楚地看到，一个新的受管节点被添加到清单中。这是我们在本行动手册中配置的Docker容器。</p><p id="9e9a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，让我们检查Docker容器中运行的web服务器是否正在运行:</p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lr"><img src="../Images/9ebb11568a0c6ee9c464de9f73851faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0lr6xcSHD4Em-JAGoJoAfA.png"/></div></div></figure><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es ls"><img src="../Images/431a2ebaa55165805a478c926a4d6444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nycmHlkC4TdMdkrLf7kUFg.png"/></div></div></figure><p id="ef53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">它工作得非常好…</p><p id="97bb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">GitHub:</strong><a class="ae lt" href="https://github.com/mtabishk/ansible-playbooks/tree/main/docker_container_conf" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/mtabishk/ansi ble-playbooks/tree/main/docker _ container _ conf</a></p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="b868" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">今天就到这里吧！我很快会带一些新文章回来，谢谢！🤗</p><p id="2a5b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">穆罕默德·塔比什·坎戴</p><p id="1fb9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">领英:<a class="ae lt" href="https://www.linkedin.com/in/mtabishk/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/mtabishk/</a></p></div></div>    
</body>
</html>