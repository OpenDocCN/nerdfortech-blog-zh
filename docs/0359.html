<html>
<head>
<title>OpenAPI Specification — Swagger UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenAPI规范— Swagger UI</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/open-api-specification-swagger3-fc9ad3bbacdd?source=collection_archive---------0-----------------------#2020-10-31">https://medium.com/nerd-for-tech/open-api-specification-swagger3-fc9ad3bbacdd?source=collection_archive---------0-----------------------#2020-10-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e829ed3b81efb267695853131e407e66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZ4zp1aZ49yV6vHwDlR6tQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">什么是API，为什么需要API？它很旧，但仍然适用…<a class="ae iu" href="https://www.govtech.com/applications/Whats-an-API-and-Why-Do-You-Need-One.html" rel="noopener ugc nofollow" target="_blank">https://www . gov tech . com/applications/Whats-an-API-and-Why-Do-You-Need-one . html</a></figcaption></figure><p id="8ee0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们，开发人员，倾向于使用现有的一段代码<em class="jt">(大多来自</em><a class="ae iu" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"><em class="jt">【stackoverflow.com</em></a><em class="jt">)</em>，而不是重新发明轮子。</p><p id="3f80" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">API正在推动以共享服务为中心的新一波创新，而开发者不必共享他的代码。因此，从某种意义上说，API是一个可重用的组件，它们实现了一块拼图，其他人可以重用它，而不必解决同一块拼图。这就是为什么我们经常听到人们说<em class="jt">“你就不能用一个API来实现吗？”。</em> <strong class="ix hj">谷歌</strong>目前提供二十多个API，可以在<a class="ae iu" href="http://code.google.com/apis/" rel="noopener ugc nofollow" target="_blank">谷歌代码网站</a>上找到</p><p id="2461" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可以说，应用编程接口(API)允许其他程序与之交互，而不需要开发者共享整个代码。开发人员公开一个API，告诉程序员如何与现有的服务进行交互。这表明需要一种标准化的方法来记录API，帮助其他程序员更有效地理解和使用API。</p><p id="fa5a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将看到如何使用开放API规范和呈现一个swagger UI来简化和标准化我们的API文档。</p><p id="35da" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://github.com/sourabhparsekar/open-api-spec" rel="noopener ugc nofollow" target="_blank"> Github代码</a> —这是我们将在本文中使用的代码的链接。请随意克隆它、尝试它、共享它、改进它，最重要的是用它来简化您的API文档。</p><p id="4863" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">记住，<a class="ae iu" href="https://nordicapis.com/5-reasons-why-developers-are-not-using-your-api/" rel="noopener ugc nofollow" target="_blank">糟糕的或者不存在的文档</a>是你的API没有被其他人使用的原因之一。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="4ec6" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是开放API规范(OAS)？</h1><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/f7be6873339ccac88731b12c18794da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*XiXAph6Aj12kDq0uU6BWnQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://swagger.io/" rel="noopener ugc nofollow" target="_blank">https://swagger.io/</a></figcaption></figure><p id="1879" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">OpenAPI规范(OAS) 以前被称为Swagger规范。它是定义RESTful接口的标准。当OAS被正确定义时，消费者可以用最少的实现逻辑理解远程服务并与之交互。</p><blockquote class="le lf lg"><p id="2f14" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><a class="ae iu" href="https://swagger.io/specification/" rel="noopener ugc nofollow" target="_blank"> OpenAPI规范</a> (OAS)为RESTful APIs定义了一个标准的、与语言无关的接口，允许人类和计算机在不访问源代码、文档或通过网络流量检查的情况下发现和理解服务的功能。</p></blockquote></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="1ac0" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是Swagger UI？</h1><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/71259ba433fdcbcfa049fde81d6dc2bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*3144y89d9w_UFMHCelAjjw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">https://swagger.io/<a class="ae iu" href="https://swagger.io/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="0f13" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://en.wikipedia.org/wiki/Swagger_(software)" rel="noopener ugc nofollow" target="_blank"> Swagger </a>于2011年首次发布，是一个在线交互式HTML文档页面，它定义并描述了<a class="ae iu" href="https://en.wikipedia.org/wiki/Representational_state_transfer" rel="noopener ugc nofollow" target="_blank">RESTful</a>API，并使用<a class="ae iu" href="https://en.wikipedia.org/wiki/JSON" rel="noopener ugc nofollow" target="_blank"> JSON </a>来表达。因此，Swagger UI生成交互式API文档，让用户通过与实时API交互，直接在浏览器中尝试API调用。</p><blockquote class="le lf lg"><p id="2d85" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated">如果不谈论<a class="ae iu" href="https://swagger.io/tools/open-source/" rel="noopener ugc nofollow" target="_blank"> Swagger </a> UI，OAS就不完整。</p></blockquote><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/318886fb4f0c4ada72def4f0f1ce7766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SmD8kJO6y-Lv9oZZ8HuOWQ.png"/></div></div></figure><p id="1228" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">OpenAPI定义使用并符合OpenAPI规范。OAS的最初基础是SmartBear的Swagger项目，由Swagger规范和Swagger工具组成。Swagger是使用OpenAPI规范开发API的最广泛的开源工具集之一。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="d5f8" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">让我们看看代码实现</h1><p id="ba9a" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">现在我们已经看到了理论上的优势，让我们看看如何将它集成到我们的项目中。对于这个例子，我使用<a class="ae iu" href="https://docs.spring.io/spring-boot/docs/2.3.4.RELEASE/reference/html/index.html" rel="noopener ugc nofollow" target="_blank">spring boot-2 . 3 . 4 . release</a>、<a class="ae iu" href="https://maven.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Maven </a>作为构建工具，使用<a class="ae iu" href="https://www.oracle.com/java/technologies/java8.html" rel="noopener ugc nofollow" target="_blank"> Java 8 </a>。完整的演示项目代码可在<a class="ae iu" href="https://github.com/sourabhparsekar/open-api-spec" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。参考<a class="ae iu" href="https://github.com/sourabhparsekar/open-api-spec#readme" rel="noopener ugc nofollow" target="_blank"> README.md </a>文件在本地安装并运行这个项目。</p><blockquote class="le lf lg"><p id="65f9" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated">我们的最终目标是什么？</p></blockquote><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/0a917284bd842e6114d8e1a24e6d5a6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*ftRyMOMit9-iUjgPgrzH4A.png"/></div></figure><p id="0398" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将逐步理解如何使用OpenAPI规范来编码和实现Swagger UI。</p><p id="dafc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还将看到如何使用它来测试我们的服务。</p><p id="e3df" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我们完成，请使用<a class="ae iu" href="https://github.com/sourabhparsekar/open-api-spec" rel="noopener ugc nofollow" target="_blank">示例代码</a>亲自尝试一下。</p><p id="ef7f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">让游戏开始吧……</em></p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><blockquote class="le lf lg"><p id="24d2" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">第一步:OpenAPI规范Maven依赖</em> </strong></p></blockquote><p id="c7c5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在Swagger2版本中，我们必须导入2个Springfox Swagger Jars来设置Swagger UI。当迁移到Swagger 3时，我们只有一个依赖项可以使用。最新版本的<code class="du ls lt lu lv b">springdoc-openapi-ui</code>可以在<a class="ae iu" href="https://search.maven.org/classic/#search%7Cga%7C1%7Cspringdoc-openapi-ui" rel="noopener ugc nofollow" target="_blank"><em class="jt">Maven Central</em></a><em class="jt">上找到。</em>要将它添加到我们的Maven项目中，我们需要在<em class="jt"> pom.xml </em>中添加依赖项</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">OpenAPI规范依赖性</figcaption></figure><blockquote class="le lf lg"><p id="9bc2" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">第二步:昂首阔步配置带跳趾</em> </strong></p></blockquote><p id="bef4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Swagger3的配置需要<strong class="ix hj"> OpenAPI </strong> bean。还可以使用OpenAPI bean添加许可证和联系信息。为简单起见，标题、版本和描述取自“应用程序.属性”</p><p id="c0bf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我们获得了配置设置，就该添加带有Swagger注释的API端点了，这将在后续步骤中描述。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lw lx l"/></div></figure><blockquote class="le lf lg"><p id="9a49" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">步骤3:让我们为POST请求添加第一个端点</em> </strong></p></blockquote><p id="18f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个演示中，我们将使用SpringBoot Rest APIs。我们将仔细检查在<a class="ae iu" href="https://github.com/sourabhparsekar/open-api-spec" rel="noopener ugc nofollow" target="_blank">样本代码</a>中使用的所有注释。这包括Spring注释和Swagger注释。由于这只是一个介绍，我们不会看到每个注释的细节，但我们会涵盖一些注释，它们可以帮助我们整理文档。现在，让我们看看HTTP POST</p><p id="5416" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">弹簧注解</strong></p><p id="e4fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html" rel="noopener ugc nofollow" target="_blank">RestController</a></code> annotation表示每个方法返回的数据将直接写入响应体，而不是呈现一个模板。</p><p id="81b9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/PostMapping.html" rel="noopener ugc nofollow" target="_blank">PostMapping</a> </code>注释将HTTP POST请求映射到特定的处理程序方法。它是一个组合注释，作为<code class="du ls lt lu lv b">RequestMapping(method = RequestMethod.POST)</code>的快捷方式。</p><p id="10ea" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestBody.html" rel="noopener ugc nofollow" target="_blank">RequestBody</a></code>注释表示方法参数应该绑定到web请求的主体。</p><p id="9c43" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">霸气注解</strong></p><p id="d6fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.swagger.io/swagger-core/v2.0.0-RC3/apidocs/io/swagger/v3/oas/annotations/Operation.html" rel="noopener ugc nofollow" target="_blank">Operation</a></code>注释可用于将资源方法定义为OpenAPI操作，和/或定义操作的附加属性。我曾经描述过这次行动。</p><p id="97e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.swagger.io/swagger-core/v2.0.0-RC3/apidocs/io/swagger/v3/oas/annotations/responses/ApiResponses.html" rel="noopener ugc nofollow" target="_blank">ApiResponses</a></code>是一个可重复ApiResponse注释的容器。</p><p id="6b41" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.swagger.io/swagger-core/v2.0.0-RC3/apidocs/io/swagger/v3/oas/annotations/responses/ApiResponse.html" rel="noopener ugc nofollow" target="_blank">ApiResponse</a></code>注释可用于方法级或作为<code class="du ls lt lu lv b">Operation</code>的一个字段，以定义操作的一个或多个响应。</p><p id="a1a4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://javadoc.io/doc/io.swagger.core.v3/swagger-annotations/latest/io/swagger/v3/oas/annotations/media/Content.html" rel="noopener ugc nofollow" target="_blank">Content</a></code>注释可用于定义参数、请求或响应的内容/媒体类型，通过将其定义为字段<code class="du ls lt lu lv b"><a class="ae iu" href="https://javadoc.io/static/io.swagger.core.v3/swagger-annotations/2.1.5/io/swagger/v3/oas/annotations/Parameter.html#content--" rel="noopener ugc nofollow" target="_blank">Parameter.content()</a></code>、<code class="du ls lt lu lv b"><a class="ae iu" href="https://javadoc.io/static/io.swagger.core.v3/swagger-annotations/2.1.5/io/swagger/v3/oas/annotations/parameters/RequestBody.html#content--" rel="noopener ugc nofollow" target="_blank">RequestBody.content()</a></code>或<code class="du ls lt lu lv b"><a class="ae iu" href="https://javadoc.io/static/io.swagger.core.v3/swagger-annotations/2.1.5/io/swagger/v3/oas/annotations/responses/ApiResponse.html#content--" rel="noopener ugc nofollow" target="_blank">ApiResponse.content()</a></code></p><p id="735e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注释可用于定义OpenAPI规范的一组元素的模式，和/或定义该模式的附加属性。它适用于例如参数、模式类(也称为“模型”)、这种模型的属性、请求和响应内容、报头。</p><p id="2371" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Swagger注释是可选的，它可以用Spring注释创建最小的Swagger UI。然而，使用Swagger注释，我们可以使文档更具可读性和用户友好性。</p><p id="889f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看看下面的示例代码和输出。Swagger创建了一个现成的示例请求/响应，还提供了一个“试用”选项，可用于测试实时API。我们将在后面的章节中查看“试用”选项。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP POST请求的示例控制器端点</figcaption></figure><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/889d02befce310a75c94fe556870faa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RhhszK1kgPv_9j1MS24B0g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP POST请求的大摇大摆</figcaption></figure><blockquote class="le lf lg"><p id="dd83" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">第4步:让我们为GET请求添加端点</em> </strong></p></blockquote><p id="8eee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于上面的HTTP POST中已经介绍了一些注释，我们将讨论HTTP GET请求中的新注释。对于GET，我们将看到get all employees和get an employee by id。</p><p id="d971" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">弹簧注释</strong></p><p id="ea5c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/GetMapping.html" rel="noopener ugc nofollow" target="_blank">GetMapping</a> </code>用于将HTTP <code class="du ls lt lu lv b">GET</code>请求映射到特定处理程序方法的注释。它是一个组合注释，作为<code class="du ls lt lu lv b">RequestMapping(method = RequestMethod.GET)</code>的快捷方式。</p><p id="13f8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/PathVariable.html" rel="noopener ugc nofollow" target="_blank">PathVariable</a></code>注释表明方法参数应该绑定到URI模板变量。这一般用在我们需要按id找东西的时候。</p><p id="e369" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">招摇标注</strong></p><p id="fdf2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.swagger.io/swagger-core/v2.0.6/apidocs/io/swagger/v3/oas/annotations/Parameter.html" rel="noopener ugc nofollow" target="_blank">Parameter</a></code>可在方法参数上使用注释，将其定义为操作的参数，和/或定义参数的附加属性。这一般用在我们需要按id找东西的时候。</p><p id="bd8c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看看下面的示例代码和输出。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP GET all请求和HTTP GET by id请求的示例控制器端点</figcaption></figure><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/8e3c54c5adb8ad31e43d5752e632d265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z3knwDEcz9mrhFuG7Xo_Xg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP GET all请求的Swagger</figcaption></figure><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/f50022d762b1b98456ab24d353e4c4e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WX3Zlkyk4aqm7nXDAe9Rbw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP GET by id请求的Swagger</figcaption></figure><blockquote class="le lf lg"><p id="dd6a" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">第5步:让我们为PUT请求添加端点</em> </strong></p></blockquote><p id="132a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于上面的HTTP POST，GET中已经包含了一些注释，所以我们将讨论HTTP PUT请求中的新注释。我在这里做了一个小小的改动，如果员工不存在，那么创建一个新员工。因此，对于更新，响应可以是200，对于添加新员工，响应可以是201。</p><p id="9bb4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">弹簧注释</strong></p><p id="6d4c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/PutMapping.html" rel="noopener ugc nofollow" target="_blank">PutMapping</a> </code>将HTTP <code class="du ls lt lu lv b">PUT</code>请求映射到特定处理程序方法的注释。这是一个合成的注释，作为<code class="du ls lt lu lv b">RequestMapping(method = RequestMethod.PUT)</code>的快捷方式。</p><p id="d3c1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看看下面的示例代码和输出。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP PUT请求的示例控制器端点</figcaption></figure><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/f42e4daaf30d2dd0a5034ee941938d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRuaZGSDyfWiLf8njfFunQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">为HTTP PUT请求招摇过市</figcaption></figure><blockquote class="le lf lg"><p id="ac08" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">步骤6:让我们为删除请求添加端点</em> </strong></p></blockquote><p id="2b70" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于上面的HTTP POST、GET、PUT中已经包含了一些注释，我们将讨论HTTP DELETE请求中的新注释。我在这里做了一个小小的改动，如果员工不存在，那么返回400 Bad Request，否则返回被删除的员工。通常，您不会用已删除的实体进行响应，状态代码为204 No Content，表示删除成功。</p><p id="a1dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">弹簧注解</strong></p><p id="5a8a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ls lt lu lv b"><a class="ae iu" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/DeleteMapping.html" rel="noopener ugc nofollow" target="_blank">DeleteMapping</a> </code>用于将HTTP <code class="du ls lt lu lv b">DELETE</code>请求映射到特定处理程序方法的注释。它是一个组合的注释，作为<code class="du ls lt lu lv b">RequestMapping(method = RequestMethod.DELETE)</code>的快捷方式。</p><p id="098f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看看下面的示例代码和输出。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP删除请求的示例控制器端点</figcaption></figure><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/f08aa98336e8e9824e58776e7621bfaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oFR7HddzxqMz9NireOz-QA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">HTTP删除请求的Swagger</figcaption></figure><blockquote class="le lf lg"><p id="9497" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">第七步:瞧。我们完了！！让我们测试一下</em> </strong></p></blockquote><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/a2fc72d0af367dd89b29c48ac25cceb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:282/format:webp/1*Lq6QAeU2iRMpPz5-GmZ1jQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">大摇大摆“试试看”</figcaption></figure><p id="ac03" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您已经在本地机器上下载了<a class="ae iu" href="https://github.com/sourabhparsekar/open-api-spec" rel="noopener ugc nofollow" target="_blank">示例代码</a>，编译并运行它，那么您已经在您最喜欢的浏览器中加载了Swagger UI。</p><p id="c622" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要运行swagger，在运行SpringBoot应用程序后，您可以点击URL:</p><p id="955c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="http://localhost:10001/open-api-demo/swagger-ui/" rel="noopener ugc nofollow" target="_blank">http://localhost:10001/open-API-demo/swagger-ui</a>。超文本标记语言</p><blockquote class="le lf lg"><p id="112b" class="iv iw jt ix b iy iz ja jb jc jd je jf lh jh ji jj li jl jm jn lj jp jq jr js hb bi translated">作为下载和/或编译和/或运行代码的指南，请参考示例代码根目录中的<a class="ae iu" href="https://github.com/sourabhparsekar/open-api-spec/blob/main/README.md" rel="noopener ugc nofollow" target="_blank"> README.md </a>文件。如果你仍然不能让它工作，给我留言或笔记。我们可以一起努力让它成功。毕竟，把手弄脏会让你更容易理解。</p></blockquote><p id="488e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设您已经完成了示例代码的所有工作，那么在我们尝试这个API之前，就没有其他配置了。Swagger针对每个API都有一个内置的“试用”按钮，它能够运行请求，以便消费者可以验证输出。它还显示了与标头和其他参数一起发送的请求。</p><p id="eb8a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，当您尝试执行请求时，Swagger将读取请求的定义，并期望使用者提供测试数据(如果适用的话)，比如路径参数或请求体。输入数据后，消费者可以点击<code class="du ls lt lu lv b">Execute</code>来运行请求，并显示其响应。</p><p id="32e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然我们讨论了所有这些，但是由于Swagger有限的验证功能，用它运行测试还是有缺点的。由用户来验证这是否是预期的响应。此外，由于缺少内置的自动化功能，必须一次运行一个请求。</p><p id="0dc3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看“添加新员工”成功请求的运行情况，同时您可以在您的系统上尝试其他请求。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/6fb47b2820f84bb17729c826d100fdca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hfverpvctYARgtxIKP7FGA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">尝试HTTP POST请求</figcaption></figure><p id="cb48" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在已经成功地添加了Swagger并测试了我们的API。说到这里，我们结束了对API文档的探索。在我们的旅程中，我们已经看到了<strong class="ix hj"> <em class="jt">如何使用OpenAPI规范和Swagger 3为API文档添加Swagger UI。</em> </strong></p><p id="e57e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">总结我们的旅程，我们用Rest Controller创建了一个SpringBoot应用程序。我们添加了Swagger依赖和必要的OpenAPI规范配置。此外，为了配置Swagger来显示有意义的API文档，除了Spring注释之外，我们还使用了Swagger注释。然而，我们还没有看到关于Swagger的所有内容，是时候探索其他功能了。然而，我将会有另一篇关于如何使用JWT令牌保护API的博客。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="7a24" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">参考资料:</h1><div class="me mf ez fb mg mh"><a href="https://swagger.io/specification/" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">OpenAPI规范</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">3.0.3版关键词“必须”、“不得”、“要求”、“应当”、“不得”、“应当”、“不应当”…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">swagger.io</p></div></div></div></a></div><div class="me mf ez fb mg mh"><a rel="noopener follow" target="_blank" href="/@TebbaVonMathenstien/what-is-an-api-and-why-should-i-use-one-863c3365726b"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">什么是API，我为什么要使用它？</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">有没有人问过你，“你就不能用一个API来做这个吗？”心想“API到底是什么？”</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv io mh"/></div></div></a></div><div class="me mf ez fb mg mh"><a href="https://spring.io/guides/tutorials/rest/" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">用Spring构建REST服务</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">REST已经迅速成为在web上构建web服务的事实上的标准，因为它们易于构建并且…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">spring.io</p></div></div></div></a></div><div class="me mf ez fb mg mh"><a href="https://restfulapi.net/resource-naming/" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">REST资源命名指南</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">在REST中，主要的数据表示称为资源。拥有强大且一致的REST资源命名策略…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">restfulapi.net</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv io mh"/></div></div></a></div></div></div>    
</body>
</html>