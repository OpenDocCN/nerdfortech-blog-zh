<html>
<head>
<title>Parsing XML via Golang with DTO Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用DTO模式通过Golang解析XML</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/parsing-xml-via-golang-with-dto-pattern-c1b21ce661b5?source=collection_archive---------7-----------------------#2021-04-18">https://medium.com/nerd-for-tech/parsing-xml-via-golang-with-dto-pattern-c1b21ce661b5?source=collection_archive---------7-----------------------#2021-04-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="72bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好，在本教程中，我将向大家展示如何用DTO通过Golang解析XML文件。</p><p id="fcf8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">项目结构</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e38214a8bda4ae1712f93587830f0f07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2f-6dJANShu65OaCqWSEGQ.png"/></div></div></figure><p id="4015" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Books.xml </strong></p><p id="9e95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">XML文件包含每本书的作者、书名和价格等数据。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="c74b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们不需要额外的库来用Go解析xml或json。Go附带了很多有用的包。</p><p id="ed5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始编码吧。</p><p id="0816" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们用<strong class="ih hj"> os </strong>包中的<strong class="ih hj"> Open </strong>函数打开文件。我们使用<strong class="ih hj"> Defer </strong>方法在完成后关闭文件。注意，用defer声明的方法将在main函数结束之前执行。</p><p id="af7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文件，错误:=操作系统。打开(“。/books.xml") <br/> defer文件。关闭()</p><p id="1709" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我们可以使用ioutil将这些文件转换成一个字节数组。<strong class="ih hj"> ioutil </strong>是一个实现输入输出效用函数的包。</p><p id="9c8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据，_ := ioutil。全部读取(文件)</p><p id="be7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">数据传输对象</strong></p><p id="eb14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的数据传输对象有两种结构类型。第一个叫做目录。它可以包含所有的书。另一本叫做那本书。它已经存储了每本书数据。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="82c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解组</strong></p><p id="c2aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“Unmarshal解析XML编码的数据，并将结果存储在v指向的值中，该值必须是任意的结构、片或字符串。不适合v的格式良好的数据将被丢弃。</p><pre class="je jf jg jh fd jr js jt ju aw jv bi"><span id="e9bf" class="jw jx hi js b fi jy jz l ka kb">var catalog dto.Catalog<br/>xml.Unmarshal(data, &amp;catalog)</span></pre><p id="c929" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">检索值</strong></p><pre class="je jf jg jh fd jr js jt ju aw jv bi"><span id="dad3" class="jw jx hi js b fi jy jz l ka kb">for i:=0; i &lt; len(catalog.Books); i++{<br/>   book := catalog.Books[i]<br/>   fmt.Println(book.GetTitle())<br/>}</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kc"><img src="../Images/9f97a531d2a21c7d5b47be7f58d7163f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FeU_p2qTxNTCaTyuskqXTQ.png"/></div></div></figure><p id="9d02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想检查代码，可以从<a class="ae kd" href="https://github.com/bariseser/golang_xml" rel="noopener ugc nofollow" target="_blank">这里的</a>库。</p><p id="d50e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢了。</p></div></div>    
</body>
</html>