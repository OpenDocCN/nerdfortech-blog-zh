<html>
<head>
<title>Protocol Buffers in Two Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">两分钟后协议缓冲</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/protocol-buffers-in-two-minutes-6b8f908efe5?source=collection_archive---------1-----------------------#2022-07-14">https://medium.com/nerd-for-tech/protocol-buffers-in-two-minutes-6b8f908efe5?source=collection_archive---------1-----------------------#2022-07-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="843e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章将在两分钟内教会你开始使用协议缓冲区所需要知道的一切。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f4ef9b8753c1e21a9cde1fd0de868944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CY9Rxk2JyicZuQr3.png"/></div></div></figure><h2 id="35e6" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">什么是协议缓冲区？</h2><p id="1008" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">Protocol Buffers(简称 ProtoBuf)是一种序列化数据(将其转换为二进制)以便能够传输数据的方法。多亏了 ProtoBuf，我们可以通过运行命令这样简单的事情将数据翻译成不同的语言。因此，对于微服务来说非常方便。</p><p id="3a94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而 Json 数据不是结构化的，不需要 ProtoBuf 所需要的模式。这意味着您不需要使用 Json 为对象的每个属性定义数据类型并坚持使用它，但是您可以使用 ProtoBuf。</p><h2 id="46b2" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">入门指南</h2><p id="294e" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">要开始使用 ProtoBuf，您必须首先用<strong class="ih hj">创建一个文件。proto </strong>扩展。那么，该文件中的第一行应该是:</p><blockquote class="kp kq kr"><p id="6efc" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">语法= " proto3//你可以写你在这里使用的任何原型版本。</p></blockquote><p id="4cb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个对象都是一条带有 ProtoBuf 的消息，我们必须在。原型文件。对于消息中的每个属性，我们还必须分配一个 id，以便 ProtoBuf 可以对其进行解码和编码。因此，如果我们创建一个学生对象，它应该是:</p><blockquote class="kp kq kr"><p id="e580" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">消息学生{</p><p id="42f5" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">int 32 id = 1；</p><p id="fb56" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">字符串名称= 2；</p><p id="8f1c" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">浮点 GPA = 3；}</p></blockquote><p id="d4f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们正在创建一个学生类对象的数组，它应该是:</p><blockquote class="kp kq kr"><p id="6707" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">消息学生{</p><p id="a0c1" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">复读生学生= 1；}</p></blockquote><p id="1c41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还必须为应用程序中的每个控制器创建一个服务，对于控制器中的每个函数，我们必须在服务中放置一个 rpc，如下所示:</p><blockquote class="kp kq kr"><p id="b012" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">服务控制器名称{</p><p id="2617" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">RPC function name(whatModelItTakes)retuns(whatModelitReturns)；}</p></blockquote><p id="6912" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了能够将它转换成我们喜欢的任何语言，我们需要首先获得协议 Proto Buffer 编译器。你可以在<a class="ae kw" href="https://github.com/protocolbuffers/protobuf/releases" rel="noopener ugc nofollow" target="_blank">这个链接</a>上安装它。只需选择一个适合你的操作系统，不要担心语言的问题。将它移动到 C:/下并解压缩，然后打开终端，导航到项目文件夹并运行命令:</p><blockquote class="kp kq kr"><p id="f15c" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">c:\ protocol-21.2-win 64 \ bin \ protocol-js _ out = import _ style = common js，binary:。原文件名.原</p></blockquote><p id="94cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>你可以把 commonjs 部分改成你喜欢的任何语言，但是那个是用来翻译成 JavaScript 的。</p><p id="622f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的命令将创建一个<strong class="ih hj">proto filename _ Pb . language extension</strong>(即。protoFileName.js)文件。现在，我们可以开始在我们为之创建 protobuf 的任何语言中实际使用这些类了。但是首先，确保将 google-protobuf 库安装到你的项目所使用的任何语言中。然后在将要使用它的每个文件上导入 protoFileName_pb 文件。</p><p id="3ef7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以简单地从该模式中初始化和创建对象。对于从 protobuf 创建的任何对象，现在都有预定义的方法将其翻译成任何语言，例如:</p><blockquote class="kp kq kr"><p id="e5e9" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">学生. serialize binary()；//将其翻译成二进制</p><p id="2427" class="if ig ks ih b ii ij ik il im in io ip kt ir is it ku iv iw ix kv iz ja jb jc hb bi translated">students . deserialize binary()；//将其转换回原始形式</p></blockquote></div></div>    
</body>
</html>