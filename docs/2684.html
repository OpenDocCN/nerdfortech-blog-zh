<html>
<head>
<title>Meet Strings in Swift as iOS Developer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为 iOS 开发者在 Swift 中遇到字符串</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/meet-strings-in-swift-as-ios-developer-48bc9272937d?source=collection_archive---------11-----------------------#2021-05-16">https://medium.com/nerd-for-tech/meet-strings-in-swift-as-ios-developer-48bc9272937d?source=collection_archive---------11-----------------------#2021-05-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/7c506864a4b25fcfd23255c3c1571ce6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YYZYqgVUtsMLS0hN"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx translated">米卡·鲍梅斯特在<a class="ae jc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="9e55" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">swift 中的字符串是 iOS 开发者非常常用的。我们用弦乐的力量解决了发展中的各种问题。但是我们通常忽略了字符串中的一些重要函数。在这篇文章中，我试图收集这样的函数，并尽可能添加一些扩展。</p><h1 id="da67" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">从字符串中分离子字符串</h1><p id="7002" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">在开发中，我们会遇到读取 csv 文件和分隔用户输入的标签。在这些场景中，我们需要从由分隔符分隔的字符串创建一个字符串数组。这里可以使用 swift 中的组件功能。</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="fc33" class="lj kc hi lf b fi lk ll l lm ln">let res = str.components(separatedBy: ",")</span></pre><p id="8f68" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">输出是由原始字符串中的'，'分隔的字符串数组。</p><h1 id="7816" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">基于索引的用例</h1><p id="4678" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">字符串中的字符可以通过字符串的索引来访问。与其他编程语言不同，我们不会在 swift 中使用基于整数的访问。</p><p id="576f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">一个突出的原因是 swift 中字符的长度不一致。组成字符的 unicode 点的组合各不相同。所以每次索引都是相对于字符串计算的。</p><h2 id="ea99" class="lj kc hi bd kd lo lp lq kh lr ls lt kl jo lu lv kp js lw lx kt jw ly lz kx ma bi translated">索引…之后</h2><p id="aa7e" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">有时，我们需要获取字符串的某个部分/索引之后的字符的索引，即从第二个字符开始的“elephant”中“e”的索引(“lephant”)。下面是可以帮到你的扩展。</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="8b7c" class="lj kc hi lf b fi lk ll l lm ln"><strong class="lf hj">extension</strong> Array <strong class="lf hj">where</strong> Element == Character {</span><span id="b6ec" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">  func</strong> index(of character: Character, after index: Int) -&gt; Int? {</span><span id="6124" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">    for</strong> i <strong class="lf hj">in</strong> index..&lt;<strong class="lf hj">self</strong>.count <strong class="lf hj">where</strong> <strong class="lf hj">self</strong>[i] == character {</span><span id="abde" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">       return</strong> i</span><span id="d9ce" class="lj kc hi lf b fi mb ll l lm ln">    }</span><span id="bde1" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">    return</strong> <strong class="lf hj">nil</strong></span><span id="802e" class="lj kc hi lf b fi mb ll l lm ln">  }</span><span id="897f" class="lj kc hi lf b fi mb ll l lm ln">}</span></pre><h1 id="b068" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">部分替换</h1><p id="a17a" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">假设您正在制作一个 IDE 或一些编辑器，在那里用户可以用另一部分替换字符串的一部分。我们可以使用下面的方法。</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="93a6" class="lj kc hi lf b fi lk ll l lm ln">str.replacingOccurrences(of: "xcode", with: "Xcode")</span></pre><p id="001f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">同样，如果我们想替换两个给定字符或子字符串之间的字符串，我们可以使用下面的。</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="443b" class="lj kc hi lf b fi lk ll l lm ln">guard let startIndex = str.firstIndex(of: "a") else { return false}<br/>guard let endIndex = str.firstIndex(of: "o") else { return false}</span><span id="06de" class="lj kc hi lf b fi mb ll l lm ln">str.replaceSubrange(startIndex...endIndex, with: "oil")</span></pre><h1 id="9c5c" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">边界测试</h1><p id="cf36" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">测试子字符串是否存在于字符串的开始或结尾。</p><h2 id="be7f" class="lj kc hi bd kd lo lp lq kh lr ls lt kl jo lu lv kp js lw lx kt jw ly lz kx ma bi translated">从开始</h2><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="9bfd" class="lj kc hi lf b fi lk ll l lm ln">str.hasPrefix("i")</span><span id="92fc" class="lj kc hi lf b fi mb ll l lm ln">// testing that a string is lexicographically greater than other</span><span id="a4a0" class="lj kc hi lf b fi mb ll l lm ln">str.lexicographicallyPrecedes("zzz")</span></pre><h2 id="201a" class="lj kc hi bd kd lo lp lq kh lr ls lt kl jo lu lv kp js lw lx kt jw ly lz kx ma bi translated">从结束</h2><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="08c2" class="lj kc hi lf b fi lk ll l lm ln">str.hasSuffix("i")</span></pre><h1 id="32d5" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">两根弦的区别</h1><p id="f9c6" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">作为开发人员，我们可能会遇到这样一个问题:str1 要变成 str2 需要做多少修改(插入和删除)。</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="723f" class="lj kc hi lf b fi lk ll l lm ln">str = "oil"</span><span id="2bab" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">let</strong> dif = str.difference(from: "oii")</span><span id="2517" class="lj kc hi lf b fi mb ll l lm ln">print(dif) </span><span id="5263" class="lj kc hi lf b fi mb ll l lm ln">/* <strong class="lf hj">CollectionDifference&lt;Character&gt;(insertions: [Swift.CollectionDifference&lt;Swift.Character&gt;.Change.insert(offset: 2, element: "l", associatedWith: nil)], removals: [Swift.CollectionDifference&lt;Swift.Character&gt;.Change.remove(offset: 2, element: "i", associatedWith: nil)]) */</strong></span><span id="90b9" class="lj kc hi lf b fi mb ll l lm ln">print(dif.insertions.count+dif.removals.count) // 2</span></pre><h1 id="8f35" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">最高的</h1><p id="aa44" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">在一个字符串中寻找最高的字符并不复杂。但是字符串中的 max()有些模糊。以下有助于澄清这一点</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="329c" class="lj kc hi lf b fi lk ll l lm ln">str = "aAB"</span><span id="b00f" class="lj kc hi lf b fi mb ll l lm ln">str.max() // a</span></pre><p id="aa51" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">请注意，小写字母被视为最大值。</p><h1 id="60f0" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">小数计数/小写字母/大写字母/…(字符集)</h1><p id="34d2" class="pw-post-body-paragraph jd je hi jf b jg kz ji jj jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka hb bi translated">正如标题所说，从字母数字串中只计算字母、小数、小写字母甚至更多数字会很有帮助。下面是这样做的小扩展。</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="4944" class="lj kc hi lf b fi lk ll l lm ln"><strong class="lf hj">extension</strong> String {</span><span id="a9ec" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">  func</strong> count(of characterSet: CharacterSet) -&gt; Int {</span><span id="e72a" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">    var</strong> count = 0</span><span id="c353" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">    var</strong> range = <strong class="lf hj">self</strong>.rangeOfCharacter(from: characterSet)</span><span id="e4f9" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">    while</strong> range != <strong class="lf hj">nil</strong> {</span><span id="5444" class="lj kc hi lf b fi mb ll l lm ln">      count = count + 1</span><span id="5e7f" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">      guard</strong> <strong class="lf hj">let</strong> ub = range?.upperBound <strong class="lf hj">else</strong> {</span><span id="3fce" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">         break</strong></span><span id="5d42" class="lj kc hi lf b fi mb ll l lm ln">      }</span><span id="433d" class="lj kc hi lf b fi mb ll l lm ln">      range = <strong class="lf hj">self</strong>[ub...].rangeOfCharacter(from: characterSet)</span><span id="f479" class="lj kc hi lf b fi mb ll l lm ln">    }</span><span id="3c18" class="lj kc hi lf b fi mb ll l lm ln"><strong class="lf hj">    return</strong> count </span><span id="b786" class="lj kc hi lf b fi mb ll l lm ln">  }</span><span id="36df" class="lj kc hi lf b fi mb ll l lm ln">} </span></pre><p id="6da4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">就是这样…</p><p id="b061" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">感谢阅读…</p></div></div>    
</body>
</html>