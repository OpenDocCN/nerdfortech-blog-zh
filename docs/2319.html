<html>
<head>
<title>Empty Data State In RecyclerView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RecyclerView 中的空数据状态</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/empty-dataset-in-recyclerview-ad86833dd5c6?source=collection_archive---------2-----------------------#2021-05-01">https://medium.com/nerd-for-tech/empty-dataset-in-recyclerview-ad86833dd5c6?source=collection_archive---------2-----------------------#2021-05-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="dd55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单的方法添加一个空的“哦哇！”在回收器视图中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/aab5857e0f38d0d72323da27104dfe0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*INeRy3XEPr7fsmNEyAvcuA.jpeg"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jp"><img src="../Images/b407e91841a56191af68e5ba236ee149.png" data-original-src="https://miro.medium.com/v2/resize:fit:32/0*xjuGhQFt6AST7P_Q.gif"/></div></figure><p id="248c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">简介</strong></p><p id="7373" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">RecyclerView 可以轻松高效地显示大量数据。您提供数据并定义每个项目的外观，RecyclerView 库在需要时动态创建元素。</p><p id="4a53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始吧，本教程是基于 MVVM &amp; 100%科特林与刀柄依赖注入。这里，我们从服务器请求一个数据列表，并将其填充到 recycler 视图中，然后我们将实现 recycler 视图的不同情况。</p><p id="962e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了我们的<strong class="ih hj">回收审查</strong>的组件，以及它们如何用于不同的部分。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/e187718df53fb617355aba042a545f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i76iXSbYOyb2VwTIRczqgA.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">来源。开放式教室</figcaption></figure><blockquote class="jv jw jx"><p id="e8d5" class="if ig jy ih b ii ij ik il im in io ip jz ir is it ka iv iw ix kb iz ja jb jc hb bi translated">项目结构</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kc"><img src="../Images/d37657aad35e4d00d4f0cd44700992b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*N5w0rhJDB0WgUiTm85tctw.png"/></div><figcaption class="jr js et er es jt ju bd b be z dx translated">项目结构</figcaption></figure><blockquote class="jv jw jx"><p id="26ca" class="if ig jy ih b ii ij ik il im in io ip jz ir is it ka iv iw ix kb iz ja jb jc hb bi translated">赞美诗不知道的话去看看<a class="ae kd" href="https://developer.android.com/training/dependency-injection/hilt-android" rel="noopener ugc nofollow" target="_blank">匕首柄和 id </a>。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/1dbe2e0def30317d208e964bacb5108d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*VGrlqylk2LICXNA3.jpg"/></div></figure><p id="2666" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">把密码给我？请点击下面的链接。</p><div class="kf kg ez fb kh ki"><a href="https://github.com/iamnaran/search-recycler-view" rel="noopener  ugc nofollow" target="_blank"><div class="kj ab dw"><div class="kk ab kl cl cj km"><h2 class="bd hj fi z dy kn ea eb ko ed ef hh bi translated">iam naran/搜索-回收器-查看</h2><div class="kp l"><h3 class="bd b fi z dy kn ea eb ko ed ef dx translated">这个项目帮助你理解 Android (Kotlin)中的手柄集成，它包括改进的协程架构…</h3></div><div class="kq l"><p class="bd b fp z dy kn ea eb ko ed ef dx translated">github.com</p></div></div><div class="kr l"><div class="ks l kt ku kv kr kw jn ki"/></div></div></a></div><p id="7589" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">抬头！使用 recyclerview &amp; searchview 查看初始项目设置。</p><div class="kf kg ez fb kh ki"><a href="https://iamnaran.medium.com/implem-search-in-recyclerview-5bc18b547f4f" rel="noopener follow" target="_blank"><div class="kj ab dw"><div class="kk ab kl cl cj km"><h2 class="bd hj fi z dy kn ea eb ko ed ef hh bi translated">RecyclerView 中的简单搜索</h2><div class="kp l"><h3 class="bd b fi z dy kn ea eb ko ed ef dx translated">用 kotlin 中的搜索视图过滤回收器视图。</h3></div><div class="kq l"><p class="bd b fp z dy kn ea eb ko ed ef dx translated">iamnaran.medium.com</p></div></div><div class="kr l"><div class="kx l kt ku kv kr kw jn ki"/></div></div></a></div><p id="4602" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们为<strong class="ih hj"> recyclerview </strong>集成空数据集。为了在<strong class="ih hj"> recyclerview </strong>中实现空数据集，我们有多种方法可以实现这个特性。让我们用最简单的形式。</p><p id="4669" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要一个空数据集的布局，它将显示为空视图。在此之前，获取一个图像显示在我们的空数据集视图中。我们只需要一个图标，标题和副标题将从<strong class="ih hj">字符串. xml. </strong>给出</p><p id="2e91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看起来像这样。</p><div class="je jf jg jh fd ab cb"><figure class="ky ji kz la lb lc ld paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/e3ec9e49d61c4c5f9008f778e1e2e3db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*hJsYhgAqpDDcVmAZz7mAhA.png"/></div></figure><figure class="ky ji kz la lb lc ld paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/d3e7f6634d2ad79c7bc95a42f3e1bf3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*kVXuYcESZAPMwRa05XvvQA.png"/></div></figure></div><p id="8d17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们为上面的设计创建一个布局。</p><blockquote class="jv jw jx"><p id="a12e" class="if ig jy ih b ii ij ik il im in io ip jz ir is it ka iv iw ix kb iz ja jb jc hb bi translated">item_empty_dataset.xml</p></blockquote><pre class="je jf jg jh fd le lf lg lh aw li bi"><span id="7038" class="lj lk hi lf b fi ll lm l ln lo">&lt;?<em class="jy">xml version</em>="1.0" <em class="jy">encoding</em>="utf-8"?&gt;<br/>&lt;androidx.constraintlayout.widget.ConstraintLayout <em class="jy">xmlns:android</em>="http://schemas.android.com/apk/res/android"<br/>    <em class="jy">xmlns:app</em>="http://schemas.android.com/apk/res-auto"<br/>    <em class="jy">xmlns:tools</em>="http://schemas.android.com/tools"<br/>    <em class="jy">android:layout_width</em>="match_parent"<br/>    <em class="jy">android:layout_height</em>="match_parent"<br/>    <em class="jy">android:orientation</em>="vertical"<br/>    <em class="jy">android:layout_gravity</em>="center"<br/>    <em class="jy">android:gravity</em>="center"<br/>    <em class="jy">android:paddingTop</em>="10dp"<br/>    <em class="jy">android:paddingBottom</em>="10dp"<br/>    <em class="jy">tools:ignore</em>="RtlHardcoded"&gt;<br/><br/>    &lt;ImageView<br/>        <em class="jy">android:id</em>="@+id/imageView2"<br/>        <em class="jy">android:layout_width</em>="wrap_content"<br/>        <em class="jy">android:layout_height</em>="wrap_content"<br/>        <em class="jy">app:layout_constraintBottom_toBottomOf</em>="parent"<br/>        <em class="jy">app:layout_constraintEnd_toEndOf</em>="parent"<br/>        <em class="jy">app:layout_constraintHorizontal_bias</em>="0.498"<br/>        <em class="jy">app:layout_constraintStart_toStartOf</em>="parent"<br/>        <em class="jy">app:layout_constraintTop_toTopOf</em>="parent"<br/>        <em class="jy">app:layout_constraintVertical_bias</em>="0.422"<br/>        <em class="jy">android:src</em>="@drawable/ic_empty_dataset_1" /&gt;<br/><br/>    &lt;TextView<br/>        <em class="jy">android:id</em>="@+id/title"<br/>        <em class="jy">android:layout_width</em>="0dp"<br/>        <em class="jy">android:layout_height</em>="wrap_content"<br/>        <em class="jy">android:text</em>="Title is called when title is placed"<br/>        <em class="jy">android:padding</em>="10dp"<br/>        <em class="jy">android:fontFamily</em>="@font/normal"<br/>        <em class="jy">android:textStyle</em>="bold"<br/>        <em class="jy">android:gravity</em>="center"<br/>        <em class="jy">app:layout_constraintEnd_toEndOf</em>="parent"<br/>        <em class="jy">app:layout_constraintStart_toStartOf</em>="parent"<br/>        <em class="jy">app:layout_constraintTop_toBottomOf</em>="@+id/imageView2" /&gt;<br/><br/>    &lt;TextView<br/>        <em class="jy">android:id</em>="@+id/sub_title"<br/>        <em class="jy">android:layout_width</em>="0dp"<br/>        <em class="jy">android:layout_height</em>="wrap_content"<br/>        <em class="jy">android:text</em>=" Subtitle is called when title is placed. Subtitle is called when title is placed"<br/>        <em class="jy">android:padding</em>="5dp"<br/>        <em class="jy">android:fontFamily</em>="@font/normal"<br/>        <em class="jy">android:gravity</em>="center"<br/>        <em class="jy">android:layout_marginStart</em>="10dp"<br/>        <em class="jy">android:layout_marginEnd</em>="10dp"<br/>        <em class="jy">app:layout_constraintEnd_toEndOf</em>="parent"<br/>        <em class="jy">app:layout_constraintStart_toStartOf</em>="parent"<br/>        <em class="jy">app:layout_constraintTop_toBottomOf</em>="@+id/title" /&gt;<br/>&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span></pre><p id="d4d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，下一步是实施<strong class="ih hj"> RecyclerView。<strong class="ih hj"> EmptyDataObserver.kt </strong>中的 AdapterDataObserver() </strong>类</p><p id="5702" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个类是做什么的？</p><p id="86cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它观察 recycle view 项目计数，并在我们的活动中为<strong class="ih hj">recycle view&amp;空数据集布局切换显示/隐藏功能。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lp"><img src="../Images/97d4451dd6cf534ec2148ff0ed75c438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*XvkiV7UcAR_t7JyC6dzJHg@2x.jpeg"/></div></figure><p id="f003" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们马上就会看到实现是多么容易。首先让我们创建新的 EmptyDataObserver 类。</p><blockquote class="jv jw jx"><p id="3aca" class="if ig jy ih b ii ij ik il im in io ip jz ir is it ka iv iw ix kb iz ja jb jc hb bi translated"><strong class="ih hj"> EmptyDataObserver.kt </strong></p></blockquote><pre class="je jf jg jh fd le lf lg lh aw li bi"><span id="0b15" class="lj lk hi lf b fi ll lm l ln lo"><em class="jy">/*<br/> * Copyright (c) 2021.<br/> * Created by NaRan<br/> *<br/> */<br/><br/>package </em>com.template.androidtemplate.utils<br/><br/><em class="jy">import </em>android.view.View<br/><em class="jy">import </em>androidx.recyclerview.widget.RecyclerView<br/><br/><br/><em class="jy">class </em>EmptyDataObserver <em class="jy">constructor</em>(rv: RecyclerView?, ev: View?): RecyclerView.AdapterDataObserver() {<br/><br/>    <em class="jy">private var </em>emptyView: View? = <em class="jy">null<br/>    private var </em>recyclerView: RecyclerView? = <em class="jy">null<br/><br/>    init </em>{<br/>        recyclerView = rv<br/>        emptyView = ev<br/>        checkIfEmpty()<br/>    }<br/><br/><br/>    <em class="jy">private fun </em>checkIfEmpty() {<br/>        <em class="jy">if </em>(emptyView != <em class="jy">null </em>&amp;&amp; recyclerView!!.<em class="jy">adapter </em>!= <em class="jy">null</em>) {<br/>            <em class="jy">val </em>emptyViewVisible = recyclerView!!.<em class="jy">adapter</em>!!.<em class="jy">itemCount </em>== 0<br/>            emptyView!!.<em class="jy">visibility </em>= <em class="jy">if </em>(emptyViewVisible) View.<em class="jy">VISIBLE else </em>View.<em class="jy">GONE<br/>            </em>recyclerView!!.<em class="jy">visibility </em>= <em class="jy">if </em>(emptyViewVisible) View.<em class="jy">GONE else </em>View.<em class="jy">VISIBLE<br/>        </em>}<br/>    }<br/><br/>    <em class="jy">override fun </em>onChanged() {<br/>        <em class="jy">super</em>.onChanged()<br/>        checkIfEmpty()<br/>    }<br/><br/>    override <em class="jy">fun </em>onItemRangeChanged(positionStart: Int, itemCount: Int) {<br/>        <em class="jy">super</em>.onItemRangeChanged(positionStart, itemCount)<br/>    }<br/><br/>}</span></pre><p id="1188" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们在我们的活动中包括(我们刚刚在上面制作的视图)。确保包括给出符合<strong class="ih hj"> recyclerview </strong>的正确属性，并使其可见性消失。</p><blockquote class="jv jw jx"><p id="63c4" class="if ig jy ih b ii ij ik il im in io ip jz ir is it ka iv iw ix kb iz ja jb jc hb bi translated"><strong class="ih hj"> activity_name.xml </strong></p></blockquote><p id="96f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记住，要设置可见性<strong class="ih hj">消失</strong>。</p><pre class="je jf jg jh fd le lf lg lh aw li bi"><span id="ee16" class="lj lk hi lf b fi ll lm l ln lo">&lt;include<br/>    <em class="jy">android:id</em>="@+id/empty_data_parent"<br/>    <em class="jy">layout</em>="@layout/item_empty_dataset"<br/>    <em class="jy">android:layout_width</em>="match_parent"<br/>    <em class="jy">android:visibility</em>="gone"<br/>    <em class="jy">app:layout_constraintBottom_toBottomOf</em>="parent"<br/>    <em class="jy">app:layout_constraintTop_toBottomOf</em>="@+id/search_layout"<br/>    <em class="jy">android:layout_height</em>="match_parent"<br/>    <em class="jy">android:layout_gravity</em>="center" /&gt;</span></pre><p id="8f63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将我们的<strong class="ih hj"> EmptyDataObserver </strong>注册到<strong class="ih hj"> recyclerview </strong>，请在您的<strong class="ih hj">适配器</strong>初始化后添加这些行，</p><pre class="je jf jg jh fd le lf lg lh aw li bi"><span id="8b63" class="lj lk hi lf b fi ll lm l ln lo"><em class="jy">private fun </em>setUpViews() {</span><span id="18ad" class="lj lk hi lf b fi lq lm l ln lo">    search_layout.findViewById&lt;SearchView&gt;(R.id.<em class="jy">search_view</em>)<br/>        .setOnQueryTextListener(<em class="jy">this</em>)<br/>    recycler_view.<em class="jy">layoutManager </em>= LinearLayoutManager(<em class="jy">this</em>,<br/>        LinearLayoutManager.<em class="jy">VERTICAL</em>,<em class="jy">false</em>)<br/>    photosAdapter = PhotosAdapter()<br/>    recycler_view.<em class="jy">adapter </em>= photosAdapter<br/>    <br/>    // Here</span><span id="6c29" class="lj lk hi lf b fi lq lm l ln lo">    <em class="jy">val </em>emptyDataObserver = EmptyDataObserver(recycler_view, empty_data_parent)<br/>    photosAdapter.registerAdapterDataObserver(emptyDataObserver)</span><span id="3269" class="lj lk hi lf b fi lq lm l ln lo">}</span></pre><p id="b242" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这应该行得通…</p><p id="ed3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请尝试并执行它。更多的想法和教程源代码支持我。</p><p id="c532" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再见，保重。#安全停留</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lr"><img src="../Images/27536afb8e2ee20299b618580b21994f.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/1*wanejluO4-LggWajM77TDA.gif"/></div></figure></div></div>    
</body>
</html>