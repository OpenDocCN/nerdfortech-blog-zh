<html>
<head>
<title>Breaking the Language Barrier using i18next in react!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 react 中使用 i18next 打破语言障碍！</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/breaking-the-language-barrier-using-i18next-in-react-56e0c2951e23?source=collection_archive---------16-----------------------#2021-05-10">https://medium.com/nerd-for-tech/breaking-the-language-barrier-using-i18next-in-react-56e0c2951e23?source=collection_archive---------16-----------------------#2021-05-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d401d675eafaf0b4d7a0ed3336a9c276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a5S7TJ4xRM3pABFI"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@etiennegirardet?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">艾蒂安·吉拉代</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="8493" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">生活在世界上最大的熔炉里，我习惯了每天听到和看到世界上的语言。虽然在纽约市大多数人说英语，但它并不是每个人的主要语言，而且很多人更喜欢他们的母语。作为开发者，我们倾向于忘记不是每个人都能说和读英语，那么我们该如何解决这个问题呢？，这是 i18next 的亮点，它让任何使用 react 框架的开发人员都很容易。</p><h1 id="76c0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">设置</h1><p id="ffae" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">如果你是使用 react 的新手，不要担心，这个快速指南将确保解释你需要知道的一切！对于初学者，我们需要创建我们的应用程序，我们可以通过进入我们的终端并键入<code class="du kw kx ky kz b">npx create-react-app my-app-name</code>来做到这一点。一旦完成创建，我们希望<code class="du kw kx ky kz b">cd my-app-name</code>并最终用我们的代码编辑器打开它，在我的情况下，我使用 VsCode，所以我会输入<code class="du kw kx ky kz b">code . my-app-name.</code>。</p><p id="74dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们在代码编辑器中，我们需要再次进入终端，粘贴每个代码。</p><blockquote class="la"><p id="a2cf" class="lb lc hi bd ld le lf lg lh li lj js dx translated">(先安装)npm 安装 react-i18 下一个 i18 下一个—保存</p><p id="895a" class="lb lc hi bd ld le lf lg lh li lj js dx translated">(安装第二个)npm 安装 i18 next-http-后端 i18 next-browser-language detector-保存</p></blockquote><h1 id="2509" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke lk kg kh ki ll kk kl km lm ko kp kq bi translated">i18n 文件</h1><p id="bd48" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">这应该安装了 i18next 在 react 应用程序中工作所需的所有必要文件。您还可以使用 i18next 的<a class="ae iu" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank">文档</a>来解决可能出现的任何问题！现在，我们需要在<code class="du kw kx ky kz b">src folder</code>下创建一个新文件，我们将把它命名为<code class="du kw kx ky kz b">i18n.js</code>，在这个文件中，我们将粘贴以下代码:</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/f06f92be2d957aa981c7a79045eef393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujrSZdC_Xn1JjSJvJ0XRDg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">这可以在逐步指南下的 i18 下一个<a class="ae iu" href="https://react.i18next.com/latest/using-with-hooks" rel="noopener ugc nofollow" target="_blank">文档</a>中找到</figcaption></figure><p id="e7f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们已经在<code class="du kw kx ky kz b">i18n.js</code>文件中有了这段代码，我们需要添加一些代码，让我们更容易处理。在第 9 行，我们创建了一个保存到变量中的数组:<code class="du kw kx ky kz b">const languages = ['en', 'spa' , 'ita']</code>这些是我们将要使用的语言的简单缩写(在我们的例子中，我们使用英语、西班牙语和意大利语)。现在，在第 24 行，我们简单地放入<code class="du kw kx ky kz b">whitelist: languages,</code>,这将确保只有我们变量中的语言会被加载，这就是这个文件，除非你想添加更多的语言，你应该设置好继续下一步。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/a7b4e824170f29246fc2cf65c6b88524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-Su9HhddssIg9KM_HXGKA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">完成的 i18n 文件</figcaption></figure><h1 id="8ca6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">索引. js</h1><p id="95ba" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我们现在需要进入我们的<code class="du kw kx ky kz b">index.js</code>文件，对 i18next 进行一些修改，以便在我们的应用程序中工作。首先，我们需要在第 6 行导入新创建的 i18n 文件。我们还修改了第 1 行和第 9-12 行，这是了解 React 悬念的一个很好的资源，可以在这里找到<a class="ae iu" href="https://www.netlify.com/blog/2018/10/18/react-suspense-with-netlify-functions/" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/15b5328ed4d24eceb2f8f3cdfcb499ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*75rps1PwI_CjJn1IzX52jw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">更多关于 React 悬念的信息可以在<a class="ae iu" href="https://reactjs.org/docs/concurrent-mode-suspense.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</figcaption></figure><h1 id="adef" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">App.js</h1><p id="c291" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我们已经解决了烦人的部分，所以现在我们可以进入最后一步了。我们需要首先进入我们的<code class="du kw kx ky kz b">app.js</code>文件，从 i18next <a class="ae iu" href="https://react.i18next.com/latest/usetranslation-hook" rel="noopener ugc nofollow" target="_blank">文档</a>中复制几个项目。我们需要做的第一件事是从 i18next 导入我们的翻译钩子，所以继续复制下面的文本到你的导入中。</p><blockquote class="la"><p id="3931" class="lb lc hi bd ld le lf lg lh li lj js dx translated">从“react-i18next”导入{ use translation }；</p></blockquote><figure class="lv lw lx ly lz ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/d5d737019a3e10eae91b2f4aea6a0e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r3zykZKWv97_jCAnj9eBCw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">App.js 文件</figcaption></figure><p id="3dda" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如你所看到的，在 work 旁边有几行我为 i18 添加的代码，但是不要担心，我们会仔细检查每一行。现在，我们需要做的就是确保在进入下一步之前正确导入第 2 行。下一步，我们需要进入代码编辑器中的<code class="du kw kx ky kz b">public</code>文件夹，并在其中创建一个名为<code class="du kw kx ky kz b">locales</code>的新文件夹。这就是命名的重要性，因为正如你所记得的，在我们的小教程开始时，我们缩写了我们的每一种语言，现在我们需要确保我们保持相同的缩写，否则 react 将会混淆，什么也翻译不出来。在每个新文件夹中，我们都要创建一个名为<code class="du kw kx ky kz b">translation.json</code>的新文件，这是我们放入译文的地方，也是 18next 的威力充分发挥的地方！</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/6544bf3e58717b86c798baeb772bc1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*LUg9wM_RHuY0zrSMh1hh5w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">文件夹和文件</figcaption></figure><p id="2510" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谈到翻译的功能，有多种途径可供选择。对于这个具体的例子，我创建了按钮，并赋予每个按钮在点击后改变语言的功能，为此我将参考之前的<code class="du kw kx ky kz b">app.js file</code>照片。看看它，除了两个非常重要的细节之外，我们没有太多需要做的事情，在第 2 行我们可以看到:</p><blockquote class="la"><p id="c326" class="lb lc hi bd ld le lf lg lh li lj js dx translated">const { t，i18n } = use translation()；</p></blockquote><p id="14ed" class="pw-post-body-paragraph iv iw hi ix b iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo mf jq jr js hb bi translated">有了这个，我们现在使用 i18next 提供给我们的 useTranslation 钩子。这将允许我们在我们的<code class="du kw kx ky kz b">translation.json</code>文件中调用我们的翻译，记住在这个例子中我创建了一个简单的<code class="du kw kx ky kz b">handleClick</code>函数。这就是 i18next 的威力所在，通常我们需要为我们的翻译创建一个小的三元组，但是因为我们使用 i18next，它通过简单地在我们的函数中添加<code class="du kw kx ky kz b">changeLanguage</code>为我们做了所有复杂的工作。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/b22c03098eaadea0a905c321df05655e.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*ozPt1-Ieeekdt1Mhe9UQ5w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">i18 的威力下一步</figcaption></figure><h1 id="edd2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">翻译</h1><p id="bfdd" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我们的每个<code class="du kw kx ky kz b">translation.json</code>文件看起来都一样，唯一的关键区别是你选择的语言。保持每个文件的结构相同，因为这在我们进行最后一步时很重要，也可能是整个教程中最简单的部分。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/bc6d2ea14f39fc02df8e83fec1b39a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sr6z2FXSPauZnGDxeyRnTQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">英语(默认)</figcaption></figure><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/bf6898f5fb719b1ffb8b6e2f1fda6f41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*sSLQ9gw_XCM0Enwb3ccV3g.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">西班牙语</figcaption></figure><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/0d4cc740647ebde90e625098b6baf12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*E8A7WoORixXg6CxhpAATSw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">意大利的</figcaption></figure><h1 id="b7b5" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结局</h1><p id="f767" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">所有这一切的最后一步很简单，我们需要使用<em class="mk"> t，</em>和 i18next 的强大功能以及命名约定。这最后一步非常简单。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/3a2bbd5a31e2d477c8f44e1a25a6e598.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*NNmyJpLo0xW6qY7D1l0tjw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">上面的 App.js 文件可查看大图</figcaption></figure><p id="5f6a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的翻译文件中，我们创建了一个保存在每个文件中的公共变量，在本例中,“Hello.1”指的是保存为“Hello World！”的默认文本而“Text.1”指的是“哇这太酷了！”。本质上，这就是我们如何翻译页面上的文本，并且现在能够看到所有的文本汇集在一起！</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/bfc346b12e62247fdd2237f377f5249a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*wkoi34zkgOHcvTA-.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">把所有的放在一起</figcaption></figure><p id="d53d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你还没有因为现在知道如何使用 18next 而给自己一个鼓励，并且可以开始在你的应用程序中实现它。我会留下一个到我的 GitHub repo 的链接，你可以在那里修改它，直到下一次，快乐编码！</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/89ee75cf380eccac323be1bdf014f548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IpYmKd2rgP4ZS84l"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">约书亚·雷德科普在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div></div>    
</body>
</html>