<html>
<head>
<title>Running Cypress Tests in GitHub Actions (Part 10)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在GitHub操作中运行Cypress测试(第10部分)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/running-cypress-tests-in-github-actions-part-10-8a3d406668bc?source=collection_archive---------2-----------------------#2022-03-27">https://medium.com/nerd-for-tech/running-cypress-tests-in-github-actions-part-10-8a3d406668bc?source=collection_archive---------2-----------------------#2022-03-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a41c742ab510b92d2c47fa3a18809713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c6OpwHk_FHP74GniMqgqeg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">带有Github操作的Cypress</figcaption></figure><p id="2339" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">沙洛姆，</p><p id="d0be" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本系列的前一篇文章<a class="ae js" href="https://kushalbhalaik.xyz/blog/running-cypress-tests-in-docker-part-9/" rel="noopener ugc nofollow" target="_blank">在docker中运行Cypress测试(第9部分)</a>中，我们讨论了如何从Docker容器中的<a class="ae js" href="https://kushalbhalaik.xyz/blog/building-a-test-automation-framework-using-cypress-io-part-1/" rel="noopener ugc nofollow" target="_blank"> Cypress-TestFramework </a>运行测试，现在在本文中，我们将看到如何使用<a class="ae js" href="https://docs.github.com/en/actions" rel="noopener ugc nofollow" target="_blank"> GitHub操作</a>在Docker中自动运行这些测试</p><h1 id="4a4f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">开始使用:</h1><p id="ded1" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">GitHub在每个存储库上都提供了动作特性选项:</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/9b577c7ffd1fd2acc81b66c02bcbd6ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EuROqmDpYlKuUeKoKEKQbw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">回购中的GitHUb操作按钮</figcaption></figure><blockquote class="lb lc ld"><p id="6114" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated">GitHub Actions提供了许多现成的工作流程</p></blockquote><p id="2b00" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后点击“<strong class="iw hj">新建工作流</strong>按钮，选择“<strong class="iw hj">自行设置工作流</strong></p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/8c26a661848a0c06e6363053f47bbf15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rhqk4R2ko6SZ_nbitzCMfQ.png"/></div></div></figure><p id="eccb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您将在屏幕上看到以下编辑器:</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/9d52f827d6afd03148e69f05263166ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgZWUei5GBu3kJKtZqzdyA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在repo中创建main.yml工作流</figcaption></figure><p id="aec1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在用以下配置细节替换<strong class="iw hj"> main.yml </strong>的内容:</p><pre class="kx ky kz la fd lj lk ll lm aw ln bi"><span id="73b5" class="lo ju hi lk b fi lp lq l lr ls">name: run-on-docker<br/>on:<br/>  # Triggers the workflow on push or pull request events but only for the develop branch<br/>  push:<br/>    branches: [ develop ]<br/>jobs:<br/>  cypress-run:<br/>    runs-on: ubuntu-latest<br/>    # Docker image with Cypress pre-installed<br/>    # https://github.com/cypress-io/cypress-docker-images/tree/master/included<br/>    container: cypress/included:9.2.0<br/>    steps:<br/>      - uses: actions/checkout@v1<br/>      - run: cd "Part 09" &amp;&amp; npm install &amp;&amp; npm run cy:test:qa</span></pre><p id="a60f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">main . yml的解释:</strong></p><p id="31fd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在对该repo的开发分支进行推送/每次提交时，代码将在docker容器中运行，由GitHub Actions使用docker image "<strong class="iw hj">cypress/included:9 . 2 . 0</strong>"运行<em class="le"> ubuntu-latest </em></p><p id="3c8e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，步骤部分使用了可以安全使用的“<strong class="iw hj"> actions/checkout@v1 </strong>”，该操作在<strong class="iw hj"> $GITHUB_WORKSPACE </strong>下签出您的存储库，因此您的工作流可以访问它。</p><blockquote class="lb lc ld"><p id="19a0" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated">也可以使用“actions/checkout@v2”或“actions/checkout@v3 ”,然后命令<strong class="iw hj"><em class="hi">CD“Part 09”&amp;&amp;NPM install&amp;&amp;NPM run cy:test:QA</em></strong>在工作流内部运行。</p></blockquote><p id="c330" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">它首先将上下文更改为repo子文件夹"<em class="le"> Part 09 </em>"并运行"<strong class="iw hj"> npm install </strong>"命令从npm注册表下载所有完成的依赖项。最后，它使用"<strong class="iw hj"> npm run </strong>"调用脚本，这将在"<em class="le"> QA </em>"环境中运行测试</p><p id="c77d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因为人们可能不会像我们一直使用的那样使用带有子文件夹的repo，所以您可以简单地使用<strong class="iw hj"><em class="le">NPM install&amp;&amp;NPM run cy:test:QA</em></strong></p><p id="aacf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">添加完<strong class="iw hj"> main.yml </strong>后，只需将其提交给repo，repo将自动触发<em class="le"> Github Actions </em>工作流。</p><h1 id="62f6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">分析结果:</h1><p id="bbd4" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">工作流运行后，您将看到基于您的提交名称的成功运行</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/9d5e654ba239bbb82f6b801529c68925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gs_128Vh7wJ8FybDOvU0UQ.png"/></div></div></figure><p id="d817" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后转到<strong class="iw hj"> <em class="le">成功的工作流程&gt;柏树-运行</em> </strong> <em class="le"> </em>，这将给你一个发生的所有动作的很好的摘要</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/fe8e8a7e7188281a397e8c4235bc4087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fiy5zFGgf_Th0YyFfXxXNQ.png"/></div></div></figure><p id="eb36" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这些操作如下(展开每个单独的操作后，您可以获得更多详细信息):</p><ul class=""><li id="2d1b" class="lv lw hi iw b ix iy jb jc jf lx jj ly jn lz jr ma mb mc md bi translated">设置作业</li><li id="5ff2" class="lv lw hi iw b ix me jb mf jf mg jj mh jn mi jr ma mb mc md bi translated">初始化容器</li></ul><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/c1954ffcd26b72e298de123ca818c37d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pcGztd7mGy7kKxbpQuG0ww.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">柏树/含:9.2.0正在拔</figcaption></figure><ul class=""><li id="2764" class="lv lw hi iw b ix iy jb jc jf lx jj ly jn lz jr ma mb mc md bi translated">运行操作/签出@v1</li></ul><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/3fa8c86eea09fb0ade2d90aed1fff7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6QCbdpBCnybaFe1lWTfjw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">查看回购协议</figcaption></figure><ul class=""><li id="eff6" class="lv lw hi iw b ix iy jb jc jf lx jj ly jn lz jr ma mb mc md bi translated">运行cd“第9部分”&amp;&amp; npm安装&amp;&amp; npm运行cy:test:qa</li></ul><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/fcc37d13eba4a1d06d2d5fa88d22598e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPbzXhRp9G4wNa6FNdYRyQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">运行“运行”命令</figcaption></figure><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/eb0373370a2e6ff90982048a9a863eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*83v_i-WTDc5W6jcaknlcXg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">决赛成绩</figcaption></figure><ul class=""><li id="2f44" class="lv lw hi iw b ix iy jb jc jf lx jj ly jn lz jr ma mb mc md bi translated">停止集装箱</li><li id="ef87" class="lv lw hi iw b ix me jb mf jf mg jj mh jn mi jr ma mb mc md bi translated">完成作业</li></ul><p id="092b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Lehitra'ot！</p><blockquote class="lb lc ld"><p id="9280" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><strong class="iw hj"> Github代码:</strong></p><p id="5994" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><a class="ae js" href="https://github.com/far11ven/Cypress-TestFramework/actions/runs/2044277040" rel="noopener ugc nofollow" target="_blank">https://github . com/far 11 ven/Cypress-test framework/actions/runs/2044277040</a></p></blockquote><p id="d588" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="le">原发布于</em><a class="ae js" href="https://kushalbhalaik.xyz/blog/running-cypress-tests-in-github-actions-part-10/" rel="noopener ugc nofollow" target="_blank">https://kushalbhalaik . XYZ</a></p></div></div>    
</body>
</html>