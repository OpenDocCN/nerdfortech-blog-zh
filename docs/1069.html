<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/jpa-is-a-standard-for-orm-4dd2c4dafe8a?source=collection_archive---------5-----------------------#2021-03-03">https://medium.com/nerd-for-tech/jpa-is-a-standard-for-orm-4dd2c4dafe8a?source=collection_archive---------5-----------------------#2021-03-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/6d86b8616e339423754ca046904e0848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xmWgjza1BHUghs6SqYd3jw.png"/></div></div></figure><p id="944d" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">JPA 是 ORM 的一个标准。它是一个 API 层，将 Java 对象映射到数据库表。你所需要的就是用<a class="ae iq" href="http://twitter.com/Entity" rel="noopener ugc nofollow" target="_blank"> @Entity </a>来注释你的域对象。</p><p id="bd04" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">在 Spring Boot，Spring Data JPA 结合了 Spring Data 和 JPA 的优点。</p><p id="92d2" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">在 JDBC 世界中，我们必须在代码库中嵌入 sql 查询来访问数据库，JPA 通过 JpaRepository 提供许多与 CRUD 相关的方法来隐藏所有的复杂性。</p><p id="2310" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated"><strong class="hu ir">我们来看看</strong></p><figure class="it iu iv iw fd hk er es paragraph-image"><div class="er es is"><img src="../Images/7f5cb2a0f70e0e6f1381d7ba6aa32b32.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*VqrkgdtB5sr4yiTpmB7QRg.png"/></div></figure><p id="546c" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">上面的代码将用户对象映射到数据库中的用户表。用户表由“名字”和“姓氏”两列组成。<a class="ae iq" href="http://twitter.com/Column" rel="noopener ugc nofollow" target="_blank"> @Column </a>注释正在定义用户表内的列。</p><p id="d902" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">JPA 支持许多注释，例如<a class="ae iq" href="http://twitter.com/Table" rel="noopener ugc nofollow" target="_blank"> @Table </a>注释可以定义表上的索引。看看下面的示例代码。</p><figure class="it iu iv iw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ix"><img src="../Images/8df7b3c886c3a103d460c25f4d4a8ed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZOeZLpn_KDC6si4K9Mfrg.png"/></div></div></figure><p id="381f" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">上面，我们在 first_name 列上创建了一个名为“name_index”的索引。</p></div><div class="ab cl iy iz gp ja" role="separator"><span class="jb bw bk jc jd je"/><span class="jb bw bk jc jd je"/><span class="jb bw bk jc jd"/></div><div class="hb hc hd he hf"><p id="0fb4" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated"><strong class="hu ir">无 JPA 的数据访问层:</strong></p><p id="f3b9" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">JDBC 是访问数据库的主要方法。JDBC 需要编写 sql 查询来与数据库通信，它使用语句、结果集等。分别准备一条 sql 语句并从数据库中获取结果。</p><p id="81dc" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated"><em class="jf">下面我们来看看——:</em></p><pre class="it iu iv iw fd jg jh ji jj aw jk bi"><span id="631a" class="jl jm ht jh b fi jn jo l jp jq">Statement stmt = conn.createStatement();<br/>ResultSet rs = stmt.executeQuery(“SELECT first_name FROM Customers WHERE last_name = ‘Doe’”);</span></pre><p id="fd45" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">这里我们创建一个语句对象，并通过提供 SQL 查询对其调用 executeQuery。ResultSet 对象将包含查询返回的所有结果。我们现在可以使用迭代器来迭代结果集中的项。</p><p id="9428" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">类似地，insert 语句可能如下所示。</p><pre class="it iu iv iw fd jg jh ji jj aw jk bi"><span id="4248" class="jl jm ht jh b fi jn jo l jp jq">Statement stmt = connection.createStatement();<br/>stmt.execute(“INSERT INTO user (FIRST_NAME,LAST_NAME) VALUES (1,’John’,’Doe’)”);</span></pre><p id="6d45" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated"><strong class="hu ir">带 JPA 的数据访问层</strong></p><p id="6816" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">我们来看看 JPA 是怎么做上面两个数据库操作的。</p><p id="77c4" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">Spring 数据 Jpa 公开了 JpaRepository，它包含了所有的 CRUD 方法。一旦我们为域对象定义了一个存储库，我们就可以调用这些方法了。</p><p id="cf23" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">让我们为用户创建一个存储库接口。</p><p id="7f23" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated"><a class="ae iq" href="http://twitter.com/Repository" rel="noopener ugc nofollow" target="_blank"> @Repository </a>注释告诉 Spring Boot 扫描接口，使其在启动时可用。你会注意到我们没有在接口中创建任何方法，因为我们不需要，至少对于简单的 CRUD 用例是这样。<br/>JPA repository 支持所有这些操作，我们正在扩展它。</p><p id="d98d" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">现在让我们比较一下 Jpa 中 Jdbc 的相同选择和插入操作。</p><p id="19d3" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">比如选择我们是否必须检索我们能做的所有对象</p><pre class="it iu iv iw fd jg jh ji jj aw jk bi"><span id="c745" class="jl jm ht jh b fi jn jo l jp jq">User user = userRepository.findAll();</span></pre><p id="5690" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">像插入如果我们必须插入一个用户，我们可以这样做</p><pre class="it iu iv iw fd jg jh ji jj aw jk bi"><span id="a997" class="jl jm ht jh b fi jn jo l jp jq">userRepository.save(user);</span><span id="230a" class="jl jm ht jh b fi jr jo l jp jq">Much simpler than the JDBC implementation.</span></pre><p id="6293" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">让我们看另一个例子。</p><p id="8b15" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">查找具有给定名字的所有用户。</p><p id="0bb7" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">使用“findBy”搜索特定的列。</p><pre class="it iu iv iw fd jg jh ji jj aw jk bi"><span id="c187" class="jl jm ht jh b fi jn jo l jp jq">// find rows by the first name.<br/>userRepository.findByFirstName(String firstName);</span><span id="d0fa" class="jl jm ht jh b fi jr jo l jp jq"><br/>// find rows by the last name.<br/>userRepository.findByLastName(String lastName);</span></pre><p id="c788" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">这篇帖子我就说到这里吧。在下一篇文章中，我将写如何使用 JPA 处理更复杂的 sql 查询。</p><p id="9c1b" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">如果你想浏览视频教程，我在 YouTube 上有一个 Spring Boot 的播放列表👉<a class="ae iq" href="https://youtu.be/fiKYlmTdG2g" rel="noopener ugc nofollow" target="_blank"> Spring Boot 教程系列</a></p><p id="0c99" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">我每天都在不同的平台上发布关于编程的帖子，目的是保持技术内容的干净和少发垃圾信息。</p><p id="8ffb" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">你也可以找到我👇</p><p id="70a5" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated"><a class="ae iq" href="https://www.youtube.com/channel/UC7Ze67ISJCgtHZBXCYcBLIg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">Youtube</a>|<a class="ae iq" href="https://twitter.com/S_AWDESH" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae iq" href="https://instagram.com/awdeshcodes" rel="noopener ugc nofollow" target="_blank">insta gram</a></p><p id="8df8" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">让我们一起学习吧💪💪</p><p id="d954" class="pw-post-body-paragraph hr hs ht hu b hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip hb bi translated">快乐编码💻</p></div></div>    
</body>
</html>