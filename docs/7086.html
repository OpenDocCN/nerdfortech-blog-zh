<html>
<head>
<title>Log4Shell: Eight months out, patches for major software vulnerability available but not universally applied</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">log 4 shell:8 个月过去了，主要软件漏洞的补丁已经发布，但还没有普遍应用</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/log4shell-eight-months-out-patches-for-uber-software-vulnerability-available-but-not-universally-51155a9524ba?source=collection_archive---------2-----------------------#2022-07-18">https://medium.com/nerd-for-tech/log4shell-eight-months-out-patches-for-uber-software-vulnerability-available-but-not-universally-51155a9524ba?source=collection_archive---------2-----------------------#2022-07-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1a318f5060ebe15b9d2e0db80b18b439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4wqyThLr8L2aaG-qgd0XeA.jpeg"/></div></div></figure><p id="2d06" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“预测很难，尤其是对未来的预测，”据说已故的伟大的约吉·贝拉曾说过。</p><p id="3a43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但显然不是一直如此。关于软件超级漏洞<a class="ae jo" href="https://armerding.medium.com/get-your-vaccine-for-the-log4shell-software-pandemic-ae445b771be8" rel="noopener"> Log4Shell </a>补丁的预测很容易。这可不是什么好事。</p><p id="b00d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那是 2021 年 12 月——预测季节的高潮——当<a class="ae jo" href="https://www.apache.org/" rel="noopener ugc nofollow" target="_blank">Apache Software Foundation</a>(ASF)开源日志库 Log4j 中灾难性的 Log4Shell 组漏洞公之于众的时候。</p><p id="5fa5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Log4Shell 可以让黑客实现“远程代码执行”——远程接管计算机——被<a class="ae jo" href="https://www.cisa.gov/news/2021/12/11/statement-cisa-director-easterly-log4j-vulnerability" rel="noopener ugc nofollow" target="_blank">称为</a>“我整个职业生涯中见过的最严重的(漏洞)之一，如果不是最严重的话，”美国网络安全和基础设施安全局(CISA)局长 Jen Easterly 说。</p><p id="935d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">国家漏洞数据库给 Log4Shell 的严重性评级为 10.0——满分为 10.0。</p><p id="5bdb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它在 12 月 8 日的披露引发了非营利组织 ASF 的无偿志愿者在圣诞节前的疯狂争夺，他们开始尝试做正确的事情——快速创建一个补丁来修复漏洞。他们做到了，在 24 小时内。</p><p id="0525" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，你可能会认为，考虑到对利用 Log4Shell 垂涎三尺的恶意黑客的潜在破坏，Log4j(用 Java，最流行的编程语言之一编写)的数亿用户中的每一个都会争先恐后地应用这个补丁。</p><p id="59ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">选择性争夺</strong></p><p id="5157" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是你错了。McAfee Enterprise 和 FireEye 的高级威胁研究负责人 Steve Povolny 在 12 月中旬告诉 ZDNet ，就在披露后一周，虽然许多用户会应用 ASF 推出的补丁，“我们相信 Log4Shell 漏洞将持续数月，甚至数年。”</p><p id="eb90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查。瑜伽熊并不总是对的。这个预测很容易。近八个月后，在 6 月的最后一周，CISA 和美国海岸警卫队网络司令部发布了一份<a class="ae jo" href="https://www.cisa.gov/uscert/ncas/current-activity/2022/06/23/malicious-cyber-actors-continue-exploit-log4shell-vmware-horizon" rel="noopener ugc nofollow" target="_blank">联合网络安全公告</a>，警告网络防御人员“网络威胁行为者，包括国家支持的高级持续威胁行为者，继续利用 VMware Horizon 和统一访问网关服务器中的 CVE-2021-44228(log 4 shell)来获得对未应用可用补丁的组织的初始访问。”</p><p id="3e89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">很多人都没有。现在也没有。CISA 不会为微不足道的风险发出建议。</p><p id="247b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么这种情况一直发生？自从<a class="ae jo" href="https://nakedsecurity.sophos.com/2017/10/06/will-equifax-breach-spur-real-reform-dont-hold-your-breath/" rel="noopener ugc nofollow" target="_blank">信用局巨头 Equifax </a>允许 1.455 亿人的个人和财务信息被泄露以来，已经过去了五年多——实际上是信息技术的一代人，因为它没有安装一个补丁来修复 Apache Struts 平台争议门户的漏洞——这个补丁已经发布了几个月。</p><p id="a41c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果这不是一个警钟，还需要什么？</p><p id="bb15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">显然超过五年了。这在一定程度上是因为 Log4j 太普遍了，而且已经存在了很长时间，以至于“许多没有打补丁的人正在使用 Log4j 运行一些无法更新的旧应用，”云安全联盟首席区块链官兼特别项目主任 Kurt Seifried 说。</p><p id="156c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这也意味着许多人可能甚至不知道他们正在使用 Log4j——他们是数百万开源软件用户中的一员，这些用户没有跟踪他们代码库中的所有组件。</p><p id="601a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">微软威胁情报中心(Microsoft Threat Intelligence Center)在 1 月 3 日<a class="ae jo" href="https://www.microsoft.com/security/blog/2021/12/11/guidance-for-preventing-detecting-and-hunting-for-cve-2021-44228-log4j-2-exploitation/" rel="noopener ugc nofollow" target="_blank">发布的对 12 月 11 日发布的公告</a>的更新中称，“客户可能不知道这个问题在他们的环境中有多普遍”，这可能是一种严重的轻描淡写</p><p id="6adb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者像 IBM 拥有的攻击面管理平台 rando ri<a class="ae jo" href="https://www.randori.com/blog/log4j-top-targets-report/" rel="noopener ugc nofollow" target="_blank">在 4 月份</a>所说的那样，“Log4j 将继续存在；我们会看到攻击者一次又一次地利用它。Log4j 深深地埋藏在共享的第三方代码层中，这使我们得出结论，我们将看到 Log4j 漏洞的实例在使用大量开源软件的组织所使用的服务中被利用。”</p><p id="bc87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">预测得到证实</strong></p><p id="950f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有这些预测都在上周被新的<a class="ae jo" href="https://www.cisa.gov/sites/default/files/publications/CSRB-Report-on-Log4-July-11-2022_508.pdf" rel="noopener ugc nofollow" target="_blank">网络安全审查委员会的第一份报告</a>所证实，该报告是对 Log4j 事件的审查。这份报告来自今年 2 月推出的公私合作倡议，以回应拜登总统 2021 年 5 月关于改善国家网络安全的<a class="ae jo" href="https://www.whitehouse.gov/briefing-room/presidential-actions/2021/05/12/executive-order-on-improving-the-nations-cybersecurity/" rel="noopener ugc nofollow" target="_blank">行政命令</a>，确实包含了一些好消息——委员会没有看到任何利用 Log4Shell 攻击关键基础设施的证据——但底线仍然是不祥的。“委员会评估认为，Log4j 是一个‘地方性漏洞’, Log4j 的易受攻击实例将在未来许多年内保留在系统中，可能是十年或更长时间。”</p><p id="a8df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这也使得 CISA 的警告成为一个现实的例证，即使用开源软件的问题不在于软件本身——它并不比私有或商业软件更安全或更不安全——而是管理它的失败。</p><p id="ab41" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">事实上，开放源码的流行是有充分理由的。它几乎总是免费的，并且可以根据用户的需要进行修改，只要用户遵守任何许可要求。开源软件组件是推动创新的基石，因为大多数软件产品都是由现有组件组装而成，而不是从头开始编写。正是这一点使得技术创新发展如此之快。</p><p id="d8b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">问题在于未能跟踪和维护软件供应链——这有点像汽车制造商不知道安全气囊中使用了什么零件，也不知道它们来自哪里。</p><p id="3db9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">跟踪和管理开源是很困难的——手动操作基本上是不可能的。大多数组织都在使用数万到数百万个开源组件 Synopsys 网络安全研究中心(CyRC)的最新年度“<a class="ae jo" href="https://www.synopsys.com/software-integrity/resources/analyst-reports/open-source-security-risk-analysis.html?cmp=pr-sig&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">开源软件和风险分析</a>”报告发现，今天使用的几乎每个代码库都使用开源，并且它平均占这些代码库的近 80%。</p><p id="cb79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如 Randori 指出的，这些组件中的大部分都隐藏在一个所谓的“依赖”网络中，除非你去寻找它们，否则它们将一直隐藏着。</p><p id="55bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Synopsys CyRC 的首席安全策略师 Tim Mackey 使用了一个带有 Instagram 界面的简单 Slack 应用程序作为示例。</p><p id="0585" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在最近的一次网上研讨会中，他注意到这款应用包括八个公开的依赖项，其中一个来自 Slack 本身，名为 Bolt。</p><p id="0d66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是 Bolt 自己有 15 个依赖项。其中一个叫做 Express，有另外 30 个。“当你剥开洋葱皮时，Slack/Bolt 实际上有 133 个独立的组件，”麦基说。</p><p id="74d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一个应用程序的一个组件的八个声明或“可见”依赖项的 16 倍。鉴于大多数组织拥有成百上千个由软件支持的应用、设备、系统或网络，很明显，跟踪和维护软件清单(通常称为软件材料清单(SBOM))是复杂而笨拙的。</p><p id="703c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">恐怖游行</strong></p><p id="2e64" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但未能做到这一点的风险(其中最明显的是被攻破)可能会导致现在人们熟悉的一系列可怕的事情:劫持系统、数据泄露(因此窃取敏感数据)、拒绝服务攻击、系统崩溃、身份盗窃、品牌受损、客户流失、合规罚款或其他制裁、法律责任、恢复成本等等。</p><p id="cd6f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些风险也可能扩展到内部之外。新思软件完整性集团黑鸭审计业务总经理菲尔·欧登斯说:“几乎所有组织对自己代码的担忧都是他们应该对通过 M&amp;A(并购)获得的代码的担忧。”</p><p id="c6de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“你可以说这甚至更令人担忧，因为大公司倾向于收购小公司，而小公司倾向于不太关注代码卫生——这是一种概括，但一般来说是真实的，”他说。</p><p id="5a47" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这也是对 CISA 建议的另一种解释，即仍有大量的 Log4Shell 修补工作要做。“被收购的公司很少知道他们代码中的大部分内容，”Odence 说。“如果一家公司不知道他们正在使用 Log4j，或者更有可能的是，不知道他们在哪里使用它，这是他们为什么不打补丁的最简单的解释。”</p><p id="eccb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">幸运的是，有许多资源可以帮助完成不可能的手动任务，包括<a class="ae jo" href="https://www.synopsys.com/software-integrity/security-testing/software-composition-analysis.html?cmp=pr-sig&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">软件组合分析</a>，这是一个自动化工具，可以帮助找到开源组件及其依赖关系，并可以帮助创建和维护 SBOM。</p><p id="21b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有了 SBOM，组织只需进行数据库搜索，就能知道它是否使用了 Log4j 这样的库。所以 SBOMs 应该是标准的。正如在安全会议上一直宣扬的那样，如果你不知道你拥有什么，你就无法保护它。</p><p id="d1d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">包括美国联邦贸易委员会在内的联邦机构也提供了大量指导，例如</p><ul class=""><li id="c641" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">将您的 Log4j 软件包更新至最新版本，此处可找到:<a class="ae jo" href="https://logging.apache.org/log4j/2.x/security.html" rel="noopener ugc nofollow" target="_blank">https://logging.apache.org/log4j/2.x/security.html</a></li><li id="3455" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">咨询<a class="ae jo" href="https://www.cisa.gov/uscert/apache-log4j-vulnerability-guidance" rel="noopener ugc nofollow" target="_blank"> CISA 指导</a>来缓解这个漏洞。</li><li id="2449" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">确保贵公司的做法不违反法律。未能识别和修补该软件的实例可能违反<a class="ae jo" href="https://www.ftc.gov/enforcement/statutes/federal-trade-commission-act" rel="noopener ugc nofollow" target="_blank">联邦贸易委员会法案</a>。</li><li id="4964" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">将此信息分发给向易受攻击的消费者销售产品或服务的任何相关第三方子公司。</li></ul><p id="cf1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽管如此，我们在这里，距离一个威胁被揭露已经八个月了，在数字层面上，这个威胁和新冠肺炎一样严重，有一种“疫苗”可用，但没有被普遍使用。</p><p id="b626" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽管如此，与生物病毒不同的是，你不必预约，不必开车去任何地方，也不必为接种疫苗等上几个小时。补丁和更新一旦可用，每个人都可以立即获得。</p><p id="c464" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Seifried 有点悲观，认为 Log4Shell 将很快获得普遍的免疫力，即使考虑到安全薄弱的潜在罚款或其他制裁。</p><p id="ac65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“大部分罚款远远低于安保成本，大部分实际成本都被外部化了，”他说，并提到了最近关于自 2012 年以来生产的所有本田汽车的遥控无钥匙进入系统存在缺陷的新闻。GitHub 报道称，该漏洞可能允许攻击者“永久打开车门，甚至远程启动汽车引擎。”</p><p id="6585" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“对本田来说，最糟糕的情况是，他们将不得不在经销商处提供免费的软件升级/服务，以及一张漂亮的卡片，上面写着‘我们真的很抱歉’，”他说。</p></div></div>    
</body>
</html>