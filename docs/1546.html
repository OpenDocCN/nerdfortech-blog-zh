<html>
<head>
<title>Creating custom pipes in Angular 11</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular 11中创建自定义管道</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-custom-pipes-in-angular-11-d4468da38168?source=collection_archive---------3-----------------------#2021-03-25">https://medium.com/nerd-for-tech/creating-custom-pipes-in-angular-11-d4468da38168?source=collection_archive---------3-----------------------#2021-03-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/70b75d385f8ca0b889eed06f610e16be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CC7YdEmIlJ34P3KdXtYD-g.png"/></div></div></figure><h1 id="49c4" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">内置管道</strong></h1><p id="152a" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">管道是在角度模板中转换数据的一种神奇、有用和干净的方式。Angular提供了许多用于数据格式化的<strong class="jq hj">内置管道</strong>，这些管道可以在我们的应用程序中使用。我会给你四个在Angular中使用的常见管道的例子，但是如果你想了解更多关于它的信息，请看管道API文档。</p><p id="621d" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">四根普通管道:</strong></p><ol class=""><li id="8655" class="ks kt hi jq b jr kn jv ko jz ku kd kv kh kw kl kx ky kz la bi translated"><strong class="jq hj">大写字母:</strong>将文本转换为全部大写。</li><li id="2254" class="ks kt hi jq b jr lb jv lc jz ld kd le kh lf kl kx ky kz la bi translated"><strong class="jq hj">小写字母:</strong>将文本转换为全部小写。</li><li id="1997" class="ks kt hi jq b jr lb jv lc jz ld kd le kh lf kl kx ky kz la bi translated"><strong class="jq hj"> CurrencyPipe: </strong>将一个数字转换为货币字符串，根据区域设置规则进行格式化。</li><li id="7f98" class="ks kt hi jq b jr lb jv lc jz ld kd le kh lf kl kx ky kz la bi translated"><strong class="jq hj"> DecimalPipe: </strong>将一个数字转换成一个带小数点的字符串，根据地区规则格式化，等等。</li></ol><p id="d7d2" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">为了转换数据，我们使用<strong class="jq hj">{ { variableName | pipeName } }</strong>。看看下面的例子。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/8157df7618dbc2c9fd95eba44fe1e4b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgNxMZf0-WVfl2S6g4PgBA.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">现在我们的四个管道开始工作了。</figcaption></figure><p id="1af2" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">这些内置管道带有棱角，它们只是<strong class="jq hj">准备使用</strong>，<strong class="jq hj">不需要配置。</strong></p><h1 id="9c62" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">自定义管道</h1><p id="7693" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在，如果我们想要一个定制的转换显示在我们的模板中，但是Angular目前没有提供我们需要的管道，会发生什么呢？我们做什么呢我们可以创建自定义管道吗？</p><p id="7446" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">没错！Angular为我们提供了这一惊人的功能。事实上，我们可以创建自己的管道。看看下面的教程。</p><blockquote class="lp lq lr"><p id="cda1" class="jo jp ls jq b jr kn jt ju jv ko jx jy lt kp kb kc lu kq kf kg lv kr kj kk kl hb bi translated">在这个例子中，我们将创建一个将千兆字节(GB)转换为兆字节(MB)的管道。1GB有1024 MB吧？</p></blockquote><p id="8dfe" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">记住这些值，现在让我们创建我们的typescript文件，它将包含我们的自定义管道的所有代码。我们可以使用CLI并键入下一个命令来创建它。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/bebe107daf6a3cca2e25b4980ed36446.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*t6KWt2XoOPBQSQgSkeQFCA.png"/></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">ng生成管道管道名称</figcaption></figure><p id="fb2a" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">如果您注意到，该命令将生成两个文件，其中一个文件将被更新:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/51e1d9298197c79d20121183ce430f33.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*7PguhRlCCYugo8eYmOii4g.png"/></div></figure><ol class=""><li id="d74a" class="ks kt hi jq b jr kn jv ko jz ku kd kv kh kw kl kx ky kz la bi translated">千兆字节转兆字节. pipe.spec.ts <strong class="jq hj">(测试文件)</strong></li><li id="f835" class="ks kt hi jq b jr lb jv lc jz ld kd le kh lf kl kx ky kz la bi translated">千兆字节转兆字节. pipe.ts <strong class="jq hj">(要编辑的文件)</strong></li></ol><p id="adeb" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">但是什么文件会被更新呢？该命令还会将新的定制管道添加到<strong class="jq hj"> app.module.ts </strong>文件中的<strong class="jq hj"> @NgModule </strong>声明中。检查一下！</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/20b7ca5ece7921ebd2f912e5fd717dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kigrxByG8X2wLAZu3ZZLoQ.png"/></div></div></figure><p id="78b5" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">现在，在我们的<strong class="jq hj">千兆字节到兆字节. pipe.ts </strong>文件中，我们需要实现我们的自定义代码来执行转换操作。我们的文件现在应该如下所示:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/b89046bf598440e7cfc182130daa93be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVU1mqXFi5ed6J-zHBrgow.png"/></div></div></figure><p id="0471" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">抓住你了！我们已经创建了自定义管道。顺便说一下，记住下一步的管道名称:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/a5dca75c6b9b6a489ea3bf77042ff237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*C4S61Y_LAqbwVkJfPRub5Q.png"/></div></figure><p id="8c35" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">下一步是什么？在我们想要使用这个管道的组件html文件中，我们需要添加以下表达式:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/afcda9994545eb60725aa73f2633c1a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aUEPYJSWMG8A2XNddzkZMA.png"/></div></div></figure><p id="07ce" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">要查看结果，是时候用<strong class="jq hj"> ng serve </strong>运行angular了，一旦代码编译完毕，您将在浏览器中看到如下结果:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/079c9931daccb92a97c0dbcc2d61a41d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*Up2kc1-Ui2LgIK00e0SWzA.png"/></div></figure><h1 id="dc86" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">最佳实践？</h1><p id="ee7d" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="jq hj">是啊！</strong>我会给你三个关于角管的最佳做法。</p><blockquote class="lp lq lr"><p id="c02e" class="jo jp ls jq b jr kn jt ju jv ko jx jy lt kp kb kc lu kq kf kg lv kr kj kk kl hb bi translated"><strong class="jq hj"> 1。总是尽量使用纯管道:</strong>默认<strong class="jq hj">所有管道都是纯的</strong>。不纯的管道对性能有巨大的负面影响。阅读一本<a class="ae km" href="https://angular.io/guide/pipes#pure-and-impure-pipes" rel="noopener ugc nofollow" target="_blank"> ngular的指南。</a></p><p id="0e1d" class="jo jp ls jq b jr kn jt ju jv ko jx jy lt kp kb kc lu kq kf kg lv kr kj kk kl hb bi translated"><strong class="jq hj"> 2。管道名称使用camel case</strong>:当然是在模板中，而不是在类名中。示例:“<strong class="jq hj">千兆字节数</strong>”。Angular团队使用它，它对于保持一致性非常有用。</p><p id="5485" class="jo jp ls jq b jr kn jt ju jv ko jx jy lt kp kb kc lu kq kf kg lv kr kj kk kl hb bi translated"><strong class="jq hj"> 3。在共享文件夹中创建管道。</strong>整个应用程序所需的所有实用程序都应创建在一个共享文件夹中，例如:管道、模型等。</p></blockquote><h1 id="4db9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">你准备好了吗？</h1><p id="4033" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">此时，您已经了解了一些关于管道以及如何创建自定义管道的知识。好的，这个例子非常简单，但是当你想要创建更复杂的管道时，管道创建的基本原理是一样的。</p><blockquote class="lp lq lr"><p id="395e" class="jo jp ls jq b jr kn jt ju jv ko jx jy lt kp kb kc lu kq kf kg lv kr kj kk kl hb bi translated">请记住:如果已经存在一个内置管道来完成您想要做的事情，请使用它！</p></blockquote><p id="f430" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">为我的第一篇文章和你的新发现干杯！🍻</p><p id="cf04" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">感谢阅读！</p></div></div>    
</body>
</html>