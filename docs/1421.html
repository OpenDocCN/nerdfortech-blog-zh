<html>
<head>
<title>React (Frontend) - Nodejs (Backend)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React(前端)- Nodejs(后端)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/react-frontend-nodejs-backend-167e2904e5c9?source=collection_archive---------2-----------------------#2021-03-18">https://medium.com/nerd-for-tech/react-frontend-nodejs-backend-167e2904e5c9?source=collection_archive---------2-----------------------#2021-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/50a0ece036cd5b8768a540445c9e460d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h3xScw8qpC5QkkMc8ol24A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自Morioh</figcaption></figure><p id="6d7d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们中的许多人，包括我，都很难开发一个连接到Nodejs后端的React应用程序！今天，通过这篇文章，我将向你展示连接这两者的基础知识，以及奖金！，如何将站点发布到<a class="ae js" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>(包括后端和前端)</p><p id="9f8a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我不是去聊天或其他应用程序，而是一个小的'你好世界'的例子！</p><p id="8c7b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">所以让我们<em class="jt">投入</em>进去吧…</p><h2 id="7971" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">先决条件:</h2><ul class=""><li id="04fe" class="kp kq hi iw b ix kr jb ks jf kt jj ku jn kv jr kw kx ky kz bi translated">安装了最新版本的<a class="ae js" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点</a></li><li id="ad0b" class="kp kq hi iw b ix la jb lb jf lc jj ld jn le jr kw kx ky kz bi translated">在<a class="ae js" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>设立账户</li><li id="9766" class="kp kq hi iw b ix la jb lb jf lc jj ld jn le jr kw kx ky kz bi translated">最新版本的<a class="ae js" href="https://vercel.com/download" rel="noopener ugc nofollow" target="_blank"> vercel-cli </a>已安装<a class="ae js" href="https://vercel.com/docs/cli#commands/login" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hj"> <em class="jt">已登录</em> </strong> </a></li></ul><p id="a699" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这就是你所需要的！</p><h1 id="9984" class="lf jv hi bd jw lg lh li ka lj lk ll ke lm ln lo kh lp lq lr kk ls lt lu kn lv bi translated">客户端安装</h1><p id="078a" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf lw jh ji jj lx jl jm jn ly jp jq jr hb bi translated">首先，在命令行中使用<code class="du lz ma mb mc b">npm i create-react-app -g</code>安装软件包“create-react-app”。(对于本教程，我使用的是Windows CMD)。</p><p id="e8e7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">安装完成后，您可以转到想要创建前端的文件夹(使用cmd)。在您的文件夹中，键入<code class="du lz ma mb mc b">npx create-react-app firstapp </code>(您可以根据自己的意愿更改<code class="du lz ma mb mc b">firstapp</code>)</p><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/94502042671bcfc4587e1d07781f0696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-splCNdA-EBtC88QCNZuCA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">安装应用程序</figcaption></figure><p id="a76d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">安装完成后，键入<code class="du lz ma mb mc b">cd firstapp</code>，然后键入<code class="du lz ma mb mc b">code .</code>，这将打开VSCode。(您可以使用您喜欢的代码编辑器。我现在将使用VSCode)。</p><p id="8898" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在是清洁过程。在项目的根中。可以去<code class="du lz ma mb mc b">src </code>文件夹。在里面，你<em class="jt">可以</em>删除<code class="du lz ma mb mc b">App.test.js</code>和<code class="du lz ma mb mc b">setupTests.js </code>，因为这些都是不需要的！</p><p id="12b0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="jt">好消息是我们已经完成了客户端安装！</em></p><h1 id="ffa0" class="lf jv hi bd jw lg lh li ka lj lk ll ke lm ln lo kh lp lq lr kk ls lt lu kn lv bi translated">客户端设置</h1><p id="f4ba" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf lw jh ji jj lx jl jm jn ly jp jq jr hb bi translated">现在，让我们<em class="jt">深入</em>你的代码。正如我上面所说的，我只去“Hello-World”的例子。为此，让我们导航到<code class="du lz ma mb mc b">src</code>文件夹中的<code class="du lz ma mb mc b">App.js</code>。您可以删除<code class="du lz ma mb mc b">&lt;div className="App"&gt;</code>中的所有代码。删除后，将这段代码添加到您的(整个)代码的最上面:<code class="du lz ma mb mc b">import React, { useEffect } from “react"; </code>现在您应该有类似于:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="631e" class="ju jv hi mc b fi mm mn l mo mp">import React, { useEffect } from "react";<br/>import "./App.css";</span><span id="35f6" class="ju jv hi mc b fi mq mn l mo mp">function App() {<br/> return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span><span id="2dda" class="ju jv hi mc b fi mq mn l mo mp">export default App;</span></pre><p id="9cd3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，在<code class="du lz ma mb mc b">function App()</code>中添加:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="3ec4" class="ju jv hi mc b fi mm mn l mo mp">useEffect(() =&gt; {<br/> console.log("This only run once!");<br/>}, []);</span></pre><p id="0139" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在你的整个<code class="du lz ma mb mc b">App.js</code>可能看起来像这样:</p><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/55d227c979a2d12c471d06ee6dc1f8cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpLZeSrF3A-YBeP7vy3pyA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">App.js</figcaption></figure><blockquote class="ms mt mu"><p id="454c" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">通过使用<code class="du lz ma mb mc b">UseEffect</code>钩子，你告诉React你的组件需要在<strong class="iw hj">渲染</strong>之后做一些事情。React将记住您传递的<strong class="iw hj">函数</strong>(并在执行DOM更新后调用它。</p></blockquote><p id="48ad" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们通过在VSCode中转至Terminal &gt; New Terminal来运行应用程序。在终端键入<code class="du lz ma mb mc b">npm start</code>。这将为我们的发展打开<code class="du lz ma mb mc b">localhost:3000</code>。现在你可以在浏览器的控制台上看到，“这只运行一次！”印好了！</p><p id="39d3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以通过按下<code class="du lz ma mb mc b">Ctrl + c </code>关闭开发服务器，然后在终端中点击回车！</p><p id="6d26" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下一步是安装<code class="du lz ma mb mc b">axios</code>。即使现在不需要，我们也要完成它。打开一个新的终端并键入<code class="du lz ma mb mc b">npm i axios</code>。安装完成后，导航到<code class="du lz ma mb mc b">src</code>文件夹并创建一个名为<code class="du lz ma mb mc b">axios.js</code>的新文件。在其中，添加这段代码:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="29ba" class="ju jv hi mc b fi mm mn l mo mp">import axios from "axios";  //imports axios</span><span id="46af" class="ju jv hi mc b fi mq mn l mo mp">const instance = axios.create({<br/> baseURL: "/",<br/>});</span><span id="32ee" class="ju jv hi mc b fi mq mn l mo mp">export default instance;  //exports the instance</span></pre><p id="2a51" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里，我们将axios baseURL设置为“/”。例如，如果我们网站的链接是“www.firstapp.com”，那么baseURL将是“www.firstapp.com <strong class="iw hj"> / </strong>”。你会明白的，因为我们还设置了服务器端！</p><p id="6063" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如我已经说过的，这对现在的<em class="jt">来说并不重要，</em>但我们无论如何都需要它！</p><p id="0c88" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好消息是我们已经完成了客户端的设置！</p><h1 id="1c4e" class="lf jv hi bd jw lg lh li ka lj lk ll ke lm ln lo kh lp lq lr kk ls lt lu kn lv bi translated">服务器端安装</h1><p id="8292" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf lw jh ji jj lx jl jm jn ly jp jq jr hb bi translated">导航到项目的根目录。创建一个名为<code class="du lz ma mb mc b">api</code>的新文件夹。现在，在您的终端中，通过<code class="du lz ma mb mc b">cd api</code>导航到<code class="du lz ma mb mc b">api </code>文件夹。然后在终端中，键入<code class="du lz ma mb mc b">npm init</code>。这将为我们创建一个<code class="du lz ma mb mc b">package.json</code>。这可能会问我们几个问题。但重要的是<code class="du lz ma mb mc b">entry-point</code>。对于这个问题，只需输入<code class="du lz ma mb mc b">server.js</code>。对于其他人，只需按回车键。</p><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/d17cb126ef5fb8dc36ea9ebe7da6e5b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T6C_b-DSGTE-EFSySa8GBw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">npm初始化</figcaption></figure><p id="17a9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，在您的后端文件夹(<code class="du lz ma mb mc b">api</code>文件夹)中，您可能会看到一个<code class="du lz ma mb mc b">package.json</code>。它的内容应该是这样的:</p><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/545edd8433d02d22486583b8ad4e3094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKBNwLBnwbbpzVKhoGAM_A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">package.json(初始)</figcaption></figure><p id="fb32" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们做一些改变！</p><p id="71e8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">创建新的终端。键入<code class="du lz ma mb mc b">cd api </code>，然后键入<code class="du lz ma mb mc b">npm i nodemon --save-dev</code>。在这个过程之后，导航到您的package.json</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="1598" class="ju jv hi mc b fi mm mn l mo mp">"start": "nodemon server.js"</span></pre><blockquote class="ms mt mu"><p id="f0c7" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">nodemon是一个工具，通过在检测到目录中的文件更改时自动重新启动节点应用程序，来帮助开发基于node.js的应用程序。</p></blockquote><p id="cd93" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来是在你的后端(<code class="du lz ma mb mc b">api</code>文件夹)添加一个<code class="du lz ma mb mc b">.gitignore</code>文件。在<code class="du lz ma mb mc b">.gitignore</code>文件里面，添加:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="25c0" class="ju jv hi mc b fi mm mn l mo mp">/node_modules</span></pre><blockquote class="ms mt mu"><p id="6d0f" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">一个<code class="du lz ma mb mc b">gitignore</code>文件指定了Git应该忽略的未被跟踪的文件。</p></blockquote><p id="bdb1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="jt">好消息是我们已经完成了服务器端的安装！</em></p><h1 id="30ce" class="lf jv hi bd jw lg lh li ka lj lk ll ke lm ln lo kh lp lq lr kk ls lt lu kn lv bi translated">服务器端设置</h1><p id="fcda" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf lw jh ji jj lx jl jm jn ly jp jq jr hb bi translated">让我们深入研究一下我们的服务器端设置。</p><p id="e2e6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，让我们安装<code class="du lz ma mb mc b">express</code>。在您的终端中，导航到<code class="du lz ma mb mc b">api</code>文件夹。类型<code class="du lz ma mb mc b">npm i express --save</code>。</p><p id="cb25" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后，您可以在后端(<code class="du lz ma mb mc b">api</code>文件夹)中创建一个<code class="du lz ma mb mc b">server.js</code>文件。在<code class="du lz ma mb mc b">server.js</code>里面加上这些:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="aace" class="ju jv hi mc b fi mm mn l mo mp">const express = require("express");  //requires (imports) the               //express package</span><span id="3d4e" class="ju jv hi mc b fi mq mn l mo mp">const PORT = process.env.PORT || 5000;  //see below<br/>const server = express();</span><span id="14e8" class="ju jv hi mc b fi mq mn l mo mp">server.listen(PORT, () =&gt; console.log(`listening on port ${PORT}`));</span></pre><blockquote class="ms mt mu"><p id="57bc" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">process.env.PORT || 5000表示:环境变量PORT中的任何内容，如果没有任何内容，则为5000。</p></blockquote><p id="5a68" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在在终端中(在<code class="du lz ma mb mc b">api</code>文件夹中)键入<code class="du lz ma mb mc b">npm start</code>。您可能会看到:</p><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/8efca97133c0873fe7867c4dddac7c92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zi40afvlwazpaiC8VcIFHQ.png"/></div></div></figure><p id="5a00" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，您可以关闭服务器(通过按下<code class="du lz ma mb mc b">Ctrl + c</code>然后按回车键)。</p><p id="97aa" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在您的<code class="du lz ma mb mc b">server.js</code>中，在<code class="du lz ma mb mc b">server.listen</code>前添加:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="2eef" class="ju jv hi mc b fi mm mn l mo mp">server.use(express.json());<br/>server.use(express.urlencoded({ extended: true }));</span></pre><blockquote class="ms mt mu"><p id="b539" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated"><code class="du lz ma mb mc b">express.json()</code>使用JSON有效负载解析传入的请求，并且基于<a class="ae js" href="http://expressjs.com/en/resources/middleware/body-parser.html" rel="noopener ugc nofollow" target="_blank">主体解析器</a>。</p><p id="a252" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated"><code class="du lz ma mb mc b">express.urlencoded()</code>是Express中内置的中间件功能。它使用urlencoded有效负载解析传入的请求，并且基于<a class="ae js" href="http://expressjs.com/en/resources/middleware/body-parser.html" rel="noopener ugc nofollow" target="_blank"> body-parser。</a></p></blockquote><p id="b4d9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">就在下面，补充一下:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="793a" class="ju jv hi mc b fi mm mn l mo mp">server.get("/api/hello", (req, res) =&gt; {<br/> res.status(200).send("Hello World!");<br/>});</span></pre><blockquote class="ms mt mu"><p id="ad59" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">当向'/api/hello '发出请求时，服务器将发送“Hello World”作为响应，并将响应状态设置为200。</p></blockquote><p id="86e7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在<code class="du lz ma mb mc b">server.js</code>将看起来像:</p><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/5f9343f2005bbb514bb146162f325b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z6LTMCnQrTGwHjAKkwFihQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">server.js</figcaption></figure><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="41dc" class="ju jv hi mc b fi mm mn l mo mp">const express = require("express");</span><span id="aca9" class="ju jv hi mc b fi mq mn l mo mp">const PORT = process.env.PORT || 5000;</span><span id="ca31" class="ju jv hi mc b fi mq mn l mo mp">const server = express();<br/>server.use(express.json());<br/>server.use(express.urlencoded({ extended: true }));</span><span id="6c28" class="ju jv hi mc b fi mq mn l mo mp">server.get("/api/hello", (req, res) =&gt; {<br/> res.status(200).send("Hello World!");<br/>});</span><span id="6538" class="ju jv hi mc b fi mq mn l mo mp">server.listen(PORT, () =&gt; console.log(`listening on port ${PORT}`));</span></pre><p id="905a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们测试您的简单服务器。只需键入，(在<code class="du lz ma mb mc b">api</code>文件夹中)，<code class="du lz ma mb mc b">npm start</code>。然后在你的浏览器中，进入<a class="ae js" href="http://localhost:5000/api/hello" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/API/hello</a>。</p><p id="bf7b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">就是这样！(您可以暂时关闭服务器！)</p><p id="4a13" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="jt">好消息是我们已经完成了服务器端的设置！</em></p><h1 id="2456" class="lf jv hi bd jw lg lh li ka lj lk ll ke lm ln lo kh lp lq lr kk ls lt lu kn lv bi translated">连接前端和后端</h1><p id="2887" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf lw jh ji jj lx jl jm jn ly jp jq jr hb bi translated">去你的<strong class="iw hj">前端</strong>T20】。在里面加上:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="f94d" class="ju jv hi mc b fi mm mn l mo mp">"proxy": "http://localhost:5000/",</span></pre><blockquote class="ms mt mu"><p id="a8f2" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">为了告诉开发服务器将任何未知的请求代理到开发中的API服务器，在您的<code class="du lz ma mb mc b">package.json.</code>中添加一个<code class="du lz ma mb mc b">proxy</code>字段以获得更多信息:<a class="ae js" href="https://create-react-app.dev/docs/proxying-api-requests-in-development/" rel="noopener ugc nofollow" target="_blank">https://create-react-app . dev/docs/proxy ing-API-requests-in-development/</a></p></blockquote><p id="93c8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，您希望您的后端和前端同时运行！为此你可能需要包<code class="du lz ma mb mc b">npm-run-all</code>。通过<code class="du lz ma mb mc b">npm i npm-run-all --save-dev</code>将它安装在项目前端。安装后，你必须在你的前端<code class="du lz ma mb mc b">package.json</code>做一些改变。将<code class="du lz ma mb mc b">package.json</code>中<code class="du lz ma mb mc b">"scripts" </code>的所有代码改为:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="9ba8" class="ju jv hi mc b fi mm mn l mo mp">"start": "run-p start:**",<br/>"start:app": "react-scripts start",<br/>"start:server": "cd api &amp;&amp; npm start",<br/>"build": "react-scripts build",<br/>"test": "react-scripts test",<br/>"eject": "react-scripts eject",<br/>"now-build": "react-scripts build &amp;&amp; mv build dist"</span></pre><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/4fb44f5f4c60d356b7f5e1f05aa7ab27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l6enGX1fNULdl-AkHDPIbg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">package.json</figcaption></figure><p id="298f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在在终端中，(在你的项目的根目录中)通过<code class="du lz ma mb mc b">npm start</code>启动你的项目</p><p id="893a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">就是这样！</p><p id="73b7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，在你的<code class="du lz ma mb mc b">src &gt; App.js</code>:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="a1e2" class="ju jv hi mc b fi mm mn l mo mp">import axios from "./axios";</span><span id="16cd" class="ju jv hi mc b fi mq mn l mo mp">//rest of the code ...</span><span id="edc1" class="ju jv hi mc b fi mq mn l mo mp">useEffect(() =&gt; {<br/> axios.get("api/hello").then((response) =&gt; {<br/>  console.log(response.data);<br/> });<br/>}, []);</span></pre><p id="a48e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在此之后，您的<code class="du lz ma mb mc b">App.js</code>将看起来像:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="1c01" class="ju jv hi mc b fi mm mn l mo mp">import React, { useEffect } from "react";<br/>import "./App.css";<br/>import axios from "./axios";</span><span id="d4bf" class="ju jv hi mc b fi mq mn l mo mp">function App() {<br/>useEffect(() =&gt; {<br/> axios.get("api/hello").then((response) =&gt; {<br/>  console.log(response.data);<br/> });<br/>}, []);</span><span id="4ee0" class="ju jv hi mc b fi mq mn l mo mp">return &lt;div className="App"&gt;&lt;/div&gt;;</span><span id="2eab" class="ju jv hi mc b fi mq mn l mo mp">}</span><span id="ec1f" class="ju jv hi mc b fi mq mn l mo mp">export default App;</span></pre><p id="84d4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，在您的代码中，您可能会看到<code class="du lz ma mb mc b">axios.get("api/hello")</code>。这里，正如我在客户端设置中所说的，在“api”之前不需要“/”。</p><p id="6221" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="jt">好消息是我们已经完成了前端和后端的连接！</em></p><h1 id="158a" class="lf jv hi bd jw lg lh li ka lj lk ll ke lm ln lo kh lp lq lr kk ls lt lu kn lv bi translated">在用户界面中显示结果</h1><p id="3ea2" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf lw jh ji jj lx jl jm jn ly jp jq jr hb bi translated">最后一步是在UI中显示获取的结果。为此，将<code class="du lz ma mb mc b">App.js</code>改写为:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="e36f" class="ju jv hi mc b fi mm mn l mo mp">import React, { useEffect, useState } from "react"; <br/>import "./App.css";<br/>import axios from "./axios";</span><span id="0750" class="ju jv hi mc b fi mq mn l mo mp">function App() {<br/>const [result, setResult] = useState("");</span><span id="7ee2" class="ju jv hi mc b fi mq mn l mo mp">useEffect(() =&gt; {<br/> axios.get("api/hello").then((response) =&gt; {<br/>  setResult(response.data);<br/> });<br/>}, []);</span><span id="768d" class="ju jv hi mc b fi mq mn l mo mp">return &lt;div className="App"&gt;<br/> {result &amp;&amp; &lt;h1&gt;{result}&lt;/h1&gt;}<br/>&lt;/div&gt;;</span><span id="2da5" class="ju jv hi mc b fi mq mn l mo mp">}</span><span id="63f1" class="ju jv hi mc b fi mq mn l mo mp">export default App;</span></pre><blockquote class="ms mt mu"><p id="7594" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">在第一行中，我们添加了从“react”导入<code class="du lz ma mb mc b">useState</code>的代码。然后我们创建了一个名为“结果”的新状态。当获取完成后，我们将“结果”设置为<code class="du lz ma mb mc b">response.data</code>(这是来自服务器代码的“Hello World”)。然后使用h1标签在UI中显示结果</p></blockquote><p id="90ad" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="jt">好消息是我们已经完成了在用户界面上显示结果！</em></p><h1 id="b70c" class="lf jv hi bd jw lg lh li ka lj lk ll ke lm ln lo kh lp lq lr kk ls lt lu kn lv bi translated">发布到Vercel</h1><p id="a1f5" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf lw jh ji jj lx jl jm jn ly jp jq jr hb bi translated">在我们将应用程序发布到Vercel之前，我们需要为Vercel创建配置文件。我们将该文件添加到您的项目的根目录中，并将其命名为<code class="du lz ma mb mc b">vercel.json</code>。在里面加上:</p><pre class="me mf mg mh fd mi mc mj mk aw ml bi"><span id="4e29" class="ju jv hi mc b fi mm mn l mo mp">{</span><span id="fddb" class="ju jv hi mc b fi mq mn l mo mp">"version": 2,</span><span id="0bc3" class="ju jv hi mc b fi mq mn l mo mp">"public": false,</span><span id="6bf9" class="ju jv hi mc b fi mq mn l mo mp">"builds": [<br/> { "src": "package.json", "use": "@vercel/static-build" },<br/> { "src": "/api/server.js", "use": "@vercel/node" }<br/>],</span><span id="24f1" class="ju jv hi mc b fi mq mn l mo mp">"rewrites": [<br/>  { "source": "/api/(.*)", "destination": "/api/server.js" },<br/>  { "source": "(.*)", "destination": "/index.html" }<br/> ]<br/>}</span></pre><blockquote class="ms mt mu"><p id="b23a" class="iu iv jt iw b ix iy iz ja jb jc jd je mv jg jh ji mw jk jl jm mx jo jp jq jr hb bi translated">有关<code class="du lz ma mb mc b">vercel.json</code>的更多信息，请访问<a class="ae js" href="https://vercel.com/docs/configuration" rel="noopener ugc nofollow" target="_blank">https://vercel.com/docs/configuration</a></p></blockquote><p id="3413" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们<em class="jt">潜入</em>生产部分！(对于这一步，您应该满足上述先决条件)</p><p id="8e34" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用终端，在项目的根目录中，键入<code class="du lz ma mb mc b">vercel --prod</code>。</p><p id="93b3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将促进你的网站的生产，会问一些问题，你提供的答案必须是:</p><figure class="me mf mg mh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nd"><img src="../Images/f721c39cd03815e17bb732715ae3bdf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nx_b3wMwxGF-pyzDzbS1hA.jpeg"/></div></div></figure><p id="b90c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以点击“生产”的链接。好了</p><p id="5189" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好消息是我们已经完成了你网站的发布！</p></div><div class="ab cl ne nf gp ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="hb hc hd he hf"><p id="c14b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">今天就到这里吧！如果你读这篇文章感到无聊，可以看看这个有趣的提示:“Github”这个名字是如何形成的？通过连接字母G-i-t-h-u-b。就是这样！<em class="jt">好消息是，我们已经看完了我的小</em> <strong class="iw hj"> <em class="jt">笑话</em> </strong> <em class="jt">！</em></p><p id="74b1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你还没看过我的<em class="jt">下篇(</em>来自未来<em class="jt"> ) </em>文章，在这里找<a class="ae js" rel="noopener" href="/nerd-for-tech/uploading-images-to-cloudinary-with-react-e432c644485">。</a></p><p id="c2ec" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">希望你们都喜欢这个！</p><p id="68c0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">谢谢！</p></div></div>    
</body>
</html>