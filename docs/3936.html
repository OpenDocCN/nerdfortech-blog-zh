<html>
<head>
<title>Matt’s Tidbits #98 — The truth will set you free (unless you’re using JavaScript)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">马特的花絮# 98——真相会让你自由(除非你使用JavaScript)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/matts-tidbits-98-the-truth-will-set-you-free-unless-you-re-using-javascript-46f841583636?source=collection_archive---------19-----------------------#2021-06-29">https://medium.com/nerd-for-tech/matts-tidbits-98-the-truth-will-set-you-free-unless-you-re-using-javascript-46f841583636?source=collection_archive---------19-----------------------#2021-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/38aac84142469fb3e19295382d341213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*emarK1xFUj42xdKh6D2nAA.jpeg"/></div></div></figure><p id="1bae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" rel="noopener" href="/nerd-for-tech/matts-tidbits-97-running-debugging-individual-jest-unit-tests-36f7464fbaf9">上次我分享了一个关于运行单个单元测试的快速花絮。</a>这一次，我想分享我在调试一个失败的单元测试时学到的一些有趣的事情。</p><p id="3de2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您使用JavaScript已经有一段时间了，那么您可能会遇到它在布尔表达式中稍微有些特殊的行为。在许多其他语言中，<code class="du jp jq jr js b">if</code>语句只能包含布尔表达式，要么是布尔变量，要么是返回布尔值的其他表达式，如:大于、小于、等于、不等于等。</p><p id="3d58" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，在JavaScript中，所有变量本身都是真/假的——这被称为“真”，你可以在这里查看完整的表格:<a class="ae jo" href="https://developer.mozilla.org/en-US/docs/Glossary/Truthy" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en-US/docs/Glossary/Truthy</a></p><p id="311d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这变得有问题的地方是很容易误用它或者在你的代码中有细微的错误。在其他语言中，如果你把一个字符串放在一个<code class="du jp jq jr js b">if</code>语句中，你会得到一个编译错误，因为它不是一个布尔表达式。但是在JavaScript中，您可以做到这一点而不会出现任何错误——甚至在运行时也不会。相反，每个值都被“强制”为布尔值。而且，规则并不总是直观的。</p><p id="b02d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">需要记住的重要一点是，只有以下值的计算结果为<code class="du jp jq jr js b">false</code>——所有其他值的计算结果为<code class="du jp jq jr js b">true:</code></p><ul class=""><li id="6a70" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn jy jz ka kb bi translated">错误的</li><li id="e561" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi">0</li><li id="fd0f" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi">-0</li><li id="fec4" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">0n (BigInt 0)</li><li id="c18b" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">" "(空字符串)</li><li id="ea10" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">空</li><li id="4538" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">不明确的</li><li id="3af2" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">NaN(非数字)</li></ul><p id="0718" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">坦白地说，这个列表看起来并没有那么糟糕。这是有道理的(不要让我从<code class="du jp jq jr js b">-0</code>(负零)开始——那只是写满了危险)，但是让一个空字符串求值为<code class="du jp jq jr js b">false</code>也是有道理的。然而，没有意义的是，空数组<code class="du jp jq jr js b">[]</code>的计算结果是<code class="du jp jq jr js b">true</code>。来吧伙计们——如果你要有一个非常灵活/动态的类型系统，至少要保持一致！数组和字符串都可以是<code class="du jp jq jr js b">null</code>或<code class="du jp jq jr js b">undefined</code>——那么为什么空字符串和空数组被区别对待呢？</p><p id="3bca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">答案在于JavaScript语言的微妙之处——字符串是一种特殊的类型，而数组是对象。在JavaScript中，所有对象引用(只要不是<code class="du jp jq jr js b">null</code>或<code class="du jp jq jr js b">undefined</code>)的计算结果都是<code class="du jp jq jr js b">true</code>。</p><p id="fe42" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">无论如何，正如你现在可能已经收集到的，我经历了这个确切的问题，我期望一个空数组是<code class="du jp jq jr js b">false</code>，但它实际上是<code class="du jp jq jr js b">true</code>，我通过调试器运行单元测试来解决它。</p><p id="0ca2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个故事的寓意是，如果你不熟悉/不熟悉某种语言，确保你仔细阅读(并重读)文档，并在调试时挑战你的假设。</p><p id="9998" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你最喜欢的JavaScript“真实”故事是什么？请在评论中告诉我！</p><p id="dc57" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有兴趣和我一起在埃森哲出色的数字产品团队工作吗？我们正在招聘<a class="ae jo" href="https://www.accenture.com/us-en/careers/jobdetails?id=00960587_en&amp;title=Native+Mobile+Developer" rel="noopener ugc nofollow" target="_blank">本地移动开发者</a>、<a class="ae jo" href="https://www.accenture.com/us-en/careers/jobdetails?id=00960583_en&amp;title=Hybrid+Mobile+Developer" rel="noopener ugc nofollow" target="_blank">混合移动开发者</a>、<a class="ae jo" href="https://www.accenture.com/us-en/careers/jobdetails?id=00906120_en&amp;title=Web+Developer" rel="noopener ugc nofollow" target="_blank">网络开发者</a>，以及<a class="ae jo" href="https://www.accenture.com/us-en/careers/jobsearch?jk=%22Digital%20Products%22&amp;sb=0&amp;pg=1&amp;is_rj=0&amp;ct=ma%20-%20cambridge|ny%20-%20new%20york" rel="noopener ugc nofollow" target="_blank">更多</a>！</p></div></div>    
</body>
</html>