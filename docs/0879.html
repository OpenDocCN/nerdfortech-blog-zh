<html>
<head>
<title>How to setup Vuex in Vue with class components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用类组件在Vue中设置Vuex</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-setup-vuex-in-vue-with-class-components-5dd4b842816f?source=collection_archive---------6-----------------------#2021-02-20">https://medium.com/nerd-for-tech/how-to-setup-vuex-in-vue-with-class-components-5dd4b842816f?source=collection_archive---------6-----------------------#2021-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/97f5a764617424c53e497588eb9bf9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IZ9EcfHW0_mff2SJ0DFy5Q.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">自由由<a class="ae hv" href="https://fineartamerica.com/profiles/jaison-cianelli" rel="noopener ugc nofollow" target="_blank"> <strong class="bd hw">贾森·恰内利</strong>T3】</a></figcaption></figure><div class=""/><p id="8db7" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果您的项目是使用带有类组件的Vue构建的，从头开始设置Vuex可能有点困难，因为Vuex文档中没有现成的解决方案。这个指导将帮助你对抗这条龙:下面你可以找到一个带有解释的安装实例。</p><ol class=""><li id="db34" class="ju jv hz iy b iz ja jd je jh jw jl jx jp jy jt jz ka kb kc bi translated">首先你需要安装Vuex:</li></ol><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="35fc" class="km kn hz ki b fi ko kp l kq kr">$ npm install vuex --save</span></pre><p id="8e67" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">或者，如果你喜欢纱线:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="3626" class="km kn hz ki b fi ko kp l kq kr">$ yarn add vuex</span></pre><p id="b01b" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">2.你还需要一个额外的包:<a class="ae hv" href="https://www.npmjs.com/package/vuex-class-component" rel="noopener ugc nofollow" target="_blank"> vuex-class-component </a>，它不仅允许你用类组件来使用vuex，还提供了一个非常简洁的功能，叫做<em class="ks">代理。</em>代理允许我们避免使用mapState、mapMutations和mapActions，但是只有当您将strict模式设置为<em class="ks"> false </em>时，才可以使用它们。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="686a" class="km kn hz ki b fi ko kp l kq kr">$ npm install --save vuex-class-component</span></pre><p id="6a11" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">或者，如果你喜欢纱线:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="39e7" class="km kn hz ki b fi ko kp l kq kr">$ yarn add vuex-class-component</span></pre><p id="3c93" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">3.由于我们已经安装了所有的包，现在我们可以创建一个新的文件夹，并将其命名为/ <strong class="iy ia"> <em class="ks"> store </em> </strong> <em class="ks">。</em>这是我们放置所有Vuex文件的地方。在这个文件夹中，我们创建一个文件，并将其命名为<strong class="iy ia"><em class="ks">store . vuex . ts</em></strong>。这将是Vuex配置的主文件。你可以将所有存储变量、突变、动作和getter放在这个文件中(适合小项目)，但我建议将所有这些功能分解到模块中，这种方法更具可扩展性。要创建一个模块，在同一个文件夹下创建一个文件，命名为<strong class="iy ia"> <em class="ks"> user.vuex.ts </em> </strong>。</p><p id="39a5" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">4.在你的<strong class="iy ia"> main.ts </strong>文件中包含以下导入:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="6737" class="km kn hz ki b fi ko kp l kq kr">import { store } from ‘./store/store.vuex’;</span></pre><p id="f3df" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">5.现在我们来填写<strong class="iy ia"><em class="ks">store . vuex . ts</em></strong>的内容，其中应该包括所有的Vuex设置<strong class="iy ia"> <em class="ks"> : </em> </strong></p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="d995" class="km kn hz ki b fi ko kp l kq kr">import Vue from 'vue';<br/>import Vuex from 'vuex';<br/>import { createProxy, extractVuexModule } from "vuex-class-component";<br/>import UserStore from './user.vuex'</span><span id="f5ba" class="km kn hz ki b fi kt kp l kq kr">Vue.use(Vuex);</span><span id="eca4" class="km kn hz ki b fi kt kp l kq kr">export const store = new Vuex.Store({<br/>  modules: {<br/>    ...extractVuexModule( UserStore )<br/>  }<br/>})</span><span id="268f" class="km kn hz ki b fi kt kp l kq kr">export const vxm = {<br/>  user: createProxy( store, UserStore ),<br/>}</span></pre><p id="1bb1" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">6.正如你在上面的代码片段中看到的，我们添加了一个模块，我们称之为UserStore。你可以随意称呼你的模块。对于每个新模块，您需要在/store文件夹中创建一个单独的文件，然后您需要将该文件导入到<em class="ks"> store.vuex.ts </em>中。</p><p id="987a" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">让我们填写<strong class="iy ia"> <em class="ks"> user.vuex.ts </em> </strong>的内容来创建出第一个模块:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="7c43" class="km kn hz ki b fi ko kp l kq kr">import { createModule, mutation, action, getter, Module, createProxy } from "vuex-class-component";</span><span id="ed2b" class="km kn hz ki b fi kt kp l kq kr">const VuexModule = createModule({<br/>  namespaced: "user",<br/>  strict: false,<br/>})</span><span id="1b71" class="km kn hz ki b fi kt kp l kq kr">export class UserStore extends VuexModule {<br/>  public firstName = "Jan";<br/>  public lastName = "Sverak";<br/>  specialty = "JavaScript";</span><span id="27b3" class="km kn hz ki b fi kt kp l kq kr"><a class="ae hv" href="http://twitter.com/mutation" rel="noopener ugc nofollow" target="_blank">@mutation</a> clearName() {<br/>    this.firstName = "";<br/>    this.lastName = "";<br/>  }</span><span id="8ea0" class="km kn hz ki b fi kt kp l kq kr"><a class="ae hv" href="http://twitter.com/action" rel="noopener ugc nofollow" target="_blank">@action</a> async doSomethingAsync() { return 20 }</span><span id="9301" class="km kn hz ki b fi kt kp l kq kr">// Explicitly define a vuex getter using class getters.<br/>  get fullname() {<br/>    return this.firstName + " " + this.lastName;<br/>  }</span><span id="57cc" class="km kn hz ki b fi kt kp l kq kr">// Define a mutation for the vuex getter.<br/>  // NOTE: this only works for getters.<br/>  set fullName( name :string ) {<br/>    const names = name.split( " " );<br/>    this.firstName = names[ 0 ];<br/>    this.lastName = names[ 1 ];<br/>  }</span><span id="6484" class="km kn hz ki b fi kt kp l kq kr">get bio() {<br/>    return `Name: ${this.fullName} Specialty: ${this.specialty}`;<br/>  }<br/>}</span><span id="5175" class="km kn hz ki b fi kt kp l kq kr">export default UserStore;</span></pre><p id="b015" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">7.最后一步:让我们试着在组件中使用它:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="a6b0" class="km kn hz ki b fi ko kp l kq kr">import {vmx} from '@/client/store/store.vuex;</span><span id="c965" class="km kn hz ki b fi kt kp l kq kr">...</span><span id="156d" class="km kn hz ki b fi kt kp l kq kr">private mounted() {<br/>// use this to see all available properties of user variable:<br/>    console.log(vmx.user)<br/>}</span></pre><p id="008e" class="pw-post-body-paragraph iw ix hz iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">你可以在Vuex类组件自述文件中了解更多关于代理的信息。使用代理有它的缺点——它允许直接从组件改变存储，这是不安全的(这就是为什么你需要禁用严格模式来使用它们),但同时它也很方便，因为它节省时间:你不必每次想改变存储时都创建和导入变化。</p></div></div>    
</body>
</html>