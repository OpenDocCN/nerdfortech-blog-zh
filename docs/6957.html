<html>
<head>
<title>git it on the page!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">把它放到页面上！</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/git-it-on-the-page-6b42d43cfb8d?source=collection_archive---------0-----------------------#2022-06-22">https://medium.com/nerd-for-tech/git-it-on-the-page-6b42d43cfb8d?source=collection_archive---------0-----------------------#2022-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5a15" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">设置与 GitHub 动作的持续集成</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/797c5d263582bf87e07b268c93f7fe80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ax1Ecm2nXwRVS_hO"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@thoughtcatalog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">思想目录</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="6679" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">发布到 GitHub 页面</h2><p id="c8c6" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">在我的上一篇文章中，我们研究了如何使用 GitHub Actions 设置管道的连续交付部分，以便我们每次在 GitHub 存储库中创建一个新版本时，我们的项目都会发布到我们的 itch.io 帐户。itch.io 并不是我们唯一可以发布的地方！事实上，GitHub 有一个服务，我们可以在我们的存储库中打开这个服务，叫做 GitHub Pages，它允许我们将我们的存储库(或存储库的一个分支)作为一个网站来托管。此功能更常用于将基于网站的项目存储库直接发布到托管状态。在我们的例子中，我们将在我们的存储库中设置一个特殊的分支，保存我们游戏的 WebGL 构建和在浏览器中显示它所必需的模板文件。然后，我们将使用 GitHub 动作来创建游戏，并将其发布到 GitHub 页面的这个分支中。</p><h2 id="74eb" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">生成个人访问令牌</h2><ol class=""><li id="064b" class="lf lg hi ko b kp kq ks kt jz lh kd li kh lj le lk ll lm ln bi translated">在任一页面的右上角，点按您的个人资料照片，然后点按“设置”。</li><li id="0b65" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">在左侧边栏中，单击开发者设置。</li><li id="9b22" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">在左侧边栏中，单击个人访问令牌。</li><li id="d3df" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">单击生成新令牌。</li><li id="bcba" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">给你的令牌一个描述性的名字。</li><li id="1c91" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">要让您的令牌过期，请选择“过期”下拉菜单，然后单击默认值或使用日历选择器。</li><li id="c5d1" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">选择您要授予此令牌的作用域或权限。要使用令牌从命令行访问存储库，请选择 repo。</li><li id="5097" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">单击生成令牌。</li><li id="c78e" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">复制令牌并存储在安全的地方(如密码库应用程序)，因为这将不会再次显示</li></ol><h2 id="6e5a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">创建 GitHub 秘密</h2><p id="b9e4" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">出于安全原因，我们不希望任何人访问我们的个人访问令牌，所以我们将把它作为秘密存储在我们的 GitHub 存储库中。</p><ol class=""><li id="3e17" class="lf lg hi ko b kp lt ks lu jz lv kd lw kh lx le lk ll lm ln bi translated">导航到 GitHub 上的存储库</li><li id="3f50" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">选择设置</li><li id="ed6c" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">选择秘密</li><li id="7d20" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">点按“新存储库密码”按钮</li><li id="be10" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">创建一个名为 GH_CREDENTIALS 的秘密，并将您的令牌值粘贴到其中。</li><li id="a510" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">点击“添加密码”按钮</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ly"><img src="../Images/92b1f6eea3d4e8b243fbbf3a965e4862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u8gt6DCyb7eXIEKfBwPhKw.png"/></div></figure><p id="eba1" class="pw-post-body-paragraph km kn hi ko b kp lt ij kr ks lu im ku jz lz kw kx kd ma kz la kh mb lc ld le hb bi translated"><strong class="ko hj"> <em class="mc"> **确保统一关闭后再继续** </em> </strong></p><h2 id="c9ef" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">创建干净(孤立)“gh-pages”分支</h2><p id="b5cd" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated"><em class="mc"> **一个孤立分支没有连接到其他分支并提交，其工作树根本没有文件。** </em></p><p id="1dfe" class="pw-post-body-paragraph km kn hi ko b kp lt ij kr ks lu im ku jz lz kw kx kd ma kz la kh mb lc ld le hb bi translated">创建孤立 gh-pages 分支:在终端中，导航到 repositories 文件夹，确保从命令行为 git 提供程序设置了凭据，然后键入以下内容:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="8366" class="jo jp hi me b fi mi mj l mk ml">git checkout --orphan gh-pages<br/>git reset --hard<br/>git commit --allow-empty -m "Initializing gh-pages branch"<br/>git config lfs.locksverify false<br/>git push origin gh-pages<br/>git checkout develop (or whatever your previous branch was)</span></pre><h2 id="8804" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">启用 GitHub 页面</h2><ol class=""><li id="36ef" class="lf lg hi ko b kp kq ks kt jz lh kd li kh lj le lk ll lm ln bi translated">导航到 GitHub 上的存储库</li><li id="703b" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">选择设置</li><li id="6820" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">选择页面</li><li id="cafb" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">从“Source”部分下的下拉列表中选择“GH-pages”repo(如果尚未选择)</li><li id="c784" class="lf lg hi ko b kp lo ks lp jz lq kd lr kh ls le lk ll lm ln bi translated">从文件夹下拉列表中选择“/(根)”(如果尚未选择)</li></ol><h2 id="8197" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">将 GitHub Pages 部署块添加到 Main.yml</h2><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="8752" class="jo jp hi me b fi mi mj l mk ml">releaseToGitHubPages:<br/>    name: Release to GitHub Pages<br/>    runs-on: ubuntu-latest<br/>    needs: buildWithLinux<br/>    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') &amp;&amp; contains(github.event.inputs.mode, 'Web')) <br/>    steps:<br/>      - name: Checkout Repository<br/>        uses: actions/checkout@v2<br/>      - name: Download WebGL Artifact<br/>        uses: actions/download-artifact@v2<br/>        with:<br/>          name: build-WebGL<br/>          path: build/WebGL<br/>      - name: Deploy to GitHub Pages 🚀<br/>        uses: JamesIves/github-pages-deploy-action@4.1.3<br/>        with:<br/>          branch: gh-pages # The branch the action should deploy to.<br/>          folder: build/WebGL # The folder the action should deploy.<br/>          target-folder: build # The folder the action should be deployed to within the deployment branch</span></pre><h2 id="e184" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">完整的文件</h2><p id="8356" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">下面是包含附加平台的完整动作工作流文件。</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="6e48" class="jo jp hi me b fi mi mj l mk ml">name: CI - Build All Platforms<br/>on:<br/>  push:<br/>    branches: [ main ]<br/>  pull_request:<br/>    branches: [ main ]<br/>  release:<br/>    types: [ published ]</span><span id="e582" class="jo jp hi me b fi mm mj l mk ml"># Allows you to run this workflow manually from the Actions tab<br/>  workflow_dispatch:<br/>    inputs:<br/>      mode:<br/>        description: 'check OR release (platform)'<br/>        required: true<br/>        default: 'check'<br/>permissions: <br/>  contents: write<br/>jobs:</span><span id="fc1c" class="jo jp hi me b fi mm mj l mk ml">#-------------------------------------------------------------------<br/># Build Project (with Linux)<br/>#-------------------------------------------------------------------<br/>  buildWithLinux:<br/>    name: Build for ${{ matrix.targetPlatform }} on version ${{ matrix.unityVersion }}<br/>    runs-on: ubuntu-latest<br/>    strategy: <br/>      fail-fast: false<br/>      matrix:<br/>        unityVersion: <br/>          - 2020.3.15f2<br/>        targetPlatform: <br/>          - StandaloneWindows # build a Windows Standalone<br/>          - StandaloneOSX # build a MacOS Standalone (Intel 64-bit)<br/>          - StandaloneLinux64 # build a Linux 64-bit Standalone <br/>          - WebGL # WebGL        <br/>    steps:<br/>      - name: Free Disk Space for Android<br/>        if: matrix.targetPlatform == 'Android'<br/>        run: |<br/>          df -h<br/>          sudo swapoff -a<br/>          sudo rm -f /swapfile<br/>          sudo rm -rf /usr/share/dotnet<br/>          sudo rm -rf /opt/ghc<br/>          sudo rm -rf "/usr/local/share/boost"<br/>          sudo rm -rf "$AGENT_TOOLSDIRECTORY"<br/>          df -h<br/>      - name: Checkout Repository<br/>        uses: actions/checkout@v3<br/>        with:<br/>          fetch-depth: 0<br/>          lfs: true<br/>      - name: Cache Library<br/>        uses: actions/cache@v3<br/>        with:<br/>          path: Library<br/>          key: Library-${{ matrix.targetPlatform }}<br/>          restore-keys: Library-<br/>      - name: Build Unity Project<br/>        uses: game-ci/unity-builder@v2.0-alpha-10<br/>        env:<br/>          UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}<br/>        with:<br/>          unityVersion: ${{ matrix.unityVersion }}<br/>          targetPlatform: ${{ matrix.targetPlatform }}<br/>          buildName: ${{ matrix.targetPlatform }}<br/>          versioning: Semantic<br/>      - name: Upload Build<br/>        uses: actions/upload-artifact@v3<br/>        if: github.event.action == 'published' || contains(github.event.inputs.mode, 'release')<br/>        with:<br/>          name: build-${{ matrix.targetPlatform }}<br/>          path: build/${{ matrix.targetPlatform }}<br/>      - name: Zip build/${{ matrix.targetPlatform }}<br/>        uses: montudor/action-zip@v1<br/>        if: (github.event.action == 'published' || contains(github.event.inputs.mode, 'release')) <br/>        with:<br/>          args: zip -qq -r build/build-${{ matrix.targetPlatform }}.zip build/${{ matrix.targetPlatform }}<br/>      - name: Upload build-${{ matrix.targetPlatform }}.zip to GitHub Release<br/>        uses: svenstaro/upload-release-action@v2<br/>        if: (github.event.action == 'published' || contains(github.event.inputs.mode, 'release')) <br/>        with:<br/>          repo_token: ${{ secrets.GH_CREDENTIALS }}<br/>          asset_name: build-${{ matrix.targetPlatform }}.zip<br/>          file: build/build-${{ matrix.targetPlatform }}.zip<br/>          tag: ${{ github.ref }}<br/>          overwrite: true<br/>          body:  ${{ github.event.release.body }}</span><span id="2951" class="jo jp hi me b fi mm mj l mk ml">#-------------------------------------------------------------------<br/># Deploy to GitHub Pages<br/>#-------------------------------------------------------------------</span><span id="c47f" class="jo jp hi me b fi mm mj l mk ml">releaseToGitHubPages:<br/>    name: Release to GitHub Pages<br/>    runs-on: ubuntu-latest<br/>    needs: buildWithLinux<br/>    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') &amp;&amp; contains(github.event.inputs.mode, 'Web')) <br/>    steps:<br/>      - name: Checkout Repository<br/>        uses: actions/checkout@v3<br/>      - name: Download WebGL Artifact<br/>        uses: actions/download-artifact@v3<br/>        with:<br/>          name: build-WebGL<br/>          path: build/WebGL<br/>      - name: Deploy to GitHub Pages 🚀<br/>        uses: JamesIves/github-pages-deploy-action@v4.3.3<br/>        with:<br/>          branch: gh-pages # The branch the action should deploy to.<br/>          folder: build/WebGL # The folder the action should deploy.<br/>          target-folder: build # The folder the action should be deployed to within the deployment branch</span><span id="8ca0" class="jo jp hi me b fi mm mj l mk ml">#-------------------------------------------------------------------<br/># Deploy to itch.io<br/>#-------------------------------------------------------------------</span><span id="3efc" class="jo jp hi me b fi mm mj l mk ml">release_webgl_to_itch:<br/>    name: Release WebGL to itch.io<br/>    runs-on: ubuntu-latest<br/>    needs: buildWithLinux<br/>    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') &amp;&amp; contains(github.event.inputs.mode, 'Web'))<br/>    steps:<br/>      - name: download WEBGL<br/>        id: download-webgl<br/>        uses: dsaltares/fetch-gh-release-asset@master<br/>        with:<br/>          version: "latest"<br/>          file: build-WebGL.zip<br/>          token: "${{ secrets.GH_CREDENTIALS }}"<br/>      - name: deploy to itch.io (WEBGL)<br/>        uses: josephbmanley/butler-publish-itchio-action@master<br/>        env:<br/>          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}<br/>          CHANNEL: html<br/>          ITCH_GAME: space-shooter-pro-redux<br/>          ITCH_USER: Arynoyn<br/>          PACKAGE: build-WebGL.zip<br/>          VERSION: ${{ steps.download-webgl.outputs.version }}</span><span id="67c2" class="jo jp hi me b fi mm mj l mk ml">release_windows_to_itch:<br/>    name: Release Windows (32-Bit) to itch.io<br/>    runs-on: ubuntu-latest<br/>    needs: buildWithLinux<br/>    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') &amp;&amp; contains(github.event.inputs.mode, 'Windows'))<br/>    steps:<br/>      - name: download Windows<br/>        id: download-windows<br/>        uses: dsaltares/fetch-gh-release-asset@master<br/>        with:<br/>          version: "latest"<br/>          file: build-StandaloneWindows.zip<br/>          token: "${{ secrets.GH_CREDENTIALS }}"<br/>      - name: deploy to itch.io (Windows)<br/>        uses: josephbmanley/butler-publish-itchio-action@master<br/>        env:<br/>          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}<br/>          CHANNEL: windows<br/>          ITCH_GAME: space-shooter-pro-redux<br/>          ITCH_USER: Arynoyn<br/>          PACKAGE: build-StandaloneWindows.zip<br/>          VERSION: ${{ steps.download-windows.outputs.version }}</span><span id="be08" class="jo jp hi me b fi mm mj l mk ml">release_macos_to_itch:<br/>    name: Release Mac OSX to itch.io<br/>    runs-on: ubuntu-latest<br/>    needs: buildWithLinux<br/>    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') &amp;&amp; contains(github.event.inputs.mode, 'Mac'))<br/>    steps:<br/>      - name: download MacOS<br/>        id: download-macos<br/>        uses: dsaltares/fetch-gh-release-asset@master<br/>        with:<br/>          version: "latest"<br/>          file: build-StandaloneOSX.zip<br/>          token: "${{ secrets.GH_CREDENTIALS }}"<br/>      - name: deploy to itch.io (MacOS)<br/>        uses: josephbmanley/butler-publish-itchio-action@master<br/>        env:<br/>          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}<br/>          CHANNEL: mac<br/>          ITCH_GAME: space-shooter-pro-redux<br/>          ITCH_USER: Arynoyn<br/>          PACKAGE: build-StandaloneOSX.zip<br/>          VERSION: ${{ steps.download-macos.outputs.version }}<br/>  <br/>  release_linux_to_itch:<br/>    name: Release Linux (64-bit) to itch.io<br/>    runs-on: ubuntu-latest<br/>    needs: buildWithLinux<br/>    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') &amp;&amp; contains(github.event.inputs.mode, 'Linux'))<br/>    steps:<br/>      - name: download Linux<br/>        id: download-linux<br/>        uses: dsaltares/fetch-gh-release-asset@master<br/>        with:<br/>          version: "latest"<br/>          file: build-StandaloneLinux64.zip<br/>          token: "${{ secrets.GH_CREDENTIALS }}"<br/>      - name: deploy to itch.io (Linux)<br/>        uses: josephbmanley/butler-publish-itchio-action@master<br/>        env:<br/>          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}<br/>          CHANNEL: linux<br/>          ITCH_GAME: space-shooter-pro-redux<br/>          ITCH_USER: Arynoyn<br/>          PACKAGE: build-StandaloneLinux64.zip<br/>          VERSION: ${{ steps.download-linux.outputs.version }}</span></pre><h2 id="1592" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">下次吧！</h2><p id="594e" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">如果你喜欢这篇文章，或者想在我的旅程中与我同行，请在<a class="ae jn" href="#https://gamedevchris.medium.com" rel="noopener ugc nofollow">gamedevchris.medium.com</a>关注我。</p></div></div>    
</body>
</html>