<html>
<head>
<title>Why we need Python’s Virtual Environments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我们需要 Python 的虚拟环境</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/necessities-of-pythons-virtual-environments-99ce55d6328a?source=collection_archive---------10-----------------------#2021-04-27">https://medium.com/nerd-for-tech/necessities-of-pythons-virtual-environments-99ce55d6328a?source=collection_archive---------10-----------------------#2021-04-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b25799c4682ef7cdf55c7a3cb0b4c418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDWjNcwVrvLuJ_rjSypjUw.jpeg"/></div></div></figure><p id="363b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇博客中，我将谈论虚拟环境的使用，以及它如何让你的生活变得更轻松。Python 有一种在你的计算机上下载包或模块的独特方式。我们用来执行各种任务的第三方包通常放在一个目录中。这可能会导致一个问题，因为您计算机上的每个项目都将使用这些相同的目录并检索这些第三方包。然而，当不同的项目需要不同版本的包，而 python 无法区分目录中的版本时，这会导致一个问题。这就是虚拟环境发挥作用的时候。</p><h1 id="3f32" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">虚拟环境</strong></h1><p id="7f92" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">虚拟环境基本上是 python 项目的一个独立环境。它有自己的依赖项，不管其他项目的依赖项是什么。因此，您可以为任何项目创建一个虚拟环境，它将独立于其他库和依赖项。它的优点是对虚拟环境的数量没有限制，因为它只是一个目录，其中包含安装第三方库的文件夹和确保 python 代码在虚拟环境中使用 python 解释器和站点包的脚本。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/629af8c8d217187f60bb13d92cca5b1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*-6M3nYBQ0bpscNWb1tN_ag.png"/></div></div></figure><h1 id="0d0e" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">使用虚拟环境的好处</strong></h1><ul class=""><li id="8166" class="kw kx hi is b it km ix kn jb ky jf kz jj la jn lb lc ld le bi translated">没有依赖问题</li><li id="3a39" class="kw kx hi is b it lf ix lg jb lh jf li jj lj jn lb lc ld le bi translated">通过删除一个项目所需的包来保持主包目录的整洁</li><li id="f5f2" class="kw kx hi is b it lf ix lg jb lh jf li jj lj jn lb lc ld le bi translated">在您没有管理员权限的计算机上安装软件包</li></ul><h1 id="f66d" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">如何使用虚拟环境</strong></h1><ul class=""><li id="9c34" class="kw kx hi is b it km ix kn jb ky jf kz jj la jn lb lc ld le bi translated">创建一个您想要处理的新目录</li><li id="f730" class="kw kx hi is b it lf ix lg jb lh jf li jj lj jn lb lc ld le bi translated">在该目录中创建新的虚拟环境</li></ul><p id="0b73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du lk ll lm ln b">python -m venv env</code>:这将在目录中创建一个名为<code class="du lk ll lm ln b">env </code>的文件夹，该文件夹将包含三个文件夹:script(Mac 中的 bin)、include 和 library。之后，我们需要通过运行文件夹中的脚本来激活我们的环境。</p><pre class="ks kt ku kv fd lo ln lp lq aw lr bi"><span id="6fb3" class="ls jp hi ln b fi lt lu l lv lw">source env/Scripts/activate ## in Windows<br/>source env/bin/activate ## in Mac</span></pre><p id="0ee4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你需要回到主系统然后使用<code class="du lk ll lm ln b">deactivate.</code></p><h1 id="4031" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">添加库</h1><p id="f3c8" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">默认情况下，<code class="du lk ll lm ln b">pip </code>和<code class="du lk ll lm ln b">setuptools </code>已经在环境内部。您可以使用 pip 添加项目所需的包。您可以使用 pip 创建一个 requirement.txt 文件。</p><pre class="ks kt ku kv fd lo ln lp lq aw lr bi"><span id="1517" class="ls jp hi ln b fi lt lu l lv lw">pip freeze &gt; requirements.txt</span></pre><p id="d417" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您在一个组中工作，其他成员可以使用该文件来更新虚拟环境。</p><pre class="ks kt ku kv fd lo ln lp lq aw lr bi"><span id="c120" class="ls jp hi ln b fi lt lu l lv lw">pip install -r requirements.txt</span></pre><p id="3acb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，现在所有的组成员都有了软件包的正确版本。同样，当你更新一个库时，它会意外地产生一个问题。您总是可以依靠 requirement.txt 文件在新环境中重新安装依赖项。</p><h1 id="affc" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">Jupyter 笔记本中的虚拟环境</strong></h1><p id="8808" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">激活虚拟环境后，您需要在环境中安装 ipython 内核。</p><pre class="ks kt ku kv fd lo ln lp lq aw lr bi"><span id="2389" class="ls jp hi ln b fi lt lu l lv lw">ipython kernel install --user --name=env</span></pre><p id="12ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在那之后,<code class="du lk ll lm ln b">kernel.json</code>文件将被创建，你就完成了。之后，您可以使用<code class="du lk ll lm ln b"> jupyter notebook</code>或<code class="du lk ll lm ln b">jupyter lab</code>并选择 env 内核来使用虚拟环境。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/a790e57348d216b46bb0e520f20ca102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x8ydJ4oVE6tHe68d-eAHKw.png"/></div></div></figure><h1 id="384b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Conda vs Python 虚拟环境</h1><p id="d140" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">哪个更好？答案总是视情况而定。如果我们只创建一个没有外部包的数据科学项目，那么我们可以使用 anaconda，因为不需要创建新的虚拟 env。然而，anaconda 的问题是，当我们使用 anaconda 创建虚拟环境时，它会附带所有主要的数据科学包，如果我们为每个项目创建一个包，这对我们的计算机来说是一个很大的负担。如果我们使用 flask 和 SQL 来创建一个应用程序，最好使用虚拟环境来获得更好的依赖性。下面是我找到的一张显示上述观点的图片。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/4a2af7f3973cf06a260db657d10e4bda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iocZDwWaXPNCiwCmUdMyVw.png"/></div></div></figure><p id="de81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们了解到，虚拟环境可以让我们的生活变得更加轻松，因为它不需要处理依赖性问题，并且有一个备份 requirement.txt 文件供团队和您在意外创建包问题时使用。</p><div class="ly lz ez fb ma mb"><a href="https://www.linkedin.com/in/tenzin-wangdu/" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab dw"><div class="md ab me cl cj mf"><h2 class="bd hj fi z dy mg ea eb mh ed ef hh bi translated">丹津·王度-大会数据科学研究员| LinkedIn</h2><div class="mi l"><h3 class="bd b fi z dy mg ea eb mh ed ef dx translated">我是一名数据科学家，拥有数学学士学位。我有使用 Python、SQL 和 Tableau 做项目的经验。</h3></div><div class="mj l"><p class="bd b fp z dy mg ea eb mh ed ef dx translated">www.linkedin.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp io mb"/></div></div></a></div></div></div>    
</body>
</html>