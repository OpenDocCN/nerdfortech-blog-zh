<html>
<head>
<title>React prop type-checking: PropTypes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应属性类型检查:属性类型</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/react-prop-type-checking-proptypes-a7033dd1939e?source=collection_archive---------8-----------------------#2021-08-20">https://medium.com/nerd-for-tech/react-prop-type-checking-proptypes-a7033dd1939e?source=collection_archive---------8-----------------------#2021-08-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8933e4fa3854e49902a096a7f2866351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6C4nSvy2Woe0m7bWEn4BA.png"/></div></div></figure><p id="f0ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然许多react应用程序可能会使用TypeScript进行内置类型检查，但如果您在普通React应用程序中工作，您可以使用<em class="jo"> prop-types </em>库来做一些相同的工作。特别是这个库允许你检查道具的类型是否正确以及它们是否存在。</p><h1 id="3ce6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">装置</h1><p id="45e2" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">如果您使用的是React版本16或更高版本，您可以安装包含以下内容的库:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="2e7d" class="lb jq hi kx b fi lc ld l le lf">npm install — save prop-types</span></pre><p id="d9b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你正在使用一个旧版本的React，没有必要安装，prop-types已经内置在React中了！</p><h1 id="7565" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">进口</h1><p id="4042" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">要开始使用prop-types，请将它导入到一个组件中，并在文件顶部添加以下代码行:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="b8c6" class="lb jq hi kx b fi lc ld l le lf">import PropTypes from ‘prop-types’</span></pre><p id="4dd6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你在旧版本的React中工作，你可以用<code class="du lg lh li kx b">React.PropTypes</code>访问道具类型。</p><h1 id="8146" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">使用</h1><p id="d88f" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">两个版本的道具类型的用法相似。让我们从较新的库版本开始。首先，您需要通过在组件上使用<code class="du lg lh li kx b">.propTypes</code>方法来定义组件的属性类型，如下所示:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="0e33" class="lb jq hi kx b fi lc ld l le lf">Example.propTypes = {</span><span id="fdce" class="lb jq hi kx b fi lj ld l le lf">}</span></pre><p id="a747" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在对象内部，我们将通过一个键值对来声明道具的名称和预期类型。为了定义类型，我们使用<code class="du lg lh li kx b">PropTypes. </code>，然后是我们期望的任何类型。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="e50f" class="lb jq hi kx b fi lc ld l le lf">Example.propTypes = {</span><span id="0c8e" class="lb jq hi kx b fi lj ld l le lf">  name: PropTypes.string</span><span id="02ba" class="lb jq hi kx b fi lj ld l le lf">};</span></pre><p id="78fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于老版本的React，初始设置是一样的，但是要设置道具的类型，你需要通过<code class="du lg lh li kx b">React.PropTypes</code>来访问<code class="du lg lh li kx b">PropTypes</code></p><p id="56dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以接受<code class="du lg lh li kx b">strings</code>、<code class="du lg lh li kx b">arrays</code>、<code class="du lg lh li kx b">Booleans</code>、<code class="du lg lh li kx b">functions</code>、<code class="du lg lh li kx b">numbers</code>、<code class="du lg lh li kx b">objects</code>等一整串类型。关于更详细的列表和用法，请查阅官方<a class="ae lk" href="https://www.npmjs.com/package/prop-types" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="7f5a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">检查是否存在</h1><p id="0f8a" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">为了确保一个属性总是被传递，而不管它的类型如何，你可以将<code class="du lg lh li kx b">.isRequired</code>方法添加到它的类型定义的末尾，如下所示:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="5b1e" class="lb jq hi kx b fi lc ld l le lf">Example.propTypes = {</span><span id="0894" class="lb jq hi kx b fi lj ld l le lf">  name: PropTypes.string.isRequired</span><span id="30d0" class="lb jq hi kx b fi lj ld l le lf">};</span></pre><h1 id="eb22" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">案例研究|尝试一下！</h1><p id="93b2" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在下面的例子中，我设置了一个组件，它接受一个属性、一个名称，我没有传递一个字符串，而是传递了一个数字(哎呀！).控制台显示一条警告，提示有一个类型为<code class="du lg lh li kx b">number</code>的无效属性<code class="du lg lh li kx b">name</code>，它应该是一个<code class="du lg lh li kx b">string</code>。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="ac05" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请随意使用我设置的这个例子。如果你根本不传入一个值会怎么样？</p></div></div>    
</body>
</html>