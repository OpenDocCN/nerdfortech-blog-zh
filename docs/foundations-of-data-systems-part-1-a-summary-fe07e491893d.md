# 数据系统基础第一部分概述

> 原文：<https://medium.com/nerd-for-tech/foundations-of-data-systems-part-1-a-summary-fe07e491893d?source=collection_archive---------14----------------------->

> 这是我对本书第一章“设计数据密集型应用”的总结

据估计，每天大约会产生 2.5 万亿字节的数据。随着 IOT 和传感器的增加，从 2020 年开始，全球数据供应量将每两年翻一番。此外，随着每天互联网用户数量的增加，产生了大量的数据。随着大量数据的产生，公司将专注于构建能够处理如此大量数据的应用程序。虽然能够设计处理计算计算机系统也很重要，但这将留待以后讨论。

面对如此多的数据、数据的复杂性以及数据生成的速度，能够设计出良好的系统以确保应用程序产生符合预期要求的预期结果是非常重要的。

如今，大多数应用程序都是数据密集型的，需要处理大量数据。

1.  存储数据以便以后使用的应用程序(数据库)
2.  存储高成本操作的结果以加速读取(缓存)
3.  允许用户基于关键字或过滤数据(搜索索引)来搜索数据
4.  在不同进程之间异步处理连续的数据流(流处理)
5.  在一段时间内处理大量数据(批处理)

以上所有例子都存储数据，每个例子都有不同的数据存储系统。这是因为每个应用程序都有不同的要求。有几种缓存方法，几种建立搜索索引的方法，几种满足不同需求的数据库系统。因此，在构建应用程序时，确定哪些工具适合该任务并使用它们是很重要的。

## 数据系统:

数据系统是一个抽象概念，在这个意义上，存储和处理数据的所有东西都属于它，无论是数据库还是缓存。数据库、缓存、消息队列都属于数据系统，但是它们有不同的访问模式，因此有不同的性能特征，因此有不同的实现。

近来出现了许多新工具，与传统工具不同的是，这些现代工具针对各种用例进行了优化。例如，有些数据存储也用作消息队列(Redis ),有些消息队列具有类似于耐久性(Apache Kafka)的数据库。

如今，许多应用程序的需求不再能够由单一的工具来满足。因此，应用程序被分解成任务，每个任务都有一个相关的工具。这些工具又使用应用程序代码连接起来。例如，可以有一个应用程序管理的缓存层(使用 Memcached)，或者一个独立于主数据库的搜索服务器(比如 Elasticsearch 或 Solr)。然后，保持这些缓存和索引与主数据库同步是应用程序代码的责任。

因此，当您创建一个利用底层工具的服务或 API 时，您已经用小的通用组件创建了一个复合数据系统。无论何时设计数据系统，您都需要确保它:

*   可靠的
*   可攀登的
*   可维持的

## 可靠:

我们应该能够依赖和信任数据系统在任何情况下都能正常工作。在生产中，会有许多原因影响导致故障的一个或多个软件或硬件组件。我们的系统应该能够处理这样的故障(容错)。

与失败相比，故障是不同的。失败是指整个系统瘫痪。当只有一个或一小部分组件出现故障时，这就是故障。因此，有必要设计一种容错机制，这样我们就不会面临失败。

硬件故障:

当你有很多机器的时候，一些硬盘故障，内存崩溃，电源问题等等是必然会发生的。如果一个数据中心有 10，000 个硬盘，每天很可能至少有一个会损坏。防止这些故障的解决方案是增加硬件组件的冗余，以减少故障的机会。磁盘可能设置在 RAID 配置中，服务器可能有双电源和热插拔 CPU，数据中心可能有电池和柴油发电机作为备用电源。当一个组件失效时，冗余组件可以取代它的位置，同时替换损坏的组件。

近年来，应用程序的计算需求增加了，许多应用程序开始使用大量的机器。因此，除了硬件冗余之外，还存在使用软件容错技术来允许整个机器丢失的系统的趋势。

软件错误:

系统失败的主要原因之一是错误处理能力差。软件中的一些错误可能处于休眠状态，直到被特定事件触发。例如，考虑 2012 年 6 月 30 日的闰秒，由于 Linux 内核中的一个错误，导致许多应用程序同时挂起。很难识别所有的系统故障。彻底的测试、各种事件的预测、进程隔离、主动崩溃进程和重启、监控和分析生产中的系统行为是一些小步骤，它们可以在很大程度上帮助我们处理软件错误。

我们的系统可靠是非常重要的。系统中的错误会导致收入和声誉的损失。即使在没有收入的情况下，应用程序也有责任随时满足客户的需求。

## 可扩展:

可靠性并不能保证一个系统在未来处理更多数据时会工作得很好。可伸缩性是我们用来描述系统处理增加的负载的能力的术语。载荷是根据几个参数定义的。每个应用需要不同的参数。

例如:web 浏览器的每秒请求数、数据库的读写比率、缓存的命中率。

能够处理一级负载的架构不可能处理 10 倍的负载。处理这一问题的几种方法是垂直缩放和水平缩放。

*   纵向扩展:转向更强大的机器。也称为向上扩展。
*   水平扩展:将负载分布在多个小型机器上。也称为向外扩展。

垂直扩展实际上更简单，因为它很容易处理在单台机器上运行的系统。但是那些高端机器可能很贵。所以在实践中，好的架构包含了实用的混合方法，即使用几个相当强大的机器。

有些系统是弹性的，这意味着当负载增加时，它们可以自动添加资源。有些系统需要人工监控，并根据需要添加/删除资源。如果负载不可预测，弹性系统是有用的，但是手动管理系统是简单的。

大规模运行的系统的架构通常是高度特定于应用的。问题可能是读取量、写入量、要存储的数据量、数据的复杂性、响应时间要求、访问模式，或者(通常)所有这些因素的混合，再加上更多的问题

## 可维护:

人们将来应该能够在这个系统上高效地工作。如果将来有任何潜在的错误或者需要对其进行更改，团队应该能够使用文档轻松地做到这一点。

众所周知，软件的大部分成本不在最初的开发阶段，而在持续的维护阶段——修复错误、保持系统运行、调查故障、使其适应新的平台、针对新的用例进行修改以及添加新的功能。因此，我们需要设计这样的软件，它将最小化维护期间的痛苦，并避免创建遗留系统。

可操作性:

我们必须通过为运营团队提供良好的文档、良好的默认行为(如果需要，还允许他们更改)、对自动化的良好支持和标准工具等，让他们能够轻松地运行系统。

简单性:

我们还必须使系统简单(不是在功能需求方面)。这可以通过抽象来实现。一个好的抽象可以将大量的实现细节隐藏在一个干净、易于理解的外表后面。

可进化性:

系统需求变化很快，因此我们必须确保我们的系统能够处理这些变化。敏捷工作模式为适应变化提供了一个框架。

参考:

[https://www . oreilly . com/library/view/designing-data-intensive-applications/9781491903063/](https://www.oreilly.com/library/view/designing-data-intensive-applications/9781491903063/)