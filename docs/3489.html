<html>
<head>
<title>Basics of Javascript · String · replace() (method)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript String replace()的基础知识(方法)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/basics-of-javascript-string-replace-method-49ec8dbd2d76?source=collection_archive---------24-----------------------#2021-06-11">https://medium.com/nerd-for-tech/basics-of-javascript-string-replace-method-49ec8dbd2d76?source=collection_archive---------24-----------------------#2021-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8d5001efaca3eb21742edd362a0b629e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_dmTf9ppvfbXkgB6OiVog.png"/></div></div></figure><p id="7622" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章是我在 youtube 上免费发表的关于网络开发基础的系列文章的抄本。如果你更喜欢看而不是读，请随时访问我的频道“Dev Newbs”。T3】</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="ec3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好 devs！这一天的方法可以简单易用，但同时，它也可能是一个真正的背部疼痛。我们今天会更换物品。Meet 方法 replace()。让我们开始吧。</p><p id="cbfc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">replace()方法返回一个新的字符串，其中一个模式的部分或全部匹配被替换。模式是第一个参数，它可以是正则表达式或简单的字符串值。替换是第二个参数，它可以是一个简单的字符串值，也可以是为每个匹配调用的函数。如果模式是字符串值或者正则表达式不包含全局标志，则只替换第一个匹配项。</p><p id="7b2b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们涵盖第一个例子中的所有组合。</p><pre class="jp jq jr js fd jv jw jx jy aw jz bi"><span id="8f3c" class="ka kb hi jw b fi kc kd l ke kf">const str = "The blue sweater itches. I'll wear a red t-shirt and a blue jeans.";</span><span id="7ee8" class="ka kb hi jw b fi kg kd l ke kf">let regExp = /blue/g;<br/>let regExp2 = /blue|red/gi;</span><span id="b4cc" class="ka kb hi jw b fi kg kd l ke kf">// PATTERN:     string<br/>// REPLACEMENT: string<br/>"S  -&gt; S  : " + str.replace("blue", "green")      </span><span id="c42d" class="ka kb hi jw b fi kg kd l ke kf">// OUTPUT:<br/>// S  -&gt; S  : The green sweater itches. I'll wear a red t-shirt and // a blue jeans.</span><span id="2515" class="ka kb hi jw b fi kg kd l ke kf">// PATTERN:     RexExp<br/>// REPLACEMENT: string<br/>"RE -&gt; S  : " + str.replace(regExp, "green")</span><span id="504c" class="ka kb hi jw b fi kg kd l ke kf">// OUTPUT:<br/>// RE -&gt; S  : The green sweater itches. I'll wear a red t-shirt and // a green jeans.</span><span id="5466" class="ka kb hi jw b fi kg kd l ke kf">// PATTERN:     string<br/>// REPLACEMENT: function<br/>console.log<br/>(<br/>    "S  -&gt; fn : " +<br/>    str.replace<br/>    (<br/>        "sweater", <br/>        (x) =&gt; {<br/>            return x.toUpperCase()<br/>        }<br/>    )<br/>);</span><span id="7021" class="ka kb hi jw b fi kg kd l ke kf">// OUTPUT: <br/>// S  -&gt; fn : The blue SWEATER itches. I'll wear a red t-shirt and a // blue jeans.</span><span id="9218" class="ka kb hi jw b fi kg kd l ke kf">// PATTERN:     RexExp<br/>// REPLACEMENT: function<br/>console.log<br/>(<br/>    "RE -&gt; fn : " +<br/>    str.replace(<br/>        regExp2, <br/>        function (x) <br/>        {<br/>            return x.toUpperCase()<br/>        }<br/>    )<br/>);</span><span id="82d2" class="ka kb hi jw b fi kg kd l ke kf">// OUTPUT:<br/>// RE -&gt; fn : The BLUE sweater itches. I'll wear a RED t-shirt and a // BLUE jeans.</span></pre><p id="dcd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有四种可用的“模式”和“替换”类型值的组合。</p><p id="0cb8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一个是最简单的。我们正在寻找一个字符串“蓝色”并用字符串“绿色”替换它。第一个找到的字符串将被替换。不是全部。</p><p id="f585" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二种情况是使用正则表达式找到一个匹配项，用简单的字符串值“green”替换。因为我们在正则表达式中使用了全局标志，所以我们将替换所有的匹配，而不仅仅是第一个。</p><p id="46e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第三种情况是一个简单的字符串“毛衣”被一个函数代替。我们的函数将任何匹配转换为所有大写字符。因为我们使用一个简单的字符串作为模式，所以只替换第一个匹配。</p><p id="2f35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后一种情况——第四种情况——是正则表达式匹配被函数替换。我们再次使用了一个全局标志，所以我们找到了所有的匹配项，而不仅仅是第一个，我们将它们替换为匹配单词的大写形式。</p><p id="fcf1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将最后两种情况分成了多行，这样更容易阅读，但是如果您愿意，也可以将所有内容放在一行中。真的没什么区别。</p><p id="61be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以用 replace 方法做很多很酷的事情。我挑选了其中的一些，向你展示所有的可能性。</p><p id="8ecc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二个示例向您展示了如何轻松地切换名字和姓氏的顺序。如果你有一个名字的数组或列表，这真的很方便。</p><pre class="jp jq jr js fd jv jw jx jy aw jz bi"><span id="ff97" class="ka kb hi jw b fi kc kd l ke kf">let re = /(\w+)\s(\w+)/;<br/>let fullName = 'John Smith';<br/>let newstr = fullName.replace(re, '$2, $1');<br/>newstr                                              // Smith, John</span></pre><p id="086a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的正则表达式指定由空格分隔的两组字符。您可以使用美元符号和组的创建顺序来访问该组，从第一个开始。我们有两个组$1 和$2。First 表示名，第二个表示姓。我们需要做的就是改变它们在输出中的顺序。</p><p id="0f74" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您需要在 CSS 样式和 JS 样式参数之间进行解析，下一个技巧会派上用场。Javascript 允许您使用 style 方法来设置元素的样式，但是它接受 camelcase 格式的 CSS 样式，而不是连字符格式。因此，如果您想更改左填充值，您应该键入“paddingLeft”而不是“padding-left”。幸运的是，借助 replace()方法，有一种简单的方法可以将 camelcase 格式转换为连字符格式。</p><pre class="jp jq jr js fd jv jw jx jy aw jz bi"><span id="9843" class="ka kb hi jw b fi kc kd l ke kf">function upperToHyphenLower(match, offset, string) {<br/>    return (offset &gt; 0 ? '-' : '') + match.toLowerCase();<br/>}</span><span id="25d0" class="ka kb hi jw b fi kg kd l ke kf">function camelCaseToHyphenFormat(propertyName) {<br/>    return propertyName.replace(/[A-Z]/g, upperToHyphenLower);<br/>}</span><span id="ef58" class="ka kb hi jw b fi kg kd l ke kf">camelCaseToHyphenFormat("marginBottom")         // margin-bottom</span></pre><p id="4915" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转换的整个原理是我们在给定的字符串中寻找大写字母。如果我们找到一个，我们不仅用它的小写版本替换它，还用连字符作为前缀。仅此而已。</p><p id="c17b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后一个技巧可以将温度的物理单位从华氏温度转换为摄氏温度。我稍微调整了函数的原始版本，使其接受值，即使数字和表示华氏温度的字母 F 之间有空格。它还将结果数字和摄氏度之间的空间。</p><pre class="jp jq jr js fd jv jw jx jy aw jz bi"><span id="16f7" class="ka kb hi jw b fi kc kd l ke kf">function f2c(x) {<br/>    function convert(str, p1, offset, s) {<br/>      return ((p1 - 32) * 5/9).toFixed(2) + ' C';<br/>    }<br/>    let s = String(x);<br/>    let test = /(-?\d+(?:\.\d*)?)( )*F\b/g;<br/>    return s.replace(test, convert);<br/>  }</span><span id="d848" class="ka kb hi jw b fi kg kd l ke kf">f2c("212 F")                                          // 100.00 C<br/>f2c("0F")                                             // -17.78 C</span></pre><p id="0d79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以简单地通过提供后跟字母“F”的任何数值来调用该方法。结果是相同的摄氏温度。</p><p id="604e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧，这真的很有趣，但是天下没有不散的宴席。今天就这样了。一如既往，感谢您的关注，我们下次再以另一种方式见面。</p></div></div>    
</body>
</html>