<html>
<head>
<title>Building Web Applications to run Docker and Kubernetes commands</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建 Web 应用程序来运行 Docker 和 Kubernetes 命令</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/building-web-applications-to-run-docker-and-kubernetes-commands-26e5716e8a7f?source=collection_archive---------12-----------------------#2021-06-29">https://medium.com/nerd-for-tech/building-web-applications-to-run-docker-and-kubernetes-commands-26e5716e8a7f?source=collection_archive---------12-----------------------#2021-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/fc4a10c96d3ec2ad15900d31158c11e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lNQkCKx83sVAXV-uEcUg3A.jpeg"/></div></div></figure></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="24ab" class="iy iz hi bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated">JavaScript 是什么？</h1><p id="ae69" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">JavaScript(或“JS”)是一种编程语言，最常用于网页上的动态客户端脚本，但它也常用于服务器端，使用 Node.js 等运行时。</p><p id="c251" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">JavaScript <strong class="jy hj">不应该和 Java 编程语言</strong>混淆。虽然<em class="kz">“Java”</em>和<em class="kz">“JavaScript”</em>是甲骨文在美国和其他国家的商标(或注册商标)，但这两种编程语言在语法、语义和用例上有很大不同。</p><p id="a741" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">JavaScript 主要用于浏览器，使开发人员能够通过 DOM 操纵网页内容，使用 AJAX 和 IndexedDB 操纵数据，使用 canvas 绘制图形，通过各种 API 与运行浏览器的设备进行交互，等等。JavaScript 是世界上最常用的语言之一，这要归功于浏览器中可用的 API 最近的增长和性能改进。</p><h1 id="ef64" class="iy iz hi bd ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr le jt ju jv bi translated">什么是 AJAX？</h1><p id="c7f9" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">Ajax 代表<strong class="jy hj"> A </strong>同步<strong class="jy hj">J</strong>avascript<strong class="jy hj">A</strong>nd<strong class="jy hj">X</strong>ml。Ajax 只是一种从服务器加载数据和有选择地更新网页的一部分而不需要重新加载整个页面的方法。</p><p id="4445" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">基本上，Ajax 所做的是利用浏览器内置的<code class="du lf lg lh li b">XMLHttpRequest</code> (XHR)对象在后台与 web 服务器异步发送和接收信息，而不会阻塞页面或干扰用户体验。</p><p id="b858" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">Ajax 变得如此流行，以至于你几乎找不到一个在某种程度上不使用 Ajax 的应用程序。一些大型 Ajax 驱动的在线应用程序的例子有:Gmail、Google Maps、Google Docs、YouTube、脸书、Flickr 等等许多其他应用程序。</p><blockquote class="lj lk ll"><p id="816d" class="jw jx kz jy b jz ku kb kc kd kv kf kg lm kw kj kk ln kx kn ko lo ky kr ks kt hb bi translated"><strong class="jy hj">注意:</strong> Ajax 并不是一项新技术，事实上，Ajax 甚至根本就不是真正的技术。Ajax 只是一个术语，用来描述通过 JavaScript 从 web 服务器异步交换数据的过程，不需要刷新页面。</p></blockquote><h1 id="4e3e" class="iy iz hi bd ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr le jt ju jv bi translated">什么是 CGI？</h1><p id="7e50" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">CGI 是通用网关接口支持的缩写。CGI 脚本由 HTTP 服务器调用，通常用于处理通过 HTML <code class="du lf lg lh li b">&lt;FORM&gt;</code>或<code class="du lf lg lh li b">&lt;ISINDEX&gt;</code>元素提交的用户输入。</p><p id="4f61" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">大多数情况下，CGI 脚本位于服务器的特殊<code class="du lf lg lh li b">cgi-bin</code>目录中。HTTP 服务器将关于请求的各种信息(例如客户机的主机名、请求的 URL、查询字符串和许多其他内容)放在脚本的 shell 环境中，执行脚本，并将脚本的输出发送回客户机。</p><p id="910b" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">脚本的输入也连接到客户端，有时表单数据是这样读取的；在其他时候，表单数据通过 URL 的“查询字符串”部分传递。该模块旨在处理不同的情况，并为 Python 脚本提供更简单的接口。它还提供了许多有助于调试脚本的实用程序，最新的功能是支持从表单上传文件(如果您的浏览器支持的话)。</p><h1 id="ad46" class="iy iz hi bd ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr le jt ju jv bi translated">我们要把上述概念结合起来吗？</h1><blockquote class="lp"><p id="df66" class="lq lr hi bd ls lt lu lv lw lx ly kt dx translated">答案是<strong class="ak">是的！</strong></p></blockquote><p id="71d3" class="pw-post-body-paragraph jw jx hi jy b jz lz kb kc kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt hb bi translated">我们将利用上述概念以及 HTML 和 CSS 来制作一个 web 应用程序，它可以在浏览器中运行 Docker 和 Kubernetes 命令，并且您可以在屏幕上看到输出。</p><p id="9e8f" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated"><strong class="jy hj">先决条件:</strong></p><ul class=""><li id="c18c" class="me mf hi jy b jz ku kd kv kh mg kl mh kp mi kt mj mk ml mm bi translated">HTML/CSS/JavaScript/Python 的基础知识</li><li id="7913" class="me mf hi jy b jz mn kd mo kh mp kl mq kp mr kt mj mk ml mm bi translated">Linux 操作系统</li><li id="bfb3" class="me mf hi jy b jz mn kd mo kh mp kl mq kp mr kt mj mk ml mm bi translated">在 Linux 中配置的 web 服务器</li><li id="ed97" class="me mf hi jy b jz mn kd mo kh mp kl mq kp mr kt mj mk ml mm bi translated">安装在 Linux 中的 Docker</li><li id="982f" class="me mf hi jy b jz mn kd mo kh mp kl mq kp mr kt mj mk ml mm bi translated">Kubernetes 已配置</li></ul><blockquote class="lp"><p id="1d47" class="lq lr hi bd ls lt ms mt mu mv mw kt dx translated">让我们先来构建 Docker 命令的 web 应用程序！</p></blockquote><p id="294b" class="pw-post-body-paragraph jw jx hi jy b jz lz kb kc kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt hb bi translated">前端可以根据您自己的喜好来构建，我们将更多地关注 JavaScript 和 CGI 部分。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mx"><img src="../Images/46919d1282f744079cef1c14c23fa9b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*5wN71a1dP6xi5gojPepveA.png"/></div></figure><p id="1a14" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">在上面的代码片段中，JavaScript 代码将从输入框中获取具有以下 id 的值(本例中为“l1”)。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es my"><img src="../Images/9eddfc5c5b16caff09412161e5daa3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScHx_J2g1M5CAy8xBzuSGw.png"/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mz"><img src="../Images/8c8bb8a76ee6caf2b8e74028561f5d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MmI9T5yl3mK2XO4aRWSuzg.png"/></div></div></figure><p id="d0a5" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">这部分代码通过输入框获取用户的输入，并将输入发送到位于<strong class="jy hj"> cgi-bin </strong>目录中的 python 脚本。</p><pre class="in io ip iq fd na li nb nc aw nd bi"><span id="337d" class="ne iz hi li b fi nf ng l nh ni">import cgi<br/>import subprocess<br/>import time <br/><br/>print("context-type: text/html")<br/>f=cgi.FieldStorage()<br/>cmd=f.getvalue("x")<br/>#print(cmd)<br/><br/>o = subprocess.getoutput("sudo " +cmd)<br/><br/>print(o)</span></pre><p id="bed7" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">所以这个 cgi 程序将从服务器获得输入，并在浏览器中运行命令。</p><p id="5eee" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated"><strong class="jy hj">子流程</strong>是一个库，用于通过 python 代码创建流程来运行新的应用程序或程序。</p><p id="2219" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">下一步是启动服务器，在浏览器中打开网页，并在浏览器中运行 docker 命令。</p><p id="a604" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">因此，Docker Web 应用程序已经可以使用了！</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><blockquote class="lp"><p id="d56f" class="lq lr hi bd ls lt lu lv lw lx ly kt dx translated">现在让我们继续为 Kubernetes 命令构建 web 应用程序！</p></blockquote><p id="27e9" class="pw-post-body-paragraph jw jx hi jy b jz lz kb kc kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt hb bi translated">类似地，Web 应用程序可以在浏览器中运行 Kubernetes 命令，以普通的英语口语而不是特定的命令进行输入，然后处理该查询并相应地显示输出。同样，您可以根据自己的需要为 web 应用程序开发自己的前端，JavaScript 代码与上一个类似，只是有一些小的变化。</p><p id="9a70" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">由于 Docker 和 Kubernetes 命令之间的明显差异，这里的 CGI 略有不同。这里的 admin.conf 文件是 Kubernetes 的配置文件，它将有助于在 Linux 中运行 Kubernetes。</p><pre class="in io ip iq fd na li nb nc aw nd bi"><span id="dd74" class="ne iz hi li b fi nf ng l nh ni">import cgi<br/>import subprocess as sp<br/>import time<br/><br/>print("context-type: text/html")<br/>print()<br/>f=cgi.FieldStorage()<br/>query = f.getvalue("x")<br/>if "show pods" in query:<br/>    cmd = "kubectl get pods --kubeconfig admin.conf"<br/>    o=sp.getoutput(cmd)<br/>    print(o)<br/>elif "show deployment" in query:<br/>    cmd = "kubectl get deployments --kubeconfig admin.conf"<br/>    o = sp.getoutput(cmd)<br/>    print(o)</span></pre><p id="847f" class="pw-post-body-paragraph jw jx hi jy b jz ku kb kc kd kv kf kg kh kw kj kk kl kx kn ko kp ky kr ks kt hb bi translated">因此，通过遵循上述步骤，我们可以构建所需的 web 应用程序。</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h2 id="2c2d" class="ne iz hi bd ja nj nk nl je nm nn no ji kh np nq jm kl nr ns jq kp nt nu ju nv bi translated">供参考:</h2><ul class=""><li id="ac6d" class="me mf hi jy b jz ka kd ke kh nw kl nx kp ny kt mj mk ml mm bi translated">Docker Web 应用程序的 GitHub 存储库链接:<a class="ae nz" href="https://github.com/AmimaShifa/JavaScript-Integration-with-Docker" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/AmimaShifa/JavaScript-Integration-with-Docker</a></li><li id="f06d" class="me mf hi jy b jz mn kd mo kh mp kl mq kp mr kt mj mk ml mm bi translated">Kubernetes Web 应用程序的 GitHub 存储库链接:<a class="ae nz" href="https://github.com/AmimaShifa/Web-Application-for-Kubernetes-Commands" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/AmimaShifa/Web-Application-for-Kubernetes-Commands</a></li></ul></div></div>    
</body>
</html>