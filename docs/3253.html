<html>
<head>
<title>Cross Site Request Forgery Attack: How to prevent it?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跨站点请求伪造攻击:如何防范？</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/cross-site-request-forgery-attack-how-to-prevent-it-ff4c4ad97346?source=collection_archive---------14-----------------------#2021-06-03">https://medium.com/nerd-for-tech/cross-site-request-forgery-attack-how-to-prevent-it-ff4c4ad97346?source=collection_archive---------14-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8cc3ada7e847e7495995418b9b45cb91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ynaAOsb4H2Nr6b8usTlu7Q.jpeg"/></div></div></figure><p id="f4e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">脚本攻击是全球数千家企业和网站面临的主要安全问题。此外，跨站点脚本攻击是所有脚本攻击的主要原因。</p><p id="a125" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">面对如此大的损失和高额的财务损失，每个开发者和网站管理者都希望防止交叉脚本攻击。但是为了防止一种邪恶，我们完全忽略了另一种邪恶——跨站请求伪造攻击。</p><p id="cc60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇博文中，我们将看看什么是跨站点请求伪造(CSRF)攻击，并了解它是如何进行的。我们还将研究防止这些攻击的方法。</p><p id="ba61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目录</strong></p><ol class=""><li id="2872" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">什么是跨站伪造攻击？</li><li id="1256" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">攻击者通常如何进行跨站请求伪造攻击？</li><li id="263c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">如何防止跨站请求伪造攻击？</li><li id="7007" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">裁决。</li></ol><h1 id="68af" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是跨站伪造攻击？</h1><p id="1ea2" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">使用跨站点请求伪造的攻击者试图欺骗用户向信任该用户的网站发送恶意请求。这是可能的，因为这些网站由于cookies而信任用户的浏览器。攻击的目标是使用您的身份cookie来执行请求。</p><p id="4077" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，您登录到您的脸书帐户。然后，脸书在你的浏览器中设置一个cookie来识别你的身份。攻击者现在可以诱骗您向脸书发送请求。这种请求可能只是向成千上万的用户发送消息，宣传一个恶意网站。跨站点请求伪造攻击使用用户的浏览器向所有信任该用户的网站发送恶意请求。</p><p id="3ca2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在考虑另一个例子。</p><p id="f187" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设你正在随意浏览Instagram。你看到一个关于猫的帖子，然后点击它。你喜欢这个帖子，然后点击这个简介。在个人资料上，你会看到简历中的链接。上面写着“点击这里查看更多猫的图片”，你显然点击了它。</p><p id="ddda" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击链接后，没有猫的图片，只有一只狗。你对自己说“这很奇怪”。你很自然地点击了‘返回’按钮，然后意识到你的Instagram个人资料已经被删除了！</p><p id="0610" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">事情可能是这样的:简历中的链接伪造了一个“删除请求”，并发到了你的Instagram账户上。此请求是使用在您的web浏览器中下载的相同cookies处理的。现在你的Instagram账户已经被删除了。</p><p id="8dad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您刚刚成为跨站点请求伪造攻击的一部分。</p><h1 id="d66a" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">攻击者通常如何执行跨站点请求伪造攻击？</h1><p id="51cf" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">攻击者使用网络钓鱼电子邮件或信息引诱用户进入他们的网站。这些网络钓鱼攻击最常见的方法是使用激活跨站点请求伪造攻击的web链接。</p><p id="bfa2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是他们如何让这些用户点击这个链接呢？</p><p id="43d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是我们在上一节中提到的网络钓鱼电子邮件和信息发挥作用的地方。这些信息用“免费赠品”或“折扣”来吸引用户购买他们喜欢的东西。一旦用户点击这个链接，跨站请求就实现了。</p><p id="0bb4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该请求将被转发到目标网站，并且目标动作将被完成。例如，一些攻击可能会从您自己的帐户中推广某些内容。或者它可以用来向其他访问者和用户发送链接和请求。成功执行跨站点请求伪造攻击的可能性是无限的。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/8e40030d3fdd9e54f12de69dcb15e1ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kqU8opdQNzyLdkHF"/></div></div></figure><h1 id="0f1a" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">如何防止跨站请求伪造攻击？</h1><p id="fb0c" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">我们将从这个问题的一个更简单的解决方案开始——检查传入的请求是否有referrer头。这将防止从第三方域和恶意网站发送请求。然而，由于两个原因，这种方法不是优选的。</p><ol class=""><li id="913e" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">一些用户可能会在他们的浏览器中禁用他们的推荐人标题。</li><li id="6771" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">一些攻击者可以在某些版本的Adobe Flash上创建虚假版本的引用标头。</li></ol><p id="59d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有第二种方法来防止CSRF攻击——使用反CSRF令牌。这不仅是一个更常用的解决方案，也是一个非常有效的解决方案。它是用户和特定web应用程序之间共享的随机令牌(一串值)。反CSRF令牌总是隐藏在会话变量中，只能由应用程序来验证。</p><p id="e4ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们考虑同一个Instagram例子。有了反CSRF令牌，你的账户就不会被删除。当您登录到应用程序时，这个令牌将与您的cookies共享。每当您试图从该应用程序获取请求时。它将根据与您的web浏览器共享的会话变量检查令牌的值。如果它们匹配，则请求被满足。如果它们不匹配，则请求不被满足。</p><p id="6ccc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">发起CSRF攻击的攻击者如果找不到令牌的价值，就没有机会。在大多数情况下，不可能找到这种代码，所以攻击永远不会结束。由于系统中的同源策略，攻击者甚至无法读取应用程序生成的包含令牌的响应。</p><h1 id="b83f" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">裁决</h1><p id="d8a7" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">现在，您已经了解了CSRF袭击的全部内容以及防范方法，是时候开始行动了。在您的应用程序中使用它来避免CSRF攻击，并为您的用户提供额外的安全层。</p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><p id="77d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lr">原载于</em><a class="ae ls" href="https://www.partech.nl/nl/publicaties/2021/05/cross-site-request-forgery-attack-how-to-prevent-it" rel="noopener ugc nofollow" target="_blank"><em class="lr">https://www . partech . nl</em></a><em class="lr">。</em></p></div></div>    
</body>
</html>