<html>
<head>
<title>How to send an e-mail in Django?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Django发送电子邮件？</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-send-e-mail-in-django-20d6f6558f01?source=collection_archive---------1-----------------------#2021-06-25">https://medium.com/nerd-for-tech/how-to-send-e-mail-in-django-20d6f6558f01?source=collection_archive---------1-----------------------#2021-06-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b783c77e1e6778f77666f2789a299e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M11sIQCylpzskURyR_uz8Q.png"/></div></div></figure><p id="7c47" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在django中，我们可以使用<strong class="is hj"> SMTP(简单邮件传输协议)</strong>服务发送电子邮件，这是python和django中内置的包。</p><h1 id="04d1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">什么是smtp？</h1><ul class=""><li id="784e" class="km kn hi is b it ko ix kp jb kq jf kr jj ks jn kt ku kv kw bi translated"><strong class="is hj"> <em class="kx"> SMTP(简单邮件传输协议)</em> </strong>是在发送方和接收方之间提供<strong class="is hj">发送、接收和<em class="kx">或</em>中继外发邮件</strong>的服务。</li><li id="7bb9" class="km kn hi is b it ky ix kz jb la jf lb jj lc jn kt ku kv kw bi translated">SMTP服务获取您正在使用的客户端电子邮件地址(您也可以给出多个电子邮件地址),并将其格式化为smtp.gmail.com，因为我们以Gmail的SMTP服务器地址为例，它的地址是smtp.gmail.com，而Twilio Send Grids的地址是smtp.sendgrid.com。您通常可以在邮件客户端的“帐户”或“设置”部分找到您的SMTP服务器地址。</li></ul><h1 id="987c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Django电子邮件发送设置</h1><p id="d721" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated"><strong class="is hj">步骤1 </strong> →创建一个文件夹，命名为django_email</p><p id="16e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤2 </strong> →使用下面的命令<code class="du lg lh li lj b">django-admin startproject emails .</code>创建django项目</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/0d88f6a5bccfdf4aac430ec9fa204de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*3UWPS8Jnd4XQttMW56mr5Q.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">创建项目后的目录预览</figcaption></figure><p id="a6cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤3 </strong> →在上述步骤创建的项目中创建django应用程序，并使用命令<code class="du lg lh li lj b">python manage.py startapp main</code></p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/fff394b6d09fb85925109e6dbc91cdef.png" data-original-src="https://miro.medium.com/v2/resize:fit:412/format:webp/1*WxJUmZoBIpT6GfUmw6s41w.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">在项目中创建应用程序后查看目录</figcaption></figure><p id="9a92" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤4 </strong> →现在在settings.py中安装app，这个文件会在emails文件夹<br/>目录预览中</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/094f190ef6f6bc2a5f50245e4c7533ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*llSwu8V3xgWrjPngfnISpg.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">在django安装应用程序</figcaption></figure><p id="e797" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤5 </strong> →现在您需要使用<br/>命令<code class="du lg lh li lj b">python manage.py migrate</code>来迁移项目</p><p id="2b24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第六步</strong> →进入<em class="kx"> settings.py </em>底部，在静态变量下写代码。</p><pre class="ll lm ln lo fd lv lj lw lx aw ly bi"><span id="7ce2" class="lz jp hi lj b fi ma mb l mc md">EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'<br/>EMAIL_HOST = 'smtp.gmail.com'<br/>EMAIL_HOST_USER = 'gmail account email id'<br/>EMAIL_HOST_PASSWORD = 'Your gmail password'<br/>EMAIL_USE_TLS = True<br/>EMAIL_PORT = 587</span></pre><p id="c7e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在变量<code class="du lg lh li lj b">EMAIL_HOST_USER</code>中，您需要填写电子邮件id，该id具有<strong class="is hj">两步验证关闭</strong>，因为我们需要对您的电子邮件帐户进行一些设置更改。在变量<code class="du lg lh li lj b">EMAIL_HOST_PASSWORD</code>中，你需要写下你的电子邮件账户密码。</p><p id="b8a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第7步</strong> →现在打开你最喜欢的浏览器，按照以下步骤操作</p><ul class=""><li id="6cf5" class="km kn hi is b it iu ix iy jb me jf mf jj mg jn kt ku kv kw bi translated">进入选项<strong class="is hj">账户</strong></li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/62281e5818b17e17e1b675aa08a044f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*K_xNOLGWXrTC63KOc7JNTA.jpeg"/></div></figure><ul class=""><li id="44ce" class="km kn hi is b it iu ix iy jb me jf mf jj mg jn kt ku kv kw bi translated">进入选项<strong class="is hj">安全</strong>，搜索<strong class="is hj"> <em class="kx">不太安全的应用程序访问</em> </strong>，打开<strong class="is hj"/>，因为如果你不打开它，django将无法发送邮件。</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/b4e4335b76d1549b7dfd6eeb4117fa79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BikISq7nBIq7zZVgjKAdmQ.png"/></div></div></figure><p id="76b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤8 </strong> →现在在<strong class="is hj">邮件文件夹</strong>中创建<strong class="is hj"> form.py </strong>文件，并在代码下面编写代码</p><p id="dad5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">form.py</p><pre class="ll lm ln lo fd lv lj lw lx aw ly bi"><span id="44ab" class="lz jp hi lj b fi ma mb l mc md">from django import forms<br/><br/>class ContactMeForm(forms.Form):<br/>    first_name = forms.CharField(widget=forms.TextInput(attrs={'class':'form-control', 'placeholder':'Enter first name'}), required=True)<br/>    last_name = forms.CharField(widget=forms.TextInput(attrs={'class':'form-control', 'placeholder':'Enter last name'}), required=True)<br/>    emailid = forms.EmailField(widget=forms.TextInput(attrs={'class':'form-control', 'placeholder':'Enter email id'}), required=True)<br/>    phone_number = forms.CharField(widget=forms.TextInput(attrs={'class':'form-control', 'placeholder':'Enter phone number'}))<br/>    subject = forms.CharField(widget=forms.TextInput(attrs={'class':'form-control', 'placeholder':'Enter subject'}), required=True)<br/>    message = forms.CharField(widget=forms.Textarea(attrs={'class':'form-control', 'placeholder':'Enter Message'}), required=True)</span></pre><p id="5962" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第9步</strong> →现在进入views.py文件并编写以下代码</p><p id="34e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">views.py</p><pre class="ll lm ln lo fd lv lj lw lx aw ly bi"><span id="5513" class="lz jp hi lj b fi ma mb l mc md">from django.shortcuts import render<br/>from main.form import ContactMeForm<br/>from django.core.mail import send_mail, BadHeaderError<br/>from django.http import HttpResponse<br/>from django.contrib import messages</span><span id="1e72" class="lz jp hi lj b fi mj mb l mc md">def home(request):<br/>    form = ContactMeForm()</span><span id="c4da" class="lz jp hi lj b fi mj mb l mc md">    if request.method == 'POST':<br/>        form = ContactMeForm(request.POST)<br/>        if form.is_valid():<br/>            # form.save()<br/>            # send_mail(subject, message[fname, lname, email, phonenumber, subject, message], sedner, recipient)</span><span id="1944" class="lz jp hi lj b fi mj mb l mc md">            subject = "Contact form inquiry"<br/>            body = {<br/>                'first_name': form.cleaned_data['first_name'],<br/>                'last_name':form.cleaned_data['last_name'],<br/>                'email': form.cleaned_data['emailid'],<br/>                'phonenumber': form.cleaned_data['phone_number'],<br/>                'subject': form.cleaned_data['subject'],<br/>                'message': form.cleaned_data['message'],<br/>            }</span><span id="cdb7" class="lz jp hi lj b fi mj mb l mc md">            message = '\n'.join(body.values())</span><span id="751a" class="lz jp hi lj b fi mj mb l mc md">            sender = form.cleaned_data['emailid']<br/>            recipient = ['gameforyash@gmail.com']</span><span id="3023" class="lz jp hi lj b fi mj mb l mc md">            try:<br/>                send_mail(subject, message, sender, recipient, fail_silently=True)</span><span id="f589" class="lz jp hi lj b fi mj mb l mc md">            except BadHeaderError:<br/>                return HttpResponse("Invalid header found.")</span><span id="d094" class="lz jp hi lj b fi mj mb l mc md">            messages.success(request, "Your respoce has been submited successfully")<br/>    context = {<br/>        'form':form,<br/>    }<br/>    return render(request, "home/index.html", context)</span></pre><p id="3ece" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤10 </strong> →现在在主文件夹<br/>目录预览中创建urls.py文件</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/84c880f039804d83d75f5de397daf893.png" data-original-src="https://miro.medium.com/v2/resize:fit:430/format:webp/0*elibQdmQzX0uCN0s.png"/></div></figure><p id="e6b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第11步</strong> →打开主文件夹中创建的<strong class="is hj"> urls.py </strong>，写下下面的代码</p><pre class="ll lm ln lo fd lv lj lw lx aw ly bi"><span id="fb7a" class="lz jp hi lj b fi ma mb l mc md">from django.urls import path<br/>from main import views</span><span id="0d6f" class="lz jp hi lj b fi mj mb l mc md">urlpatterns = [<br/>    path('', views.home, name="home"),<br/>]</span></pre><p id="e37e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤12 </strong> →现在将主文件夹中创建的<strong class="is hj"> urls.py </strong>注册到<strong class="is hj"> emails &gt; url.py </strong>中，如下图所示</p><pre class="ll lm ln lo fd lv lj lw lx aw ly bi"><span id="e86d" class="lz jp hi lj b fi ma mb l mc md">from django.contrib import admin<br/>from django.urls import path, include</span><span id="2435" class="lz jp hi lj b fi mj mb l mc md">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', include('main.urls'))<br/>]</span></pre><p id="e44d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤13 </strong> →现在在主文件夹中创建模板文件夹，在模板文件夹中创建主文件夹，在主文件夹中创建index.html</p><p id="2ad8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">有些事情是这样的</strong> <code class="du lg lh li lj b"><strong class="is hj">main&gt;templates&gt;home&gt;index.html</strong></code> <br/>目录预览</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="ab fe cl ml"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="345a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第14步</strong> →打开<strong class="is hj">index.html</strong>并编写以下代码</p><pre class="ll lm ln lo fd lv lj lw lx aw ly bi"><span id="0d67" class="lz jp hi lj b fi ma mb l mc md">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;</span><span id="2efd" class="lz jp hi lj b fi mj mb l mc md">    &lt;head&gt;<br/>        &lt;meta charset="UTF-8"&gt;<br/>        &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>        &lt;title&gt;Document&lt;/title&gt;<br/>        &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"<br/>            integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous"&gt;<br/>        &lt;style&gt;<br/>            .marg {<br/>                margin: 20%;<br/>            }<br/>        &lt;/style&gt;<br/>    &lt;/head&gt;</span><span id="807b" class="lz jp hi lj b fi mj mb l mc md">    &lt;body&gt;<br/>        &lt;dev class="marg"&gt;<br/>            &lt;form class="form-contact contact_form container" action="{% url 'home' %}" method="post" id="contactForm"<br/>                novalidate="novalidate"&gt;<br/>                &lt;h1&gt;Contact us form&lt;/h1&gt;<br/>                {% csrf_token %}<br/>                &lt;div class="row"&gt;<br/>                    &lt;div class="col-sm-6"&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="first_name"&gt;Enter first name&lt;/label&gt;<br/>                            {{ form.first_name }}<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;</span><span id="5ba3" class="lz jp hi lj b fi mj mb l mc md">                    &lt;div class="col-sm-6"&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="last_name"&gt;Enter last name&lt;/label&gt;<br/>                            {{ form.last_name }}<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;</span><span id="b375" class="lz jp hi lj b fi mj mb l mc md">                    &lt;div class="col-6"&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="email"&gt;Enter Email id&lt;/label&gt;<br/>                            {{ form.emailid }}<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;</span><span id="51ba" class="lz jp hi lj b fi mj mb l mc md">                    &lt;div class="col-6"&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="phone_number"&gt;Enter phone number&lt;/label&gt;<br/>                            {{form.phone_number}}<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;</span><span id="f4ee" class="lz jp hi lj b fi mj mb l mc md">                    &lt;div class="col-12"&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="subject"&gt;Subject&lt;/label&gt;<br/>                            {{form.subject}}<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;</span><span id="cd5a" class="lz jp hi lj b fi mj mb l mc md">                    &lt;div class="col-12"&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="Message"&gt;Enter Message&lt;/label&gt;<br/>                            {{form.message}}<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>                &lt;div class="form-group mt-lg-3"&gt;<br/>                    &lt;button type="submit" class="btn btn-outline-success"&gt;Send Message&lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/form&gt;<br/>        &lt;/dev&gt;</span><span id="2eee" class="lz jp hi lj b fi mj mb l mc md">        &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"<br/>            integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"<br/>            crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;/body&gt;</span><span id="0dc3" class="lz jp hi lj b fi mj mb l mc md">&lt;/html&gt;</span></pre><p id="0c21" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤15 </strong> →现在使用命令<code class="du lg lh li lj b">python manage.py runserver</code>启动你的django服务器</p><p id="d385" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第16步</strong> →填写数据，点击提交按钮，查看您的邮件信箱，您必须查看邮件</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/318820e66597b0a5174319ca94ae7281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*f3saWv5DAPL1GaPP.png"/></div></div></figure><p id="2da5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">邮件已收到</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/34dee94a4cb40729c0e5eb5ed4455629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B5UDmrfz10QZNXZb.png"/></div></div></figure><p id="622c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这个django邮件发送教程，那么请喜欢这个博客，如果你有任何疑问，请在讨论框中告诉我。 </p></div></div>    
</body>
</html>