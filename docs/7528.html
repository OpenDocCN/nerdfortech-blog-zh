<html>
<head>
<title>Terraform Modules 101: Create, version, and publish on GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Terraform 模块 101:在 GitHub 上创建、版本化和发布</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/terraform-modules-101-create-version-and-publish-on-github-4455f3673559?source=collection_archive---------0-----------------------#2022-11-23">https://medium.com/nerd-for-tech/terraform-modules-101-create-version-and-publish-on-github-4455f3673559?source=collection_archive---------0-----------------------#2022-11-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ff1d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">关于如何创建和使用自定义 terraform 模块并将其发布到 GitHub 的教程</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6ef32b84c7d1be33378a5d142292fb5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mYeKy7WYpEDlGx7vkr72IQ.png"/></div></div></figure><p id="0d1f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这篇文章中，我将使用 terraform 最佳实践演示如何从一个样本配置创建一个可重用的 terraform 模块，并在 GitHub 上发布一个版本，之后我们将创建一个根模块来使用它。尽管将使用一个场景来介绍这一点，但实际上相同的原理可以应用于大多数场景。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="10df" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">什么是 Terraform 模块？<br/> </strong>一个 Terraform 模块是几个一起使用的资源的分组。Terraform 模块类似于编程中的函数，因为在创建之后，它们可以在代码中的任何地方重用。由一个或多个 terraform 配置文件组成的目录是一个模块。</p><p id="90d7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">就像编程中的函数一样，它使用输入变量接受输入参数，并可以使用输出变量返回值。运行<code class="du km kn ko kp b">terraform apply</code>的目录也是一个模块，叫做根模块。您可以将模块发布到注册中心，如 Terraform 注册中心或版本控制系统。支持的信号源列表可在<a class="ae kq" href="https://developer.hashicorp.com/terraform/language/modules/sources" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="33f5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">我为什么要创建版本化模块？当您在不同的环境中使用相同的模块时，版本化的模块特别有用。例如，在您的 prod 环境中，您可以使用一个模块的旧版本(<em class="kr">例如 v1.0.0 </em>)并在您的 dev 环境中安全地测试同一个模块的新版本(<em class="kr">例如 v2.0.0 </em>)。如果没有版本控制，测试新的模块版本会很困难。</strong></p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="8316" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">场景<br/> </strong>您已经获得了下面的地形配置，该配置用于创建一个 AWS <a class="ae kq" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteHosting.html" rel="noopener ugc nofollow" target="_blank"> S3 桶来托管一个静态网站</a>。任务是使它成为一个可重用的模块，并将其发布到您组织内的一个新的 GitHub 存储库中。您还需要将环境名称作为后缀添加到创建的任何 S3 存储桶中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="d56a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">解决方案</strong> <br/>转换上述配置文件将遵循以下步骤:<br/> - <a class="ae kq" href="#acdc" rel="noopener ugc nofollow">创建标准模块目录结构</a>-<a class="ae kq" href="#b212" rel="noopener ugc nofollow">编写 Testform 配置即版本、输入、输出变量等</a>-<br/>-<a class="ae kq" href="#4484" rel="noopener ugc nofollow">创建 GitHub 库，推送文件并创建 GitHub 版本</a> <br/> - <a class="ae kq" href="#f790" rel="noopener ugc nofollow">创建根模块以使用 GitHub 模块作为源</a> <br/> - <a class="ae kq" href="#40f0" rel="noopener ugc nofollow">测试并应用 terra</a></p><p id="7dd7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">要求</strong><br/>——terra form、AWS IAM、S3 的基础知识。<br/> - <a class="ae kq" href="https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli" rel="noopener ugc nofollow" target="_blank">安装 Terraform CLI </a> (1.1+)。<br/> -一个<a class="ae kq" href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;awsf.Free%20Tier%20Categories=*all" rel="noopener ugc nofollow" target="_blank"> AWS 帐户</a>和一个具有管理权限的 IAM 用户。<br/> - <a class="ae kq" href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" rel="noopener ugc nofollow" target="_blank">安装 AWS CLI </a> (2.0+)并配置访问键。<br/> - <a class="ae kq" href="https://docs.github.com/en/get-started/signing-up-for-github/signing-up-for-a-new-github-account" rel="noopener ugc nofollow" target="_blank"> GitHub 账号</a></p><p id="9031" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你可以在我的 GitHub 库<a class="ae kq" href="https://github.com/yemisprojects/s3_website_module_demo" rel="noopener ugc nofollow" target="_blank">这里</a>找到完整的演示模块。</p><p id="ae1e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="kr">我们开始吧！</em>🍿</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><ol class=""><li id="acdc" class="ku kv hi jl b jm jn jp jq js kw jw kx ka ky ke kz la lb lc bi translated"><a class="ae kq" href="#d56a" rel="noopener ugc nofollow"> <strong class="jl hj">创建一个标准的模块目录结构</strong> </a> <strong class="jl hj"> <br/> </strong>一个要分布在单独存储库中的地形模块应该使用下面的<a class="ae kq" href="https://developer.hashicorp.com/terraform/language/modules/develop/structure" rel="noopener ugc nofollow" target="_blank">标准模块结构</a>。建议将可重用模块放在它们自己的存储库的根目录下。因此，在本地目录的根目录下创建以下文件。</li></ol><pre class="iy iz ja jb fd ld kp le bn lf lg bi"><span id="021b" class="lh li hi kp b be lj lk l ll lm">$ tree module_directory/<br/>.<br/>├── README.md   <br/>├── main.tf<br/>├── variables.tf<br/>├── outputs.tf<br/>├── LICENSE         #optional<br/>└── versions.tf     </span></pre><p id="8f08" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">文件应该描述模块的用途，包括模块的输入或输出，以及它可以创建什么资源。上面的<code class="du km kn ko kp b">.tf</code>文件名是推荐的并被广泛使用，但不是强制性的。如果你要发布一个模块，建议你包含一个许可，即使是开源许可。</p><p id="22e8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以添加一个<code class="du km kn ko kp b">examples</code>子目录来展示如何使用该模块的示例。复杂的目录模块结构还可以包含一个<code class="du km kn ko kp b">modules</code>文件夹，用于嵌套子模块，如下所示。</p><pre class="iy iz ja jb fd ld kp le bn lf lg bi"><span id="d6e8" class="lh li hi kp b be lj lk l ll lm">$ tree complete-module/<br/>.<br/>├── README.md<br/>├── main.tf<br/>├── variables.tf<br/>├── outputs.tf<br/>├── versions.tf<br/>├── LICENSE.tf<br/>├── ...<br/>├── modules/<br/>│   ├── nestedA/<br/>│   │   ├── README.md<br/>│   │   ├── variables.tf<br/>│   │   ├── main.tf<br/>│   │   ├── outputs.tf<br/>│   ├── nestedB/<br/>│   ├── .../<br/>├── examples/<br/>│   ├── exampleA/<br/>│   │   ├── main.tf<br/>│   ├── exampleB/<br/>│   ├── .../</span></pre><p id="b212" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 2。</strong> <a class="ae kq" href="#d56a" rel="noopener ugc nofollow"> <strong class="jl hj">在<code class="du km kn ko kp b">versions.tf</code>文件中为自定义模块</strong> </a> <strong class="jl hj"> <br/> </strong>编写地形配置，<strong class="jl hj"> <em class="kr">删除任何提供者块</em> </strong>，因为这应该由模块用户进行配置。作为最佳实践，您应该使用<code class="du km kn ko kp b">&gt;=</code>版本约束语法<strong class="jl hj"> <em class="kr">声明您的模块已知使用的最低提供者版本</em> </strong>。根模块是您应该使用<code class="du km kn ko kp b">~&gt;</code>或<code class="du km kn ko kp b">=</code>版本约束来指定最高提供者版本的地方，以避免意外升级到不兼容的新版本。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">子模块中的 versions.tf</figcaption></figure><p id="3fb4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您<strong class="jl hj">添加输入变量以使模块可配置</strong>和<strong class="jl hj"> </strong>能够在调用模块中引用它们作为输入参数，稍后我将在中演示<a class="ae kq" href="#0e58" rel="noopener ugc nofollow">。下面名为<code class="du km kn ko kp b">environment</code>的变量被创建来接受环境名称作为输入，用作 bucket 名称的后缀。存储桶名称被参数化，因为存储桶名称必须是全局唯一的。</a></p><p id="8241" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我在创建模块时的指导原则是，从同一个子模块创建的两个相同类型的资源不应该导致冲突错误。这就是为什么输入变量对于创建模块至关重要。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">自定义模块中的 variables.tf</figcaption></figure><p id="7b35" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du km kn ko kp b">local</code>变量被添加到<code class="du km kn ko kp b">main.tf</code>文件中以创建表达式，从而有选择地创建唯一的桶名并添加一个环境名作为后缀。如果您不希望自定义模块的用户将输入传递给特定变量，请使用<code class="du km kn ko kp b">locals</code>块。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">自定义模块中的 main.tf</figcaption></figure><p id="aa0b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">调用模块创建的资源被封装，因此如果不使用输出变量导出属性值，就不能从根模块直接访问其属性。例如，如果没有将<code class="du km kn ko kp b">bucket_id</code>定义为下面的输出变量和表达式<code class="du km kn ko kp b">aws_s3_bucket.website.id</code>，那么使用定制模块创建的 S3 存储桶的<em class="kr"> id </em>就不能从根模块访问。于是，<strong class="jl hj">创建一个<em class="kr"/></strong><code class="du km kn ko kp b">output.tf</code><strong class="jl hj"><em class="kr"/>文件来导出必需的资源属性值</strong>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">自定义模块中的 outputs.tf</figcaption></figure><p id="4484" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 3。</strong> <a class="ae kq" href="#d56a" rel="noopener ugc nofollow"> <strong class="jl hj">将配置文件推送到 GitHub 仓库并创建发布版本</strong> </a> <strong class="jl hj"> <br/> </strong>创建 GitHub 仓库(步骤如有需要此处可用<a class="ae kq" href="https://docs.github.com/en/get-started/quickstart/create-a-repo?tool=webui" rel="noopener ugc nofollow" target="_blank">)。然后，使用下面的命令初始化您创建的本地目录，将文件提交到本地 repo，并将它们推送到新的远程 repo。</a></p><pre class="iy iz ja jb fd ld kp le bn lf lg bi"><span id="f26d" class="lh li hi kp b be lj lk l ll lm">git init &amp;&amp; git add -A<br/>git commit -m "add all module files" &amp;&amp; git branch -M main<br/>git remote add origin https://github.com/&lt;github_account_name&gt;/&lt;new_repo_name&gt;.git<br/>git push -u origin main</span></pre><p id="0607" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要创建新模块的版本，您可以<a class="ae kq" href="https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository?tool=webui" rel="noopener ugc nofollow" target="_blank">在 Github </a>上创建一个使用标签的版本，或者在本地创建标签，并将它们推送到远程 repo。运行下面的命令来创建我们模块的<code class="du km kn ko kp b">v0.0.1</code>。</p><pre class="iy iz ja jb fd ld kp le bn lf lg bi"><span id="2294" class="lh li hi kp b be lj lk l ll lm">git tag -a "v0.0.1" -m "First release of s3-website module" <br/>git push --follow-tags</span></pre><p id="f790" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 4。</strong> <a class="ae kq" href="#d56a" rel="noopener ugc nofollow"> <strong class="jl hj">创建一个根模块，并使用 GitHub 模块作为源</strong> </a> <br/>来调用一个模块，即要在一个模块中包含另一个模块的内容，必须创建一个<code class="du km kn ko kp b">module</code>块并使用<code class="du km kn ko kp b">source</code>元参数。<code class="du km kn ko kp b">source</code>值可以是模块目录或已发布模块的本地路径。根据源代码的不同，一个可选的<code class="du km kn ko kp b">version</code>参数用于指定运行<code class="du km kn ko kp b">terraform init</code>或<code class="du km kn ko kp b">terraform get</code>时 terraform 应该下载的模块版本。</p><p id="8602" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">通常，对于 git 存储库，源参数值可以以<code class="du km kn ko kp b">git::</code>为前缀，后跟协议(ssh 或 HTTPS)。无前缀的<code class="du km kn ko kp b">github.com</code>URL 也被自动识别为 git 存储库。如果模块位于 repo 的子目录中，您将需要指定路径。注意路径前的双斜线<code class="du km kn ko kp b">//</code>。</p><pre class="iy iz ja jb fd ld kp le bn lf lg bi"><span id="d240" class="lh li hi kp b be lj lk l ll lm">source = "git::https://example.com/demorepo.git"<br/>source = "git::ssh://username@example.com/demorepo.git"<br/><br/>#For modules in subdirectories <br/>source = "github.com/example.com/demorepo//&lt;PATH&gt;?ref=v0.0.1" <br/>#Example<br/>source = "github.com/yemisprojects/s3_website_module_demo//submodule/service?ref=v0.0.1"</span></pre><p id="7b73" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了从 GitHub 中选择一个模块的特定版本，使用了下面的<code class="du km kn ko kp b">main.tf</code>文件中所示的<code class="du km kn ko kp b">ref</code>参数。如果没有这个参数，terraform 将克隆存储库的默认分支。<code class="du km kn ko kp b">ref</code>的值可以是标签名、分支或 SHA-1 散列。下面是我们在上一步中创建的标签。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">根模块中的 main.tf</figcaption></figure><p id="0e58" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">上面的<code class="du km kn ko kp b">bucket_name</code>、<code class="du km kn ko kp b">environment</code>、<code class="du km kn ko kp b">tags</code>参数与之前在自定义模块中创建的<a class="ae kq" href="#3fb4" rel="noopener ugc nofollow">输入变量名完全相同。要访问模块的输出变量，使用<code class="du km kn ko kp b">module.&lt;MODULE_NAME&gt;.&lt;OUTPUT_NAME&gt;</code>。</a></p><p id="4a53" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">例如，在名为<code class="du km kn ko kp b"><em class="kr">bucket_id</em></code> <em class="kr">的输出变量中，使用表达式<code class="du km kn ko kp b">aws_s3_bucket.website.id</code>在子模块中公开 S3 桶<code class="du km kn ko kp b">id</code>属性。</em>使用<code class="du km kn ko kp b">module.my_static_website.bucket_id</code>表达式在下面的根模块中访问相同的<code class="du km kn ko kp b">id</code>属性<em class="kr"> </em>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">根模块中的 outputs.tf</figcaption></figure><p id="4aa9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du km kn ko kp b">versions.tf</code>文件包括一个提供程序和一个带有更新版本约束的 terraform 块。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">根模块中的 versions.tf</figcaption></figure><p id="dda4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">张贴<code class="du km kn ko kp b">variables.tf</code>文件以确保完整性🙂。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ks kt l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">根模块中的 variables.tf</figcaption></figure><p id="40f0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 5。</strong> <a class="ae kq" href="#d56a" rel="noopener ugc nofollow"> <strong class="jl hj">测试并应用 terraform 配置并访问网站</strong> </a> <strong class="jl hj"> <br/> </strong>您可以克隆我的第二个 repo，它是一个根模块，使用我们创建的自定义模块并应用配置。您可以使用下面的命令来克隆 repo，并应用配置来验证我们的辛勤工作得到了回报。</p><pre class="iy iz ja jb fd ld kp le bn lf lg bi"><span id="ddcc" class="lh li hi kp b be lj lk l ll lm">git clone https://github.com/yemisprojects/use_s3_website_demo_module<br/>terraform init &amp;&amp; terraform plan<br/>terraform apply --auto-approve </span></pre><p id="0d20" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">运行<code class="du km kn ko kp b">terraform init</code>后，远程模块将被克隆到您的工作目录下的<code class="du km kn ko kp b">.terraform</code>文件夹中，如下所示。</p><pre class="iy iz ja jb fd ld kp le bn lf lg bi"><span id="3f16" class="lh li hi kp b be lj lk l ll lm">$ tree .terraform <br/>.terraform<br/>├── modules<br/>│   ├── modules.json<br/>│   └── my_static_website<br/>│       ├── LICENSE<br/>│       ├── README.md<br/>│       ├── main.tf<br/>│       ├── outputs.tf<br/>│       ├── variables.tf<br/>│       └── versions.tf<br/>└── providers</span></pre><p id="5bb9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du km kn ko kp b">terraform apply</code>之后，您应该会看到添加了 5 个资源。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/c3ad0e9d64de376d4036f0029184505a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vsB7l8pT07jrBbMc3vmwxQ.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">成功的地形应用</figcaption></figure><p id="377a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">将同一个<a class="ae kq" href="https://github.com/yemisprojects/use_s3_website_demo_module" rel="noopener ugc nofollow" target="_blank"> repo </a>的<code class="du km kn ko kp b">website-src</code>文件夹中的 HTML 文件上传到 S3 桶的根目录。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ls"><img src="../Images/26d3e15b5b26190a036d552287996b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHObBLr9c83xfIaV1BZIKg.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">S3 桶中的 HTML 文件</figcaption></figure><p id="b34d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在浏览器中访问网站 URL，如下所示。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lt"><img src="../Images/4b87ebe30d4f7662e9d76f0050e2da02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GNR5coMTQuZHQo0iTOkW9Q.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">部署了自定义模块的 S3 托管网站</figcaption></figure><p id="6aff" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当你完成<code class="du km kn ko kp b">terraform destory --auto-approve</code>时，记得摧毁你的资源。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="d718" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">祝贺你！</strong>🙌创建你自己的定制模块并在 GitHub 上发布一个版本。我们还成功测试了该模块，并访问了使用该模块部署的网站。伟大的工作🎉👏。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="5f7e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">直到我的下一篇文章👋。</p><blockquote class="lu lv lw"><p id="34a8" class="jj jk kr jl b jm jn ij jo jp jq im jr lx jt ju jv ly jx jy jz lz kb kc kd ke hb bi translated">“通往成功的电梯坏了。你得走楼梯，一步一步来。”魔鬼成交之乔·吉拉德的 76 条黄金法则</p></blockquote></div></div>    
</body>
</html>