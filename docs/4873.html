<html>
<head>
<title>Pushing objects to complete puzzles | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">推动物体完成拼图| Unity</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/pushing-objects-to-complete-puzzles-unity-86ef01b61ff8?source=collection_archive---------9-----------------------#2021-08-11">https://medium.com/nerd-for-tech/pushing-objects-to-complete-puzzles-unity-86ef01b61ff8?source=collection_archive---------9-----------------------#2021-08-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="b9cd" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何推动物体和触发压力垫来完成 Unity 中的拼图的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/df29486d81407abb9b4350341b8b220b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K17Xwbu6E4lsSG_u8AXKKw.gif"/></div></div></figure><p id="08e0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:用 Unity 实现一个系统，让玩家在平台游戏中推动物体并触发压力垫。</p><p id="a59b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我介绍了<a class="ae ko" rel="noopener" href="/nerd-for-tech/wall-jumping-unity-adba4072a64c">如何用 Unity </a>实现一个跳墙机制。现在，是时候实现一个系统，让玩家推动物体并触发压力垫，这可以在未来的平台游戏中完成一个谜题。</p><h1 id="7719" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">当前阶段</h1><p id="94f5" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">首先，让我们看一下我们将用来实现推和触发机制的阶段:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/f89ebde831e793c46d7c0e9294b9b741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*un7Noqd46JvphdNMwBOyRA.png"/></div></div></figure><p id="7a8a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该平台旨在允许玩家(在右侧)向左移动并推动立方体，直到它到达黄色压力垫，并提供一种在我们的平台游戏中构建未来谜题的方法:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ln lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/4a7e0bcda70094d6d820f12e046ca164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1472/format:webp/1*srQV-U2-c-GIJCJyTAGyog.png"/></div></figure><figure class="lm jl ls lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/c7ad52f8baa1d088cafe346cdc6bb2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*60JhZnHnSKf_DXizQ5U9dw.png"/></div></figure></div><p id="bd50" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们检查这些游戏对象的组件，我们会看到:</p><ul class=""><li id="f6f3" class="lt lu hi ju b jv jw jy jz kb lv kf lw kj lx kn ly lz ma mb bi translated">立方体包含一个普通的箱式碰撞器和一个受重力影响的刚体。</li><li id="50ab" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated">压力板包含一个带有<strong class="ju hs"> <em class="mh"> Is Trigger </em></strong></li></ul><div class="jh ji jj jk fd ab cb"><figure class="lm jl mi lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/10f84ab8aaccdef5714a47069227a154.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*qyTOr0ISnqet0cp8aedaiw.png"/></div></figure><figure class="lm jl mj lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/891ec49971f174844fa731265d7a264a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*yPWVroy5FIIIEmzR50YEsA.png"/></div></figure></div><h1 id="89a5" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">推动物体</h1><p id="5e5d" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了开始实现推送机制，让我们先用一个特殊的标签来标记立方体:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mk"><img src="../Images/ea0ced986b32cbe8c02fd60b26f3fd50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/1*Drrtt7je5VWYYpAeltxpXg.gif"/></div></figure><p id="e38a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们打开播放器脚本并创建一个新变量来指示推动对象时要应用的力量:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ml"><img src="../Images/38cde939c6a069971c4f5f77fbebad38.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*ro64oimTwzoNyR20ds9aQg.png"/></div><figcaption class="mm mn et er es mo mp bd b be z dx translated">可以使用<strong class="bd kr">【serialize field】</strong>通过 inspector 修改私有值。</figcaption></figure><p id="6630" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">创建后，让我们通过检查器修改它的值:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mq"><img src="../Images/71d868631fc0303546d612dc85074a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/1*HiNcA_HblvOfPe7M0KFwhg.gif"/></div></figure><p id="3898" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">接下来，让我们使用<strong class="ju hs">OnControllerColliderHit</strong>方法来:</p><ul class=""><li id="f493" class="lt lu hi ju b jv jw jy jz kb lv kf lw kj lx kn ly lz ma mb bi translated">识别玩家的角色控制器何时与另一个碰撞器发生碰撞。在这种情况下，当它与标记为<strong class="ju hs"> <em class="mh">的碰撞器碰撞时，MovableBox </em> </strong>。</li><li id="8972" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated">从识别的碰撞器中使用<strong class="ju hs"><em class="mh">attachedRigidbody</em></strong>属性将刚体附加到碰撞器。</li><li id="1e27" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated">检查刚体是否不为空。</li><li id="e9d5" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated">通过使用 hit 的<strong class="ju hs"><em class="mh">move direction</em></strong>属性确定要应用于碰撞器的水平方向。</li><li id="8fe7" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated">通过将方向乘以玩家的推力来设置来自另一个碰撞器的刚体的速度。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/832adcae4420d8c939d1b84102408f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CEZA43fiy6gOQvf1gLlivg.png"/></div></div></figure><p id="c3f5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们用 Unity 运行游戏，我们会看到玩家在与立方体碰撞时移动立方体:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/7368790488d22e1571cb69545b3333e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*g_w7-cnHQn2SseKy0R0LhA.gif"/></div></div></figure><p id="71ff" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">但是如果我们想让推手来滑动魔方呢？嗯，我们可以选择立方体，并冻结立方体在其刚体的<strong class="ju hs">约束</strong>内的旋转:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ms lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/4e4602b8ccd276e61d3a5b93c8eb22a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/1*swCzTQBk4b2tihg4l_2h5g.gif"/></div></figure><figure class="lm jl mt lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/08e118a11d0f4f5ca4f0e3a26349fb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/1*m-74y-4VR7UHn7nlbrW3Vg.gif"/></div></figure></div><p id="76dd" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这样我们就能推动物体，避免旋转它:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/a671e162abfe681605d1d358f2a55554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8lrr88h1HR6cJrD1jZfqgQ.gif"/></div></div></figure><h1 id="e788" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">触发被推动的对象</h1><p id="65e9" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了在我们的压力板检测到立方体时触发一个动作，让我们开始为它创建一个新的脚本:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mu lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/fcd158734acd56bf4ad64d1305f25978.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/1*r4VxalzWp8B1foGHtntO0w.gif"/></div></figure><figure class="lm jl mv lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/506758581ca0ac9092363b19fa1be927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/1*AkoC5OR7OxcDvqWOTF2hEA.gif"/></div></figure></div><p id="7d49" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们打开脚本并创建一个新的私有变量来存储对压力垫的<strong class="ju hs">网格渲染器</strong>组件的引用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mw"><img src="../Images/39d88170baee19863f302679155c607a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*9niZdhZUyLQZlO68tRSkrQ.png"/></div></figure><p id="3a00" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">接下来，让我们使用<strong class="ju hs"> Start </strong>方法来初始化变量，并检查它是否为空，这是一个好习惯:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mx"><img src="../Images/6e9d7aa3987abde7130932818107a08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8fMN5i-uZb-3g6ny_rDA8A.png"/></div></div></figure><p id="0616" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们使用<strong class="ju hs"> OnTriggerStay </strong>方法来识别碰撞器何时停留在压力垫的碰撞器内部。在这种情况下，让我们通过使用<strong class="ju hs"> CompareTag </strong>方法来检查碰撞器是否属于玩家正在推动的盒子:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es my"><img src="../Images/63adfb0ead3cac578f80d939fe97261d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYxAeHhrtnPC4dy5Om9sGA.png"/></div></div></figure><p id="fed9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了识别立方体何时在正确激活压力垫的范围内，让我们使用<strong class="ju hs">矢量 3 获得立方体和压力垫之间的距离。距离</strong>方法:</p><blockquote class="mz na nb"><p id="41e9" class="js jt mh ju b jv jw is jx jy jz iv ka nc kc kd ke nd kg kh ki ne kk kl km kn hb bi translated">注意:我们可以使用<strong class="ju hs"> Debug。记录</strong>以打印距离并检查哪个值适合我们。</p></blockquote><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nf"><img src="../Images/d80d6f6219edd3fe69805ae585b3102e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*robT6b5oF3yibtKqeVlgpw.png"/></div></div></figure><p id="2fde" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，如果立方体在期望的范围内，让我们:</p><ul class=""><li id="28f4" class="lt lu hi ju b jv jw jy jz kb lv kf lw kj lx kn ly lz ma mb bi translated">通过使用<strong class="ju hs"> attachedRigidbody </strong>属性从另一个碰撞器获得刚体。</li><li id="c67f" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated">检查刚体<strong class="ju hs">是否不为空</strong>。</li><li id="a4af" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated">将刚体设置为<strong class="ju hs">运动学</strong>以停止对其应用任何物理。</li><li id="0225" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated"><strong class="ju hs">通过修改材料的颜色属性来改变压力垫的颜色</strong>。</li><li id="9f52" class="lt lu hi ju b jv mc jy md kb me kf mf kj mg kn ly lz ma mb bi translated"><strong class="ju hs">一旦压力垫被触发，破坏脚本</strong>组件。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ng"><img src="../Images/96b5702626a5c1137afa68b4f2ad9243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*3oA1QNAU3H3pQ30DOip6Rg.png"/></div></figure><p id="5146" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们用 Unity 运行游戏，我们会看到当玩家将盒子推到压力垫上时，压力垫会像预期的那样工作:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/073ca300380ffbe79e99dbeb6cd1afd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*a9Kq3Zmu3-II5jKcJN6ETQ.gif"/></div></div></figure><p id="4a6d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们用 Unity 实现了一个为平台游戏推送对象的系统！:d .下一篇文章再见，我将展示如何升级我们的项目，以便在 Unity 中使用通用渲染管道(URP)。</p></div><div class="ab cl nh ni gp nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="hb hc hd he hf"><blockquote class="mz na nb"><p id="4311" class="js jt mh ju b jv jw is jx jy jz iv ka nc kc kd ke nd kg kh ki ne kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>