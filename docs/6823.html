<html>
<head>
<title>Docker Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker 撰写</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/docker-compose-ef04b31f5388?source=collection_archive---------2-----------------------#2022-05-18">https://medium.com/nerd-for-tech/docker-compose-ef04b31f5388?source=collection_archive---------2-----------------------#2022-05-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ae84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们基于 docker build、docker run、-v、-p 等命令使用 docker。，每次我们开发<strong class="ih hj">图像</strong>或者<strong class="ih hj">容器</strong>。即使命令很长并且重复很多次，我们仍然在命令提示符/shell 中键入。</p><p id="7dec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">说到技术，一切都是为了方便和减少重复。因此，docker 推出了名为<strong class="ih hj">“Docker 撰写”的解决方案从官方网站下载 docker 时，这是默认设置。</strong></p><p id="5afa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此 Docker Compose 帮助我们轻松管理多个容器。我们只需要一个 docker-compose 文件。带有输入的“yaml”文件以键值对的形式给出。当我们拥有这个文件时，我们必须从拥有该文件的终端发出一个命令— <em class="jd"> docker-compose up </em>或<em class="jd">docker-compose down</em>—docker-compose<strong class="ih hj">。yaml </strong>。</p><blockquote class="je jf jg"><p id="154f" class="if ig jd ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> Docker-compose 称为多个容器的管理/编排(一切都可以暂存到一个配置文件中)。</em>T15】</strong></p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/831e455d07ee1dc6911c62f9632b5bda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*G8ZNyxn8BEe15Y8I.png"/></div></div></figure><h2 id="2af1" class="jw jx hi bd jy jz ka kb kc kd ke kf kg iq kh ki kj iu kk kl km iy kn ko kp kq bi translated">如何写一个 yaml 文件？</h2><p id="777a" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">yaml 文件像 python 文件一样依赖于<strong class="ih hj">缩进</strong>来执行。</p><p id="50aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本命令包括</p><p id="272e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，docker-compose 将所有服务放在一个网络中——它们可以用服务名进行通信，或者我们也可以在默认网络之外创建一个自定义网络。</p><pre class="jl jm jn jo fd kw kx ky kz aw la bi"><span id="bec9" class="jw jx hi kx b fi lb lc l ld le"><strong class="kx hj">v<em class="jd">ersion</em></strong>: [what version of docker-compose you want to use] --&gt; available official website  </span><span id="67f7" class="jw jx hi kx b fi lf lc l ld le"><strong class="kx hj"><em class="jd">services</em></strong>:  [<strong class="kx hj">service_name</strong>]:--&gt;frontend,backend,db etc.    <br/>#a child will be two space indented<br/>    <br/> <strong class="kx hj"><em class="jd">image</em></strong>:[official image name/custom image name/path to repository] or if no image exists      <br/> <strong class="kx hj"><em class="jd">build:</em></strong>[docker_file_path]  <br/>  <br/> <strong class="kx hj"><em class="jd">ports</em></strong><em class="jd">:</em>    <br/> #we use '<strong class="kx hj">-</strong>' in front for lists in YAML   <br/> -['containerport:external_port']</span><span id="ab60" class="jw jx hi kx b fi lf lc l ld le"> <strong class="kx hj"><em class="jd">volumes</em></strong>:      <br/> -[<strong class="kx hj">host directory</strong>]:[<strong class="kx hj">container directory</strong>] --&gt; for <strong class="kx hj">bind mounts</strong>      <br/> -[<strong class="kx hj">named of volume</strong>]:[<strong class="kx hj">container directory</strong>] --&gt; <strong class="kx hj">named volume</strong> --&gt; needs to be included in <strong class="kx hj">meta volume</strong> at the end of file     <br/> -[<strong class="kx hj">container_path</strong>] --&gt; for <strong class="kx hj">anonymous volume</strong>    </span><span id="74db" class="jw jx hi kx b fi lf lc l ld le"><strong class="kx hj"><em class="jd">depends_on:</em></strong>     <strong class="kx hj"><em class="jd"> <br/> </em></strong>-[service_name]<strong class="kx hj"><em class="jd"> <br/></em>#we use depends on key when we want to start some service before this service needs to be started</strong></span></pre></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><p id="5885" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">原载于 2022 年 5 月 18 日 https://www.pansofarjun.com</em><em class="jd">T21</em><a class="ae ln" href="https://www.pansofarjun.com/post/docker-compose" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>