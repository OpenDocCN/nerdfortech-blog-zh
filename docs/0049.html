<html>
<head>
<title>Client-Server programming using sockets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用套接字进行客户端-服务器编程</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/client-server-programming-using-sockets-python-built-in-library-2379acc8a205?source=collection_archive---------1-----------------------#2019-09-02">https://medium.com/nerd-for-tech/client-server-programming-using-sockets-python-built-in-library-2379acc8a205?source=collection_archive---------1-----------------------#2019-09-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="44fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几乎在每一种编程语言中，都有一种方法可以在不同类型的客户机和服务器之间进行通信，使用框架或者从头开始创建体验。</p><p id="f11b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">套接字编程在常规服务器和客户机中大多数时候使用<strong class="ih hj"> TCP </strong>和<strong class="ih hj"> UDP </strong>套接字，其中“服务器”提供服务,“客户机”使用/消费该服务</p><p id="b6f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这可以通过使用python内置的<code class="du jd je jf jg b">sockets</code>模块来完成。但事实是有很多解决方案，甚至更容易实现，其中之一就是使用<code class="du jd je jf jg b">ServerSocket</code>库。</p><p id="15d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，套接字是两个或多个实体之间通过特定端口进行通信的网络端点。我们需要将一个套接字绑定到一个服务器端口，这通常是一个众所周知的端口。</p><p id="9423" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">套接字实现的其他共同特征表现在服务器的类型和建立连接的方式上。服务器有时可以被发现为<strong class="ih hj">多主机</strong>，这允许有多个以太网和无线接口，这意味着多个IP地址。</p><p id="fb01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于具有先前硬件配置的服务器，通过绑定端口，我们可以直接从堆栈中将IP地址与网络接口相关联</p><p id="3e5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">互联网上有很多例子解释了如何执行TCP或UDP服务器，</p><p id="b6eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一种类型的实现是<strong class="ih hj">原始套接字</strong>。这些更复杂，但是可以给你交互的自由，你需要手动处理接收、构造和交互，这给你从以太网层发送的低级访问</p><p id="7b34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jh">提示:请参考OSI模型以便更好地理解。</em></p><p id="a559" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以用这篇文章来补充这个讲座，这篇文章更详细地回顾了原始套接字。</p><p id="3a04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用原始套接字的一个很酷的好处是，我们可以执行嗅探和包注入。检查以下脚本。</p><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="jo jp l"/></div></figure><p id="e581" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一个脚本将一个套接字绑定到一个特定的以太网接口，然后发送一个精心编制的以太网数据包供以后嗅探。</p><p id="a6f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二个脚本也使用原始套接字接收发送的任何内容，读取并根据报头结构将<strong class="ih hj">以太网</strong>报头转换为十六进制值。</p><p id="e553" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是另一个例子。一个TCP套接字实现。由两个脚本组成，一个客户端和一个服务器实现。</p><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="jo jp l"/></div></figure><p id="e75e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以运行<code class="du jd je jf jg b">tcpClient.py</code>文件，也可以借助<strong class="ih hj"> netcat </strong> CLI工具模拟客户端，如下所示:</p><p id="ee9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">nc [IP] 8000</code></p><p id="262a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当客户端关闭连接时，服务器也随之消亡。</p><p id="4a4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">重要提示</strong>:<code class="du jd je jf jg b">tcpClient.py</code>文件接收一个参数，它是服务器的IP，对于上面的例子，我们使用为<code class="du jd je jf jg b">eth0</code>网络接口生成的IP。</p><p id="f5da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据您的需要，您可以完成更高级的事情，您可以按顺序处理进程，为客户端提供多线程服务器，拥有具有多处理能力的服务器，或者实现具有多路复用功能的套接字(非阻塞选择)。</p><p id="7c1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">套接字世界是巨大的，用它可以做许多事情，这用于复杂的软件，是信息安全行业的面包和黄油，对于具有密集通信功能的软件来说是完美的。</p><p id="de8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">套接字是好的，值得花几个小时让它们相互作用并从中学习。</p><p id="4aa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码:)</p></div></div>    
</body>
</html>