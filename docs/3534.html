<html>
<head>
<title>Scrape Instagram using python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python抓取Instagram</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/scrape-instagram-using-python-2576f09ebbb9?source=collection_archive---------2-----------------------#2021-06-13">https://medium.com/nerd-for-tech/scrape-instagram-using-python-2576f09ebbb9?source=collection_archive---------2-----------------------#2021-06-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f0df2bf0b66ed3b7268f2fef8b69f63d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLcLIcNwvFLGXqTfCOMY9A.jpeg"/></div></div></figure><p id="640f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章讲述了我们如何使用python连接到Instagram，并提取关注者列表、你关注的人以及你不应该关注的人的列表(你关注但没有关注的人)😛)</p><p id="2712" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用一个名为<code class="du jo jp jq jr b">instaloader</code>的内置python包轻松完成以上工作。如果你想直接跳到代码，看看它的运行情况，这里是-<a class="ae js" href="https://github.com/apoorva-dave/instagram-scraper" rel="noopener ugc nofollow" target="_blank">https://github.com/apoorva-dave/instagram-scraper</a></p><h1 id="017d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">属国</h1><ol class=""><li id="ed4a" class="kr ks hi is b it kt ix ku jb kv jf kw jj kx jn ky kz la lb bi translated">Python3</li><li id="be28" class="kr ks hi is b it lc ix ld jb le jf lf jj lg jn ky kz la lb bi translated">Instaloader</li><li id="82fd" class="kr ks hi is b it lc ix ld jb le jf lf jj lg jn ky kz la lb bi translated">Numpy</li></ol><h1 id="ed57" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">密码</h1><p id="dbed" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">创建一个处理以下4个步骤的文件<code class="du jo jp jq jr b">insta_scraper.py</code></p><ol class=""><li id="9325" class="kr ks hi is b it iu ix iy jb lk jf ll jj lm jn ky kz la lb bi translated">创建会话</li></ol><p id="7236" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们在下面的代码块中获得Instaloader的一个实例，并使用用户提供的用户名和密码登录。一旦完成，就创建了概要文件实例，以便获取概要文件的元数据。</p><pre class="ln lo lp lq fd lr jr ls lt aw lu bi"><span id="b8b3" class="lv ju hi jr b fi lw lx l ly lz">def create_session(self):</span><span id="7e79" class="lv ju hi jr b fi ma lx l ly lz">        L = instaloader.Instaloader()<br/>        L.login(self.username, self.password) # Login or load session<br/>        self.profile = instaloader.Profile.from_username(L.context, self.username) # Obtain profile metadata</span></pre><p id="0fd4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.获取关注者列表</p><pre class="ln lo lp lq fd lr jr ls lt aw lu bi"><span id="79be" class="lv ju hi jr b fi lw lx l ly lz">def scrape_followers(self):</span><span id="d210" class="lv ju hi jr b fi ma lx l ly lz">        for follower in self.profile.get_followers():<br/>            self.followers_list.append(follower.username)</span></pre><p id="63c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.获取以下列表</p><pre class="ln lo lp lq fd lr jr ls lt aw lu bi"><span id="eeb0" class="lv ju hi jr b fi lw lx l ly lz">def scrape_following(self):</span><span id="b702" class="lv ju hi jr b fi ma lx l ly lz">        for followee in self.profile.get_followees():<br/>            self.following_list.append(followee.username)</span></pre><p id="0e65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.获取取消关注列表</p><p id="76e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将在您当前的目录中生成一个<code class="du jo jp jq jr b">unfollowers_&lt;USERNAME&gt;.txt</code>文件，其中包含您关注但他们不关注的人的列表。</p><pre class="ln lo lp lq fd lr jr ls lt aw lu bi"><span id="2f9f" class="lv ju hi jr b fi lw lx l ly lz">def generate_unfollowers_list(self):</span><span id="02b0" class="lv ju hi jr b fi ma lx l ly lz">        unfollow_list = np.setdiff1d(self.following_list, self.followers_list) # unfollow people who are only in following list and not in followers list<br/>        print("People to unfollow: ", unfollow_list)<br/>        filename = "unfollowers_" + self.username + ".txt"<br/>        file = open(filename, "w")<br/>        for person in unfollow_list:<br/>            file.write(person + "\n")<br/>        file.close()</span></pre><p id="65f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后可以从runner脚本<code class="du jo jp jq jr b">main.py</code>中执行代码，该脚本将使用用户的用户名和密码调用<code class="du jo jp jq jr b">create_session()</code>。这样的设计是为了确保在创建会话post时只需要用户的用户名和密码，我们可以根据需要直接调用API<code class="du jo jp jq jr b">scrape_followers()</code>等。</p><p id="2b74" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Instaloader是一个非常高效的包。我们可以利用它做更多的事情。请查看这里的文档了解更多细节:<a class="ae js" href="https://instaloader.github.io/as-module.html" rel="noopener ugc nofollow" target="_blank">https://instaloader.github.io/as-module.html</a></p><p id="342a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里找到完整的运行代码<a class="ae js" href="https://github.com/apoorva-dave/instagram-scraper" rel="noopener ugc nofollow" target="_blank">和提供运行步骤的<code class="du jo jp jq jr b">README</code>。</a></p><p id="1dea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是这篇文章的内容。快乐学习！！❤</p></div></div>    
</body>
</html>