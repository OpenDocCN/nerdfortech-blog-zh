<html>
<head>
<title>Local Path Planning Using virtual Potential Field in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中基于虚拟势场的局部路径规划</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/local-path-planning-using-virtual-potential-field-in-python-ec0998f490af?source=collection_archive---------1-----------------------#2021-03-02">https://medium.com/nerd-for-tech/local-path-planning-using-virtual-potential-field-in-python-ec0998f490af?source=collection_archive---------1-----------------------#2021-03-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5886" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我将向您展示如何使用障碍和目标的势场来编写规划机器人路径的python代码。</p><div class="jd je ez fb jf jg"><a href="https://github.com/AslanDevbrat/Robotics/blob/master/Assignment1/Robo_assign1.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">AslanDevbrat/机器人</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">本文的完整代码。通过创建一个……</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">github.com</p></div></div><div class="jp l"><div class="jq l jr js jt jp ju jv jg"/></div></div></a></div></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><h1 id="8f15" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><p id="3aa1" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">机器人的自主导航依赖于机器人实现其目标、避开环境中的障碍物的能力。在某些情况下，机器人完全了解其环境，并基于此规划其运动。一般来说，机器人只有一个关于目标的想法，应该使用它的传感器收集关于环境的信息来达到目标。</p><p id="d20b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本地路径规划应该实时执行，并且优先于高级规划。因此，有时也称为实时避障。</p><p id="6da8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">局部路径规划方法之一是势场法。这是一个有吸引力的方法，因为它的优雅和简单[1]。然而，使用这种方法，机器人很容易陷入局部最小值。因此，需要额外的努力来避免这种情况。</p><h1 id="e28d" class="kd ke hi bd kf kg lg ki kj kk lh km kn ko li kq kr ks lj ku kv kw lk ky kz la bi translated"><strong class="ak">势场法</strong></h1><p id="c5ae" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">势场的概念取自自然界。例如，一个带电粒子在磁场中穿行，或者一个小球在山上滚动。这个想法是，根据场的强度或山的坡度，粒子或球可以到达场的源，在这个例子中是磁体或山谷。</p><p id="0a89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在机器人学中，我们可以通过创建一个人工势场来吸引机器人到达目标，从而模拟相同的效果。</p><p id="15b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过设计一个适当的势场，我们可以使机器人表现出简单的行为。</p><p id="c826" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，让我们假设环境中没有障碍，机器人应该寻找这个目标。在传统的规划中，应该计算机器人与目标的相对位置，然后施加合适的力将机器人驱动到目标。</p><p id="9ee2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在势场法中，我们在球门内创建一个吸引人的场。势场定义在整个自由空间，在每一个时间步中，我们计算机器人位置的势场，然后计算这个场产生的诱导力。然后机器人应该根据这个力移动。</p><p id="e31c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图说明了这一概念:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es ll"><img src="../Images/bca268dc22f0f05be3a1866f3ae581f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*A4a5kTE042gqmwpQBND9Iw.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">图1:球门的势场</figcaption></figure><p id="a1f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以定义另一种让机器人避开障碍物的行为。我们让每个障碍物在其周围产生一个排斥场。如果机器人接近障碍物，一个排斥力会作用在它身上，把它推离障碍物。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es ll"><img src="../Images/cc5334d35d2d18eefa13a0e623737103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*ca_xPar5sjbvSmEqelUr-A.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">障碍物的势场</figcaption></figure><p id="f2a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">两种行为，寻求和回避，可以通过结合两个势场来结合；然后，机器人可以跟随由新的场引起的力到达目标，同时避开障碍物:</p><div class="lm ln lo lp fd ab cb"><figure class="lw lq lx ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/b4469533e76e38d219159ac5d8acdd59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*QVXgVm0E5412jbeIarW-LQ.png"/></div></figure><figure class="lw lq lx ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/bc8d084189943227f37ab357501eec3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*qxw6HHe7GHa1Re_YX-wAmA.png"/></div></figure></div><h1 id="764c" class="kd ke hi bd kf kg lg ki kj kk lh km kn ko li kq kr ks lj ku kv kw lk ky kz la bi translated">使用的公式:</h1><p id="64a9" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">对于目标的势场</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es mg"><img src="../Images/8db3f902040498db62066d49edc8c949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yCJdvr-dfVQ3hYr954J72w.png"/></div></div></figure><p id="e7d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">障碍物的势场</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es mh"><img src="../Images/55a073bc3bcbf2157da708ed939da6d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*puW_MlPIVloDkcyq4Uoucw.png"/></div></div></figure><h1 id="bd42" class="kd ke hi bd kf kg lg ki kj kk lh km kn ko li kq kr ks lj ku kv kw lk ky kz la bi translated">我们来编码吧。</h1><p id="cf52" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">绘制目标的潜在吸引力。</p><figure class="lm ln lo lp fd lq"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="c945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es ll"><img src="../Images/bca268dc22f0f05be3a1866f3ae581f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*A4a5kTE042gqmwpQBND9Iw.png"/></div></figure><p id="ac13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们画出障碍物的排斥势。</p><figure class="lm ln lo lp fd lq"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="a790" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es ll"><img src="../Images/cc5334d35d2d18eefa13a0e623737103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*ca_xPar5sjbvSmEqelUr-A.png"/></div></figure><p id="c867" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们结合目标和障碍的势场。首先，我将假设障碍和目标都在原点，以及它的场看起来如何。</p><figure class="lm ln lo lp fd lq"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="d4a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果是:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es ll"><img src="../Images/cd7df1ed2b4b6279295396cff6fd1592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*krKaq6Dq4K8M7VoLl5Thyw.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">目标和障碍都是重叠的。</figcaption></figure><p id="b9e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果目标和障碍物在不同的位置，下面的代码将绘制势场:</p><figure class="lm ln lo lp fd lq"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="4e7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es mk"><img src="../Images/d7caa9c7f9dfb8f18d1e591b8f3e7097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*QVXgVm0E5412jbeIarW-LQ.png"/></div></figure><p id="0c81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们必须找到一条从起点到目标的路径，避开障碍物；为此，我使用了一个<em class="ml">流图</em>,并将起点设为(0，0)</p><figure class="lm ln lo lp fd lq"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="a3ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es mk"><img src="../Images/bbc2a624e3b1593db79c7502e3154652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*qxw6HHe7GHa1Re_YX-wAmA.png"/></div></figure></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="734b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们把极限推得更远；我现在要做的是将障碍的数量从1增加到10。障碍物的大小和位置随机变化。</p><figure class="lm ln lo lp fd lq"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="eaa6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看情节。</p><div class="lm ln lo lp fd ab cb"><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/4733f4ce3fd5bf90dd27d329dd22020e.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*he9k9JjUCNRd8lUyagAjyA.png"/></div></figure><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/75b3c6ed14bfc77881d664cb949ca978.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*T-LxNFpNt0SiVNf-iv2Bxw.png"/></div></figure><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/00bbec16dbed753c0ba9443b7057ca68.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*cVyqLJbTVM1fpKP7hk-HUg.png"/></div></figure></div><div class="ab cb"><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/377d0ea29092a6434292848edede7189.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*JPjAfdCqZEJA-6b2iZVg6A.png"/></div></figure><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/c8235536ee7101780c3675377fed4731.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*528UsWewdOMjajYYyzEmTg.png"/></div></figure><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/136d6f81d2ba048b6bb74ecbec0d5a05.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*dvzC5lJaWWsKroMbGQUPvw.png"/></div></figure></div><div class="ab cb"><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/44f798d8c146d3bbc1fd09b3d204db66.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*DP_6reSglx2QJwkcGla8eQ.png"/></div></figure><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/a73118452e68b5bb0bf6429118d9d479.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*ssDmoO6cymUnDyqOP8YidQ.png"/></div></figure><figure class="lw lq mm ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/850e8223f588b3bfea1b1706f079848c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*065KhH5Ua5FDge6BEI04Jg.png"/></div></figure></div><div class="ab cb"><figure class="lw lq lx ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/0dcbc5afc186fe187f64ce45ee514bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*LPTOTBwP8TRGwsUXBd9yTg.png"/></div></figure><figure class="lw lq lx ly lz ma mb paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/c6472b06eaf92b87fce0734bccf569a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*eb98C9MgP3rKFkjMUG97jw.png"/></div></figure></div><p id="ea42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果非常恰当；除了<em class="ml"> 6障碍情况外，我们的机器人非常高效地达到了避障的目的；</em>原因是，如果你仔细观察图形，你会发现在离原点很近的地方有一个障碍物，因为这个目标的引力场不足以抵消障碍物的排斥势，所以它被卡在原点。用数学术语来说，你可以说机器人陷入了局部极小值。</p><p id="ac58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里找到完整的代码:</p><div class="jd je ez fb jf jg"><a href="https://github.com/AslanDevbrat/Robotics/blob/master/Assignment1/Robo_assign1.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">AslanDevbrat/机器人</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">路径规划的完整代码。通过创建一个……</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">github.com</p></div></div><div class="jp l"><div class="jq l jr js jt jp ju jv jg"/></div></div></a></div></div></div>    
</body>
</html>