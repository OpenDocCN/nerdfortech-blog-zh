<html>
<head>
<title>New Splash Screen In Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android中的新闪屏</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/modern-splash-screen-in-android-9c804903c7c9?source=collection_archive---------0-----------------------#2021-05-15">https://medium.com/nerd-for-tech/modern-splash-screen-in-android-9c804903c7c9?source=collection_archive---------0-----------------------#2021-05-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7870" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一种更好的显示Android闪屏的方式。#安卓12</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/a777c30a589a9d6e5459a9931ed5f924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c6ZVLYWau91pf_KPMa3JGw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">约翰尼·布朗在<a class="ae jt" href="https://unsplash.com/s/photos/splash-drop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="3708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">🚣嗨，在这篇文章中，我们学习在android中实现闪屏。从<strong class="ih hj">古老的</strong>传统方式到<strong class="ih hj">新的</strong>现代方式。</p><h1 id="ad5d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">介绍</h1><p id="5081" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Android闪屏通常是当应用程序没有完全准备好显示内容时显示给用户的第一个屏幕。</p><h1 id="c677" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">闪屏如何工作</h1><p id="bb98" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">当用户在应用程序的进程未运行时(冷启动<a class="ae jt" href="https://developer.android.com/topic/performance/vitals/launch-time#cold" rel="noopener ugc nofollow" target="_blank">)或活动未创建时(热启动</a><a class="ae jt" href="https://developer.android.com/topic/performance/vitals/launch-time#warm" rel="noopener ugc nofollow" target="_blank">)启动应用程序，会发生以下事件。(在</a><a class="ae jt" href="https://developer.android.com/topic/performance/vitals/launch-time#hot" rel="noopener ugc nofollow" target="_blank">热启动</a>期间，不会显示闪屏。)</p><ol class=""><li id="01ac" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">系统使用你定义的主题和动画来显示启动画面。</li></ol><p id="8ae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.当应用程序准备就绪时，闪屏会被关闭并显示应用程序。</p><p id="e693" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们开始吧，</p><h1 id="d478" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">正在初始化Splash活动</h1><p id="3472" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">首先，要启动闪屏形式的活动，我们只需将动作<strong class="ih hj"> main </strong>和<strong class="ih hj">category</strong>launcher添加到<strong class="ih hj"> AndroidManifest.xml </strong>中的您的活动中</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="d222" class="ll jv hi lh b fi lm ln l lo lp">&lt;activity<br/>    android:name=".ui.splash.SplashActivity"&gt;<br/>    &lt;intent-filter&gt;<br/>        &lt;action android:name="android.intent.action.MAIN" /&gt;</span><span id="d279" class="ll jv hi lh b fi lq ln l lo lp">        &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br/>    &lt;/intent-filter&gt;</span><span id="5988" class="ll jv hi lh b fi lq ln l lo lp">&lt;/activity&gt;</span></pre><h1 id="269e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">传统方法</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lr"><img src="../Images/223b5f3916615c98e17922669701ef8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Em8ZVKXSES3tMm_f.jpg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">等待插图XD</figcaption></figure><h1 id="138e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">老办法，</h1><p id="077a" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我们通常会暂停用户交互2-3秒，让闪屏加载。</p><blockquote class="ls lt lu"><p id="cbbf" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated">UI持有从来都不是一个选项。就像在activity中我们曾经编写过这些恐怖的代码……而Activity曾经看起来像是shi**。</p></blockquote><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="07f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这在当时很管用&amp;现在也是，但我们都知道应该有比等待更多的东西。</p><h1 id="3505" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现代方法</h1><p id="514b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">有了新的方法，我们不需要宣布等待的时间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/175f06bc3c5892bbd6d817745a32e6ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/0*0FbZ6CX71jxFAbez.gif"/></div></figure><h2 id="5ddb" class="ll jv hi bd jw mc md me ka mf mg mh ke iq mi mj ki iu mk ml km iy mm mn kq mo bi translated">第一步</h2><p id="1632" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">首先，收集所有必要的元素，如颜色和标志。</p><p id="f55d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，创建<strong class="ih hj"> drawable </strong>放置logo为位图/drawable。</p><blockquote class="ls lt lu"><p id="cfe0" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated">drawable/background_splash.xml</p></blockquote><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lz ma l"/></div></figure><h2 id="1248" class="ll jv hi bd jw mc md me ka mf mg mh ke iq mi mj ki iu mk ml km iy mm mn kq mo bi translated">第二步</h2><p id="fb09" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在style中为闪屏声明一个任意想要的主题，并将android:windowBackground属性值设置为我们创建的drawable。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="c1e9" class="ll jv hi lh b fi lm ln l lo lp">&lt;style name="SplashScreenTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;<br/>    &lt;item name="colorPrimary"&gt;@color/colorPrimary&lt;/item&gt;<br/>    &lt;item name="colorPrimaryVariant"&gt;@color/colorSecondary&lt;/item&gt;<br/>    &lt;item name="colorOnPrimary"&gt;@color/colorWhite&lt;/item&gt;<br/>    &lt;item name="android:windowBackground"&gt;   <br/>           @drawable/background_splash&lt;/item<br/>&lt;/style&gt;</span></pre><p id="03af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">Android:window background</strong>属性<strong class="ih hj"/></p><p id="9109" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并且，在<strong class="ih hj"> AndroidManifest.xml </strong>中，我们将我们的主题添加为。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="8049" class="ll jv hi lh b fi lm ln l lo lp">&lt;activity<br/>    android:name=".ui.splash.SplashActivity"<br/>    android:launchMode="singleTask"<br/>    android:theme="@style/SplashScreenTheme"&gt;</span><span id="91af" class="ll jv hi lh b fi lq ln l lo lp">    &lt;intent-filter&gt;<br/>        &lt;action android:name="android.intent.action.MAIN" /&gt;</span><span id="e540" class="ll jv hi lh b fi lq ln l lo lp">        &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br/>    &lt;/intent-filter&gt;</span><span id="48ce" class="ll jv hi lh b fi lq ln l lo lp">&lt;/activity&gt;</span></pre><h2 id="1f0f" class="ll jv hi bd jw mc md me ka mf mg mh ke iq mi mj ki iu mk ml km iy mm mn kq mo bi translated">最后一步</h2><p id="50cd" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">要隐藏闪屏布局的内容，在活动中删除<strong class="ih hj"> setContentView()，</strong></p><p id="abe5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">至于显示</strong>创建的drawable作为这些splash &amp;之间的过渡的另一个活动，我们将不需要splash布局。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="c690" class="ll jv hi lh b fi lm ln l lo lp">public class SplashActivity extends AppCompatActivity {<br/><br/>    @Override<br/>    protected void onCreate(Bundle savedInstanceState) {<br/>        super.onCreate(savedInstanceState);<br/>        // <!-- -->s̶e̶t̶C̶o̶n̶t̶e̶n̶t̶V̶i̶e̶w̶(̶)̶;<br/>        doFirstRunCheckup();<br/>    }<br/><br/>    private void doFirstRunCheckup() {<br/>        startActivity(new Intent(SplashActivity.this, MainActivity.class));<br/>        finish();<br/>    }<br/><br/>}</span></pre><p id="4f1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是<a class="ae jt" href="https://github.com/iamnaran/search-recycler-view" rel="noopener ugc nofollow" target="_blank">源代码……</a>如果你需要的话。</p><p id="590d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成了。现代方法比我们的传统方法更有说服力。</p><blockquote class="ls lt lu"><p id="2c7a" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated">继续阅读更多关于Android 12闪屏的内容</p></blockquote><h1 id="6805" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">—最近，</h1><p id="4fd8" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Android 12增加了<code class="du mp mq mr lh b"><a class="ae jt" href="https://developer.android.com/reference/android/window/SplashScreen" rel="noopener ugc nofollow" target="_blank">SplashScreen</a></code> API，可以为所有应用启用新的应用启动动画。这包括启动时进入应用程序的动作，显示应用程序图标的闪屏，以及转换到应用程序本身。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lr"><img src="../Images/29d5588506d7b86b6479b0ea934fb537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GnpVyQ21ZorZoK3j556skg.gif"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图片来源:<a class="ae jt" href="https://9to5google.com/2021/06/27/android-12-animated-splash-screen/" rel="noopener ugc nofollow" target="_blank"> 9to5google </a></figcaption></figure><p id="7166" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新的体验为每个应用程序的发布带来了标准的设计元素，但它也是可定制的，因此您的应用程序可以保持其独特的品牌。</p><blockquote class="ls lt lu"><p id="68ef" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated">这类似于我们的现代方法。</p></blockquote><p id="f6fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在官网了解更多。</p><p id="c8c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="https://developer.android.com/about/versions/12/features/splash-screen" rel="noopener ugc nofollow" target="_blank">https://developer . Android . com/about/versions/12/features/splash-screen</a></p><h1 id="dcf4" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">让我们通过升级到— Android 12来测试Splash，</h1><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="c300" class="ll jv hi lh b fi lm ln l lo lp"> compileSdkVersion("android-S")</span><span id="714d" class="ll jv hi lh b fi lq ln l lo lp"> defaultConfig <strong class="lh hj">{<br/>        </strong>applicationId "com.template.androidtemplate"<br/>        minSdkVersion 16<br/>        targetSdkVersion("S")<br/>        versionCode 1<br/>        versionName "1.0"<br/>    <strong class="lh hj">}</strong></span></pre><p id="6b40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">升级后，从<strong class="ih hj">无处</strong>，Boom A错误弹出，你的应用安装失败。</p><blockquote class="ls lt lu"><p id="5680" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated"><code class="du mp mq mr lh b"><em class="hi">Installation did not succeed.<br/>The application could not be installed: INSTALL_FAILED_VERIFICATION_FAILURE<br/>List of apks:<br/>[0] ‘…/build/outputs/apk/debug/app-debug.apk’<br/>Installation failed due to: ‘null’</em></code></p></blockquote><p id="a365" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者</p><blockquote class="ls lt lu"><p id="1641" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated"><code class="du mp mq mr lh b"><em class="hi">INSTALL_PARSE_FAILED_MANIFEST_MALFORMED: Failed parse during installPackageLI:</em></code></p><p id="fa84" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated"><code class="du mp mq mr lh b"><em class="hi">Targeting S+ (version 10000 and above) requires that an explicit value for android:exported be defined when intent filters are present”</em></code></p></blockquote><h1 id="966d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">去搞定<code class="du mp mq mr lh b"><em class="ms">Installation failed</em></code>？👼</h1><p id="81e5" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">将属性<code class="du mp mq mr lh b">android:exported</code>添加到任何在应用程序的<code class="du mp mq mr lh b">AndroidManifest.xml</code>文件中声明了<code class="du mp mq mr lh b">&lt;intent-filter&gt;</code>的<code class="du mp mq mr lh b">&lt;activity&gt;</code>、<code class="du mp mq mr lh b">&lt;service&gt;</code>或<code class="du mp mq mr lh b">&lt;receiver&gt;</code>组件</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="092e" class="ll jv hi lh b fi lm ln l lo lp">&lt;activity<br/>    android:name=".ui.splash.view.SplashActivity"<br/>    android:launchMode="singleTask"<br/>    <strong class="lh hj">android:exported="true"</strong><br/>    android:theme="@style/SplashScreenModern"&gt;<br/><br/>    &lt;intent-filter<br/>        &gt;<br/>        &lt;action android:name="android.intent.action.MAIN" /&gt;<br/><br/>        &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br/>    &lt;/intent-filter&gt;<br/><br/>&lt;/activity&gt;</span></pre><h1 id="c62a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">现在对于闪屏，</h1><p id="a6b6" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">为了测试效果和变化，让我们先观察一下<strong class="ih hj">白色</strong> &amp; <strong class="ih hj">黑色</strong>颜色背景。</p><p id="66f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建新的<strong class="ih hj"> styles.xml或theme.xml (v31)。</strong></p><blockquote class="ls lt lu"><p id="5d55" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated">如前所述，这类似于我们的现代方法。</p></blockquote><p id="8261" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">唯一的区别</strong>是，我们需要为Android 12移除<strong class="ih hj">Android:window background</strong>。</p><h1 id="77e5" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">为什么？</h1><p id="ff7b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">默认情况下，你的启动图标将作为一个闪屏视图。</p><blockquote class="ls lt lu"><p id="90f7" class="if ig lv ih b ii ij ik il im in io ip lw ir is it lx iv iw ix ly iz ja jb jc hb bi translated">不需要创建drawable。只需添加你的启动图标&amp;砰，这是一个闪屏标志。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mt"><img src="../Images/9fb961d94cbb80466f00f0dd6e928cb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*OUucKWD9RM6IAsm2.jpg"/></div></figure><p id="90eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du mp mq mr lh b">As documented, SplashScreen</code>使用你的主题的<code class="du mp mq mr lh b">windowBackground</code>如果它是单色的，使用<strong class="ih hj">启动器图标</strong>。闪屏的定制是通过向应用程序主题添加属性来完成的。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="137a" class="ll jv hi lh b fi lm ln l lo lp">&lt;style name="SplashScreenModern" parent="Theme.AppCompat.NoActionBar"&gt;<br/>    &lt;item name="colorPrimary"&gt;@color/colorWhite&lt;/item&gt;<br/>    &lt;item name="colorPrimaryDark"&gt;@color/colorWhite&lt;/item&gt;<br/>    &lt;item name="colorAccent"&gt;@color/colorWhite&lt;/item&gt;<br/>    <strong class="lh hj">&lt;item name="android:windowSplashScreenBackground"&gt;@color/colorBlack&lt;/item&gt;</strong><br/>    &lt;item name="android:statusBarColor"&gt;@color/colorWhite&lt;/item&gt;<br/>    &lt;item name="android:windowLightStatusBar"&gt;true&lt;/item&gt;<br/>    &lt;item name="android:windowLightNavigationBar"&gt;true&lt;/item&gt;<br/>&lt;/style&gt;</span></pre><p id="1c29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是它可以通过多种方式进行定制。神奇而简单，对吧？</p><p id="c5dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你。</p><p id="79c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再见&amp;喵😸</p></div></div>    
</body>
</html>