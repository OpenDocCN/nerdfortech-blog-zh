<html>
<head>
<title>Fetching API using useEffect hook in React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 React.js 中的 useEffect 挂钩提取 API</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/fetching-api-using-useeffect-hook-in-react-js-7b9b34e427ca?source=collection_archive---------2-----------------------#2021-04-14">https://medium.com/nerd-for-tech/fetching-api-using-useeffect-hook-in-react-js-7b9b34e427ca?source=collection_archive---------2-----------------------#2021-04-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f0db8064198e0bd0b938060dd52bc57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*byF4YDSMRBwtKi0wWgiqAQ.png"/></div></div></figure><h1 id="2b5a" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="26a9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">各位读者好！在本教程中，我们将了解如何使用 React.js 应用程序内部执行 API 调用。为此我们将使用<strong class="jq hj"> useEffect() </strong>钩子和<strong class="jq hj"> Axios </strong>库。</p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><h2 id="3090" class="kt ir hi bd is ku kv kw iw kx ky kz ja jz la lb je kd lc ld ji kh le lf jm lg bi translated">先决条件</h2><p id="fc76" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">像往常一样，我们需要安装<strong class="jq hj">节点</strong>和<strong class="jq hj"> NPM 或纱线</strong>。我的版本为<strong class="jq hj"> NPM -v </strong> (6.14.11)和<strong class="jq hj">节点-v </strong> (14.16.0)</p><p id="6593" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">说到这里，我们可以创建新的 React 应用程序。<br/><strong class="jq hj">npx create-react-app“your-app-name”。</strong>现在让我们用<strong class="jq hj"> npm start 开始我们的新应用程序。</strong>我们应该看到这一点:</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/e412517c9d6278f5c5ae3618e557a139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JW3y9FQ03TG-ub70ZH__zQ.png"/></div></div></figure><p id="e614" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">我们都准备好了，现在开始吃吧。我们将安装前面提到的<strong class="jq hj"> Axios </strong>库，包括:</p><p id="92c7" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated"><strong class="jq hj"> npm 安装 axios </strong></p><p id="6b17" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">我们现在准备创建一个 React 组件，并在其中使用我们的钩子。<br/>创建名为<strong class="jq hj">组件</strong>的文件夹，在里面放入文件<strong class="jq hj"> Posts.js </strong>，像这样:</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/8daa4c613370923711e918bcef6f3c74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMbRpBocHw9O8mA5u8WOcg.png"/></div></div></figure><p id="da50" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">非常基本的组件，只有简单的 h1，所以我们可以确保我们在正确的轨道上！我们必须将我们的<strong class="jq hj">帖子</strong>组件插入到<strong class="jq hj"> App.js </strong>文件中。这是我们有的。我们去掉了<strong class="jq hj"> App.js </strong>中的所有启动代码，现在我们只有<strong class="jq hj"> Posts </strong>组件。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/b691b5799ee14c77e5da4978897b1310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LsNmorztpRnoYiVljNfU7w.png"/></div></div></figure><p id="5f92" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">回到浏览器，果然我们得到了我们的<strong class="jq hj">帖子标题。</strong></p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/d3f9e90fece87cc18f84f72030764d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LmtaB5ZlqMbj8r8zOXW40A.png"/></div></div></figure></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="6d72" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">好了，现在我们准备继续前进。我将使用来自<strong class="jq hj"> jsonplaceholder、</strong>的 Posts api，现在，如果你使用自己的 api，完全相同的事情将会发生。<br/>我们将从向【https://jsonplaceholder.typicode.com/posts】<strong class="jq hj">`、</strong>发出 get 请求开始，我们将记录结果以查看我们得到了什么。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/dcbd21471b6e1ff97dd891a7158abbc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yINyuN97rub3MvdVJJvREw.png"/></div></div></figure><p id="0b92" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">返回<strong class="jq hj"> axios get 请求</strong>的简单函数，之后我们只是调用函数本身，这样我们就可以看到结果。因为我在单独的函数中有这个逻辑，所以你可以猜测这将来自单独的文件，如服务或类似的东西。果然，我们在控制台中看到了 100 个帖子。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/15fc7b7c9e5d4f25f99a92f433387a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ijc9o0WI_q8Rdg2ChOA94w.png"/></div></div></figure><p id="c057" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">由于我们不喜欢调用函数，我们将利用<strong class="jq hj"> useEffect() </strong> hook，并以这种方式发出 http 请求。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/0af684d23217b157e9eb45e368280e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YPUwuIRZPAbd1r_K8XaUOg.png"/></div></div></figure><p id="5abf" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">我们首先从<strong class="jq hj"> react </strong>中导入<strong class="jq hj"> useEffect </strong>，然后在我们的组件中使用它。就像我之前说的，<strong class="jq hj">我把</strong>函数留在里面的唯一原因是，我试图在我们的应用程序中模拟服务。<br/>无论如何，我们正在调用 useEffect 中的函数，我们将依赖列表数组留空，因为此时我们不依赖任何东西。如果我们使用基于类的组件，这种特殊情况基本上与<strong class="jq hj">componentdimount()</strong>方法完全相同。</p><p id="e41b" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">当然，我们的帖子和以前一样。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/deda040f9a8a37e5c3352cc4a7ba367c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dLj87gCU94p6yfBKaHraaQ.png"/></div></div></figure><p id="c5c5" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">现在让我们把它们显示在屏幕上，这样我们就能看到全貌了。我将在一个变量中保存帖子，然后映射槽并在屏幕上显示它们。</p><p id="372a" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">为此，我们将使用我们在上一篇文章中学到的钩子，那就是<strong class="jq hj"> useState() </strong>钩子。这是我们将拥有的:</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/9ddfe9e1d6b43f0a4d192a39ff9bd5e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hkxmQnwurKGi2WcV2EHcEQ.png"/></div></div></figure><p id="1094" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">以及它在页面上的外观:</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/cf48178f0b3008d2c2c53c7904d81f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADIP7m5tfFSDfKaqVi-7_g.png"/></div></div></figure><p id="1ce8" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">没什么特别的，我们没有使用任何 css 库或编写自定义 css，因为这不是本文的目的。</p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="9aaa" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">这就是 it 伙计们，我们已经看到了如何制作一个组件，并使用<strong class="jq hj"> useEffect() </strong>钩子来加载一些数据，结合<strong class="jq hj"> Axios </strong> http 请求和<strong class="jq hj"> useState() </strong>钩子，这样我们就可以在我们的组件中存储数据。接下来，我们通过数据映射，并将其渲染到页面上。</p><p id="2f0a" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">希望你喜欢它，一定要看看我以前的文章:</p><p id="ea3d" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated"><a class="ae ls" rel="noopener" href="/nerd-for-tech/net-jwt-authentication-with-mongodb-9bca4a33d3f0"> <strong class="jq hj">。Net 与 JWT 认证</strong> </a>和<a class="ae ls" rel="noopener" href="/nerd-for-tech/react-js-spa-with-net-core-5-8e419834e48"> <strong class="jq hj">反应 SPA 与。净芯 5 </strong> </a></p><p id="e69a" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated">分享并留下评论。<br/>你可以一直用一杯<a class="ae ls" href="https://www.buymeacoffee.com/tonicfilip" rel="noopener ugc nofollow" target="_blank"> ☕ </a>支持我</p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="beb8" class="pw-post-body-paragraph jo jp hi jq b jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ll kj kk kl hb bi translated"><strong class="jq hj">LinkedIn</strong>:<a class="ae ls" href="http://www.linkedin.com/in/filip-tonic" rel="noopener ugc nofollow" target="_blank">www.linkedin.com/in/filip-tonic</a><br/><strong class="jq hj">邮箱</strong>:tonicfilip@outlook.com</p></div></div>    
</body>
</html>