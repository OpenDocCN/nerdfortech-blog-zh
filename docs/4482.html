<html>
<head>
<title>2.5D Game Development: Puzzles: Part 3 — Pushing Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2.5D 游戏开发:谜题:第 3 部分—推动物体</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/2-5d-game-development-puzzles-part-3-pushing-objects-8e49b03068f7?source=collection_archive---------19-----------------------#2021-07-22">https://medium.com/nerd-for-tech/2-5d-game-development-puzzles-part-3-pushing-objects-8e49b03068f7?source=collection_archive---------19-----------------------#2021-07-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7231" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在跳墙成功到达关卡顶端后，有一个箱子需要被推到稍微凸起的平台上。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/bfe38d0582afca298440003e0b404d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jmLML6ceM3Ma1cacEDG60w.png"/></div></div></figure><p id="8097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的目标是能够在碰撞时推动这个盒子，在特定的点上，平台会变成蓝色。</p><p id="46ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了与这个盒子碰撞，它需要一个碰撞器和一个刚体组件。我在这些文章中只讨论过触发碰撞器，所以这次会有一点不同。我没有设置触发器为真！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jp"><img src="../Images/d23b0f691cb244cadd54fbf3a876364b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*Ea630Qp3oOB1L63k97n1oQ.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">箱式组件</figcaption></figure><p id="d7ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我现在需要确保玩家能够检测到盒子。这是剧本。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/e83a4c4132b25ed9296f66853194415f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*A0TYiPUQa6tPloxAmkqFGg.png"/></div></div></figure><p id="7d54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我又在用 OnControllerColliderHit()了。为了检查控制器点击了什么，我们需要使用 hit.transform.tag。如果框不为空，我计算推动方向。这是一个新的 Vector3，它在 x 轴上接收点击信息，在 y 和 z 轴上什么也不接收。pushPower 是一个全局 float 变量，在这个脚本的顶部初始化。我给了它一个[SerializedField]属性，以便能够在检查器中输入值。</p><p id="1760" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在玩家可以碰撞和推动箱子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/410f04c9ef22ec323b15eb44601d7237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dV-5skejRqdn1WeyrxpxWQ.gif"/></div></div></figure><p id="2a2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在平台。我希望盒子一旦覆盖了平台的特定部分，就停止被推动。如果我简单地使用一个触发碰撞器，一旦碰撞发生，设置盒子在刚体上运动，盒子将进入碰撞器并立即停止。我需要计算盒子的距离和平台中间的距离。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jw"><img src="../Images/327f99415816813c9130f176919ebf34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WIKCgsjNHotU5G_W_FuW5g.png"/></div></div></figure><p id="35c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在使用 OnTriggerStay()，这样我就可以不断地更新距离。这基本上是说，如果 other.tag 是盒子，distance 是一个新的向量，它的距离是从平台到 other.transform.position 的变换计算的。我用 Debug.Log 打印出距离。</p><p id="6aa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了测试盒子需要在平台上覆盖多少，我进入播放模式，实际上强制盒子和平台之间的碰撞，因为我正在打印距离，它会在左下角不断更新。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/2898a34f734acac44257f3991d74870e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8eDPVaTfx1llf7hmPL_LCQ.gif"/></div></div></figure><p id="7cf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当距离大约为 0.05f 时，我将盒子的刚体设为运动学。现在，它不会移动时，与碰撞。因为 MeshRenderer 实际上是平台的子对象，所以我必须获取 ComponentInChildren。当距离为 0.05f 时，它会改变颜色。</p><p id="8ad4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以想象这对几个游戏开发任务有多有用。当距离为 0.05f 时，您可能会有一个超级棒的动画发生。您也可以通过说 if(distance &gt; *insertnumberhere*)在相反的方向计算并触发事情发生。可能性是无限的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/28eee293d38c567d145b7c45b9c62da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AxilNLZgArffDuJ2ahpQZw.gif"/></div></div></figure><p id="796a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一组文章中，我将导入一些模型和关卡资源到一个新的场景中。他们将涵盖动画触发的不同方面和实现整洁的机制，如壁架抓取和梯子！敬请期待！</p></div></div>    
</body>
</html>