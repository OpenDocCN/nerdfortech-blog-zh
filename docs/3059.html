<html>
<head>
<title>Thunks and Action creators in React/Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React/Redux中的Thunks和动作创建器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/thunks-and-action-creators-in-react-redux-3e34835e593b?source=collection_archive---------15-----------------------#2021-05-28">https://medium.com/nerd-for-tech/thunks-and-action-creators-in-react-redux-3e34835e593b?source=collection_archive---------15-----------------------#2021-05-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d1ef3c66d47172952e0b75638577c3dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IF0iZniR7_L1k-y3"/></div></div></figure><p id="6b12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嘿，怎么了！希望你反应良好。所以，首先我要为在讨论redux基础知识之前直接深入到高级redux中而道歉，但我向你保证，在不久的将来，你将能够从我的博客中学习redux基础知识。但是如果你知道redux基础知识，并且知道使用redux工具包，那么这可能是一篇很好的文章，可以让你的应用程序状态管理技能更上一层楼。</p><h2 id="30e3" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">当行动创造者开始行动时。</h2><p id="9586" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">当使用redux时，不能使用useEffect或react生命周期方法在片内调用副作用。那我们怎么做呢？你可以用两种方法来做这件事。一种方法是调用组件内部的副作用，另一种方法是我们今天要讨论的动作创建器。基本上，你可以使用action creators将商品存储在后端的购物车中，这不会在服务器刷新时删除购物车状态中的商品。</p><h2 id="6655" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">什么是thunk？</h2><p id="ebf1" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">Thunk是一个函数(async是可能的),它由另一个函数返回，允许您在执行主代码之前执行一些代码。</p><p id="1e4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以首先你必须在你的终端上运行下面的命令来安装一些软件包</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="6eb6" class="jo jp hi kt b fi kx ky l kz la">npm install redux(Not necessary if you directly run the third command)</span><span id="4b90" class="jo jp hi kt b fi lb ky l kz la">npm install react-redux</span><span id="b142" class="jo jp hi kt b fi lb ky l kz la">npm install @reduxjs/toolkit</span></pre><p id="3b5e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，让我们在我们的应用程序中创建一个store a store，并对其进行如下配置。</p><p id="faa6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">步骤1:在一个单独的文档中创建一个切片(不管你是否使用同一个文件)</p><p id="7f18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">步骤2:从切片文件导入切片缩减器，并使用从react-redux库中导入的ConfigureStore方法配置存储</p><p id="c3f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">步骤3:使用从react-redux库导入的Provider组件将App组件包装在index.js文件中，index . js文件是组件树中最高的组件。(参考以下代码片段)</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="lc ld l"/></div></figure><p id="6451" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后创建另一个文件名作为购物车动作创建者。并在文件中创建一个函数，该函数返回另一个函数，一旦购物车状态发生变化，该函数就将购物车数据发送到后端服务器。</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="lc ld l"/></div></figure><p id="e8fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们可以将这个动作创建器导入到组件中，并产生如下副作用。</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="lc ld l"/></div></figure><p id="ce9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你在上面看到的，我们可以随着购物车的变化向后端服务器发送数据。您也可以使用相同的方法从服务器获取数据，但是您必须调用CartSlice操作，用获取的数据替换最后的购物车状态。</p><p id="52f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">原来如此。希望你能理解。非常感谢</p></div></div>    
</body>
</html>