<html>
<head>
<title>Kubernetes : The Rise of Containers and Microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes:容器和微服务的兴起</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/kubernetes-the-rise-of-containers-and-microservices-50abff7c2cee?source=collection_archive---------2-----------------------#2020-12-26">https://medium.com/nerd-for-tech/kubernetes-the-rise-of-containers-and-microservices-50abff7c2cee?source=collection_archive---------2-----------------------#2020-12-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/8ccbc9dbbd0e2b7ae98d8e2d077e50ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*W1JBQ93EghiEXfARutTocQ.png"/></div></figure><h1 id="23aa" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated"><strong class="ak">概述</strong></h1><p id="5635" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">构建和部署软件/应用程序已经成为当今互联网时代运营业务的关键任务之一，这就是为什么为其业务或初创公司编写代码或软件的公司和个人总是在寻找有效利用硬件资源的方法来构建可以跨平台运行的安全、无错误的应用程序。</p><p id="5ce4" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">最初，软件通常被写成一整块代码，每当需要对整块代码中的单个实体进行更改或更新时，这都是一项艰巨的任务。为了解决这个问题，软件架构发生了变化。单片被微服务所取代，微服务是将软件编写成碎片。微服务过去部署在所谓的虚拟机(VM)中，托管在云中或本地服务器上。所有这些虚拟机基本上都是软件计算机，具有与物理计算机相同的功能(许多虚拟机可以从一台物理计算机创建)，由一个称为虚拟机管理程序的层进行管理。</p><p id="afc6" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">但是在过去的5-8年里，市场发生了巨大的变化，从虚拟化转向了容器化。容器是对这种基础设施管理系统的升级。容器是平台和主机无关的，这意味着用不同语言编写的微服务可以作为最终产品在不同的操作系统上运行，没有任何麻烦。它们比虚拟机快得多。</p><p id="7358" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">所以，集装箱是好的，但是到底什么是集装箱化，为什么它的需求增长如此之快，kubernetes如何适应这一切？让我们找出答案。</p><h1 id="d2bf" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated"><strong class="ak">什么是集装箱化？</strong></h1><p id="4de8" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">容器化已经成为软件开发的一个主要趋势，作为虚拟化的替代或伴生物。简而言之，它包括封装或打包软件代码及其所有依赖项，以便它可以在任何基础设施上统一一致地运行。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es kn"><img src="../Images/9988bcbc5c38f0b66bec3812ac7fae1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCKRQHks0RX0loqUkcc-rg.png"/></div></div></figure><p id="ac72" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">容器化和进程隔离的概念已经有几十年的历史了，但是2013年开源<strong class="jm hj"> Docker Engine </strong>的出现，这是一个具有简单开发工具和通用打包方法的容器行业标准，加速了这项技术的采用。研究公司Gartner预计，到2020年，超过50%的公司将使用容器技术。IBM进行的2017年末<a class="ae kw" href="https://www.ibm.com/cloud-computing/info/container-development/" rel="noopener ugc nofollow" target="_blank">调查</a>的结果表明，采用的速度甚至更快，结果显示59%的采用者提高了应用质量并减少了缺陷。</p><p id="cd0d" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">简而言之，容器化允许应用程序“编写一次，在任何地方运行”就开发过程和供应商兼容性而言，这种可移植性非常重要。它还提供了其他显著的优势，如故障隔离、易管理性和安全性等。</p><h2 id="dd77" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">虚拟化与容器化</h2><p id="f83c" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">容器经常被比作虚拟机，因为它们都允许多种类型的软件在被包含的环境中运行。然而，事实证明，容器技术提供了比虚拟化更大的优势，并迅速成为IT专业人员青睐的技术。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es ll"><img src="../Images/96defcf11ce51bbb419a132b4fb65a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sG83L-du2XKTOnasoGG3WQ.jpeg"/></div></div></figure><p id="8783" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">虚拟化技术允许多个操作系统和软件应用程序同时运行，并共享单台物理计算机的资源。例如，一个IT组织可以在同一台服务器上运行Windows和Linux或多个版本的操作系统，以及多个应用程序。每个应用程序及其相关文件、库和依赖项，包括操作系统(OS)的副本，都打包成一个虚拟机。通过在一台物理机上运行多个虚拟机，可以显著节省资本、运营和能源成本。</p><p id="4870" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">另一方面，容器化可以更有效地利用计算资源。容器创建单个可执行软件包，将应用程序代码与运行所需的所有相关配置文件、库和依赖项捆绑在一起。然而，与虚拟机不同，容器不<em class="lm">而</em>捆绑在操作系统的副本中。相反，容器运行时引擎被安装在主机系统的操作系统上，成为计算系统上的所有容器共享相同OS的通道。如上所述，容器通常被称为“轻量级的”，因为它们共享机器的操作系统内核，并且不需要在每个应用程序内关联操作系统的开销(如上图所示的VM的情况)。</p><h2 id="6552" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">集装箱化的好处</h2><p id="cdf3" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">容器化为开发人员和开发团队提供了很多好处。以下是一些例子</p><p id="6a80" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj"/></p><p id="9b17" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj"> <em class="lm">敏捷性:</em> </strong>容器生态系统已经转向由开放容器倡议(OCI)管理的引擎。软件开发人员可以继续使用敏捷或DevOps工具和流程来快速开发和增强应用程序。</p><p id="a414" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj"> <em class="lm">效率:</em> </strong>在容器化环境下运行的软件共享机器的OS内核，容器内的应用层可以跨容器共享。因此，容器在容量上本来就比VM小，并且需要的启动时间也更少。</p><p id="772c" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj"> <em class="lm">安全性:</em> </strong>应用程序作为容器的隔离性本质上防止了恶意代码的入侵影响其他容器或主机系统。此外，可以定义安全权限，以自动阻止不需要的组件进入容器或限制与不必要资源的通信。</p><h1 id="7d94" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated"><strong class="ak">什么是Kubernetes？</strong></h1><p id="a590" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">好了，现在我们知道了什么是容器化，它是如何工作的，以及它与以前使用的虚拟化技术相比有什么优势。但是Kubernetes是如何融入这一切的呢？</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es ln"><img src="../Images/85a80f461fd991dbb810619cf11d4f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B05pbIVNN9K-OzVIjyFr-Q.png"/></div></div></figure><p id="07c5" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Kubernetes最初由Google开发，是一个可移植、可扩展的开源平台，用于管理容器化的工作负载和服务，促进了声明式配置和自动化。它有一个庞大的、快速增长的生态系统。Kubernetes的服务、支持和工具随处可见。</p><p id="9579" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">这就是kubernetes的定义，它是一个<strong class="jm hj">容器编排</strong>工具，但是我们为什么需要它呢？我们为什么不能使用Docker或CRI-O等标准引擎来手动管理容器呢？这有两个主要原因</p><ol class=""><li id="adc6" class="lo lp hi jm b jn ki jr kj jv lq jz lr kd ls kh lt lu lv lw bi translated">软件公司现在每天部署数千个容器实例，这是他们必须管理的复杂规模。</li><li id="279e" class="lo lp hi jm b jn lx jr ly jv lz jz ma kd mb kh lt lu lv lw bi translated">在生产环境中，您需要管理运行应用程序的容器，并确保没有停机。例如，如果一个容器关闭，另一个容器需要启动。</li></ol><p id="9162" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">这就是Kubernetes的用武之地，现在我们可以讨论容器编排的含义了。</p><p id="a765" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">一个<strong class="jm hj">容器编排</strong>平台自动化了容器化工作负载和服务的安装、扩展和管理。容器编排平台可以简化管理任务，如扩展容器化的应用程序，推出新版本的应用程序，以及提供监控、日志记录和调试等功能。</p><p id="0293" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Kubernetes已经成为容器编排的事实上的标准(最初由Google开源，基于他们的内部项目Borg ),它最初自动化了Linux容器功能。Kubernetes支持许多容器引擎，比如Docker(现在1.20版本中已弃用)，但它也支持任何符合开放容器倡议(Open Container Initiative，OCI)容器图像格式和运行时标准的容器系统。</p><h2 id="8693" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">关键特征</h2><p id="228c" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Kubernetes为您提供主要功能，例如:</p><ul class=""><li id="5345" class="lo lp hi jm b jn ki jr kj jv lq jz lr kd ls kh mc lu lv lw bi translated"><strong class="jm hj">服务发现和负载平衡</strong> Kubernetes可以使用DNS名称或自己的IP地址公开容器。如果容器的流量很高，Kubernetes能够对网络流量进行负载平衡和分配，从而使部署稳定。</li><li id="c9a6" class="lo lp hi jm b jn lx jr ly jv lz jz ma kd mb kh mc lu lv lw bi translated"><strong class="jm hj">存储协调</strong> Kubernetes允许您自动挂载自己选择的存储系统，例如本地存储、公共云提供商等等。</li><li id="cbf2" class="lo lp hi jm b jn lx jr ly jv lz jz ma kd mb kh mc lu lv lw bi translated"><strong class="jm hj">自动化部署和回滚</strong>您可以使用Kubernetes描述您部署的容器的期望状态，它可以以可控的速度将实际状态更改为期望状态。例如，您可以自动化Kubernetes来为您的部署创建新的容器，删除现有的容器，并将它们的所有资源应用到新的容器中。</li><li id="b74e" class="lo lp hi jm b jn lx jr ly jv lz jz ma kd mb kh mc lu lv lw bi translated">你为Kubernetes提供了一个节点集群，它可以使用这个集群来运行容器化的任务。您告诉Kubernetes每个容器需要多少CPU和内存(RAM)。Kubernetes可以在节点上安装容器，以充分利用资源。</li><li id="84d4" class="lo lp hi jm b jn lx jr ly jv lz jz ma kd mb kh mc lu lv lw bi translated"><strong class="jm hj">自我修复</strong> Kubernetes重新启动失败的容器，替换容器，终止对用户定义的健康检查没有响应的容器，并且在它们准备好服务之前不向客户端通告它们。</li><li id="3e11" class="lo lp hi jm b jn lx jr ly jv lz jz ma kd mb kh mc lu lv lw bi translated"><strong class="jm hj">秘密和配置管理</strong> Kubernetes允许您存储和管理敏感信息，比如密码、OAuth令牌和SSH密钥。您可以部署和更新机密和应用程序配置，而无需重新构建容器映像，也无需在堆栈配置中暴露机密</li></ul><h2 id="46ba" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated"><strong class="ak">架构</strong></h2><p id="1d8c" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">好了，现在我们了解了kubernetes是什么，以及它如何帮助在生产级别部署和管理容器化应用程序或微服务，让我们来看看它的内部工作原理。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es md"><img src="../Images/1cba92c030f714e7eba9f274ebfab722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yWa0e48RSZXfDReb4O1oQ.jpeg"/></div></div></figure><p id="ada6" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">当您部署Kubernetes时，您会得到一个集群，它是Kubernetes的核心组件。集群由许多虚拟机或物理机组成，每个虚拟机或物理机都作为主节点或节点提供特定的功能。每个节点托管一个或多个容器(包含您的应用程序)的组，主节点与节点就何时创建或销毁容器进行通信。同时，它告诉节点如何根据新的容器排列重新路由流量。(我们可以在上图中看到一般的Kubernetes集群架构。)现在让我们看看集群的各个组件。</p><p id="17d0" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj">主<em class="lm">主</em>主</strong></p><p id="7f5a" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Kubernetes master是一个访问点(或控制平面)，管理员和其他用户通过它与集群进行交互，以管理容器的调度和部署。一个群集始终至少有一个主服务器，但根据群集的复制模式，可能有多个主服务器。主服务器将整个集群的状态和配置数据存储在<strong class="jm hj"> ectd </strong>中，这是一个持久的分布式键值数据存储。</p><p id="ad41" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">主设备通过<strong class="jm hj"> kube-apiserver </strong>与集群的其他设备通信，这是控制平面的主要接入点。例如，kube-apiserver确保etcd中的配置与集群中部署的容器的配置相匹配。</p><p id="1da7" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj"> <em class="lm">节点</em> </strong></p><p id="2034" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Kubernetes通过将容器放入Pods中在<em class="lm">节点</em>上运行来运行您的工作负载。根据群集的不同，节点可以是虚拟机或物理机。每个节点都包含运行pod所需的服务，由控制平面管理。</p><p id="a97a" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Kubernetes集群中的所有节点都必须配置一个容器运行时，比如<a class="ae kw" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hj"> Docker </strong> </a>。当Kubernetes将容器部署到集群中的节点时，容器运行时启动并管理容器。您的应用程序(web服务器、数据库、API服务器等。)在容器内部运行。</p><p id="40a1" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">每个Kubernetes节点运行一个名为<strong class="jm hj"> kubelet </strong>的代理进程，负责管理节点的状态:根据来自控制平面的指令启动、停止和维护应用程序容器。</p><p id="7ef9" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">kube-proxy是一个运行在集群节点上的网络代理。它还充当节点上运行的服务的负载平衡器。</p><p id="72b4" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">最后，一个<strong class="jm hj"> pod </strong>是基本的调度单元<strong class="jm hj">，</strong>，它由一个或多个容器组成，保证这些容器共同位于主机上，并且可以共享资源。在集群中，每个pod都分配有一个唯一的IP地址，允许应用程序无冲突地使用端口。</p><p id="67e3" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj"> <em class="lm">部署和副本:</em> </strong></p><p id="69e9" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">一个<a class="ae kw" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hj">部署</strong> </a>是一个YAML对象，它为每个pod定义了容器实例的数量，称为<strong class="jm hj">副本</strong>。您可以通过<strong class="jm hj"> ReplicaSet </strong>定义您希望在集群中运行的副本数量，它是部署对象的一部分。因此，例如，如果运行pod的节点死亡，副本集将确保在另一个可用节点上调度另一个pod。</p><p id="d8da" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">一个<strong class="jm hj">守护进程集</strong>在您指定的节点上部署并运行一个特定的守护进程(在一个pod中)。它们通常用于为吊舱提供服务或维护。例如，守护进程集就是New Relic Infrastructure如何在集群中的所有节点上部署基础结构代理。</p><h1 id="0145" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">用例</h1><p id="eccd" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">虽然Kubernetes使企业IT管理员能够更好地控制他们的基础设施，并最终控制应用程序的性能，但要充分利用这项技术，还有很多需要学习的地方，下面是一些常见的使用案例，展示了Kubernetes的强大功能</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es me"><img src="../Images/9d19cd3ea14efe94d8f1bf084c969307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ROxu_BsOIGKOZPGJaPHgzw.png"/></div></div></figure><h2 id="ff24" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">无状态应用程序的部署</h2><p id="73f8" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在Kubernetes上运行的一个非常流行的无状态应用是<a class="ae kw" href="https://nginx.com/" rel="noopener ugc nofollow" target="_blank"> nginx </a>，一个开源的网络服务器。在Kubernetes上运行nginx需要一个描述pod和底层容器的部署YAML文件。部署这样的应用程序很容易</p><h2 id="3fcc" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">自我修复和扩展服务</h2><p id="1ed4" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Kubernetes的流程单元可以细分为pod和服务。吊舱是Kubernetes上可用的较小的部署单元。一个pod可以包含几个容器，这些容器将进行一些相关的通信，例如网络和存储。服务是提供对一组容器的可访问性的接口。这些服务可以供内部或公共访问，并且可以对几个容器实例进行负载平衡。</p><p id="1ee5" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">豆荚是凡人:一旦完成，他们从集群中消失。Pod终止可能是自然的，也可能是由于错误。部署是创建和维护pod的最现代的Kubernetes模块。使用单个描述文件，开发人员可以指定部署、保持运行、扩展和升级pod所需的一切。</p><h2 id="e329" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">无服务器架构(没有供应商限制)</h2><p id="5b64" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">自从AWS推出Lambda以来，无服务器架构已经风靡全球。原理很简单:开发代码就好，其他的不用管。服务器和可伸缩性由云提供商处理，代码只需开发为处理特定事件的功能:从HTTP请求到队列消息。</p><p id="1de0" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">供应商锁定是这种解决方案的主要缺点。如果不重构大部分代码，几乎不可能改变云提供商。有一些像Serverless这样的解决方案寻求跨云的标准化功能代码。另一个解决方案是使用Kubernetes集群来创建一个无供应商的无服务器平台。如上所述，K8S抽象出了云服务器之间的区别。目前，两个流行的框架将集群虚拟化为无服务器平台:Kubeless和裂变。</p><h2 id="a490" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">混合和多云</h2><p id="7aec" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">混合云利用来自本地传统数据中心和云提供商的计算资源。当公司在内部数据中心拥有一些服务器，并且希望使用云的无限计算资源来扩展或替代公司资源时，通常会使用混合云。另一方面，多云指的是使用多个云提供商来处理计算资源的云。多云通常用于避免供应商锁定，并降低云提供商在执行任务关键型运营时停机的风险。</p><p id="8cd9" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">这两种解决方案都是由Kubernetes联合会提出的。创建多个集群，每个云或本地数据中心一个集群，由联盟管理。该联盟同步计算资源，甚至允许跨集群发现</p><h2 id="1cd3" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">Kubernetes的CI/CD</h2><p id="1fdb" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Kubernetes的开放API给开发者带来了很多好处。这种控制水平意味着开发人员可以毫不费力地将Kubernetes集成到他们的自动化CI/CD工作流程中。因此，即使Kubernetes没有提供任何现成的CI/CD特性，也可以很容易地将Kubernetes添加到CI/CD管道中。例如，使用Kubernetes包管理器Helm将Jenkins作为pod运行</p><h1 id="acd0" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">Spotify和Kubernetes(快速案例研究)</h1><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/2263b86d76cb4e2e5f57a870e5d17a3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*_tV2cwjtjXMqcnmFEjczbA.png"/></div></figure><h2 id="2a25" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">挑战</h2><p id="e13c" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">该音频流媒体平台于2008年推出，全球月活跃用户已超过2亿。工程、基础设施和运营总监Jai Chakrabarti表示:“我们的目标是为创作者赋能，并为我们今天的所有消费者以及未来的消费者提供真正身临其境的聆听体验。Spotify是微服务和Docker的早期采用者，它通过一个名为<a class="ae kw" href="https://github.com/spotify/helios" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hj"> Helios </strong> </a> <strong class="jm hj">的本土容器编排系统，将跨其虚拟机群运行的微服务容器化。</strong>到2017年底，情况变得很清楚，“让一个小团队来开发这些功能，不如采用一个更大的社区支持的东西更有效率，”他说。</p><h2 id="00dd" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">Kubernetes作为救援</h2><p id="6783" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">“我们看到了在Kubernetes周围成长起来的令人惊叹的社区，我们希望成为其中的一员，”Chakrabarti说。Kubernetes比Helios功能更丰富。此外，“我们希望从更高的速度和更低的成本中获益，并在最佳实践和工具方面与行业内的其他公司保持一致。”同时，该团队希望在繁荣的Kubernetes社区贡献自己的专业知识和影响力。这一迁移将与太阳神的运行同时进行，可能会顺利进行，因为“Kubernetes非常适合作为太阳神的补充和替代，”Chakrabarti说。</p><h2 id="aefd" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">影响</h2><p id="543a" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">该团队在2018年花了大部分时间解决迁移所需的核心技术问题，这一工作于当年晚些时候开始，是2019年的一大重点。Chakrabarti说:“我们的车队中有一小部分已经迁移到Kubernetes，我们从我们的内部团队那里听到的一些事情是，他们不太需要专注于手动容量供应，而是有更多时间专注于为Spotify提供功能。”网站可靠性工程师温升豪说，目前在Kubernetes上运行的最大服务每秒处理大约1000万次请求，并从自动伸缩中受益匪浅。此外，他补充说，“以前，团队必须等待一个小时才能创建一个新服务，并获得一个运行主机来运行它，但有了Kubernetes，他们可以在几秒钟内完成。”此外，借助Kubernetes的装箱和多租户功能，CPU利用率平均提高了两到三倍</p><h1 id="bc8c" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">从博格到库伯内特(库伯内特越来越多的宣传)</h1><p id="2096" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">如果你已经走了这么远，你就会知道Kubernetes的重要性，以及公司如何利用它的力量以经济高效的方式运营他们的业务。</p><p id="70a1" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Kubernetes最初由Google创建(从一个名为<strong class="jm hj"> Borg </strong>的内部项目中获得灵感)，然后捐赠给Cloud Native Computing Foundation，在生产环境中广泛用于以容错方式处理Docker容器和其他容器工具。作为一个开源产品，它可以在各种平台和系统上使用。谷歌云、微软Azure和亚马逊AWS为Kubernetes提供官方支持</p><p id="6b1e" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">但它值这么多钱还是被过度炒作了？对kubernetes和对该工具非常了解的员工的需求有了巨大的增长。Kubernetes的受欢迎程度稳步上升，2017年发布了超过4个主要版本。K8s也是2017年GitHub  中<a class="ae kw" href="https://octoverse.github.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hj">讨论最多的项目，也是评论第二多的项目。让我们找出原因</strong></a></p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es mg"><img src="../Images/07723a4d5848fd3dbfc062aa36979081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DY6TQmivPdNCP0PKNW1NkA.png"/></div></div></figure><p id="ac30" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">业内对kubernetes需求增加的主要原因是</p><h2 id="1585" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">弥合差距</h2><p id="1aa5" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Kubernetes通过弥合开发和应用程序部署之间的差距获得了主导地位。几乎在一夜之间，它已经成为运行和测试应用程序的标准方式。该技术的发展如此普遍，以至于它已经成为DevOps团队的标准，它可以用来(通过添加其他工具)完全自动化容器化应用程序的编排。</p><h2 id="7853" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated"><strong class="ak">声明式方法</strong></h2><p id="6b0e" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Kubernetes提供了一种使用容器部署应用程序的新方法。它创建了一个抽象层，可以用声明式编程而不是命令式编程来操作。这样，随着时间的推移，部署和升级服务就简单多了。</p><h2 id="9688" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">展开性</h2><p id="f731" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Kubernetes非常具有可扩展性，开发人员很喜欢这一点。有一组现有的资源，如pod、部署、<code class="du mh mi mj mk b">StatefulSets</code>、秘密、<code class="du mh mi mj mk b">ConfigMaps</code>等。但是，用户和开发者可以以<strong class="jm hj">自定义资源定义的形式添加更多的资源。</strong></p><h2 id="7398" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">模块化管理</h2><p id="e60a" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">容器允许将应用程序分解成更小的部分，并清晰地分离关注点。为单个容器映像提供的抽象层允许我们从根本上重新思考分布式应用程序是如何构建的。这种模块化的方法使得每个负责特定容器的更小、更专注的团队能够更快地进行开发。它还允许我们隔离依赖性，并更广泛地使用调优的、更小的组件。</p><p id="2bc0" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">但这不是单靠容器就能实现的；它需要一个系统来整合和编排这些模块化的部分。Kubernetes使用吊舱部分实现了这一点</p><h2 id="4a7f" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">基础设施管理和无服务器架构</h2><p id="cdf1" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">开发人员未来面临的主要挑战之一是如何更多地关注代码的细节，而不是代码运行的基础设施。为此，无服务器正成为应对这一挑战的领先架构范例之一。已经有非常先进的框架如<a class="ae kw" href="https://github.com/knative" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hj"> Knative </strong> </a>和<a class="ae kw" href="https://github.com/openfaas/faas" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hj"> OpenFaas </strong> </a>使用Kubernetes从开发者那里抽象出基础设施。</p><h2 id="7e89" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">社区</h2><p id="7ad5" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Kubernetes受欢迎的另一个重要方面是它强大的社区。Kubernetes在2015年推出1.0版本时捐赠给了一个供应商中立的家庭:云原生计算基金会。</p><p id="c5a5" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">随着项目的推进，在库伯内特的不同地区也有各种各样的社区(特殊利益团体)。他们不断增加新的功能，使其更加用户友好。</p><p id="9502" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">Cloud Native Foundation还组织了CloudNativeCon/KubeCon，这是世界上有史以来最大的开源活动。该活动通常每年举行三次，聚集了数千名技术专家和专业人士，他们希望改善Kubernetes及其生态系统，并利用每三个月发布的一些新功能。</p><h2 id="4011" class="kx in hi bd io ky kz la is lb lc ld iw jv le lf ja jz lg lh je kd li lj ji lk bi translated">结论</h2><p id="e187" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">因此，kubernetes的力量不言而喻，它现在是，将来也会是使用最多的容器编排工具，因为它使应用程序管理和部署无缝，感谢阅读。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/baf2c44344f6a3e66bb8c53a0c33f404.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*E5TE-O8vWPJrgo8x7bLjtA.png"/></div></figure></div></div>    
</body>
</html>