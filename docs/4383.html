<html>
<head>
<title>Implementing nested drag and drop in reactJS using react-beautiful-dnd</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用react-beautiful-dnd在reactJS中实现嵌套拖放</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-nested-drag-and-drop-in-reactjs-using-react-beautiful-dnd-878ce8ad70be?source=collection_archive---------1-----------------------#2021-07-19">https://medium.com/nerd-for-tech/implementing-nested-drag-and-drop-in-reactjs-using-react-beautiful-dnd-878ce8ad70be?source=collection_archive---------1-----------------------#2021-07-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1b44ca7e831fc7170cb338e1206b78c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*i87-QJXWgZ_fg9lsV4X5PQ.gif"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自freecodecamp.org</figcaption></figure><p id="13d3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">希望在一个已经是dnd对象的元素中实现一个<strong class="iw hj">拖放</strong>(以下简称<strong class="iw hj"> dnd </strong>)功能？如果你正在使用<strong class="iw hj"> react-beautiful-dnd </strong>(以下简称'<strong class="iw hj"> rbd 【T7 ')，你已经知道它不支持嵌套dnd。这意味着什么，让我们来看看。</strong></p><p id="bedb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我将首先从rbd库如何工作以及如何使用它来实现嵌套dnd开始。你可以在他们的github页面-<a class="ae js" href="https://www.npmjs.com/package/react-beautiful-dnd" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">https://www.npmjs.com/package/react-beautiful-dnd</strong></a>查看更详细的工作和教程</p><h1 id="8eff" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">rbd的基础:</h1><p id="0958" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">react-beautiful-dnd 是一个由创建JIRA的人创建的库，非常容易集成和实现到你的reactJs应用中。</p><p id="c74f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">rbd库主要工作在三个元素上:</p><ol class=""><li id="8329" class="kw kx hi iw b ix iy jb jc jf ky jj kz jn la jr lb lc ld le bi translated">dragdropcontext:-dropbables和draggables的包装器。</li><li id="98f9" class="kw kx hi iw b ix lf jb lg jf lh jj li jn lj jr lb lc ld le bi translated"><strong class="iw hj">可投放:——可投放拖拽体的区域。</strong></li><li id="787d" class="kw kx hi iw b ix lf jb lg jf lh jj li jn lj jr lb lc ld le bi translated">可拖动的:可以拖动的元素。</li></ol><p id="8497" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">其中，dragdropcontext由一个或多个可拖放对象组成，可拖放对象可以有一个或多个可拖放对象。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/df6b563b2b2f5cd44dbb22270cbf21e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*mcBQgUt_eh4BXA9r-H-zBA.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自<a class="ae js" href="https://www.npmjs.com/package/react-beautiful-dnd" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/react-beautiful-dnd</a></figcaption></figure><p id="50c8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在reactJs项目中安装并导入rbd库之后，您创建了一个<strong class="iw hj"> dragdropcontext元素</strong>，该元素将接受一个<strong class="iw hj">函数</strong>作为<strong class="iw hj"> onDragEnd </strong>属性的值，当拖放任何可拖动的对象时，该属性将被调用。</p><p id="809d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这个上下文元素中，您创建了一个<strong class="iw hj">drop able元素</strong>并提供了一个<strong class="iw hj">drop ableid</strong>属性，该属性可用于在上面的onDragEnd函数中创建逻辑，并找到可拖动的对象是从哪里拾取的或者是从哪里被放下的。您可以有多个邻居可丢弃。</p><p id="daf6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，在这个droppable中，您迭代一个您希望被拖动的元素列表，并使用属性<strong class="iw hj"> key、draggableId </strong>和<strong class="iw hj"> index </strong>创建<strong class="iw hj"> draggable元素</strong>，这些属性可用于在上面的onDragEnd函数中对元素列表进行重新排序。</p><p id="a2c9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">上面的droppable和draggables也需要一个div，里面有一些属性，如<strong class="iw hj"> ref </strong>和<strong class="iw hj"> style </strong>，你可以从教程/示例中看看提供什么值。</p><p id="bb7a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">运行你的reactJs应用</strong>，你的应用就会有一个干净漂亮的dnd功能。</p><h1 id="9ea2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">嵌套免打扰:</h1><p id="9004" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">现在，如果你的应用程序中已经有了上述设置，并试图在一个可拖动的应用程序中添加可拖放的和可拖动的应用程序，即。试图在你的应用程序中实现嵌套的dnd，当拖动元素并试图放下时，你可能会遇到<strong class="iw hj">问题和小故障。你可以按照下面的方法让它无缝地工作。</strong></p><p id="8480" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">rbd库不支持嵌套dnd，这意味着你可以<strong class="iw hj">实现嵌套dnd，但是它有一些限制。</strong></p><p id="720e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们不能在另一个dragdropcontext中有一个dragdropcontext，所以这意味着我们<strong class="iw hj">只有一个onDragEnd函数</strong>来处理外部draggable和内部draggable的删除。</p><p id="d83f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">此外，当你拖动内部draggables时，它会混淆其直接可拖放容器和父可拖放容器，导致故障和功能无法工作。</p><p id="7194" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了解决这个问题，我们使用了droppable元素的<strong class="iw hj"> "type" </strong>属性。为父可拖放对象提供一个不同的<strong class="iw hj">值，为内部可拖放对象提供一个不同的值，然后内部可拖动对象将只在内部可拖放对象中进行拖放。如果您想让<strong class="iw hj">成为一个可拖放的对象，只放入它自己的可拖放对象</strong>，而不放入邻居的可拖放对象，您可以为<strong class="iw hj"> "type" </strong>属性赋予两个可拖放对象不同的值。</strong></p><p id="adcf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="lp">注意:所有可丢弃的可丢弃id应该不同。</em></p><p id="7b64" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在onDragEnd函数中，您可以只检查<strong class="iw hj">类型</strong>的值，并为外部或内部删除编写<strong class="iw hj">单独的重新排序逻辑</strong>。</p><p id="b38b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">也就是说，您应该在reactJs应用程序中拥有一个正常运行的<strong class="iw hj">嵌套拖放功能</strong>。</p><h1 id="d91b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">谢谢大家！</h1></div></div>    
</body>
</html>