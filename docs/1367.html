<html>
<head>
<title>Crypto Trading Simulator: JavaScript Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">加密交易模拟器:JavaScript项目</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/crypto-trading-simulator-javascript-project-23696bf89f91?source=collection_archive---------18-----------------------#2021-03-15">https://medium.com/nerd-for-tech/crypto-trading-simulator-javascript-project-23696bf89f91?source=collection_archive---------18-----------------------#2021-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="91a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Flatiron软件工程训练营第四阶段的最后一个项目是利用HTML、CSS和JavaScript构建一个单页面应用程序(SPA ),并使用Ruby和Rails构建一个后端API。对于这个项目，我们将恢复我们在Flatiron软件工程训练营第一阶段构建的CLI项目，<strong class="ih hj"> CyptoStats </strong>，<strong class="ih hj"> </strong>，并使用相同的API，将其转换为加密货币交易模拟器！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/9a76d135f8d4061323a7b95ac9d244ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2bYMA1mbHVTbJTedaw0AGg.jpeg"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="caa6" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">项目要求</h1><ol class=""><li id="5882" class="ku kv hi ih b ii kw im kx iq ky iu kz iy la jc lb lc ld le bi translated">该应用程序必须是HTML、CSS和JavaScript前端，带有Rails API后端，客户端和服务器之间的所有交互都使用AJAX异步处理，发送回的数据呈现为JSON格式。</li><li id="16dc" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">JavaScript应用程序必须使用面向对象的JavaScript来封装相关的数据和行为。</li><li id="7897" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">Rails后端服务的域和模型必须包含一个至少有一个多对多关系的资源。(例如:用户有许多帖子或照片的相关模型)</li><li id="50b8" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">后端和前端必须协作，通过至少3个AJAX调用来演示客户端-服务器通信，包括至少2个<em class="lk">创建、读取、更新、</em>和<em class="lk">删除</em> (CRUD)操作。</li></ol></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="a648" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">项目概述</h1><p id="4f46" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">Crypto Trading Simulator (CTS)是一个模拟加密货币交易平台的JavaScript web应用程序。这个web应用程序使用CoinGecko API来获取市场上排名前100位的加密货币的最新市场数据。然后，市场数据被呈现到web apps市场表中，该表会定期更新数据。用户被给予100，000.00美元(假币)作为他们的初始购买力，他们可以使用该购买力以当前价格买卖加密货币。购买的每枚硬币都存储在Rails后端API中，并呈现在用户的钱包表中，该表显示了硬币(加密货币)购买时的价格和数量，以及该硬币在市场上的当前价值，以及出售后的计算回报。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="6af1" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">前端</h1><p id="ea54" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">前端文件结构将按如下方式分离:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lo"><img src="../Images/57513964d34c2e885869bb585d9656fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h9QMrlrc8nBsyCohLpRALg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">加密交易模拟器前端</figcaption></figure><h2 id="18e4" class="lt jx hi bd jy lu lv lw kc lx ly lz kg iq ma mb kk iu mc md ko iy me mf ks mg bi translated">向CoinGecko的远程API发送获取请求</h2><p id="8225" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">在我们的<strong class="ih hj"> coin.js </strong>中，我们将向CoinGecko的远程API发送获取请求，接收到的数据将呈现到我们的市场表中，并存储到静态变量中，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/b05def4edab0b78cd4df76ea88838e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9dWP-DGyEDTu-GHAfPMaWQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">硬币. js</figcaption></figure><h2 id="ed7b" class="lt jx hi bd jy lu lv lw kc lx ly lz kg iq ma mb kk iu mc md ko iy me mf ks mg bi translated">Ajax调用</h2><p id="66fa" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">我们将创建一个名为<strong class="ih hj"> api.js </strong>的JavaScript文件来动态处理我们的Ajax调用。我们的前端JavaScript模型<strong class="ih hj"> user.js </strong>和<strong class="ih hj"> trade.js </strong>将利用该类向我们的服务器发送获取请求，服务器将负责我们的<em class="lk">创建、读取、</em>和<em class="lk">更新</em> (CRUD)操作。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mi mj l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">api.js</figcaption></figure><p id="b293" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以使用<strong class="ih hj"> <em class="lk"> async </em> </strong> <em class="lk"> </em>和<em class="lk"/><strong class="ih hj"><em class="lk">await</em></strong><em class="lk"/>和/或<em class="lk"> </em> <strong class="ih hj"> <em class="lk">在我们的每个JavaScript前端模型中获取请求。然后用下面的</em> </strong>方法创建我们的JavaScript对象实例。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/15c77333a25a0098cc6a93e6c144f98c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6D362wQ2RtyqlBGtjZ61JQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">使用异步和等待提取</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/f145e03d8936d51b40f0f74c8c7c7c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mjUmMtWEvIYAxbgiL-f6EQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">使用获取。then方法</figcaption></figure><h1 id="5c6d" class="jw jx hi bd jy jz mm kb kc kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt bi translated">后端</h1><p id="bc96" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">后端结构将使用以下命令生成:</p><pre class="je jf jg jh fd mr ms mt mu aw mv bi"><span id="bae9" class="lt jx hi ms b fi mw mx l my mz">$ rails new crypto-trading-simulator-backend --api</span><span id="3e0d" class="lt jx hi ms b fi na mx l my mz">$ rails g scaffold user username buying_power:decimal wallet_value :decimal</span><span id="0ce0" class="lt jx hi ms b fi na mx l my mz">$ rails g scaffold trades coin_id user_id:integer sym qty:integer cost:decimal</span></pre><p id="3619" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这应该会在API模式下生成我们的后端结构，生成我们的模型和迁移文件，以及我们的控制器和代码，这些代码会自动以JSON的形式呈现我们的数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nb"><img src="../Images/c49787013f2c69c8ab0c801bf31e0cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XtlZd6RTu9MetkiObtI7tg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">加密交易模拟器后端</figcaption></figure><h2 id="53c0" class="lt jx hi bd jy lu lv lw kc lx ly lz kg iq ma mb kk iu mc md ko iy me mf ks mg bi translated">使用机架CORS将域列入白名单</h2><p id="db58" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">我们将利用机架CORS将允许连接到我们服务器的域列入白名单。这应该已经在我们的Gemfile中注释掉了，所以我们需要做的就是在里面注释并运行<code class="du nc nd ne ms b">bundle install</code>。</p><pre class="je jf jg jh fd mr ms mt mu aw mv bi"><span id="04fb" class="lt jx hi ms b fi mw mx l my mz">// Gemfile</span><span id="cb2b" class="lt jx hi ms b fi na mx l my mz">gem 'rack-cors'</span></pre><p id="8239" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，转到<strong class="ih hj">/config/initializers/CORS . Rb</strong></p><p id="e277" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在中注释下面的代码，并将我们的origins设置为* (all)，因为我们现在将通过本地服务器运行它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nf"><img src="../Images/b3be72181bd039d4706cf5ba51b70d8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e86D4c4OYqeTVihZlQhNFQ.png"/></div></div></figure><p id="3e49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将接受来自所有域的所有传入请求。通常你会添加你的网页应用程序所在的域名(例如:Heroku)。</p><h2 id="9dd1" class="lt jx hi bd jy lu lv lw kc lx ly lz kg iq ma mb kk iu mc md ko iy me mf ks mg bi translated">用快速JSON API序列化我们的数据</h2><p id="b722" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">我们将利用Fast JSON来序列化呈现到我们的API中的数据。我们需要将它包含到我们的Gemfile中并运行<code class="du nc nd ne ms b">bundle install</code>。</p><pre class="je jf jg jh fd mr ms mt mu aw mv bi"><span id="df53" class="lt jx hi ms b fi mw mx l my mz">// Gemfile</span><span id="29c9" class="lt jx hi ms b fi na mx l my mz">gem 'fast_jsonapi'</span></pre><p id="643d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们可以使用rails通过以下命令生成我们的序列化程序:</p><pre class="je jf jg jh fd mr ms mt mu aw mv bi"><span id="f875" class="lt jx hi ms b fi mw mx l my mz">$ rails g serializer User name buying_power:decimal wallet_value:decimal</span><span id="e346" class="lt jx hi ms b fi na mx l my mz">$ rails g Trade coin_id user_id:integer qty:integer cost:decimal</span></pre><p id="88fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并添加我们的关联和属性，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ng"><img src="../Images/1dfea2ffb8298bb4b310528cd5ac1b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oICPTqbBNaQMi_1joSPcEQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">user_serializer.rb</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ng"><img src="../Images/2d2b27b79701eef0c4104541db04b675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nOwYCd46XH2NyXOVd3yyHw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">trade_serializer.rb</figcaption></figure><h1 id="b41e" class="jw jx hi bd jy jz mm kb kc kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt bi translated">更多信息</h1><p id="0992" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">有关该项目的更多信息，可以查看我的<a class="ae nh" href="https://github.com/charlesangelolai/crypto-trading-simulator" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。</p><p id="48fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于这个项目如何工作以及它看起来像什么的视频演示，请点击这里。</p></div></div>    
</body>
</html>