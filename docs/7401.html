<html>
<head>
<title>AWS Lambda Typescript(Charity Web App) — Intro to SAM and Lambda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS Lambda 类型脚本(慈善网站应用程序)SAM 和 Lambda 简介</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/aws-lambda-typescript-charity-web-app-start-using-event-driven-server-less-computing-198288f13342?source=collection_archive---------1-----------------------#2022-10-21">https://medium.com/nerd-for-tech/aws-lambda-typescript-charity-web-app-start-using-event-driven-server-less-computing-198288f13342?source=collection_archive---------1-----------------------#2022-10-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4c1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嘿，伙计们，这是我们正在建设的慈善网络应用程序的延续。如果你们可以回去看看，我们已经在之前的教程中浏览了 UI 和一些关于后端的介绍。以防我在这里提到它们供你参考。</p><div class="jd je ez fb jf"><div role="button" tabindex="0" class="ab bv ff cb dy jg jh bn ji jj jk"><div class="jl l"><div class="ab q"><div class="l di"><img alt="Dimuthu Wickramanayake" class="l de bw jm jn du" src="../Images/099c92eba7c0ef5b0373ba4d36052ba2.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*LsIMaDB2-AJKz28n02h_IQ.jpeg"/><div class="dr bw l jm jn ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated">迪穆图·维克拉马那亚克</p></div></div><div class="jq jr fg l"><h2 class="bd hj rd re dy rf ea eb kq ed ef hh bi translated">用 Typescript 系列作出反应(慈善网络应用)</h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi rg au rh ri rj nu rk an fx fy rl rm rn gb gc gd de bk ge" href="https://billa-code.medium.com/list/react-with-typescript-seriescharity-web-app-6f45ca471f54?source=post_page-----198288f13342--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ro l dw"><span class="bd b fp z dx">7 stories</span></div></div></div><div class="kd dh ke dy ab kf dw di"><div class="di jv bv jw jx"><div class="dh l"><img alt="" class="dh" src="../Images/ace19c3ad1c0f8dc12620ff352fd2b11.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*QhAfunLq4rh0VrChbXUtZA.png"/></div></div><div class="di jv bv jy jz ka"><div class="dh l"><img alt="" class="dh" src="../Images/23deda9e9ca42920182e5a94707a12e7.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*vBIWr2bx7SaHJveT97Xg9g.png"/></div></div><div class="di bv kb kc ka"><div class="dh l"><img alt="" class="dh" src="../Images/16523ac1bf719cb2bc80e1cc1ec44297.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*53lYwBkgmaFRow1Erxl06Q.png"/></div></div></div></div></div><div class="jd je ez fb jf kk"><a href="https://billa-code.medium.com/aws-lambda-charity-web-app-intro-b775c94ca563" rel="noopener follow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd hj fi z dy kp ea eb kq ed ef hh bi translated">AWS Lambda(慈善网络应用)-简介</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">目前我正在做一个项目，需要存储与奖学金基金相关的学生和赞助商数据。作为…</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">billa-code.medium.com</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky jj kk"/></div></div></a></div><p id="cb15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们的重点是使用 NodeJS 和 Typescript 创建一个 Lambda 函数。</p><p id="f897" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为第一步，我们必须安装 AWS SAM。安装前，确保启动<strong class="ih hj">对接服务</strong>。你应该事先安装好 docker。</p><div class="jd je ez fb jf kk"><a href="https://docs.docker.com/get-docker/" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd hj fi z dy kp ea eb kq ed ef hh bi translated">获取码头工人</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">Docker Desktop 条款 Docker Desktop 在大型企业中的商业用途(超过 250 名员工或超过 10 美元…</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">docs.docker.com</p></div></div><div class="kt l"><div class="kz l kv kw kx kt ky jj kk"/></div></div></a></div><p id="4e57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS SAM 是用于构建无服务器应用程序的框架。安装细节将在下面的链接。</p><div class="jd je ez fb jf kk"><a href="https://aws.amazon.com/serverless/sam/" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd hj fi z dy kp ea eb kq ed ef hh bi translated">AWS 无服务器应用模型——Amazon Web Services</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">用简单明了的语法构建无服务器应用程序 AWS 无服务器应用程序模型(SAM)是一个开源的…</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">aws.amazon.com</p></div></div><div class="kt l"><div class="la l kv kw kx kt ky jj kk"/></div></div></a></div><p id="55b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装后，转到终端(命令提示符、power shell 等)键入以下命令</p><pre class="lb lc ld le fd lf lg lh li aw kj bi"><span id="4a3d" class="lj lk hi lg b fi ll lm l ln lo">sam init</span></pre><p id="ad74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你输入这个，你会被问几个问题，直到你得到你的项目与 Typescript。下面给出截图。</p><figure class="lb lc ld le fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lp"><img src="../Images/c2be4864b3373183b17fb039159f49bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mu1FtEnLQw7sXtrpNJmSHQ.png"/></div></div></figure><p id="0fcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在将生成一个 hello world 应用程序。现在转到创建的文件夹，输入以下命令来构建项目。</p><pre class="lb lc ld le fd lf lg lh li aw kj bi"><span id="b0d8" class="lj lk hi lg b fi ll lm l ln lo">sam build</span></pre><p id="5864" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将构建 Lambda 函数，我们不必担心为 Node JS 应用程序安装依赖项。构建完成后，输入以下命令在本地环境中测试应用程序。</p><pre class="lb lc ld le fd lf lg lh li aw kj bi"><span id="96ea" class="lj lk hi lg b fi ll lm l ln lo">sam local invoke HelloWorldFunction</span></pre><p id="7401" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你会得到这样的回应。</p><figure class="lb lc ld le fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lw"><img src="../Images/0dab4cb6e35e74e808763ee628f7fa7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZMgRWAiXs3GtHbakdrMQmA.png"/></div></div></figure><p id="5040" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以看到我们的响应是状态代码 200。很酷吧。你不必有一个 AWS 帐户来尝试这个，这是最好的部分。所以在开始任何工作之前，让我们试着了解一下这些文件都是什么。在我们完成 sam 初始化之后，我们得到几个文件夹和文件。<strong class="ih hj">事件文件夹</strong>包含了<strong class="ih hj">事件</strong>，我们可以用它来进行本地函数调用，然后我们有了<strong class="ih hj"> hello-world </strong>文件夹，它包含了与我们的<strong class="ih hj"> HelloWorld Lambda 函数</strong>处理程序相关的所有文件。然后我们有了<strong class="ih hj"> template.yaml </strong>文件。这是用于创建与我们的 Lambda 函数相关的云堆栈的蓝图。在我为我们的用例更改文件之后，我将对此进行更多的描述。</p><p id="e58e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们回到我们的用例。我们必须为学生实现一个 Lambda 函数。作为第一步，我将 hello-world 文件夹重命名为 student。接下来，我更改了 package.json 文件。</p><pre class="lb lc ld le fd lf lg lh li aw kj bi"><span id="5e1a" class="lj lk hi lg b fi ll lm l ln lo">{<br/>  "name": "student",<br/>  "version": "1.0.0",<br/>  "description": "Student service for serendib scholarship ws",<br/>  "main": "app.js",<br/>  "repository": "https://github.com/deBilla/serendib-scholarship-ws/student",<br/>  "author": "SAM CLI",<br/>  "license": "MIT",<br/>  "dependencies": {<br/>    "esbuild": "^0.14.14"<br/>  },<br/>  "scripts": {<br/>    "unit": "jest",<br/>    "lint": "eslint '*.ts' --quiet --fix",<br/>    "compile": "tsc",<br/>    "test": "npm run compile &amp;&amp; npm run unit"<br/>  },<br/>  "devDependencies": {<br/>    "@types/aws-lambda": "^8.10.92",<br/>    "@types/jest": "^27.4.0",<br/>    "@types/node": "^17.0.13",<br/>    "@typescript-eslint/eslint-plugin": "^5.10.2",<br/>    "@typescript-eslint/parser": "^5.10.2",<br/>    "esbuild-jest": "^0.5.0",<br/>    "eslint": "^8.8.0",<br/>    "eslint-config-prettier": "^8.3.0",<br/>    "eslint-plugin-prettier": "^4.0.0",<br/>    "jest": "^27.5.0",<br/>    "prettier": "^2.5.1",<br/>    "ts-node": "^10.4.0",<br/>    "typescript": "^4.5.5"<br/>  }<br/>}</span></pre><p id="88c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我把 template.yaml 文件改成这样。</p><pre class="lb lc ld le fd lf lg lh li aw kj bi"><span id="e1f9" class="lj lk hi lg b fi ll lm l ln lo">AWSTemplateFormatVersion: '2010-09-09'<br/>Transform: AWS::Serverless-2016-10-31<br/>Description: serendib-scholarship-ws<br/>Globals:<br/>  Function:<br/>    Timeout: 3<br/><br/>Resources:<br/>  StudentFunction:<br/>    Type: AWS::Serverless::Function<br/>    Properties:<br/>      CodeUri: student/<br/>      Handler: app.lambdaHandler<br/>      Runtime: nodejs16.x<br/>      Architectures:<br/>        - x86_64<br/>      Events:<br/>        Student:<br/>          Type: Api<br/>          Properties:<br/>            Path: /student<br/>            Method: get<br/>    Metadata:<br/>      BuildMethod: esbuild<br/>      BuildProperties:<br/>        Minify: true<br/>        Target: "es2020"<br/>        EntryPoints: <br/>        - app.ts<br/><br/>Outputs:<br/>  StudentApi:<br/>    Description: "API Gateway endpoint URL for Prod stage for Student function"<br/>    Value: !Sub "https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/student/"<br/>  StudentFunction:<br/>    Description: "Student Function ARN"<br/>    Value: !GetAtt StudentFunction.Arn<br/>  StudentIamRole:<br/>    Description: "Implicit IAM Role created for Student function"<br/>    Value: !GetAtt StudentFunctionRole.Arn</span></pre><p id="7bef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在继续之前，让我们试着理解这个 template.yaml 文件。从顶部开始，前 3 个配置是一些常规的东西。但是超时是我们可以改变的。现在它被设置为<strong class="ih hj"> 3 秒</strong>。这可以增加到<strong class="ih hj"> 900 秒(15 分钟)</strong>，超过那是不可能的。</p><p id="36e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，在资源配置下，我们有我们的函数，在它里面，我们有我们的应用程序运行所需的配置。</p><p id="a9aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，在输出下，我们定义了运行 lambda 函数所需的某些其他服务。StudentApi 是 Api 网关端点 URL，然后我们定义了 lambda 函数所需的 AWS IAM 角色，如果需要，可以更改权限。</p><p id="0645" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一个教程中，让我们正确地创建学生服务，并尝试完成我们的项目。直到那时快乐编码。与这个项目相关的代码将在下面的 Github 链接。</p><div class="jd je ez fb jf kk"><a href="https://github.com/deBilla/serendib-scholarship-ws" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd hj fi z dy kp ea eb kq ed ef hh bi translated">GitHub-deBilla/serendib-scholarship-ws</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">github.com</p></div></div><div class="kt l"><div class="lx l kv kw kx kt ky jj kk"/></div></div></a></div><p id="4995" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编码快乐！！！！🙏</p></div></div>    
</body>
</html>