<html>
<head>
<title>Elasticsearch part -1: A Gentle Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">弹性研究第一部分:温和的介绍</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/elasticsearch-part-1-5ba00a04cf8a?source=collection_archive---------5-----------------------#2021-07-20">https://medium.com/nerd-for-tech/elasticsearch-part-1-5ba00a04cf8a?source=collection_archive---------5-----------------------#2021-07-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/a7d199d621e2bbca4985f7f88cf85f7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*t-OkxcgFTvkh0wARIVsMFQ.png"/></div></figure></div><div class="ab cl im in gp io" role="separator"><span class="ip bw bk iq ir is"/><span class="ip bw bk iq ir is"/><span class="ip bw bk iq ir"/></div><div class="hb hc hd he hf"><h1 id="795d" class="it iu hi bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated">什么是 Elasticsearch？</h1><ul class=""><li id="ff23" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Elasticsearch 是一个分布式、开源的搜索和分析引擎，适用于所有类型的数据，包括文本、数字、地理空间、结构化和非结构化数据。</li><li id="c12e" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">基于 Apache Lucene 构建，用 Java 开发</li><li id="79af" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">它允许你存储，搜索和分析大量的数据快速和接近实时，并在几毫秒内给出答案。它能够实现快速搜索响应，因为它不是直接搜索文本，而是搜索索引。</li><li id="3f90" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">它使用基于文档的结构，而不是表和模式，并附带了大量 REST APIs 来存储和搜索数据。</li><li id="a408" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">数据以无模式 JSON 文档的形式存储。</li></ul><h1 id="def8" class="it iu hi bd iv iw ko iy iz ja kp jc jd je kq jg jh ji kr jk jl jm ks jo jp jq bi translated">Elasticsearch 是用来做什么的？</h1><p id="632c" class="pw-post-body-paragraph kt ku hi jt b ju jv kv kw jw jx kx ky jy kz la lb ka lc ld le kc lf lg lh ke hb bi translated">Elasticsearch 的速度和可伸缩性及其索引多种类型内容的能力意味着它可以用于许多用例:</p><ul class=""><li id="4fbe" class="jr js hi jt b ju li jw lj jy lk ka ll kc lm ke kf kg kh ki bi translated">应用程序搜索</li><li id="5d3c" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">网站搜索</li><li id="b5ba" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">企业搜索</li><li id="4b0c" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">日志记录和日志分析</li><li id="3f5e" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">基础设施指标和容器监控</li><li id="15c3" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">应用程序性能监控</li><li id="9ad1" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">地理空间数据分析和可视化</li><li id="9675" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">安全分析</li><li id="4e3f" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">商业分析</li></ul><h2 id="c7e1" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">很少有公司使用 Elasticsearch..</h2><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mb"><img src="../Images/6686b91e63400e6da3f90e90b2057b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*29udcEcQrX3QwE72r8tnBw.png"/></div></div></figure><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/746ba99af2a231221b8e21a85285e555.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*wqBaqwxqb3wO_jQOSQi_uQ.jpeg"/></div></figure><h1 id="28fa" class="it iu hi bd iv iw ko iy iz ja kp jc jd je kq jg jh ji kr jk jl jm ks jo jp jq bi translated">Elasticsearch(ES)是如何工作的？</h1><p id="c594" class="pw-post-body-paragraph kt ku hi jt b ju jv kv kw jw jx kx ky jy kz la lb ka lc ld le kc lf lg lh ke hb bi translated">为了理解工作流程，我们将首先研究 ES 的关键概念</p><h2 id="5e5f" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">文档</h2><ul class=""><li id="9308" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">在专家系统中，数据以文档的形式存储，文档是信息的基本单位</li><li id="1bbc" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">这个文档只是一个 JSON 对象</li><li id="644b" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">类似于关系数据库中的行(例如:MySQL)</li><li id="59d0" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">文档可以包含类似于关系数据库中的列的字段</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es ml"><img src="../Images/095d7c1f11d5efd04990cbacb518c19c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vj8cEYzybdXqpVjNdWo2rA.png"/></div></div></figure><h2 id="95be" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">指数</h2><ul class=""><li id="4a86" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">索引是具有相似特征的文档的集合。</li><li id="ea93" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">索引是在 Elasticsearch 中可以查询的最高级别的实体。</li><li id="d68e" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">类似于关系数据库中的数据库。</li><li id="931d" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">索引中的任何文档通常都是逻辑相关的。</li></ul><h2 id="b6fd" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">倒排索引</h2><ul class=""><li id="86e6" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Elasticsearch 中的索引实际上是所谓的倒排索引，这是所有搜索引擎工作的机制。它是一种数据结构，存储从内容(如单词或数字)到其在一个文档或一组文档中的位置的映射。</li><li id="ece4" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">它是一种类似 hashmap 的数据结构，将您从一个单词引导到一个文档。倒排索引不直接存储字符串，而是将每个文档拆分成单独的搜索词(即每个单词)，然后将每个搜索词映射到这些搜索词所在的文档。</li><li id="a9f3" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">例如，在下图中(图:倒排索引-1)，术语“retire”出现在文档 2 中，因此它被映射到该文档，类似地，术语“blue”出现在这两个文档中，因此被映射到这两个文档。这可以作为在给定文档中查找搜索词的快速查找。</li></ul><div class="mc md me mf fd ab cb"><figure class="mm ij mn mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><img src="../Images/03a3fa7591e63a47989d91d4e69fcd95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*ahW_4v5CyZyD0mboy7bjJA.png"/></div></figure><figure class="mm ij ms mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><img src="../Images/873cbd8485db66d8376601481c5248cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*e7ZejrtSSFQf6aS6o5f6eA.png"/></div><figcaption class="mt mu et er es mv mw bd b be z dx mx di my mz translated">倒排索引 1 倒排索引 2</figcaption></figure></div><ul class=""><li id="b16b" class="jr js hi jt b ju li jw lj jy lk ka ll kc lm ke kf kg kh ki bi translated">通过使用分布式倒排索引，Elasticsearch 可以从非常大的数据集中快速找到全文搜索的最佳匹配。</li><li id="f6d2" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated"><strong class="jt hj">倒排索引的优点有:</strong></li><li id="8627" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">倒排索引允许快速全文搜索，但代价是当文档被添加到数据库中时，处理时间会增加。</li><li id="c13d" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">很容易开发。</li><li id="f2d7" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">它是在文档检索系统中使用的最流行的数据结构，例如在搜索引擎中大规模使用。</li><li id="ecf9" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated"><strong class="jt hj">倒排指数也有缺点:</strong></li><li id="c1ae" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">更新、删除和插入的存储开销大，维护成本高。</li></ul><h2 id="84dc" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated"><strong class="ak">映射</strong></h2><ul class=""><li id="2173" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">它主要用于指定索引的模式。它定义了索引中的字段、每个字段的数据类型以及 Elasticsearch 应该如何处理该字段。映射还用于配置与类型关联的元数据。</li></ul><h2 id="8b5e" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">陶瓷或玻璃碎片</h2><ul class=""><li id="0352" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Elasticsearch 提供了将索引细分为多个片段(称为碎片)的能力。</li><li id="4a3f" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">每个碎片本身就是一个全功能的独立“索引”，可以托管在集群中的任何节点上。</li><li id="2d77" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">通过将索引中的文档分布在多个分片上，并将这些分片分布在多个节点上，Elasticsearch 可以确保冗余，这既可以防止硬件故障，又可以在节点添加到集群时提高查询能力。</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es na"><img src="../Images/d4f237599634171cb6bc1f06de1733f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bt1sYF1bY2QHqKLtLPpnFA.png"/></div></div></figure><h2 id="7661" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">复制品</h2><ul class=""><li id="53f1" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Elasticsearch 允许您制作一个或多个索引碎片的副本，这些碎片被称为“副本碎片”或简称为“复制品”。基本上，副本碎片是主碎片的副本。索引中的每个文档都属于一个主碎片。副本提供了数据的冗余拷贝以防止硬件故障，并增加了处理读取请求(如搜索或检索文档)的能力。</li></ul><h2 id="1baa" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">串</h2><ul class=""><li id="c092" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">集群是由一个或多个连接在一起的节点实例组成的组。集群的性能取决于任务、搜索和索引在集群中所有节点之间的分布。</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es nb"><img src="../Images/865e960566eca0293ab6ae8e33f86561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JkgxFotRwkpOJ-i7nPzX0Q.png"/></div></div></figure><h2 id="4fd3" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">结节</h2><ul class=""><li id="355d" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">节点是作为群集一部分的单个服务器。节点存储数据并参与集群的索引和搜索功能。Elasticsearch 节点可以不同方式配置:</li><li id="48d2" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated"><strong class="jt hj">主节点</strong> —控制 Elasticsearch 集群，并负责所有集群范围的操作，如创建/删除索引和添加/删除节点。<code class="du nc nd ne nf b">node.data: false</code>和<code class="du nc nd ne nf b">node.master: true</code></li><li id="50d3" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated"><strong class="jt hj">数据节点</strong> —存储数据并执行数据相关操作，如搜索和聚集。<code class="du nc nd ne nf b">node.data: true</code></li><li id="3054" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated"><strong class="jt hj">客户端节点</strong> —向主节点转发集群请求，向数据节点转发与数据相关的请求。<code class="du nc nd ne nf b">node.data: false</code></li><li id="5cdc" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">ES 允许将节点配置为允许或不允许在本地存储数据。本地存储数据基本上意味着允许在该节点上分配不同索引的碎片。默认情况下，每个节点都被认为是一个数据节点，可以通过将<code class="du nc nd ne nf b">node.data</code>设置为<code class="du nc nd ne nf b">false</code>来关闭。</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es ng"><img src="../Images/2250140b7c337a41e4980943ef61f5f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJJkJZ97aS1MU5XcgtEwKg.png"/></div></div></figure><h1 id="2b0d" class="it iu hi bd iv iw ko iy iz ja kp jc jd je kq jg jh ji kr jk jl jm ks jo jp jq bi translated">弹性堆栈(ELK)</h1><ul class=""><li id="c74d" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Elasticsearch 是 Elastic Stack 的核心组件，是一套用于数据摄取、丰富、存储、分析和可视化的开源工具。</li><li id="9d8d" class="jr js hi jt b ju kj jw kk jy kl ka km kc kn ke kf kg kh ki bi translated">根据其组件，它通常被称为“ELK”堆栈</li></ul><p id="6539" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">E —弹性搜索，</p><p id="b015" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">L — Logstash，</p><p id="0c14" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">基巴纳</p><p id="3b62" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">现在还包括节拍</p><h2 id="236d" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">基巴纳</h2><ul class=""><li id="4209" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><a class="ae nk" href="https://www.knowi.com/blog/grafana-vs-kibana/" rel="noopener ugc nofollow" target="_blank"> Kibana </a>是一款用于弹性搜索的数据可视化和管理工具，提供实时直方图、折线图、饼图和地图。它可以让您可视化您的 Elasticsearch 数据并浏览 Elastic 堆栈。</li></ul><h2 id="5516" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">Logstash</h2><ul class=""><li id="8839" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Logstash 用于聚合和处理数据，并发送给 Elasticsearch。它是一个开源的服务器端数据处理管道，可以同时从多个来源获取数据，对其进行转换，然后将其发送到 collect。它还通过识别命名字段来构建结构，转换和准备数据，而不考虑数据的格式，并将它们转换为通用格式。</li></ul><h2 id="cf28" class="ln iu hi bd iv lo lp lq iz lr ls lt jd jy lu lv jh ka lw lx jl kc ly lz jp ma bi translated">搜索</h2><ul class=""><li id="98f2" class="jr js hi jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Beats 是一个轻量级、单一用途的数据传输代理集合，用于将来自成百上千个机器和系统的数据发送到 Logstash 或 Elasticsearch。Beats 非常适合收集数据，因为它们可以放在你的服务器上，放在你的容器中，或者作为功能部署，然后在 Elasticsearch 中集中数据。</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es na"><img src="../Images/2047c66f4fff1cca027cc2bba0f5f69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-kFnISdsTplk_7qxcqVTyQ.png"/></div></div></figure><p id="c122" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">这让我们走到了尽头👀….</p><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es na"><img src="../Images/5054fe7d92c867fc9a3ea3dfe1aaa4b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-YIqTB6YTmXwDMUp15zshQ.jpeg"/></div></div></figure><p id="acc1" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">这只是对 ES 的一个友好的介绍，希望这篇文章能让你对 ES 有一个基本的概念</p><blockquote class="nl nm nn"><p id="76ba" class="kt ku no jt b ju li kv kw jw lj kx ky np nh la lb nq ni ld le nr nj lg lh ke hb bi translated">未知的未知作为已知的未知..</p></blockquote><p id="55e4" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">希望我有动力发布一个深入的弹性研究第二部分的故事</p><p id="54df" class="pw-post-body-paragraph kt ku hi jt b ju li kv kw jw lj kx ky jy nh la lb ka ni ld le kc nj lg lh ke hb bi translated">正如<strong class="jt hj">总是…..</strong></p><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es ns"><img src="../Images/dcf21bddde5fc157c9aac93e9c15ed20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Jf6hf9EonuGzdIN5JeZObQ.gif"/></div></div></figure></div></div>    
</body>
</html>