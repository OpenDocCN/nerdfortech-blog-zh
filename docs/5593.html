<html>
<head>
<title>Moving Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">移动平台</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/moving-platform-abb47d7a07ca?source=collection_archive---------10-----------------------#2021-10-20">https://medium.com/nerd-for-tech/moving-platform-abb47d7a07ca?source=collection_archive---------10-----------------------#2021-10-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/1337c55cea5fc74a2c076280ff3913de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/1*CYMkchRC6PdvOdFTvf-wyg.gif"/></div></figure><p id="6d90" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">目标</strong>:编写一个模块化路径的移动平台</p><p id="b8e9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">另一个常青平台组件是<strong class="io hj">动平台</strong>。我们将以一种<strong class="io hj">模块化</strong>的方式创建和编写它，因此我们可以轻松地复制它的行为，只需改变定义路径的路点。</p><p id="02e2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">是的，路点。事实上，我打算重用/重新思考我在之前的游戏<a class="ae jk" href="https://danioquero.itch.io/the-great-fleece" rel="noopener ugc nofollow" target="_blank">大羊毛</a>中为<strong class="io hj">巡逻守卫</strong>(这里<a class="ae jk" href="https://danio-quero.medium.com/into-game-mechanics-guards-patrol-part-1-720c330aed46?source=your_stories_page-------------------------------------" rel="noopener">这里</a>和<a class="ae jk" href="https://danio-quero.medium.com/into-game-mechanics-guards-patrol-part-2-290a592811ea?source=your_stories_page-------------------------------------" rel="noopener">这里</a>)编写的大部分代码。</p><p id="1d70" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们先设计一些东西:</p><ol class=""><li id="a8bc" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">平台将以给定的速度尽可能平稳地从一个航路点移动到另一个航路点，在每个航路点停止(或不停止)，并在第一个和最后一个航路点停留较长时间。</li><li id="858f" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">玩家必须很好地固定在平台上，除非它跳下来，这意味着它会随着平台移动</li></ol><p id="49c3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">仅此而已。</p><p id="5a45" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们从更简单的第二点开始。要让玩家粘在平台上，最简单的方法就是在玩家落地的那一瞬间让它成为平台的<strong class="io hj">子</strong>，跳跃的时候拿出来。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/147062066e7eb2648edd00af51b42b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*akpIVXVUDv-jaiXkKnkCBA.png"/></div></figure><p id="3360" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了实现这种行为，我们需要在平台上添加另一个箱式碰撞器组件，一个触发器，<strong class="io hj">向平台外倾斜</strong>以检测着陆。当然我们需要一个没有重力的刚体。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/bcf5ca08388843e6c00d591653261172.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*bqS5-5lTvspT-pFpiMyEsw.png"/></div></figure><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/c0cd0f3a43986f0a7e15eb62a42e69ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*D5XtL76qvRebhaC8HU7FTw.png"/></div></figure><p id="061e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了让对撞机倾斜，我们可以改变 T21 中心的 y 轴分量。我们还需要<strong class="io hj">冻结</strong> x-y-z 旋转，以避免与角色发生不必要的奇怪碰撞行为。</p><p id="cf0f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在的剧本，<em class="kg"> MovingPlatform。</em></p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="615e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当触发进入或退出时，我们设置玩家孩子是否在平台上。</p><p id="e225" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们来看看运动本身。我们将在<code class="du kj kk kl km b">FixedUpdate()</code>方法中执行它，确保一个<strong class="io hj">一致的时间戳</strong>，产生一个更平滑的效果。</p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="2a0e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du kj kk kl km b">WaypointsGood()</code>方法返回一个布尔值，表明列表中是否有路点，访问它们是否安全。然后在<code class="du kj kk kl km b">5</code>行，我们检查是否已经到达当前的航路点。</p><p id="cbcc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果是，我们评估下一个航路点(<code class="du kj kk kl km b">7</code>)，如果平台在第一个或最后一个航路点，我们启动一个协程使其等待，否则，如果启用了等待航路点选项，我们使其等待较短的时间。</p><p id="1f6a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果还没有到达航路点，平台移动，<code class="du kj kk kl km b">16</code>。</p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="2e76" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">通过改变 id 或列表索引来评估下一个航路点。但是如果达到极限，路径的方向改变，因此从 0 到最大，索引是<strong class="io hj">递增</strong>，然后从最大开始是<strong class="io hj">递减</strong>等等。</p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="3ac3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">平台被这个<strong class="io hj">聪明绝招</strong>停了。因为我们不可能等待并阻止<code class="du kj kk kl km b">FixedUpdate()</code>内部的运动，我们实际上并没有阻止它！我们只是用协程把速度设为零！在协程中，我们可以等待，然后恢复速度。</p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="0c39" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">实际运动通过 Vector3 类的<code class="du kj kk kl km b">MoveTowards()</code>方法执行。</p><p id="b634" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦脚本完成，我们只需要从检查器中正确地填充它。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es kn"><img src="../Images/84d3f8f6735fe04363ab4a9dfde96faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*x6GU_LnP9ECQSmSEPyu9XQ.png"/></div></figure><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/dfda925bddb7668e324ed6c02d07bc4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*F4Ry8pKtxoFRHZYsVrWWoQ.png"/></div></figure><p id="2ee6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为航路点只是转换空物体的组成部分。</p><p id="a349" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们可以通过添加、删除或替换路点来玩得开心，并拥有全新的路径:水平、垂直或对角线！</p><p id="9a2a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们来看看结果。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es if"><img src="../Images/1337c55cea5fc74a2c076280ff3913de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/1*CYMkchRC6PdvOdFTvf-wyg.gif"/></div></figure><figure class="ka kb kc kd fd ij er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/c3d856c2e52c2743b54d562d6ad04590.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/1*-zY3d1OGbCpIY1bM-nRmRQ.gif"/></div></div></figure></div></div>    
</body>
</html>