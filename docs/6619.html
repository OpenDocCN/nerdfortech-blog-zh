<html>
<head>
<title>Error handling in Observable, Promise and Async/await.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Observable、Promise 和 Async/await 中的错误处理。</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/error-handling-for-http-requests-in-javascript-d38b959b2603?source=collection_archive---------0-----------------------#2022-04-04">https://medium.com/nerd-for-tech/error-handling-for-http-requests-in-javascript-d38b959b2603?source=collection_archive---------0-----------------------#2022-04-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7a09" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">JavaScript 中的 HTTP 请求</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/84315c1d3b680c900f3a4b199eeab493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T9IBMaloq2KRkxXJXFzRVQ.png"/></div></div></figure><p id="b3d2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">每个项目都必须发出 HTTP 请求，当然，其中一些请求可能会有错误。我们需要知道如何处理这些错误。</p><p id="387f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因为我们在讨论 HTTP 请求，所以我需要提到 Observable。</p><p id="ea9d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">标准的方法是为错误创建一个回调函数。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kf"><img src="../Images/9c5273767866258132a5a51ca0fc26db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWMz95VwKnIqluNXkFlSQQ.png"/></div></div></figure><p id="19fc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">另一种方法是制作一个管道，并使用 RxJS 库中的<a class="ae kg" href="https://rxjs.dev/api/operators/catchError" rel="noopener ugc nofollow" target="_blank"> catchError </a>。此时，我们可以在 catchError 中捕获并处理一个错误，或者用我们的描述抛出一个新的错误。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kh"><img src="../Images/5677abfb03830a68fea9ff6d4e614cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*shbJzvLnOdJ2PX1jyFExXQ.png"/></div></div></figure><p id="85e2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Try/catch 使用了一种现代的方法——异步/等待。我们只需在 try 块中调用。如果 catch 块出错，我们将处理一个错误，这里没有回调。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ki"><img src="../Images/d8fb13c1578cbb7df3c8dd75ba633730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dCvxhZSwTHrp4UvUunCWrQ.png"/></div></div></figure><p id="a7e1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Async/await 正在使用 Promise。在 Promise 中，我们还可以使用回调函数来处理错误。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kj"><img src="../Images/609801cec3ad049f5d7a38e15f423618.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*W3OQ358xnTH8OLkJXVVtgw.png"/></div></figure><p id="6b47" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们可以将回调函数与现代的 async/await 结合起来。从两个世界中得到最好的东西。在 HTTP 方法内部，我们添加了回调函数来处理成功的响应和出错的响应。这些句柄应该返回带有数据或错误的相同对象。有了这些改进，我们可以使用 async/await。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kk"><img src="../Images/46f2feeb4e1e037a3f195592280f1cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bv7xobeglEIxg5O4ZdzvWg.png"/></div></div></figure><p id="cbdd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，您可以找到满足您需求的最佳解决方案。</p><p id="cd3d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你需要仔细看看这个项目<a class="ae kg" href="https://github.com/8Tesla8/async-await-error-handling-in-js" rel="noopener ugc nofollow" target="_blank">，这里是链接</a>。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="9c61" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="ks">原载于 2022 年 4 月 4 日 http://tomorrowmeannever.wordpress.com</em><a class="ae kg" href="https://tomorrowmeannever.wordpress.com/2022/04/04/error-handling-for-http-requests-in-javascript-async-await-observable-promise/" rel="noopener ugc nofollow" target="_blank"><em class="ks"/></a><em class="ks">。</em></p></div></div>    
</body>
</html>