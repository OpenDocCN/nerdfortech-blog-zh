# 科技 30 年:从 30 分钟到 3 毫秒

> 原文：<https://medium.com/nerd-for-tech/30-years-in-tech-from-30-minutes-to-3-milliseconds-ef674ee79a2d?source=collection_archive---------12----------------------->

![](img/a77163d6a486ea5cfde04c4cb53b6727.png)

图片来源:[曲速屏保](https://www.codeproject.com/Articles/31941/Multi-monitor-Warp-Speed-Screen-Saver)

这个有点神秘的标题并不是指过去 30 年硬件和软件的进步，尽管它可能也很接近。指的是(潜在)客户为什么联系我。在我担任独立顾问的这些年里，有许多项目是因为以下一个或两个原因而启动的:

1.  有些事花的时间太长了
2.  运行时有东西崩溃

原因一中“某些东西”可以是查询、ETL 过程、报告打开；基本上任何花费任意时间的事情都被认为是“太长”了。大多数情况下，抱怨这个问题的是业务用户，而 it 或 BI 部门无法以令人满意的方式解决这个问题。原因二中的“某些东西”主要是中途崩溃的 ETL 过程。

几乎每一次，问题都不在于使用的技术。

永远不会。

但是，人们仍然坚持认为是服务器容量、数据库版本、数据库品牌、操作系统、BI 工具，无论哪种技术被认为是问题的根源。所以他们总是向我指出:你能修理/升级/更换<fill in="" tech="" here="">吗？这本来就不是问题！但是当然，有一个问题，否则他们不会咨询我。</fill>

那么，是什么导致了这些问题的大部分(如果不是全部的话)？简单:糟糕的设计选择。这通常是由于缺乏知识、没有适当的过程、缺乏对适当资源的访问或者这些情况的组合造成的。当然，技术本身总是可以通过升级软件和/或扩展/更新硬件来改进，但这通常是“锦上添花”；从来不是解决方案本身。为了让你有个概念，这里有三个我处理过的真实案例，我将从引起最大怀疑的一个开始:

# 30 分钟到 3 毫秒

我们说的是 2004 年秋天，一家大型电信运营商运营着美国最大的网站之一。每天处理的数据量为 3–5gb 的日志和事务文件，数据库大小> 300GB。今天你可以在你的笔记本电脑上运行它，但是在 17 年前，这是很重要的一卷。关键查询(因此:打开主管理报告)花费了至少 30 分钟。他们自己的数据库管理员无法解决这个问题，并解释说，考虑到数据库的大小和查询的类型，这“显然”需要很长时间。我回到需求和原始设计，看了看他们的基础设施和软件栈。原来他们运行的是 Oracle EE 的完整版本，看起来很有希望。所以我问他们是否尝试过构建物化视图来获得所需的结果集，得到的是困惑的表情。他们完全不知道什么是物化视图，或者如何创建它们，所以我向他们展示了。

下巴掉了。当我们向管理团队展示结果时，他们也大吃一惊。没有升级，没有新的闪亮工具，只是使用和优化已经存在的东西。你不会相信那会解决多少问题。

# 崩溃的 ETL 过程

这是我的一个老客户在 2007 年的一个夏季项目。我已经有几年没去那里了，但是在我不在的时候，他们自己的员工使用 Business Objects Data Integrator 开发了一个非常复杂的 ETL 过程来加载 SQL Server 2005 数据库。有每日负载(大部分时间运行良好)，加上每周和每月的总量。特别是后两个花费了相当长的时间，并在过程中的意外点崩溃。从来没有在同一点，它总是需要一个完整的重新运行。同样，没有技术的替代(这很好)，但重新设计流程做到了。我们将单一的集成流程划分为单独的任务，并开发了总体控制工作。每当一个(子)任务完成时，它就被检查，在(现在很少)进程崩溃的情况下，它可以重新启动并从它停止的地方重新开始。

# ETL 处理永远耗时，并且崩溃

这篇文章中的最后一个案例发生在 2006 年，也是我的第一个医疗保健项目。我非常喜欢它，以至于我想回到医疗保健行业(我最终做到了)，但这是另一篇文章的内容了。这一个开始是一个简短的任务；我是否能弄清楚为什么两周一次的 ETL 过程经常崩溃，需要在周末进行手动干预。该作业甚至无法每周运行一次，因为它需要太长时间才能完成，这通常是由不断的崩溃和重启造成的。手边的工具是 Cognos 数据管理器(好吧，我承认:那是一堆废话……)和 Oracle EE。

分析 ETL 设计花了我几周时间。第一次观察让我非常震惊；没有增量负载！他们每次都从头开始重新加载整个数据仓库。然后我问他们是怎么保存历史的。“哦那容易，历史是在源系统中维护的”。然后我问当一条记录被删除时会发生什么，以及他们后来是如何知道的。沉默…

长话短说:我得出的结论是，事情完全一团糟。例如:需要从聚合表中查找的临时表构建在更下游的地方，产生了一堆不合逻辑的依赖关系。哦，当然也没有开发/测试环境。所有开发都直接发生在生产环境中。什么可能会出错，对不对？

扔掉一切重新开始是我能给他们的最好的建议，事情就是这样。适当的初始和增量加载、历史保存、每日更新、独立的开发/测试和生产，当然，不会再有崩溃。不，我们甚至没有替换 Cognos 数据管理器:-)

# 包扎

这里的教训非常简单明了:当你认为一些新的闪亮工具可以解决你的数据问题时，请三思。技术本身很少是问题；通常情况下，这是技术实现和使用的方式。