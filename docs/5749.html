<html>
<head>
<title>OnClick Events | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OnClick 事件| Unity</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/onclick-events-unity-f4805203b039?source=collection_archive---------0-----------------------#2021-11-11">https://medium.com/nerd-for-tech/onclick-events-unity-f4805203b039?source=collection_archive---------0-----------------------#2021-11-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="46ae" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何使用 Unity 处理 OnClick 事件的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/e6049dfdf87f4b10be1e684208e3e547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tdRkJqWm2UNIlFDsYTU1wg.gif"/></div></div></figure><p id="b064" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在 Unity 的 2D 游戏中，使用 OnClick 事件显示带有 UI 元素的信息。</p><p id="a59b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我介绍了<a class="ae ko" rel="noopener" href="/nerd-for-tech/creating-a-loot-system-unity-27476f9948be">如何用 Unity 创建一个战利品系统。</a>现在，该处理 UI 元素中的 OnClick 事件了，以便根据商店中的选择向用户显示信息。</p><h1 id="5847" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">商店</h1><p id="e5c0" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">首先，让我们看看 2D 游戏的当前商店。目前，我们有 3 种商品在出售:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/6732a09941a2a70d44c348542c084837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5H-brVDP0989nnBBVabejw.png"/></div></div></figure><p id="69a5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们使用画布来显示商店中的 UI 元素。现在，我们有一个按钮来显示每一件出售的商品:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ln lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/941348552fc9f291d166f21905b2e239.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*Gt5M3IJ3nbrXzL7clKOqog.png"/></div></figure><figure class="lm jl ls lo lp lq lr paragraph-image"><img src="../Images/27344f94b05c35e9e606f2a7ef9731bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*bdR64cY3Qhfy0zdVftsCzQ.png"/></figure></div><h2 id="d9bd" class="lt kq hi bd kr lu lv lw kv lx ly lz kz kb ma mb lb kf mc md ld kj me mf lf ho bi translated">新输入系统</h2><p id="8a58" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">此外，由于我们正在使用 Unity 的“新”输入系统，我们需要替换来自<strong class="ju hs"> EventSystem </strong> gameobject 的<strong class="ju hs">独立输入模块</strong>组件，每次我们在场景中创建画布时都会创建该组件。这样，我们就能毫无困难地点击每个按钮。</p><blockquote class="mg mh mi"><p id="8312" class="js jt mj ju b jv jw is jx jy jz iv ka mk kc kd ke ml kg kh ki mm kk kl km kn hb bi translated">注:如果您使用的是传统输入系统，请跳过这一步。</p></blockquote><div class="jh ji jj jk fd ab cb"><figure class="lm jl mn lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/ecef71d4b1b9d52de0cc6836a8f2840a.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*BsC7pYOMyqUvgo_WFtyGGg.png"/></div></figure><figure class="lm jl mo lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/39d67e2b4c837ef474fe4a2c068b4bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*_hCDw5xLFLTZjZeXVuWNWA.png"/></div></figure><figure class="lm jl mp lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/fa75389bd9658b2899f4411fc52c59ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/1*BzukA3oka9fz9z0HEiz93A.gif"/></div></figure></div><h1 id="88d4" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">创建车间技工</h1><p id="0302" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，让我们开始在一个新的 C#脚本中创建车间机制:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mq"><img src="../Images/9139ed159aa25b0e1f9d1e8b41429da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/1*MwHtXeW4Jv_tziJ4XhJOLw.gif"/></div></figure><p id="85fd" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">创建完成后，让我们从<strong class="ju hs"> UnityEngine </strong>库中导入<strong class="ju hs"> UI </strong>名称空间，以便能够处理我们代码中的 UI 元素:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mr"><img src="../Images/a1db006535defe42f4b07497aaf09d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*aeOIdIUnB2EIWAGK4_hsSg.png"/></div></figure><p id="11bf" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们创建两个新的变量来引用对话文本和商店中的商品图片。不要忘记将<strong class="ju hs">【serialize field】</strong>与私有变量一起使用，以便能够将引用拖动到检查器:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ms"><img src="../Images/ef5de268361987af3c097f17259719ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*W02CSTH2GoV1mAD4rpD_fA.png"/></div></figure><p id="6b5d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">接下来，让我们创建一个新的公共方法，它将接收一个类型为<strong class="ju hs"> Item </strong>的可脚本化对象作为参数。然后，当一个项目被选中时，我们将使用它来更改对话框中的文本和相应的图像:</p><blockquote class="mg mh mi"><p id="a65f" class="js jt mj ju b jv jw is jx jy jz iv ka mk kc kd ke ml kg kh ki mm kk kl km kn hb bi translated">注意:我们可以接收其他信息作为参数来实现我们的目标，但是我们使用可脚本化的对象，因为它们是存储信息的好方法。</p></blockquote><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mt"><img src="../Images/b172a3ae1dd8bf7b39c32cb710103574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*F1kggXJymNlnh9GoFKC-vw.png"/></div></figure><p id="1d0e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">类型为<strong class="ju hs">项目</strong>的可脚本化对象包含以下信息:</p><ul class=""><li id="469f" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">名字</li></ul><p id="0f1c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该属性将存储我们项目的名称。我们在名字前使用<strong class="ju hs">新的</strong>关键字来避免命名的麻烦，因为 Unity 使用<strong class="ju hs">名字</strong>关键字来存储每个创建的游戏对象的名字。</p><ul class=""><li id="a54e" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">费用</li></ul><p id="d00a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该属性将以钻石的形式存储物品的价值。</p><ul class=""><li id="0dd3" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">图像</li></ul><p id="91be" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该属性将存储该项中相应的 sprite。</p><ul class=""><li id="ac19" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">描述</li></ul><p id="15ae" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该属性将存储项目的描述。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nd"><img src="../Images/57f3bd452fb9870d10fd26335666c406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cww7J4MGk4x1EyJNvAh_dA.png"/></div></div></figure><p id="13ce" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，定义了可脚本化的对象后，让我们为商店中的每个商品创建一个对象，并通过检查器定义各自的属性:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ne lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/573c68ecd1f4b567dbd183bf9726b707.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*U4Buba5La_80nxLOWXMvMA.png"/></div></figure><figure class="lm jl nf lo lp lq lr paragraph-image"><img src="../Images/20041ac913c1e25471ca8c10c2f4f1f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*f6mfGcCe8bhHJbMjqPB9pg.png"/></figure></div><p id="28d7" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们将<strong class="ju hs">商店</strong>脚本附加到商店游戏对象中:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/9b0e798379f193357005b4633f2f3314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_GVg2CBjGq7TLkmiLIM6vw.png"/></div></div></figure><p id="afca" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">连接后，让我们将 UI 元素的引用拖动到检查器:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ng lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/b492aadbfb66a789b5484fb36b817c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/1*fGkcXJJva48JnFfFzcdwuQ.gif"/></div></figure><figure class="lm jl nh lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/c8f91b5b1e04fc477afe6b5886d0c956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/1*jXUI7g7o_htza_HITxylQw.gif"/></div></figure></div><h1 id="d446" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">使用 OnClick 事件</h1><p id="2401" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了在我们点击商店的按钮时显示各自的信息，让我们使用 UI 按钮的 OnClick 事件来调用<strong class="ju hs">商店</strong>类中各自的方法。</p><p id="e7d6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">要使用它们，让我们:</p><ul class=""><li id="76dd" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">选择按钮并在按钮组件中添加一个 OnClick 事件。</li><li id="b6c6" class="mu mv hi ju b jv ni jy nj kb nk kf nl kj nm kn mz na nb nc bi translated">将商店<strong class="ju hs"> </strong>游戏对象(带有<strong class="ju hs">商店</strong>类组件)拖到 OnClick 事件中。</li><li id="d144" class="mu mv hi ju b jv ni jy nj kb nk kf nl kj nm kn mz na nb nc bi translated">当按钮被选中时，选择我们创建的方法。</li><li id="19d7" class="mu mv hi ju b jv ni jy nj kb nk kf nl kj nm kn mz na nb nc bi translated">将相应的可编写脚本的对象拖到 OnClick 事件中，作为参数发送。</li></ul><div class="jh ji jj jk fd ab cb"><figure class="lm jl nn lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/7d5555f34ead291d96c51630d5719fb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*OnsWcU8wNbV-RdXCJMcLAw.png"/></div></figure><figure class="lm jl no lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/2290c19188592124f7eed5bdd94279a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/1*40904LJeoL3CqE3dWpnlaw.gif"/></div></figure></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es np"><img src="../Images/6edf7cba7a706bcb6f73bec4adcfad93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/1*pL-3d6eEgPS1Y_ZJeC0hww.gif"/></div></figure><p id="dc16" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们用 Unity 运行游戏，我们会看到当我们单击每个按钮时，描述和图像 UI 元素会发生变化:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/ca5fb6e2c3727a08068253b319ef0e32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*i0VQBbIzO93HRRIMXK94_w.gif"/></div></div></figure><p id="af36" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们使用 UI 元素中的 OnClick 事件来统一显示信息！:d .下一篇文章再见，我将展示如何用 Unity 在我们的游戏中实现跨平台输入。</p></div><div class="ab cl nq nr gp ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="hb hc hd he hf"><blockquote class="mg mh mi"><p id="4311" class="js jt mj ju b jv jw is jx jy jz iv ka mk kc kd ke ml kg kh ki mm kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>