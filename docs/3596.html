<html>
<head>
<title>Implementing space shooter game features - Laser beam enemy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现太空射击游戏功能-激光束敌人</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-laser-beam-enemy-7ce3ec430d72?source=collection_archive---------13-----------------------#2021-06-15">https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-laser-beam-enemy-7ce3ec430d72?source=collection_archive---------13-----------------------#2021-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="c897" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="4c94" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">Unity 空间射击游戏新增功能快速回顾</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/76cc92c497117c14f60fe8376196d344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*szvcJ2pJeNRHqaZ9N7Ntgg.gif"/></div></div></figure><p id="cd75" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:用 Unity 实现一个太空射击游戏的新射击新敌人。</p><p id="eb41" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在之前的帖子中，我<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-space-shooter-game-features-freezing-power-up-ee65fb79115c">在我的 Unity 太空射击游戏中实现了一个当玩家收集到</a>能量时冻结玩家的能量。现在是时候用一种新的射击方式来实现一个新的敌人，让游戏变得更加复杂。</p><h1 id="8278" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">新资产</h1><p id="0968" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了实现一个新的敌人，我设法用我已有的资源创造了新的精灵。如果你不知道在哪里创建或获得新的精灵，那么我建议你(像上一篇文章一样)使用一个免费的在线程序:</p><div class="lm ln ez fb lo lp"><a href="https://pixlr.com/e/" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">图片编辑:Pixlr.com——免费在线图片编辑</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">登录/注册欢迎使用 Pixlr 的免费高级照片编辑器。点击打开照片按钮开始编辑…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">pixlr.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md jq lp"/></div></div></a></div><h2 id="a219" class="me kq hi bd kr mf mg mh kv mi mj mk kz kb ml mm lb kf mn mo ld kj mp mq lf ho bi translated">新的敌人精灵</h2><p id="77ce" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">这些是我用来制造新敌人的精灵:</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl ms mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/27f9aee519ecce8442e14681bc3c448a.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/1*rRhx2JDaYhCJW6JvemSKhw.gif"/></div></figure><figure class="mr jl mx mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/22f56c74a9d8a819cba5333c4e16ec06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*8Cx4vbOgH0abCJHqbbhmsw.png"/></div></figure></div><p id="8eef" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我为敌人做了 3 个不同的动画:</p><ul class=""><li id="d2a1" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">敌人移动时的默认动画</li><li id="ae26" class="my mz hi ju b jv nh jy ni kb nj kf nk kj nl kn nd ne nf ng bi translated">当敌人被消灭时的动画</li><li id="91c4" class="my mz hi ju b jv nh jy ni kb nj kf nk kj nl kn nd ne nf ng bi translated">当敌人要发射激光束时的动画</li></ul><div class="jh ji jj jk fd ab cb"><figure class="mr jl nm mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/423d3cda065dc986674c5fe90bcc48d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*e59ElqNoRBhIE63ueNxodg.png"/></div></figure><figure class="mr jl nn mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/5d388272984c4af7b7e0e7d3497b7040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*u3LNqvtREqn6tc5c1fgHkA.png"/></div><figcaption class="no np et er es nq nr bd b be z dx ns di nt nu translated">我使用各自动画控制器中的触发器来管理不同的动画。</figcaption></figure></div><p id="ee18" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，我在检查员中添加了敌人拥有的各个组件:</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl nv mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/384bd42d7e8fe869a47582715095eda6.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*72gHLbDEU9jcclcj451SQw.png"/></div></figure><figure class="mr jl nw mt mu mv mw paragraph-image"><img src="../Images/19eb8621ce21bb5e62ef4fbc642e65b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/1*HcpG6u3Aao4Vsc2b5IOazg.gif"/><figcaption class="no np et er es nq nr bd b be z dx nx di ny nu translated">这些是来自新敌人的组件和动画。</figcaption></figure></div><p id="d1f7" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果你不知道如何在 Unity 中添加精灵或动画，你可以查看这些旧帖子:</p><div class="lm ln ez fb lo lp"><a href="https://fas444.medium.com/upgrading-from-a-prototype-to-a-work-of-art-in-unity-4f3c0435501d" rel="noopener follow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">在 Unity 中从原型升级为艺术品</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">关于从原型升级到 Unity 艺术作品的详细指南</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">fas444.medium.com</p></div></div><div class="ly l"><div class="nz l ma mb mc ly md jq lp"/></div></div></a></div><div class="lm ln ez fb lo lp"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/animating-sprites-in-unity-9d02762bde96"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">在 Unity 中制作精灵动画</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">关于如何在 Unity 中制作精灵动画的快速指南</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">medium.com</p></div></div><div class="ly l"><div class="oa l ma mb mc ly md jq lp"/></div></div></a></div><div class="lm ln ez fb lo lp"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/creating-explosions-for-your-game-in-unity-889e9c373d14"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">在 Unity 中为你的游戏制造爆炸</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">关于如何在 Unity 中使用动画精灵创建爆炸的快速指南</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">medium.com</p></div></div><div class="ly l"><div class="ob l ma mb mc ly md jq lp"/></div></div></a></div><h1 id="ea91" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">新敌人</h1><p id="9a08" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了实现新的敌人行为，我创建了 2 个新脚本:</p><ul class=""><li id="fc13" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">弧形敌人</li></ul><p id="2c46" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个脚本允许敌人以弧形路径移动。</p><ul class=""><li id="c3a0" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">激光束敌人</li></ul><p id="1469" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个脚本处理发射激光束的敌人的行为。</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl oc mt mu mv mw paragraph-image"><img src="../Images/fd827b72708ceb112762f63f4d023c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/1*x2JWZPWNi0OXIPb4ZMKQzQ.gif"/></figure><figure class="mr jl od mt mu mv mw paragraph-image"><img src="../Images/8f31e9ccfe42bc507a726fbac0e17cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/1*dDFsuamqbfsHMC_4bVaPmw.gif"/></figure></div><h2 id="e590" class="me kq hi bd kr mf mg mh kv mi mj mk kz kb ml mm lb kf mn mo ld kj mp mq lf ho bi translated">弧敌级</h2><blockquote class="oe of og"><p id="df2f" class="js jt oh ju b jv jw is jx jy jz iv ka oi kc kd ke oj kg kh ki ok kk kl km kn hb bi translated">注:不，与<a class="ae ko" href="https://www.archenemy.net/en/" rel="noopener ugc nofollow" target="_blank">宿敌乐队</a>无关😝，但是我不得不接受我喜欢他们的一些歌。</p></blockquote><p id="b269" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个类将实现我们敌人的移动行为，所以它需要从<strong class="ju hs">敌人行为</strong>类继承(我在<a class="ae ko" href="https://fas444.medium.com/implementing-space-shooter-game-features-enemy-behavior-a784cb1d8af0" rel="noopener">一个更老的帖子</a>中使用了这个类):</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ol"><img src="../Images/b58fbdba32557fa6fc5b5b5f7672f8b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*GQJyEpKa3EZQhOHI4297kw.png"/></div></figure><p id="bde9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们使用下一个变量:</p><ul class=""><li id="1653" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">抬前轮速度</li></ul><p id="c382" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储敌人的旋转速度。</p><ul class=""><li id="1f23" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">旋转角</li></ul><p id="530e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储每秒旋转敌人的角度。</p><ul class=""><li id="8f39" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">平移方向</li></ul><p id="e171" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储 Vector3 方向轴来移动敌人。</p><ul class=""><li id="db16" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">平移旋转</li></ul><p id="b32d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储矢量 3 方向轴来旋转敌人。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es om"><img src="../Images/f153f41a5c4381d0829cdb5970aa807f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*llxeAEF1fAOITBYcdkKuKQ.png"/></div></figure><p id="376c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，在<strong class="ju hs"> Start </strong>方法中，让我们覆盖来自父类的虚拟方法(但仍然调用它),以选择操场中外观的一侧，并选择开始移动的方向和旋转:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es on"><img src="../Images/2773745877a585eae85ef67f9150fd98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DIcyYsh6KnzQavbEQfg3DA.png"/></div></div></figure><p id="1920" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs"> SetNewSide </strong>方法在父类中，帮助改变敌人游戏对象的位置。然后，<strong class="ju hs"> SetNewRotAndDir </strong>方法就在这个类中，它帮助选择方向轴，以弧形路径移动和旋转:</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl oo mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/06fb8ad6ac33eaa339fd96130c476f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1478/format:webp/1*QBdCV6qW8HJVv2rYB_2TkQ.png"/></div></figure><figure class="mr jl op mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/7214d66daaee691c82f0adc8d80cd317.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*hBZaE2g8y6nooF2G8AYZ5w.png"/></div></figure></div><p id="f451" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，对于<strong class="ju hs">更新</strong>方法，我们调用<strong class="ju hs"> MoveEnemy </strong>方法每帧移动敌人。由于<strong class="ju hs"> Update </strong>方法在父类中是虚拟的，我们需要使用一个覆盖来移动敌人:</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl oq mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/ffac65278e5581507d28641d49e31550.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*NuN1-uYV8tDeykCEzQe06w.png"/></div></figure><figure class="mr jl or mt mu mv mw paragraph-image"><img src="../Images/af65a92a0f0462db3ef39e371ff29490.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*C3ODblDun2BX7RLAov1fjA.png"/><figcaption class="no np et er es nq nr bd b be z dx os di ot nu translated">父类中的<strong class="bd kr">更新</strong>方法(第一个)和该类中的<strong class="bd kr">更新</strong>方法(第二个)。</figcaption></figure></div><p id="c4fb" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs"> MoveEnemy </strong>方法也是父类中的虚方法，所以我们需要使用一个 override 来移动这个类中的敌人，但是我们也使用了<strong class="ju hs"> base。敌方</strong>调用先从父类执行方法:</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl ou mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/b4cd52d64ecbf338245af98330fe493c.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*lQR8ifRhC5hJbwiEAmswog.png"/></div></figure><figure class="mr jl ov mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/0f637f7434d228e31e15535e21856323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*giMg_xffK4pOn_vcl4Avbw.png"/></div><figcaption class="no np et er es nq nr bd b be z dx ow di ox nu translated">父类中的<strong class="bd kr"> MoveEnemy </strong>方法(第一个)和该类中的<strong class="bd kr"> MoveEnemy </strong>方法(第二个)。</figcaption></figure></div><p id="8382" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们用 Unity 运行游戏，我们会看到敌人以弧形路径移动:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/c66ee83edcf1df81ebe2124f99075551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HqMXB5h3L5PWypeZqxdlnw.gif"/></div></div></figure><h2 id="9f30" class="me kq hi bd kr mf mg mh kv mi mj mk kz kb ml mm lb kf mn mo ld kj mp mq lf ho bi translated">激光束敌人级</h2><p id="4040" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了实现发射激光束的敌人的移动行为，让我们在这个新脚本中继承<strong class="ju hs"> ArcEnemy </strong>类:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es oy"><img src="../Images/b5a2e88edfc867b057d7c82215899b44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/1*ER2IDxzAbw7QxewTGXSFrw.gif"/></div></figure><p id="4599" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们需要使用这些变量来处理新敌人的行为:</p><ul class=""><li id="167c" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">等待拍摄</li></ul><p id="cc67" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该变量将存储每次敌人移动时发射激光束前的等待时间。</p><ul class=""><li id="e419" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">耽搁</li></ul><p id="90f5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将帮助我们在协程中使用它返回各自的等待时间(以秒为单位)。</p><ul class=""><li id="1533" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">拍摄持续时间</li></ul><p id="5075" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量也将帮助我们在协同作战中让敌人呆在原地，直到激光束消失。</p><ul class=""><li id="a67f" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">正在拍摄</li></ul><p id="b7d0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储敌人的状态，以了解它是在射击还是在移动。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es oz"><img src="../Images/66378b89430dcc534668e9f6bd25ab07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*Y-IkXf7RENy4vrTDEtt6BA.png"/></div></figure><p id="85cd" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了处理这个移动，我们需要覆盖父类的<strong class="ju hs"> MoveEnemy </strong>方法(它以弧形路径移动敌人),并用<strong class="ju hs"> isShooting </strong>变量来限定它的移动。这样，我们可以确保玩家只在不发射激光束时才移动:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es pa"><img src="../Images/f8fa89f3b9ca77073bfc8b0a806ee5ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*1bOAt4k5kMvFMzwXwNxmRA.png"/></div></figure><p id="3b38" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，对于<strong class="ju hs"> Start </strong>方法，让我们覆盖父类方法(但仍然调用它)并初始化各自的变量来帮助协程。第一个延迟将使用 Unity 编辑器中检查器指示的浮动变量进行初始化，而第二个延迟将使用附加到镜头预设引用的脚本中的值进行初始化，该引用来自<strong class="ju hs"> EnemyBehavior </strong>父<strong class="ju hs"> </strong>类。</p><p id="4e27" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">一旦变量被初始化，让我们开始敌人的射击程序:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es pb"><img src="../Images/555ef11f6f9305c7ef3f61f2a984a02f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ah6P5Wv5JRDc6ELcG6NMow.png"/></div></div></figure><p id="c9e1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">射击序列</strong>协程将等待第一次延迟，然后通过将<strong class="ju hs"> isShooting </strong>变量设置为真来停止敌人的移动，并通过在 animator 引用中设置各自的触发器来启动射击动画(这也来自于<strong class="ju hs">enemy behavior</strong>parent<strong class="ju hs"/>类):</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es pc"><img src="../Images/b155c84809a27c61e5a5120880877440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*I03MKgVDvIYW9v1-wfs87Q.png"/></div></figure><p id="21d8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">以下是敌人各自的触发和动画流程:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/d660c07e743ef69a5a5a3d4c0772d2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u3LNqvtREqn6tc5c1fgHkA.png"/></div></div></figure><p id="1578" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">当<strong class="ju hs">拍摄序列</strong>协程在 animator 中设置<strong class="ju hs">拍摄</strong>触发器时，这将改变状态以触发拍摄动画。在这个动画中，我们将使用动画事件，这将调用一个新的方法来实例化我们敌人的一侧或两侧的相应镜头。</p><p id="7fdf" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在下一张图中，您将能够看到动画的一些关键帧中的事件。这样，我们可以确保生成的激光束与显示要拍摄的一面的精灵相协调:</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl pd mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/22e2da31bf995279cb6866b87ba55908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*AIiOS47Btk9RpSVYgGJOPw.png"/></div></figure><figure class="mr jl pe mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/8cedfa14cee61e1def64c11383f49487.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*rU64nGtLXbqa7XKW7MiIeQ.png"/></div><figcaption class="no np et er es nq nr bd b be z dx pf di pg nu translated">通过修改与事件一起发送的值，我们可以在关键帧的各个精灵中区分敌人的两侧。</figcaption></figure></div><p id="a971" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果您想了解更多关于动画事件的信息，您可以访问 Unity 文档:</p><div class="lm ln ez fb lo lp"><a href="https://docs.unity.cn/Manual/script-AnimationWindowEvent.html" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">使用动画事件</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">你如何在整个工作流程中使用文档？请参加本次调查，与我们分享您的体验。你可以…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">docs.unity.cn</p></div></div><div class="ly l"><div class="ph l ma mb mc ly md jq lp"/></div></div></a></div><p id="6d4a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在关键帧处调用的方法将是<strong class="ju hs"> ShootFromTheSide </strong>，它将接收侧面的编号以实例化激光束。</p><p id="7924" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">由于只有两方可以射击，我们将通过使用<strong class="ju hs"> Random.value </strong>来确保每一方都有 33%的机会射击。如果结果小于<em class="oh"> .33 </em>，该方法将继续，但如果结果大于此数，它将返回。如果没有一方决定拍摄，那么我们将确保他们都在最后一个关键帧拍摄，而不依赖于随机值。</p><p id="808d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">无论如何，如果该方法继续，它会将动画速度设置为 0，以在激光束射出时显示关键帧的精灵:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es pi"><img src="../Images/e657f6c39d417d7fb20c699f72d9ebd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*ZRyZtSU-6a5CZSm7CtiR-g.png"/></div></figure><p id="2ece" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了正确实例化快照，我们需要调整位置和旋转，以匹配 sprite 尺寸和<strong class="ju hs">实例化</strong>方法参数中的一些变量。</p><p id="92c6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">举例来说，让我们用 switch 语句检查相应的一侧，并通过播放镜头的相应声音并启动协程停止拍摄序列来完成:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es pj"><img src="../Images/a40734aca8d144e6e25709edfa7bd00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEzZNENV5JWy3Hh3Q7WyFg.png"/></div></div></figure><p id="d8de" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，用下一个协程停止拍摄动画，让我们等到镜头消失。要停止它，让我们将动画速度设置为正常状态，并将触发器设置为返回正常动画。</p><p id="a0c4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们改变旋转和移动的方向，开始一个新的拍摄序列:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es pk"><img src="../Images/a8bc09d6802439bef75fdadbbf8853a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*35KA4oQapnkyGJr01LQUuA.png"/></div></figure><h1 id="76d7" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">新镜头</h1><p id="13e1" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了处理激光束行为，让我们创建一个新的脚本:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es pl"><img src="../Images/9edb10d207df33e7ae7ae917b205d2b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/1*36HYU0BA6SMSt9LvBNJX5Q.gif"/></div></figure><p id="1925" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">让我们让新类继承<strong class="ju hs"> Shot </strong>类:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es pm"><img src="../Images/9d5f34d176cfd08b239fc988c988f5a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*kZpp32IgSfBq2xELbSQ20w.png"/></div></figure><p id="7ccb" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们将使用这个新类中的下一个变量:</p><ul class=""><li id="81a9" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">持续时间</li></ul><p id="7ca1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该变量将存储破坏激光束前的等待时间。我们将能够通过检查器修改它，并使用同名的公共属性获取它的值。</p><ul class=""><li id="2e3e" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">范围</li></ul><p id="d7e6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储光线投射的长度，我们将使用它来检测空间中的碰撞器。</p><ul class=""><li id="53d4" class="my mz hi ju b jv jw jy jz kb na kf nb kj nc kn nd ne nf ng bi translated">线条</li></ul><p id="a0d9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该变量将存储一个对线渲染器组件的引用，该组件将附加到快照以显示激光束。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es pn"><img src="../Images/75b2228a394f2d275b91f54817b8fea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*387zNnT423Ov3hP_bECcIg.png"/></div></figure><p id="7559" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们需要通过检查器修改镜头预置的值:</p><div class="jh ji jj jk fd ab cb"><figure class="mr jl po mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/4b6de33bb737ae23bcd278aa93a219f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*I8IF0_9e_pqSpOlU5x23qg.png"/></div></figure><figure class="mr jl pp mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/64f12e1dccc2b58db88ddf6aea66cdb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*LZQNHI2CG7CCiZR_JTVnGA.png"/></div></figure><figure class="mr jl pq mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/7ff1527393a8b5546c3918f0dff2d730.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/1*POwPA2httlEz50oi1fSQEw.png"/></div><figcaption class="no np et er es nq nr bd b be z dx pr di ps nu translated">镜头预设将有一个<strong class="bd kr">激光光束镜头</strong>脚本和一个<strong class="bd kr">线渲染器</strong>附加。</figcaption></figure></div><p id="4e51" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">首先，我们将覆盖<strong class="ju hs"> Shot </strong>类的虚拟<strong class="ju hs"> Start </strong>方法(但仍然调用它)。在这里，我们将初始化我们的 Raycastand 的范围，并使用<strong class="ju hs"> GetComponent </strong>获取对 line renderer 组件的引用。</p><p id="8b97" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，我们将使用<strong class="ju hs"> Physics2D。RaycastAll </strong>在一个数组中获取在我们的光线投射范围内被击中的所有物体(用碰撞器),这样我们就可以检查它们的标签并采取相应的行动。</p><p id="b34e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果 hit 识别操场碰撞体，我们将通过设置我们的线渲染器的初始和最终位置，使用 hit 的距离来显示从敌人到操场边界的线。</p><p id="7cc3" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果 hit 也识别玩家碰撞器，我们将调用对玩家造成伤害的方法。</p><p id="e87c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，附加了这个脚本的激光束预置将在持续时间变量中设置的时间后被销毁:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es pt"><img src="../Images/5a9f49869e83e97c8e1f4ec81c9ec095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Isy05WmhdaexwW8l32FuSg.png"/></div></div></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es pu"><img src="../Images/75276e9780cfa5df4acb6070779101e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4kj2W9Cl129khnlK8_3JA.png"/></div></div></figure><blockquote class="oe of og"><p id="cee4" class="js jt oh ju b jv jw is jx jy jz iv ka oi kc kd ke oj kg kh ki ok kk kl km kn hb bi translated">注意:这个方法是从<strong class="ju hs"> Shot </strong>类的<strong class="ju hs"> Start </strong>方法中调用的，这个类的<strong class="ju hs"> Start </strong>方法是使用<strong class="ju hs"> base 调用的。</strong>开始()开始。</p></blockquote><p id="33a9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果您想了解更多关于<strong class="ju hs"> Raycast </strong>和<strong class="ju hs"> RaycastAll </strong>的信息，您可以访问 unity 文档:</p><div class="lm ln ez fb lo lp"><a href="https://docs.unity3d.com/ScriptReference/Physics2D.Raycast.html" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">物理 2D。光线投射</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">你如何在整个工作流程中使用文档？请参加本次调查，与我们分享您的体验。建议一个…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">docs.unity3d.com</p></div></div><div class="ly l"><div class="pv l ma mb mc ly md jq lp"/></div></div></a></div><div class="lm ln ez fb lo lp"><a href="https://docs.unity3d.com/ScriptReference/Physics2D.RaycastAll.html" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hs fi z dy lu ea eb lv ed ef hr bi translated">物理 2D。射线铸造</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">光线投射在概念上类似于从空间中的一点沿着特定方向发射的激光束。任何…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">docs.unity3d.com</p></div></div><div class="ly l"><div class="pw l ma mb mc ly md jq lp"/></div></div></a></div><p id="0f59" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们在 Unity 中运行游戏，我们会看到敌人发射激光束并以弧形路径移动:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/686caa70f5cbf8280b0515d0b0d3ffa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bZIBX8kd4lApkpas4E9Scg.gif"/></div></div></figure><p id="c612" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们用新的镜头和新的行为实现了一个新的敌人！:d .我会在下一篇文章中看到你，在那里我会展示更多添加到我的 Unity 太空射击游戏中的功能。</p></div><div class="ab cl px py gp pz" role="separator"><span class="qa bw bk qb qc qd"/><span class="qa bw bk qb qc qd"/><span class="qa bw bk qb qc"/></div><div class="hb hc hd he hf"><blockquote class="oe of og"><p id="17b4" class="js jt oh ju b jv jw is jx jy jz iv ka oi kc kd ke oj kg kh ki ok kk kl km kn hb bi translated"><em class="hi">如果你想更多地了解我，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>