# Javascript 中的原型继承

> 原文：<https://medium.com/nerd-for-tech/prototypal-inheritance-in-javascript-b41c7dba8c79?source=collection_archive---------11----------------------->

![](img/3eaddd7ac5e86471dffa6d2ce0bb6cb1.png)

[嗯嗯嗯](https://dr5dymrsxhdzh.cloudfront.net/blog/images/a038679a4/2018/04/rsz_istock-181899228.jpg)

不管我的简历怎么说，关于 Javascript 有很多东西我并不真正了解。我经常看到“单子”这个词。不太确定这个“垃圾收集者”是如何谈论作品的(也许如果我给它带一瓶佳得乐？).JS 有类型化数组？

在这种编程语言的所有谜团中，最神秘的是原型。我不断看到原型无处不在，我不知道这意味着什么。所以在本周的博客中，我将谈论 Javascript 中的原型和继承。

## 什么是原型？

在 Javascript 中，原型是其他对象和数据结构从中提取特征的对象。函数、数组、对象、字符串、甚至数字都有原型，尽管出于某种我不知道的原因，你不能在`2`上调用`__proto__`。另外,`__proto__`是一个现在不推荐使用的表达，用于查看对象的原型对象。

Javascript 被广泛认为是一种“基于原型”的语言。为了继承方法和属性，对象有一个原型对象作为模板。

我听过一个很好的例子，将原型遗传等同于在学校借一支铅笔，这是我们许多在美国公立学校系统(也许在其他地方)的人都做过的事情。假设你在一个班里，比如世界史，老师给每个人发了一张登记表，让他们选择一个国家进行研究。你拿到了报名表，但是啊哦，你没有钢笔或铅笔。于是你拍了拍坐在你旁边的朋友的肩膀，说:“嘿，我能借你的铅笔吗？我今天忘了带，但我发誓我明天会带一支的，直到永远，哈哈。”你的朋友畏缩着说:“哦，伙计，我真希望你没这么说，因为实际上我也没有铅笔，我本来想等单子到了再问你的。等一下……”你的朋友拍了拍另一个朋友的肩膀，重复了这个问题，那个朋友说“哦，好的，做完了就还给我”，然后嗖嗖嗖你的朋友拿起铅笔，递给你，现在你们都报名去意大利了。

希望这是不言自明的，但是在上面的例子中，你用 Javascript 表示一个对象。你的朋友和另一个朋友是我们称之为**原型链**上的对象，而梦寐以求的铅笔是通过链传递给你的功能。

这也适用于属性。比方说，如果老师叫你，问你几年级了，而你有一个[辣妈辣妹](https://en.wikipedia.org/wiki/Freaky_Friday_(2003_film))类型的一天，你实际上是另一个人，不记得了，你可以用恳求的眼神看着班上的其他人，希望他们会给你机会说“兄弟，你忘了你是 10 年级了吗？？?"财产。

如果他们是你的原型。奇怪的类比，但是很好。

下面是前一个例子的一小段代码。我的朋友“Thomson”拥有`pencilAccess`函数和`grade`属性。在第 14 行，我使用了一个函数`setPrototypeOf`(它本身是`Object`原型上的一个函数)来设置 good ol' Thomson 作为我的原型。这样我可以用他的铅笔，他可以提醒我我们在几年级。

前提是我们在同一个年级。

## 我为什么要关心原型？

当我观看视频、阅读文章和解析文档时，一个问题一直困扰着我:好吧，那又怎样？我知道每当我需要被提醒`splice`函数如何在数组上工作时，我会在页面的顶部看到“Array.prototype ”,或者当我检查或记录一些东西时，我可能会看到类似于`.__proto__`的东西，但是我为什么要关心呢？

1.  正如我之前所说，Javascript 被描述为一种“基于原型”的语言。为了全面了解这些工具，了解 Javascript 基于什么可能是个好主意。同样，如果发生了错误，可能与原型有关？值得一试。
2.  学习原型继承会导致学习一般编程中的继承，一个常见的主题是使用类继承，而不是本文的主题。因此，让我们来讨论一下我学到了什么。

您可能知道，面向对象编程语言依赖于类。一个类经常被比作一张蓝图。使用它，您可以创建对象的新实例，这些实例具有在该对象的蓝图中定义的属性和方法，该对象是它的类。让我们来看另一个(老生常谈的)例子！

假设你正在为一个客户工作，他想在一个应用程序中制作动物模型。你首先创建一个猫类，并定义一些猫可以做的事情，比如喵，或者是繁殖，诸如此类。然后，你继续创建一个狗类，yadda yadda 狗叫猫喵，但你意识到，有一些事情，猫和狗都做，客户希望包括像吃饭，或者可能嗯洗澡什么的。所以你创建了一个动物类，这些函数对两者都很重要，你说猫和狗是从动物类继承来的。太好了。

但是现在客户回来了，说“嘿，到目前为止干得不错。事情正在发生变化，我们希望用户现在就能看到机器动物。”这给你的类的结构带来了一些问题，因为机器狗不需要吃东西。这是一个机器人，也许它需要加油或润滑，我不知道。所以，也许你也创建了一个机器动物类，但是你意识到狗和机器狗都需要使用吠叫功能。可以这么说，随着应用程序的增长，为基于类的继承所做的决定并不是最灵活的，并且会使开发人员编写冗余、低效的代码。

此外，当一个类从另一个类继承时，父类的所有方法都会传递给子类。这就是为什么我阅读的许多文章都提到了所谓的“香蕉问题”。问题是，根据经典遗传，当你想要一个香蕉时，你会得到那个香蕉，但你也经常会得到拿着香蕉的大猩猩以及周围的丛林。

这是为什么学习原型和继承很酷的一个例子。与前面的 pencil 示例一样，使用原型继承，对象不需要携带它所继承的对象的每个方法和属性。如果它需要访问，它可以沿着原型链(相互继承的对象层次结构)向上，找到并使用那个特性。

同样值得注意的是，虽然这比传统的继承更有效，更经得起未来的考验，但理想的解决方案是使用[对象组合](https://en.wikipedia.org/wiki/Composition_over_inheritance)，这超出了本文的范围，但在这个可爱的视频中有愉快的解释:

## 走向

这是原型的基础，也是 Javascript 中继承工作的方式。还有很多东西需要学习:对象创建方式的细微差别和变化、`this`关键字、Javascript 中相对较新的`class`关键字(老实说看起来有点傻)以及对象的构造函数。当我在 Mozilla 文档中看到 prototype 这个词时，我真的不想这么困惑。我非常感谢一些资源帮助我更好地理解这个话题，所以我将把它们贴在下面。希望这有所帮助！

## 其他资源

1.  [关于用 Javascript 创建对象的伟大系列](https://www.youtube.com/watch?v=GhbhD1HR5vk&list=PL0zVEGEvSaeHBZFy6Q8731rcwk0Gtuxub)
2.  [Mozilla 关于继承和原型链的文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)
3.  [Mozilla doc 关于对象原型哈哈](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes)