<html>
<head>
<title>Azure Role-Based Access Control (RBAC)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure基于角色的访问控制(RBAC)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/azure-role-based-access-control-rbac-3997842ee815?source=collection_archive---------10-----------------------#2021-03-29">https://medium.com/nerd-for-tech/azure-role-based-access-control-rbac-3997842ee815?source=collection_archive---------10-----------------------#2021-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/4eeda5e8e879684f03d94ee35335529b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*0CZqaxBViwb07UHgx2zSwQ.jpeg"/></div></figure><p id="60fb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我们之前的帖子中，您已经了解了云的基本概念，并简要了解了最受欢迎的云服务提供商之一——<a class="ae jk" href="https://www.partech.nl/nl/publicaties/2020/07/what-is-azure" rel="noopener ugc nofollow" target="_blank">微软Azure </a>。在这篇文章和随后的文章中，我们将深入Azure，了解它的一些核心特性和服务。</p><p id="95a6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">假设您组织的IT基础设施已经托管在Azure中，您的基础设施的下一个重要方面是确定谁可以访问什么，以及我如何在Azure中无缝地实现它。这就是Azure基于角色的访问控制(RBAC)派上用场的地方，这是Azure的内置功能，也是我们今天的主题。我们将详细解释<strong class="io hj">什么是Azure RBAC </strong>以及它如何帮助管理你的Azure服务的访问控制。</p><h1 id="fbbc" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">目录</h1><ol class=""><li id="3dfc" class="kj kk hi io b ip kl it km ix kn jb ko jf kp jj kq kr ks kt bi translated">什么是蔚蓝RBAC</li><li id="f0ff" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated">RBAC的主要概念</li><li id="c0ad" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated">角色分配</li><li id="4427" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated">RBAC的实际执行</li><li id="fac8" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated">最后的想法</li></ol><h1 id="a9c2" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">1.什么是蔚蓝RBAC？</h1><p id="1f97" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">Azure RBAC是一个内置的授权系统，有助于Azure资源的访问管理。通常，RBAC用于根据组织内个人的角色来限制网络访问。它允许用户访问完成工作所需的信息，并限制他们访问不属于他们的信息。</p><p id="3829" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们已经定义了什么是RBAC，让我们了解一些基本的Azure术语，我们将在我们的帖子中使用。</p><h2 id="76cd" class="lc jm hi bd jn ld le lf jr lg lh li jv ix lj lk jz jb ll lm kd jf ln lo kh lp bi translated">1.1 Azure订阅</h2><p id="e92b" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">Azure订阅是Azure资源的一个逻辑捆绑包，它作为该服务中存在的资源的单个计费单位。一个Azure订阅只能映射到一个帐户。但是，一个帐户可以有多个订阅。</p><h2 id="2fb0" class="lc jm hi bd jn ld le lf jr lg lh li jv ix lj lk jz jb ll lm kd jf ln lo kh lp bi translated">1.2资源提供者</h2><p id="fdcf" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">资源提供者通常提供可以在订阅中使用的资源。它们还描述了适用于每种资源的操作。大多数资源提供者都自动注册到订阅。如果没有，用户可以在需要时注册它们。</p><h2 id="cb28" class="lc jm hi bd jn ld le lf jr lg lh li jv ix lj lk jz jb ll lm kd jf ln lo kh lp bi translated">1.3资源组</h2><p id="a414" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">资源组是资源集合的中央单元，可以被视为一个实体。它有助于自动供应、监控，并有助于集中控制所有资源成员。</p><h1 id="4135" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">2.RBAC的主要概念</h1><p id="e39e" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">下面是RBAC的三个主要概念。</p><h2 id="b5e5" class="lc jm hi bd jn ld le lf jr lg lh li jv ix lj lk jz jb ll lm kd jf ln lo kh lp bi translated">2.1安全负责人(谁需要访问)</h2><p id="9bd6" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">它指的是需要访问Azure资源的实体。该实体可以是:</p><ul class=""><li id="3ddc" class="kj kk hi io b ip iq it iu ix lq jb lr jf ls jj lt kr ks kt bi translated">用户(在Azure Active Directory中拥有个人资料的人)</li><li id="4f7d" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj lt kr ks kt bi translated">组(加入Azure Active Directory的一组用户)</li><li id="b0d1" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj lt kr ks kt bi translated">服务主体(代表Azure服务或应用程序用来访问Azure资源的身份)</li><li id="d108" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj lt kr ks kt bi translated">托管身份(允许Azure资源向Azure Active Directory标识其自身，而不要求其提供任何显式凭据)</li></ul><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es lu"><img src="../Images/76cbe12b76cd9a262b1d7df3680b7188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NaaglVZC2Qz4V--t"/></div></div></figure><h2 id="6fc9" class="lc jm hi bd jn ld le lf jr lg lh li jv ix lj lk jz jb ll lm kd jf ln lo kh lp bi translated">2.2范围(访问什么)</h2><p id="1675" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">一旦我们决定了谁需要访问资源，下一步就是找出他们需要访问什么。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es md"><img src="../Images/49d9eee4e9d1ad8ff498c003b4c63f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DqblG7X8ojXSf9b1"/></div></div></figure><p id="f2fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">范围提供了安全主体可以访问的资源或资源组。例如，访问特定资源组中的应用服务。</p><p id="e4f3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Azure中，范围可以定义如下:</p><ol class=""><li id="d6c4" class="kj kk hi io b ip iq it iu ix lq jb lr jf ls jj kq kr ks kt bi translated">管理组，</li><li id="47a1" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated">订阅，</li><li id="a5bb" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated">资源组，以及</li><li id="0de8" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated">资源</li></ol><p id="8439" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们用一个例子来理解上面的内容。</p><p id="011f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">假设我们在开发(Dev)、质量保证(QA)、试运行和生产区域部署我们的解决方案。现在，他们想算出维护每个地区的成本，因此他们可以在地区级别创建订阅，即4个地区4个订阅。</p><p id="aa2b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了维护跨订阅的访问、策略和合规性，将在<strong class="io hj">管理组</strong>(订阅组)级别定义范围。类似地，为了在一个订阅中维护相同的策略集，范围将在<strong class="io hj">订阅</strong>级别定义。资源组和资源也是如此。</p><h2 id="cb4d" class="lc jm hi bd jn ld le lf jr lg lh li jv ix lj lk jz jb ll lm kd jf ln lo kh lp bi translated">2.3角色定义(如何访问)</h2><p id="a33e" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">角色定义是安全主体能够在定义的范围内执行的权限/操作的集合。换句话说，角色定义决定了安全主体可以完成的操作类型(读、写和删除)。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es me"><img src="../Images/c86115c1464c6865d3fb62a79dff334e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jXzqO8LKt1Y9jLeG"/></div></div></figure><p id="b363" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Azure有将近140多个内置角色。但是，四个基本的内置角色如下:</p><ol class=""><li id="98f1" class="kj kk hi io b ip iq it iu ix lq jb lr jf ls jj kq kr ks kt bi translated"><strong class="io hj">所有者</strong>(对该范围具有完全访问权限的安全负责人，有权将访问权限委托给他人)，</li><li id="f8c5" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated"><strong class="io hj">贡献者</strong>(拥有与角色“所有者”相似的所有权限。但是，他们不能将访问权限委托给其他人)，</li><li id="c9ef" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated"><strong class="io hj">阅读器</strong>(可以查看现有azure资源)，</li><li id="5bfd" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated"><strong class="io hj">用户访问管理员</strong>(允许管理用户访问管理资源)。</li></ol><p id="0285" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Azure允许我们创建自定义角色，当内置角色不适合或不特定于组织的需求时，这可能会派上用场。</p><h1 id="85a0" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">3.角色分配</h1><p id="9fee" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">RBAC是关于角色的。为了实现RBAC，必须创建角色分配。角色分配只不过是为特定范围的安全主体定义角色的过程。可以通过创建或删除角色分配来授予或撤销访问权限。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es lu"><img src="../Images/eaca771748282965bc93b9d519fe2259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ThRXAfduPT2PIs1X"/></div></div></figure><p id="1161" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Azure还允许你有多个角色分配。这里需要注意的重要一点是，在多角色分配中，会考虑角色分配中可用的最高权限，而较低权限角色的效果会被取消。</p><p id="3cec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如:</p><ul class=""><li id="c6fb" class="kj kk hi io b ip iq it iu ix lq jb lr jf ls jj lt kr ks kt bi translated">角色分配1-将参与者角色分配给用户的订阅。</li><li id="e0dd" class="kj kk hi io b ip ku it kv ix kw jb kx jf ky jj lt kr ks kt bi translated">角色分配2-将读者角色分配给同一用户订阅中的资源。</li></ul><p id="19d3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这种情况下，贡献者的较高特权将应用于用户的整个订阅，这将取消读者角色的效果。类似地，为了排除安全主体在定义的范围内执行的一组操作，Azure提供了拒绝分配。拒绝分配会阻止安全主体执行某些操作，即使存在授予其访问权限的角色分配。简而言之，拒绝分配优先于角色分配。</p><p id="2b85" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们考虑一个例子，一个开发人员可以访问所有区域(管理组)来更新或修改所有资源(角色分配)。但是，在生产区域(订阅之一)中，设置了一个规则(拒绝分配)，该规则不允许开发人员更新该订阅中的任何资源。</p><h1 id="1cff" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">4.RBAC的实际执行</h1><p id="8316" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">假设我们开始在云中构建基础设施，并为以下角色招募了候选人:<em class="mf">云架构师、数据库管理员、开发人员、测试人员和产品负责人</em>。让我们看看RBAC如何帮助我们有效地工作。</p><p id="f36a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="mf">云架构师</em> </strong> —负责云采用计划、云应用设计以及云管理和监控的个人或团队。云架构师的责任是提供云系统中要遵循的标准和要采用的最佳实践。因此，我们使用RBAC来确保云架构师能够访问所有订阅，并有权创建、读取、更新和删除资源。</p><p id="4cf5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="mf">数据库管理员</em> </strong> —在所有订阅中部署的数据库上工作的特定组。因此，我们使用RBAC来为数据库管理员提供<em class="mf"> contributor </em>对跨订阅部署的数据库的访问。</p><p id="38e4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="mf">开发人员</em> </strong> —对于开发人员，我们使用RBAC来确保范围仅限于他们的工作区域(可以是一个订阅或一个资源组),并且有权执行CRUD操作。</p><p id="a42a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="mf">测试人员和产品负责人</em> </strong> —我们使用RBAC向测试人员和产品负责人提供<em class="mf">读者</em>权限，以了解他们所需的范围。</p><p id="6b87" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因此，Azure帮助组织定义对系统有贡献的个人或团体的角色。</p><h1 id="52c9" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">5.最后的想法</h1><p id="8c3c" class="pw-post-body-paragraph im in hi io b ip kl ir is it km iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">访问管理是云治理的重要组成部分，应该给予最高优先级。它有助于定义一组规则来指导组织利用和控制云资源，以遵守数据安全的行业标准。实现适当级别的RBAC有助于实现安全的Azure环境和独立的安全主体。</p></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><p id="2091" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="mf">原载于</em><a class="ae jk" href="https://www.partech.nl/nl/publicaties/2020/07/azure-role-based-access-control-rbac" rel="noopener ugc nofollow" target="_blank"><em class="mf">https://www . partech . nl</em></a><em class="mf">。</em></p></div></div>    
</body>
</html>