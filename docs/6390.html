<html>
<head>
<title>Dealing with missing data using python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 python 处理缺失数据</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/dealing-with-missing-data-using-python-3fd785b77a05?source=collection_archive---------0-----------------------#2022-02-16">https://medium.com/nerd-for-tech/dealing-with-missing-data-using-python-3fd785b77a05?source=collection_archive---------0-----------------------#2022-02-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">使用 Pandas 和 NumPy 处理数据集中出现的缺失值</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/330998ed0ce7ebf2f00940dde2332ec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yO-v4R68Oy7Fbw9YAjJp-g.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">由<a class="ae ju" href="https://unsplash.com/@nasa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NASA </a>在<a class="ae ju" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><h1 id="ca81" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">介绍</h1><p id="9366" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">在现实生活中，可用的数据很少是干净的。每个数据集都可能有缺失值，因此数据清洗是每个数据科学项目的主要和最重要的部分。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lf"><img src="../Images/8125b8ec0740c54313b97a375a87431a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oCqulSDYHPTYqfQU4fmE7g.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">作者照片</figcaption></figure><p id="d785" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们展示了一些流行的内置 Pandas 工具，用于处理 Python 中的缺失数据。这个练习是通过使用<a class="ae ju" href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data?select=train.csv" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Kaggle 的房价数据集</strong> </a>进行的。</p><blockquote class="lg"><p id="5b39" class="lh li hi bd lj lk ll lm ln lo lp jc dx translated"><strong class="ak">为什么我们需要填写缺失的数据？</strong></p></blockquote><figure class="lq lr ls lt lu jj"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">来源:<a class="ae ju" href="https://giphy.com/gifs/backstreetboys-backstreet-boys-bsb-larger-than-life-1jajMAVf2vN9KxoFfw" rel="noopener ugc nofollow" target="_blank"> Giphy </a></figcaption></figure><p id="a0c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不幸的是，如果我们传递一个缺失值，例如不是一个数字(<strong class="ih hj"> NaN </strong>)，我们想要用于分类或回归问题的大多数机器学习(ML)模型将会提供一个错误。因此，在开始任何模型构建过程之前，我们需要确定数据清理过程的优先级。最基本的策略是删除所有包含缺失值的行，或者在极端情况下，删除包含缺失值的整列。然而，这种方法有一个缺点，因为我们会丢失数据，这可能会影响我们的模型性能。所以，这不是最好的主意。尽管如此，当一列中的大多数值都丢失时，它还是很有用的。</p><p id="9448" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">加载并查看数据集:</strong></p><p id="957e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用的数据集有 1460 个观察值，79 个解释性特征变量描述了美国不同州住宅的各个方面，一个输出变量预测每个住宅的最终价格。这些变量的全部细节在这里<a class="ae ju" href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data" rel="noopener ugc nofollow" target="_blank">描述。在本文中，我们将只关注处理缺失值的不同方法。</a></p><p id="d8f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们首先将<a class="ae ju" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/10min.html" rel="noopener ugc nofollow" target="_blank"> Pandas </a>和<a class="ae ju" href="https://numpy.org/doc/stable/user/absolute_beginners.html" rel="noopener ugc nofollow" target="_blank"> NumPy </a>导入到我们的 python 环境中，并将<a class="ae ju" href="https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">加载一个. csv 数据集</strong> </a> <strong class="ih hj"> </strong>到名为<strong class="ih hj"> df </strong>的 pandas dataframe 中。本文中展示的每一个例子都在<a class="ae ju" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>上得到验证。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lx lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">加载。csv 数据集并检查数据的结构</figcaption></figure><p id="960f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在开始分析数据并得出任何结论之前，有必要了解任何数据集中是否存在缺失值。数据集中缺失的值可以用不同的约定来表示(<strong class="ih hj">？，南，$，那，。… </strong>)。</p><blockquote class="lg"><p id="aa74" class="lh li hi bd lj lk ll lm ln lo lp jc dx translated">如何知道数据集是否有缺失值？</p></blockquote><p id="cd16" class="pw-post-body-paragraph if ig hi ih b ii ly ik il im lz io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">要检查我们的数据集是否有缺失值，最简单的方法就是使用<a class="ae ju" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.info.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> df.info() </strong> </a>函数。该函数将为我们提供列名以及每列中非空值的数量。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lx lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">索引数据类型、列和每列的非空值</figcaption></figure><p id="68f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有另一种方法可以发现数据中是否有空值，那就是使用<a class="ae ju" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.isnull.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> df.isnull() </strong> </a>函数。<strong class="ih hj"> df.isnull()。sum() </strong>用于汇总每列缺失值的总数。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lx lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">至少有一个 NaN 的列中缺失数据的总数</figcaption></figure><p id="7ce7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的输出中，我们发现 19 列缺少值。为了让我们的生活稍微轻松一点，最好编写一个缺失值函数，该函数将输出缺失值的总百分比以及数据集中存在缺失值的所有列的分布。我们将使用<a class="ae ju" href="https://matplotlib.org/stable/tutorials/introductory/usage.html" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>库来绘制缺失数据的列。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lx lw l"/></div></figure><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lx lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">缺少值的列的条形图</figcaption></figure><p id="209f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">处理缺失数据有多种方法，不同类型的数据集有不同的方法。没有处理缺失数据的通用方法。您需要探索不同的选项，并尝试确定哪种方法最适合您的数据集。</p><p id="e774" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们讨论一下处理缺失数据的方法:</p><ul class=""><li id="9a7a" class="md me hi ih b ii ij im in iq mf iu mg iy mh jc mi mj mk ml bi translated">删除缺少数据的行/列</li><li id="37d5" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">输入缺失值<strong class="ih hj"> </strong>(用值填充缺失数据)</li></ul><h1 id="66b3" class="kc kd hi bd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz bi translated"><strong class="ak">删除缺失数据的行/列</strong></h1><p id="bd8d" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">第一种方法是删除所有包含缺失值的行，或者在极端情况下，删除包含缺失值的整列。这可以通过使用<a class="ae ju" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.dropna.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">df . dropna()</strong></a><strong class="ih hj"/>函数来实现。<strong class="ih hj">轴=0 </strong>或<strong class="ih hj">轴=1 </strong>用于删除有 NaN 值的行/列。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="e73c" class="nb kd hi mx b fi nc nd l ne nf"># drop rows with missing values<br/>df.dropna(axis=0, inplace=True)</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ng"><img src="../Images/6c2b29dbd5ed40ce14cb2a3d324ef460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ATauFAnkTnGRGip1VvMePQ.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">此图片显示了删除一行(左)或一列(右)后的表格转换。</figcaption></figure><p id="ac09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的数据集中，我们观察到 4 列具有超过 1000 个 NaN 值(&gt; 65%)。因此，最好删除这些列。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nh"><img src="../Images/37cde248840a05f27d2931cdeebe28db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*548z-0NoxaUA7tl3Cbmc7A.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">使用 Pandas drop()函数删除四列</figcaption></figure><h1 id="2caa" class="kc kd hi bd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz bi translated"><strong class="ak">输入缺失值</strong></h1><p id="4fa6" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">下一个方法是用某个值替换丢失的值。替换缺失值时，有许多选项可供选择:</p><ul class=""><li id="eaf4" class="md me hi ih b ii ij im in iq mf iu mg iy mh jc mi mj mk ml bi translated">替换方法。</li><li id="3745" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">用零代替 NaNs。</li><li id="a0b8" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">使用列的平均值/中值/众数替换 NaNs。</li><li id="1dc6" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">用 sklearn 的 SimpleImputer()代替 NaNs</li><li id="aff9" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">用 k 个最近邻替换 NaNs(kNN)</li><li id="9d58" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">用上一行或下一行的值替换 NaNs(使用 ffill 或 bfill 方法)。</li><li id="05fa" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">用插值法替换 NaNs</li></ul><ol class=""><li id="c142" class="md me hi ih b ii ij im in iq mf iu mg iy mh jc ni mj mk ml bi translated"><strong class="ih hj">替换方法:</strong></li></ol><p id="bc81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时我们会在数据集中以<strong class="ih hj"> __、NA、@、？</strong>等。检查这些缺失值的最简单方法是打印特定列的唯一值。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="77c1" class="nb kd hi mx b fi nc nd l ne nf">df["column"].unique()</span></pre><p id="91e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们将使用<a class="ae ju" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.replace.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> df.replace() </strong> </a>函数将所有缺失的值替换为<strong class="ih hj"> NaN </strong>。这里，我们指定了要替换的值和替换值。现在，对我们来说，处理空值比处理任何未定义的符号更容易。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="7488" class="nb kd hi mx b fi nc nd l ne nf">df = df.replace('?',np.nan)</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nj"><img src="../Images/1e43d32c8b8aa49a0555d84c0b477c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hS5L2QPbPua2P6ng6UNVrQ.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">"?"第 2 列中的 sybmol 替换为“NaN”</figcaption></figure><p id="8e01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.<strong class="ih hj">用零替换 NaNs:</strong></p><p id="493a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用 Pandas<strong class="ih hj"/><a class="ae ju" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.fillna.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">df . fillna()</strong></a>函数将一列中缺失的值替换为 0。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="ad6b" class="nb kd hi mx b fi nc nd l ne nf">df["MasVnrArea"] = df["MasVnrArea"].fillna(0)</span></pre><p id="b041" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过替换方法也可以获得相同的输出。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="e60e" class="nb kd hi mx b fi nc nd l ne nf">df["MasVnrArea"] = df["MasVnrArea"].replace(np.nan, 0)</span></pre><p id="00b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.<strong class="ih hj">用均值/中值替换方差:</strong></p><p id="7150" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在数字列或变量(dtype : int，float)的情况下，我们可以用它们的平均值或中值来填充缺失的值。如果您将 dtype 作为数字列的对象，那么 pandas<a class="ae ju" href="https://pandas.pydata.org/docs/reference/api/pandas.to_numeric.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">to _ numeric(</strong></a><strong class="ih hj">)</strong>函数对于将对象类型列转换为数字列非常有用。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="b5b4" class="nb kd hi mx b fi nc nd l ne nf">df["column"] = pd.to_numeric(df["column"], errors = 'coerce')</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nk"><img src="../Images/65e649c30bdca988edebdcd9993f5cc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eCXTzwbxCsAuJkDLsGN3A.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">此图显示了在第 2 列中用平均值(左)或中值(右)替换 NaN 值</figcaption></figure><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="ef88" class="nb kd hi mx b fi nc nd l ne nf">#using mean<br/>df['LotFrontage'] = df['LotFrontage'].fillna(df['LotFrontage'].mean(), inplace=True)</span><span id="414c" class="nb kd hi mx b fi nl nd l ne nf"># using median<br/>df['LotFrontage'] = df['LotFrontage'].fillna(df['LotFrontage'].median(), inplace=True)</span></pre><p id="ecbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只有当数据有更多异常值时，才最好用数据的中值替换缺失数据。</p><p id="1080" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.<strong class="ih hj">用模式替换 NaNs:</strong></p><p id="ef7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在分类列或变量(dtype : object)的情况下，我们可以用最常见的值 mode 替换缺失的数据。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="c464" class="nb kd hi mx b fi nc nd l ne nf"># using mode<br/>df["GarageType"] = df["GarageType"].fillna(df["GarageType"].mode(), inplace=True)</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nm"><img src="../Images/7a6c772bf3241508340b90bacfee9be2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LAtRopatTsOCyRs6gLWBYQ.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">此图显示了用第 2 列中最常见的值(模式)替换 NaN 值</figcaption></figure><p id="2eb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.<strong class="ih hj">使用 SimpleImputer()进行输入:</strong></p><p id="13db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sklearn 库提供了一个函数<a class="ae ju" href="https://scikit-learn.org/stable/modules/generated/sklearn.impute.SimpleImputer.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">simple impurt(</strong></a><strong class="ih hj">)</strong>，可以用来替换缺失值。这允许我们通过传递一个 startegy 参数(如 mean、median、mode 或任何常量)来指定要替换的值。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lx lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">用 SimpleImputer()估算缺失数据并检查非空计数</figcaption></figure><p id="9850" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的例子中，我通过从现有的 dataframe <strong class="ih hj"> df 中选择一列(MasVnrArea)创建了一个新的 dataframe <strong class="ih hj"> df1 </strong>。</strong>该列共有 8 个 NaN 值。使用 simple import(strategy = ' mean ')将所有缺失值估算为平均值。</p><p id="f015" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong>均值/中值方法对编码分类变量给出的结果很差。此外，这些方法(均值、中值、众数)也没有考虑不同变量之间的相关性。</p><p id="a54b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.<strong class="ih hj">用 k 个最近邻居进行输入:</strong></p><p id="95cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sklearn 库提供了函数<a class="ae ju" href="https://scikit-learn.org/stable/modules/generated/sklearn.impute.KNNImputer.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">KNNImputer()</strong></a><strong class="ih hj"/>来替换缺失的值。这允许我们指定一个值，用数据点最近邻(n_neighbors)的平均值替换缺失值。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nn"><img src="../Images/47ec2f1683bca3571e336647aceb2e19.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*-zFGfDwH2NaSjJ-2RhbhgA.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">在上图中，我们将 k 值设为 3，在找到新数据点的最近邻后，新记录将倾向于根据多数投票转移到绿色三角形类，因为三角形数据记录更多地出现在 k 最近半径中。在 k 值= 7 的情况下，新的数据点将倾向于移动到红星类别。</figcaption></figure><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lx lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">用 KNNImputer()估算缺失数据并检查非空计数</figcaption></figure><p id="5864" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的例子中，我通过从现有的数据框架<strong class="ih hj"> df 中选择两列(MasVnrArea，SalePrice)创建了一个新的数据框架<strong class="ih hj"> df2 </strong>。</strong>新数据帧在 MasVnrArea 变量中共有 8 个 NaN 值。通过使用 KNN，所有缺失值都用 3 个最近邻居的平均距离值进行估算。</p><p id="625c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.<strong class="ih hj">用 ffill/bfil 方法替换 NaNs:</strong></p><p id="877c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个方法中，我们可以指定一个前向填充(ffill)来向前传播前一个值，或者指定一个后向填充(bfill)来向后传播该值。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es no"><img src="../Images/ce66684698dfd9a7cd93b5907a03ef36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ItpgmU-m5-alLEki2aJwAg.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">此图显示了用 ffill(左)或 bfill(右)方法替换 NaN 值。</figcaption></figure><p id="5a6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果前一个值在正向填充期间不可用，则 NaN 值保持不变，反之亦然。因此，您可以根据数据集为列选择 ffill 或 bfill 方法。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="862c" class="nb kd hi mx b fi nc nd l ne nf"># using ffill method<br/>df["GarageType"] = df["GarageType"].fillna(method='ffill')</span><span id="9c74" class="nb kd hi mx b fi nl nd l ne nf">OR</span><span id="b905" class="nb kd hi mx b fi nl nd l ne nf"># using bfill method<br/>df["GarageType"] = df["GarageType"].fillna(method='bfill')</span></pre><p id="f39f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.<strong class="ih hj">用插值法替换 NaNs:</strong></p><p id="fffa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">填充 NaN 值的另一种方法是使用插值技术，该技术可通过使用<a class="ae ju" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.interpolate.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> interpolate() </strong> </a>函数来执行。这种方法在时间序列数据中非常有用。</p><pre class="jf jg jh ji fd mw mx my mz aw na bi"><span id="7e07" class="nb kd hi mx b fi nc nd l ne nf">df["column"].interpolate(method="linear", direction = "forward", inplace=True)</span></pre></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><h1 id="2db1" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><ul class=""><li id="b9c2" class="md me hi ih b ii la im lb iq np iu nq iy nr jc mi mj mk ml bi translated">我们了解到，每个数据集都可能有缺失值，因此数据清理是每个数据科学项目的主要和最重要的部分。</li><li id="f699" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">根据数据集的不同，有不同的方法来填充缺失值。没有填充缺失值的规则。您需要试验并检查哪种方法最适合您的分析。</li><li id="9141" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated">我建议通过<a class="ae ju" href="https://app.datacamp.com/learn/courses/dealing-with-missing-data-in-python" rel="noopener ugc nofollow" target="_blank"> DataCamp </a>来详细了解本课程。</li></ul><p id="d3dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就把我们带到了本文的结尾。感谢您通读这篇文章。希望现在你能更好地理解如何处理缺失值。如果你有任何疑问，欢迎在评论区留言。</p><p id="3a26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">整篇文章中都提供了适当的参考资料。下面提到了一些更有用的文章参考和在线课程细节。</p><h1 id="c239" class="kc kd hi bd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz bi translated">参考资料:</h1><ul class=""><li id="0104" class="md me hi ih b ii la im lb iq np iu nq iy nr jc mi mj mk ml bi translated"><a class="ae ju" href="https://www.tutorialspoint.com/python_pandas/python_pandas_missing_data.htm" rel="noopener ugc nofollow" target="_blank">缺失数据</a>:熊猫</li><li id="e352" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated"><a class="ae ju" href="https://www.datacamp.com/courses/dealing-with-missing-data-in-python" rel="noopener ugc nofollow" target="_blank">Python 中缺失数据的处理</a> : Datacamp 课程</li><li id="09f8" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated"><a class="ae ju" href="https://towardsdatascience.com/missing-value-handling-missing-data-types-a89c0d81a5bb#:~:text=There%20are%20four%20types%20of,of%20multiple%20missing%20data%20types." rel="noopener" target="_blank">缺失数据类型</a>:作者<a class="ae ju" href="https://zjwarnes.medium.com" rel="noopener">扎卡里·沃恩斯</a></li><li id="913c" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated"><a class="ae ju" href="https://machinelearningmastery.com/handle-missing-data-python/" rel="noopener ugc nofollow" target="_blank">如何用 Python 处理缺失数据</a>:机器学习精通</li><li id="e084" class="md me hi ih b ii mm im mn iq mo iu mp iy mq jc mi mj mk ml bi translated"><a class="ae ju" href="https://www.analyticsvidhya.com/blog/2021/10/handling-missing-value/" rel="noopener ugc nofollow" target="_blank">处理缺失值</a>:解析 Vidhya</li></ul></div></div>    
</body>
</html>