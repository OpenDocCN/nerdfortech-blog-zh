<html>
<head>
<title>A Beginner’s Guide to Setting Up CI/CD With Github Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Github 操作设置 CI/CD 的初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/a-beginners-guide-to-setting-up-ci-cd-with-github-actions-81554e7847d0?source=collection_archive---------6-----------------------#2021-02-21">https://medium.com/nerd-for-tech/a-beginners-guide-to-setting-up-ci-cd-with-github-actions-81554e7847d0?source=collection_archive---------6-----------------------#2021-02-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/66401a3519771083cbe64309f0d3483b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZ_jv-xjX_FfJR5fQH_6UQ.png"/></div></div></figure><p id="b6de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您正在阅读本文，您或您的团队可能需要一种方法来运行自动测试，更快地构建、交付和部署项目，不用担心，这就是 Github Actions 的持续集成和持续交付(CI/CD)的用武之地。但是等等，CI/CD 是什么意思？</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="922d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">持续集成</h1><p id="68be" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">持续集成是将来自多个参与者的代码变更自动集成到单个软件项目中的实践。这是主要的 DevOps 最佳实践，允许开发人员频繁地将代码变更合并到一个中央存储库中，然后在那里运行构建和测试。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="3aaf" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">连续交付(CD)</h1><p id="a34a" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">持续交付是指您的代码总是准备好发布，但除非您决定这样做，否则不会推向生产。这是一个手动步骤。通过持续部署，应用程序的任何更新工作版本都会自动推送到生产环境中。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="bebd" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">持续部署(CD)</h1><p id="b92c" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">连续部署是一个过程，通过该过程，软件代码或架构中合格的变更一旦准备好就被部署到生产中。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="585a" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak">用于执行 CI/CD 的工具示例</strong></h1><p id="9503" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">有许多工具可以配置和执行 CI/CD 流程:</p><ul class=""><li id="013b" class="ky kz hi is b it iu ix iy jb la jf lb jj lc jn ld le lf lg bi translated"><a class="ae lh" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank">詹金斯</a></li><li id="17e7" class="ky kz hi is b it li ix lj jb lk jf ll jj lm jn ld le lf lg bi translated"><a class="ae lh" href="https://circleci.com/" rel="noopener ugc nofollow" target="_blank"> CircleCI </a></li><li id="3022" class="ky kz hi is b it li ix lj jb lk jf ll jj lm jn ld le lf lg bi translated"><a class="ae lh" href="https://www.jetbrains.com/teamcity/" rel="noopener ugc nofollow" target="_blank">团队合作</a></li><li id="5b58" class="ky kz hi is b it li ix lj jb lk jf ll jj lm jn ld le lf lg bi translated"><a class="ae lh" href="https://www.atlassian.com/software/bamboo" rel="noopener ugc nofollow" target="_blank">竹子</a></li><li id="0fc7" class="ky kz hi is b it li ix lj jb lk jf ll jj lm jn ld le lf lg bi translated"><a class="ae lh" href="https://about.gitlab.com/" rel="noopener ugc nofollow" target="_blank"> Gitlab </a></li><li id="190f" class="ky kz hi is b it li ix lj jb lk jf ll jj lm jn ld le lf lg bi translated"><a class="ae lh" href="https://codeship.com/" rel="noopener ugc nofollow" target="_blank">代码船</a></li><li id="c7ac" class="ky kz hi is b it li ix lj jb lk jf ll jj lm jn ld le lf lg bi translated"><a class="ae lh" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank">特拉维斯·CI</a></li></ul><div class="ln lo lp lq fd ab cb"><figure class="lr ij ls lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/039b87a5a70da757868aa7359834eff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*bJju_H158UbrUFZ242aoDg.png"/></div></figure><figure class="lr ij ls lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/c9634f1432ea721723eb2b6070c590a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*1g21TmVLmbxCSCuIyJVC_w.png"/></div></figure><figure class="lr ij ls lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/87cde02bcfdfac394426623301a8489d.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Mg24ZANCLWIIGeBPfMvI1A.png"/></div></figure></div><div class="ab cb"><figure class="lr ij lx lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/c67cc2ffec74d45e8270304d8158772f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*5ymydieSCLt0lO9jdbB8VQ.png"/></div></figure><figure class="lr ij lx lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/8ced4afa83f3ffe33154720e425b6e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*YQkIHbSbn4ZTUtYHXcFeEg.png"/></div></figure></div><div class="ab cb"><figure class="lr ij lx lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/bebfeca0499a575bf3fbaab4615931c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*7gQexNIhutDj_2NqkDVe7Q.png"/></div></figure><figure class="lr ij lx lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/b34408bdc139965b568747193f649516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*D6xQofqDmCFdhU2MAnnKaA.png"/></div></figure></div><p id="3af5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lh" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> Github Actions </a>是一款可以轻松实现软件工作流自动化和处理 CI/CD 流程的工具，<a class="ae lh" href="https://github.blog/2018-10-17-action-demos/" rel="noopener ugc nofollow" target="_blank">2018 年 10 月推出</a>，2019 年 8 月推出 beta 版，2019 年 11 月最终发布，Github Actions 也是付费的，虽然有免费版，但有一些限制。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="dbc0" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">在项目中使用 Github 动作的示例</h1><p id="c7ad" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">对于这个例子，我们将使用<a class="ae lh" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"> React Js (Create React App)启动项目</a>进行演示。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/b16e3a6c2cc185aaeab5bcc243d24f28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZKPG5z31d38zvqQdyb8Mkg.png"/></div></div></figure><p id="bc93" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们需要进入 GitHub 项目并访问 Actions 选项卡:</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/637fc8f6619ca226f2264695a4f78a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FNBfF0r7HnJNF-GrgQ6NCg.png"/></div></div></figure><p id="ce6c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们进入一个屏幕，允许我们在预定义的工作流或已建立的工作流之间进行选择，在我们的示例中，我们将使用已建立的工作流。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/828758d436283cfc2d3a27315d6ea6b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*06QKpxsQW8gArPUWQsEfNQ.png"/></div></div></figure><p id="4577" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意下面<code class="du mb mc md me b">.github/workflows/</code>中的<code class="du mb mc md me b">main.yml</code>文件中的工作流程，这是我们建立自己的工作流程时 Github 给我们的默认工作流程。我们可以用不同的工作流程创建不同的文件。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/83e36b5d0c965dc1fadf77a970b79602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rD2bCj5ahW--4DbafMWHjg.png"/></div></div></figure><p id="827d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们将改变文件的内容。</p><pre class="ln lo lp lq fd mg me mh mi aw mj bi"><span id="62a7" class="mk jw hi me b fi ml mm l mn mo">name: Lint </span><span id="e11c" class="mk jw hi me b fi mp mm l mn mo">on: push</span><span id="8278" class="mk jw hi me b fi mp mm l mn mo">jobs:  <br/>  run-linters:  <br/>    name: Run linters<br/>    runs-on: ${{ matrix.os }}</span><span id="3c3a" class="mk jw hi me b fi mp mm l mn mo">    strategy:<br/>      matrix:<br/>        os: [ubuntu-latest]<br/>        node: [13.x, 14.x, 15.x]</span><span id="d388" class="mk jw hi me b fi mp mm l mn mo">    steps:<br/>      - name: Check out Git repository<br/>        uses: actions/checkout@v2</span><span id="39f4" class="mk jw hi me b fi mp mm l mn mo">      - name: Setup node env 🏗 <br/>        uses: actions/setup-node@v2.1.2<br/>        with:<br/>          node-version: ${{ matrix.node }}</span><span id="f6ae" class="mk jw hi me b fi mp mm l mn mo">      - name: Install dependencies 👨🏻‍💻<br/>        run: npm ci</span><span id="f29f" class="mk jw hi me b fi mp mm l mn mo">      - name: Run linter 👀<br/>        run: npm run lint</span></pre><h1 id="8b94" class="jv jw hi bd jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks bi translated">'名称'</h1><p id="6d9b" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">这是我们工作流程的标签。</p><h1 id="2472" class="jv jw hi bd jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks bi translated">“开”</h1><p id="8057" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">Github 执行用<code class="du mb mc md me b">on</code>键定义的工作流——在我们的例子中，任何<code class="du mb mc md me b">push</code>事件。我们还可以定义一个特定的分支。例如，<code class="du mb mc md me b">master</code>分支中的<code class="du mb mc md me b">push</code>事件:</p><pre class="ln lo lp lq fd mg me mh mi aw mj bi"><span id="55b0" class="mk jw hi me b fi ml mm l mn mo">on:<br/>  push:<br/>    branches:<br/>      - master</span></pre><h1 id="ec0e" class="jv jw hi bd jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks bi translated">乔布斯的</h1><p id="fe83" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">每个工作流由一个或多个<code class="du mb mc md me b">jobs</code>组成。在我们的例子中，只有一个。</p><h1 id="3879" class="jv jw hi bd jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks bi translated">“连续运行”</h1><p id="a3d7" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">此参数包含将在其中执行代码的虚拟机的类型。在这种情况下，我们将使用<code class="du mb mc md me b">ubuntu-latest</code>(查看不同类型的可用虚拟机)。</p><h1 id="e630" class="jv jw hi bd jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks bi translated">“战略”和“矩阵”</h1><p id="ea2c" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">一个<code class="du mb mc md me b">strategy</code>创建一个<code class="du mb mc md me b">matrix</code>环境，在其中执行工作。每个<code class="du mb mc md me b">matrix</code>允许我们建立一组不同配置的虚拟环境。</p><h1 id="fe70" class="jv jw hi bd jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks bi translated">“步骤”</h1><p id="9005" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">一个<code class="du mb mc md me b">step</code>是一系列的任务。在我们看到的例子中，第一步是检查触发推送事件的存储库，以便工作流可以访问它。</p><pre class="ln lo lp lq fd mg me mh mi aw mj bi"><span id="3a69" class="mk jw hi me b fi ml mm l mn mo">- name: Check out Git repository<br/>  uses: actions/checkout@v2</span></pre><p id="7f24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在第二步中，使用 node.js 版本设置工作流以执行应用程序。</p><pre class="ln lo lp lq fd mg me mh mi aw mj bi"><span id="e14f" class="mk jw hi me b fi ml mm l mn mo">- name: Setup node env 🏗 <br/>  uses: actions/setup-node@v2.1.2<br/>  with:<br/>    node-version: ${{ matrix.node }}</span></pre><p id="ded4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第三步，工作流使用<code class="du mb mc md me b">npm ci</code>命令安装我们的应用程序所需的所有依赖项，有关该命令的更多信息，我强烈建议您查看<a class="ae lh" href="https://docs.npmjs.com/cli/v7/commands/npm-ci" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><pre class="ln lo lp lq fd mg me mh mi aw mj bi"><span id="2846" class="mk jw hi me b fi ml mm l mn mo">- name: Install dependencies 👨🏻‍💻<br/>  run: npm ci</span></pre><p id="b0b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">终于，我们到了最后一步。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/dd035dc2a0c98135489c06f1ad4bdfbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*R0kW7-TidATIZqCOCTXDqA.gif"/></div></figure><p id="6f36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在最后一步中，我们使用<a class="ae lh" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> linter </a>工具，这是一个分析我们代码的工具，可以标记编程错误、bug、风格错误，总体上有助于改进我们的代码。</p><pre class="ln lo lp lq fd mg me mh mi aw mj bi"><span id="b633" class="mk jw hi me b fi ml mm l mn mo">- name: Run linter 👀<br/>  run: npm run lint</span></pre></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="24e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每当我们将代码推送到我们的存储库时，这个工作流就会运行，当我们再次访问存储库的 Actions 选项卡时，我们可以看到工作流已经执行的次数的列表。在这种情况下，如果没有发生错误，我们将获得以下内容:</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/191014f51af1b2c77412b982d8836662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ez_IFVI0tAC7Z_PErl1m5Q.png"/></div></div></figure><p id="b3b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就这样，我们结束了。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="6b1c" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="385a" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated"><a class="ae lh" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> Github Actions </a>是创建和维护持续集成/持续交付/持续部署(CI/CD)工作流的最佳方式之一，这绝对是一个值得兴奋的特性。它通过处理许多步骤简化了开发工作流程。</p><p id="7826" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以从这里获得本文中使用的完整示例:</p><div class="mx my ez fb mz na"><a href="https://github.com/ECJ222/reactjs-github-actions-tutorial" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab dw"><div class="nc ab nd cl cj ne"><h2 class="bd hj fi z dy nf ea eb ng ed ef hh bi translated">ecj 222/react js-github-操作-教程</h2><div class="nh l"><h3 class="bd b fi z dy nf ea eb ng ed ef dx translated">Create React App 入门这个项目是用[Create React…</h3></div><div class="ni l"><p class="bd b fp z dy nf ea eb ng ed ef dx translated">github.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no io na"/></div></div></a></div></div></div>    
</body>
</html>