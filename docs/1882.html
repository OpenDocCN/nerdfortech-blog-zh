<html>
<head>
<title>useState Hook In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 React 中使用状态挂钩</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/usestate-hook-in-react-7901afd9d4e9?source=collection_archive---------10-----------------------#2021-04-11">https://medium.com/nerd-for-tech/usestate-hook-in-react-7901afd9d4e9?source=collection_archive---------10-----------------------#2021-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="90a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">react 中最重要的钩子的简化版本</p><p id="dfd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在阅读本文之前，非常重要的一点是，您应该具备 react 的基本知识，以及如何在笔记本电脑上运行 React 应用程序。如果你不知道，我会推荐你阅读<a class="ae jd" rel="noopener" href="/codechef-vit/how-to-get-started-with-react-9fbbdab60a56">我的关于 React 入门的文章</a>，这样你就有了基本的准备。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/35555060af0ca33e5fda152faf0def2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s3hNLYqWzXIypGkz.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">学习在功能组件中使用 useState。</figcaption></figure><p id="b639" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于 React 挂钩的几个事实:</p><h2 id="5205" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated"><a class="ae jd" href="https://emojipedia.org/pushpin/" rel="noopener ugc nofollow" target="_blank">📌</a> React 钩子只能用在功能组件中，因为类组件有自己的方式来做 React 钩子做的事情。</h2><h2 id="87a7" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated"><a class="ae jd" href="https://emojipedia.org/pushpin/" rel="noopener ugc nofollow" target="_blank">📌不能有条件地调用 React 钩子，例如，它们应该总是按照你希望它们被调用的顺序来放置。</a></h2><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="31b2" class="ju jv hi kq b fi ku kv l kw kx">function App()</span><span id="2fcc" class="ju jv hi kq b fi ky kv l kw kx">{</span><span id="3523" class="ju jv hi kq b fi ky kv l kw kx">if(true){</span><span id="df98" class="ju jv hi kq b fi ky kv l kw kx">useState()</span><span id="7cb8" class="ju jv hi kq b fi ky kv l kw kx">}</span></pre><p id="fde7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在上面的代码会给出一个错误，因为<em class="kz">“React Hook useState 被有条件地调用”</em>。对于每个组件渲染，必须以完全相同的顺序调用 React 挂钩。</p><p id="133b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用状态挂钩:</strong></p><p id="d788" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从 React 导入 useState 挂钩，如下所示:</p><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="5b15" class="ju jv hi kq b fi ku kv l kw kx">import {useState} from ‘react’ ;</span></pre><p id="8408" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只需在函数中调用它，并传递默认状态。useState 总是返回包含两个值的数组。数组中的第一个东西总是当前状态，第二个是允许你将当前状态更新到下一个状态的函数。</p><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="e64f" class="ju jv hi kq b fi ku kv l kw kx">const [count, setCount] = useState(initialState)</span></pre><p id="52cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">现在，在 decrementCount 中编写一个函数 setCount，如下所示:</strong></p><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="e71f" class="ju jv hi kq b fi ku kv l kw kx">function decrementCount()<br/>{<br/>setCount(prevCount =&gt; prevCount-1)<br/>}</span></pre><p id="5fe8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，prevCount 存储的是最后一个计数，我们<strong class="ih hj">没有使用 Count-1 </strong>，因为 count 存储的是默认状态，如果我们连续使用 setCount 两次，它们只会相互覆盖，不会产生任何影响。</p><p id="da0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类似地，创建一个递增函数:</p><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="67e1" class="ju jv hi kq b fi ku kv l kw kx">function incrementCount()<br/>{<br/>setCount(prevCount =&gt; prevCount+1)<br/>}</span></pre><p id="c3f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">调用 useState 钩子的两种方法:</strong></p><p id="d374" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一种方式是在开始时直接传递默认值，第二种方式是使用函数方式，这样我们的函数就不会在每次重新呈现组件时运行。如果初始状态计算非常慢，我们不希望我们的网站变慢，我们应该使用函数版本，这样它只运行一次。</p><p id="311d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">想把对象作为默认状态怎么办？</strong></p><p id="9bd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你们一定想知道，我们是否可以只更新我们想要改变的对象的一部分，而留下在使用钩子时不应该被触及的部分。答案是否定的！</p><p id="19d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在功能组件中，当使用钩子时，我们必须<strong class="ih hj">展开初始阶段</strong>和<strong class="ih hj">，然后更新我们想要改变的对象</strong>。如果您在状态中使用对象，请记住也要更新旧值，因为它们不会自动更新。我们可以这样做:</p><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="92fd" class="ju jv hi kq b fi ku kv l kw kx">function App()<br/>{<br/>const [state, setState] = useState({<strong class="kq hj">count:4 , theme: "blue"</strong>})<br/> <br/>function decrementCount()<br/>{<br/>setState(prevState =&gt;{</span><span id="cf80" class="ju jv hi kq b fi ky kv l kw kx">return{ <strong class="kq hj">…prevState</strong> , count: prevState.count-1)</span><span id="ac59" class="ju jv hi kq b fi ky kv l kw kx">})</span><span id="ccd4" class="ju jv hi kq b fi ky kv l kw kx">}</span></pre><blockquote class="la lb lc"><p id="e98c" class="if ig kz ih b ii ij ik il im in io ip ld ir is it le iv iw ix lf iz ja jb jc hb bi translated">…prevState 用于更新旧值。</p></blockquote><p id="6c60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常的做法是<strong class="ih hj">使用多个状态挂钩</strong>来处理不同的事情，这样每个部分都可以被单独处理，不会有任何问题。</p><p id="865c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以为计数和主题使用多个挂钩，如下所示:</p><pre class="jf jg jh ji fd kp kq kr ks aw kt bi"><span id="682c" class="ju jv hi kq b fi ku kv l kw kx">import React, {useState} from 'react';<br/>function App()</span><span id="b34c" class="ju jv hi kq b fi ky kv l kw kx">{</span><span id="b651" class="ju jv hi kq b fi ky kv l kw kx">const [count, setCount] = useState(4)</span><span id="0ba1" class="ju jv hi kq b fi ky kv l kw kx">const[theme, setTheme] = useState(“blue”)</span><span id="d5e2" class="ju jv hi kq b fi ky kv l kw kx">function decrementCount()<br/>{<br/>setCount(prevCount =&gt; prevCount-1)<br/>setTheme("red")</span><span id="4085" class="ju jv hi kq b fi ky kv l kw kx">}</span><span id="5366" class="ju jv hi kq b fi ky kv l kw kx">function incrementCount()<br/>{<br/>setCount(prevCount =&gt; prevCount+1)<br/>}<br/>return(<br/>&lt;button onClick={decrementCount}&gt;-&lt;/button&gt;<br/>&lt;span&gt;{count}&lt;/span&gt;<br/>&lt;span&gt;{theme}&lt;/span&gt;<br/>&lt;button onClick={incrementCount}&gt;+&lt;/button&gt;<br/>)</span><span id="dc3e" class="ju jv hi kq b fi ky kv l kw kx">}</span></pre><p id="2c73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> useState </strong>第一次看起来可能很吓人，但是一旦你明白了如何使用它，那么从字面上来说，这将是你学过的最好的东西。</p><p id="be94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您对我的博客还有任何疑问或建议，请给我发邮件至 muskanagarwal1906@gmail.com<strong class="ih hj">或在 LinkedIn<a class="ae jd" href="https://www.linkedin.com/in/muskanagarwall/" rel="noopener ugc nofollow" target="_blank">联系我<strong class="ih hj"/>联系我</a>！</strong></p></div></div>    
</body>
</html>