<html>
<head>
<title>Implementing space shooter game features - Enemy view</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现太空射击游戏功能-敌人视角</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-enemy-view-3095e0679365?source=collection_archive---------13-----------------------#2021-06-21">https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-enemy-view-3095e0679365?source=collection_archive---------13-----------------------#2021-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="cf4c" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="4c94" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">Unity 空间射击游戏新增功能快速回顾</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/4fdea425794caf68d0a5b1c703492b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*00f9RSVpP_3_3GBky2y64g.gif"/></div></div></figure><p id="9b24" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在 Unity 的太空射击游戏中实现一种让敌人检测到电源并摧毁它们的方法。</p><p id="eb41" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我用 Unity 为我的太空射击游戏中的一些敌人实现了一个智能行为。现在是时候实现一种方法，让敌人检测他们面前是否有电源，如果是这样，就试图摧毁它。</p><h1 id="c822" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">创建检测器</h1><p id="93e5" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了让敌人识别它前面的能源，让我们从拖动一个敌人预置到场景视图开始:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ln lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a7df3ac06a218024bdd34b24c7a0ffb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1448/format:webp/1*n0-j9f8e2yxYhYQmABFtgQ.png"/></div></figure><figure class="lm jl ls lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/0ea52f4bb4257b97f118d697e2a993d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*chPEbpJgExD2I7I6PlZ4Rw.png"/></div></figure></div><p id="c554" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">接下来，让我们创建一个新的空对象作为敌人的子对象，它将作为加电检测器。</p><p id="d99b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了能够检测到能量的增加，我们需要在新的空游戏物体上附加一个 2D 碰撞器和一个 2D 刚体。让我们启用碰撞器中的<strong class="ju hs"> <em class="lt"> Is Trigger </em> </strong>选项，并让我们使刚体成为运动学体类型，以避免在碰撞器中检测到某些东西时调用敌方父对象的<strong class="ju hs"> OnTriggerEnter2D </strong>方法:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl lu lo lp lq lr paragraph-image"><img src="../Images/a44e5009efb294ee110beaf37d94ba7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/1*HvKyy2Q1-ekyf7AGWcF2kQ.gif"/></figure><figure class="lm jl lv lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/59a67810171ffe847ccc790adac7ba92.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/1*q5f9Poe82FGwxcPJ9J8_bQ.gif"/></div></figure></div><p id="c316" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们修改 2D 对撞机，以匹配我们的敌人预制的前视图。这样，如果一个加电(用碰撞器)进入碰撞器，我们可以使用<strong class="ju hs"> OnTriggerEnter2D </strong>方法来检测它:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/73f0336a44359cf085b5601bc6b130e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*OiLQo2h4pvL_Jzg2zWWQTA.gif"/></div></div></figure><p id="8836" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们创建一个新的脚本来处理加电检测，并在检测发生时调用相应的操作:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl lw lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/19706d5f18c752d114b4837590e5eaad.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/1*RE8Ab9qNvWXyZc1G_mzEKQ.gif"/></div></figure><figure class="lm jl lx lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/8e292a3bb563a4d1a7ca1a410b210628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/1*5_pAF6V9jBR6KCQwqnHrxw.gif"/></div><figcaption class="ly lz et er es ma mb bd b be z dx mc di md me translated">将新脚本附加到新的空游戏对象中。</figcaption></figure></div><h1 id="0861" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">处理检测</h1><p id="c18c" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了向敌人表明已经发现加电，让我们打开<strong class="ju hs"> EnemyBehavior </strong>类并创建一个新的公共方法来调用敌人的射击方法:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mf"><img src="../Images/ff536fd1cbc45429e995e31846a61e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ly2xgSUDv64Ekn5825FYqA.gif"/></div></div></figure><p id="8dc7" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们打开新脚本并创建一个新变量来存储对附加了<strong class="ju hs"> EnemyBehavior </strong>类的父类的引用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mg"><img src="../Images/33e3c941943c59c6cdec2d2b9bdd1ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*Z7hKqHxHg6Mr02VNX9hnxQ.png"/></div></figure><p id="7945" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了初始化变量，我们将在<strong class="ju hs"> Start </strong>方法中使用<strong class="ju hs"> GetComponent </strong>方法:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mh"><img src="../Images/d60da0d347cd58ce8dc9738cdbf1a111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJCoDfsnVnBz5m6QXJTzNA.png"/></div></div></figure><p id="59f5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了识别加电何时进入敌人视野，让我们使用<strong class="ju hs"> OnTriggerEnter2D </strong>方法，该方法将比较触发该方法的碰撞器的标签，以检查它是否是加电。</p><p id="ed13" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果识别出一个带有加电标签的碰撞器，我们将使用<strong class="ju hs"> EnemyBehavior </strong>类引用调用相应的公共函数:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mi"><img src="../Images/5242aa33fb858508e985dd51f79255b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*djyjwAyFMRNfl8OF2_Nk5w.gif"/></div></div></figure><p id="624a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了确保检测到加电，让我们在加电预设中添加并选择相应的标签:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mj lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/639448871d2460c717e546ab939273cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/1*Jw4o8gju7LLLxzIshdiSuA.gif"/></div></figure><figure class="lm jl mk lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/89c5daea3ba2abc4a7d9e2f24d14cdac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/1*6cPlo1mk_C__E9Gj4E2m5Q.gif"/></div></figure></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ml"><img src="../Images/c4846af4e748466f3353599848dbcc29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*vdYcerIjj6Ng_aIEWErtxQ.png"/></div></figure><p id="99a0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，让我们打开<strong class="ju hs">射击</strong>职业，并添加相应的条件，以检测何时射击来自敌人并与异能碰撞以摧毁他们两个:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mm"><img src="../Images/8731f5421bcdbbdc3e5784258079a230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xclReS6OjeVyrJ1p7hCHjA.gif"/></div></div></figure><p id="2098" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们尝试在场景中生成几个电源，我们将能够看到敌人在发现前方有电源时开枪摧毁它:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/bd7e8996033b3d49c1b50132788583d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*D2WNIW1RVkmnBEcc0414oQ.gif"/></div></div></figure><h1 id="ab76" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">用视力繁殖敌人</h1><p id="2c62" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了产生能探测到能量的敌人，让我们把空的游戏对象变成一个预置:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mn"><img src="../Images/776d3141bccfc9dba06a7ef509e61108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/1*rMvdg7xodZR16xDjYcIoLA.gif"/></div></figure><p id="3e70" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们打开 spawn manager 脚本并添加 2 个新变量:</p><ul class=""><li id="7a96" class="mo mp hi ju b jv jw jy jz kb mq kf mr kj ms kn mt mu mv mw bi translated">敌人的观点</li></ul><p id="cb31" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储一个新的预置的参考，检测电源。</p><ul class=""><li id="9131" class="mo mp hi ju b jv jw jy jz kb mq kf mr kj ms kn mt mu mv mw bi translated">查看概率</li></ul><p id="2a8e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储敌人能够探测到电源开启的概率。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mx"><img src="../Images/488f4735590a6fecdf17c1dbd0039492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*MeZtDzufStcd3u9BU4O8-Q.png"/></div></figure><p id="49a2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，由于<strong class="ju hs">【serialize field】</strong>，我们可以通过检查器修改变量来选择概率并拖动各自的预置:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es my"><img src="../Images/08c1be7509e56f425ef7b66896e44e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/1*0HoURxXzYPGtkHWoCRLHTQ.gif"/></div></div></figure><p id="06e0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了产生一个有“视觉”的新敌人，让我们比较概率值和<strong class="ju hs"> Random.value </strong>来实例化预设，该预设检测到作为每个产生的新敌人的孩子的通电:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mz"><img src="../Images/52769f5774191d4d0ca18de72c78587f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cmik5mY-3xHfYwgBMLlB7w.png"/></div></div></figure><p id="4852" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们在 Unity 中运行游戏，我们将能够看到一些敌人检测到电源并射击他们:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/397dc5d535bf5aa6be748733d49dec6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0DRL2Hv4-Y-bSsRaJXdl-Q.gif"/></div></div></figure><p id="f307" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们实现了一个检测电源的敌人！:d .我会在下一篇文章中看到你，在那里我会展示更多添加到我的 Unity 太空射击游戏中的功能。</p></div><div class="ab cl na nb gp nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="hb hc hd he hf"><blockquote class="nh ni nj"><p id="17b4" class="js jt lt ju b jv jw is jx jy jz iv ka nk kc kd ke nl kg kh ki nm kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>