<html>
<head>
<title>Using the optional chaining operator in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 JavaScript 中使用可选的链接操作符</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/using-the-optional-chaining-operator-in-javascript-aa56d19acef7?source=collection_archive---------9-----------------------#2021-03-18">https://medium.com/nerd-for-tech/using-the-optional-chaining-operator-in-javascript-aa56d19acef7?source=collection_archive---------9-----------------------#2021-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dfb09ecc9be8e669db6040633fa8c195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IDHMTVrDLCTuKVY9.jpg"/></div></div></figure><p id="19e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有时，您会遇到一个极大地改变您编写方式的 JavaScript 特性。对我来说，析构、箭头函数、模块是其中的一些特征。可选链接将是我的下一个目标。</p><p id="c82f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可选链接在 ES2020 提案的第 4 阶段，因此应添加到规范中。它改变了访问对象内部属性的方式，尤其是深度嵌套的属性。它也是 TypeScript 3.7+中的一项功能。</p><h1 id="22b8" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">挑战</h1><p id="22ab" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我很确定你在 JavaScript 中遇到过空的和未定义的属性。这种语言的动态本质使得我们不可能不碰到它们。特别是在处理嵌套对象时，下面这段代码很常见:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="6047" class="la jp hi kw b fi lb lc l ld le">if (data &amp;&amp; data.children &amp;&amp; data.children[0] &amp;&amp; data.children[0].name) {<br/>    // I have a name!<br/>}</span></pre><p id="51a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面这段代码是针对 API 响应的，我必须解析 JSON 以确保名称存在。但是，当对象具有可选属性或者有一些配置对象具有一些动态映射的值时，也会遇到类似的情况。</p><p id="80fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然这使语言变得灵活，但它增加了开发人员的头痛，并且需要检查许多边界条件。这是每个人都想避免的样板代码。</p><h1 id="072c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">可选的链接运算符</h1><p id="cb26" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">可选的链接操作符使开发人员的工作变得更加容易。它为我们检查嵌套的属性，而不必显式地向下搜索。</p><p id="7655" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你所要做的就是用“？”运算符放在要检查是否有空值的属性之后。你可以在一个表达式中任意多次使用这个操作符，如果任何一项未定义，它会提前返回。</p><p id="f390" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于静态属性，用法如下:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="e28b" class="la jp hi kw b fi lb lc l ld le">object?.property</span></pre><p id="3534" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于动态属性，它更改为:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="63ac" class="la jp hi kw b fi lb lc l ld le">object?.[expression]</span></pre><p id="0151" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面这段代码可以简化为:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="b006" class="la jp hi kw b fi lb lc l ld le">let name = data?.children?.[0]?.name;</span></pre><p id="ee5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们有:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="9145" class="la jp hi kw b fi lb lc l ld le">let data;<br/>console.log(data?.children?.[0]?.name) // undefined<br/><br/>data  = {children: [{name:'Saransh Kataria'}]}<br/>console.log(data?.children?.[0]?.name) // Saransh Kataria</span></pre><p id="e83c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就变得这么简单！</p><p id="8655" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为操作符一有空值就短路，所以它也可以用来有条件地调用方法或应用条件逻辑。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="d776" class="la jp hi kw b fi lb lc l ld le">const conditionalProperty;<br/>let index = 0;<br/><br/>console.log(conditionalProperty?.[index++)]; // undefined<br/>console.log(index);  // 0</span></pre><p id="8cb3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">方法也是如此:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="5961" class="la jp hi kw b fi lb lc l ld le">object.runsOnlyIfMethodExists?.()</span></pre><h1 id="4979" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">与无效合并一起使用</h1><p id="e9ea" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated"><a class="ae lf" href="https://github.com/tc39/proposal-nullish-coalescing" rel="noopener ugc nofollow" target="_blank"> nullish 合并</a>提议提供了一种处理未定义或空值的方法，并为表达式提供默认值。“你会用吗？?"运算符为表达式提供默认值。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="a3c7" class="la jp hi kw b fi lb lc l ld le">console.log(undefined ?? 'Wisdom Geek'); // Wisdom Geek</span></pre><p id="3fa8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，如果该属性不存在，可以将 nullish 合并运算符与可选的链接运算符结合使用来提供默认值。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="6596" class="la jp hi kw b fi lb lc l ld le">let name = data?.children?.[0]?.name ?? 'magic!'; </span><span id="8dba" class="la jp hi kw b fi lg lc l ld le">console.log(name); // magic!</span></pre><p id="150f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就是这样，伙计们！可选的链接操作符允许轻松访问嵌套属性，而无需编写大量样板代码。需要注意的是，IE 中不支持。所以，如果你需要支持那个或者更老版本的浏览器，你可能想要添加一个<a class="ae lf" href="https://babeljs.io/docs/en/babel-plugin-syntax-optional-chaining" rel="noopener ugc nofollow" target="_blank"> Babel 插件</a>。对于 Node.js，您需要升级到 Node 14 LTS 版本，因为它在 12.x 中不受支持</p><p id="9dbb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你有任何问题，欢迎在下面留言。</p></div><div class="ab cl lh li gp lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hb hc hd he hf"><p id="5a47" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lo">原载于 2021 年 3 月 18 日</em><a class="ae lf" href="https://www.wisdomgeek.com/development/web-development/javascript/using-the-optional-chaining-operator-in-javascript/" rel="noopener ugc nofollow" target="_blank"><em class="lo">【https://www.wisdomgeek.com】</em></a><em class="lo">。</em></p></div></div>    
</body>
</html>