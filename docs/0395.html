<html>
<head>
<title>Remove SharedPreference with DataStore- 4 steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用数据存储删除 SharedPreference 个步骤</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/remove-sharedpreference-with-datastore-4-steps-dc1c4f90a19b?source=collection_archive---------2-----------------------#2020-11-22">https://medium.com/nerd-for-tech/remove-sharedpreference-with-datastore-4-steps-dc1c4f90a19b?source=collection_archive---------2-----------------------#2020-11-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0737191c04757eb72b20ea47bf7b74fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZHVldzfc4Rd0KWfTbeQ-g.png"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="a718" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">在你的应用模块的<strong class="ak"> build.gradle </strong>文件中添加依赖关系</h1><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jv"><img src="../Images/ddbd3614460993d1636025099fcbe2e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZC15nwDal2fZY3VwmjchQ.png"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="256c" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">创建数据存储</h1><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/af34114870f5d64b9d51e22e3c59cb96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PSLXOJodJLc-9VSVvSn5uQ.png"/></div></div></figure><p id="2c7e" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">在这里，如果您想迁移已经存在于您的应用程序中的<strong class="kd hj">共享参考</strong>，请将其作为列表传递给<strong class="kd hj">迁移</strong>👆争吵</p></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="fa78" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">从数据存储中提取数据</h1><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/6b3af54a816e0001624f8fd931eadbec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2JvrDUVmaG-7YRydrGKckw.png"/></div></div></figure><p id="dc0a" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">在从数据存储中读取时，可能会有一个<strong class="kd hj">异常</strong>，它可以是<strong class="kd hj"> IOException </strong>或其他任何东西，因此我们在流的顶部添加了<strong class="kd hj"> catch </strong>来正确处理这种情况</p><blockquote class="la lb lc"><p id="e340" class="kb kc ld kd b ke kf kg kh ki kj kk kl le kn ko kp lf kr ks kt lg kv kw kx ky hb bi translated"><em class="hi">数据存储返回流程</em></p></blockquote></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="61e3" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">将数据插入数据存储</h1><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/b6b866bc3f54dacf043d1e5624510b9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TWhSHyRoHUH9w1OveUPxAg.png"/></div></div></figure><p id="18c0" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated"><strong class="kd hj"> DataStore 是异步 API，构建在 Kotlin 协程和流</strong>之上，因此我们在函数中添加了<strong class="kd hj"> suspend </strong>关键字</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/f1cf308e5d6ebf071e25aadc19c3d063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KwJe-4-WAolEaEs1RYNCkQ.png"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h2 id="2382" class="lj iy hi bd iz lk ll lm jd ln lo lp jh km lq lr jl kq ls lt jp ku lu lv jt lw bi translated">参考</h2><ul class=""><li id="cdf0" class="lx ly hi kd b ke lz ki ma km mb kq mc ku md ky me mf mg mh bi translated"><a class="ae mi" href="https://developer.android.com/topic/libraries/architecture/datastore" rel="noopener ugc nofollow" target="_blank">https://developer . Android . com/topic/libraries/architecture/datastore</a></li><li id="c61f" class="lx ly hi kd b ke mj ki mk km ml kq mm ku mn ky me mf mg mh bi translated"><strong class="kd hj">全码样本【https://github.com/navczydev/datastore】:<a class="ae mi" href="https://github.com/navczydev/datastore" rel="noopener ugc nofollow" target="_blank"/></strong></li><li id="dc82" class="lx ly hi kd b ke mj ki mk km ml kq mm ku mn ky me mf mg mh bi translated"><a class="ae mi" href="https://developer.android.com/kotlin/flow" rel="noopener ugc nofollow" target="_blank">https://developer.android.com/kotlin/flow</a></li></ul></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="da5b" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">👏👏👏👏快乐编码👏👏👏👏</h1><h1 id="eaaa" class="ix iy hi bd iz ja mo jc jd je mp jg jh ji mq jk jl jm mr jo jp jq ms js jt ju bi translated">保持联系</h1><ul class=""><li id="c075" class="lx ly hi kd b ke lz ki ma km mb kq mc ku md ky me mf mg mh bi translated"><a class="ae mi" href="https://www.linkedin.com/in/navczydev/" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="2f6d" class="lx ly hi kd b ke mj ki mk km ml kq mm ku mn ky me mf mg mh bi translated"><a class="ae mi" href="https://twitter.com/navczydev" rel="noopener ugc nofollow" target="_blank">推特</a></li></ul></div></div>    
</body>
</html>