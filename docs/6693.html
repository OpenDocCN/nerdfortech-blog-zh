<html>
<head>
<title>AWS Certified Solution Architect — RDS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS认证解决方案架构师— RDS</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/aws-certified-solution-architect-rds-1c80bfc6b387?source=collection_archive---------1-----------------------#2022-04-21">https://medium.com/nerd-for-tech/aws-certified-solution-architect-rds-1c80bfc6b387?source=collection_archive---------1-----------------------#2022-04-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1694" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好，在本教程中，我们将讨论关系数据库服务。该服务允许用户在云中创建AWS托管关系数据库(SQL)。以下是我们可以使用RDS创建的数据库，</p><ul class=""><li id="da11" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">Postgres</li><li id="d1c5" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">关系型数据库</li><li id="1c29" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">MariaDB</li><li id="eda7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">神谕</li><li id="f954" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Microsoft SQL Server</li><li id="015d" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">奥罗拉</li></ul><p id="e8fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您可能会想，如果您已经阅读了下面的教程，</p><div class="jr js ez fb jt ju"><a href="https://billa-code.medium.com/aws-certified-solution-architect-ec2-ami-4540126117bb" rel="noopener follow" target="_blank"><div class="jv ab dw"><div class="jw ab jx cl cj jy"><h2 class="bd hj fi z dy jz ea eb ka ed ef hh bi translated">AWS认证解决方案架构师— EC2和AMI</h2><div class="kb l"><h3 class="bd b fi z dy jz ea eb ka ed ef dx translated">大家好，在本教程中，我们将关注最受欢迎的AWS服务之一，EC2(弹性计算云)。在…</h3></div><div class="kc l"><p class="bd b fp z dy jz ea eb ka ed ef dx translated">billa-code.medium.com</p></div></div><div class="kd l"><div class="ke l kf kg kh kd ki kj ju"/></div></div></a></div><p id="760e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们不需要一些关系数据库来创建数据库。相反，我们可以手动将数据库安装到EC2中并进行管理。但是使用RDS有很多好处。由于RDS是一种受管理的服务，</p><ul class=""><li id="2de4" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">自动配置、操作系统补丁</li><li id="738f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">连续备份和恢复到特定时间戳</li><li id="f5cc" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">监控仪表板</li><li id="6e31" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">读取副本以提高读取性能</li><li id="ba57" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">用于灾难恢复(DR)的多可用区域(AZ)设置</li><li id="dbf9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">升级的维护窗口</li><li id="fe35" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">扩展能力</li><li id="8055" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">EBS存储备份(gp2或io1)</li></ul><p id="cd60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个主要的缺点是我们不能SSH到DB实例。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es kk"><img src="../Images/868ef7f6796ae736b5610d4c3df44fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*LnHxEQf8e3kwFeeUj_BFyQ.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">正常RDS实例</figcaption></figure><p id="89e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们来谈谈RDS备份。RDS中启用了自动备份。这是数据库的每日完整备份。事务日志每5分钟备份一次。通常有一个7天的保留期，可以延长到35天。这些备份存储为自动创建的快照。但是我们也可以手动触发快照。这些手动快照和自动快照的区别在于，当删除数据库实例时，自动快照也会被删除，但手动创建的快照会保留。</p><p id="87f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">RDS的另一个很酷的特性是它具有存储自动扩展功能。在本教程的开始，我告诉你存储是在EBS之上完成的。EBS具有自动缩放功能，因此RDS也具备这种功能。我们仍然可以设置一个最大存储阈值。如果工作负载不可预测，这种方法非常有用。</p></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><p id="17b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们在应用程序中使用关系数据库时，总是会有性能问题。主要是因为有太多的读写请求来到数据库。AWS RDS有一个很酷的功能，称为RDS读取副本，它提高了读取可伸缩性并避免了性能问题。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/ffcd4b0b044bb0cf513e625ef88f06df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O0X2lC2I2ag34QAN2devZA.png"/></div></div></figure><p id="68bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">复制是异步的，这使得读取一致。甚至这些副本也可以更新到它们自己的数据库中。要使用读取副本，主应用程序必须更新连接字符串。示例用例是在生产应用程序之上运行报告应用程序。如果这些副本停留在同一个AZ，那么创建读取副本没有成本，但是如果跨区域，那么我们必须付费。以下屏幕显示了我们如何启用读取副本。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lh"><img src="../Images/0dc270713909bced92a3ff69c4795d24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GtoRpHklnpveDRizxHtT5w.png"/></div></div></figure><p id="0e21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经看到读取副本为我们的数据库增加了可扩展性，现在让我们看看RDS如何增加高可用性。为此，我们有一个名为RDS multi AZ的功能。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es li"><img src="../Images/11ebbc26be06a84003a317d944c04722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*Oz5HTUYY4rspyjLc-kQg_g.png"/></div></figure><p id="7d47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与读取复制副本不同，这是一个同步复制，此复制副本不用于扩展。当主数据库自动出现故障时，它会重定向到袖手旁观实例。现在，您可能会问，我们是否可以使用读取副本来实现高可用性。如果我们使用跨区域读取副本设置(这需要成本)，我们可以将其用于灾难恢复。我们可以从单个AZ升级到多个AZ，而不会停机。过程真的很简单。他们拍摄RDS DB实例的快照，然后将其恢复为另一个实例。然后它创建一个链接来建立同步。以下是我们使用多AZ必须启用的设置。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lj"><img src="../Images/3368c2ac91de231a24c5de531b7fd221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*quFWlSu-lZRta6hxOugcEQ.png"/></div></div></figure><p id="7ecd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们需要增加数据库的安全性时，RDS非常有用。在此过程中，主要有两种方式添加加密。</p><ul class=""><li id="f9cd" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">静态加密—使用AWS KMS-AES-256加密，我们可以加密主数据库并读取副本。对于Oracle和SQL server，我们可以使用透明数据加密。</li><li id="5f07" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">动态加密— SSL证书可用于加密传输到RDS的数据。这在连接到数据库时为SSL选项提供了信任证书。PostgreSQL:rds . force _ SSL = 1，MySQL: GRANT USAGE ON *。*要“MySQL user”@“%”需要SSL。</li></ul><p id="ffe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要加密未加密的RDS实例，我们必须首先创建该实例的快照，然后拷贝快照，对于拷贝，我们必须启用加密。然后我们可以恢复这个加密的拷贝并删除旧的实例。</p><p id="7f2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于RDS数据库实例通常部署在私有子网内，这保证了数据库的网络安全。安全组也可以用来确保网络安全。</p><p id="06c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用IAM策略可以管理RDS用户的权限，这在控制访问管理时非常方便。虽然可以使用传统的用户名和密码登录数据库，但是我们也可以使用基于IAM的身份验证。但这只适用于MySQL和PostgresSQL。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es lk"><img src="../Images/5ba9b14ddc9824c9b3954e7f6496ad1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*CXYj_JFEXznG2N9JoBdTgw.png"/></div></figure><p id="2bcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在IAM认证中，我们不需要密码。这里可以使用通过IAM和RDS API调用获得的身份验证令牌。这些身份验证令牌生命周期为15分钟。这样做的好处是，</p><ul class=""><li id="4990" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">网络输入/输出必须使用SSL加密</li><li id="5e32" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">IAM代替DB集中管理用户</li><li id="0957" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">可以利用IAM角色和EC2实例配置文件轻松集成</li></ul><p id="34b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">摘要:使用RDS时，请检查数据库安全组中的端口/IP/安全组入站规则，并尝试通过IAM管理数据库用户权限。使用参数组尝试允许SSL连接。</p></div></div>    
</body>
</html>