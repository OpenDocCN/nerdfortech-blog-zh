<html>
<head>
<title>Ansible-Ad-hoc | Modules | Host patterns</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可变-专用|模块|主机模式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/ansible-ad-hoc-modules-host-patterns-52c156405145?source=collection_archive---------9-----------------------#2021-06-04">https://medium.com/nerd-for-tech/ansible-ad-hoc-modules-host-patterns-52c156405145?source=collection_archive---------9-----------------------#2021-06-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a7836056f4eb311fbe5a72cbf63b97b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihC0RSBZxRnfsYOCdkgsbw.png"/></div></div></figure><p id="f3cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">先决条件:</p><div class="jo jp ez fb jq jr"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/establish-a-connection-between-ansible-server-and-two-node-using-ssh-ssh-keygen-91ffee1ff7c4"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">使用 SSH &amp; ssh-keygen 在 Ansible server 和双节点服务器之间建立连接</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">Ansible 是一个开源的自动化引擎，它可以自动化软件供应、配置管理和…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">medium.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf io jr"/></div></div></a></div><p id="bcf8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">节点 2[172–21–32–33]节点 1[172–31–42–50]服务器[172.31.38.62]</p><h1 id="41e7" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">主机模式= &gt;</h1><p id="3027" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">这里，我们检查以任何模式连接到服务器的节点数量。</p><p id="5c3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">命令:</p><p id="1f2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble all-lists-hosts<br/>ansi ble-lists-hosts<br/>ansi ble[0]—lists-hosts</p><p id="7d7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其中<br/>【0】表示第一个节点<br/>【1】表示第二个节点<br/> [-1]表示最后一个节点<br/>[-2】<br/>表示倒数第二个节点<br/> 1:4】表示第二个节点到第五个节点</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/424063420d6de3f97bf91a14fff2970b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*ShlOThttn5BOqcx2.png"/></div></figure><h1 id="079a" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">临时|模块| ansi ble 形式的行动手册</h1><p id="af49" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">专用命令就是简单的 Linux 命令。由于没有幂等性，它一次又一次地执行文件。在这里，幂等性意味着无论是否已经执行，每次都执行，即不覆盖文件。<br/>模块是指由单个命令完成的单个工作，而执行模块的集合被称为剧本。</p><p id="553a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Ad-hoc: </strong> <br/>可以单独运行，执行快捷功能。<br/>这些特别命令不用于配置管理和部署，因为命令是一次性使用的。<br/>ansi ble 专用命令使用/usr/bin/ansible 命令行工具来自动执行单个任务。</p><p id="f24c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">命令:</p><p id="3069" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble developers-a " sudo yum install httpd-y "</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/e1a9d9ef28a774c9896a82a403a8df3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*jHZ_fn62MuY9wBYu.png"/></div></figure><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/c0fdb766a7196f861d9fdb84b7d387d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*7JjvAEpGaTrDIyJb.png"/></div></figure><p id="6d3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble developers-a " sudo yum remove httpd-y "<br/>或<br/>ansi ble developers-ba " yum remove httpd-y "</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/a445dbd3943b74c822d4f49330c79af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*4C1-OJEpnLXLfGZ3.png"/></div></figure><h1 id="c681" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">可转换模块:</h1><p id="c693" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">Ansible 附带了几个模块(称为“模块库”)，可以直接在远程主机上执行，也可以通过“剧本”执行。此外，模块库可以驻留在任何机器上，不需要服务器、守护程序或数据库。<br/> Ansible 模块存储在一个库存文件中，默认位置是/etc/ansible/hosts <br/>幂等性可以由模块实现。</p><p id="e9a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">可转换模块的命令:</strong></p><p id="5c6c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble-b-m yum-a " pkg = httpd state = present "<br/>//卸载状态=缺席，更新状态=最新，启动服务状态=已启动</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/6dac58c93920ce694ad6805b0d6c60be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*TFrYDomENXKtpeLq.png"/></div></figure><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/36506a5d1b38669d7b7dbb70492aae69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*teinyGQn_kcVEhjk.png"/></div></div></figure><p id="b26d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果再次运行该命令:</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/57bb2ce71661f60716e449c445e4bcb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*wt4-CZyb4caTpd_2.png"/></div></figure><p id="e0fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble developers-b-m user-a " name = kush "<br/>//创建一个名为 Kush 的用户</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/23c6478f293d9cd4c19da0c594dbbe9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*9EkwNUuNt6zR3QYb.png"/></div></figure><p id="001c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble-b-m user-a " name = Kush state = absent "<br/>//删除用户</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/4dd77d78afde000c417e7669d821bb4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*kS1pFzNosLerbYFH.png"/></div></div></figure><p id="de22" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble-b-m copy-a " src = file . txt dest =/tmp "<br/>//将文件从服务器复制到组中的节点</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/0133a007826c44ca3eabbd18d9423dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*rXLsfIwGCFrNqvaN.png"/></div></figure><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/dce30ad11e9b85b8dc565539a3ffc8bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*jaDXbwprptQcKmUj.png"/></div></figure><p id="7c2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以通过模块即设置模块来实现</p><p id="740b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble developers-m setup<br/>//检查节点的所有当前配置</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/d0a95e56fb1163630b3c0f4517af78bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*bdd7GmkSF0etYDXi.png"/></div></figure><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/b6238420f4bb106732ff8d55e5849a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*dAF9u0qW0e6hasJa.png"/></div></figure><p id="f55b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ansi ble developers-m setup-a " filter =<em class="lo">ipv4</em>"//检查与 IP v4 相关的配置</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/4c78bf16040ebacfc5921ea5b0971c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*YqC40ndsknBbKmTK.png"/></div></figure></div></div>    
</body>
</html>