# react Native Clean Architecture—ResoCoder 的方式

> 原文：<https://medium.com/nerd-for-tech/react-native-clean-architecture-resocoders-way-589c6e3d3fc2?source=collection_archive---------0----------------------->

![](img/3b79c23b8e73263638c4134c627c4ceb.png)

照片由[内森·考利](https://www.pexels.com/@mastercowley?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)从[派克斯](https://www.pexels.com/photo/man-in-gray-shirt-cleaning-clear-glass-wall-near-sofa-713297/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)拍摄

当我第一次接触到 clean architecture 时，我真的很难理解它的概念，但更难理解它的实现。《泰晤士报》的大部分教程和文章都集中在这两件事情中的一件上，对我来说很难正确地将它们联系起来。此外，即使概念远比它们的实现更重要，你所熟悉的技术中的具体例子也会产生不可估量的差异。

这就是[**ResoCoder**](https://resocoder.com/)**和他们的 [**YT 频道**](https://www.youtube.com/c/ResoCoder) 跳进去的地方。他们用 Flutter ( Dart)中的具体实现提供了最全面的干净架构解释。对我来说，这是一个游戏改变者，如果你对移动开发感兴趣，尤其是对 Flutter 感兴趣，这可能对你也一样。**

**我爱扑♥️！我确实是这样做的，但是实际上我也在 React Native 中做了相当多的开发工作，所以，很自然地，我决定在 React Native 中使用上述实现。**

# **文件夹结构**

**我们决定使用一个 ***垂直*** 文件夹结构，其中每个特征(组件、模块)都有自己的文件夹。**

**通过这种方式，我们获得了更好的特征隔离。从长远来看，这带来了更好的代码重用性，每个特性都可以是它自己的 ***npm*** 模块。为什么这很重要？这可能是一个独立的话题，但是简单地说，好的软件是可扩展的、可维护的、可靠的和可重用的(部分或整体)。将软件开发成独立的模块会导致上面提到的所有问题。**

**垂直文件夹结构可能会变得令人不知所措！请注意这一点，它不是银弹，因为在软件工程中，文件夹结构的选择是视情况而定的。如果你是一个单独的开发者，或者你的项目有相当少的功能，那么 [*水平结构*](https://resocoder.com/2020/03/09/flutter-firebase-ddd-course-1-domain-driven-design-principles/#t-1647371847444) 更有意义，因为你不会淹没在一堆完全不必要的文件夹和文件中。**

# **react-native CLI 项目的剖析**

**根级别的文件夹有:**

*   *****安卓*** —这个文件夹是一个真正的原生安卓应用。与编写原生 android 代码或配置 android 资产(包名、图标等)相关的一切。)会发生在这里。**
*   **- ***ios*** —这个文件夹是一个真正的原生 ios app。与编写原生 ios 代码或配置 ios 资产(包名、图标等)相关的一切。)会发生在这里。**
*   **- ***app*** —这是一个真实的 React 原生 app。这是所有文件夹中最重要的文件夹，也是魔法发生的地方。**
*   **- ***资产*** —所有资产，如图像或字体都放在这个文件夹中。**
*   **- ***文档*** —文档在这里。文档应该是代码的一部分，所以它很容易被版本化，并且任何人都可以访问存储库。文档是代码的一部分。**

# **干净的应用架构**

**app 应该遵循 ***清洁架构*** ，以及 *TDD* 和 *DDD* 的概念。甚至文件夹结构也更加符合 TDD，像域验证这样的 DDD 概念将为应用程序本身带来巨大的好处。**

**这在实践中意味着什么？强烈建议读者熟悉以下内容:**

*   **[鲍勃叔叔——清洁建筑](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)**
*   **[共振编码器— DDD 图](https://resocoder.com/2020/03/09/flutter-firebase-ddd-course-1-domain-driven-design-principles)**

**所以 ***app*** 文件夹实际上分为两个文件夹:**

1.  *****核心*** —该文件夹本质上也是一个特征(模块)，因此其结构类似于其他特征的结构。它包含其他特性之间共享的元素，如类型定义、具体的数据源适配器、错误处理机制等。**
2.  ****特征** —每个特征通常被分为以下几层(文件夹):**

*   *****数据*** —这是数据层，本质上负责实现域层内部定义的接口。通常，它包含 ***数据源*** ，实际上只是不同的 API 访问服务实现。数据源可以是 ***本地*** ，比如 SQLite DB，或者是 ***远程*** 比如 Firebase 或者其他一些第三方 API。这一层还包含具体的 ***模型*** ，用于不同的数据源内部。**
*   *****域*** —这是域层。这一层不知道具体的实现，它提供了应该跨其他层使用的接口，并且通常在数据层内部实现。它有一个给定特征所需的 ***实体*** 的定义。此外，它应该提供 ***库*** 接口，可以编程。这一层包含的最重要的东西是 ***用例*** 。它们由表示层使用，代表存储库使用的最基本单位。**
*   ****展示** —该层负责定义 JSX 的 ***屏幕*** 和特征特有的 ***widgets*** 。如果小部件要跨特性使用，它们应该被提升到核心文件夹。如果屏幕或小部件的逻辑过于复杂，应将其移至 ***挂钩*** 之一。此外，如果钩子开始变得杂乱，应该选择合适的设计模式，并放入它们自己的*文件夹中。***

# ***数据如何在各层之间流动***

***让我们看看数据是如何在 Onboarding 屏幕示例的各个层中流动的。您希望只显示一次 onboarding 屏幕，并且希望将该信息保存在某个地方。它不能存储在临时存储中，如 localStorage，而是存储在一些永久数据存储中，如 SQLite。为了简单起见，我们只显示应该存储在 DB 中的布尔变量*。因此，我们的域层应该包含一个具有该属性的 onboarding 实体，然后是一个存储库接口，它公开了一个保存该实体的方法和使用该存储库接口的用例，一旦存储库的具体对象被传递，它就调用它来存储该实体。领域层不应该依赖于任何其他层，因此我们通常首先定义它。一旦我们有了领域层，我们就可以创建我们的 SQLite 模型，它是我们的领域实体数据源和数据层内的具体存储库实现的具体实现。具体的知识库使用一个数据源接口来与数据源交互，调用引用 ORM 模型的数据源。而且，当我们拥有了一切，我们可以以某种方式将它注入到我们的表示层。因为这是一个非常简单的例子，你可以在 *useEffect* 钩子中创建用例，并创建和传递具体的对象。这就是它，你有一个完美的分层功能，可以非常容易地测试。****

# ****写够了，给我看看代码****

****代码会在 [***的子框架库***](https://github.com/mikevastech/subracker-app) 里面。这是“严肃:开源启动”中的第二篇文章，第三篇文章将向您展示这里所写概念的具体实现，所以请耐心等待，或者启动存储库，因为代码将首先出现在那里。****

# ****开源创业系列****

****查看该系列的下一篇文章: [React Native —创建 on boarding screen—Subracker App](https://mikevastech.medium.com/react-native-create-onboarding-screen-subracker-app-c8f6b58b5a68)
查看上一篇文章:[开源创业:第 1 部分—理念](/@mikevastech/open-source-startup-part-1-the-idea-579457249f0f)。****

# ****文学****

****因为我不能强调足够多，这个架构是高度受 [ResoCoder 的](https://resocoder.com/)在颤振干净的架构启发。****

# ****支持****

****如果你有一些额外的缓存，你想支持我，你可以使用这些链接:
1。后卫线上的☕️:[https://buy.stripe.com/4gw16bgzM6Bw1I44gh](https://buy.stripe.com/4gw16bgzM6Bw1I44gh)2。📱💻档位:【https://buy.stripe.com/5kAcOTdnA8JEcmI7su ****