<html>
<head>
<title>Prototype Design Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">原型设计模式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/prototype-design-pattern-ed85ac4cc575?source=collection_archive---------1-----------------------#2022-06-23">https://medium.com/nerd-for-tech/prototype-design-pattern-ed85ac4cc575?source=collection_archive---------1-----------------------#2022-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b8d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">原型设计模式是创造性设计模式之一。当创建对象是一件昂贵的事情，需要大量的时间和资源，并且你已经有一个类似的对象时，使用原型设计模式。它<strong class="ih hj"> </strong>提供了一种机制，将原来的对象复制到一个新的对象中，然后根据我们的需要进行修改。</p><p id="6d01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种模式鼓励我们克隆对象，而不是创建新对象。也就是说，一旦你完成了对象的注册，它就避免了<strong class="ih hj">【新关键字】</strong>。</p><p id="47ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本上我们可以这样说，在这种情况下，你可以从原型模式中获益。</p><ol class=""><li id="dc59" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">如果对象创建过程开销很大</strong></li><li id="cc96" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">如果创建对象时有很多事情要做</strong></li></ol><p id="93dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您将学习我们如何实现原型设计模式以及原型模式中的示例。</p><h2 id="d9e8" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">原型模式的背景:</h2><p id="3b1c" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc hb bi translated">在 java 中，当你实现原型模式时，你必须使用“<strong class="ih hj"> Cloneable 接口</strong>”。</p><p id="077e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你想在你希望得到克隆的类中实现可克隆的接口。然后，您需要在类中覆盖 clone()方法。但是一定要记住它总是返回对象类型。</p><p id="6d59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很可能在现实世界的应用中，你可能不得不使用你自己的克隆方法。</p><p id="a9be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更进一步，当你使用克隆方法时，首先根据你的程序考虑你需要什么。请务必选择您想要“浅层拷贝”还是“深层拷贝”。</p><p id="b8b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们克隆东西的时候。根据我们如何实现克隆方法，它可能给出“浅层拷贝”或“深层拷贝”。</p><blockquote class="kr ks kt"><p id="e1c2" class="if ig ku ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated"><strong class="ih hj">浅复制</strong> - &gt;只是将第一级对象中的<em class="hi">复制并引用</em>到新对象中</p><p id="78ca" class="if ig ku ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated"><strong class="ih hj">深度复制</strong> - &gt;你进去<em class="hi">你把每一个对象和值</em>复制/克隆到新对象里。</p></blockquote><p id="d65f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">浅层拷贝非常危险，因为有时当你修改克隆的对象时，也可能影响到你的原始对象。</p><h2 id="b370" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><strong class="ak">原型样板演示:</strong></h2><p id="6057" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc hb bi translated">在这里，我将从员工那里获得范例。假设我们有两种类型的员工“永久员工”和“合同员工”。</p><p id="1119" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您有了一个与 Employee 相关的系统，您可能需要从这两个雇员创建对象。让我们假设雇员对象创建过程更昂贵。</p><p id="6385" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果是这样的话，我们可以使用原型设计模式。对吗？</p><p id="bfbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在原型模式中所做的是，首先，我们得到每一个对象，并在注册表中注册这些对象。</p><p id="bd55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们想从 employee 类中获得克隆，所以我们在 employee 类中重写了 clone 方法。然后，无论何时用户从永久雇员或合同雇员那里请求一个对象，你都可以与注册中心见面并请求一个克隆对象。因为在注册表中，我们有所有注册的对象。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/19bb573b82e96e5af779998c38838b91.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*sMCrOU4NxaW4W4UT76Uv3w.jpeg"/></div></div></figure><p id="252f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.第一步，我们要做的是，我们需要为 Employee 创建一个抽象类。PermanentEmp 和 ContractEmp 将扩展 Employee 类。</p><figure class="kz la lb lc fd ld"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="ae92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们的雇员类，它只有 setters 和 getters。除此之外，我们还覆盖了 clone 方法，因为我们想从 Employee 类中克隆。</p><p id="57f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里你可以看到克隆方法返回了对象类型。此外，我们需要关注异常。为了获得使用克隆方法的许可，你必须实现<strong class="ih hj">可克隆接口</strong>。</p><p id="96a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，你可以实现 PermanentEmp.java 和 ContractEmp.java</p><figure class="kz la lb lc fd ld"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kz la lb lc fd ld"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="0fc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.现在，我们需要一个可以进行对象注册的地方。我们在 Registry.java 内部这样做。</p><figure class="kz la lb lc fd ld"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="9d79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当用户创建一个注册表对象时，我们需要在注册表中注册所有的对象。所以我们在构造函数内部使用 registerObj()方法。</p><p id="b2fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在该方法中，我们从 employees 创建新对象，所有对象都将使用 hash map 在注册表中注册。</p><p id="6eeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一切都好。但是应该有一种方法让用户获得雇员克隆，所以我们需要一种方法。这里，我们使用名为 getEmployee()的方法。基于雇员类型，它将提供相关的克隆对象。</p><p id="f4b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您可以使用 enum 来保存雇员类型。</p><figure class="kz la lb lc fd ld"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="2df7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.最后，我们有一个主类，它可以从注册表中创建实例，并从我们需要的对象中获得一个克隆。</p><figure class="kz la lb lc fd ld"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="8938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的结果会是这样的。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lm"><img src="../Images/c974508e48c25b32357bb87324a0af3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UHHw2BXQ6JxAlQ76AzG1AA.jpeg"/></div></div></figure><p id="efa5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是原型设计模式。只要创建对象的成本很高，就可以使用这种模式。</p><p id="38a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">代码示例:</strong></p><p id="38b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ln" href="https://github.com/harshani2427/learn-with-krish/tree/master/Design%20Patterns/Protoype/ProtoypeDesignPattern" rel="noopener ugc nofollow" target="_blank">https://github . com/harshani 2427/learn-with-krish/tree/master/Design % 20 patterns/proto type/protoyedesignpattern</a></p></div></div>    
</body>
</html>