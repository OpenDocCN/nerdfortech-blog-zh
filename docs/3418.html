<html>
<head>
<title>Day 9: Jump Game VI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第九天:跳跃游戏六</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/day-9-jump-game-vi-1af20e1a74c?source=collection_archive---------11-----------------------#2021-06-09">https://medium.com/nerd-for-tech/day-9-jump-game-vi-1af20e1a74c?source=collection_archive---------11-----------------------#2021-06-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cd2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">问题链接:</em> </strong></p><div class="je jf ez fb jg jh"><a href="https://leetcode.com/explore/challenge/card/june-leetcoding-challenge-2021/604/week-2-june-8th-june-14th/3773/" rel="noopener  ugc nofollow" target="_blank"><div class="ji ab dw"><div class="jj ab jk cl cj jl"><h2 class="bd hj fi z dy jm ea eb jn ed ef hh bi translated">探索- LeetCode</h2><div class="jo l"><h3 class="bd b fi z dy jm ea eb jn ed ef dx translated">这个挑战是初学者友好的，对高级和非高级用户都可用。它由 30 个每日…</h3></div><div class="jp l"><p class="bd b fp z dy jm ea eb jn ed ef dx translated">leetcode.com</p></div></div><div class="jq l"><div class="jr l js jt ju jq jv jw jh"/></div></div></a></div><p id="ab16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">问题陈述:</em> </strong></p><p id="131f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给你一个<strong class="ih hj"> 0 索引的</strong>整数数组<code class="du jx jy jz ka b">nums</code>和一个整数<code class="du jx jy jz ka b">k</code>。</p><p id="3824" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你最初站在指数<code class="du jx jy jz ka b">0</code>。在一次移动中，您最多可以向前跳<code class="du jx jy jz ka b">k</code>步，而不会超出阵列的边界。也就是说，您可以从索引<code class="du jx jy jz ka b">i</code>跳到范围<code class="du jx jy jz ka b">[i + 1, min(n - 1, i + k)]</code><strong class="ih hj"/>内的任何索引。</p><p id="289c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你想到达数组的最后一个索引(index <code class="du jx jy jz ka b">n - 1</code>)。您的<strong class="ih hj">分数</strong>是您在数组中访问的每个索引<code class="du jx jy jz ka b">j</code>的所有<code class="du jx jy jz ka b">nums[j]</code>的<strong class="ih hj">总和</strong>。</p><p id="d478" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">返回<em class="jd"/><strong class="ih hj"><em class="jd">最高分</em> </strong> <em class="jd">即可获得</em>。</p><p id="45ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">例 1: </em> </strong></p><pre class="kb kc kd ke fd kf ka kg kh aw ki bi"><span id="d1dc" class="kj kk hi ka b fi kl km l kn ko"><strong class="ka hj">Input:</strong> nums = [1,-1,-2,4,-7,3], k = 2<br/><strong class="ka hj">Output:</strong> 7<br/><strong class="ka hj">Explanation:</strong> You can choose your jumps forming the subsequence [1,-1,4,3] (underlined above). The sum is 7.</span></pre><p id="1b15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">例题 2: </em> </strong></p><pre class="kb kc kd ke fd kf ka kg kh aw ki bi"><span id="c725" class="kj kk hi ka b fi kl km l kn ko"><strong class="ka hj">Input:</strong> nums = [10,-5,-2,4,0,3], k = 3<br/><strong class="ka hj">Output:</strong> 17<br/><strong class="ka hj">Explanation:</strong> You can choose your jumps forming the subsequence [10,4,3] (underlined above). The sum is 17.</span></pre><p id="2fd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">例题 3: </em> </strong></p><pre class="kb kc kd ke fd kf ka kg kh aw ki bi"><span id="c7a0" class="kj kk hi ka b fi kl km l kn ko"><strong class="ka hj">Input:</strong> nums = [1,-5,-20,4,-1,3,-6,-3], k = 2<br/><strong class="ka hj">Output:</strong> 0</span></pre><p id="e79e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">约束:</em> </strong></p><pre class="kb kc kd ke fd kf ka kg kh aw ki bi"><span id="8fed" class="kj kk hi ka b fi kl km l kn ko">- <!-- -->1 &lt;= nums.length, k &lt;= 10^5<br/>- -10^4 &lt;= nums[i] &lt;= 10^4</span></pre><p id="e79d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">天真解:</em> </strong></p><pre class="kb kc kd ke fd kf ka kg kh aw ki bi"><span id="593c" class="kj kk hi ka b fi kl km l kn ko">def maxResult(self, nums: List[int], k: int) -&gt; int:				<br/>        n = len(nums)<br/>        dp = [float('-inf') for i in range(n)]<br/>        dp[n - 1] = nums[n - 1]<br/>        for j in range(n - 2, -1, -1):<br/>            for i in range(1, k + 1):<br/>                if j + i &lt; n:<br/>                    dp[j] = max(dp[j], dp[j + i])<br/>            dp[j] += nums[j]<br/>        return dp[0]</span></pre><p id="ea25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">解释:</em> </strong></p><p id="09cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从位置 I 开始，下一个位置最多有 k 个选择(即 i + 1，i + 2，…，i + k)。假设从位置 I 可以得到的最高分是 dp[i]，那么</p><p id="8e84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">dp[i] = max(dp[i + 1]，dp[i + 2]，dp[i + 3]，…，dp[i + k]) + nums[i]</p><p id="92c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要注意边界情况的要求(i + k 需要小于数组大小 n)</p><ul class=""><li id="5060" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated"><strong class="ih hj"> <em class="jd">时间复杂度:O(nk) </em> </strong></li></ul><p id="3140" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">优化方案:</em> </strong></p><pre class="kb kc kd ke fd kf ka kg kh aw ki bi"><span id="6e9f" class="kj kk hi ka b fi kl km l kn ko">def maxResult(self, nums: List[int], k: int) -&gt; int:<br/>        n = len(nums)<br/>        dp = [float('-inf') for i in range(n)]<br/>        dp[n - 1] = nums[n - 1]<br/>        hq = []<br/>        heapq.heappush(hq, (-dp[n - 1], n - 1))<br/>        for j in range(n - 2, -1, -1):<br/>            sc, idx = hq[0]<br/>            while idx &gt; j + k:<br/>                heapq.heappop(hq)<br/>                if len(hq) &gt; 0:<br/>                    sc, idx = hq[0]<br/>            dp[j] = -sc + nums[j]<br/>            heapq.heappush(hq, (-dp[j], j))<br/>        return dp[0]</span></pre><p id="34ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">解释:</em> </strong></p><p id="c31a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们注意到，对于内部循环，我们不需要每次都检查所有 k 个元素来获得最大值。我们可以把所有的 dp[i]和它们的索引放在一个堆里。然后我们可以用 O(1)来获取最大值，同时，每次我们得到一个新的 dp[i]时，我们需要把它添加到堆中，并维护堆结构。</p><ul class=""><li id="41de" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated"><strong class="ih hj"> <em class="jd">时间复杂度:O(n logn) </em> </strong></li></ul><p id="a57a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！</p><p id="ddbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你有兴趣解决更多的问题，请跟随我，和我一起踏上这段旅程。</p><p id="a489" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">明天见！</p><p id="d786" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">干杯！</p></div></div>    
</body>
</html>