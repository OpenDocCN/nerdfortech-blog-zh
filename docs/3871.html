<html>
<head>
<title>How to improve your sales with Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何利用数据科学提高销售额</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-improve-your-sales-with-data-science-9ea4b66f6a1b?source=collection_archive---------19-----------------------#2021-06-27">https://medium.com/nerd-for-tech/how-to-improve-your-sales-with-data-science-9ea4b66f6a1b?source=collection_archive---------19-----------------------#2021-06-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b5bb" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">预测客户接受所发要约的概率的模型</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/5fe40a791c21f049b56d354dbe00f95a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1UoLK_vG9W1yxufKCkTeNg.jpeg"/></div></div></figure><h1 id="f440" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">介绍</h1><p id="6caf" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi kx translated"><span class="l ky kz la bm lb lc ld le lf di">根据星巴克财务报告</span>报道，该公司拥有超过32，000家门店，是全球<strong class="kd hj">最大的咖啡连锁店</strong>。</p><p id="21cf" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">想想这家公司有多大，有多重要，想象一下<strong class="kd hj">通过改善他们的市场行为</strong>他们可以筹集多少资金。所以，这篇文章的目的是增加星巴克的收入。尽管公司在这里，但概念和知识可能会部署在许多公司，这些公司有发送优惠券的政策。即使他们没有，也许使用它是一个很好的选择。</p><p id="4963" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">公司有许多方法来提高你的销售额，其中之一就是有效地向你的客户发送报价。这就是我们将在这里深化的战略。</p><p id="d211" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">在这个简短的介绍之后，关于这个帖子的<strong class="kd hj">目标</strong>是什么，以及它在用户体验和公司可以拥有的资金方面的<strong class="kd hj">巨大价值。让我们用实践的术语来谈，用从现在开始做的数据来展示工作。要做到这一点，请记住下面的划分，这将在下一节介绍。</strong></p><p id="ead6" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">重要的是注意到<strong class="kd hj">这篇文章是技术性的</strong>，换句话说，你将向<strong class="kd hj">展示我从获得数据</strong>到用<strong class="kd hj">代码、表格和图形图像</strong>开发IA模型的旅程的细节。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="dd58" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated">内容</h1><ol class=""><li id="4d9f" class="lx ly hi kd b ke kf kh ki kk lz ko ma ks mb kw mc md me mf bi translated">商业理解</li><li id="3e2c" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw mc md me mf bi translated">数据理解</li><li id="07d4" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw mc md me mf bi translated">数据争论</li><li id="8d76" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw mc md me mf bi translated">探索性分析</li><li id="aa18" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw mc md me mf bi translated">建立机器学习模型</li></ol></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="0a50" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated"><strong class="ak"> 1。业务理解</strong></h1><p id="9344" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">现在是信息时代，是消费定制时代。首先，没有数据这一切都是不可能的，正如经济学家所说，数据是新的石油。有了石油，就必须提炼你的矿物。这意味着你必须根据客户的需求和行为区别对待他们。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/63ee34658bbd1298cfd799114feb83ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9FJfG162JnGeyrZQ4igVag@2x.jpeg"/></div></div></figure><p id="810d" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">有了这个想法，我们可以为忠诚的顾客发送更多的报价。对于距离较远的公司，促销力度可能会越来越小。比参加A/B测试并观察他们的行为要好。这些只是可以应用的一些例子。不幸的是，与汽油不同，这些数据没有现成的方法可以遵循，它需要实验和研究。</p><p id="37fd" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi kx translated"><span class="l ky kz la bm lb lc ld le lf di">答</span>经过一些实验，我们的目标是<strong class="kd hj">建立一个模型来预测客户接受</strong>发出的报价的概率。</p><p id="6a32" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">由于成功完成和未完成报价这两种分类的原因，要评估的指标将是<strong class="kd hj">准确度得分</strong>。最后，你不得不<strong class="kd hj">避免向那些不想收到</strong>优惠券的人发送优惠券，而<strong class="kd hj">增加将使用</strong>优惠券的人的优惠券数量。</p><p id="a676" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">这种情况不同于诊断<strong class="kd hj">健康问题或信用卡欺诈</strong>，在这种情况下，您要寻找事件的发生(二进制中的数字1)，为了实现这一点，您的准确度分数可能会更差，因为<strong class="kd hj">接近100%的召回率</strong>。</p><p id="da58" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">另一方面，在检测电子邮件范围的情况下，为了不将重要的电子邮件归类为垃圾邮件，<strong class="kd hj">可能必须具有高精度分数。</strong></p><p id="5d7f" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">最后，让我们去理解它是如何可能的，下面的部分显示了可用的数据集。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="e335" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated">2.数据理解</h1><p id="f8aa" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">这个项目的数据<strong class="kd hj">包含模拟星巴克奖励移动应用上的客户行为</strong>的模拟数据。每隔几天，星巴克就会向手机应用程序的用户发出一次报价。优惠可以仅仅是饮料的广告，也可以是实际的优惠，如折扣或BOGO(买一送一)。某些用户可能在特定的几周内收不到任何报价。</p><p id="a8c9" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">有三种json (javascript对象符号)。它们是:</p><h2 id="f7fe" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">2.1投资组合</h2><p id="627e" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">包含要约id和关于每个要约的元数据<em class="na"> </em>(持续时间、类型等)。)</p><blockquote class="nb nc nd"><p id="26b9" class="kb kc na kd b ke lg ij kg kh lh im kj ne li km kn nf lj kq kr ng lk ku kv kw hb bi translated">id (string) —优惠id <br/> offer_type (string) —优惠类型，即BOGO、折扣、信息性<br/>难度(int) —完成优惠所需的最低花费<br/>奖励(int) —完成优惠给予的奖励<br/>持续时间(int) —优惠开放的时间，以天数计<br/>渠道(字符串列表)</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nh"><img src="../Images/fdea2677cad0d7ce28765bcdcc499390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*srW-y8Twcyk-WRMvV1fTxQ.png"/></div></figure><h2 id="5ef8" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">2.2简介</h2><blockquote class="nb nc nd"><p id="8345" class="kb kc na kd b ke lg ij kg kh lh im kj ne li km kn nf lj kq kr ng lk ku kv kw hb bi translated">年龄(int) —客户的年龄<br/>成为会员日期(int) —客户创建应用账户的日期<br/>性别(str) —客户的性别(注意，有些条目包含“O”代表其他人，而不是M或F) <br/> id (str) —客户id <br/>收入(float) —客户的收入</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ni"><img src="../Images/35143073770524da23df68966222edc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*pVzRFfqzUDlRrD6tsutMWA.png"/></div></figure><h2 id="6761" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">2.3抄本</h2><blockquote class="nb nc nd"><p id="79e9" class="kb kc na kd b ke lg ij kg kh lh im kj ne li km kn nf lj kq kr ng lk ku kv kw hb bi translated">事件(str) —记录描述(即交易、收到的报价、查看的报价等。)<br/>人员(str) —客户id <br/>时间(int) —测试开始后的时间(小时)。数据开始于时间t=0 <br/>值—(字符串字典)—根据记录，可以是报价id或交易金额</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nj"><img src="../Images/c12ebab14c68dfd84899f45f3af2692a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*ccF8L2XXOgkLtV-UvhNPbA.png"/></div></figure><p id="799e" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">将注意力转向<strong class="kd hj">配置文件和投资组合，它们是维度</strong>表，而<strong class="kd hj">交易是事实</strong>类型。另一个观察，所有的数据处理是与图书馆熊猫。</p><p id="1d73" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">当然，这篇文章没有所有的代码和解释，直到机器学习，<strong class="kd hj">我策划了什么是更相关的知道这里</strong>。但是，我建议你也打开并关注<a class="ae nk" href="https://github.com/matheusvclls/starbucks_offers/blob/main/starbucks_offers.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上的完整项目。</p><p id="2156" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">当然，在探索性分析之前，有些数据域必须被处理。这是数据科学家花费大部分时间的地方，您将在下面进行探索。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="1acc" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated">3.数据争论</h1><p id="5094" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">根据<a class="ae nk" href="https://www.forbes.com/sites/gilpress/2016/03/23/data-preparation-most-time-consuming-least-enjoyable-data-science-task-survey-says/?sh=7f7a141c6f63" rel="noopener ugc nofollow" target="_blank"> Forbes </a>，<strong class="kd hj">数据科学家80%的时间用于准备和管理数据以供分析</strong>。所以，就从这个辛苦开始吧。</p><h2 id="3f95" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">3.1缺失数据</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nl"><img src="../Images/945391bcb75e6bb69772a618d2e7af29.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*3i5jBLY8xh2rWiGW03rDAQ.png"/></div></figure><p id="0cf4" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">轮廓是唯一具有空值的数据帧，如左图所示。</p><p id="9724" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">由于它是一个维度表，所以与抄本数据帧中的user_id 相关的<strong class="kd hj">事件也被删除。</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nm"><img src="../Images/59b087d391fe80d91019818c05cc8b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GeZFe_Nu8VtfKobyOyqKLw.png"/></div></div></figure><h2 id="2462" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">3.2虚拟数据</h2><p id="3de3" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">在这一部分中，所有带字母的类别变量都被转换成数字(0或1)。比如性别，你可以在下面看到。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nn"><img src="../Images/77ba649e424157c9c4b42c91c1c93492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gfnBlbTBKIEZRxtBfSX4DQ.png"/></div></div></figure><p id="8e77" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">性别是原栏目。该函数负责转换新列中的所有类别值，即gender_F、gender_M和gender_O。注意，原始列被保留，这是因为用tem更容易制作一些图形。</p><h2 id="8e0c" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">3.3数据标签id</h2><p id="37e5" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">因为您有一个与offer和user相关的大字符串。除了它们存储的内存大小，另一个原因是为了可视化。</p><p id="7427" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">因此，下面的函数为您完成了这项工作，用整数中的唯一值转换标签中的现有ID。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="no np l"/></div></figure><h2 id="b628" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">3.4合并数据帧</h2><p id="52fd" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">使用pandas的函数merge，它允许将三个数据帧连接成<strong class="kd hj">抄本(事实表)</strong>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nq"><img src="../Images/5c474af07007c0ac372617552b5a3365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t1O7LPVOGOtwLlScgC0Thg.png"/></div></div></figure></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="bc11" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated">4.探索性分析</h1><h2 id="6ae8" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">4.1探索人口统计数据(个人资料数据框架)</h2><p id="7b47" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">为了对数据帧有一个大致的了解，熊猫的功能描述是有用的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nr"><img src="../Images/e23f4f91df24992b35398594492236ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZIxi-JomwJ3iSvrFk1Lx3g.png"/></div></div></figure><p id="4e79" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">可以带点见识。它们是:</p><ul class=""><li id="446a" class="lx ly hi kd b ke lg kh lh kk ns ko nt ks nu kw nv md me mf bi translated"><em class="na"> 75%的顾客年龄在42岁以上。均值为54.39；</em></li><li id="d499" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw nv md me mf bi translated"><em class="na"> 65，404.99是收入的平均值，接近中位数64，000.00；</em></li><li id="6072" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw nv md me mf bi translated"><em class="na">关于性别，男性占57.23%，女性占41.34%，其他1.43%；和</em></li><li id="6596" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw nv md me mf bi translated"><em class="na">签约年份，即使有6年的数据。中位数集中在最近两年。</em></li></ul><h2 id="642d" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">4.2按人口统计变量分列的用户数据分布</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nw"><img src="../Images/04d4c5bc67b6ec52cc9140442e56ea28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XN0mFqu0WJcgVYlLv2uSrw.png"/></div></div></figure><p id="7b8e" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">在这里，你可以看到上面的分布描述可视化直方图。</p><h2 id="4041" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">4.3事件数据的分布</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nx"><img src="../Images/d7f1b44562a4ec26c6f3e1d50f370436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*bhA6tsFE0ZtkA4KuSA1Jwg.png"/></div></figure><p id="6dd6" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">这是抄本数据帧的分布，列<strong class="kd hj">事件</strong>。</p><p id="79fa" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">请记住，我们的目标是预测发出的报价，因此从现在开始，我们只过滤该数据框架的用户<strong class="kd hj"> </strong>收到的报价<strong class="kd hj">。</strong></p><h2 id="c958" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">4.4收到的数据框架报价—概述</h2><ul class=""><li id="9138" class="lx ly hi kd b ke kf kh ki kk lz ko ma ks mb kw nv md me mf bi translated"><em class="na">总共向14，820名用户发送了66，501份报价。</em></li><li id="d993" class="lx ly hi kd b ke mg kh mh kk mi ko mj ks mk kw nv md me mf bi translated">一个客户发送的最大报价数:6</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ny"><img src="../Images/2ee0aa2a2b5e6b1638de4e5a7ae6098b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*o4hqCwDE39CxFfA6C1EdAA.png"/></div></figure><h2 id="a1f1" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">数据处理:创建已发送报价成功或失败的列</h2><p id="a1f5" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated"><strong class="kd hj">数据帧中没有任何信息表明发送</strong>的报价成功或失败。因此，这是必须完成的工作，以实现目标。</p><p id="8008" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">下面的代码<strong class="kd hj">需要很长时间来处理</strong>，但是我在编码的时候还没有找到替代的方法。set_event_time设置完成或查看优惠的时间。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="no np l"/></div></figure><p id="0092" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">但这不足以创建成功完成要约的列，在此之后，时间被视为在时间完成之前。</p><p id="cf08" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">因为我们没有关于信息完整报价的数据。让我们考虑这样一种情况，<strong class="kd hj">在要约时间内，信息后面总是跟着一个交易，在用户查看之后，返回1 </strong>否则0表示要约成功完成。</p><h2 id="336c" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">4.5总报价中已查看和已完成的百分比是多少？</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nz"><img src="../Images/162fb1bacd6559771494160e4d5a01f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*_auNa2-pfwOFbXjxx7I_Ng.png"/></div></figure><p id="af75" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">此图突出显示了与总报价相比的成功率。</p><h2 id="0c6c" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">4.6什么报价的完成率最高？</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oa"><img src="../Images/d2746dca58b519cdd2f10ff8855bce05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gGJ8Cv_rM1r-Tkui-UN-Ww.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ob"><img src="../Images/cfaf6f0c1ff54520e90e5576788170c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LSoz63hKOKN0FH9xIhREWA.png"/></div></div></figure><p id="829b" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">如我们所见，最佳价格是促销id = 7，折扣为2，花费10，持续时间为10天。通过上面的表格和直方图，可以看到按success_completed_pct 列排序的<strong class="kd hj">。</strong></p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="73ff" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated">5.建立机器学习模型</h1><p id="1424" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">最后，您已经准备好构建ML的模型了。</p><h2 id="4622" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">数据处理:消除列并选择y和X特征</h2><p id="f0cc" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">不幸的是，但还没有，首先让我们删除分类性别_F和性别_O。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es oc"><img src="../Images/f62d0d4a4a0289c5c8054aa421daf08a.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*TwV23PiNkrPh0DpJ9PbgcQ.png"/></div></figure><p id="1342" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">“其他”类型占1%多一点。基于此，为了改进模型，<strong class="kd hj">您也删除了女性这个变量，只保留男性(多数)。</strong></p><p id="50b1" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">在对其进行处理并消除一些列之后，数据集准备好被分离成<strong class="kd hj"> y(目标特征)</strong>和<strong class="kd hj"> X(输入特征)</strong>。</p><h2 id="37b0" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">5.1建模</h2><p id="cdb6" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">使用的模型如下，并带有skit learn网站的链接:</p><blockquote class="nb nc nd"><p id="a077" class="kb kc na kd b ke lg ij kg kh lh im kj ne li km kn nf lj kq kr ng lk ku kv kw hb bi translated"><a class="ae nk" href="https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html" rel="noopener ugc nofollow" target="_blank"> SVC </a> <br/> <a class="ae nk" href="https://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.GaussianNB.html" rel="noopener ugc nofollow" target="_blank">朴素贝叶斯</a> <br/> <a class="ae nk" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html" rel="noopener ugc nofollow" target="_blank">随机森林</a> <br/> <a class="ae nk" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.GradientBoostingClassifier.html" rel="noopener ugc nofollow" target="_blank">梯度推进</a> <br/> <a class="ae nk" href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html" rel="noopener ugc nofollow" target="_blank">逻辑回归<br/></a><a class="ae nk" href="https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html" rel="noopener ugc nofollow" target="_blank">KNN<br/></a><a class="ae nk" href="https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html" rel="noopener ugc nofollow" target="_blank">决策树</a></p></blockquote><p id="f007" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">如上表所示，有七种不同类型的模型。然而，在部署它的基本搜索之前，需要很长时间来运行<strong class="kd hj">最佳分类方法和参数，这将在下面的</strong>中解释。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="no np l"/></div></figure><p id="26c1" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">上面，用选择了<strong class="kd hj">参数的模型使用的代码来训练</strong>。由数字表示的变量由接近默认值的值选择，分类不需要很长时间。这是一个需要很长时间的SVC的例子，因此只有一个参数需要测试。</p><p id="50c5" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">如果你想更深入，看看skit learn 的网站<strong class="kd hj">，一个建立模型的库，有很好的记录，有关于参数的信息，详细说明了模型和它如何在桌子下面工作。</strong></p><p id="ff34" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">现在，下一个函数构建模型，使用管道<strong class="kd hj">用StandardScaler()，</strong>标准化数据，这样就不会因为数字的不同标度而产生偏差。这里使用的另一个<strong class="kd hj">方法是GridSearchCV()，用于优化超参数</strong>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="no np l"/></div></figure><p id="d158" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">使用main()函数，您可以有组织地运行构建ML模型的所有步骤。你仍然可以看到许多模型和参数，这是真的，也许你认为这可能需要很多时间，但所创建的函数和下一节<strong class="kd hj">使过程</strong>自动化。</p><h2 id="7fe1" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">5.2运行模型</h2><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="no np l"/></div></figure><h2 id="d772" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">5.4评估模型</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es od"><img src="../Images/a88f73d494e2aee0241672b2034a7c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*aUEgKoz9vf_pe1FLPC1MJw.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es oe"><img src="../Images/1642ff8da4ff344052aa20283fb7b860.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*GP7aTrV7gMmsRn0w6d24iw.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es of"><img src="../Images/d3c7c51e6845933f566a63ba3f12876a.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*dpClyjixkcFztp-QfA0HCg.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es og"><img src="../Images/1eadfa424a93b774191963378f4d37b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*QaDTjP15_z5XSbiACg00WA.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es oh"><img src="../Images/edda1c8872e660db23845c7ded2eac61.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*ed7bEev-pwx4tf8KImfiEQ.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es oi"><img src="../Images/fd396b67ecb0a2c770f18ac872636e2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*uwlm-ep5PO8Ji21Ap4bC9g.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es of"><img src="../Images/b7d3fc4a389c2710db0f9f85f684343d.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*wi6WqASU223FnJMR7ePxGQ.png"/></div></figure><p id="83d9" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">除了朴素贝叶斯，它呈现出最差的准确率，比第一个低10%左右。<strong class="kd hj">模型更好地预测了0类</strong>，正如你可以看到的<strong class="kd hj">召回和精度</strong>的指标。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es oj"><img src="../Images/6439181bb53475a4586fd40c3b6a830e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*iRoqIeIGmmnErtur8hzvlA.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ok"><img src="../Images/6cf9e2e607ba5e6535b69203fb5703cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:362/format:webp/1*Be5MU5K9W8enzGEoLtDbjQ.png"/></div></figure><p id="ddc3" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">在运行之前声明的所有模型后，<strong class="kd hj">梯度增强</strong> <strong class="kd hj">显示出最佳的准确度得分，其他指标非常相似</strong>。所以，让我们用它来部署ML模型。</p><h2 id="972a" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">5.5功能重要性</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ol"><img src="../Images/8710f70b259cd70af1a6b8ebb46c0f26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*nOMA-Gdqb50bp2B4Q1nBUA.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es om"><img src="../Images/464a168461f9f661fd9d101c66cd4f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*IueUeEeSWPn9bkH-j5CAJg.png"/></div></figure><p id="3306" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">谈到功能重要性，模型最重要的是<strong class="kd hj">【会员天数】</strong><strong class="kd hj">【社交】</strong><strong class="kd hj">【收入】</strong>。</p><h2 id="6e5f" class="mm jk hi bd jl mn mo mp jp mq mr ms jt kk mt mu jv ko mv mw jx ks mx my jz mz bi translated">5.6部署模型</h2><p id="65c4" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">下面，部署模型。这是一种应用程序，用来显示用户接受报价的可能性。</p><p id="2154" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">列表示要约id，行表示用户id。有了这个矩阵，就很容易理解用户和报价的概率，就有可能在这些变量之间进行比较。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es on"><img src="../Images/c14054b4f5e382348c4517c14f5ea99a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XnMxczbBv2RLdZwe_kkdwA.png"/></div></div></figure></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="4878" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated">结论</h1><p id="8003" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">这个项目的目标是<strong class="kd hj">建立一个模型来预测客户接受发送给</strong>的报价的概率。完成后，用梯度推进，准确率达到70%。如前所述，在这个业务问题中，这个指标是有意义的，因为我们需要让<strong class="kd hj">接受和不接受完整的</strong>报价。</p><p id="562a" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">然而，准确性方面，需要改进的是类别1 的召回率和精确度，因为它的比率比类别0低，大约15%或20%。换句话说，该模型预测未被接受的报价比被接受的报价更好。</p><p id="e075" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">在模型之外，数据处理和建立ML模型的步骤是用<strong class="kd hj">通用函数</strong>完成的，这些函数可以在<strong class="kd hj">其他项目</strong>中<strong class="kd hj">应用</strong>。所以，检查一下这个项目的GitHub库，并随意重用那些创建的函数。</p><p id="9bbe" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">特征<strong class="kd hj">、【会员天数】、【社交】和【收入】</strong>对模型学习最重要。但是，也许可以做的一件好事<strong class="kd hj">是根据客户在交易中已经花费的金额创建一个功能，</strong>它可以是这个价值的每月平均值。</p><p id="6b15" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">在这个模型实现的真实世界中，有必要进行A/B测试。例如，<strong class="kd hj">只发送完成几率超过65%的报价，如果低于该目标，则不要发送</strong>。一半的客户会遵守这一规则，另一半会照常发送。之后，比较两者的结果，看看是否有效。</p><p id="b49d" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">另一点是函数<strong class="kd hj"> set_event_time()需要很长时间来运行</strong>，另一个需要很长时间的部分是函数main()，因为它建立、训练、评估和保存模型，但这只是因为skit learn的函数，所以很难优化。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="3e37" class="jj jk hi bd jl jm ls jo jp jq lt js jt io lu ip jv ir lv is jx iu lw iv jz ka bi translated">参考</h1><p id="9873" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated"><a class="ae nk" href="https://www.sec.gov/ix?doc=/Archives/edgar/data/829224/000082922420000078/sbux-20200927.htm" rel="noopener ugc nofollow" target="_blank">https://www.sec.gov/ix?doc =/Archives/Edgar/data/829224/000082922420000078/sbux-20200927 . htm</a></p><p id="9e77" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated">https://en.wikipedia.org/wiki/Starbucks<a class="ae nk" href="https://en.wikipedia.org/wiki/Starbucks" rel="noopener ugc nofollow" target="_blank"/></p><p id="a090" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated"><a class="ae nk" href="https://www.economist.com/leaders/2017/05/06/the-worlds-most-valuable-resource-is-no-longer-oil-but-data" rel="noopener ugc nofollow" target="_blank">https://www . economist . com/leaders/2017/05/06/世界上最有价值的资源不再是石油而是数据</a></p><p id="9fde" class="pw-post-body-paragraph kb kc hi kd b ke lg ij kg kh lh im kj kk li km kn ko lj kq kr ks lk ku kv kw hb bi translated"><a class="ae nk" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank">https://scikit-learn.org/stable/</a></p></div></div>    
</body>
</html>