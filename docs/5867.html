<html>
<head>
<title>Microblog: Creating a Mini Graph-Powered Dashboard in a Notebook with TigerGraph and Bokeh</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微博:用TigerGraph和Bokeh在笔记本上创建一个迷你图形仪表盘</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/microblog-creating-a-mini-graph-powered-dashboard-in-a-notebook-with-tigergraph-and-bokeh-c3b3be018edc?source=collection_archive---------5-----------------------#2021-11-27">https://medium.com/nerd-for-tech/microblog-creating-a-mini-graph-powered-dashboard-in-a-notebook-with-tigergraph-and-bokeh-c3b3be018edc?source=collection_archive---------5-----------------------#2021-11-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="46a9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用TigerGraph和Bokeh绘制Twitter情绪图</h2></div><h1 id="a668" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">概观</h1><h2 id="356e" class="jp iy hi bd iz jq jr js jd jt ju jv jh jw jx jy jj jz ka kb jl kc kd ke jn kf bi translated">介绍</h2><p id="33e4" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko jw kp kq kr jz ks kt ku kc kv kw kx ky hb bi translated">作为<a class="ae kz" href="https://shreya-chaudhary.medium.com/what-is-twitter-thankful-for-leverage-tigergraph-and-natural-language-processing-to-find-out-19ca7e69d4f9" rel="noopener">的延续，“推特感谢什么？”博客</a>，让我们使用Bokeh来可视化结果，Bokeh是一个Python库，用于为现代web浏览器创建交互式可视化。Boheh的便利之处在于，我们可以在Colab笔记本中创建交互式数据可视化。我们开始吧！</p><h2 id="05c4" class="jp iy hi bd iz jq jr js jd jt ju jv jh jw jx jy jj jz ka kb jl kc kd ke jn kf bi translated">使用的工具</h2><ul class=""><li id="24f8" class="la lb hi ki b kj kk km kn jw lc jz ld kc le ky lf lg lh li bi translated"><a class="ae kz" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank"> TigerGraph云</a></li><li id="f86b" class="la lb hi ki b kj lj km lk jw ll jz lm kc ln ky lf lg lh li bi translated"><a class="ae kz" href="https://pytigergraph.github.io/pyTigerGraph/GettingStarted/" rel="noopener ugc nofollow" target="_blank"> pyTigerGraph </a></li><li id="ac89" class="la lb hi ki b kj lj km lk jw ll jz lm kc ln ky lf lg lh li bi translated"><a class="ae kz" href="http://docs.bokeh.org/en/latest/" rel="noopener ugc nofollow" target="_blank">散景</a></li></ul><h2 id="6d30" class="jp iy hi bd iz jq jr js jd jt ju jv jh jw jx jy jj jz ka kb jl kc kd ke jn kf bi translated">旅程</h2><ul class=""><li id="3928" class="la lb hi ki b kj kk km kn jw lc jz ld kc le ky lf lg lh li bi translated">概观</li><li id="be30" class="la lb hi ki b kj lj km lk jw ll jz lm kc ln ky lf lg lh li bi translated">第一部分:编写额外的查询</li><li id="8a58" class="la lb hi ki b kj lj km lk jw ll jz lm kc ln ky lf lg lh li bi translated">第二部分:创建仪表板</li><li id="66ff" class="la lb hi ki b kj lj km lk jw ll jz lm kc ln ky lf lg lh li bi translated">恭喜和下一步</li></ul><h1 id="6dd0" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">第一部分:编写额外的查询</h1><p id="54f6" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko jw kp kq kr jz ks kt ku kc kv kw kx ky hb bi translated">首先，我们需要一个额外的仪表板查询。首先，导航至<a class="ae kz" href="https://tgcloud.io/app/solutions" rel="noopener ugc nofollow" target="_blank">“我的解决方案”选项卡TigerGraph Cloud </a>，确保您的TigerGraph解决方案已启动。</p><div class="lo lp ez fb lq lr"><a href="https://tgcloud.io/app/solutions" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">TigerGraph云门户</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">“我的解决方案”选项卡</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">tgcloud.io</p></div></div></div></a></div><p id="8112" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">如果您的解决方案有一个蓝点，旁边有单词“Stopped ”,请按“actions”下的框，然后选择下拉列表中的“Start”。给它几分钟启动时间，直到它变绿并显示“准备好”</p><div class="mf mg mh mi fd ab cb"><figure class="mj mk ml mm mn mo mp paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><img src="../Images/76153b62e7660ee128ec445c603d74ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*_H00k-DDItrdDeJioNlf7g.png"/></div></figure><figure class="mj mk mw mm mn mo mp paragraph-image"><img src="../Images/054722e54afe50333da023d460cd46d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*SR_7yMARSg15QH7s98EifQ.png"/><figcaption class="mx my et er es mz na bd b be z dx nb di nc nd translated">开始您的解决方案</figcaption></figure></div><p id="27ff" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">接下来，导航回您的笔记本。安装并导入pyTigerGraph并连接到解决方案，用您的子域替换子域，用您的密码替换密码。</p><pre class="mf mg mh mi fd ne nf ng nh aw ni bi"><span id="6d2a" class="jp iy hi nf b fi nj nk l nl nm">!pip install pyTigerGraph<br/>import pyTigerGraph as tg</span><span id="237e" class="jp iy hi nf b fi nn nk l nl nm">conn = tg.TigerGraphConnection(host = "https://SUBDOMAIN.i.tgcloud.io/", password = "PASSWORD", graphname = "TwitterGraph")<br/>conn.apiToken = conn.getToken(conn.createSecret())</span></pre><p id="b540" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">完美！一旦连接上，编写并安装查询。第一个查询将获取图中的所有实体类别。</p><pre class="mf mg mh mi fd ne nf ng nh aw ni bi"><span id="981a" class="jp iy hi nf b fi nj nk l nl nm">conn.gsql('''</span><span id="6b4a" class="jp iy hi nf b fi nn nk l nl nm">CREATE QUERY getEntities() FOR GRAPH TwitterGraph { <br/>  SetAccum&lt;STRING&gt; @@entities;<br/>  <br/>  Seed = {Entity.*};<br/>  <br/>  Res = SELECT s FROM Seed:s <br/>        ACCUM @@entities += s.entity;<br/>  <br/>  PRINT @@entities;<br/>}</span><span id="0a10" class="jp iy hi nf b fi nn nk l nl nm">INSTALL QUERY getEntities</span><span id="ca5d" class="jp iy hi nf b fi nn nk l nl nm">''')</span></pre><p id="df7a" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">太棒了。第二个查询将获取给定实体类型的所有边。</p><pre class="mf mg mh mi fd ne nf ng nh aw ni bi"><span id="26af" class="jp iy hi nf b fi nj nk l nl nm">conn.gsql('''</span><span id="fb94" class="jp iy hi nf b fi nn nk l nl nm">CREATE QUERY edgesEntityFilter(STRING entity) FOR GRAPH TwitterGraph { <br/>  ListAccum&lt;Edge&lt;TWEET_ENTITY&gt; &gt; @@test; <br/>  <br/>  Seed = {Tweet.*};<br/>  <br/>  Res = SELECT tgt FROM Seed:s - (TWEET_ENTITY:e) - Entity:tgt <br/>  WHERE tgt.entity == entity<br/>  ACCUM @@test+=e;<br/>  <br/>  PRINT @@test;<br/>}</span><span id="b307" class="jp iy hi nf b fi nn nk l nl nm">INSTALL QUERY edgesEntityFilter</span><span id="c64c" class="jp iy hi nf b fi nn nk l nl nm">''')</span></pre><p id="4df4" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">这样，图形数据库就可以创建仪表板了！</p><h1 id="f3aa" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">第二部分:创建仪表板</h1><p id="c120" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko jw kp kq kr jz ks kt ku kc kv kw kx ky hb bi translated">让我们使用这些查询来组装一个仪表板。首先，我们需要导入bokeh、pandas和ipywidgets库。</p><pre class="mf mg mh mi fd ne nf ng nh aw ni bi"><span id="9eef" class="jp iy hi nf b fi nj nk l nl nm">import pandas as pd<br/>from ipywidgets import interact</span><span id="31d4" class="jp iy hi nf b fi nn nk l nl nm">from bokeh.io import push_notebook, show, output_notebook<br/>from bokeh.plotting import figure<br/>output_notebook()</span></pre><p id="b2f3" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">为此，我们将在下拉列表中采用三个输入:实体类别、x类型和y类型。为了创建这个，让我们准备列表作为下拉列表。</p><pre class="mf mg mh mi fd ne nf ng nh aw ni bi"><span id="dc59" class="jp iy hi nf b fi nj nk l nl nm">ent_opts = conn.runInstalledQuery("getEntities")[0]['@@entities']</span><span id="b8e1" class="jp iy hi nf b fi nn nk l nl nm">score_opts = ["pos_score", "neg_score", "neu_score", "overall_sentiment"]</span></pre><p id="d806" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">太棒了。接下来，我们将构建初始图形本身。</p><pre class="mf mg mh mi fd ne nf ng nh aw ni bi"><span id="9eff" class="jp iy hi nf b fi nj nk l nl nm">p = figure(title="Sentiment of Tweets")</span><span id="090e" class="jp iy hi nf b fi nn nk l nl nm">df = pd.DataFrame(conn.runInstalledQuery("edgesEntityFilter", {"entity": "QUANTITY"})[0]["@@test"])</span><span id="05f5" class="jp iy hi nf b fi nn nk l nl nm">att = pd.DataFrame(list(df["attributes"]))["overall_sentiment"]</span><span id="837b" class="jp iy hi nf b fi nn nk l nl nm">r = p.scatter(att, att, 2)</span></pre><p id="b48f" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">最后，为了显示图形并更新它，我们将编写一个更新函数，用更新后的信息调用edgesEntityFilter并显示所有这些内容。</p><pre class="mf mg mh mi fd ne nf ng nh aw ni bi"><span id="b841" class="jp iy hi nf b fi nj nk l nl nm">def update(data_type, x, y):</span><span id="b57f" class="jp iy hi nf b fi nn nk l nl nm">  upd = pd.DataFrame(conn.runInstalledQuery("edgesEntityFilter", {"entity": data_type})[0]["@@test"])<br/>  upd_att = pd.DataFrame(list(upd["attributes"]))<br/>  r.data_source.data['x'] = upd_att[x]<br/>  r.data_source.data['y'] = upd_att[y]<br/>  push_notebook()</span><span id="6055" class="jp iy hi nf b fi nn nk l nl nm">show(p, notebook_handle=True)<br/>interact(update, data_type = ent_opts, x=score_opts, y=score_opts)</span></pre><figure class="mf mg mh mi fd mk er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es no"><img src="../Images/1e67232055cd7cf90e98b5895db6cfda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1WFUZ-6hAa4KBsebH1U3pA.png"/></div></div><figcaption class="mx my et er es mz na bd b be z dx translated">仪表板示例</figcaption></figure><p id="1ccf" class="pw-post-body-paragraph kg kh hi ki b kj ma ij kl km mb im ko jw mc kq kr jz md kt ku kc me kw kx ky hb bi translated">通过更改下拉列表，我们可以自动更新笔记本中的数字。</p><h1 id="96ae" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">恭喜和下一步</h1><p id="9d5a" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko jw kp kq kr jz ks kt ku kc kv kw kx ky hb bi translated">太棒了。这样，您就学会了如何利用散景在笔记本上用TigerGraph数据创建交互式仪表盘。有疑问或者有兴趣学习更酷的TigerGraph技巧？加入TigerGraph社区论坛或Discord服务器！</p><div class="lo lp ez fb lq lr"><a href="https://community.tigergraph.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">老虎图</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">话题回复浏览量活动11月22日-26日每周更新:Graph+AI纽约视频，AMC股票和情绪…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">community.tigergraph.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu mu lr"/></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://discord.gg/gRHWBZNpxW" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">加入TigerGraph Discord服务器！</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">查看Discord上的TigerGraph社区-与727名其他成员一起玩，享受免费的语音和文本聊天。</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">不和谐. gg</p></div></div><div class="np l"><div class="nv l nr ns nt np nu mu lr"/></div></div></a></div></div></div>    
</body>
</html>