<html>
<head>
<title>A Beginner Introduction to Using Axios for Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Axios 进行请求的初学者入门</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/a-beginner-introduction-to-using-axios-for-requests-e07fe9c87f54?source=collection_archive---------3-----------------------#2021-04-22">https://medium.com/nerd-for-tech/a-beginner-introduction-to-using-axios-for-requests-e07fe9c87f54?source=collection_archive---------3-----------------------#2021-04-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="3da1" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">先决条件<strong class="ak"> : </strong></h1><ol class=""><li id="7724" class="jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">异步 Javascript。在这里阅读我的文章<a class="ae jv" rel="noopener" href="/swlh/a-quick-guide-to-writing-ajax-requests-for-json-files-a769b6be604e"/></li><li id="9a95" class="jd je hi jf b jg jw ji jx jk jy jm jz jo ka jq jr js jt ju bi translated">JavaScript 中的承诺</li><li id="9397" class="jd je hi jf b jg jw ji jx jk jy jm jz jo ka jq jr js jt ju bi translated">JavaScript 中的对象</li><li id="613a" class="jd je hi jf b jg jw ji jx jk jy jm jz jo ka jq jr js jt ju bi translated">本文中可能会用到 Jquery 和 Bootstrap。</li></ol><p id="e935" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><em class="ks">(这些知识有助于提高你的理解，但不是必须的)</em></p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es kt"><img src="../Images/9ce525a0b513e6e1a3f65dcbd86e4481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U-_5QvffLmNQIU41.png"/></div></div></figure><p id="f476" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">链接到项目存储库— <a class="ae jv" href="https://github.com/Uny1me/axios-project/" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><p id="b219" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">简介</strong></p><p id="c363" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">“简而言之，Axios 是一个 Javascript 库，用于从<a class="ae jv" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> node.js </a>发出 HTTP 请求，或者从支持<a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank"> ES6 Promise API </a>的浏览器发出 XMLHttpRequests。— <a class="ae jv" rel="noopener" href="/@MinimalGhost/what-is-axios-js-and-why-should-i-care-7eb72b111dc0"> <em class="ks">什么是 Axios.js，我为什么要关心？</em> </a> <em class="ks">作者@Eric Kolleger。</em>要了解更多关于 Axios 的信息，我推荐阅读这篇文章。</p><p id="24da" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">这篇文章我想做的是教大家如何使用 Axios。虽然您可以在 Node.js 应用程序上使用 Axios，也可以在简单的 web 应用程序上使用它，但在本文中，我将在一个简单的 web 页面上使用它。</p><p id="64f5" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">让我们开始吧</p><p id="3261" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">使用 index.html 文件和 index.js 文件创建一个项目文件夹，并确保从 HTML 文件和 Axios 链接中引用脚本。</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="50eb" class="lk ig hi lg b fi ll lm l ln lo">&lt;script src=”https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;</span></pre><p id="b1c7" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">然后，您可以将这段代码粘贴到文件主体中:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="da4b" class="lk ig hi lg b fi ll lm l ln lo">&lt;div class=”container pt-5"&gt;<br/>   &lt;button onClick=”getRes()” class=”btn btn-danger”&gt;GET&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="51d0" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><em class="ks">(我正在使用 bootstrap，因此使用了类:BTN BTN-危险和容器)</em></p><p id="082c" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">开始时，我们在屏幕上有一个按钮，它有一个名为 getRes 的函数，用来监听它的点击事件。</p><p id="6898" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">获取请求</strong></p><p id="d90c" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><em class="ks"> In index.js </em></p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="d4c4" class="lk ig hi lg b fi ll lm l ln lo">// GET REQUEST<br/>function getRes() {<br/> axios({<br/>   method: ‘get’,<br/>   url: ‘https://jsonplaceholder.typicode.com/todos'<br/>  })<br/>.then(result =&gt; console.log(result))<br/>.catch(error =&gt; console.error(error));<br/>}</span><span id="9d66" class="lk ig hi lg b fi lp lm l ln lo">// Usually you output res i.e. response to the console but to get data Object we use res.data</span></pre><p id="58e6" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">解释:</strong></p><p id="2f04" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">在 getRes 函数中，我们用语法<em class="ks"> axios({}) </em>调用 Axios。在花括号之间，我们可以选择我们想要使用的数据通信方法，然后指定进行数据通信的 URL(位置)。</p><p id="b279" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">接下来是<strong class="jf hj">”。括号中的 then()" </strong>语句是在请求成功的情况下严格运行的代码，这通常涉及引用已经接收到的数据部分。收到的数据通常像一个 JavaScript 对象，可以保存到任何名称，上面我们选择“结果”</p><p id="0b69" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">接下来是<strong class="jf hj">”。catch()" </strong>语句，在它的圆括号中，是请求失败时执行的代码，这个错误可以在保存到一个变量(在本例中是“error ”)后打印到控制台。</p><p id="a9b0" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">由于上面的链接是有效的，对存储在链接中的待办事项列表链接的请求是成功的，这意味着控制台应该有如下输出:</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es lq"><img src="../Images/10baf9e3c47bedfb8b7d16139b1eae73.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/0*aVRvgDXwvAtPxVxn"/></div></figure><p id="1e97" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">然而，得到这样的响应对我们来说并没有多大作用，我们必须提取我们需要的数据。回到代码，我们可以利用我们对对象的了解，将存储在响应对象中的数据记录到控制台:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="8eab" class="lk ig hi lg b fi ll lm l ln lo">.then(result =&gt; console.log(result.data))</span></pre><p id="c3b5" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">然后我们可以得到一个包含 200 个值的数组。如图所示:</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es lr"><img src="../Images/3ac93d00c38b17122fc7a8fc17740c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/0*NvknNDAd9zI8uVrw"/></div></figure><p id="98bd" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">您并不仅限于记录控制台的输出或输入，您可以选择在您认为合适的时候操作 DOM。继续用这个语句替换您的 then 语句，看看会发生什么:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="2b80" class="lk ig hi lg b fi ll lm l ln lo"><strong class="lg hj">.then(res =&gt; alert(‘you successfully tested a get request with Axios’))</strong></span></pre><p id="830b" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">我不知道你怎么想，但 200 似乎是一个很长的数字，缩短它，这样我们就可以用几行代码来限制接收的数据量。在 Axios 请求的大括号内，我们继续限制数据，如下所示:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="9b0e" class="lk ig hi lg b fi ll lm l ln lo">params: {<br/>   _limit: 5<br/>}</span></pre><p id="122a" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">所以我们的总函数是这样的:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="6a65" class="lk ig hi lg b fi ll lm l ln lo">axios({<br/>  method: ‘get’,<br/>  url: ‘https://jsonplaceholder.typicode.com/todos',<br/>  params: {<br/>    _limit: 5<br/>   }<br/>})<br/>.then(res =&gt; console.log(res))<br/>.catch(err =&gt; console.error(err));</span></pre><p id="0ed0" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">然而，我们不必总是写得很完整，我们可以把它缩短。我们可以这样做:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="9ebb" class="lk ig hi lg b fi ll lm l ln lo">axios.get(‘https://jsonplaceholder.typicode.com/todos?_limit=5')<br/>.then(res =&gt; console.log(res))<br/>.catch(err =&gt; console.log(err))</span></pre><p id="2b37" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">限制写在 URL 中，即。_limit=5 '</p><p id="4cbf" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">向 DOM 输出数据</strong></p><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es ls"><img src="../Images/49644abd83d6fc3c1ef90ed88a3ace94.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/0*jkIix7J8csqRE4PS"/></div></figure><p id="f000" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">为了理解如何将数据输出到 DOM，我们必须查看我们接收到的数据的结构，即我们使用 then 语句请求浏览器登录到控制台的结果，这将有助于理解对象。查看图像，我们可以看到它的状态为 200，这意味着它是一个成功的请求，假设我们只想在控制台中看到 200。所有这些嵌套项的父对象就是我们所说的“res ”,所以如果我们简单地在 then 语句中写入:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="8d96" class="lk ig hi lg b fi ll lm l ln lo">.then((res) =&gt; {<br/> console.log(res.status);<br/> })</span></pre><p id="d626" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">与我们的另一个 then 语句相比，这个结构看起来有点不同，但是如果 Axios 成功的话，这样我们可以编写多个可执行函数。</p><p id="de33" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">运行请求，在您的控制台中您应该看到 200，因此如果我们想在 DOM 中看到 200，我们可以简单地将 res.status 附加到 HTMLelement。例如:</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="d614" class="lk ig hi lg b fi ll lm l ln lo">document.getElementById(‘root’).innerHTML = `${res.status}`<br/>//Or using jQuery shorthand:<br/>$(‘#root’).text(`${res.status}`)</span></pre><p id="7929" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">一个复杂的例子:</strong></p><p id="473f" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">我们同样可以把它写在 then 语句中</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="ad5c" class="lk ig hi lg b fi ll lm l ln lo"><strong class="lg hj">$(‘#content’).html(`<br/>&lt;div class=”card col-7 p-0 mt-4"&gt;<br/>&lt;h5 class=”card-header”&gt;Received from user ${res.data[0].userId}&lt;/h5&gt;<br/>&lt;div class=”card-body”&gt;<br/>&lt;p class=”lead” id=”inner-text”&gt;The todo is ${res.data[0].title}&lt;/p&gt;<br/>&lt;/div&gt;<br/>&lt;div class=”card-footer lead”&gt;Completed: &lt;b&gt;${res.data[0].completed}&lt;/b&gt;&lt;/div&gt;<br/>&lt;/div&gt;<br/>`)</strong></span></pre><p id="1921" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">解释:</strong>这就是 Javascript 的美妙之处，能够在给定的条件下创建 HTML 元素。在这里，我们简单地声明，如果 Axios 请求成功，就应该创建 HTML 元素，并将其与内容一起放入元素中，即上面代码的第 1 行(上面 jQuery 简写的普通等价物是使用 innerHTML。即</p><pre class="ku kv kw kx fd lf lg lh li aw lj bi"><span id="0914" class="lk ig hi lg b fi ll lm l ln lo">document.getElementById(‘content’).innerHTML = ‘’</span></pre><p id="6221" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">尝试一下，注意会发生什么。然而，回想一下，我们在请求中要求 5 个项目，那么如果我们想看到全部 5 个项目呢？</p><p id="6800" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">一个更复杂的例子:</strong></p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lt"><img src="../Images/6d96c978fdd9c8eb730d92314840b866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9Uc-v6xNULb_iw1L"/></div></div></figure><p id="76f2" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">解释:</strong></p><p id="3f9b" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated">代码中充满了注释，这使得它不言自明，我们只需使用 for 循环来创建元素，并为每个实例中的每个数据创建元素。然后，我们将从 axios 请求中获得的数据(分配给已创建的元素)。</p><p id="e619" class="pw-post-body-paragraph kb kc hi jf b jg kd ke kf ji kg kh ki jk kj kk kl jm km kn ko jo kp kq kr jq hb bi translated"><strong class="jf hj">POST 请求和补丁将在本文的第二部分讨论。</strong></p></div></div>    
</body>
</html>