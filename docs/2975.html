<html>
<head>
<title>Creating explosions for your game in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Unity 中为你的游戏制造爆炸</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-explosions-for-your-game-in-unity-889e9c373d14?source=collection_archive---------19-----------------------#2021-05-25">https://medium.com/nerd-for-tech/creating-explosions-for-your-game-in-unity-889e9c373d14?source=collection_archive---------19-----------------------#2021-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="d061" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="8681" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何在 Unity 中使用动画精灵创建爆炸的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/4d1437402f951ac70e95c08b6e1ec353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*T5QaaJxYMJmfx2m_EveVrA.gif"/></div></div></figure><p id="da16" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">目标:在 Unity 的太空射击游戏中为敌人制造爆炸的动画。</p><p id="9f37" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在之前的一篇文章中，我提到了<a class="ae ko" rel="noopener" href="/nerd-for-tech/animating-sprites-in-unity-9d02762bde96">如何在 Unity </a>中激活精灵，在那里我添加了一个可以在游戏中收集的道具。现在是时候动画爆炸，并在敌人被摧毁时触发它们了。</p><h1 id="4c82" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">制造爆炸</h1><p id="3d02" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了制造敌人的爆炸，让我们从打开敌人的预设视图开始:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ln lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/7c5d09ecc932a3f3e2fddd1fc2a1b7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:414/1*YkmlI8N_IIIq-9vJrLpZcA.gif"/></div></figure><figure class="lm jl ls lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/b99e265775779ce41a5b8b195bb68bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1588/format:webp/1*2pAQQDEpYqf5FW5BN3Zukw.png"/></div></figure></div><p id="944a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，在<em class="lt">窗口</em> &gt; <em class="lt">动画</em> &gt; <em class="lt">动画</em>打开一个动画窗口，创建一个新的动画序列:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl lu lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/4c5c78edf43bd3a2f1f5525f0da90405.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/1*TFDP_qwP2U8JtousjCwl7g.gif"/></div></figure><figure class="lm jl lv lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a06f645e34e33ab83032278ad145fb86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*861peJkOVyd-Rpqb_AEIjQ.png"/></div></figure></div><p id="7d1f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，单击“创建”按钮，用适当的名称将新动画保存在您的文件夹中:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lw"><img src="../Images/62b5966cb9ca59a275d8bc4c7248c056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mzNiJc2Lqca_YB2HW6JoEg.gif"/></div></div></figure><p id="5ca2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后将精灵序列中的所有文件拖到动画视图中，将它们指定为关键帧:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl lx lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/4df8924bf603ac33c5002c7b83b7530b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1444/1*Fe0pWWOFYS4rH7YASrpHkQ.gif"/></div></figure><figure class="lm jl ly lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/f52b1d99040e53e97371a10f9d60c458.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/1*YqVZuIZ3wOY3N0jZarQatw.gif"/></div></figure></div><p id="8fc2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">一旦指定，您可以使用播放按钮测试动画，并且您将能够在场景视图中观看它:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es lz"><img src="../Images/79943b17ea5c6a6de3639cd98221fe63.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/1*w9SlxB3YWvrMLrpMnlviAg.gif"/></div></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ma"><img src="../Images/d4223751661abfd97b3d45db25eda60b.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/1*ikyvLcdzDxAz4Ce5_0Hwdw.gif"/></div></figure><p id="aade" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果你运行这个游戏，你会注意到敌人一出现爆炸就开始了，所以我们需要触发敌人脚本中的动画。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lw"><img src="../Images/db8c050a6ce9a64bfed5dc04d1607e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GYlFG3YxgikSce1Lxbh2ag.gif"/></div></div></figure><p id="db2e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">但是首先，让我们选择动画文件并禁用动画循环，以避免多次播放动画:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mb lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/e68492d355bc021e9412ad2ec5055e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/1*QZ6Q8Y3xpM7IYAi333mnzA.gif"/></div></figure><figure class="lm jl mc lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/9a0499a904202579d33fb46610465b3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1432/1*z21M0ZveiNl8qNn5d4gXqg.gif"/></div></figure></div><p id="8d3d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们双击动画的控制器来打开 animator 视图:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl md lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/e55829610956a62d7e9a4acf7b4ff0ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/1*7nESrighzKYvTWXDXakBkg.gif"/></div></figure><figure class="lm jl me lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/4c95ebf802277446e06c1cbd5e54f214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1532/format:webp/1*F-zwTNuQDOxK5swdTOd8oQ.png"/></div></figure></div><p id="8c06" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">正如你在控制器中看到的，敌人一出生，动画就开始播放。要改变它，我们需要添加一个新的空状态，将默认转换指向它:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/4d1a91f93e70d2757c662b7dfe2dfe1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2BoCGKW7qGogTBBzzl9QQA.gif"/></div></div></figure><p id="c3f5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，从新状态创建指向爆炸动画的新过渡:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/01faf8d64b703edfea86179748bdad9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3tDhH4h7i2GkaOm2eB4kow.gif"/></div></div></figure><p id="711d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，打开左侧的参数选项卡，创建一个新的触发参数，作为新转场的触发器:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/7797358dad5f122755c5d78d6357bc44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*t85XuNZg45v32S-GUsQTIA.gif"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx translated">新触发器的名称是<strong class="bd kr"> OnEnemyDeath </strong>。</figcaption></figure><p id="4d66" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">要为指向爆炸动画的过渡指定触发器，我们需要选择它并在检查器中添加一个新条件。此外，不要忘记禁用<strong class="ju hs">退出时间</strong>选项，以避免触发爆炸转换前的等待时间。</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mj lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/2e34fdd9f22777e526ef39909ff70192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/1*x7ECK2QkCBOcko31aMbCoA.gif"/></div></figure><figure class="lm jl mk lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/dfb6df1cb90121600d98299144e2e4b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/1*EW87LLjf_RSgrdhSWmmZHA.gif"/></div></figure><figure class="lm jl ml lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/0267e6872cb9b0a073349f208e553662.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/1*iSfWGudiCLYI3SOIet-6DA.gif"/></div><figcaption class="mf mg et er es mh mi bd b be z dx mm di mn mo translated">通过禁用“具有退出时间”选项，我们可以确保爆炸动画无延迟启动。</figcaption></figure></div><h1 id="a422" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">从代码触发动画</h1><p id="b4f1" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了从代码中触发动画，让我们打开敌人脚本(附加到敌人)，并创建一个新变量来存储对 animator 组件(也附加到敌人)的引用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mp"><img src="../Images/a171c9c64d169553d655e9c245ff6a64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*_NrGW-5h2do9CjhRSTHvog.gif"/></div></figure><p id="44a4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们在<strong class="ju hs"> Start </strong>函数中将引用分配给 animator 组件，如果分配后出现问题，则调试错误:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mq"><img src="../Images/b3f1ff5c8738ca02cecdd394d6951413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Tyc2RRJVR313VTjhv66dqg.gif"/></div></div></figure><p id="2e75" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，在<strong class="ju hs"> OnTriggerEnter2D </strong>方法中，让我们通过使用来自 animator 的<strong class="ju hs"> SetTrigger </strong>方法并使用触发器的名称作为参数来更改触发器值:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/9ba4afd7f75cbab6c95eaf2aa7407750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AbB8vnZCh5fqO2wPqrBIXg.gif"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx translated">如果敌人与玩家或激光发生碰撞，<strong class="bd kr"> OnEnemyDeath </strong>的值会发生变化。</figcaption></figure><p id="4683" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了避免在动画结束前摧毁敌人，让我们在<strong class="ju hs"> Destroy </strong>调用中添加第二个 float 类型的参数，这将为对象的摧毁增加时间延迟。如果我们查看动画视图，我们会注意到动画需要<em class="lt"> 2.38 </em>秒才能完成，所以让我们使用这个数字作为新参数:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ms lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/7c6aaffdb77fce6042806aada1d09c50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*kPZcOrqQT3OVCCCkMYOBUg.png"/></div></figure><figure class="lm jl mt lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/cbf96f463efe759eca012747e57dbddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/1*mAQtbaAL87e2zTLqrAZyBA.gif"/></div></figure></div><p id="d82c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">同样，让我们将敌人的速度设置为 0，这样爆炸动画就发生在一个静止的位置:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mu"><img src="../Images/26caf595d41a72d42c7e57b24ae7c24e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1pFbtIy34x-gmWmTmFA7-A.gif"/></div></div></figure><p id="032a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">让我们创建一个新的函数，以避免在敌人与激光或敌人碰撞时重复相同的线条:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mv lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/ae7be111906379d56c86fe9255980267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/1*SJOxr6QlQC7IrKznlrhAzg.gif"/></div></figure><figure class="lm jl mw lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/1fcbe7a9a3ed17ca6dce85d65b00de4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:436/1*oduawXCZZAD51fbOGL4wxg.gif"/></div></figure></div><p id="5cae" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">由于玩家在失去一条生命后仍然移动，我们需要创造一个新的条件，防止敌人在爆炸时再次造成伤害。我们可以通过使用一个指示敌人是否已经在死亡序列中被消灭的标记来确保玩家不会受到双重伤害:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl mx lo lp lq lr paragraph-image"><img src="../Images/358600cebc8e2579a63159d973837917.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/1*UAmn9sWnDclmhPyDcmuVyg.gif"/></figure><figure class="lm jl my lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/88030a38bd1228b5d5a018a612737a22.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/1*M2L82iabyBc_LHDu0nGSGg.gif"/></div></figure></div><p id="a0d5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，在<strong class="ju hs"> OnTriggerEnter2D </strong>方法中，如果敌人已经被消灭，我们添加条件并从执行中返回:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mz"><img src="../Images/5b984a02b9b3ca434f77465460c52fc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/1*iHkJgyfo_NH81eMg-YacqQ.gif"/></div></figure><p id="08e4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，我们将能够在运行游戏和选择一个衍生的敌人时看到动画控制器在动画师中的流动。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/909db3982f32e4a5a06aceebbaded00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Nd13x92Kp1FJBR_w6yZTgA.gif"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx translated">敌人一开始在空的状态下什么都不做，然后，当触发器被调用时，它转换到爆炸动画。</figcaption></figure><p id="84ee" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们在 Unity 中运行游戏，我们将能够看到摧毁敌人时的爆炸:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/ff982c6b093917f7d36f078b543bd5ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GFGqBAxmJUfEy3WEsO1Tbw.gif"/></div></div></figure><p id="a5a0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就是这样，你可以在 Unity 中为你的游戏制造爆炸！:d .我会在下一篇文章中看到你，在那里我将展示如何在 Unity 的太空射击游戏中显示伤害。</p></div><div class="ab cl na nb gp nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="hb hc hd he hf"><blockquote class="nh ni nj"><p id="17b4" class="js jt lt ju b jv jw is jx jy jz iv ka nk kc kd ke nl kg kh ki nm kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>