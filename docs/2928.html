<html>
<head>
<title>A Tale of Elephants</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">大象的故事</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-i-grew-an-engineering-productivity-tool-to-impact-thousands-of-engineers-at-amazon-and-how-28a990091207?source=collection_archive---------4-----------------------#2021-05-24">https://medium.com/nerd-for-tech/how-i-grew-an-engineering-productivity-tool-to-impact-thousands-of-engineers-at-amazon-and-how-28a990091207?source=collection_archive---------4-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9209" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我如何开发一个工具来影响亚马逊的数千名工程师</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/9a91eee9d07f945a2464dd8e0e7a7ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*3Upzt01GzyTXijsfT4xz7g.png"/></div></figure><p id="8ddd" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我今天在谷歌担任高级工程师时做的很多事情，以及我多年前在亚马逊担任首席工程师时做的很多事情，本质上都是让人们做事情。是人的问题，不是技术问题，是你要最努力解决的问题，是影响最大的问题。开发有效影响的工具对我来说至关重要，因为我选择了一条非管理型的领导道路，在这条道路上，我没有权威。</p><p id="3452" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在我职业生涯的早期，我专门阅读技术书籍。这些天来，我把我的阅读时间分成两部分:( a)技术书籍;( b)商业书籍;( c)关于人类行为的书籍。在第三类中，我最近读了奇普·希斯(斯坦福大学教授)和他的兄弟丹·希斯(杜克大学教授)写的《T2<strong class="jh hj"><em class="kc">开关:当改变很难时如何改变事情》。这是一本令人惊奇的读物。<strong class="jh hj"> <em class="kc">开关</em> </strong>提出改变行为的思维框架。我们倾向于认为有两种工具可供我们使用:胡萝卜<strong class="jh hj">和大棒</strong>。引诱某人做某事，或者如果他们不做就惩罚他们！交换机框架比这复杂得多。最让我吃惊的是，我意识到，在从未听说过这本书的情况下，我一直在有组织地遵循他们的公式，而且主要是凭直觉。对我来说效果很好。</em></strong></p><p id="494f" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><em class="kc">我创建并发展了亚马逊的内部负载和性能测试平台(TPSGenerator)。我从 2013 年开始，到 2020 年我离开的时候，它已经被成千上万的人用于业务关键应用程序，每秒运行数亿次交易，由一个了不起的工程师团队维护。它防止了数百起运营问题，并节省了数百万美元。</em></p><p id="f68f" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我今天想花点时间告诉你关于<em class="kc"> Switch </em>框架的事情，并给你一个具体的案例研究:我是如何(不知不觉地)应用这些概念来创造和发展一个东西，从一个周末和晚上的宠物项目，到今天的样子。</p><p id="cd64" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我的故事从 2012 年开始。在黑色星期五，一年中最繁忙的购物日，我负责的服务由于负载出现了操作问题，它影响了 Amazon.com 的整个运营。这是一次数百万美元的停电。它在我身上。我很羞愧，所以我开始赎罪。我花了几个月的时间来理解不断增加的负载如何大规模地改变分布式系统，并创建代码和基础设施来模拟高保真负载以进行测试。我发现并阻止了 2013 年黑色星期五的严重运营问题，所以我在某种程度上挽回了自己。但那时，我已经顿悟了。所有工程师都打算对他们的服务进行负载测试。然而大多数人都没有，因为他们没有时间——创建进行测试的基础设施花费了太长时间。好吧，所以人们没有这样做，因为它花了 3 个星期。如果花了 3 天呢？如果花了 3 个小时呢？我想，在某个时候，我会发现一个转折点，一个重要的任务，但由于成本原因很少完成，可能会变成另一件每天都发生的事情，不费吹灰之力。</p><p id="a0eb" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">所以我创造了那个东西。疯狂地编码，数万行 Java，大部分是在周末和晚上。我这样做是为了好玩，但我觉得我创造了一些特别的东西，我希望别人也喜欢它。一些早期采用者理解这一点，并看到了这一愿景，有几个人甚至和我一起构建了这一愿景。我们最终将它开放给全亚马逊用户。起初，采用是适度的。到处都是随机的工程师。我自豪地记录下来，有一天我把它给我的副总裁看。我想那时我已经有 25 个顾客了。卢皱着眉头，不为所动，告诉我“你的采用曲线是线性的。这是狗屎。指数级的时候再来！”他很直率，但他是个很棒的人，他是对的。我需要想得更大，采取更大胆的措施。</p><p id="dae2" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这里是<em class="kc">开关</em>发挥作用的地方。我本质上面对的是一个非技术性的挑战:我需要人们去改变，而改变是困难的。<em class="kc">开关</em>说:想象一个<strong class="jh hj">骑手</strong>，在<strong class="jh hj">路径</strong>上引导一只<strong class="jh hj">大象</strong>。你基本上有三个维度可以影响。你可以引导骑手，你可以激励大象，或者你可以塑造道路。骑手是我们大脑的逻辑部分:它是理性的，它深思熟虑和分析。大象是我们的情感:它的行为基于本能、痛苦或快乐。谁是领导者？骑手 150 磅，大象 10000 磅。所以骑手提供方向，大象提供能量。他们必须在某种程度上合作。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kd"><img src="../Images/4a9dfd909120075b83bf924586b7a328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e0e2j9kDa2qzHVlQGe_HJA.png"/></div></div></figure><h1 id="aace" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated"><strong class="ak">指挥骑手</strong></h1><p id="4ca2" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">让我们谈谈第一个方面。<strong class="jh hj">指挥骑手</strong>的工具有三个:<em class="kc">【a】发现亮点【b】脚本关键动作【c】指向目的地。</em></p><p id="14c1" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">要理解<strong class="jh hj">发现亮点</strong>，想象一下一个教室里有一群行为不端的孩子。老师可以选择惩罚表现不好的孩子，但这很累人，而且通常不会改变任何人的行为。或者，老师可以选择关注表现良好的学生，突出他们的成就。找到亮点可以让你不再关注“什么出了问题，我该如何修复它？”到“什么在起作用，我怎样才能做得更多？”就我而言，我坚持不懈地向任何愿意听我说话的人谈论我的负载框架。大多数人会礼貌地微笑和点头，但不会采取任何行动去采纳它。这有点令人泄气。但有些人会。其中一小部分人会真正喜欢它，并通过使用它来完成一些令人敬畏的事情。比如，意识到他们的服务远远超过了规模，并减少了专用于 it 的资源(从而节省了资金)，或者意识到他们的服务低于规模，并解决这个问题(从而减少了运营痛苦)。我开始收集这些成功的故事，最终我得到了 20 页的满意的顾客说“我用了你的东西，太棒了，这是我的故事！”我在我的产品的主文档页面上添加了一个链接，这样其他人就可以看到了。还有，这是我升职的好神器！</p><p id="26de" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了理解<strong class="jh hj">脚本的关键步骤</strong>，考虑市场中的两个摊位。一种有 6 种口味的果酱。另一个摊位有 18 种口味的果酱——6 种和另外 12 种。哪个摊位卖更多果酱？令人惊讶的是，有 6 种口味的摊位卖的果酱是有 18 种口味的摊位的 10 倍。这怎么可能呢？好吧，当道路不确定时，骑手有分析麻痹，大象走最熟悉的路(往往是现状:什么都别做！).在我的例子中，我意识到如果你想对你的服务进行负载测试，你有几十个选择，内部的和外部的，具有不同程度的质量、支持和特性集，所以这对于普通的入门级工程师来说是非常混乱的，他们只想尽快完成任务，继续他们忙碌的生活。我和我的一些内部“竞争对手”一起喝咖啡，甜言蜜语地说服他们与我合作，联合起来，创造双赢局面，简化局面。不是每个人都同意联合起来。一个特别顽固的“竞争对手”出现在一个内部工具展览会上，带着一个巨大的比较表，有两栏:他的产品和我的产品。他提供了相当多的错误信息(也许是故意不知道)。我创建了一个更全面、更客观的比较表，让我周围的几十个负责人签字同意，并通过电子邮件将其发送给“竞争对手”以获得批准，本质上是说“我认为表格是一个很好的主意，因为它有助于工程师选择，让我们为我们的工程师提供正确的数据！”当他们发了 3 封邮件后不理我，我就上报给他们的主管批准(他批准了)。我没有除掉那个竞争对手，但我写下了关键的步骤，这样前景就不会让潜在客户如此困惑。我的工具的入口页和他们的工具的入口页都有一个到完全相同的商定对照表的链接。</p><p id="c9b6" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">要理解<strong class="jh hj">指向目的地</strong>，想一想 JFK，他在 1962 年提出了“到本十年末，我们将把人送上月球”的愿景这是一个大胆的设想，但它确实激励了一代美国宇航局的工程师，1969 年我们登上了月球。1980 年，比尔·盖茨说:“每张桌子上和每个家庭里都有一台电脑”，这句话激励了 90 年代的几代微软工程师，包括我自己。指向目的地有两个作用,[a]它向骑手显示你要去哪里,[b]它向大象显示为什么旅程是值得的。我不喜欢带着两个小孩在西雅图上飞机，也不喜欢忍受在达拉斯换机场，但我知道几个小时后我会坐在牙买加的热带海滩上，品着鸡尾酒。在我工作的具体案例中，我指向明信片的目的地“不超过 2 天的工作来为您的团队启动并运行负载测试。”这对那些不想花上一周又一周时间做这件事的工程师来说很有吸引力。</p><h1 id="71ae" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated"><strong class="ak">激励大象</strong></h1><p id="8955" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">好了，让我们转到激励大象。有三个工具可以做到这一点:(a)找到感觉，(b)缩小变化，(c)培养你的员工。</p><p id="d65b" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">要理解<strong class="jh hj">找到感觉</strong>，想想你见过的每一场禁烟运动。吸烟者非常清楚吸烟对你有害。你不需要向骑手解释这一点——你需要直接吓唬大象。所以反吸烟运动追求的是情感上的回应。它们向你展示了吸烟十年后你的肺实际上是什么样子。或者是一个切除了喉头并通过人工发声盒说话的吸烟者。就我而言，我追求的是自豪感。工程师以效率为荣:它已经融入了我们的大脑和培训。作为一名工程师，当您避免了因规模不足而导致的运营问题，或者能够减少过度扩展的服务的硬件占用空间时，您会感到自豪。通过突出那些成功的故事，我不仅找到了亮点，还帮助潜在客户找到了感觉。我认为这些成功的故事鼓舞并激励了一代亚马逊人采用我的小工具。</p><p id="a83b" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了理解<strong class="jh hj">缩小变化</strong>，想想你能让你的孩子打扫他们房间的方法。他们一团糟，任务看起来令人生畏，所以他们从不开始。但如果你说:“花十分钟捡起二十样东西！”这是简单可行的，对吗？大象很容易被大任务击垮，因为它讨厌没有直接回报的事情。所以你通过让人们感觉他们比他们想象的更接近终点线来激励他们！在我的例子中，我用多种方法缩小了变化。第一，我专注于(坚持不懈地)简化客户入职。最初，启动并运行负载测试环境的过程相当复杂；然后是五个文本字段和几次点击。同样，最初，您必须为负载生成器编写大量代码；然后，我引入了 Java 注释来处理一些样板文件；最终，我使我的平台与 TestNG 和 JUnit 完全兼容，所以如果你有预先存在的代码，你可以重用它。我还通过提供两个小时的实践训练营来缩小变化:你进来，听我说，做一些实践练习，两个小时后带着工作负荷测试出来。拜托，谁连自己生命中的两个小时都腾不出来呢？我通过寻找其他也能教授这门课程的人，扩大了训练营的规模；当我离开亚马逊的时候，我们已经给 15 个国家的 1400 人上了这门课。</p><p id="c972" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">所以你已经有了人，和你希望他们承担的改变。如果你不能缩小变化，你可以<strong class="jh hj">培养你的员工</strong>。JFK 出色地做到了这一点:“不要问你的国家能为你做什么，问问你能为你的国家做什么”这正是我们的国家所需要的灵感。人类是群居动物。当面对一种情况时，我们问自己三个问题:[a]我是谁？[b]这是什么样的情况？最重要的是，像我这样的人在这种情况下会怎么做？所以我需要吸引我的潜在客户成为那种会对他们的产品进行负载测试的人。这很容易。我反复重复的信息是:你是亚马逊的工程师。亚马逊雇佣了一些世界上最聪明的工程师来解决一些世界上最难的扩展问题，亚马逊人以负载测试他们的产品为荣，以确保它按照亚马逊产品应该的方式扩展！我也非常坦率和频繁地讲述了我的故事，我没有对我的产品进行负载测试，它在一年中最繁忙的购物日悲惨地失败了；“不要像我一样，做另一个人！”是一个强烈的信息。</p><h1 id="fe27" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">塑造道路</h1><p id="c6c2" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">所以我们谈论了骑手和大象。这里的第三维是<strong class="jh hj">塑造路径</strong>。就像在其他二维空间一样，你可以做三件事。</p><p id="0e2b" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">首先，你可以<strong class="jh hj">调整环境</strong>。我举个例子说明一下。当我去印度旅行时，我总是被繁忙的十字路口的动态所吸引。有大量的人类:汽车、人力车、骆驼、大象、自行车、摩托车、行人，都以某种方式在混乱中导航。不是特别整齐。然后在印度背包旅行了几个星期后，我回到了美国，街道的秩序让我震惊。我们都是人类；为什么一组人的行为与另一组人完全不同？想想美国所有改变环境的小事:路灯、停车标志、转弯车道、当你想转弯时使用转向灯的期望、自行车专用车道、行人人行道、闯红灯摄像头和乱穿马路收费。通过调整人们的环境，你可以在很大程度上让他们以某种方式行事。至于如何转化为我的负载测试平台，虽然最初它是通过命令行工具执行的，但我很快将其与亚马逊的 CI/CD(持续集成/持续部署)工具、<em class="kc">管道</em>集成在一起，这样负载测试就可以很容易地作为批准步骤添加到某人的开发发布周期中。管道已经编排了整个周期:您检入一段代码，它将自动构建，它将自动部署到一个试运行环境，集成测试将针对试运行环境自动运行，如果它们通过，代码将被部署到生产环境。成千上万的亚马逊开发者已经使用了 Pipelines。为什么不将负载测试作为另一个批准步骤呢？管道提供了配置测试的 UI、运行的调度、运行测试的硬件资源，并保存和呈现日志。它以一种与 Amazon 上运行的集成测试相同的方式进行测试，所以开发人员习惯了这种模式。我的负载测试平台现在也很容易被发现，因为它变成了主流 UI 中的复选框。我调整了环境。</p><p id="c2aa" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">控制路径的第二个方法是<strong class="jh hj">养成习惯</strong>。这是非常强大的，因为当我们处于行为自动驾驶时，骑手的工作更少。我举个例子说明一下。许多年前，我们的团队遵循敏捷，我们努力争取准时参加会议。我们的 scrum master 买了一只会飞会叫的猴子。它本质上是一个填充动物，你可以把它扔过房间，当它飞起来的时候，它会发出可怕的猴子尖叫。第一天，我们都吓了一跳，从椅子上跳了起来。“起立！”他喊道。我们都很感激。一周后，他训练我们所有人一听到噪音就起床去开会——我们 100%的人总是准时！至于这与我的装载平台案例研究有什么关系，将它集成到 Amazon Pipelines 做了一些令人惊奇的事情。以前，负载测试是大多数亚马逊服务一年最多做一次的事情，通常比工程师预期的高峰流量早一点。然后他们会忘记它的存在。因为这是一项不常见的任务，所以做起来很痛苦。我想，如果我能把这变成一件无时无刻不在发生的事情，那将会改变文化，培养习惯。将它作为一个批准步骤添加到 CI/CD 中，使我的产品变成了一个<em class="kc">粘性</em>产品。以前，它是命令行工具，只有当人们记住时才运行；之后，工程师可以阻止任何对产品吞吐量或延迟产生负面影响的代码签入。</p><p id="9116" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">最后，<strong class="jh hj">召集牛群</strong>。人类是群居动物。我们做事是因为社区里的其他人也这样做。你知道“指定司机”这个术语吗？这实际上是一场广告战。在 1988 年至 1992 年间，他们成功地在 160 个黄金时段节目中嵌入了关于人们是指定司机的故事情节，而不是直接用广告告诉人们不要酒后驾驶，从而将酒后驾驶死亡人数从 24k/年降至 18k/年。你在一个接一个的节目中听到了“指定司机”这个词，你看到人们在你最喜欢的节目中表现得负责任，所以你决定也表现得负责任。对我来说，聚集群体以多种形式来<em class="kc">建立社区</em>。我创建了一个电子邮件列表，供人们交流关于负载测试的想法。我创建了一个成功故事页面，我的客户可以在其中添加他们的快乐发现。我做了一个令人垂涎的负载测试补丁，可以附加到亚马逊 phonetool 的用户信息中。我在每一次内部会议上都谈到了负载测试。我创建了一个负载测试实践训练营，我们在过去几年里向一千多名工程师展示了这个训练营。而且，我热情地鼓励任何看起来有热情的人合作并为框架添加特性。这将负载框架从“卡洛斯制造的东西”转移到了“我们共同拥有的东西！”。几十个工程师在空闲时间贡献了惊人的功能，我也建立了惊人的友谊。这个充满活力的社区是催化剂。参与社区的人越多，成为社区的一部分就越有吸引力。当人们为我的平台制造迷因时，我就知道它成功了！</p><h1 id="18f2" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">摘要</h1><p id="8c02" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">我(和一个了不起的工程师团队)必须解决大量有趣的技术挑战，才能在亚马逊规模上运行负载测试框架。但是，即使当我写下世界上最美丽、最完美的代码时，乌云已经散去，一缕阳光从天而降，如果我不明白这也是人类的问题，我的工具就永远不会成功。有趣的是，我采取的步骤，有些随意，有些有机，因为他们觉得正确，实际上符合一个深思熟虑的思想框架，比胡萝卜加大棒要复杂得多，比我聪明得多的人花了一生的时间研究心理学。我们往往会忘记，即使是软件公司也需要心理学的一点帮助:转变文化，帮助思想坚持，改变人们的行为。</p></div></div>    
</body>
</html>