<html>
<head>
<title>Using react-webcam in a function component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在功能组件中使用 react-webcam</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/using-react-webcam-in-a-function-component-448fa8de4fd9?source=collection_archive---------2-----------------------#2021-04-08">https://medium.com/nerd-for-tech/using-react-webcam-in-a-function-component-448fa8de4fd9?source=collection_archive---------2-----------------------#2021-04-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="862b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的一个项目中，我一直在寻找在 React <strong class="ih hj">功能组件</strong>中使用<a class="ae jd" href="https://www.npmjs.com/package/react-webcam" rel="noopener ugc nofollow" target="_blank"> react-webcam </a>的方法。虽然我找到了一些关于使用这个包的有用的帖子，但是我找不到一个可以回答我关于在 React 函数组件中使用它的问题的帖子。这让我写了这个小帖子，希望有人能从中受益！</p><p id="6eba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><h2 id="4507" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">安装软件包</h2><p id="c826" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">您可以根据您的软件包管理器使用以下命令之一安装 react-webcam。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="0fea" class="je jf hi kj b fi kn ko l kp kq">//With Yarn<br/>Yarn add react-webcam</span><span id="a8a7" class="je jf hi kj b fi kr ko l kp kq">//With npm<br/>npm install react-webcam</span></pre><h2 id="147c" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">引用包</h2><p id="a6ec" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">您可以按如下方式引用该包:</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="9831" class="je jf hi kj b fi kn ko l kp kq">import Webcam from 'react-webcam';</span></pre><h2 id="9fcd" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">编写函数组件</h2><p id="e0a4" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">我不会深入讨论关于编写一个 React 函数组件的每个细节，因为我相信你已经很熟悉了。此外，我不会涵盖 react-webcam 的一般用法，因为它的作者<a class="ae jd" href="https://www.npmjs.com/package/react-webcam" rel="noopener ugc nofollow" target="_blank">在这里</a>对它进行了很好的描述。不过，我会将我的函数组件的源代码粘贴在这篇帖子的底部，以便您可以看到实现。</p><p id="6cea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里需要强调几件事:</p><h2 id="b80f" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">开始和停止网络摄像头馈送</h2><p id="4428" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">如果我们需要通过点击按钮或类似事件来切换网络摄像头，那么我们必须有条件地渲染网络摄像头元素。我们可以借助布尔状态变量来实现这一点。请参见下面的代码片段:</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="e425" class="je jf hi kj b fi kn ko l kp kq">&lt;div className="camView"&gt;<br/>{<br/>  <strong class="kj hj">isShowVideo</strong> &amp;&amp;<br/>  &lt;Webcam audio={false} ref={videoElement} videoConstraints=        {videoConstraints} /&gt;<br/>}<br/>&lt;/div&gt;</span></pre><p id="de1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，我们可以实现一个绑定到按钮的 click 事件的事件处理程序，然后更新状态变量来切换网络摄像头元素的条件呈现。然而，在我的例子中，我使用了两个按钮分别启动和停止凸轮。</p><p id="9d1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个实现，我们必须使用<strong class="ih hj"> useState </strong>和<strong class="ih hj"> useRef </strong>钩子。我们需要布尔状态变量的 useState 钩子，我们用它来有条件地渲染网络摄像头。useRef 挂钩用于获取事件处理程序中的网络摄像头元素，以停止摄像头馈送。</p><h2 id="7f14" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">最后，让我们看一下代码</h2><figure class="ke kf kg kh fd ks"><div class="bz dy l di"><div class="kt ku l"/></div></figure><p id="f86a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编码快乐！！</p></div></div>    
</body>
</html>