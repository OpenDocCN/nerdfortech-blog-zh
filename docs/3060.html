<html>
<head>
<title>Best Approach To Security in Azure DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure DevOps 中实现安全性的最佳方法</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/best-approach-to-security-in-azure-devops-954957d2a246?source=collection_archive---------16-----------------------#2021-05-28">https://medium.com/nerd-for-tech/best-approach-to-security-in-azure-devops-954957d2a246?source=collection_archive---------16-----------------------#2021-05-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fef716fd114ee2f0f50d5d29a40fb25e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y-bPDvSCekG5tGu0"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来源:无服务器安全</figcaption></figure><p id="c777" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">根据研究，当一台裸机暴露在没有保护或防火墙的互联网上时，会有恶意扫描器在一分钟内进入，再过 2 分钟，更多的黑客和 4 分钟，你就会受到恶意软件的攻击，所以你必须有安全直觉。凭个人直觉，工程师/专家必须考虑以下几点:</p><ul class=""><li id="1ce7" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated"><strong class="iw hj">默认拒绝</strong></li><li id="933b" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">最少特权</strong></li><li id="0394" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">分割</strong></li><li id="c004" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">加密(数据、网络流量等)</strong></li><li id="50eb" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">测井</strong></li></ul><p id="3301" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Azure 有一个安全中心，帮助评估应用程序架构的安全标准。注意仪表板，我们必须检查安全策略，以便注意我们的架构。Azure 安全中心是 Azure 安全的心脏。您想要查找的任何安全相关信息都可能包含在安全中心的某个部分中，即使它不包含在仪表板中。</p><p id="7bf4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">默认情况下，许多安全选项都是打开的，因此如果您让虚拟机运行一段时间，您肯定会看到警报突然出现。此外，您可以检查资源是否符合 Azure Security Centre 中的策略，并列出需要完成的任务以提高合规性。虽然作为 DevOps 工程师，我们不会在 Azure 安全中心花太多时间，但我们知道警报、策略失败和其他安全信息出现在哪里是谨慎的。</p><p id="8eb7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这些信息也包含在 CLI 中，但是因为它非常适合以图形方式显示，所以我们建议使用门户，除非您正在编写安全自动化。和往常一样，你应该可以自由地自己玩 Azure CLI 帮助消息会指导你。</p><h1 id="a72f" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">Azure 策略的安全性</h1><p id="bd2d" class="pw-post-body-paragraph iu iv hi iw b ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated">Azure 策略与云平台本身一样重要，并且与 DevOps 非常相关。它不仅仅是一个安全工具，还可以加强组织结构和法规遵从性。它可用于管理成本，确保安全最佳实践，并在出现问题时缩小搜索范围，以及帮助制定默认和自定义策略。在 DevOps 中，Azure 策略对于在执行行业和业务标准以及最终合规性方面提供技术安全性和一致性至关重要。让我们看一看。</p><p id="b0df" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">作为 DevOps 专家，以下列出了一些不容忽视的要点:</p><ul class=""><li id="95a4" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">它们为我们提供了一种通过限制特定资源来管理成本的方法。</li><li id="c281" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">由于支持策略的安全架构，我们可以更快地确定问题的范围、来源和解决方案。</li><li id="4cf0" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">通过启用策略的配置管理，可以防止意外甚至不需要的配置更改。</li></ul><h1 id="0cd9" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">自定义策略定义</h1><p id="086d" class="pw-post-body-paragraph iu iv hi iw b ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated">Azure 策略是用 JSON (JS 对象表示法)编写的，可以部署在门户或 CLI 中。策略有两种模式:</p><ul class=""><li id="0234" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated"><strong class="iw hj"> <em class="lj">索引:</em> </strong>这仅评估支持标签和位置的资源类型。</li><li id="c848" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj"> <em class="lj"> All: </em> </strong>这将评估资源组、订阅和所有资源类型。</li></ul><blockquote class="lk"><p id="ee19" class="ll lm hi bd ln lo lp lq lr ls lt jr dx translated">然而，规则本身遵循一个简单的 if-then 结构，其中如果满足策略规则中的<em class="lu">条件，则会出现在<em class="lu">“then”</em>块中指定的效果。</em></p></blockquote><p id="b05c" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">如果您有兴趣了解更多关于策略定义的信息，那么我建议您查看这里的文档<a class="ae ma" href="https://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="cec5" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">网络安全组</h1><p id="1a4c" class="pw-post-body-paragraph iu iv hi iw b ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated"><strong class="iw hj">网络安全组(NSG)</strong>是一组网络规则的集合，这些规则规定了 Azure 中进出资源的流量。创建 NSG 时，您可以进行许多自定义，其中包括:</p><ul class=""><li id="7e82" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated"><strong class="iw hj">名称</strong></li><li id="2a96" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">优先级:范围从 100–4096</strong></li><li id="830b" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">来源地或目的地:可以考虑个人 IP 或 CIDR </strong></li><li id="0bb3" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">协议:所有的网络协议</strong></li><li id="1732" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">方向:告诉我们该规则是否适用于进入网络的流量</strong></li><li id="6be9" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">端口范围:3000–30010</strong></li><li id="1999" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hj">允许或拒绝动作=允许</strong></li></ul><h1 id="986d" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">Azure 安全最佳实践</h1><p id="0885" class="pw-post-body-paragraph iu iv hi iw b ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated">在使用 Azure DevOps 几年后，我在考虑安全性的同时，提出了一个全面的最佳实践列表。其中一些包括:</p><ol class=""><li id="6d3d" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr mb jy jz ka bi translated">将身份视为安全边界(如验证和访问。您必须集中身份管理)。</li><li id="f159" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr mb jy jz ka bi translated">不要对一个身份有两个引用。</li><li id="1d02" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr mb jy jz ka bi translated">启用单点登录，以便用户可以使用相同的凭据访问资源，这样您就可以轻松控制一切。</li><li id="f626" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr mb jy jz ka bi translated">必须有强大的网络控制来跨网络连接虚拟机并控制虚拟机的流量。</li><li id="82d4" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr mb jy jz ka bi translated">当资源属于最强的安全区域时，必须对分段子网进行逻辑控制。</li><li id="e3d8" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr mb jy jz ka bi translated">在设置基础结构时，分配比所需更多的网络空间。</li><li id="67c4" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr mb jy jz ka bi translated">不要给 NSG 规则分配宽泛的范围，也不要特别注意谁可以访问系统中的什么。</li><li id="f782" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr mb jy jz ka bi translated">最后，我想说的是探索 Azure 安全中心的好处。</li></ol><p id="a5ce" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们已经在这里讨论了一些关键的最佳实践。如果你想更深入地挖掘，微软在 Azure 文档中提供了额外的<a class="ae ma" href="https://docs.microsoft.com/azure/security/fundamentals/best-practices-and-patterns?WT.mc_id=udacity_learn-wwl" rel="noopener ugc nofollow" target="_blank">最佳实践</a>。</p><blockquote class="lk"><p id="de6b" class="ll lm hi bd ln lo mc md me mf mg jr dx translated">记者:我写的所有东西都纯粹是我多年来的经验。</p></blockquote><p id="437c" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">现在，请记住，这篇文章不仅仅是为软件领域的专家准备的，即使是新手也可以加入并学到很多东西，这就是为什么我试图用外行和专业的术语把一切都讲清楚，所以如果你有任何问题，可以通过 <a class="ae ma" href="https://twitter.com/SamuelArogbonlo" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hj"> Twitter </strong> </a> <strong class="iw hj">联系我，或者通过</strong><a class="ae ma" href="https://github.com/samuelarogbonlo" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">GitHub</strong></a><strong class="iw hj">找到我。</strong></p><p id="1104" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">感谢阅读❤️ </strong></p><p id="edc9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你对这个话题有任何想法，请留下评论——我乐于学习和探索知识。</p><h1 id="b868" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">我可以想象这个帖子有多有用，请留下掌声👏下面几次以示对作者的支持！此外，如果你需要一个咨询和自由职业的 DevOps 工程师，我就是你要找的人；雇用我，让我们完成这个项目。</h1></div></div>    
</body>
</html>