<html>
<head>
<title>Unity - Create a countdown system</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity -创建一个倒计时系统</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/unity-create-a-countdown-system-cf679f1f83dc?source=collection_archive---------14-----------------------#2021-05-23">https://medium.com/nerd-for-tech/unity-create-a-countdown-system-cf679f1f83dc?source=collection_archive---------14-----------------------#2021-05-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="71f5" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">一个关卡中的时间限制？没问题！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f070f566317d325964983cfc4a7e6c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GEpeDevZxUU21rJO"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jn" href="https://unsplash.com/@aronvisuals?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aron 视觉</a>拍摄的照片</figcaption></figure><p id="364b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">倒计时器在今天的游戏中非常普遍。让它成为有时间限制的任务，有时间限制的迷你游戏，或者给玩家增加压力。假设一个难度很大的 RPG boss，必须在限定时间内被击败，否则玩家已经输了。它们可以用于很多事情。</p><p id="3260" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们试着创造一个！</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="221c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">一、倒计时系统工作的基本思路<br/> </strong>要在 Unity 中创建一个倒计时系统，我们需要创建一个时间变量。<br/>由于时间可以是任何值(比如 0.46 秒)，我们需要的变量类型是一个<em class="kr"> float </em>。为了进行倒计时，我们需要用<em class="kr"> Time.deltaTime </em>减去最后一帧的时间。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="7fa7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">二。使用 Time.deltaTime <br/> </strong>制作一个 Unity 中的基本倒计时定时器的方法很简单。我们在上一段已经讨论过了！</p><p id="1733" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">把它转换成代码，它看起来像这样:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ks"><img src="../Images/e7232b79f048c2c3eef4cb681efc3c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pU_Bcv4qi7ZxC1Cfi8fk9A.png"/></div></div></figure><p id="e5d2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">只要剩余时间大于 0，计时器将继续运行:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kt"><img src="../Images/ea34fb82ec6f0be17c5dd9458d2cdc11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DUjI0r0l-KePEIuqHpLEmQ.gif"/></div></div></figure><p id="445b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可能已经注意到最后一项是负的。我来解释一下。当上面带有 0.0002 的条目大于 0 时，它再次运行。因为帧时间比值长一点，所以它进入了负区域，但之后就停在那里了。</p><p id="354d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想在倒计时达到 0 后添加一个动作，你可以通过使用<em class="kr"> else-statement </em>轻松完成。让我们打印出“计时器已结束！”。我们只需要添加一个<em class="kr">调试。Log() </em>行为:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ku"><img src="../Images/792fa1052c85c631a213c7561ca2fab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_whcHtzzFfvBIJ9SX-vmsg.png"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="1d11" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">三。防止垃圾邮件！</strong> <br/>然而，通过现在运行应用程序，我们可以注意到这里的一个小问题。每一帧的信息都会被打印出来；每秒 60 次左右！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kt"><img src="../Images/d7da9bc42699973cfab5ec70973e33db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3Y5drDuPATY0H-fh2gpJhg.gif"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">注意右边上升的数字</figcaption></figure><p id="6ee5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是不用担心。有一个简单的方法可以解决这个问题。只需创建一个 bool 值，它将被设置为 if 语句中的一个条件。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kv"><img src="../Images/b10f67541b5d90d03deb1f28038e7182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aEZfCpCz31l81lsJH2O9wg.png"/></div></div></figure><p id="e60a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们过一遍:</p><ul class=""><li id="91a3" class="kw kx hi jq b jr js ju jv jx ky kb kz kf la kj lb lc ld le bi translated">我们添加了一个 bool 值，当应用程序启动时，该值将被设置为 true。这表示计时器正在运行。</li><li id="2f9b" class="kw kx hi jq b jr lf ju lg jx lh kb li kf lj kj lb lc ld le bi translated">只有当倒计时器正在运行时，倒计时时间才会减少。</li><li id="f138" class="kw kx hi jq b jr lf ju lg jx lh kb li kf lj kj lb lc ld le bi translated">如果剩余时间小于零，倒计时不再运行，时间将强制停留在 0。如果你想稍后在 UI 文本框中显示时间，这是一个重要的步骤。如果不添加这一行，负值可能会显示在 UI 元素内部。</li><li id="ed1f" class="kw kx hi jq b jr lf ju lg jx lh kb li kf lj kj lb lc ld le bi translated">因为如果计时器正在运行，消息就会被打印出来，所以现在只有一个条目进入控制台</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/43a057d85428bc1b87160e03b530dfce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5JVgXMOuRHOEiSDOSq1NgQ.gif"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="7885" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">四。将浮点时间转换成分和秒<br/> </strong>现在，为了得到分和秒的分离值，我们必须转换该值。为此，分钟和秒钟必须以不同的方式计算。</p><ul class=""><li id="4746" class="kw kx hi jq b jr js ju jv jx ky kb kz kf la kj lb lc ld le bi translated">要计算分钟数，将时间变量除以 60</li><li id="d197" class="kw kx hi jq b jr lf ju lg jx lh kb li kf lj kj lb lc ld le bi translated">要计算秒，用<strong class="jq hj">模运算符(%) </strong>将时间变量除以 60</li></ul><p id="2667" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了从浮点值中得到完整的数字，使用<em class="kr"> FloorToInt </em>向下舍入每个值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ll"><img src="../Images/d5c42740bc090f795b83b039611a47e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mXu14yBYD66W4M5uct4Abg.png"/></div></div></figure><blockquote class="lm ln lo"><p id="d316" class="jo jp kr jq b jr js ij jt ju jv im jw lp jy jz ka lq kc kd ke lr kg kh ki kj hb bi translated"><strong class="jq hj">信息:“取模”运算符</strong></p><p id="b24a" class="jo jp kr jq b jr js ij jt ju jv im jw lp jy jz ka lq kc kd ke lr kg kh ki kj hb bi translated">模运算是一个函数，它返回一个数除法运算后的余数。</p><p id="ee77" class="jo jp kr jq b jr js ij jt ju jv im jw lp jy jz ka lq kc kd ke lr kg kh ki kj hb bi translated">例 1: 62 % 60 返回 2 <br/>例 2: 125 % 60 返回 5 <br/>例 3: 32 % 60 返回 32</p></blockquote></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="189d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">五.在 UI 文本框<br/> </strong>中显示倒计时要开始，只需通过<em class="kr">右键单击层次结构&gt; UI &gt;文本</em>来创建一个文本框。在脚本中，您需要包含 Unity UI 库，这是通过使用 UnityEngine 添加<em class="kr">来完成的。UI；</em>在你剧本的最顶端。然后创建一个文本类型的变量，并给它一个可识别的名称。</p><p id="04d9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">脚本的第一行应该是这样的:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kv"><img src="../Images/b0034aaf8e3ad72af32933dd35ce602d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5_uCH7YpzR9mGRGw58Ib3g.png"/></div></div></figure><p id="d3cf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，在<em class="kr"> DisplayTime() </em>函数中，修改文本以显示计算出的值。您可以简单地使用字符串插值来调用在字符串前带有$的内容。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ls"><img src="../Images/9f2bcc3d84b771912a655269cb9bd416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GAKYN_FgheK0jR_WlQ4o0Q.png"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="9be6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">六。调用显示时间函数<br/> 最后，我们只需要调用<em class="kr"> void Update()中 if 语句内部的方法。</em>否则，计时器将运行，但不会在 UI 元素中显示和更新。</p><p id="e5fe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是它在游戏中的样子:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lt"><img src="../Images/9ac97ff9e98b99593bcc117d0e166f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZnW00eUoi28Sm9q-ZiB1pA.gif"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="7e87" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">七。完成的脚本<br/> </strong>下面是完成的脚本的样子:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/6a28bf4f025bc5eb39a10c53980e8841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3V1gQamzr8NBZ9Y7y_HVg.png"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="b386" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们做到了！我们成功创建了倒计时功能！</p></div></div>    
</body>
</html>