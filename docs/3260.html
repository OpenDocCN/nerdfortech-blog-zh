<html>
<head>
<title>What are Cross-Site Scripting attacks and how to prevent them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是跨站点脚本攻击以及如何防止它们</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/what-are-cross-site-scripting-attacks-and-how-to-prevent-them-bf5f49cd2dcd?source=collection_archive---------21-----------------------#2021-06-03">https://medium.com/nerd-for-tech/what-are-cross-site-scripting-attacks-and-how-to-prevent-them-bf5f49cd2dcd?source=collection_archive---------21-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0afc0611cf9c032a4ca0dfef9978977a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZB35Db2CQpBvRIgKM0AGQ.jpeg"/></div></div></figure><p id="bfab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">考虑这样一个场景，您正在网站上登录您的帐户。你输入你的用户名，然后输入你的密码。但是当你点击“回车”时，页面就会加载并再次弹出同样的登录界面。</p><p id="f54b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你认为你可能输入了错误的密码。所以你再次输入你的用户名和密码。只有这一次你能够登录到你的帐户。完成工作后，关闭选项卡。</p><p id="7243" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是第二天早上你会大吃一惊。您的帐户已被暂停，您已无法访问您的大多数社交媒体帐户。你尝试不同的密码，但它不起作用。您还尝试刷新页面并输入您的登录凭证，但仍然不起作用。这正是你意识到自己被黑了的时候。</p><p id="1932" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你不知道你什么时候被黑的时候，你在互联网上寻找答案。这时，您意识到您昨天访问的网站遭到了脚本攻击。</p><p id="e965" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本帖中，我们将探讨一种叫做跨站脚本的脚本攻击。</p><p id="6b42" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目录</strong></p><ol class=""><li id="c2e2" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">什么是跨站脚本？</li><li id="8c54" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">脚本攻击是如何进行的？</li><li id="9290" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">跨脚本攻击有哪些类型？</li><li id="102c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">防止跨脚本攻击的不同方法有哪些？</li><li id="4919" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">裁决</li></ol><h1 id="24ae" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是跨站脚本攻击？</h1><p id="e33d" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">跨站点脚本是黑客用来在不同用户的浏览器中执行 Javascript 代码的一种技术。全世界的攻击者都非常常用它来窃取个人数据。</p><p id="723a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，跨站脚本并不只是针对你或网站上任何特定的访问者。它被设计成一种针对网站所有访问者的大规模攻击机制。换句话说，它旨在窃取所有登录网站的访问者的数据。攻击代码成为网站的一部分，随请求一起提交给用户的电脑。在某种程度上，你可以说你的网站在帮助攻击者获取你的数据方面也发挥了巨大的作用。</p><h1 id="234a" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">跨站脚本攻击是如何进行的？</h1><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/47becbad5cc627bc9437aee2a21a373a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1YtlteSqBIJr-eEo"/></div></div></figure><p id="444c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">简而言之，跨站点脚本攻击包括在网站中添加一些恶意代码脚本。</p><p id="524c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此代码可以添加到需要用户输入来执行操作的页面上。例如，网站访问者可以对博客文章和新闻文章发表评论。但是，他们需要登录才能对这些帖子发表评论。因此，这些地方是黑客将他/她的恶意代码插入网站的高机会。</p><p id="c87c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">攻击者真正需要做的只是以注释的形式插入代码。一旦评论被发布并直播，每个登录博客的访问者的数据都会被盗。</p><p id="cc62" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">攻击是这样发生的:</p><ol class=""><li id="7232" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">黑客以注释的形式输入攻击代码</li><li id="b49e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">恶意代码现在成为网站的一部分</li><li id="5caa" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">访问者点击网络链接并在他们的计算机上打开页面</li><li id="da92" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">代码也随页面数据一起下载</li><li id="5616" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">用户点击“登录”按钮进行评论</li><li id="e3f5" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">他/她被重定向到黑客创建的重复登录页面</li><li id="a035" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">访问者输入他们的数据并点击“输入”</li><li id="4480" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">当用户保存他们的登录数据时，他们被重定向到原始登录页面</li><li id="5011" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">他们感到困惑，并重新输入登录凭证</li><li id="423c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">现在，他们已经登录到自己的帐户</li><li id="aa0b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">用户对窃取其用户数据的脚本攻击一无所知</li><li id="1ae8" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">他们发表评论，然后继续他们的生活</li><li id="d9de" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">另一方面，黑客利用他们的宝贵数据留下令人讨厌的评论，甚至窃取他们的社交媒体账户</li></ol><p id="245b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有这一切都发生在访问者不知道他们珍贵的数据被未知黑客窃取的情况下。</p><h1 id="72b2" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">跨脚本攻击有哪些类型？</h1><h2 id="d8a9" class="lk kd hi bd ke ll lm ln ki lo lp lq km jb lr ls kq jf lt lu ku jj lv lw ky lx bi translated">存储的 XXS</h2><p id="7a6a" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">常见的交叉脚本攻击有三种类型</p><p id="5f99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当攻击的有效负载存储在本地数据库中时，就会发生这种攻击。当访问者试图从特定存储中检索数据时，攻击就会开始。</p><h2 id="f151" class="lk kd hi bd ke ll lm ln ki lo lp lq km jb lr ls kq jf lt lu ku jj lv lw ky lx bi translated">反映了 XSS</h2><p id="733c" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">这在负载是请求的一部分的情况下很常见。搜索结果是反射 XSS 攻击可能发生的地方的一个很好的例子。要求用户输入数据的网站也是 XSS 反射攻击的常见区域。</p><h2 id="198e" class="lk kd hi bd ke ll lm ln ki lo lp lq km jb lr ls kq jf lt lu ku jj lv lw ky lx bi translated">基于 DOM 的 XSS</h2><p id="6a12" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">当通过修改网站的 HTML DOM 触发有效负载时，就会发生这种攻击。</p><h1 id="3494" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">防止跨脚本攻击的不同方法有哪些？</h1><p id="9a60" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">防止跨脚本攻击没有固定的方法。黑客想出了各种方法来利用网站中的漏洞。然而，通过以适当的方式净化用户输入，可以防止跨脚本攻击。这里有一些措施来确保用户的输入不会从你的网站上被窃取。</p><h2 id="c795" class="lk kd hi bd ke ll lm ln ki lo lp lq km jb lr ls kq jf lt lu ku jj lv lw ky lx bi translated">添加 Allowlist 值的概念</h2><p id="5d2b" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">您可以做的第一步是将用户数据限制为特定的 allowlist 值。添加下拉列表是这个概念的一个很好的例子。但是，这只适用于预先确定的值，而不适用于自定义值，如用户名。</p><h2 id="719d" class="lk kd hi bd ke ll lm ln ki lo lp lq km jb lr ls kq jf lt lu ku jj lv lw ky lx bi translated">尽量避免和限制 HTML 输入</h2><p id="75b6" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">虽然丰富的内容可能需要 HTML，但它应该仅限于可信用户。如果您允许对输入进行样式化和格式化，那么您应该考虑使用其他方法来生成内容，比如 Markdown。</p><p id="fa44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，如果您确实使用 HTML，请确保使用强大的杀毒工具(比如 DOMPurify)来清除所有不安全的代码。</p><p id="7d33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">HTML 代码只在网站内容丰富时需要。更重要的是，它应该只限于在你的网站上被信任的用户使用。但是，如果您允许用户对他们的条目进行样式和格式设置，这可能会给您带来问题。在这种情况下，您需要找到其他方法来生成降价。</p><h2 id="d639" class="lk kd hi bd ke ll lm ln ki lo lp lq km jb lr ls kq jf lt lu ku jj lv lw ky lx bi translated">永远净化你的价值观</h2><p id="b04e" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">当您在页面中使用用户生成的内容时，请通过将不安全的字符替换为它们各自的实体来确保它不会产生 HTML 内容。实体具有与常规字符相同的外观，但不能用于生成 HTML。</p><p id="7c28" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你在你的页面上使用 UGC(用户生成内容)时，一定要净化你的价值观。确保您的内容不会导致 HTML 内容被不安全的字符替换。确保实体的外观与网站上的常规字符相同。这种方式不能用于生成 HTML 代码。</p><h1 id="7947" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">裁决</h1><p id="bbbe" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">当您采取正确的措施来防止跨站点脚本攻击时，它们是可以预防的。始终遵循安全程序，并不断更新您的网站，以确保它不会受到外部实体的攻击。</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="8604" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mf">原载于</em><a class="ae mg" href="https://www.partech.nl/nl/publicaties/2021/05/what-are-cross-site-scripting-attacks-and-how-to-prevent-them" rel="noopener ugc nofollow" target="_blank"><em class="mf">https://www . partech . nl</em></a><em class="mf">。</em></p></div></div>    
</body>
</html>