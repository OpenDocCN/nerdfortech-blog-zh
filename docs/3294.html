<html>
<head>
<title>Use Your AMD GPU to Speed Up Training (ROCm)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用您的 AMD GPU 加速训练(ROCm)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/use-your-amd-gpu-to-speed-up-training-rocm-87e34ff3554?source=collection_archive---------8-----------------------#2021-06-05">https://medium.com/nerd-for-tech/use-your-amd-gpu-to-speed-up-training-rocm-87e34ff3554?source=collection_archive---------8-----------------------#2021-06-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="96af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在继续之前，以下是我系统规格:</p><p id="a3c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CPU:英特尔酷睿 i5–7400 CPU</p><p id="018e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GPU: AMD RX570 8GB</p><p id="be50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">操作系统:Ubuntu 20.04.1(内核 Linux MS 5 . 8 . 0–55 通用)</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="148d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:这不适用于 windows！仅基于 Linux 的</strong></p><p id="1300" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最近，我一直在使用谷歌实验室来训练和测试 LSTM 模型。所以我在利用 GPU run type。但是由于 Colab 在特定持续时间内提供有限数量的 GPU 会话，我无法对模型进行连续测试。在我训练另一个模型之前，我必须等待一段时间。</p><p id="81e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除此之外，我想要一个强大的笔记本电脑，因为我还买不起，所以我在寻找一个替代品。幸运的是，我哥哥有一台游戏电脑，里面有 RX570 8GB。但那是 AMD。然而，就像 NVIDIA 有 CUDA 一样，AMD 也有 ROCm。</p><p id="0e46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装步骤可在以下链接中找到；</p><p id="9fa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jk" href="https://rocmdocs.amd.com/en/latest/Installation_Guide/Installation-Guide.html#ubuntu" rel="noopener ugc nofollow" target="_blank">https://rocm docs . amd . com/en/latest/Installation _ Guide/Installation-Guide . html</a></p><p id="4a76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是我所遵循的步骤，(这些都是在上述网站上找到的，但这些是我完全遵循的一个)</p><p id="8c49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步</strong>:添加用户到视频渲染(仅适用于 Ubuntu 20.04.1)组。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="7fc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，运行“组”你会看到以下输出。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="f685" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:现在安装 ROCm</p><p id="e47b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">逐一运行以下命令</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="93f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:</strong>之后重启系统。</p><p id="ac4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，要确认安装，请运行以下命令，</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="d5d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤 4 </strong>:更新路径</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="b763" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果 ROCm 安装正确，您可以运行“rocm-smi”命令，您将看到以下输出。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jl"><img src="../Images/dafbab12cefda3f69c718362555820ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWZWmjMOevyMl9VmgdO-DA.png"/></div></div></figure><p id="79c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤 5 </strong>:为 ROCm 安装 Tensorflow</p><p id="03a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">逐个运行以下命令。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><h2 id="2003" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">修复问题</h2><p id="c6fc" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">现在所有的东西都安装好了，但是当你运行 tensorflow 代码时，它会出错。因此，要检查运行以下 python 脚本并查看输出。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="ef44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它会给出一些错误，其中它会说“分段故障”</p><p id="79e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以要解决这个问题，我们必须重新安装“rocRAND”，我们可以按照<a class="ae jk" href="https://github.com/xuhuisheng/rocm-build/tree/master/gfx803" rel="noopener ugc nofollow" target="_blank">https://github.com/xuhuisheng/rocm-build/tree/master/gfx803</a>提供的方法。</p><p id="de45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下命令来解决该问题。如果你仍然不能解决这个问题，那么请检查上面的 github 并询问作者。当我写这篇文章时，作者已经在 11 天前更新了知识库。确保安装“git”并设置 git global.email 和 global.name 变量，否则不会下载 rocRAND 的源代码。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="f981" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在再次运行 python 脚本，它应该会给出以下输出。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ks"><img src="../Images/f776bbf36ac49d7e91fb674e5ee0bf22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fm5mMGf_cqi2Wpy6n56HCw.png"/></div></div></figure><p id="48f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，你可以开始使用这个 gpu 进行深度学习了。</p><p id="9773" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用[400，100，100，100]训练 LSTM，完成一个周期需要 25-30 分钟。批量= 128，总行数为 110000。有 10 个特征。</p><p id="8e01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用这个 GPU 后，它减少到 160 秒！</p><p id="dc9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以这是非常有用的，希望你也能找到它！</p><p id="6207" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您阅读到最后，如果有任何问题或困惑，请评论。</p><h2 id="7d90" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">参考资料:</h2><div class="kt ku ez fb kv kw"><a href="https://github.com/xuhuisheng/rocm-build/tree/master/gfx803" rel="noopener  ugc nofollow" target="_blank"><div class="kx ab dw"><div class="ky ab kz cl cj la"><h2 class="bd hj fi z dy lb ea eb lc ed ef hh bi translated">徐惠生/rocm-build</h2><div class="ld l"><h3 class="bd b fi z dy lb ea eb lc ed ef dx translated">日期:2021-05-24 如果你不想从源代码编译 ROCm 组件。可以降级到 ROCm-3.5.1，这里是…</h3></div><div class="le l"><p class="bd b fp z dy lb ea eb lc ed ef dx translated">github.com</p></div></div><div class="lf l"><div class="lg l lh li lj lf lk jq kw"/></div></div></a></div><p id="8828" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jk" href="https://rocmdocs.amd.com/en/latest/Installation_Guide/Installation-Guide.html#ubuntu" rel="noopener ugc nofollow" target="_blank">https://rocm docs . amd . com/en/latest/Installation _ Guide/Installation-Guide . html</a></p></div></div>    
</body>
</html>