<html>
<head>
<title>Introduction to Google AutoML Vision</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google AutoML Vision简介</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/introduction-to-google-automl-vision-7be9657d7b3d?source=collection_archive---------7-----------------------#2021-04-27">https://medium.com/nerd-for-tech/introduction-to-google-automl-vision-7be9657d7b3d?source=collection_archive---------7-----------------------#2021-04-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fb90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着技术的快速发展，数据科学家可以更快地完成他们的工作，如训练ML模型。“AutoML”(也称为自动机器学习)这个词出现了，现在在学习ML中起着至关重要的作用。与传统的创建ML模型的方式相比，他们的工作被提升到了一个新的水平。现在三大云平台(GCP、Azure、AWS)为机器学习提供了各种资源，尤其是AutoML。这篇博客将从介绍到创建一个AutoML应用程序。</p><blockquote class="jd je jf"><p id="650e" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">自动化机器学习</strong> ( <strong class="ih hj"> AutoML </strong>)是将<a class="ae jk" href="https://en.wikipedia.org/wiki/Machine_learning" rel="noopener ugc nofollow" target="_blank">机器学习</a>应用于现实世界问题的任务<a class="ae jk" href="https://en.wikipedia.org/wiki/Automation" rel="noopener ugc nofollow" target="_blank">自动化</a>的过程。</p></blockquote><p id="5792" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AutoML涵盖了从原始数据集到可部署的机器学习模型的完整管道。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/fd84e01ea80c6392f34ca42cb506e646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/0*AxW1WTnv-G74rF2o.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图1: AutoML管道</figcaption></figure><ul class=""><li id="603d" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">AutoML的高度自动化允许非专家利用机器学习模型和技术，而不需要他们成为机器学习专家。</li><li id="290b" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">通常，科学家必须应用合适的管道:<strong class="ih hj">数据预处理</strong>、<strong class="ih hj">特征工程</strong>、<strong class="ih hj">特征提取</strong>和<strong class="ih hj">特征选择方法</strong>来创建模型。现在，他们可以真正简化数据科学家从头开始的工作中需要更多时间的每一个步骤，并将剩余的时间专注于提高业务知识、分析数据、提取特征和准备要训练的数据。</li></ul><p id="d698" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AutoML中的这两个重要阶段是特征提取和超参数优化。</p><ul class=""><li id="b71d" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">特征提取:在实际工作中，机器学习模型需要大量的数据来训练。这些数据将会非常庞大，难以理解。特征提取是降维过程的一部分，简单来说，就是将原始数据划分并缩减为更易管理的组。这些大型数据集有大量的变量，需要大量的计算资源来处理。当您拥有一个大型数据集，并且需要在不丢失任何重要或相关信息的情况下减少资源数量时，提取特征的技术非常有用。特征提取有助于减少数据集中的冗余数据量。</li><li id="0233" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">超参数优化:所有的机器学习模型都有参数，这是有意义的，直接影响ML模型的质量。超参数可以很容易地手动设置，并通过反复试验来优化，也可以自动设置这些参数来优化性能，或者可以说是解决机器学习问题。如果没有像AI平台训练超参数调整(应用AutoML)这样的自动化技术，您需要在许多训练运行过程中对超参数进行手动调整，以达到最佳值。超参数调整使确定最佳超参数设置的过程变得更加容易和简单。</li><li id="234a" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">AutoML管道与传统管道的比较:</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kl"><img src="../Images/18dcf4292c7bd6329d71695471ab4d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2Akwmge64OH6wYZq.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图2:机器学习管道</figcaption></figure><ul class=""><li id="613e" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">黄色框中的这些步骤将由AutoML自动处理。程序员不需要担心如何配置、优化这些步骤。</li></ul><p id="1714" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">利弊:</strong> <br/> AutoML帮助科学家自动完成他们的工作，而无需重复数据科学家需要编码技能的枯燥任务。如果没有AutoML，他们必须从头开始创建自己的ML管道。每个ML模型都有自己的属性，因此需要大量时间来完成创建模型的管道。另一方面，AutoML只是一个软件，因此它总是需要一个ML <br/>工程师来使用它。事实上，在使用AutoML训练的模型之前，它的结果必须经过专家数据科学家的多次验证，以确保它们是正确的。</p><p id="605a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">自动回声系统:</strong></p><p id="95c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Google开发了几个AutoML产品，例如:</p><ul class=""><li id="86e9" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">自动自然语言</li><li id="3497" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">AutoML表格</li><li id="b7da" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">自动翻译</li><li id="3882" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">自动视频智能</li><li id="e786" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">自动视觉</li></ul><p id="8dfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些最先进的AutoML功能可以帮助您快速自动构建和部署机器学习模型，而无需担心您的ML技能，根据您的业务需求处理问题。</p><p id="5362" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于学习目的，我们将深入研究AutoML Vision并创建一个演示应用程序。</p><p id="cf80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">基础知识自动视觉:</strong></p><ul class=""><li id="8c16" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">Google AutoML Vision是一个用于图像识别的机器学习模型生成器，作为Google Cloud的一项服务提供。</li><li id="d070" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">AutoML Vision允许您从标记的图像中以有效的方式训练您的自定义模型。将对结果进行评估，以获得最高性能。</li><li id="8dd3" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">AutoML Vision提供了一个名为Cloud hosted的服务，用于在云上注册经过训练的模型，以便通过AutoML API提供服务。</li></ul><p id="226f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">工作流程</strong>:</p><ul class=""><li id="5e9b" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">要开始创建AutoML vision，我们必须经历5个步骤:收集数据集、验证数据集、标记数据集、训练模型和部署，然后才能使用它。</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/e2ca3e51ba820b58ed8299a82ef6ad6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/0*TIpbzP293F33ppVf.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图AutoML Vision的工作流程</figcaption></figure><p id="be21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">编码:</strong></p><p id="ef00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将从最开始的介绍开始，使用AutoML视觉为猫和狗创建一个真正的人工智能应用程序，并逐步部署到云运行。</p><p id="1633" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">先决条件:</strong></p><p id="a39a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您必须至少有使用这些编程语言的经验:</p><p id="6a29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用的技术:</p><ul class=""><li id="1b71" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated"><strong class="ih hj"> FastAPI </strong>:用于构建后端应用的现代快速Python web框架。</li><li id="af43" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated"><strong class="ih hj"> VueJS </strong>:开源的模型-视图-视图模型前端JavaScript框架，用于构建用户界面和单页面应用。</li><li id="b319" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated"><strong class="ih hj"> Docker: </strong>一组平台即服务产品，使用操作系统级虚拟化来交付称为容器的软件包中的软件。</li><li id="fd6d" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated"><strong class="ih hj">云运行</strong>:在完全托管的无服务器平台上开发和部署高度可扩展的容器化应用。</li></ul><p id="c0d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">设置向上:</strong></p><ul class=""><li id="7d24" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">首先要做的是收集数据集(图像)。我们将从kaggle.com<a class="ae jk" href="https://www.kaggle.com/c/dogs-vs-cats/data" rel="noopener ugc nofollow" target="_blank">下载一个数据集。下载后，我们提取下载的文件，并准备训练。</a></li><li id="337b" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">其次，你必须首先为你的谷歌云账户设置计费，并启用Vision AI功能。你将获得300美元的免费试用。</li><li id="147a" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">请参考此<a class="ae jk" href="https://cloud.google.com/vision/docs/setup" rel="noopener ugc nofollow" target="_blank">链接</a>设置视觉API。</li></ul><p id="950f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">列车型号:</strong></p><ul class=""><li id="d278" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">导航到自动视觉。</li><li id="9e93" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">使用选项<strong class="ih hj">单标签分类</strong>创建新数据集。</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es kq"><img src="../Images/a5531c103b2142ff1561d2185205e2d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*YHGJnAeypxOiIwt5.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图4:创建新的数据集</figcaption></figure><ul class=""><li id="b9eb" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">通过从计算机上传或选择云存储上的CSV文件来导入图像。</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kr"><img src="../Images/9b05ab9f7f93b96693abab542edf5a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SNPuXMgskDbTGhbm.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图5:导入数据</figcaption></figure><ul class=""><li id="02c0" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">创建两个标签，名称分别为:狗和猫。</li><li id="f3d2" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">用合适的狗或猫来标记这些未标记的图像</li><li id="5209" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">接下来，我们将通过单击train来训练我们的模型</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ks"><img src="../Images/0e77a96c66f763dd20e854a98eaacc49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9ghI2lffrzhszRgg.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图6:火车模型选项</figcaption></figure><ul class=""><li id="9587" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">有两个选项:</li><li id="9ef6" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">云托管(选择此项):创建在线模型和预测</li><li id="9b38" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">Edge:下载模型供离线使用</li><li id="1588" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">选择节点工时预算:</li></ul><p id="26c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">重要！！</strong></p><p id="3e38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在做这个动作之前，你必须仔细阅读这个关于<a class="ae jk" href="https://cloud.google.com/vision/automl/pricing" rel="noopener ugc nofollow" target="_blank">定价</a>的链接。简而言之，用(200幅图像)训练一个模型的成本将是8个节点小时。如果有免费试用，可以试试这个。如果没有，您将被收取<strong class="ih hj">8 *</strong><strong class="ih hj">$ 3.15 = $ 25.2+$ 1.25(用于部署)= $26.45。</strong></p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ks"><img src="../Images/f9797af97b9a86d6b44949f44ccb5456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EnKaF8FZ4uFJ6pTW.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图7:选择节点小时预算</figcaption></figure><ul class=""><li id="edba" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">点击开始训练。培训时间为2~3小时。</li><li id="9f41" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">完成培训后，您可以通过导航到评估选项卡来查看您的模型评估。</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ks"><img src="../Images/0ef6a4717729d1d7dcb8278f11620b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6xrH_iNjf9Qcwswk.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图8:评估模型</figcaption></figure><ul class=""><li id="2b0e" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">让我们测试我们的模型。输入任何图片，看看结果。</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kt"><img src="../Images/bcf23b07fa3a0727a92a264770bfd2b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ny3wDe3Ub7FahxXm.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图9:测试模型</figcaption></figure><ul class=""><li id="093a" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">酷，我们的模型相当准确。下一步，我们将构建一个Web应用程序，这样任何人都可以执行在线预测。</li></ul><p id="875c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">开发后端</strong></p><ul class=""><li id="f3a1" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">我已经为库定义了需求<a class="ae jk" href="https://github.com/tkppro/python-google-automlvision/blob/c9d8a3345248cade2d8e759dd3d01345fd2a2125/requirements.txt" rel="noopener ugc nofollow" target="_blank">文件</a>来安装我们将在项目中使用的所有依赖项。下载它，放入我们的项目文件夹，并运行以下命令:</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="4ebe" class="kz la hi kv b fi lb lc l ld le">$ pip install poetry<br/>$ poetry install</span></pre><ul class=""><li id="aeb6" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">我们的项目结构将组织如下:</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es lf"><img src="../Images/d291f98fe51798a8af59cecbe49169c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/0*91u1X_T5XuWfEStw.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">图10:项目结构</figcaption></figure><ul class=""><li id="1a1a" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">接下来，打开main.py。我们的代码将类似于:</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="1da0" class="kz la hi kv b fi lb lc l ld le">from fastapi import FastAPI, File, APIRouter, HTTPException, Body<br/>from starlette.middleware import Middleware<br/>from starlette.middleware.cors import CORSMiddleware<br/>from starlette.staticfiles import StaticFiles<br/><br/>from python_automl_vision.services.services import (<br/>predict, get_sample_online_predict)<br/><br/>app = FastAPI(middleware=[Middleware(<br/>            CORSMiddleware,<br/>            allow_origins=[*],<br/>            allow_methods=[*],<br/>            allow_headers=[*],<br/>        )<br/>    ]<br/>)<br/><br/>api = APIRouter()<br/><br/>app.include_router(api, prefix="/api") |</span></pre><ul class=""><li id="9078" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">添加用于预测的api:</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="67e7" class="kz la hi kv b fi lb lc l ld le">@api.post("/predict")<br/>async def predict_image_file(<br/>file: bytes = File(None),<br/>is_uploaded: bool = Body(True),<br/>blob: str = Body(None),<br/>predict_type: str = Body("ONLINE_PREDICT"),<br/>):<br/>    if not file and is_uploaded:<br/>        raise HTTPException(status_code=400, detail="File must not be empty!")<br/>    results = predict(file, is_uploaded, blob, predict_type)<br/>    return results</span></pre><ul class=""><li id="2efc" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">predict()函数:</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="254c" class="kz la hi kv b fi lb lc l ld le">def predict(content, is_uploaded=True, blob="", predict_type="ONLINE_PREDICTION"):<br/>    PROJECT_ID = "your project id"<br/>    MODEL_ID = "your model id"<br/>    if predict_type == "BATCH_PREDICTION":<br/>        return batch_predict()<br/><br/>    file_download = "";<br/>    # Get the full path of the model.<br/>    model_full_id = automl.AutoMlClient.model_path(PROJECT_ID, "us-central1", MODEL_ID)<br/>    if not is_uploaded:<br/>        file_download = download_file(blob)<br/>    with io.open(file_download, "rb") as image_file:<br/>        content = image_file.read()<br/>    # Read the file.<br/>    image = automl.Image(image_bytes=content)<br/>    payload = automl.ExamplePayload(image=image)<br/><br/>    params = {"score_threshold": "0.8"}<br/><br/>    request = automl.PredictRequest(name=model_full_id, payload=payload, params=params)<br/>    response = prediction_client.predict(request=request)<br/>    results = {}<br/>    for result in response.payload:<br/>        results = dict(name=result.display_name, <br/>            score=result.classification.score)<br/><br/>    # remove downloaded file_<br/>    if os.path.exists(file_download) and file_download != "":<br/>        os.remove(file_download)<br/>    return results</span></pre><ul class=""><li id="b148" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">让我们检查我们的api，看看结果。运行命令打开本地主机上的服务器。</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="2def" class="kz la hi kv b fi lb lc l ld le">$ uvicorn main:app --host 0.0.0.0 --port 8000</span></pre><ul class=""><li id="2fd0" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">打开浏览器并导航至<a class="ae jk" href="http://0.0.0.0:8000/docs" rel="noopener ugc nofollow" target="_blank"> http://0.0.0.0:8000/docs </a>。我们的API列表如下。</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lg"><img src="../Images/24303535aa4cbe92b6ec81f35150e19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eLZnz4BGV_vtNxUJ.png"/></div></div></figure><ul class=""><li id="5921" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">输入任意图片，测试这个API。</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es lh"><img src="../Images/d7848416228a4e1e1430e2df74c82f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/0*hla0tg1ZGuqLF_HF.png"/></div></figure><ul class=""><li id="c6e4" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">不错！！是时候建立我们的前端了。</li></ul><p id="0569" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">开发前端</strong></p><ul class=""><li id="a21b" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">让我们在静态文件夹中创建一个新的前端应用程序。</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="9840" class="kz la hi kv b fi lb lc l ld le">$ cd static<br/>$ npm i -g @vue/cli<br/>$ vue create frontend</span></pre><ul class=""><li id="42d6" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">我将使用<a class="ae jk" href="https://vuetifyjs.com/en/" rel="noopener ugc nofollow" target="_blank">虚拟化</a>来构建我们的视图。运行安装Vuetify的命令:</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="39aa" class="kz la hi kv b fi lb lc l ld le">$ vue add vuetify <br/>#or <br/>$ npm i vuetify</span></pre><ul class=""><li id="5ecf" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">对于api获取，我使用<a class="ae jk" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a>来调用API并获得结果。</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="de16" class="kz la hi kv b fi lb lc l ld le">$ vue add axios <br/>#or <br/>$ npm i axios</span></pre><ul class=""><li id="9a99" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">现在，这一次您可以编写自己的前端代码。我将跳过这一部分，让你知道这个页面是什么样子的。您也可以从我的<a class="ae jk" href="https://github.com/tkppro/python-google-automlvision" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中找到我的源代码:</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es li"><img src="../Images/6210c45270342597ae4aa2b7ef85f3b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VEwRNtHlOjLatnUc.png"/></div></div></figure><ul class=""><li id="e3be" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">从<strong class="ih hj"> /static </strong>文件夹中，我们刚刚构建了我们的前端。运行下面的命令以生成产品。打开<a class="ae jk" href="http://0.0.0.0:8000/docs" rel="noopener ugc nofollow" target="_blank">http://0 . 0 . 0:8000/</a>查看我们的前端。</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="6505" class="kz la hi kv b fi lb lc l ld le">$ cd static<br/>$ npm run build</span></pre><p id="9c52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">部署我们的应用:</strong></p><ul class=""><li id="c337" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">该部分将为<strong class="ih hj">可选</strong>。这样做的目的是向大家宣传我们的预测API。你自己用的话可以跳过这个。</li><li id="e089" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">接下来，我将构建一个docker映像，并将其推送到<strong class="ih hj"> Google容器注册中心</strong>。检查下面的<strong class="ih hj">文档</strong>:</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="75bf" class="kz la hi kv b fi lb lc l ld le">FROM node:lts-alpine as fe-build<br/>WORKDIR /app<br/>COPY static/package*.json ./<br/>RUN npm install<br/>COPY static ./<br/>RUN npm run build<br/><br/><br/>FROM python:3.8 as be-build<br/>WORKDIR /app<br/>COPY requirements.txt .<br/>RUN pip install -r requirements.txt<br/>COPY . .<br/>COPY --from=fe-build /app/dist static/dist<br/>EXPOSE 8000<br/>ENV PORT 8000<br/>CMD ["uvicorn", "main:app", "--host", "0.0.0.0"]</span></pre><ul class=""><li id="02b6" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">首先，我们将从静态文件夹中构建我们的前端。接下来，后端将按照我们在<strong class="ih hj"> Dockerfile </strong>中定义的那样逐步构建。然后，我们将从生产构建中复制文件夹dist，让我们的后端可以接触静态文件。在<strong class="ih hj"> main.py </strong>的末尾添加下面几个代码来服务它。</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="707f" class="kz la hi kv b fi lb lc l ld le">#serving static files<br/>app.mount("/", StaticFiles(directory="static/dist", html=True), <br/>    name="static")</span></pre><ul class=""><li id="4488" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">通过创建docker映像和容器来测试我们的docker文件。</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="8076" class="kz la hi kv b fi lb lc l ld le">$ docker build . -t automl-vision<br/>$ docker run -dp 8000:8000 automl-vision</span></pre><ul class=""><li id="9b46" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">提交我们的docker图像到Google容器注册表</li></ul><pre class="jm jn jo jp fd ku kv kw kx aw ky bi"><span id="ce92" class="kz la hi kv b fi lb lc l ld le">$ gcloud builds submit --tag gcr.io/${YOUR-PROJECT-ID}/automl-vision</span></pre><ul class=""><li id="399d" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">毕竟，检查这个<a class="ae jk" href="https://cloud.google.com/run/docs/deploying" rel="noopener ugc nofollow" target="_blank">链接</a>来设置你的应用在云上运行。完整的场景将是:</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lj"><img src="../Images/c357414f5f12d2b4e77243b0ca16f8f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PPpjvE-pqhzw6Rcw.png"/></div></div></figure><ul class=""><li id="e9a2" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">最终结果:</li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lk"><img src="../Images/e148f6dbf2dbb9ad6030e113f96ba1d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XHWj9rxhiO_5H6av.gif"/></div></div></figure><p id="6515" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论:</strong></p><p id="17e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AutoML为人工智能行业提供了许多解决方案，并提供了一种有趣的方法，在许多情况下将降低人工智能的准入门槛。AutoML为非专业程序员带来了更多的机会，他们希望将其应用于自己的业务领域或学习目的。因此，自动化机器学习将在不久的将来对AI解决方案和技术产生积极影响。</p><p id="adfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有任何问题，请随时通过电子邮件thangdangdev@gmail.com联系我或留下您的评论:</p><p id="0a28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你看到这篇文章是有帮助的，不要犹豫，给一个掌声。</p><p id="ba7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢你阅读❤</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="1d47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">最初发表于</em><a class="ae jk" href="https://github.com/tkppro/python-google-automlvision/blob/main/README.md" rel="noopener ugc nofollow" target="_blank">T5【https://github.com】</a><em class="jg">。</em></p></div></div>    
</body>
</html>