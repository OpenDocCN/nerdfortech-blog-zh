<html>
<head>
<title>Testing your first Flask Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试您的第一个烧瓶应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/testing-your-first-flask-application-c04052baddba?source=collection_archive---------21-----------------------#2021-06-10">https://medium.com/nerd-for-tech/testing-your-first-flask-application-c04052baddba?source=collection_archive---------21-----------------------#2021-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/da8f389bd5ef7325c084ebb0665bc0fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H9_pKGnaksi25L-oLOtqgA.jpeg"/></div></div></figure><p id="c924" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我们将通过非常基础的设置和测试烧瓶端点。Flask是一个python框架，它不是预装的，所以您需要先下载才能使用它。</p><p id="be79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">创建我们的Flask应用:</strong></p><p id="959b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们创建一个名为app的变量，并给它分配一个Flask对象。Any _abc_是一个，双下划线是python中唯一的字符串。__name__变量包含我们当前运行的模块的相对路径。</p><p id="e297" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我们定义第一个端点，告诉它app . route(“/”)中的端点是什么，这类似于输入我的site.com/<a class="ae jo" href="http://site.com/" rel="noopener ugc nofollow" target="_blank"/>。这为我们的应用程序创建了主页。当URL被点击时，def home()将运行。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="61eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了运行这个应用程序，我们需要调用main，所以当我们运行app.py时，_name_将等于main。如果我们导入另一个文件，该文件将是_main_。this _ File，当这个文件正在运行时。</p><p id="33a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">app是一个重要的变量，因为测试将导入这个变量，并且可以访问flask app。</p><p id="9007" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当另一个文件导入这个文件时，名称将不是main，这个文件将不会运行，这是一件好事，因为我们可以包括属性，而不必总是运行应用程序。</p><p id="1981" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有一点，端点不能返回字典，只能返回字符串。或者json字符串。所以我们导入jsonify来将我们的字典转换成端点的字符串。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/685ab029afeddaea4425b306436f562d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgO0QkLHMYiHKjjntjmk7g.jpeg"/></div></div></figure></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><p id="4e83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">我们的第一个系统测试:</strong></p><p id="3dbb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">系统测试，将整个系统作为系统的客户进行测试。</p><p id="6465" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">变量app有flask app定义，仔细观察这里我们不要求服务器在后台运行。我们只需要导入变量，就可以执行测试。Flask提供了测试功能，我们不需要每次都运行应用程序。我们可以要求flask给我们一个test_client。</p><p id="d226" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们正在创建上下文管理器，它以“with”开头，是整个块。像test_client这样的设置有助于快速运行系统测试。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><p id="17fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重构我们的系统测试:</strong></p><p id="8593" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了消除测试代码中的所有重复，我们可以引入一个名为BaseTest的类，这个模式需要遵循另一个测试，这不是测试的默认设置，因为这个类实际上不会包含在测试中。引入它是为了消除重复。</p><p id="ef42" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们在所有的测试类中导入基本测试，以消除所有测试类中的任何重复。另外，app.testing = True会启用app，告诉flask在应用程序的生命周期中，它处于测试模式。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="002c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这个回购中找到完整的代码。在构建这个简单的应用程序时，我学到了很多技术，这在一个庞大的系统中经常被忽略。希望这也能帮助你。:)</p><div class="kc kd ez fb ke kf"><a href="https://github.com/PurpleState/TDD-blog/tree/main/flaskapp" rel="noopener  ugc nofollow" target="_blank"><div class="kg ab dw"><div class="kh ab ki cl cj kj"><h2 class="bd hj fi z dy kk ea eb kl ed ef hh bi translated">purple state/TDD-博客</h2><div class="km l"><h3 class="bd b fi z dy kk ea eb kl ed ef dx translated">用TDD - PurpleState/TDD-blog编写的命令行设置示例</h3></div><div class="kn l"><p class="bd b fp z dy kk ea eb kl ed ef dx translated">github.com</p></div></div><div class="ko l"><div class="kp l kq kr ks ko kt io kf"/></div></div></a></div></div></div>    
</body>
</html>