<html>
<head>
<title>Object Pooling Design Pattern in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity中的对象池设计模式</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/object-pooling-design-pattern-in-unity-de5334b0fe3d?source=collection_archive---------3-----------------------#2021-08-07">https://medium.com/nerd-for-tech/object-pooling-design-pattern-in-unity-de5334b0fe3d?source=collection_archive---------3-----------------------#2021-08-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/99a0c52aefc6b994642ad31f1b7e8d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eKAIDdGoHOEZLZsx6AhL-Q.gif"/></div></div></figure><p id="05d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对象池是一种设计模式，它允许您在实例化多个对象时减少垃圾收集的数量。一个最简单的例子就是在射击游戏中使用子弹。</p><p id="e4d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为此，您将创建一个空的游戏对象，作为游戏的池管理器。您还将创建池管理器脚本，并将其附加到池管理器游戏对象。您还需要制作一个游戏对象，用于保存子弹以保持层次结构的整洁。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/ab9382e040d976ce6ecbe34b234f9a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*pAGug7VCpweW9odDauLziA.png"/></div></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/78c9e9e45978c3fc08d75290ad7bacbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/1*afRO6GRCusuqL_KSpbXMmQ.png"/></div></figure><p id="e79e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使池管理器脚本成为单例脚本，以允许所有脚本轻松访问它。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/36b22ff2bf8b2f45e748315dddac7979.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*4uew4tZPr-5PMU54Ha6JLw.png"/></div></figure><p id="ec73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建对预设的引用。创建一个列表来保存预置，并创建一个变量来告诉游戏要实例化多少个预置。你也可以为子弹容器制作一个容器预置。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/c1bb70e992ade7a5aea610edbf082b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*B_If1Djto3gEgGQNu53bzA.png"/></div></figure><p id="0b0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个将作为列表返回的方法。这个方法将接受一个整数参数，循环遍历，并基于给定的整数创建一个预置。一旦项目符号被实例化，它将成为容器的父级并被禁用。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jw"><img src="../Images/3017ad160a95a9400bf0304b229f7594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*6gOk0HtB7Nh-5kE5yhZdOQ.png"/></div></figure><p id="7ae8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将您的列表设置为等于生成项目符号方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/aecf4f556d9eb10b009430ca2b5d25d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*0LWk0LTr6ohDB8JMYLczeQ.png"/></div></div></figure><p id="c104" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以创建一个公共方法来查找列表中的非活动项目符号，并将其用作您正在发射的项目符号。如果没有不活动的项目符号，它将创建一个。这允许游戏在大多数情况下使用现有的子弹预置，而不是创建新的。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jy"><img src="../Images/bb696e55c558a6cdb0f455c6a5ec733a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*eOIiunXqvkf3xi_fh2Ee7w.png"/></div></figure><p id="af6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个例子中，我创建了一个简单的玩家脚本来拍摄，并将其附加到主摄像机上。当玩家单击鼠标左键时，请求bullet方法被调用，并且bullet的位置被设置为(0，0，0)。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/b1c824921d88a6c673db4e6d6ed63a7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*77FImMjLMRkrLRWoVWASDg.png"/></div></figure><p id="dff3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后一部分是在一段时间后将项目符号设置为非活动状态。这是通过使用OnEnble并调用一个在特定时间后将对象设置为非活动的方法来完成的。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/9ddca913af9e1273c7cc99e708aad840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*AT78pFQTBU_Z2u_c2FZS1A.png"/></div></figure><p id="649f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在unity中，确保设置所有的引用和你想要的初始项目符号数。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/115a1f4b64352eb1c739ebda64f184c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*SLGa5_fENDWrUDSrubdrxw.png"/></div></figure><p id="d005" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将允许你的游戏创建一定数量的预设，并回收它们，而不是实例化多个预设。这将减少游戏中的垃圾收集量，并提高效率。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kb"><img src="../Images/36e0cd0fb0ff2134db2c0563882774f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/1*sjxQDuInnygCDfx3eh1gOA.gif"/></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/0be7af87e5e72d95c7d85e568bbbbbb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KUdI30XkZaIAMt48Ri0SJA.gif"/></div></div></figure></div></div>    
</body>
</html>