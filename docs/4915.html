<html>
<head>
<title>Change every request or response in your application.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更改应用程序中的每个请求或响应。</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/change-every-request-or-response-in-your-application-69bee5922064?source=collection_archive---------2-----------------------#2021-08-14">https://medium.com/nerd-for-tech/change-every-request-or-response-in-your-application-69bee5922064?source=collection_archive---------2-----------------------#2021-08-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4fba" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">有角度的 HTTP 拦截器。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/38755d3a79420c882e5785428a5fabc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c3wzcBe3dz6-HH06"/></div></div></figure><p id="b88e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">有时我们可能需要在请求中添加信息，或者改变响应的格式，或者只是记录我们所有的请求。我们如何做到这一点？</p><p id="80e5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们可以创建一个基础服务，将逻辑放在那里，然后使用继承。但是 angular 有一个很好的解决这类问题的方法。它调用拦截器。拦截器拦截应用程序中的每一个请求，让我们能够更改请求/响应或者只是进行调试。</p><p id="79b2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们创建一个 HTTP 拦截器。我们的类必须用方法 intercept 实现一个接口 HttpInterceptor，并且我们需要在模块提供者部分添加这个服务。如果我们想要使用几个不同的拦截器，我们设置参数' multi': true。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kf"><img src="../Images/b34a42cbffbde6b6c884c989343f8517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hvv-HVXfkh4wQ5Bg"/></div></div></figure><p id="b894" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们可以根据我们的要求制作完全可定制的标题。为此，我们需要创建一个简单的表单。我们将表单的值存储在拦截器的本地存储中，我们将在它的值中设置新的头。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kf"><img src="../Images/69aebba8f0a2392d6c8f2d861f9d33a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*86huP44vP4pKK0Nn"/></div></div></figure><p id="ee4e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果我们需要处理响应，我们需要使用 rxjs 库中的管道操作符。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kg"><img src="../Images/2990613cb0abc5e2f38f330c6768b0b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ypFVg_5wJGuUu5YM"/></div></div></figure><p id="ed4a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因此，所有 HTTP 请求和响应都被拦截。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kg"><img src="../Images/c5e80064a044e57d77228713db27b159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KcNL3qks304JkpnV"/></div></div></figure><p id="cfbf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你需要仔细看看这个项目，这里有链接。</p></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><p id="48ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="kp">原载于 2021 年 8 月 14 日</em><a class="ae kh" href="https://tomorrowmeannever.wordpress.com/2021/08/14/change-every-request-or-response-in-your-application-angular-http-interceptors/" rel="noopener ugc nofollow" target="_blank"><em class="kp">【http://tomorrowmeannever.wordpress.com】</em></a><em class="kp">。</em></p></div></div>    
</body>
</html>