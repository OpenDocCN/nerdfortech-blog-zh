<html>
<head>
<title>Creating a Lane Detection Program Using OpenCV-Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OpenCV-Python创建车道检测程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-lane-detection-program-using-opencv-python-ba82b2305d26?source=collection_archive---------16-----------------------#2021-03-01">https://medium.com/nerd-for-tech/creating-a-lane-detection-program-using-opencv-python-ba82b2305d26?source=collection_archive---------16-----------------------#2021-03-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5d1a49f69967c9a73c5678263e8eb0d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YXHOPivgeco0MJQ-"/></div></div></figure><p id="e3d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">回到中国，我曾站在俯瞰北京熙熙攘攘的道路的桥顶上，背诵每辆飞驰而过的汽车的品牌。“奔驰……丰田……日产……马自达……”我对汽车的兴趣和热情让我对这些发明进行了更多的研究。在我的研究过程中，我遇到了一个关于如何编写车道检测程序的教程，它看起来非常有趣，但相当具有挑战性。</p><p id="34a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了检测车道线，本项目使用OpenCV-Python。这个过程的第一步是<strong class="is hj">边缘检测</strong>，它识别图像中颜色强度急剧变化的区域。图像由单个像素组成，其亮度以0-255的标度表示。数字0代表黑色，而255代表白色。为了更容易处理此图像，请将此图像转换为灰度或黑白图像。这样，只有一个通道的颜色，而不是通常的红色，蓝色和绿色。</p><p id="fd94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，应用<strong class="is hj">高斯模糊</strong>来平滑图像并减少噪声。应用高斯模糊将使检测车道线时的误差最小化。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/4f8200c8f48073b5c16e84bad04341a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PI3EO7jc--YTofBk"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">高斯模糊</figcaption></figure><p id="399c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用模糊后，使用<strong class="is hj"> Canny函数</strong>描绘出具有最强渐变或颜色变化的区域。Canny边缘检测可以跟踪颜色强度发生急剧变化的区域，这有助于使车道线更加清晰可辨。黑色区域是照片中像素之间亮度差异较小的部分，而白线代表亮度变化较大的部分。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/551042a00743c69811518df6335d9f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bihgx_uMkg18Pq92"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">Canny函数</figcaption></figure><p id="18e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">清楚标记车道线后，将注意力集中在包含车道线的特定区域。这样做的第一步是使用<strong class="is hj"> Matplotlib </strong>。Matplotlib是Python中创建坐标的绘图函数。如下图所示，包围包含车道线的区域的三个坐标如下:(200，700)、(1100，700)和(550，250)。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/3a26be42846ba5a6147b87cbf0a30c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iYA81ssnb2c5NWqF"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">Matplotlib</figcaption></figure><p id="ed94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这三个点创建了一个三角形区域，我们将为其创建一个遮罩。使用NumPy数组指定三个坐标，并输入命令“np.zeros_like”将像素强度设置为0或黑色，从而创建此蒙版。然后，使用OpenCV的fillPoly函数，用白色填充我们感兴趣的区域；我们使用“250”将像素强度设置为最大。遮罩有助于仅聚焦于感兴趣的区域，而不是整个图像。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/121264feb2c6b4cc0a64960c111a4246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jfg_5T1kryB5-Tyd"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">代码图像</figcaption></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/5d6120310aa91e4f4775aa693e975046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7nkcf7VjW1nY7Yl8"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">感兴趣区域遮罩</figcaption></figure><p id="e4fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，通过霍夫变换函数找到最适合每条车道线的线。<strong class="is hj">霍夫变换</strong>是一种使用投票程序识别线条的技术。霍夫空间类似于常规的<em class="ka"> x-y </em>坐标平面，也称为笛卡尔坐标平面。直线通常用方程<em class="ka"> y = mx + b </em>来表示，其中‘m’为斜率，‘<em class="ka">b</em>为<em class="ka">y</em>-截距。这样的方程可以作为单点绘制到霍夫空间中，其中m是<em class="ka"> x </em>坐标，而<em class="ka"> b </em>是<em class="ka"> y(m，b) </em>。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/5aa242fe57ac1d5e59e18c1ae605fc20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YvnA1Ai8qQ3DTnoM"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">笛卡尔坐标平面与霍夫空间</figcaption></figure><p id="3f82" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们只有一个点，而不是一条线呢？有无限多条线可以通过该点，每条线都有唯一的斜率和<em class="ka">y</em>-截距。对于通过该点的每条线，使用该线的斜率和<em class="ka"> y </em>截距在霍夫空间上绘制一个点。最终，通过该点的方程组在霍夫空间中形成一条线。</p><p id="a97e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，在我们的坐标平面上添加一个点，这允许在霍夫空间上绘制通过该点的线族。最终，霍夫空间将被线条填充，线条由来自<em class="ka"> x-y </em>平面中的线性方程的各个数据点形成。然而，由于道路的曲率和其他因素，图像上的车道线并不是完美的直线。要解决这个问题，找到最佳拟合线:通过最多数据点的线。霍夫空间可以被分割成网格，然后这些线被绘制到霍夫空间上。包含最多交叉点的网格将是我们使用的线。使用霍夫变换，找到最适合的线条，并将其应用到图像上。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/d577a36ccc9563ce6ae1c6f277ac9140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R1M765Tn-RFV1LrD"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">最佳拟合线</figcaption></figure><p id="5188" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后一步是将图像与最符合原始图像的线条混合，以便线条可以显示在车道上，而不是黑屏。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/0960313da9916b49ce82c287d09deb72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HbhaSpLI4DtVOdTH"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">最终产品</figcaption></figure></div></div>    
</body>
</html>