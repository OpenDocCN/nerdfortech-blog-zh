<html>
<head>
<title>Discovering JavaScript’s Set Object</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发现 JavaScript 的 Set 对象</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/discovering-javascripts-set-object-ed34cdbc677?source=collection_archive---------34-----------------------#2021-05-25">https://medium.com/nerd-for-tech/discovering-javascripts-set-object-ed34cdbc677?source=collection_archive---------34-----------------------#2021-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c6efc045d0adbc6cffcb287d716ccc91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtJTAj7nzsUmR3mya1z_BA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">雅各布·欧文斯通过 unsplash.com<a class="ae iu" href="https://unsplash.com/photos/CiUR8zISX60" rel="noopener ugc nofollow" target="_blank">拍摄</a><a class="ae iu" href="https://unsplash.com/@jakobowens1" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="87d6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我最近在 Hacker Rank 上练习一些算法问题，以帮助自己准备技术面试。我遇到了一个问题，需要我将一个数组过滤成唯一的值。这是我以前做过的事情，我想出的解决方案有效，但不是很漂亮。事情是这样的:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="706d" class="kc kd hi jy b fi ke kf l kg kh">1. let a = [1, 1, 2, 3, 3, 4, 5, 5]</span><span id="9dc6" class="kc kd hi jy b fi ki kf l kg kh">2. console.log(a.reduce((acc, val) =&gt; acc.includes(val) ? acc : [...acc, val], []))<br/>// <em class="kj">[1, 2, 3, 4, 5]</em></span></pre><p id="3bd7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Reduce 就像 JavaScript 函数的瑞士军刀，几乎可以用来做任何事情。但是如果你不熟悉它，它可能会令人困惑。我决定做一些谷歌搜索，并找到另一种更简单的方法来解决这个问题。JavaScript Set 对象步入其中。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="4349" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据<a class="ae iu" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" rel="noopener ugc nofollow" target="_blank"> MDN </a>的说法，Set 对象“让你存储任何类型的唯一值，无论是原始值还是对象引用”。存储在集合中的值是根据插入时间排序的值的集合(新插入的值位于集合的末尾)。当创建或添加到集合中时，使用严格相等运算符<code class="du kr ks kt jy b">===</code>将被添加的值与集合中的每个值进行比较，只有每次比较返回 false 的值才会被添加。</p><p id="1c62" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有太多要理解的了。让我们来看一些例子和不同的用例，以帮助强化 Set 对象的工作方式。首先，让我们看看如何使用集合来解决我们最初的问题，即把一个数组过滤成一个唯一值的数组。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="6ca3" class="kc kd hi jy b fi ke kf l kg kh">1. let x = [1, 1, 2, 3, 3, 4, 5, 5]</span><span id="e403" class="kc kd hi jy b fi ki kf l kg kh">2. console.log([...new Set(x)]) <br/>// <em class="kj">[1, 2, 3, 4, 5]</em></span></pre><p id="59af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们创建一个新的集合，并在使用 spread 操作符创建一个新的数组之前将一个数组<code class="du kr ks kt jy b">a</code>传递给它。如果你问我，这是更容易阅读的，也是更容易打字的。假设你明白什么是集合，这样写也更有描述性。</p><p id="c1c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">集合也可以用来计算两个数组之间的并集、交集和差集。让我们看看使用下面的数组会是什么样子。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="dc1e" class="kc kd hi jy b fi ke kf l kg kh">1. let a = [1, 1, 2, 3, 3, 4, 4]</span><span id="27d9" class="kc kd hi jy b fi ki kf l kg kh">2. let b = [3, 3, 4, 5, 6, 6]</span></pre><h1 id="3487" class="ku kd hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">工会</strong></h1><p id="2ad0" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">两个数组的并集是一个新数组，它包含由两个数组组合而成的元素的唯一列表。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="d89f" class="kc kd hi jy b fi ke kf l kg kh">3. let union = [...new Set([...a, ...b])]</span><span id="962e" class="kc kd hi jy b fi ki kf l kg kh">4. console.log(union) <br/>// <em class="kj">[1, 2, 3, 4, 5, 6]</em></span></pre><h1 id="47c6" class="ku kd hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">十字路口</h1><p id="b3fd" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">两个数组的交集是一个新数组，它包含两个数组中都存在的元素的唯一列表。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="3f06" class="kc kd hi jy b fi ke kf l kg kh">5. let intersection = [...new Set(a.filter(i =&gt; b.includes(i)))]</span><span id="fe6b" class="kc kd hi jy b fi ki kf l kg kh">6. console.log(intersection) <br/>// <em class="kj">[3, 4]</em></span></pre><h1 id="748b" class="ku kd hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">差异</h1><p id="782b" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">数组 a 和数组 b 之间的差异是唯一值的新数组，这些值出现在 a 中，但不在 b 中。数组 b 和数组 a 之间的差异正好相反。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="5219" class="kc kd hi jy b fi ke kf l kg kh">7. let difference = [...new Set(a.filter(i =&gt; !b.includes(i)))]</span><span id="0775" class="kc kd hi jy b fi ki kf l kg kh">8. console.log(difference) <br/>// <em class="kj">[1, 2]</em></span><span id="788e" class="kc kd hi jy b fi ki kf l kg kh">or </span><span id="4af0" class="kc kd hi jy b fi ki kf l kg kh">9. difference = [...new Set(b.filter(i =&gt; !a.includes(i)))]</span><span id="c843" class="kc kd hi jy b fi ki kf l kg kh">10. console.log(difference) <br/>// <em class="kj">[5, 6]</em></span></pre><p id="77fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如你所见，集合对于比较两个数组非常有用。有几个缺点值得注意。首先是 Internet Explorer 不支持 Set prototype 的许多方法。幸运的是 IE 很快就要走到它的生命尽头了，但这并不意味着每个人都会停止使用它。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">经由<a class="ae iu" href="https://giphy.com/gifs/colbertlateshow-stephen-colbert-surprise-late-show-l0HlO3BJ8LALPW4sE" rel="noopener ugc nofollow" target="_blank">giphy.com</a></figcaption></figure><p id="c152" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个需要注意的重要事情是，由于 Set 使用严格的相等运算符<code class="du kr ks kt jy b">===</code>来比较值，所以它是区分大小写的。这导致了一些有趣的行为。让我们快速看一些例子。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="09f3" class="kc kd hi jy b fi ke kf l kg kh">1. console.log(new Set('baseball')<br/>// <em class="kj">Set { 'b', 'a', 's', 'e', 'l' }</em></span><span id="4afa" class="kc kd hi jy b fi ki kf l kg kh">2. console.log(new Set('Baseball')<br/>// <em class="kj">Set { 'B', 'a', 's', 'e', 'b', 'l' }</em></span></pre><p id="be7a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在第一行和第二行，Set 遍历字符串中的每个字符，并创建一组新的唯一值。这导致所有重复的字母被省略，但是大写字母<code class="du kr ks kt jy b">B</code>出现在第二行的集合中，因为<code class="du kr ks kt jy b">'b' !== 'B'</code>。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="906b" class="kc kd hi jy b fi ke kf l kg kh">1. let mySet = new Set()</span><span id="1107" class="kc kd hi jy b fi ki kf l kg kh">2. mySet.add('Baseball')</span><span id="3d89" class="kc kd hi jy b fi ki kf l kg kh">3. mySet.add('baseball')</span><span id="8e7d" class="kc kd hi jy b fi ki kf l kg kh">4. console.log(mySet)<br/>// <em class="kj">Set { 'Baseball', 'baseball' }</em></span></pre><p id="d4f2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个例子稍微明显一些，但仍然值得指出。<code class="du kr ks kt jy b">'Baseball’</code>和<code class="du kr ks kt jy b">‘baseball’</code>都可以加到<code class="du kr ks kt jy b">mySet</code>上，因为它们彼此并不严格相等。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="253a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Set 对象是一个工具，我很高兴将它添加到我的工具箱中。当<strong class="ix hj">比较两个不同的数组</strong>时，这看起来很棒，并且可以以多种方式使用。希望你已经学到了一些东西，并且能够更好地处理不同的算法问题。我知道我是！</p><p id="d5fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您对 Set 对象有任何其他用例，请在下面分享！</p></div></div>    
</body>
</html>