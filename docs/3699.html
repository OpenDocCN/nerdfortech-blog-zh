<html>
<head>
<title>Market Basket Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">市场篮子分析</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/market-basket-analysis-1c38613fdd6b?source=collection_archive---------3-----------------------#2021-06-20">https://medium.com/nerd-for-tech/market-basket-analysis-1c38613fdd6b?source=collection_archive---------3-----------------------#2021-06-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="ba52" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">经常想知道你是如何来到一个预算严格的购物中心，但最终总是超出预算，因为你认为这很划算？</p></blockquote><h1 id="e247" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">那我可能要说:“不是你的问题，是他们的问题。”👀</h1><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kf"><img src="../Images/bedac2af9d0a03db0c7735fe457b4188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_nxuWXfjpSmlhS1W"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">Viki Mohamad 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="6043" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated"><strong class="ak">什么是购物篮分析？</strong></h1><p id="5c88" class="pw-post-body-paragraph ii ij hi il b im kw io ip iq kx is it ky kz iw ix la lb ja jb lc ld je jf jg hb bi translated">购物篮分析是一种<strong class="il hj">数据挖掘</strong>技术，零售商通过更好地了解客户的购买模式来提高销售额。<strong class="il hj">它涉及分析大型数据集，如购买历史、揭示产品分组以及可能一起购买的产品。</strong></p><h1 id="5b13" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated"><strong class="ak">它在现实生活中究竟是如何运作的？</strong></h1><p id="f1c7" class="pw-post-body-paragraph ii ij hi il b im kw io ip iq kx is it ky kz iw ix la lb ja jb lc ld je jf jg hb bi translated">购物篮分析是大型零售商用来发现商品之间关联的关键技术之一。<strong class="il hj">它的工作原理是寻找在交易中频繁出现的项目组合。换句话说，它允许零售商识别人们购买的商品之间的关系。</strong></p><p id="994c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">为了更容易理解，可以从超市购物的角度来考虑购物篮分析。<strong class="il hj">购物篮分析获取交易级别的数据，该数据列出了客户在一次购买中购买的所有商品</strong>。该技术确定购买的产品与其他产品的关系。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es le"><img src="../Images/3e8107376c749ba292b70fe00c73a18a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ldcHHSZ4RHdT1LapHj8eDg.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">www.datacamp.com</figcaption></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es lf"><img src="../Images/879f81ea92ed59299d7598ca95cdf99c.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*6uVTNwBuTTvpOpMhBPHghQ.jpeg"/></div></figure><p id="e698" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">它按照上图中描述的频繁项集的逻辑工作。因此，看起来购买<strong class="il hj">牛奶</strong>的人也购买<strong class="il hj">面包</strong>，有趣的是，我们还可以看到购买<strong class="il hj">牛奶</strong>的人也购买<strong class="il hj">尿布</strong>(可能是因为他们可能有了孩子)。</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="e69c" class="jh ji hi bd jj jk ln jm jn jo lo jq jr js lp ju jv jw lq jy jz ka lr kc kd ke bi translated">那么如何发现这样的关联规则呢？</h1><p id="1f9e" class="pw-post-body-paragraph ii ij hi il b im kw io ip iq kx is it ky kz iw ix la lb ja jb lc ld je jf jg hb bi translated">关联规则被广泛用于分析零售购物篮或交易数据，并且旨在基于强规则的概念，使用感兴趣的度量来识别在交易数据中发现的强规则。</p><blockquote class="if ig ih"><p id="4e44" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">“经常一起买”</strong> →联想</p><p id="b079" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">“买了这件商品的顾客也买了”</strong> →推荐</p></blockquote><p id="132c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">然后，这些关系被用于构建包含所购买商品的If-Then规则的配置文件。例如:</p><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="86fd" class="lx ji hi lt b fi ly lz l ma mb">If {A} Then {B} : A =&gt; B</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es mc"><img src="../Images/931a4613c7782fbe18cbb4b4db883286.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*9J50LPtmb0fcgR5FhnDljQ.png"/></div></figure><p id="aa7b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">首先，我们需要了解一些技术术语:</p><ul class=""><li id="c842" class="md me hi il b im in iq ir ky mf la mg lc mh jg mi mj mk ml bi translated"><strong class="il hj">支持</strong></li><li id="b1e3" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated"><strong class="il hj">信心</strong></li><li id="3b46" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated"><strong class="il hj">抬起</strong></li></ul></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><p id="a92a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">1.<strong class="il hj">支持度</strong>:支持度是指项目集在数据集中出现的频率。数学上，</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es mr"><img src="../Images/e039e4740d0cb39e47dd211fa1bea50c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*LNkRd5kNDPaPC_Q2let1BA.jpeg"/></div></figure><p id="1877" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">2.<strong class="il hj">置信度</strong>:规则的置信度是包含{B}中所有项目的交易数和包含{A}中所有项目的交易数与包含{A}中所有项目的交易数之比。数学上，</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es ms"><img src="../Images/62c09aa02744a761e4168736c0446b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*NMJEw0m6aRczgusMnv2VrA.jpeg"/></div></figure><p id="ad7d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">3.<strong class="il hj">提升</strong>:第三个指标叫做提升或提升比率，是信心与预期信心的比率。预期置信度是置信度除以b的频率。提升告诉我们一个规则在预测结果方面比一开始就假设结果要好得多。提升值越大，关联越强。简单地说，如果X和Y是独立的，规则的提升是观察到的支持与预期的支持之比。数学上，</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es mt"><img src="../Images/32006d39a7de81645a7245f0b3af1c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2X8Na4uNCF102sT2tpEKVQ.jpeg"/></div></div></figure><p id="c5c4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">例如:</p><ul class=""><li id="04e1" class="md me hi il b im in iq ir ky mf la mg lc mh jg mi mj mk ml bi translated">假设有100个客户。</li><li id="4eeb" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated">其中10人买了牛奶，8人买了黄油，6人两样都买了。</li><li id="f57f" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated">买了牛奶= &gt;买了黄油</li><li id="6b62" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated"><strong class="il hj">支持</strong> = P(牛奶&amp;黄油)= 6/100 = 0.06</li><li id="9830" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated"><strong class="il hj">信心</strong> =支持/P(黄油)= 0.06/0.08 = 0.75</li><li id="43cd" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated"><strong class="il hj"> lift </strong> =置信度/P(牛奶)= 0.75/0.10 = 7.5</li></ul><p id="419f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">现在，假设你很熟悉这些术语，我们可以从一些技术实现开始。</p><p id="8eeb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">您可以在以下网址查看我的实际实现:</p><p id="0d10" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated"><a class="ae kv" href="https://github.com/Tirth-1999/Market-Basket-Analysis/blob/main/Market%20Basket%20Analysis%20Using%20Python.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/Tirth-1999/Market-Basket-Analysis/blob/main/Market % 20 Basket % 20 Analysis % 20 using % 20 python . ipynb</a></p><h1 id="ff4c" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">从导入执行购物篮分析所需的库开始(即MBA)</h1><ul class=""><li id="e22e" class="md me hi il b im kw iq kx ky mu la mv lc mw jg mi mj mk ml bi translated">我们将需要Numpy和熊猫进行基本的数据清理和数据准备</li><li id="9b1e" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated">我们将需要Matplotlib来可视化市场分布</li><li id="61ca" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated">最后，我们需要安装“先验”库来执行MBA</li></ul><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="3907" class="lx ji hi lt b fi ly lz l ma mb">pip install apyori</span></pre><h2 id="d38a" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">让我们导入所有这些，并开始清理数据</h2><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="a620" class="lx ji hi lt b fi ly lz l ma mb">import numpy as np<br/>import pandas as pd<br/>from apyori import apriori<br/>import matplotlib.pyplot as plt</span></pre><h2 id="6b3b" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">让我们来阅读由提供的CSV文件:</h2><div class="nk nl ez fb nm nn"><a href="https://github.com/Tirth-1999/Market-Basket-Analysis/blob/main/groceries_final.csv" rel="noopener  ugc nofollow" target="_blank"><div class="no ab dw"><div class="np ab nq cl cj nr"><h2 class="bd hj fi z dy ns ea eb nt ed ef hh bi translated">1999年第三次/市场篮子分析</h2><div class="nu l"><h3 class="bd b fi z dy ns ea eb nt ed ef dx translated">所有关于市场篮子分析。通过创建一个关于…的帐户，为Tirth-1999/市场篮子分析的发展作出贡献</h3></div><div class="nv l"><p class="bd b fp z dy ns ea eb nt ed ef dx translated">github.comDon别忘了分叉资源库</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kp nn"/></div></div></a></div><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="b276" class="lx ji hi lt b fi ly lz l ma mb">marketdf = pd.read_csv("groceries_final.csv",header = None)<br/>display(marketdf.head())<br/>print(marketdf.shape)</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es oc"><img src="../Images/aeb8cb8a4d5a3462448b07be55e2b292.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IO5nOdTuWzDMpk8UQW03MA.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">输入数据集</figcaption></figure><h2 id="cc39" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">我们可以看到，数据集包含9835行事务，其中包括多个项目；</h2><ul class=""><li id="d180" class="md me hi il b im kw iq kx ky mu la mv lc mw jg mi mj mk ml bi translated">有些项目不太常见</li><li id="0020" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated">其他的几乎在每笔交易中重复</li></ul><p id="87b4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">因此，我们需要过滤掉事务数据集，以获得一些选择标准，如<strong class="il hj">事务的最小长度</strong>和<strong class="il hj">更频繁的项目</strong>等</p><p id="7bb5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">解决方案:我们创建了一个名为“<strong class="il hj"> prune_Dataset </strong>”的函数；过滤掉无关紧要的数据</p><h2 id="c2dd" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">它需要的参数:</h2><ul class=""><li id="ea00" class="md me hi il b im kw iq kx ky mu la mv lc mw jg mi mj mk ml bi translated"><strong class="il hj"> input_df </strong>:输入数据集</li><li id="9962" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated"><strong class="il hj">长度_交易</strong>:要求最小长度</li><li id="9648" class="md me hi il b im mm iq mn ky mo la mp lc mq jg mi mj mk ml bi translated"><strong class="il hj"> total_sales_perc </strong>:仅考虑达到给定销售百分比的项目，即市场份额</li></ul><h2 id="367f" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">让我们创建一个函数来帮助我们修剪数据集。</h2><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="7694" class="lx ji hi lt b fi ly lz l ma mb">def prune_Dataset(input_df= marketdf,length_trans = 2,total_sales_perc = 0.40):<br/>    final_df2 = pd.DataFrame()<br/>    for i in range(input_df.shape[0]):<br/>        cnt = 0<br/>        new_input = input_df.iloc[:][i:i+1]<br/>        for j in range(new_input.shape[1]):<br/>            if new_input.iloc[:,j].isnull().bool():<br/>                if cnt &lt;= length_trans:<br/>                    break<br/>                if cnt == 31:<br/>                    final_df2 = final_df2.append(new_input,ignore_index=True)<br/>            cnt+=1<br/>    dict2 = dict()<br/>    for i in range(final_df2.shape[1]):<br/>        for j in range(final_df2.shape[0]):<br/>            if final_df2[i][j] == "nan":<br/>                continue<br/>            elif final_df2[i][j] in list(dict2.keys()):<br/>                dict2[final_df2[i][j]] += 1<br/>            else:<br/>                dict2[final_df2[i][j]] =1               <br/>    total_purchase = sum(list(dict2.values()))<br/>    market_sort = []<br/>    for i,j in sorted(dict2.items(), <br/>                      key=lambda item: item[1], reverse = True):<br/>        market_sort.append([i,j,float(int(j) * 100   /total_purchase)])<br/>    new_market_df = pd.DataFrame(market_sort,columns=["item_name","item_count","item_perc"])<br/>    new_market_df2 = new_market_df[new_market_df["item_name"].isnull() == False]<br/>    new_total_purchase = sum(new_market_df2["item_count"])<br/>    new_market_df3 = new_market_df2[["item_name","item_count"]]<br/>    li = []<br/>    for i in range(new_market_df3.shape[0]):<br/>        li.append(float(new_market_df3["item_count"][i:i+1] / new_total_purchase))<br/>    new_market_df3.insert(2,"item_perc",li,True)<br/>    out_df = pd.DataFrame()<br/>    for i in range(new_market_df3.shape[0]):<br/>        if sum(new_market_df3["item_perc"].head(i)) &gt; total_sales_perc:<br/>            out_df = new_market_df3.head(i-1)<br/>            break<br/>    final_list = [final_df2,new_market_df2,new_market_df3,out_df]<br/>    return final_list</span></pre><h2 id="b60c" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">哇哦。！那个功能很酷吧？</h2><p id="4244" class="pw-post-body-paragraph ii ij hi il b im kw io ip iq kx is it ky kz iw ix la lb ja jb lc ld je jf jg hb bi translated">它为我们提供了一个符合过滤标准的输出数据集；所以让我们看看我们有什么。</p><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="3267" class="lx ji hi lt b fi ly lz l ma mb">final_market_list = prune_Dataset()<br/>final_item_df = final_market_list[0]<br/>display(final_item_df.head(20))</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es od"><img src="../Images/78cd06be01a7c6426f0e4ba082def611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AM-GU44GYjscum5fFg-o_g.gif"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">输出数据集</figcaption></figure></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es oe"><img src="../Images/450c700962d5c4ef09cb7b2a5443a9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*ldDt9nmIA8oIkXEA6b-zcA.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">市场份额排名前20的售出商品列表</figcaption></figure><p id="61a7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">我们有这些数据框架:</p><ol class=""><li id="3b69" class="md me hi il b im in iq ir ky mf la mg lc mh jg of mj mk ml bi translated">最终_df2</li><li id="ffdc" class="md me hi il b im mm iq mn ky mo la mp lc mq jg of mj mk ml bi translated">新_市场_df2</li><li id="40a8" class="md me hi il b im mm iq mn ky mo la mp lc mq jg of mj mk ml bi translated">新_市场_df3</li><li id="616f" class="md me hi il b im mm iq mn ky mo la mp lc mq jg of mj mk ml bi translated">out_df</li></ol><p id="46c4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">这些所有的数据帧包含相同的数据，但它们采用某种格式，如<strong class="il hj"> new_market_df2包含*NaN*(即空值)，而new_market_df3不包含</strong>之间的微小差异。因为我们将来可能需要这些数据集，所以我们也通过列表返回它们。</p><p id="6bbd" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">现在，我们还确保我们也执行一些探索性的数据分析，以便我们可以可视化一些销售。</p><ol class=""><li id="5d25" class="md me hi il b im in iq ir ky mf la mg lc mh jg of mj mk ml bi translated">让我们来看一下“<strong class="il hj">项目计数</strong>与“<strong class="il hj">项目名称</strong>”的对比</li></ol><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="d72d" class="lx ji hi lt b fi ly lz l ma mb">plt.figure(figsize=[16,7])<br/>plt.bar(output_df["item_name"],output_df["item_count"])<br/>plt.ylabel("Item Numbers -&gt;")<br/>plt.xlabel("Item Names -&gt;")<br/>plt.xticks(rotation = 90)<br/>plt.show()</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es og"><img src="../Images/b81655d96ada8e313a505a424fefefaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VnwV8-lr763TjlhCtLVSAQ.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">输出df仅包括40%的最常见项目</figcaption></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es oh"><img src="../Images/0cdc01806c0ec080b6cc0ce179fa3503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aptEBcFqVFjc_CNXO7ND6Q.gif"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">最终项目无空包括所有项目</figcaption></figure><p id="40ca" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">2.让我们来形象化“<strong class="il hj">项目百分比</strong>”与“<strong class="il hj">项目名称</strong>”的对比</p><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="5027" class="lx ji hi lt b fi ly lz l ma mb">plt.figure(figsize=[16,7])<br/>plt.bar(output_df["item_name"],output_df["item_perc"])<br/>plt.ylabel("Item Percentage -&gt;")<br/>plt.xlabel("Item Names -&gt;")<br/>plt.xticks(rotation = 90)<br/>plt.show()</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es oi"><img src="../Images/b948e76eaa9454768317265b501f07b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ts-wkmwAQZIP43_Rytsa_A.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">输出df仅包括40%的最常见项目</figcaption></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es oj"><img src="../Images/981116dc7a545bf1156261277a7bb518.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*XfQ0PkkNcsL21Rc9duqtNw.gif"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">最终项目无空包括所有项目</figcaption></figure><p id="ef77" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">这看起来很完美；现在我们有了过滤后的数据集，所以是时候<strong class="il hj">实际应用购物篮分析</strong>了，但是为此，我们需要创建关联规则，所以让我们开始吧。</p><p id="56c2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">我们将使用先验库来生成这些关联规则，但是需要注意的是:</p><ul class=""><li id="a9a8" class="md me hi il b im in iq ir ky mf la mg lc mh jg mi mj mk ml bi translated"><strong class="il hj">只能处理列表列表形式的数据，不能处理pandas数据帧。</strong></li></ul><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="1384" class="lx ji hi lt b fi ly lz l ma mb">records = []<br/>row = final_item_df.shape[0]<br/>col = final_item_df.shape[1]<br/>for i in range(0,row):<br/>    records.append([str(final_item_df.values[i,j]) for j in range(0, col)])</span></pre><h2 id="8f8b" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">现在我们有了列表的列表，所以让我们生成一些关联规则</h2><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="3a7c" class="lx ji hi lt b fi ly lz l ma mb">association_rules = apriori(records, min_support=0.0045, min_confidence=0.2, min_lift=3, min_length=2)<br/>association_results = list(association_rules)<br/>print(association_results)</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es ok"><img src="../Images/369b2c4f755b5f124188c3b866808348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fq445BkPNp9NCv4Q1qkrow.gif"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">关联规则的输出</figcaption></figure><h2 id="4009" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">呜哇！！我们已经创建了关联规则，但是我们必须让它们看起来更好，所以我们必须格式化输出。</h2><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="0408" class="lx ji hi lt b fi ly lz l ma mb">results = []<br/>for item in association_results:<br/>    pair = item[0]<br/>    items = [x for x in pair]<br/>    <br/>    consequent = str(items[0])<br/>    antecedent = str(items[1])<br/>    support = str(int(float(str(item[1])[:7]) * 100000))<br/>    confidence = str(item[2][0][2])[:7]<br/>    lift = str(item[2][0][3])[:7]<br/>    <br/>    rows = (consequent,antecedent,support,confidence,lift)<br/>    results.append(rows)<br/>    <br/>    final_result = pd.DataFrame(results,columns=['Consequent','Anticedent','Support','Confidence','Lift'])</span></pre><h2 id="bbd7" class="lx ji hi bd jj mx my mz jn na nb nc jr ky nd ne jv la nf ng jz lc nh ni kd nj bi translated">最后，让我们看看关联规则是什么样子的</h2><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="af2a" class="lx ji hi lt b fi ly lz l ma mb">final_result= final_result.sort_values("Support",ascending=False, ignore_index=True)<br/>final_result = final_result[(final_result["Consequent"] != 'nan') &amp; (final_result["Anticedent"] != 'nan')]<br/>display(final_result)</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es ol"><img src="../Images/019e65321717146e3d4694e011e78be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*5LWXaA-ojsea_6gcFCwTjQ.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">基于事务的10大关联规则</figcaption></figure><p id="930c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">我们得到了51个关联规则的列表。所以让我们格式化它们</p><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="9ae5" class="lx ji hi lt b fi ly lz l ma mb">for i in range(final_result.shape[0]):<br/>    print(f"Seems like people who are buying {final_result.Anticedent[i:i+1].values[0]} are more likely to buy {final_result.Consequent[i:i+1].values[0]}.")</span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es om"><img src="../Images/41387a1da2fee8206db7a6873b2627bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Vi-NGzYuMK1pqfF8fyX9Gw.gif"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">所有关联规则发现</figcaption></figure><h1 id="6186" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">在这些关联规则的帮助下，让我们执行市场篮分析</h1><ol class=""><li id="5b2a" class="md me hi il b im kw iq kx ky mu la mv lc mw jg of mj mk ml bi translated"><strong class="il hj">要么把它们放在一起，这样我们可以增加这家店的销售额</strong></li><li id="95fe" class="md me hi il b im mm iq mn ky mo la mp lc mq jg of mj mk ml bi translated">另外，我们还可以把它们放在极端的点上(只给那些最有信心的人)，并在中间放些其他东西，以吸引更多的购物者。</li><li id="9738" class="md me hi il b im mm iq mn ky mo la mp lc mq jg of mj mk ml bi translated">我们可以在购买先行项目的基础上为后续项目制定折扣方案。</li></ol><p id="81c4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">因此，在这些知识的帮助下，我们可以大幅提高我们的销售额。</p><h1 id="c294" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">购物篮分析的实际应用</h1><p id="5303" class="pw-post-body-paragraph ii ij hi il b im kw io ip iq kx is it ky kz iw ix la lb ja jb lc ld je jf jg hb bi translated">当听到购物篮分析时，人们会想到购物车和超市购物者。重要的是要认识到，市场篮子分析还可以应用于许多其他领域。对于大多数互联网用户来说，市场购物篮分析的一个例子是亚马逊潜在感兴趣的产品列表。亚马逊告知顾客，购买了他们正在购买的商品的人也查看或购买了另一份商品清单。下面列出了市场篮分析在各种行业中的应用:</p><p id="7ec1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">1.<strong class="il hj">零售</strong>。在零售业中，购物篮分析可以帮助确定哪些商品是一起购买的，哪些是按顺序购买的，哪些是按季节购买的。这可以帮助零售商确定产品布局和促销优化(例如，结合产品激励)。卖汽水薯条或者汽水饼干有意义吗？</p><p id="28ac" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">2.<strong class="il hj">电讯</strong>。在电信行业，高流失率仍然是一个越来越令人担忧的问题，市场购物篮分析可用于确定客户正在使用的服务和购买的套餐。他们可以利用这些知识，将营销工作导向更有可能走上相同道路的客户。</p><p id="c345" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">3.<strong class="il hj">银行</strong>。在金融领域(例如银行业)，购物篮分析可用于分析客户的信用卡购买情况，以建立欺诈检测目的和交叉销售机会的档案。</p><p id="2488" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">4.<strong class="il hj">保险</strong>。在保险业，市场篮分析可用于建立档案，以检测医疗保险索赔欺诈。通过构建索赔概要，您可以使用概要来确定在指定的时间段内是否有多个索赔属于某个特定的索赔。</p><p id="15d9" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">5.<strong class="il hj">医学</strong>。在医疗保健或医学领域，购物篮分析可用于共病状况和症状分析，从而更好地识别疾病概况。它还可以用来揭示不同基因之间或环境影响和基因表达之间的生物学相关联系。</p><p id="d708" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">还有更多的领域需要介绍，但现在您已经很好地理解了。</p><h1 id="83c4" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">结论</h1><p id="c957" class="pw-post-body-paragraph ii ij hi il b im kw io ip iq kx is it ky kz iw ix la lb ja jb lc ld je jf jg hb bi translated">尽管是一个相对简单的算法，<strong class="il hj">购物篮分析是从你的客户那里发现隐藏模式的快速简单的第一步</strong>。另一个<a class="ae kv" href="http://rasbt.github.io/mlxtend/" rel="noopener ugc nofollow" target="_blank"> Mlxtend </a>是一个Python库，它为这类应用程序实现了Apriori算法。这里可以找到介绍教程<a class="ae kv" href="http://pbpython.com/market-basket-analysis.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="f893" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">现在你知道了，不是你，而是他们让你超出预算😂✌ ...</h1><h1 id="66d1" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">所以，下次你父母问你超出预算的原因，你知道该怎么回答了。😏💪😎享受吧。</h1><p id="96e7" class="pw-post-body-paragraph ii ij hi il b im kw io ip iq kx is it ky kz iw ix la lb ja jb lc ld je jf jg hb bi translated">希望这篇文章能给你带来一些好的东西。</p><pre class="kg kh ki kj fd ls lt lu lv aw lw bi"><span id="e3d1" class="lx ji hi lt b fi ly lz l ma mb">if Good == “Yes”:<br/>    print(“<br/>           Please show your love through ,<br/>           Claps 👏, <br/>           Love 🤍 and <br/>           sharing it to others 👩‍🤝‍🧑🏼<br/>         ”)<br/>else :<br/>    print(“Would surely improve more to get to your satisfaction!”)</span></pre><p id="006b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ky iv iw ix la iz ja jb lc jd je jf jg hb bi translated">安静点。</p></div></div>    
</body>
</html>