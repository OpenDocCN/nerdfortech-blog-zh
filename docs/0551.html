<html>
<head>
<title>Dynamically Increase SWAP (ZRAM) Size in Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Linux中动态增加交换(ZRAM)大小</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/dynamically-adjust-swap-zram-size-in-fedora-linux-78cd712808f2?source=collection_archive---------2-----------------------#2021-01-13">https://medium.com/nerd-for-tech/dynamically-adjust-swap-zram-size-in-fedora-linux-78cd712808f2?source=collection_archive---------2-----------------------#2021-01-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4a5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">内存不足？没问题！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7cc5cb72f8f637b2fb94a7cba6a2773c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qdVSPIAW13dkbvw9CobPcw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">资料来源:GIPHY &amp; Creazilla</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="5048" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="abae" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi ld translated"><span class="l le lf lg bm lh li lj lk ll di">S</span>T5】WAP内存有用，但是慢了就没人喜欢了。在Linux中，当物理内存(RAM)已满时，就会使用交换。如果系统需要更多的内存资源并且RAM已满，内存中的非活动页面将被移动到交换空间。</p><p id="a929" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Fedora多年来一直默认使用<a class="ae lm" href="https://en.wikipedia.org/wiki/Zram" rel="noopener ugc nofollow" target="_blank"> swap-on-zram </a>，并且默认安装在Fedora Workstation上。ZRAM在RAM中创建一个数据块设备，将原本要写入交换区(磁盘/ssd)的页面首先压缩，然后存储。这允许更快的交换I/O，并且数据压缩提供了大量的内存节省。</p><p id="8d84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">zram设备(通常为<code class="du ln lo lp lq b">/dev/zram0</code>)在早期引导期间创建时由zram生成器根据其配置文件设置大小。使用的内存不是预先分配的。它可以按需动态分配和释放。由于压缩，一个完整的<code class="du ln lo lp lq b">/dev/zram0</code>使用的内存是其大小的一半。</p><p id="e21f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">系统将正常使用RAM，直到它满了，然后开始分页到swap-on-zram，与传统的swap-on-drive相同。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="1ad2" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">按需动态增加交换区大小</h1><p id="76f3" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">如果您使用Fedora Linux，您应该已经安装并运行了zram0。您可以运行以下命令进行验证:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lr"><img src="../Images/327af342011cdd082e02521159f13d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NWT7gzZkvB2Xjyhe9Vdt1Q.png"/></div></div></figure><p id="5447" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，编辑位于<code class="du ln lo lp lq b">/usr/lib/systemd/zram-generator.conf</code>的zram-generator配置文件</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/9cbf3448f0b28fe56110b5038b94c9d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VheIxgQBiAVl9kGL7S7hAA.png"/></div></div></figure><p id="d8ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并根据需要增加交换区的大小，例如:将其增加到RAM大小的1倍。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="fe06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，重新启动服务以使新配置生效。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/33c707a68038a711b65ede26a5e0d522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FEI3mIc6C5rE80hU0cWoOA.png"/></div></div></figure><p id="c7b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过运行以下命令，验证交换大小是否已增加:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/a627d172618db531b4961b29afc7637a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0SQCHMK8DpzKZnTmnfWXw.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lx lu l"/></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="b6ed" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">参考</h1><ul class=""><li id="ea09" class="ly lz hi ih b ii ky im kz iq ma iu mb iy mc jc md me mf mg bi translated"><a class="ae lm" href="https://fedoraproject.org/wiki/Changes/SwapOnZRAM" rel="noopener ugc nofollow" target="_blank">https://fedoraproject.org/wiki/Changes/SwapOnZRAM</a></li></ul></div></div>    
</body>
</html>