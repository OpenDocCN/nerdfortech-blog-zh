<html>
<head>
<title>Desktop GUI Implementation using Flutter WEB (Part 2: Dock)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Flutter WEB 实现桌面 GUI(第 2 部分:Dock)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/desktop-gui-implementation-using-flutter-web-part-2-dock-3ade96f4af8a?source=collection_archive---------7-----------------------#2021-05-24">https://medium.com/nerd-for-tech/desktop-gui-implementation-using-flutter-web-part-2-dock-3ade96f4af8a?source=collection_archive---------7-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c41c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你已经通读了上一篇文章<a class="ae jd" href="https://achraf-feydi.medium.com/desktop-gui-implementation-using-flutter-web-part-1-introduction-42d21a6e7937" rel="noopener"> <strong class="ih hj">使用 Flutter WEB 实现桌面 GUI(第 1 部分:简介)</strong> </a>，我试图说明我在使用 Flutter WEB 实现<a class="ae jd" href="https://www.fluttergui.com/#/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> FlutterGUI </strong> </a>时遇到的一些主要困难。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/672d034edcc8a8935cc66b175bf40116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rza3G2Hwwo44d4bU6qKtmg.png"/></div></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="bac6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一部分中，我们将尝试实现一个类似于我在 FlutterGUI 项目中实现的 dock。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jx"><img src="../Images/65ac958b063eab98a93fc3b37663aaae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*TwKqtiQRFmdlcBcxj2720A.gif"/></div></figure><p id="320d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将重点解释其背后的机制，并用一些例子来说明。我会为你建立一个美丽的花式动画。</p><p id="6e19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jy">代码与我的 FlutterGUI repo 中的代码不同。这是一个更加简洁的版本</em>。</p><p id="56c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jy">dock 的实现将在 Flutter WEB 和桌面上工作</em></p><p id="306a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到本文结束时，您将能够建造所有这些码头，甚至更多:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jx"><img src="../Images/7d8cf70fa26083a7f0449c5f953a670b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*-wjr8HP8sTOP818dRK3rKw.gif"/></div></figure><h2 id="d0e0" class="jz ka hi bd kb kc kd ke kf kg kh ki kj iq kk kl km iu kn ko kp iy kq kr ks kt bi translated">目录:</h2><ol class=""><li id="875d" class="ku kv hi ih b ii kw im kx iq ky iu kz iy la jc lb lc ld le bi translated">设置基本的 dock</li><li id="03a7" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">检测鼠标悬停并将其转换为有价值的数据。</li><li id="7383" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">刷新您的数学</li><li id="c035" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">实现动画</li><li id="b89a" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">上下文菜单:右键单击！</li><li id="4edf" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">更多示例</li></ol><p id="1b75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，让我们尽情舞动吧！🔥</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="934f" class="lk ka hi bd kb ll lm ln kf lo lp lq kj lr ls lt km lu lv lw kp lx ly lz ks ma bi translated">设置基本的 Dock</h1><p id="c7f8" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq mb is it iu mc iw ix iy md ja jb jc hb bi translated">在下面的代码中，我只是使用<strong class="ih hj">堆栈</strong>和<strong class="ih hj">定位</strong>小部件将 Dock 定位到屏幕底部。</p><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="0e4c" class="jz ka hi mf b fi mj mk l ml mm">@override<br/>Widget build(BuildContext context) {<br/><br/>  return Scaffold(<br/>    appBar: AppBar(<br/>      title: Text(widget.title),<br/>    ),<br/>    body: _getBody(),<br/>  );<br/>}<br/><br/>Widget _getBody() {<br/>  return Stack(<br/>    children: [<br/>      Positioned(<br/>          bottom: 40,<br/>          child: _getDock())<br/>    ],<br/>  );<br/>  <br/>}<br/><br/>Widget _getDock() {<br/>  // Our dock will go here<br/>}</span><span id="e6e8" class="jz ka hi mf b fi mn mk l ml mm">// Default DockItem size (width &amp; hight)<br/>final _dockItemDefaultSize = 40.0;</span><span id="05bf" class="jz ka hi mf b fi mn mk l ml mm">// Dock item size + Padding.<br/>final _dockItemDefaultSizeWithSpacing = 100.0;</span><span id="41d8" class="jz ka hi mf b fi mn mk l ml mm">// List of items I'll be showing in the Dock.<br/>List&lt;int&gt; items = [for(var i=0; i&lt;6; i+=1) i];</span></pre><p id="9a59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将实现 Dock 本身。</p><p id="7ebe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码非常简单，一目了然。</p><p id="eeed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:<strong class="ih hj">粗体</strong>中的参数是最重要的。</p><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="8733" class="jz ka hi mf b fi mj mk l ml mm">Widget _getBody() {<br/>  return Stack(<br/>    children: [<br/>      Positioned(<br/>          bottom: 40,<br/>          right: 0,<br/>          left: 0,<br/>          child: _getDock())<br/>    ],<br/>  );<br/><br/>}<br/><br/>Widget _getDock() {<br/>  return Center(<br/>    child: Container(<br/>      color: Colors.<em class="jy">black38</em>,<br/>      width: <strong class="mf hj">_dockItemDefaultSizeWithSpacing*values.length</strong>,<br/>      child: Row(<br/>        mainAxisAlignment: <strong class="mf hj">MainAxisAlignment.spaceEvenly</strong>,<br/>        children: _getChildren(),<br/>      ),<br/>    ),<br/>  );<br/>}<br/><br/>List&lt;Widget&gt; _getChildren() {<br/><br/>  List&lt;Widget&gt; items = [];<br/>  for(var i = 0; i&lt; values.length;i++){<br/>     items.add(_generateItem(i));<br/>  }<br/><br/>  return items;<br/>}<br/><br/>Widget _generateItem(int index) {<br/><br/>  return Container(<br/>    width: <strong class="mf hj">_dockItemDefaultSizeWithSpacing</strong>,<br/>    child: Center(<br/>      child: Card(<br/>        child: Container(<br/>          height: _dockItemDefaultSize,<br/>          width: _dockItemDefaultSize,<br/>          child: Center(child: Text(values[index].toString()),),<br/>        ),<br/>      ),<br/>    ),<br/>  );<br/>  <br/>}</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mo"><img src="../Images/966ccc3da6456e3073c1a5a0e31bff23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1Oyd-yO1VbJJLfaq7s41g.png"/></div></div></figure><h1 id="dad6" class="lk ka hi bd kb ll mp ln kf lo mq lq kj lr mr lt km lu ms lw kp lx mt lz ks ma bi translated">检测鼠标悬停并将其转换为有价值的数据</h1><p id="d221" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq mb is it iu mc iw ix iy md ja jb jc hb bi translated">我们将从声明两个变量开始:</p><ul class=""><li id="ec32" class="ku kv hi ih b ii ij im in iq mu iu mv iy mw jc mx lc ld le bi translated"><strong class="ih hj"> _offset </strong>:将鼠标的位置保持在 dock 上。</li><li id="e9f9" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><strong class="ih hj"> _currentIndex </strong>:将持有悬停的 Dock-Item。</li></ul><p id="fd90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jy">(这些变量的使用将在后面说明)</em></p><p id="8c4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了检测鼠标位置，我们可以在 MouseRegion 小部件中扭曲 Dock。</p><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="9528" class="jz ka hi mf b fi mj mk l ml mm">var _offset = 0.0;<br/>var _currentIndex = -1;</span><span id="0bb6" class="jz ka hi mf b fi mn mk l ml mm">Widget _getDock() {<br/>  return Center(<br/>    child: MouseRegion(<br/>      onHover: (event){<br/>        setState(() {<br/>          _offset = <strong class="mf hj">event.localPosition.dx</strong>;<br/>          _currentIndex =  (_getOffset()).toInt();<br/>        });<br/>      },<br/>      onExit: (event){<br/>        setState(() {<br/>          _offset = 0 ;<br/>          _currentIndex = -1;<br/>        });<br/>      },<br/>      child: Container(<br/>        color: Colors.<em class="jy">black38</em>,<br/>        width: _dockItemDefaultSizeWithSpacing*values.length,<br/>        child: Row(<br/>          mainAxisAlignment: MainAxisAlignment.spaceEvenly,<br/>          children: _getChildren(),<br/>        ),<br/>      ),<br/>    ),<br/>  );<br/>}</span><span id="3cdb" class="jz ka hi mf b fi mn mk l ml mm">double _getOffset(){<br/>  return _offset/_dockItemDefaultSize;<br/>}<br/></span></pre><p id="3a7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> _getOffset() </strong>方法会将<strong class="ih hj"> _offset </strong>(取 0 和<strong class="ih hj"> width_of_Dock 之间的值)</strong>转换为 0 和 6 之间的值(项目数)。这只是简单的数学！</p><p id="a77f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了得到<strong class="ih hj"> _currentIndex </strong>，我们只需去掉<strong class="ih hj"> _getOffset() </strong>的小数部分</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es my"><img src="../Images/4f5439c110c1686e4fafd86d45461abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qF8vD9-1O32_F6Q6m_skkQ.png"/></div></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="a0b3" class="lk ka hi bd kb ll lm ln kf lo lp lq kj lr ls lt km lu lv lw kp lx ly lz ks ma bi translated">刷新您的数学</h1><p id="6e93" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq mb is it iu mc iw ix iy md ja jb jc hb bi translated">假设我们的鼠标悬停在第 3 项上。</p><p id="2660" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们假设我们希望我们的通用动画取 0 到 1 之间的值。因此，我们希望项目 3 由 1 激活，他的邻居 2 和 4 由 0.5 激活，其他邻居不激活。</p><p id="5b8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种行为可以很容易地用圆的方程式来表示。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mz"><img src="../Images/9246a595cf52a4d432bd489e7706242d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*0iDHXwacdqA3-lMduEE-_A.png"/></div></figure><p id="8487" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">圆心(x0，y0) </strong>和<strong class="ih hj">半径 r </strong>的圆的方程式为:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es na"><img src="../Images/885f680cf65da55f167aa17d0028adc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/1*yCI1YwCdF4CNh34Haojxzg.gif"/></div></figure><p id="b444" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们希望我们的圆以鼠标在 x 轴上的位置为中心。我们希望它在 y 轴上以 0 为中心。</p><p id="4289" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，x0 将采用 _getOffset()值，y0 将等于 0。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es my"><img src="../Images/df6d029a148b21d1b08761e95cde772c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aAfGvmNuRBTMAfUc_2iLqA.png"/></div></div></figure><p id="3366" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以很容易地从这个等式中推导出 y 的值:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nb"><img src="../Images/7daca0c703c87977e15ad7b255e085e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:324/1*MYQLD1RY_y478-q4GPCPmQ.gif"/></div></figure><p id="82c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的等式描述了圆心(x0，0)和半径 r 的圆的上半部分。</p><p id="9b3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，<strong class="ih hj"> y </strong>将根据<strong class="ih hj">x</strong>(Dock 项的位置)和<strong class="ih hj"> x0 </strong>(鼠标的位置)取 0 到 r 之间的值。</p><p id="103b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们需要 0 到 1 之间的值来制作动画，所以我们可以将<strong class="ih hj"> y </strong>除以<strong class="ih hj"> r </strong>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nc"><img src="../Images/15703ccad42702c3a4d8e4ef4701fc13.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/1*r3hqblmPF99bP6U2egNT0A.gif"/></div></figure><p id="03ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者我们可以简单地做:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nc"><img src="../Images/88bd3cc8da82b0526058f7bed48f35a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/1*yxL88LFa9EGbNyPbcXXXbg.gif"/></div></figure><p id="3a83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在回到编码:</p><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="c15a" class="jz ka hi mf b fi mj mk l ml mm">double _getVariation(int x, double x0,double radius){<br/>  if(_offset==0) return 0 ;<br/>  var z = radius - (x - x0)*(x - x0);<br/>  if(z&lt;0) return 0 ;<br/>  return sqrt(z/radius);<br/>}</span></pre></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="83ce" class="lk ka hi bd kb ll lm ln kf lo lp lq kj lr ls lt km lu lv lw kp lx ly lz ks ma bi translated">实现动画</h1><p id="263c" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq mb is it iu mc iw ix iy md ja jb jc hb bi translated">现在让我们制作一个简单的动画来测试我们的代码。</p><p id="9184" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用 _getVariation 公式计算出的动画值来为每个项目的底部添加边距。</p><p id="ec15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们认为:</p><ul class=""><li id="7588" class="ku kv hi ih b ii ij im in iq mu iu mv iy mw jc mx lc ld le bi translated"><strong class="ih hj">x</strong>:index+0.5 = Dock 项的中心。</li><li id="2c48" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><strong class="ih hj"> x0 </strong> : _getOffset =光标的位置。</li><li id="661e" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><strong class="ih hj"> r </strong>:等于 3 =我们希望动画影响以 x0 为中心的 3 个项目。</li></ul><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="6c4b" class="jz ka hi mf b fi mj mk l ml mm">Widget _generateItem(int index) {<br/><br/>  double dx = _getVariation(index + 0.5 ,_getOffset(),3);<br/>  return Container(<br/>    width: _dockItemDefaultSizeWithSpacing,<br/>    margin: EdgeInsets.only(bottom: dx * 20 ),<br/>    child: Center(<br/>      child: Card(<br/>        color: index==_currentIndex? Colors.<em class="jy">blue</em>:Colors.<em class="jy">white</em>,<br/>        child: Container(<br/><br/>          height: _dockItemDefaultSize,<br/>          width: _dockItemDefaultSize,<br/>          child: Center(child: Text(values[index].toString()),),<br/>        ),<br/>      ),<br/>    ),<br/>  );</span></pre><p id="1707" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们到了:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nd"><img src="../Images/b00b68cf12256fdc8135b855dd6953d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DJ5c08qAGHb7c32Wz7UOdA.gif"/></div></div></figure><h1 id="8cc4" class="lk ka hi bd kb ll mp ln kf lo mq lq kj lr mr lt km lu ms lw kp lx mt lz ks ma bi translated">上下文菜单:右键单击！</h1><p id="f3c9" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq mb is it iu mc iw ix iy md ja jb jc hb bi translated">如果您使用的是 Flutter Web，请将这行代码添加到 main 方法中，以禁用浏览器中的默认右键单击。</p><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="214d" class="jz ka hi mf b fi mj mk l ml mm">import 'dart:html';<br/><br/>void main() {<br/>  window.document.onContextMenu.listen((evt) =&gt; evt.preventDefault());<br/>  // ...<br/>}</span></pre><div class="ne nf ez fb ng nh"><a href="https://stackoverflow.com/questions/62244113/can-i-change-right-click-action-in-flutter-web-application" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab dw"><div class="nj ab nk cl cj nl"><h2 class="bd hj fi z dy nm ea eb nn ed ef hh bi translated">我可以在 flutter web 应用程序中更改右键单击动作吗？</h2><div class="no l"><h3 class="bd b fi z dy nm ea eb nn ed ef dx translated">在如何在 flutter web 应用程序中实现通过鼠标右键调用的工作上下文菜单的说明下面:导入…</h3></div><div class="np l"><p class="bd b fp z dy nm ea eb nn ed ef dx translated">stackoverflow.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv jo nh"/></div></div></a></div><p id="28c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将扭曲侦听器小部件中生成的项目，以检测右键单击事件。</p><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="5665" class="jz ka hi mf b fi mj mk l ml mm">List&lt;Widget&gt; _getChildren() {<br/><br/>  List&lt;Widget&gt; items = [];<br/>  for(var i = 0; i&lt; values.length;i++){<br/>     items.add(Listener(<br/>         onPointerDown: (event){<br/>           _onPointerDown(event,_currentIndex);<br/>         },<br/>         child: _generateItem(i)));<br/>  }<br/><br/>  return items;<br/>}</span><span id="11fc" class="jz ka hi mf b fi mn mk l ml mm">Future&lt;void&gt; _onPointerDown(PointerDownEvent event,int currentIndex) async {<br/><br/><br/>  List&lt;PopupMenuEntry&lt;int&gt;&gt; menuItems;<br/><br/><br/>    menuItems = [<br/>      PopupMenuItem(child: Text('apply +1'), value: 1),<br/>      PopupMenuItem(child: Text('apply -1'), value: 2),<br/>      PopupMenuItem(child: Text('set to 0'), value: 3),<br/>    ];<br/><br/><br/>  if (event.kind == PointerDeviceKind.mouse &amp;&amp;<br/>      event.buttons == kSecondaryMouseButton) {<br/>    final overlay =<br/>    Overlay.<em class="jy">of</em>(context).context.findRenderObject() as RenderBox;<br/>    final menuItem = await showMenu&lt;int&gt;(<br/>        context: context,<br/>        items: menuItems,<br/>        position: RelativeRect.fromSize(<br/>            event.position &amp; Size(48.0, 48.0), overlay.size));<br/>    <br/>    switch (menuItem) {<br/>      case 0:<br/>      // open;<br/>        break;<br/>      case 1:<br/>      // add 1;<br/>        values[currentIndex] = values[currentIndex] +1  ;<br/>        break;<br/>      case 2:<br/>      // minus 1 ;<br/>        values[currentIndex] = values[currentIndex]  - 1  ;<br/>        break;<br/>      case 3:<br/>      // set to 0;<br/>        values[currentIndex] = 0  ;<br/>        break;<br/>      default:<br/>    }<br/>    setState(() {});<br/>  }<br/>}</span></pre><p id="fec4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nw"><img src="../Images/a7e35e506dde38949ba84d0c385e6fb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7G-0ycsozD2-ldpNUf1TUQ.gif"/></div></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="c61e" class="lk ka hi bd kb ll lm ln kf lo lp lq kj lr ls lt km lu lv lw kp lx ly lz ks ma bi translated">更多示例</h1><h2 id="f16b" class="jz ka hi bd kb kc kd ke kf kg kh ki kj iq kk kl km iu kn ko kp iy kq kr ks kt bi translated">旋转动画</h2><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nx"><img src="../Images/f5ae4134ee018909e6d6d4268bffc1f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vG1poKZ7EyGQ9VxgvprceA.gif"/></div></div></figure><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="f745" class="jz ka hi mf b fi mj mk l ml mm">Widget _generateItemWithRotate(int index) {<br/>  double dx = _getVariation(index + 0.5, _getOffset(), 1);<br/>  print(dx);<br/>  return Container(<br/>    width: _dockItemDefaultSizeWithSpacing,<br/>    child: Center(<br/>      child: Transform.rotate(<br/>        angle: dx * pi / 2,<br/>        child: Card(<br/>          color: index == _currentIndex ? Colors.<em class="jy">blue </em>: Colors.<em class="jy">white</em>,<br/>          child: Stack(<br/>            children: [<br/>              Positioned.fill(<br/>                child: Transform.rotate(<br/>                    angle: -pi / 2, child: Center(child: Text("Click!"))),<br/>              ),<br/>              Opacity(<br/>                opacity: 1 - dx,<br/>                child: Container(<br/>                  color: Colors.<em class="jy">white</em>,<br/>                  height: _dockItemDefaultSize,<br/>                  width: _dockItemDefaultSize,<br/>                  child: Center(<br/>                    child: Text(values[index].toString()),<br/>                  ),<br/>                ),<br/>              ),<br/>            ],<br/>          ),<br/>        ),<br/>      ),<br/>    ),<br/>  );<br/>}</span></pre><h2 id="5fbd" class="jz ka hi bd kb kc kd ke kf kg kh ki kj iq kk kl km iu kn ko kp iy kq kr ks kt bi translated">翻转动画</h2><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nx"><img src="../Images/6b5de3682a1f8caadf4faf043a1a6385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*h89zKd-wzx38VbEdVTf0HA.gif"/></div></div></figure><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="e8d4" class="jz ka hi mf b fi mj mk l ml mm">Widget _generateItemWithFlip(int index) {<br/>  double dx = _getVariation(index + 0.5, _getOffset(), 1);<br/>  print(dx);<br/>  return Container(<br/>    width: _dockItemDefaultSizeWithSpacing,<br/>    child: Center(<br/>        child: Transform(<br/>      alignment: FractionalOffset.<em class="jy">center</em>,<br/>      transform: Matrix4.identity()<br/>        ..setEntry(3, 2, 0.002)<br/>        ..rotateX(pi * dx),<br/>      child: Card(<br/>        color: index == _currentIndex ? Colors.<em class="jy">blue </em>: Colors.<em class="jy">white</em>,<br/>        child: Stack(<br/>          children: [<br/>            Positioned.fill(<br/>              child: Transform.rotate(<br/>                  angle: pi, child: Center(child: Text("😎"))),<br/>            ),<br/>            Opacity(<br/>              opacity: 1 - dx,<br/>              child: Container(<br/>                color: Colors.<em class="jy">white</em>,<br/>                height: _dockItemDefaultSize,<br/>                width: _dockItemDefaultSize,<br/>                child: Center(<br/>                  child: Text(values[index].toString()),<br/>                ),<br/>              ),<br/>            ),<br/>          ],<br/>        ),<br/>      ),<br/>    )),<br/>  );<br/>}</span></pre><h2 id="4e07" class="jz ka hi bd kb kc kd ke kf kg kh ki kj iq kk kl km iu kn ko kp iy kq kr ks kt bi translated">彩色动画</h2><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jx"><img src="../Images/68a50a6483a52b1ccb66489e8ee12bfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*0VmbYr2hY9aWaVDckFM3Aw.gif"/></div></figure><pre class="jf jg jh ji fd me mf mg mh aw mi bi"><span id="a253" class="jz ka hi mf b fi mj mk l ml mm">Widget _generateItemColored(int index) {<br/>  double dx =<br/>      _getVariation(index + 0.5, _getOffset(), values.length.toDouble());<br/><br/>  return Container(<br/>    width: _dockItemDefaultSizeWithSpacing,<br/>    child: Center(<br/>      child: Card(<br/>        color: Color.<em class="jy">lerp</em>(Colors.<em class="jy">deepPurple</em>, Colors.<em class="jy">blue</em>, dx),<br/>        child: Container(<br/>          height: _dockItemDefaultSize,<br/>          width: _dockItemDefaultSize,<br/>          child: Center(<br/>            child: Text(<br/>              values[index].toString(),<br/>              style: TextStyle(<br/>                  color: Color.<em class="jy">lerp</em>(Colors.<em class="jy">deepPurple</em>, Colors.<em class="jy">white</em>, dx)),<br/>            ),<br/>          ),<br/>        ),<br/>      ),<br/>    ),<br/>  );<br/>}</span></pre><div class="ne nf ez fb ng nh"><a href="https://github.com/achreffaidi/dock_demo" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab dw"><div class="nj ab nk cl cj nl"><h2 class="bd hj fi z dy nm ea eb nn ed ef hh bi translated">achreffaidi/dock_demo</h2><div class="no l"><h3 class="bd b fi z dy nm ea eb nn ed ef dx translated">新的颤振应用。这个项目是颤振应用的起点。一些资源让你…</h3></div><div class="np l"><p class="bd b fp z dy nm ea eb nn ed ef dx translated">github.com</p></div></div><div class="nq l"><div class="ny l ns nt nu nq nv jo nh"/></div></div></a></div></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="ccd8" class="lk ka hi bd kb ll lm ln kf lo lp lq kj lr ls lt km lu lv lw kp lx ly lz ks ma bi translated">下一步是什么？</h1><p id="0655" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq mb is it iu mc iw ix iy md ja jb jc hb bi translated">在这一系列文章中，我将解释我是如何在这个项目中实现一些复杂的小部件的。希望能帮助其他开发者做出又酷又<strong class="ih hj">有用的</strong>项目。</p><p id="3269" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在下面找到所有的链接。一旦文章准备好，我会及时更新:</p><ul class=""><li id="48b3" class="ku kv hi ih b ii ij im in iq mu iu mv iy mw jc mx lc ld le bi translated"><a class="ae jd" href="https://achraf-feydi.medium.com/desktop-gui-implementation-using-flutter-web-part-1-introduction-42d21a6e7937" rel="noopener"> <strong class="ih hj">第一部分:简介</strong> </a></li><li id="8bd2" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><strong class="ih hj">第二部分:坞站</strong></li><li id="5793" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><a class="ae jd" href="https://itnext.io/desktop-gui-implementation-using-flutter-web-part-3-draggable-resizable-windows-46ea26049605" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">第三部分:可拖动&amp;可调整大小的窗口</strong> </a></li><li id="5072" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><strong class="ih hj">第四部分:Windows XP 崩溃</strong></li><li id="8350" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><strong class="ih hj">第五部分:全屏动画</strong></li><li id="9d59" class="ku kv hi ih b ii lf im lg iq lh iu li iy lj jc mx lc ld le bi translated"><strong class="ih hj">第 6 部分:Github 页面和自定义 URL </strong></li></ul></div></div>    
</body>
</html>