<html>
<head>
<title>Kubernetes Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes服务</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/kubernetes-services-f623c53213ed?source=collection_archive---------8-----------------------#2021-05-18">https://medium.com/nerd-for-tech/kubernetes-services-f623c53213ed?source=collection_archive---------8-----------------------#2021-05-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/72ba735210491d8d1b2ed18fae834573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IWBZR84Viqx51NYI.jpg"/></div></div></figure><h2 id="c281" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是Kubernetes服务？</h2><p id="98c8" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">一个<strong class="jq hj">服务</strong>是一种<strong class="jq hj"> Kubernetes </strong>资源，它使得一个代理被配置为将请求转发给一组pods。将接收流量的单元集由选择器决定，选择器匹配创建单元时分配给单元的标签。服务是Kubernetes中的一个REST对象，它的定义可以发送到Kubernetes主服务器上的Kubernetes apiServer来创建一个新的实例。</p><h2 id="29be" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">服务类型:</h2><p id="2b5c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated"><strong class="jq hj">cluster IP</strong>—这有助于限制集群内的服务。它在定义的Kubernetes集群中公开服务。</p><p id="2048" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj">节点端口</strong>—它将在已部署节点的静态端口上公开服务。自动创建一个<strong class="jq hj"> ClusterIP </strong>服务，<strong class="jq hj">节点端口</strong>服务将路由到该服务。可以使用<strong class="jq hj"> NodeIP:nodePort </strong>从集群外部访问该服务。</p><p id="b767" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj">负载平衡器</strong>—它使用云提供商的负载平衡器。<strong class="jq hj"> NodePort </strong>和<strong class="jq hj"> ClusterIP </strong>服务是自动创建的，外部负载平衡器将路由到这些服务。</p><p id="88d7" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj">Ingress</strong>-<strong class="jq hj">Kubernetes Ingress</strong>是一个API对象，它提供路由规则来管理外部用户对集群中服务的访问，通常是通过HTTPS/HTTP。<strong class="jq hj">入口</strong>允许您在集群内部配置和管理这些功能。</p><h2 id="9fed" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">如何创建服务？</h2><p id="6621" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">您可以为现有部署创建服务。我在之前的故事中提到过如何创建部署→ <a class="ae ko" href="https://nandhabalanmarimuthu.medium.com/kubernetes-deployment-a5214f04d800" rel="noopener">链接</a></p><p id="4f91" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">使用命令提示符:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d475" class="iq ir hi ku b fi ky kz l la lb">kubectl expose deployment my-web --port=8080 --target-port=80 --type=LoadBalancer</span></pre><h2 id="47e8" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用yml文件</h2><p id="bfd1" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">创建部署后，让我们在同一个文件夹中创建一个LoadBaalance类型的服务，为此，您必须创建一个<strong class="jq hj"> service.yml </strong>文件并粘贴下面的命令。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="1876" class="iq ir hi ku b fi ky kz l la lb">apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  name: my-service<br/>spec:<br/>  selector:<br/>    app: nginx<br/>  type: LoadBalancer<br/>  ports:<br/>    - protocol: TCP<br/>      port: 8080<br/>      targetPort: 80</span></pre><p id="6678" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">在选择器中，我们给我们的应用程序命名为nginx，因为我们已经以该名称进行了部署，端口应该是8080，正如我上面提到的，我们已经将我们的类型命名为负载平衡器。</p><p id="e700" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">之后，在您的终端中运行这个命令</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="7a13" class="iq ir hi ku b fi ky kz l la lb">kubectl apply -f service.yml</span></pre><p id="0b7e" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">运行这个命令后，进入浏览器并键入localhost:8080，您可以看到nginx的欢迎页面。</p><p id="27e9" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">您可以使用这个命令检查服务</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="35bb" class="iq ir hi ku b fi ky kz l la lb">kubectl get svc</span></pre></div><div class="ab cl lc ld gp le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="hb hc hd he hf"><p id="dad4" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">今天到此为止。希望你明白一切，感谢你的阅读。</p></div></div>    
</body>
</html>