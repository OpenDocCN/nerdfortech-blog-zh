<html>
<head>
<title>The Principles of Retries — As seen through a boy and girl story</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从一个男孩和女孩的故事看重试的原则</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/the-principles-of-retries-as-seen-through-a-boy-and-girl-story-5d16a0d60938?source=collection_archive---------4-----------------------#2019-04-05">https://medium.com/nerd-for-tech/the-principles-of-retries-as-seen-through-a-boy-and-girl-story-5d16a0d60938?source=collection_archive---------4-----------------------#2019-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c2d9bc577f3b19c36856876697ad521b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N2AltED5SLJBrgc3txPMHw.jpeg"/></div></div></figure><p id="4354" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在生活中，你依赖于许多外部团体，在软件中也是如此。就像真实世界一样，外部系统可能不总是满足我们系统的要求，因此“<strong class="is hj">重试</strong>”。让我们试着通过一个男孩和女孩的故事来捕捉一些重试的原则:)</p><p id="03e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">场景——一个男孩终于鼓起足够的勇气向他的爱人求婚。</p><p id="7af2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男生求婚，女生说→“我结婚了！”</strong></p><p id="7bb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →不要！</p><p id="9162" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→出现不可挽回的错误时使用此策略。这就像<code class="du jo jp jq jr b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">422 Unprocessable Entity</strong></a><strong class="is hj">, </strong><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/451" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">451 Unavailable For Legal Reasons</strong></a><strong class="is hj">, </strong><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/410" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">410 Gone</strong></a><strong class="is hj">. </strong></code>没有必要在这里重试。接受失败，继续前进。</p><p id="0591" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男生求婚，女生说→ …没什么</strong></p><p id="1403" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →再次尝试，牢记刺激因素。</p><p id="608e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→就像暂停一样。您请求了某些东西，但您不知道该请求是否被满足。你可以再试一次，但要小心。如果你不想太麻烦，尝试指数后退。如果没有刺激因素，没有重试的成本…我们就继续尝试，直到你得到一个明确的答案。<a class="ae js" rel="noopener" href="/@suhas_chatekar/why-you-should-use-the-recommended-http-methods-in-your-rest-apis-981359828bf7"> <strong class="is hj">等幂</strong> </a>在这里很重要。</p><p id="59ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男生求婚，女生说→“我会回来找你的”</strong></p><p id="d4c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →请求被确认。请使用请求 id 重试。</p><p id="bb2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→这里你知道要求达到了。总是发送带有 id 的请求，以便您稍后可以再次咨询服务器并检查请求是否被满足。</p><p id="00ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男生求婚，女生说→ …没什么</strong> <em class="jt">(但是另一个女生在等男生回她！)</em></p><p id="0c88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →重试到有时间再假设失败。</p><p id="9984" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→现在你有一个业务 SLA:)这就像一个客户在等待你的系统响应。如果你在需要的时间内没有得到明确的回应，假设失败，解放顾客(在这种情况下，对等待的女孩说是)。启动对外部系统的故障响应，以便在需要时采取纠正措施。</p><p id="e4ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男生求婚，女生昏迷。</strong></p><p id="a2e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →重试直到可行。</p><p id="98ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→就像<code class="du jo jp jq jr b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">500 Internal Server Error</strong></a><strong class="is hj">, </strong><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">503 Service Unavailable</strong></a><strong class="is hj">. </strong></code>重试，直到可行。</p><p id="11e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">男孩求婚，女孩说→“我不是你的另一半。”。去找她。”</p><p id="8f81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →重试，但使用其他人。</p><p id="d4cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→就像<code class="du jo jp jq jr b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/303" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">303 See Other</strong></a><strong class="is hj">. </strong></code>在新的服务器上尝试请求。</p><p id="baaa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男生求婚，女生说→“你不够有钱。”</strong></p><p id="84e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →在获得足够的凭证后重试。</p><p id="cb76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→就像<code class="du jo jp jq jr b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/426" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">426 Upgrade Required</strong></a></code>。符合要求后再试。如果能在运行时自动完成，那就太好了！比方说，您已经用完了点击图像分析 API 的积分。如果您有在运行时购买更多信用的机制，那就太好了，否则在一个特殊的地方标记请求，在那里人们可以采取纠正措施并再次放置请求进行处理。</p><p id="a325" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男生求婚，女生说→任何否定回答</strong></p><p id="5939" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →使用<strong class="is hj">备份选项重试。</strong></p><p id="0b2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→如果有备份选项，就用这个策略。假设您正在尝试发送短信，而当前提供商没有响应。您可以立即尝试不同的版本。或者说你正在尝试对一个地址进行地理编码。提前准备好备份选项，这样你就可以依靠它们了。</p><p id="2f79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">男孩求婚，女孩说→“是”</strong></p><p id="daa8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">重试策略</strong> →不需要。幸福生活:)</p><p id="c161" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析→请求成功。你的 HTTP 请求得了 200 分。万岁！</p></div></div>    
</body>
</html>