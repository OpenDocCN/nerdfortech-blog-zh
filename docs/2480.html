<html>
<head>
<title>A Beginner’s Guide to Bot Creation and Automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器人创建和自动化初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/a-beginners-guide-to-bot-creation-and-automation-8170954a5abe?source=collection_archive---------3-----------------------#2021-05-08">https://medium.com/nerd-for-tech/a-beginners-guide-to-bot-creation-and-automation-8170954a5abe?source=collection_archive---------3-----------------------#2021-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8c0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每项工作都有可以自动化的重复性任务和流程，这会占用你大量的时间。在数字世界中，自动化是最重要的技能。在本文中，我将向您介绍为各种应用程序创建机器人的基本技术。我们将一起创建简单的机器人，在谷歌中搜索，并自动喜欢Instagram上的随机帖子。所以，没有任何进一步的告别，让我们开始吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7892701c2c25a7e62b649bc429dda9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fmiZnmKvQKc7Wx1o"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="6226" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">谷歌搜索机器人</h1><p id="0e9a" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">首先，我们将建立一个简单的搜索机器人，自动打开网页浏览器，加载谷歌页面，并键入一个词进行搜索。一旦下一个页面加载，它会截图并点击图片，然后重定向到搜索的图片。它获取新页面的另一个截图，并点击它找到的第一张图片。它获取最终的屏幕截图并关闭浏览器。有趣不是吗？</p><p id="e53c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个名为<em class="kz">的文件夹。在VSCode中打开那个文件夹，创建一个名为<em class="kz"> simple.js </em>的文件。现在，用<code class="du la lb lc ld b">node init -y</code>安装一个新的Nodejs项目，然后用<code class="du la lb lc ld b">npm i playwright</code>安装<strong class="ih hj">剧作家</strong>库。对于那些想知道这个剧作家库是什么和它做什么的人来说，剧作家基本上是一个Node.js库，用一个API来自动化<a class="ae le" href="https://www.chromium.org/Home" rel="noopener ugc nofollow" target="_blank"> Chromium </a>、<a class="ae le" href="https://www.mozilla.org/en-US/firefox/new/" rel="noopener ugc nofollow" target="_blank"> Firefox </a>和<a class="ae le" href="https://webkit.org/" rel="noopener ugc nofollow" target="_blank"> WebKit </a>。它旨在实现跨浏览器的web自动化，这是一种环保、高效、可靠且快速的技术。你可以在https://github.com/microsoft/playwright找到更多关于剧作家的信息。一些替代品是木偶师或硒。</em></p><p id="6a7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了让async/await特性正常运行，您需要为Nodejs安装8 的最低版本<strong class="ih hj">。在开始自动化和机器人创建之前，你应该对谷歌Chrome提供的Chrome DevTools有一些基本的了解。这将使任务变得容易得多。当你加载一个网页，右击并选择检查选项，开发工具窗口出现。您想要自动化的网页部分总是有一个<strong class="ih hj">唯一元素</strong>。你需要寻找那个独特的元素。这可以通过打开DevTools并选择您想要自动化的页面部分来完成，然后在Inspect窗口的Elements选项卡下突出显示相应的HTML代码。您需要找到这部分代码中的独特元素。</strong></p><p id="e10e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">simple.js的代码如下:</p><pre class="je jf jg jh fd lf ld lg lh aw li bi"><span id="a57c" class="lj jx hi ld b fi lk ll l lm ln">// npm install playwright</span><span id="1650" class="lj jx hi ld b fi lo ll l lm ln">// may take a while for downloading binaries</span><span id="96f0" class="lj jx hi ld b fi lo ll l lm ln">// minimum node version 8 for async / await feature</span><span id="dcc2" class="lj jx hi ld b fi lo ll l lm ln">const playwright = require(‘playwright’);</span><span id="0c01" class="lj jx hi ld b fi lo ll l lm ln">const browserType = ‘chromium’; // chrome</span><span id="1e56" class="lj jx hi ld b fi lo ll l lm ln">//const browserType = ‘firefox’; // firefox</span><span id="a942" class="lj jx hi ld b fi lo ll l lm ln">//const browserType = ‘webkit’; // safari</span><span id="8d6a" class="lj jx hi ld b fi lo ll l lm ln">async function main() {</span><span id="ce1f" class="lj jx hi ld b fi lo ll l lm ln">// disable headless to see the browser's action</span><span id="a9f8" class="lj jx hi ld b fi lo ll l lm ln">const browser = await playwright[browserType].launch({ headless: false });</span><span id="4e63" class="lj jx hi ld b fi lo ll l lm ln">const context = await browser.newContext();</span><span id="7f6b" class="lj jx hi ld b fi lo ll l lm ln">const page = await context.newPage(); //wait for the browser to create a new page by putting await</span><span id="b189" class="lj jx hi ld b fi lo ll l lm ln">await page.goto(‘http://google.com'); //opening Google page</span><span id="9113" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForLoadState(‘load’);</span><span id="7615" class="lj jx hi ld b fi lo ll l lm ln">const searchTerm = ‘Automation Bots’;//the term to be searched in Google searchbar</span><span id="223a" class="lj jx hi ld b fi lo ll l lm ln">const input = await page.$(‘[name=”q”]’);//unique element in the search bar section of inspect source</span><span id="334c" class="lj jx hi ld b fi lo ll l lm ln">await input.type(searchTerm);</span><span id="f2b9" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(2000);//wait 2000 ms before pressing enter so that the entire term is typed</span><span id="a497" class="lj jx hi ld b fi lo ll l lm ln">await input.press(‘Enter’);</span><span id="f3c8" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForLoadState(‘load’);</span><span id="61ed" class="lj jx hi ld b fi lo ll l lm ln">await page.screenshot({ path: ‘result1.png’ });//taking screenshot of the page loaded</span><span id="8b64" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(3000);//wait 3s after taking screenshot </span><span id="60b9" class="lj jx hi ld b fi lo ll l lm ln">const imageClicks = await page.$(‘[data-hveid=”CAEQBA”]’); //clicking the images link</span><span id="8412" class="lj jx hi ld b fi lo ll l lm ln">await imageClicks.click();</span><span id="5c00" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForLoadState(‘load’);</span><span id="d37f" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(3000);</span><span id="f5b4" class="lj jx hi ld b fi lo ll l lm ln">await page.screenshot({ path: ‘result2.png’ });//taking screenshot of the new page loaded</span><span id="b79d" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(3000);</span><span id="732d" class="lj jx hi ld b fi lo ll l lm ln">const imageOne = await page.$(‘[alt=”Types of Bots in Automation Anywhere | Robotic Process Automation | justSajid”]’); //clicking the first image</span><span id="431a" class="lj jx hi ld b fi lo ll l lm ln">await imageOne.click();</span><span id="8fac" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForLoadState(‘load’);</span><span id="b512" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(3000);</span><span id="563f" class="lj jx hi ld b fi lo ll l lm ln">await page.screenshot({ path: ‘result3.png’ });</span><span id="cea3" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(3000);</span><span id="7480" class="lj jx hi ld b fi lo ll l lm ln">await browser.close(); //close the browser once everything is done</span><span id="67ac" class="lj jx hi ld b fi lo ll l lm ln">}</span><span id="9089" class="lj jx hi ld b fi lo ll l lm ln">main();</span></pre><p id="44e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们通过键入<code class="du la lb lc ld b">node simple.js</code>来运行代码。一旦代码开始运行，搜索机器人就会被激活，并开始执行代码中提供的所有任务。它拍摄的<strong class="ih hj">截图</strong>会自动存储在你的GoogleSearchBot文件夹中(关注下面视频中VSCode的左侧，在Bot启动之前和bot完成任务之后)。让我们来看看它的功能:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="0181" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">类似Bot的Instagram</h1><p id="f7db" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">现在，我们已经收集了创建机器人的基本知识，是时候向前推进一点了。因此，我们将设计一个像Bot一样的Instagram，它可以通过你的电子邮件和密码自动登录到你的Instagram帐户，并随机喜欢你feed上出现的帖子和评论。</p><p id="d692" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到现在为止，你们一定都知道任何Nodejs项目的入门包:创建一个名为InstaLikeBot的文件夹→打开VSCode →打开InstaLikeBot文件夹→创建一个名为instagram.js的文件→打开终端窗口并键入<code class="du la lb lc ld b">npm init -y</code> →通过键入<code class="du la lb lc ld b">npm install dotenv playwright</code>安装剧作家库和dotenv包→开始使用代码。</p><p id="0c7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们将利用<strong class="ih hj">环境变量</strong>。因此，安装<em class="kz"> dotenv </em>包，通过键入<code class="du la lb lc ld b">npm install dotenv</code>为您的项目创建一个虚拟环境。现在，创建一个名为<em class="kz">的文件。env </em>存储机密信息，如用户名、电子邮件、密码等。instagram.js的代码如下所示:</p><pre class="je jf jg jh fd lf ld lg lh aw li bi"><span id="dd61" class="lj jx hi ld b fi lk ll l lm ln">// create .env file</span><span id="42f6" class="lj jx hi ld b fi lo ll l lm ln">// EMAIL=</span><span id="1e46" class="lj jx hi ld b fi lo ll l lm ln">// PASSWORD=</span><span id="7529" class="lj jx hi ld b fi lo ll l lm ln">// npm install dotenv playwright</span><span id="5ca0" class="lj jx hi ld b fi lo ll l lm ln">require(‘dotenv’).config() //including the dotenv package files to handle all the bootstrap for us</span><span id="a189" class="lj jx hi ld b fi lo ll l lm ln">const playwright = require(‘playwright’);</span><span id="b77b" class="lj jx hi ld b fi lo ll l lm ln">const browserType = ‘chromium’; // chrome</span><span id="606e" class="lj jx hi ld b fi lo ll l lm ln">//passing in the login credentials by Environment Variables</span><span id="3b22" class="lj jx hi ld b fi lo ll l lm ln">const email = process.env.EMAIL;</span><span id="a346" class="lj jx hi ld b fi lo ll l lm ln">const password = process.env.PASSWORD;</span><span id="9862" class="lj jx hi ld b fi lo ll l lm ln">async function main() {</span><span id="3a49" class="lj jx hi ld b fi lo ll l lm ln">const browser = await playwright[browserType].launch({ headless: false });</span><span id="a244" class="lj jx hi ld b fi lo ll l lm ln">const context = await browser.newContext();</span><span id="c6de" class="lj jx hi ld b fi lo ll l lm ln">const page = await context.newPage();</span><span id="d695" class="lj jx hi ld b fi lo ll l lm ln">await page.goto(‘http://instagram.com');// Opening Instagram page</span><span id="af38" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForLoadState(‘load’);</span><span id="e6af" class="lj jx hi ld b fi lo ll l lm ln">// wait until the page is loaded because Instagram is a single page application</span><span id="ee5a" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(3000);</span><span id="38ec" class="lj jx hi ld b fi lo ll l lm ln">const inputEmail = await page.$(‘[name=”username”]’); //unique element of the input field</span><span id="2c3d" class="lj jx hi ld b fi lo ll l lm ln">await inputEmail.type(email, 2000);</span><span id="a330" class="lj jx hi ld b fi lo ll l lm ln">const inputPassword = await page.$(‘[name=”password”]’);</span><span id="ea56" class="lj jx hi ld b fi lo ll l lm ln">await inputPassword.type(password, 2000);</span><span id="7a79" class="lj jx hi ld b fi lo ll l lm ln">await inputPassword.press(‘Enter’);//in order to submit our login credentials</span><span id="b808" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(5000);</span><span id="d568" class="lj jx hi ld b fi lo ll l lm ln">// closes the modal by clicking on Not Now</span><span id="9b2a" class="lj jx hi ld b fi lo ll l lm ln">const notNow = await page.$(‘“Not Now”’);</span><span id="beb0" class="lj jx hi ld b fi lo ll l lm ln">await notNow.click();</span><span id="690a" class="lj jx hi ld b fi lo ll l lm ln">let current = 0;</span><span id="3bb8" class="lj jx hi ld b fi lo ll l lm ln">while (true) {</span><span id="4fd8" class="lj jx hi ld b fi lo ll l lm ln">// only get unliked images</span><span id="cac3" class="lj jx hi ld b fi lo ll l lm ln">let elements = await page.$$(‘[aria-label=”Like”]’);</span><span id="c3bf" class="lj jx hi ld b fi lo ll l lm ln">// stop if there are no new items</span><span id="b838" class="lj jx hi ld b fi lo ll l lm ln">if (elements.length — 1 == current) break;</span><span id="04ab" class="lj jx hi ld b fi lo ll l lm ln">for (; current &lt; elements.length; current++) {</span><span id="5933" class="lj jx hi ld b fi lo ll l lm ln">const element = elements[current];</span><span id="35a2" class="lj jx hi ld b fi lo ll l lm ln">// scrolls into view</span><span id="ec03" class="lj jx hi ld b fi lo ll l lm ln">await element.hover();</span><span id="780c" class="lj jx hi ld b fi lo ll l lm ln">await page.waitForTimeout(2000);</span><span id="6b4b" class="lj jx hi ld b fi lo ll l lm ln">// randomly like every third image</span><span id="7e3b" class="lj jx hi ld b fi lo ll l lm ln">if (Math.random() &gt; .3) {</span><span id="502d" class="lj jx hi ld b fi lo ll l lm ln">await element.click();</span><span id="e3ba" class="lj jx hi ld b fi lo ll l lm ln">}</span><span id="9cce" class="lj jx hi ld b fi lo ll l lm ln">}</span><span id="75dc" class="lj jx hi ld b fi lo ll l lm ln">}</span><span id="d76d" class="lj jx hi ld b fi lo ll l lm ln">console.log(‘Finished the script.’);</span><span id="d5a6" class="lj jx hi ld b fi lo ll l lm ln">await browser.close();</span><span id="dd77" class="lj jx hi ld b fi lo ll l lm ln">}</span><span id="db3c" class="lj jx hi ld b fi lo ll l lm ln">main();</span></pre><p id="6d78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们完事了。现在让我们通过键入<code class="du la lb lc ld b">node instagram.js</code>来运行这个项目。机器人被激活并开始工作，如下所示:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="7f9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，这都是我这边的。我希望你会喜欢创建机器人，并有效地利用你的时间。机器人的功能非常简单，易于理解。你可以随时给机器人添加额外的有趣的功能。此外，你现在可以尝试创建Spotify Listener Bot、Telegram Bot或Twitter Follower Bot。感谢阅读。祝你今天开心！玩的开心！</p></div></div>    
</body>
</html>