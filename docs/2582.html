<html>
<head>
<title>Unity’s New Input System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity的新输入系统</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/unitys-new-input-system-5cb357e18cdb?source=collection_archive---------3-----------------------#2021-05-12">https://medium.com/nerd-for-tech/unitys-new-input-system-5cb357e18cdb?source=collection_archive---------3-----------------------#2021-05-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2938372f50ed9bf136d81188abb5ba97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*S1rnxeEAhUNgi0tZa1xpWQ.gif"/></div></div></figure><p id="bf6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Unity的新输入系统更像是一个模块化的输入系统。这背后的想法是，我们定义动作，为这些动作的行为编码，然后由我们的输入设备触发。这意味着我们的代码不再需要单独编码来使用控制器、键盘和鼠标(您可以为不同的设备使用不同的键绑定来触发相同的操作)。新的输入系统使我们的游戏更容易增加多平台支持。</p><p id="45e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们首先使用包管理器将新的输入系统添加到我们的项目中(在搜索输入系统包时，确保您在Unity注册表中)。</p><p id="645c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo">窗口→软件包管理器→ Unity注册表→安装输入系统</em> </strong></p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8f5ddc288c8219c2caa5fb5725552bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eCqplRfht-bB6X-ok_Dk2w.gif"/></div></div></figure><p id="0bdd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，您将被要求重新启动项目，以启用新安装的输入系统。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/6dbab5d34383ecc656b0d3e23e1fe274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*3TGzh_yRTDwtzSbOr0DThg.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">是啊！！！</figcaption></figure><p id="75bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">注意:有了这个，你就不能使用旧的输入系统了。当您切换代码库以匹配所需的系统时，要切换回或让新旧输入系统同时运行，您可以执行以下操作，</em></p><p id="4ff3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo">编辑→项目设置→播放器→其他设置→主动输入处理</em> </strong></p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1efd65eb5fe4b6462344a55947208e93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wfM457CnB9F3M5NprmoA0w.gif"/></div></div></figure></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><p id="003c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，让我们创建一个<strong class="is hj">输入动作</strong>资产，它将存储我们期望的<strong class="is hj">动作</strong>以及各种设备所需的按键绑定。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/124499a39a597a04eb38d6d21caade11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*D1BzP5ZqnPFXXpj4r32ADg.gif"/></div></div></figure><p id="3765" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们好好看看<strong class="is hj">输入动作</strong>面板，</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/3fb2e9ddfe0988cc44f82c5cb0eb6d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oo6_l3zfs-zc1As9nJ0yNw.png"/></div></div></figure><p id="47e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将做一个基本的角色移动(向上、向下、向左、向右和对角移动)来展示新的<strong class="is hj">输入系统</strong>。</p><p id="bc0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，我们可以有一个处理各种玩家控制的<strong class="is hj">动作图</strong>，这意味着这里的<strong class="is hj">动作</strong>将是<strong class="is hj">移动</strong>并且<strong class="is hj">属性</strong>将进一步定义移动。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c16b863e1c87e484846ac997f0ddd643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WGauDDdV6qaJRb6Z_ITngw.gif"/></div></div></figure><p id="2de6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们将键盘和控制器绑定添加到我们的移动动作中。对于键盘，我想用<strong class="is hj"> W、A、S、D </strong>键分别将<strong class="is hj">向上移动</strong>、<strong class="is hj">向左移动</strong>、<strong class="is hj">向下移动</strong>和<strong class="is hj">向右移动</strong>。对于控制器，我想使用左边的模拟杆来控制运动。</p><p id="cc3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于我们希望移动连续发生，当我们按下所需的键/移动模拟操纵杆时，我们需要操作<strong class="is hj">动作类型</strong>属性。</p><p id="0a16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo">动作类型:</em> </strong></p><p id="a2d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">值</strong>:当需要跟踪连续的状态变化(如运动)时使用。如果同时使用两个设备，则返回对输出影响较大的设备。</p><p id="98d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">按钮</strong>:这是默认设置。它用于跟踪按键或按钮的按压(例如，按X跳转)。</p><p id="47a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">通过</strong>:这与<strong class="is hj">值</strong>基本相同，唯一的区别是当两个或多个设备同时使用时。<strong class="is hj">通过</strong>不检查哪个对输出影响更大。相反，将返回任何影响(最近的影响，不管它有多大的影响)。</p><p id="c38b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于这个测试用例，我们将使用<strong class="is hj">值</strong> <strong class="is hj">动作类型。</strong></p><p id="0232" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当使用<strong class="is hj">值</strong>或<strong class="is hj">传递</strong> <strong class="is hj">动作</strong> <strong class="is hj">类型</strong>时，我们发现自己拥有一个名为<strong class="is hj">控制</strong> <strong class="is hj">类型的附加参数，</strong>定义了我们期望从输入设备获得的输入类型。由于我们要处理垂直运动、水平运动以及它们的组合，我们将使用<strong class="is hj">控制</strong> <strong class="is hj">类型</strong>类型<strong class="is hj">矢量2 </strong>类型。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2ba70b4f7049f5a196f44e52ae28ae18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BG-8HUaPT-UQP1089EuMsg.gif"/></div></div></figure><p id="20c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“属性”选项卡还包含一个交互和处理器选项。<strong class="is hj">交互</strong>处理触发输入所需满足的条件(按住一个按钮，点击一个按钮，多次按下，等等)。<strong class="is hj">处理器</strong>在收到输入值时修改输入值(归一化值、反转值、设置死区等)。</p><p id="8545" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在可以添加键盘和控制器<strong class="is hj">动作</strong>，它们是按键绑定。</p><p id="7c67" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们创建一个动作(在这个例子中是运动)时，它带有一个绑定(尚未配置)。我将使用它来配置操纵杆，并为键盘绑定创建一个新的2D合成向量。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c7839b21d5885baa6ac52d17bfbe89c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6fsEa5xCtQm3RgrxKszsvw.gif"/></div></div></figure><p id="8c34" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">注意:“听”会找到你刚才按下的输入。因此，如果我移动左操纵杆，我会看到两个选项，一个是左操纵杆[游戏手柄](我选择的那个，因为我希望任何控制器都可以移动我的角色)，另一个是[Playstation 4]，这是我正在使用的控制器。</em></p><p id="e54d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我还可以创建一个<strong class="is hj">控件</strong> <strong class="is hj">方案</strong>，它根据所使用的输入设备对我的控件进行分类。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a59040243444a4d951ef5ae0e55b7acc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xO_h5SCcFEQe3wraqAoyHw.gif"/></div></div></figure><p id="10b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我创建了两个控制方案，一个用于键盘，另一个用于控制器。现在让我们根据我们的控制方案将我们的<strong class="is hj">动作</strong>分组。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1c7acf7f6e4a6389ed316c27497ce7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wJxqDzaiC2UANB37Jpk94g.gif"/></div></div></figure><p id="0a08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在剩下的就是保存我们的资产(我建议打开自动保存)。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/75e3ae08600f0af09719987ad8bfc4b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ghQjGe80VhaHWE1hJ43b2g.gif"/></div></div></figure><p id="702f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，我们就配置好了玩家输入。我们把这个加到<strong class="is hj">播放器里吧。</strong></p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/15279bdf486db311cd78a5dc797aa93a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*61tVortdZG1vKP2dLefL4g.gif"/></div></div></figure><p id="5b96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们向<strong class="is hj">玩家</strong>游戏对象添加了<strong class="is hj">玩家输入</strong>组件。这个组件需要一个<strong class="is hj">输入动作</strong>资产(我们在上面创建的那个)。我们可以在这里设置默认控制方案，也可以在接收到来自各个设备的输入时在这些方案之间自动切换。最后，它还包含一个<strong class="is hj">行为</strong>属性，该属性有以下选项:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/dda19028e4c1d5e76ddc051ea71bc500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3o2b7qtWTOKLLzeL_wpbA.png"/></div></div></figure><p id="08c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">行为</strong>字段<strong class="is hj"> </strong>负责确定玩家输入通知是否有事情发生的方式。这里，我将使用<strong class="is hj">调用Unity事件</strong>选项。允许我们在检查器中查看所有的<strong class="is hj">动作</strong>，并直接将我们的方法回调附加到它们上。这也是Unity推荐的方法。但归根结底，这是偏好的问题。我将使用本文推荐的方法。</p><p id="b8ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们继续为<strong class="is hj">玩家</strong>的行为编码。</p><p id="1da1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为我们使用新的输入系统，我们需要导入输入系统包来使用它的功能。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/b9a99a9007c4f261133d241935f39579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9owGlNcSIOG7uDqnLnP2Q.png"/></div></div></figure><p id="434b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，我们现在可以使用该包中定义的所有方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/89d24719c77543b60dd0e0e3405a4a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sG1uuVMC2lSvDdN3QHA7Tg.png"/></div></div></figure><p id="d6bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其中<strong class="is hj">运动()</strong>在<strong class="is hj">更新()</strong>中被调用，</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/4407a2deae4d2a13887a8bb78fc89642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*l0N3ZSPbxTwT_tB1bHHdZg.png"/></div></figure><p id="0775" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在剩下的就是把这个行为附加到<strong class="is hj">玩家</strong>游戏对象上。有了这个，我们就可以把它添加到我们一开始创建的<strong class="is hj">动作</strong> <strong class="is hj">动作</strong>中。我们现在可以参考<strong class="is hj">方向()。</strong>由此，把一切联系在一起。也就是说，我们定义了一个动作(开始时创建的<strong class="is hj">移动</strong> <strong class="is hj">动作</strong>)，我们对其行为(行为脚本中的<strong class="is hj">方向()</strong>)进行编码，该行为由输入触发(链接到开始时所示的动作中)。</p><p id="c8e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有了这个，我们应该能够使用键盘或控制器来移动我们的角色。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/21ea3ae18185de221d8e527f1d531a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kVaoc-XlOKBppd3p1hc12g.gif"/></div></div></figure><p id="819c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意鼠标光标在哪里。您应该看到<strong class="is hj">控制方案</strong>从键盘到控制器动态变化(它甚至显示所用控制器的类型)。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/9788cd88c47a8f7b1267bcb765fede11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JyW7keMp1ZwP-U9wGEZmUw.png"/></div></div></figure><p id="6805" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">注意:使用键盘控制方案的新输入系统的另一个好处是，默认输出值是标准化的。</em></p><p id="696c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您的阅读，更多内容敬请期待！！！</p></div></div>    
</body>
</html>