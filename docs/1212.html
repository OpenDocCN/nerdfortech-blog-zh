<html>
<head>
<title>How I Debugged A Cyberpunk 2077 Crash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何调试赛博朋克2077崩溃</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-i-debugged-a-cyberpunk-2077-crash-5febdd5d7bd2?source=collection_archive---------16-----------------------#2021-03-09">https://medium.com/nerd-for-tech/how-i-debugged-a-cyberpunk-2077-crash-5febdd5d7bd2?source=collection_archive---------16-----------------------#2021-03-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="dc47" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">一个关于我如何调试赛博朋克2077找到崩溃背后的原因的详细解释。</h2></div><p id="e01c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我记得我第一次下载《赛博朋克2077》时，它刚刚发行，我试着运行它。我立即看到了这个错误:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es jt"><img src="../Images/302a69efb3a08cbf435a0f86bb30f513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*sstGKwIBSuksSz3J8oPwpg.png"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">当你对比赛充满期待时，最好的事情就是</figcaption></figure><p id="7cf4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在花了几个小时在论坛和reddit上四处寻找后，我最终走进了一个死胡同。我尝试了一些事情，比如通过Steam验证文件的完整性，但是所有尝试都失败了。我最终放弃了，转而通过云游戏服务玩游戏(我用的是Geforce Now，效果很好！).</p><p id="656b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，我今天早上随机开始思考赛博朋克2077，并决定找出为什么游戏启动时不断崩溃。</p><h1 id="bef2" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">调试过程</h1><p id="7379" class="pw-post-body-paragraph ix iy hi iz b ja kx ij jc jd ky im jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">我做的第一件事是在调试器中打开游戏。我选择x64dbg是因为这是我现在常用的调试器。</p><p id="02aa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在调试器中运行应用程序，一直等到遇到一些异常。然后我发现了这个:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/5e49a5f189929d63261d7204619e694b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*rsFNTZRVWfTtJquQLl1X5g.png"/></div></div></figure><p id="2a21" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个访问冲突异常…嗯，也许我们应该看看调用堆栈？</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lh"><img src="../Images/aac6eb0dc8dd88600fc867e3803f07dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WJhbrw1ohf9qIGrtvFGORQ.png"/></div></div></figure><p id="aa35" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我只看到一些DirectX模块的函数调用，以及一个Windows DLL文件(光栅化)的d3d10warp模块。在进一步检查这些函数内部的代码后，我很快意识到继续对没有符号名称的代码进行逆向工程是一件痛苦的事情。</p><h1 id="0128" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">风铃来救援了！</h1><p id="8f5c" class="pw-post-body-paragraph ix iy hi iz b ja kx ij jc jd ky im jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">我决定尝试使用<a class="ae li" href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugger-download-tools" rel="noopener ugc nofollow" target="_blank"> Windbg </a>，希望它能给我更多的信息。我再次运行这个应用程序，这次是在Windbg中，下面是我看到的内容:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lj"><img src="../Images/52fd596173e7bffaa5ce7dd4b14aadbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5Qp6STnXniFd8z3GIkprA.png"/></div></div></figure><p id="74ea" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我点击右下角的“堆栈”来查看调用堆栈，你瞧！</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es lk"><img src="../Images/d659f47e2ad3b8c5c8bd57633f5f7833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*5XCcNLPw8lV6_UeIoeeEog.png"/></div></figure><p id="77e3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">符号名称！似乎访问冲突发生在D3D12设备的初始化期间，更具体地说是在处理着色器时。这让我起了疑心，我知道问题可能出在哪里。为了证实这一点，我打开了<strong class="iz hj"> dxdiag </strong>来检查我的GPU是否真的支持DirectX 12。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es ll"><img src="../Images/0a82563f18c0496b64f7614d50edcce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*NYatLSu0Ef_Tl74_xv1cuw.png"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">funskjonsniver =功能级别</figcaption></figure><p id="1cbb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">嗯，该死…我的GPU好像不支持DirectX 12，考虑到<a class="ae li" href="https://www.techpowerup.com/gpu-specs/radeon-hd-6970.c258" rel="noopener ugc nofollow" target="_blank">我的显卡已经11岁了</a>，这也不奇怪。</p><p id="b737" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然我还没有证实这是崩溃的实际原因，但假设这是非常合理的。因此，如果你在启动时遇到同样的赛博朋克2077崩溃，请确保你的GPU实际上支持DirectX 12。</p></div></div>    
</body>
</html>