<html>
<head>
<title>👨‍💻 Authentication And Authorization In .NET Core Web API Using JWT Token And Swagger UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">👨‍💻中的身份验证和授权。使用JWT令牌和Swagger UI的. NET核心Web API</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/authentication-and-authorization-in-net-core-web-api-using-jwt-token-and-swagger-ui-cc8d05aef03c?source=collection_archive---------0-----------------------#2021-03-06">https://medium.com/nerd-for-tech/authentication-and-authorization-in-net-core-web-api-using-jwt-token-and-swagger-ui-cc8d05aef03c?source=collection_archive---------0-----------------------#2021-03-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8766bcf1d5a2bbc31573d394713e6ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mcRiC8yjZKCIDxARL2VAiQ.png"/></div></div></figure><h1 id="0c9f" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="132e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">本文旨在使用JSON Web令牌简化认证和授权过程，并使用Swagger UI而不是PostMan检查整个过程。</p><h1 id="3364" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是ASP.Net核心？</h1><p id="1065" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">ASP。NET Core是一个开源和云优化的web框架，用于开发可以在Windows、Linux和Mac上开发和运行的现代web应用程序。它包括MVC框架，该框架现在将MVC和Web API的特性结合到一个Web编程框架中。</p><ul class=""><li id="06f1" class="km kn hi jq b jr ko jv kp jz kq kd kr kh ks kl kt ku kv kw bi translated">ASP。NET核心应用程序可以运行。净核心或完整的。NET框架。</li><li id="5e88" class="km kn hi jq b jr kx jv ky jz kz kd la kh lb kl kt ku kv kw bi translated">它旨在为部署到云中或在内部运行的应用程序提供优化的开发框架。</li><li id="bae6" class="km kn hi jq b jr kx jv ky jz kz kd la kh lb kl kt ku kv kw bi translated">它由开销最小的模块化组件组成，因此您在构建解决方案时可以保持灵活性。</li><li id="008d" class="km kn hi jq b jr kx jv ky jz kz kd la kh lb kl kt ku kv kw bi translated">您可以在Windows、Mac和Linux上跨平台开发和运行您的ASP.NET核心应用</li></ul><h1 id="a92e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是JSON Web令牌？</h1><p id="330c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">JSON Web令牌(或JWT)只是一个包含特定声明的JSON有效负载。jwt的关键属性是，为了确认它们是否有效，我们只需要查看令牌本身。…JWT由3部分组成:报头、有效载荷和签名。</p><p id="1aed" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">网址:<a class="ae lf" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"><em class="lg">https://jwt.io/</em></a></p><h1 id="9d9b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是Swagger，它在ASP.NET核心Web API中有什么用处？</h1><p id="23eb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="jq hj">大摇大摆</strong></p><p id="a017" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">Swagger是RESTful API的机器可读表示，它支持交互式文档、客户端SDK生成和可发现性。</p><p id="27db" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">Swashbuckle是一个开源项目，用于为使用ASP.NET核心MVC构建的Web APIs生成Swagger文档。</p><p id="86d8" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated"><strong class="jq hj"> Github </strong></p><div class="lh li ez fb lj lk"><a href="https://github.com/JayKrishnareddy/AuthenticationandAuthorization" rel="noopener  ugc nofollow" target="_blank"><div class="ll ab dw"><div class="lm ab ln cl cj lo"><h2 class="bd hj fi z dy lp ea eb lq ed ef hh bi translated">JayKrishnareddy/AuthenticationandAuthorization</h2><div class="lr l"><h3 class="bd b fi z dy lp ea eb lq ed ef dx translated">Net Core 3.1 API，带有Swagger UI和JWT令牌认证，并以安全的方式进行授权…</h3></div><div class="ls l"><p class="bd b fp z dy lp ea eb lq ed ef dx translated">github.com</p></div></div><div class="lt l"><div class="lu l lv lw lx lt ly io lk"/></div></div></a></div><p id="4bc7" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">创建一个新项目并选择ASP.NET核心Web应用程序:</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/3ea477f8dd502a07037c5dbf99525d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dR56gn9mP-pzNAPF.PNG"/></div></div></figure><p id="6f7e" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">点击下一步按钮后:</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/33b5af38487c9f95e2419f2b5f10de2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cpj_Crz3XBrJAeMa.PNG"/></div></div></figure><p id="8958" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">单击Create按钮创建一个示例API项目。</p><h1 id="28df" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">创建一个认证控制器</h1><p id="b056" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在身份验证控制器下创建此方法:</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="120e" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">创建另一种登录验证方法，通过硬编码方法对用户进行身份验证:</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="1abc" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">创建登录方法，以JSON格式传递参数来验证用户并生成令牌(JWT)。</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/3cd1519b37b8c20458af446bcc048610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yRqlqmfXLxoHrRDV.PNG"/></div></div></figure><p id="4d94" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">要使用JWT令牌和Swagger，我们需要将以上两个安装到我们的项目中</p><p id="2159" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">将该类添加到Authenticate Controller中，因为这些是验证用户所需的参数</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="da6b" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated"><strong class="jq hj">认证控制器</strong></p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="9557" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated"><strong class="jq hj">基本控制器</strong></p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="c324" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">添加此属性和构造函数以调用appsettings.json秘密JWT密钥及其颁发者:</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="c363" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">添加这个代码appsettings.json。我把它添加为基本键。您也可以根据自己的意愿添加它，并在Issuer下添加您的项目URL。</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="69fb" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">将此代码添加到Configure Services方法下的startup.cs文件中，以启用Swagger并生成JWT载体令牌。</p><p id="accf" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">该方法由运行时调用。使用此方法将服务添加到容器中。</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="ee75" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">该方法由运行时调用。使用此方法配置HTTP请求管道。</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="fd1f" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">当您运行该应用程序时，您将获得如下所示的swagger UI:</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/8b5af7aea55a7b8b824b479c4b054d8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OfrHL5EMmvVyWXh5.PNG"/></div></div></figure><p id="49f9" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">传递参数以生成令牌:</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="5457" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">然后点击执行按钮-&gt;你的令牌将被生成！</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/29abf900a818e256c42fed6c4da8b6f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*At5Lkt6DVVn3W-jf.PNG"/></div></div></figure><p id="9d4d" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">单击Authorize按钮，在Value框下添加这个令牌。</p><p id="8d4a" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">以如下例所示的方式添加令牌，即不记名令牌。</p><p id="645d" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">点击授权按钮</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/61df6189835855822eb418605ca87261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ECyklNdkcORx2k7s.PNG"/></div></div></figure><p id="85c4" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">现在这个文档中的每个方法都已经被授权了！</p><p id="d79a" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">如果你发现这篇文章对你有帮助，请为它鼓掌👏</p><p id="1196" class="pw-post-body-paragraph jo jp hi jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hb bi translated">……..继续学习！！！！</p></div></div>    
</body>
</html>