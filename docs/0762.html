<html>
<head>
<title>Basics of Beautiful Soup with Python3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蟒蛇汤的基础知识3</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/basics-of-beautiful-soup-with-python3-192215814a1c?source=collection_archive---------12-----------------------#2021-02-11">https://medium.com/nerd-for-tech/basics-of-beautiful-soup-with-python3-192215814a1c?source=collection_archive---------12-----------------------#2021-02-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/c1c7bbdd7308c8a538a2230d6cdcea15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*gBbykJIlt8LZdZSq52Fr_Q.png"/></div></figure><p id="ee5c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">大家好！今天我们将学习另一个对网络抓取非常有用的模块。我的第一篇博客是关于Python 3中selenium的基础知识。这个博客将会讲述另一个叫做美丽的汤的模块的基础知识，这个模块和selenium一起用于网络抓取。在继续之前，我还建议您先了解一下HTML的基础知识。</p><p id="1dbe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们从创建项目目录开始。我将打开我的命令提示符，进入我存储所有项目的文件夹，创建一个名为“bs4_tut”的新文件夹，然后进入该目录。</p><p id="0b0f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">假设你还没有安装virtualenv包。在这种情况下，您可以先这样做，然后再继续。然而，这不是必须的，你可以跳过所有这些步骤，直到得到你的虚拟环境被激活的信号。我更喜欢这样做，如果你想的话，你可以跟着做。现在，在您的主目录中，您可以:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="f1c8" class="jt ju hi jp b fi jv jw l jx jy">pip3 install virtualenv</span></pre><p id="d4ab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们从创建项目目录开始。所以我会打开我的命令提示符，转到我存储所有项目的文件夹，创建一个名为bs4_tut的新文件夹，这是'美丽的汤教程'的缩写，然后进入该目录。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="1223" class="jt ju hi jp b fi jv jw l jx jy">cd desktop<br/>mkdir bs4_tut<br/>cd bs4_tut</span></pre><p id="50a7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦到了那里，我们就创建了一个虚拟环境。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="f9f6" class="jt ju hi jp b fi jv jw l jx jy">virtualenv -p python .</span></pre><p id="57ae" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您收到如下消息:</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/3a7ad6d4d216f9b533829c8dce2ea3f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lnzNXqoot0j0qtu_uD14g.png"/></div></div></figure><p id="96fd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">那就好！这意味着创建了虚拟环境。让我们像这样激活虚拟环境:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="2b32" class="jt ju hi jp b fi jv jw l jx jy">Scripts/activate</span></pre><p id="52b4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于mac:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="c8aa" class="jt ju hi jp b fi jv jw l jx jy">source venv/bin/activate</span></pre><p id="85c3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">希望你能得到这样的提示:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="3595" class="jt ju hi jp b fi jv jw l jx jy">(THE FOLDER NAME WHERE YOU CREATED THE ENVIRONMENT)</span></pre><p id="74cc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们像这样安装bs4模块:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="3a14" class="jt ju hi jp b fi jv jw l jx jy">pip3 install bs4</span></pre><p id="0c0b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果安装成功，将会显示如下消息:</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ke"><img src="../Images/716b7da28ae7cd7362e16b45b571d3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gY88JQRVhgqtHGwxALA5tA.png"/></div></div></figure><p id="66a4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们创建一个名为“src”的新文件夹，将我们的代码文件与当前目录中的文件分开:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="b71d" class="jt ju hi jp b fi jv jw l jx jy">mkdir src<br/>cd src</span></pre><p id="e872" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在你可以使用任何你想要的编辑器，但是我用的是Vim。创建一个”。py”文件，并随意命名。我把我的名字叫做“main.py”。让我们导入urllib.request和漂亮的汤，如下所示:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="7569" class="jt ju hi jp b fi jv jw l jx jy">import urllib.request<br/>from bs4 import BeautifulSoup</span></pre><p id="8adb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们首先获得youtube.com的完整HTML。使用Python 3，只需几个步骤就可以完成。首先，我们将想要打开的链接提供给一个名为urlopen的urllib.request函数，然后我们请求读取并打印数据，如下所示:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="2a03" class="jt ju hi jp b fi jv jw l jx jy">html = urllib.request.urlopen('https://www.youtube.com').read()<br/>print(html)</span></pre><p id="8ae8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果我们运行这个:</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kf"><img src="../Images/20c94b29f037c67a13389c706cca3c68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZybeMuzte-5lA6Um-VbafQ.png"/></div></div></figure><p id="4e21" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">很难从<strong class="io hj"><em class="kg"/></strong>到<strong class="io hj"> <em class="kg"> </em> </strong>得到所有&lt;到&gt;的标签。这就是BeautifulSoup发挥作用的地方。让我们首先保存我们想要在变量中搜索&lt; a &gt;标签的链接。然后我们将告诉BeautifulSoup使用HTML解析器找到并打印所有的&lt; a &gt;标签:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="c651" class="jt ju hi jp b fi jv jw l jx jy">link = 'https://www.youtube.com'<br/>html = urllib.request.urlopen(link).read()<br/>search = BeautifulSoup(html, 'html.parser'<br/>a_tags = search('a')</span><span id="42d4" class="jt ju hi jp b fi kh jw l jx jy">print(a_tags)</span></pre><p id="5d50" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行该文件后，您可以看到:</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ki"><img src="../Images/6de35c4e38d0ccee7c04373ffa1b8450.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g4ca7ku7lt9XFp3_Bl5NUQ.png"/></div></div></figure><p id="e0e2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这就是BeautifulSoup的力量。我们可以得到HTML页面中所有的<a>标签。但是我们可以更进一步。如果我们想在所有的</a><a>标签中包含所有的‘href’属性呢？我们只是像这样使用“for循环”:</a></p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="8389" class="jt ju hi jp b fi jv jw l jx jy">for tag in all_tags:<br/>    print(tag.get('href'))</span></pre><p id="d1cc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">结果是:</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kj"><img src="../Images/c4cc2f3d677e11f22930c37891b0d679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w5IioSEgMkHZ132FjJcOQQ.png"/></div></div></figure><p id="93bf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们看看能否找到所有<div>标签的class属性:</div></p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="f6fb" class="jt ju hi jp b fi jv jw l jx jy">tags = search('div')</span><span id="2554" class="jt ju hi jp b fi kh jw l jx jy">for tag in tags:<br/>    print(tag.get('class'))</span></pre><p id="f098" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">结果是:</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kk"><img src="../Images/f979889b6740d72fc0ca3e14d0ebff86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*yc1u6GPTxsz4KybLW-si2w.png"/></div></div></figure><p id="348e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">原来如此。在未来，我们将整合硒和美丽的汤，以创造一个网页刮刀。</p><p id="d4e6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我希望你们都喜欢这个博客。如果你喜欢它，那么请按下鼓掌按钮，并确保关注我，因为我每周都这样放博客。以下是完整的代码:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="285c" class="jt ju hi jp b fi jv jw l jx jy">import urllib.request<br/>from bs4 import BeautifulSoup</span><span id="2377" class="jt ju hi jp b fi kh jw l jx jy">link = ‘<a class="ae kl" href="https://www.youtube.com'" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com'</a> #You can give any link you want<br/>html = urllib.request.urlopen(link).read()<br/>search = BeautifulSoup(html, ‘html.parser’)<br/>tags = search(‘div’) #You can search for any tag you want</span><span id="968e" class="jt ju hi jp b fi kh jw l jx jy">for tag in tags:<br/> print(tag.get(‘class’)) #You can ask for any attribute you want</span></pre><p id="8307" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">再次感谢你的阅读。</p></div></div>    
</body>
</html>