<html>
<head>
<title>Switching from Handlebars to Pug</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从车把切换到哈巴狗</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/switching-from-handlebars-to-pug-416693e1cb76?source=collection_archive---------1-----------------------#2022-08-14">https://medium.com/nerd-for-tech/switching-from-handlebars-to-pug-416693e1cb76?source=collection_archive---------1-----------------------#2022-08-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b2d10fb514846023d60630d2630f5d54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9-XSKlb2oMUYO03NRv0OA.png"/></div></div></figure><p id="3ba5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当创建<a class="ae jo" href="https://japapps.com" rel="noopener ugc nofollow" target="_blank">japapps.com</a>的时候，我想要一个最小且简单的方法来从文章数据库中生成 HTML。我选择从<a class="ae jo" href="https://handlebarsjs.com/" rel="noopener ugc nofollow" target="_blank">手柄开始</a>。</p><p id="76db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">直到最近，这种方式一直运转良好。我想为每个页面定义<a class="ae jo" href="https://www.opengraph.xyz/" rel="noopener ugc nofollow" target="_blank"> OpenGraph </a>数据，以便在社交网站上分享时更好地展开，并改善页面 SEO。</p><p id="2d6f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">HandlebarsJS 在渲染单个 HTML 时非常好用，但当你想使用布局时，我发现这种体验很难。这是非常有限的，这就是为什么我选择改用<a class="ae jo" href="https://pugjs.org/" rel="noopener ugc nofollow" target="_blank"> PugJS </a>的原因。</p><h2 id="d4e5" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">HandlebarsJS 页面只将内容传递给布局</h2><p id="a84f" class="pw-post-body-paragraph iq ir hi is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">当我向站点添加页面时，我还为特色图片和标题添加了 OpenGraph meta 标记。只是很好的 SEO 管家真的。</p><p id="26e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是对于 HandlebarsJS，我必须将它作为变量传递给布局，以便将它们添加到标题中。为了添加更多的标题内容，比如一个脚本标签或图像大小的元数据，我被迫扩展父模板，进一步影响所有其他页面，或者从 Javascript 代码中传递纯 HTML。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/48fd66a2c497d2225cf0764851c6e579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XO3VUXdKFkbX3RuugH_b9A.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">编辑 opengraph 元数据前后来自<a class="ae jo" href="https://www.opengraph.xyz/url/https%3A%2F%2Fjapapps.com%2Fjwords-beta" rel="noopener ugc nofollow" target="_blank"> opengraph.xyz </a>的预览</figcaption></figure><p id="633c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个网站上的大部分内容都是由数据库中的数据呈现的。对于这些页面，将数据作为变量传递很好，因为它们已经是变量了。</p><figure class="kq kr ks kt fd ij"><div class="bz dy l di"><div class="ky kz l"/></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">将数据从页面传递到模板以进行呈现</figcaption></figure><p id="6b78" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，对于我编写的任何静态页面，必须在 javascript 中添加一个控制器方法来服务页面，以便将带有标题和特征图像的对象传递给模板，这是一种代码味道。这意味着将内容拆分到两个地方，使维护变得困难。</p><p id="f9c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这不是一个大问题，但它随着我需要添加的每个文件而增长。</p><h2 id="a31b" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">使用 PugJS 将所有页面内容保存在一个文件中</h2><p id="079a" class="pw-post-body-paragraph iq ir hi is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">在 PugJS 中，您可以覆盖布局的块，而不是传递数据，这使得它既是可选的，又允许您将内容从子页面传递到模板，而不必依赖控制器方法。</p><p id="9654" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">甚至可以在<code class="du la lb lc ld b">pug</code>文件中选择布局，这是我用 javascript 为 HandlebarsJS 做的事情。</p><pre class="kq kr ks kt fd le ld lf lg aw lh bi"><span id="ffcf" class="jp jq hi ld b fi li lj l lk ll">extends layouts/main.pug</span></pre><p id="1689" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">块覆盖如下所示，在父模板中提及块，然后同一个块可以定义子文件中的内容。</p><pre class="kq kr ks kt fd le ld lf lg aw lh bi"><span id="f33b" class="jp jq hi ld b fi li lj l lk ll">//- template.pug<br/>html<br/>  head<br/>    block meta</span><span id="487b" class="jp jq hi ld b fi lm lj l lk ll"><br/>//- page.pug<br/>block meta<br/>  title Japapps - JWords Beta<br/>  meta(name='description' content='Sign up for the beta of our new Japanese learning app JWords. A spin off of a popular word puzzle.')<br/>  ...</span></pre><p id="ee86" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认情况下，<a class="ae jo" href="https://pugjs.org/language/inheritance.html" rel="noopener ugc nofollow" target="_blank"> PugJS 块</a>替换父布局内容，因此，在我的父布局中，我可以定义默认 meta 标签，并且只有需要替换这些标签的页面才能这样做。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d00eb24f0531af3caa65511a4e6abbab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n2CjPRBlt9h0dmt889_fhA.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">比较如何在 HandlebarsJS 和 PugJS 中将数据传递给模板</figcaption></figure><p id="a027" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我对新的建筑非常满意。另外，在切换到 PugJS 之后，我可以用一个处理程序方法替换不需要任何动态数据的文件的每个控制器。它只是确认是否有一个 pug 模板存在并为之服务。</p><h2 id="652f" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">用 PugJS 很容易重写</h2><p id="5bb7" class="pw-post-body-paragraph iq ir hi is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">由于 HandlebarsJS 是带有扩展的 HTML，所以很容易使用<a class="ae jo" href="https://html-to-pug.com/" rel="noopener ugc nofollow" target="_blank"> html-to-pug </a>转换成 PugJS。</p><p id="5e8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转换完 HTML 后，我重写了所有条件、变量插值和迭代器的引用。</p><pre class="kq kr ks kt fd le ld lf lg aw lh bi"><span id="d6bd" class="jp jq hi ld b fi li lj l lk ll">HandlebarsJS variable interpolation:<br/>&lt;p&gt;published {{ publishedAt }} by {{ author }}&lt;/p&gt;</span><span id="99c3" class="jp jq hi ld b fi lm lj l lk ll">PugJS variable interpolation:<br/>p published #{publishedAt} by #{author}</span></pre><h2 id="4437" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">HandlebarsJS vs PugJS 受欢迎程度</h2><p id="4e80" class="pw-post-body-paragraph iq ir hi is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">我不记得我一开始选择 HandlebarsJS 的确切原因，但我相信可能是因为它是我为 ExpressJS 找到的最受欢迎的库。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/4b935e398d46fdb4c3a06745fb7368af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyMhZNl29aAkdYMLlND1uQ.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">数据来自 https://stackshare.io/stackups/handlebars-vs-pug<a class="ae jo" href="https://stackshare.io/stackups/handlebars-vs-pug" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="bce4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">PugJS 以前是著名的 library Jade，但是由于商标问题，它被重新命名。我猜他们因此失去了一些意识点。</p><p id="84f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">至于什么时候使用哪种框架，我认为 PugJS 是对 ExpressJS 的完美补充。它甚至被提到了清单的首位。他们还为<a class="ae jo" href="http://expressjs.com/en/guide/using-template-engines.html#using-template-engines-with-express" rel="noopener ugc nofollow" target="_blank">如何将 PugJS 安装到 ExpressJS </a>提供了指导。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/8e3e3c0e44bf4205782607f03b5abbc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c84RLWWOG7OiGjilkw1mZA.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated"><a class="ae jo" href="https://expressjs.com/en/resources/template-engines.html" rel="noopener ugc nofollow" target="_blank">express js 支持的模板引擎列表</a></figcaption></figure><p id="057e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一方面，HandlebarsJS 甚至在他们自己的文档中声明，它非常适合在服务器端或 CLIs 中呈现纯内容。</p><div class="lp lq ez fb lr ls"><a href="https://handlebarsjs.com/installation/when-to-use-handlebars.html" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">何时(不)使用车把？把手</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">这一节应该给你一个车把优点和缺点的概述。理想情况下，它使您能够…</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">handlebarsjs.com</p></div></div></div></a></div><p id="9311" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有趣的是，我发现其他服务对这两种模板引擎都有不同的支持。<a class="ae jo" href="https://codepen.io/" rel="noopener ugc nofollow" target="_blank"> Codepen </a>支持 PugJS，而<a class="ae jo" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank"> carbon.now.sh </a>只有 HandlebarsJS 的语法高亮。</p><h2 id="9bb3" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">PugJS 对我来说非常有用</h2><p id="6040" class="pw-post-body-paragraph iq ir hi is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">PugJS 允许我使用单个文件在需要的地方呈现页面，或者在需要的时候传递数据。文件大小缩小了很多，在不增加任何复杂性的情况下，可读性更好。</p><p id="af07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">顾名思义，PugJS 是 Javascript 的。不过有 Python 的<a class="ae jo" href="https://pypi.org/project/python-jade/" rel="noopener ugc nofollow" target="_blank"> Jade 库</a>和 Ruby 的<a class="ae jo" href="https://haml.info/docs.html" rel="noopener ugc nofollow" target="_blank">Haml</a>。</p><p id="bbe0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望这能帮助你决定什么最适合你的项目，感谢你的阅读！</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/46fd334f11a217e3fcc55ef6146f2a36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2fhkrOO9sWOMe3up7d0KDg.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">作为最后的款待，这里有一个赛博朋克哈巴狗使用<a class="ae jo" href="https://www.midjourney.com/" rel="noopener ugc nofollow" target="_blank">中途</a>生成</figcaption></figure></div></div>    
</body>
</html>