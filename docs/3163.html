<html>
<head>
<title>Deploying Your GatsbyJS or Create-React-App Site to Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的GatsbyJS或Create-React-App站点部署到Firebase</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/deploying-your-gatsbyjs-or-create-react-app-site-to-firebase-cfe3671073cf?source=collection_archive---------18-----------------------#2021-05-31">https://medium.com/nerd-for-tech/deploying-your-gatsbyjs-or-create-react-app-site-to-firebase-cfe3671073cf?source=collection_archive---------18-----------------------#2021-05-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a10f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您刚刚完成了网站、web应用程序、前端等的构建，现在您想使用Google的Firebase来部署它。下面的说明是给盖茨比的。如果您正在使用Create React App，请滚动到底部查看不同之处。</p><h1 id="7abc" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">设置Firebase帐户和Firebase项目</h1><ol class=""><li id="a390" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">如果你还没有，在Firebase上创建一个帐户(如果你有一个Google帐户，那么你可以用它自动登录)。</li></ol><p id="6832" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.然后，您需要点击窗口右上角的<strong class="ih hj">转到控制台</strong></p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es km"><img src="../Images/cca1c292efb8a5ea232b1adabfbce658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*678Jkpe5-dBmITEwSt8X2Q.jpeg"/></div></div></figure><p id="20aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.点击<strong class="ih hj">添加项目</strong>平铺</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es ky"><img src="../Images/bd238ba44e920c0e7b88b03909bd637f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SIbZ12aVehhJnv97c6yMzA.png"/></div></div></figure><p id="e631" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.为您的项目命名。</p><p id="6baa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">补充说明:firebase网站的URL是<a class="ae kz" href="http://website-name.web.app." rel="noopener ugc nofollow" target="_blank">http://website-name . web . app .</a>如果你想编辑“网站名称”，使其与Firebase生成的内容不同，请确保点击下面的小椭圆(黄色箭头)，一旦你键入项目名称，就会生成该内容。</p><ul class=""><li id="de44" class="kb kc hi ih b ii ij im in iq la iu lb iy lc jc ld kj kk kl bi translated">Firebase将此称为项目ID——项目的全局唯一标识符。</li><li id="ece9" class="kb kc hi ih b ii le im lf iq lg iu lh iy li jc ld kj kk kl bi translated">这将允许你编辑你想要的“网站名称”。</li><li id="fd55" class="kb kc hi ih b ii le im lf iq lg iu lh iy li jc ld kj kk kl bi translated">如果您已经有了一个自定义的域URL，那么您可以在项目设置完成后使用它。</li><li id="310a" class="kb kc hi ih b ii le im lf iq lg iu lh iy li jc ld kj kk kl bi translated">点击“继续”后，您将无法更改项目ID。</li></ul><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es lj"><img src="../Images/a791512923466d0f653c6f34860e01fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ringdMnG4lS94bLhRE7EUg.png"/></div></div></figure><p id="ab3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.选择是否为您的站点启用Google Analytics，然后单击继续。如果您选择启用此功能，下一个屏幕将询问您使用哪个帐户。我只需选择Firebase 的默认账户<strong class="ih hj">。</strong></p><p id="40d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后点击<strong class="ih hj">创建项目</strong></p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es lk"><img src="../Images/07a05e6668588cfc3e13aa8a049f8092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AEnWxZ4YByTWDIpfDVKSxg.png"/></div></div></figure><h1 id="f915" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">在您站点的目录中设置Firebase CLI</h1><ol class=""><li id="f8bf" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">打开您的终端并全局安装Firebase CLI</li></ol><pre class="kn ko kp kq fd ll lm ln lo aw lp bi"><span id="f4e3" class="lq je hi lm b fi lr ls l lt lu">npm install -g firebase-tools</span></pre><p id="f876" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.安装后，连接您的Firebase帐户</p><pre class="kn ko kp kq fd ll lm ln lo aw lp bi"><span id="2bb8" class="lq je hi lm b fi lr ls l lt lu">firebase login</span></pre><p id="3bd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将询问您Firebase是否可以收集使用情况或错误报告'<em class="lv"> y' </em>或'<em class="lv"> n </em>'(我选择了no)。然后它会打开一个谷歌登录页面。选择您的帐户以允许Firebase CLI访问您的帐户。如果它连接，您将看到一个成功连接的屏幕。此外，在终端中，您应该会看到一条消息，显示<strong class="ih hj">成功</strong>！<strong class="ih hj">以您的[email]@email.com身份登录</strong></p><p id="d53d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.导航到项目的根目录，并在中初始化firebase</p><pre class="kn ko kp kq fd ll lm ln lo aw lp bi"><span id="f723" class="lq je hi lm b fi lr ls l lt lu">firebase init</span></pre><p id="4fc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.它将询问"<strong class="ih hj">您希望为此文件夹设置哪些Firebase CLI功能？</strong>“按向下箭头键，直到“<strong class="ih hj">托管:配置和部署Firebase托管站点</strong>”选项以蓝色突出显示。按空格键选择它，然后按Enter键</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es lw"><img src="../Images/61c493f7af508b27b285a67ea3ef4873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Q1t75s4nzbZM0BdQilKJg.png"/></div></div></figure><p id="47eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.然后，它将为您提供将项目目录与Firebase项目相关联的选项。使用向上和向下箭头键突出显示“<strong class="ih hj">使用现有项目</strong>”，然后按回车键。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es lx"><img src="../Images/1b63134f16ee47da076a9f8a9ee4b1c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vU7MLvR00qX1gSJ3kL5urQ.png"/></div></div></figure><p id="ce24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.您应该会看到Firebase项目的列表。使用向上和向下箭头键选择之前在上面创建的选项，然后按Enter键</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es ly"><img src="../Images/def2fdf24c9447b44c00bc6f6d39786e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ieFVhOepXgOST4GsY3rOxQ.png"/></div></div></figure><p id="641d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.它会问"<strong class="ih hj">你想用什么作为你的公共目录？</strong>"键入'<strong class="ih hj"> public </strong>'并按回车键</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es lz"><img src="../Images/3dcb1f39cfb2968f21fa26ead7e027fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v5UK-Ot3Wni32Ej8KKznMA.png"/></div></div></figure><p id="dfc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.是否配置为单页应用程序，键入'<strong class="ih hj"> n </strong>'并按回车键</p><p id="5e82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.如果要求覆盖任何内容，键入'<strong class="ih hj"> n </strong>'并按回车键</p><p id="442f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10.如果要求用GitHub设置自动构建和部署，现在输入'<strong class="ih hj"> n </strong>'。(这可以在以后更改)</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es ma"><img src="../Images/1788b326457d412ff330f4631f44e828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qzsI1nzYgJGZrxenUuxfug.png"/></div></div></figure><p id="5ad7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">11.然后将您的所有更改提交到您的存储库中</p><pre class="kn ko kp kq fd ll lm ln lo aw lp bi"><span id="95b5" class="lq je hi lm b fi lr ls l lt lu">git add .<br/>git commit -m "Initialized Firebase"<br/>git push</span></pre><h1 id="17af" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">将您的站点部署到Firebase</h1><ol class=""><li id="4271" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">当您的Gatsby站点准备好进行部署时，运行以下命令</li></ol><pre class="kn ko kp kq fd ll lm ln lo aw lp bi"><span id="5eaf" class="lq je hi lm b fi lr ls l lt lu">gatsby clean<br/>gatsby build<br/>firebase deploy --only hosting</span></pre><p id="fbfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.如果你正在使用Create-React-App，操作说明是非常相似的，所以请按照“在你的站点目录中设置Firebase CLI”中的步骤7进行操作。然后注意下面的差异:</p><ul class=""><li id="f9d7" class="kb kc hi ih b ii ij im in iq la iu lb iy lc jc ld kj kk kl bi translated">不要把你的公共目录叫做' public '，而是写成'<strong class="ih hj"> build </strong>'。</li><li id="75ab" class="kb kc hi ih b ii le im lf iq lg iu lh iy li jc ld kj kk kl bi translated">如果您计划使用客户端路由，则将单页应用问题设置为'<strong class="ih hj"> y </strong>'而不是' n '。</li><li id="c547" class="kb kc hi ih b ii le im lf iq lg iu lh iy li jc ld kj kk kl bi translated">最后，在<code class="du mb mc md lm b">firebase.json</code>文件中，您需要为<code class="du mb mc md lm b">service-worker.js</code>文件设置适当的HTTP缓存头，否则您将无法看到第一次部署后的更改。在<code class="du mb mc md lm b">"hosting"</code>键中添加以下代码:</li></ul><pre class="kn ko kp kq fd ll lm ln lo aw lp bi"><span id="d484" class="lq je hi lm b fi lr ls l lt lu">{<br/>  "hosting": {<br/>    ...<br/>    "headers": [<br/>      {"source": "/service-worker.js", "headers": [{"key": "Cache-Control", "value": "no-cache"}]}<br/>    ]<br/>    ...</span></pre><p id="d5f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，您可以运行生产构建和部署。</p><pre class="kn ko kp kq fd ll lm ln lo aw lp bi"><span id="915f" class="lq je hi lm b fi lr ls l lt lu">npm run build // or yarn build</span><span id="2c95" class="lq je hi lm b fi me ls l lt lu">firebase deploy --only hosting</span></pre><p id="05a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">恭喜你。您的站点已正式部署。你的终端应该显示一个“主机URL ”,这样你就可以导航到你的站点。</p><p id="17ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编码快乐！</p></div></div>    
</body>
</html>