# Windows 网络安全系列:NTFS 的广告。

> 原文：<https://medium.com/nerd-for-tech/windows-cybersecurity-series-ntfss-ads-68f5333ef09e?source=collection_archive---------3----------------------->

您可能知道， **NTFS** 是 Windows 操作系统中使用的默认文件系统，它基本上由表示属性和所包含的数据的子结构组成，但也有一个**备用数据流部分**或 **ADS** ，这对许多应用程序来说几乎是不可见的。

“新”备用数据流的目的是以隐藏的方式将文件存储到系统中的其他文件或文件夹中，这些新的“隐藏文件”最终仍然是 **NTFS** 结构，但是不能以简单的方式访问。要访问特定的替代内容，您必须使用命令行界面，尤其是使用`type`和`notepad`命令。

## 怎么做到的？

为了证明这一点，我们需要两个。txt 文件，相当简单。第一个叫`normal.txt`，第二个就叫`hidden.txt`。每个文件的内容无关紧要。

然后，假设文件在用户桌面目录的根目录下，我们需要首先检查每个文件的散列，这是用`Certutil`命令完成的，并且是绝对可选的。

```
cd %userprofile%\desktop
Certutil -hashfile normal.txt
Certutil -hashfile hidden.txt
```

在此之后，让我们现在创建广告(备用数据流)。`normal.txt`文件将托管`hidden.txt`文件，甚至维护相同的哈希值。这是这样完成的:

`type hidden.txt > normal.txt:secret.txt`

我们将类型为`hidden.txt`的输出通过管道传输到`normal.txt`文件的 **ADS** 中，该文件在本例中被称为`secret.txt`，您可以随意对其进行命名，但必须记住以供以后调用。

在这之后，你可以`dir`，你会看到两个文件完全相同。

好，现在让我们看看**广告**的内容。

要查看存储在 **ADS** 文件中的数据，我们需要执行`notepad`命令。实际上，它会在那里显示内容。下面是怎么做的。

`notepad normal.txt:secret.txt`

这里我指的是`normal.txt`文件的**广告**。

最酷的是，你可以为一个广告创造尽可能多的**广告**。txt 文件，只需在冒号(:)后引用不同的名称，就不会出现提示，以便您可以确认新的部分。

另外，你可以**将**广告**内容扩展到一个新文件中，我喜欢称之为将**广告**内容“回滚”到一个文件中，无论如何，这是用`expand`命令完成的。**

`expand normal.txt:secret.txt %userprofile%\desktop`

当你`dir`到`Desktop`目录时，你会看到`secret.txt`文件也显示了广告内容。

所以，NFTS 的整个广告为坏演员带来了一个全新的完整世界。这个简单的方法适用于隐藏信息，但也可以用来执行磁盘饱和。所以我放上面，这个新内容不会影响文件的哈希，可以被占用但不会被体现。

这很容易从外部磁盘或闪存驱动器上泄露公司信息，而不会引起任何怀疑。但是像所有东西一样，也有对应的东西，那就是如果文件被压缩或格式化到不同的文件系统，数据可能会丢失。

发挥你的创造力，并意识到这些可能发生的事件。

快乐隐藏:)