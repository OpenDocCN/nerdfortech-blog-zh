<html>
<head>
<title>Quick tips on using pdb to debug code of installed packages in Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 pdb 调试 Colab 中已安装软件包的代码的快速技巧</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/quick-tips-on-using-pdb-to-debug-code-of-installed-packages-in-colab-2a243984b578?source=collection_archive---------8-----------------------#2021-04-02">https://medium.com/nerd-for-tech/quick-tips-on-using-pdb-to-debug-code-of-installed-packages-in-colab-2a243984b578?source=collection_archive---------8-----------------------#2021-04-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="22b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当在 Colab 中运行代码时，有时我需要调试不是由我开发而是来自已安装的包的代码，并且不可能在内部修改代码。</p><p id="663f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当代码由我自己编写时，添加代码很容易:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="a951" class="jm jn hi ji b fi jo jp l jq jr">from pdb import set_trace; set_trace()</span></pre><p id="2354" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以当代码运行到这行时，就会触发调试:</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es js"><img src="../Images/1cffb193920fd83843377f67e6a24fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3BaHDhJVuv6W5doCHJtxdg.png"/></div></div></figure><h1 id="7cfe" class="ka jn hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">问题</strong></h1><p id="0d05" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">请注意，在调试时，点击“n”(下一步)不会将我们带到代码中的下一行(第 5 行)，我们需要尝试一些“n”或“s”(步骤)来到达该行:</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es lc"><img src="../Images/f0c623caa6c07e007b8e29757316b8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zge9wvijLBStG4mDwIOIig.png"/></div></div></figure><p id="abeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了进入枚举函数以运行数据加载器，它需要更多的“n”或“s”或“up ”,有时只是通过了代码行，需要再次重复相同的过程。</p><p id="dd38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">原因是有许多 Colab/Jupter 笔记本代码需要运行到我想要调试行。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ld"><img src="../Images/c3400a9dac195621c7c4a5d1ad9c801e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QyxUaQZatcWaS8FocnFbRQ.png"/></div></div></figure><h1 id="e4a0" class="ka jn hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">解决办法</h1><p id="291e" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">解决方案实际上很简单，因为我们有 list_dataloader 对象实例，我们实际上可以告诉调试器将断点设置到数据加载器内部的实例函数，即 list_dataloader。__iter__()</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es le"><img src="../Images/7e073849f3f9809acdc74a657175bf37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqrU2LvoxduIoG7tPC24TQ.png"/></div></div></figure><p id="2316" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打“c”(继续)设置断点后，我到了 dataloader 实例的 __iter__()处。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es lf"><img src="../Images/04c12e3107c646f785cc493b7df72ae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUGWKTQ675qbqENS-64Ghg.png"/></div></div></figure><p id="f80c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，如果我们在当前的调试范围内没有实例，并且想要向类添加断点，我们将执行类似的 add breakpoint 命令。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es lg"><img src="../Images/23d4e4e16e4cdb344f19227ba9c29ae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-i6z_180X04RMEIswpoE9A.png"/></div></div></figure><p id="fa50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时你可能想在函数中间的一行中断，你可以在特定的一行设置断点。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es lh"><img src="../Images/b511d8026eb797c40382a95944a7c408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLQeoWdt5l8dQuYhbsIqbA.png"/></div></div></figure><p id="119d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是我们怎么知道是哪条线呢？Colab 给出了一个非常简单的 UX，点击“查看源代码”链接</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es li"><img src="../Images/78377e2c2ed59de74a78e9fbaf9ad8db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OnFHs_Xs8vD10QuZXiGNaw.png"/></div></div></figure><p id="a2bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码将在右窗格中打开，浏览文件并找到设置断点所需的行。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es lj"><img src="../Images/6b9bed2eb5c15033dce18cc762eb9f43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLgy2wOKifiuIxycEaTA8A.png"/></div></div></figure><p id="9f89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这对某人有所帮助。</p></div></div>    
</body>
</html>