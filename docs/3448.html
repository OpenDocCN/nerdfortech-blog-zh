<html>
<head>
<title>Implementing space shooter game features - Enemy behavior</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现太空射击游戏功能-敌人的行为</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-enemy-behavior-a784cb1d8af0?source=collection_archive---------19-----------------------#2021-06-10">https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-enemy-behavior-a784cb1d8af0?source=collection_archive---------19-----------------------#2021-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="d739" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="4c94" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">Unity 空间射击游戏新增功能快速回顾</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/9370d99487c08431e8fad8d8158792a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3ko9lL5DtBVQYanSWa-0Hg.gif"/></div></div></figure><p id="472e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在 Unity 的太空射击游戏中实现新的移动行为。</p><p id="eb41" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在之前的帖子中，我<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-space-shooter-game-features-multi-direction-shot-bb9bf00f46fc">在我的 Unity 太空射击游戏中实现了一种新的射击方式</a>。现在是时候为敌人实现新的移动行为来增加游戏难度了。</p><h1 id="e2d0" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">新类别</h1><p id="8935" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">如果你一直关注<a class="ae ko" href="https://fas444.medium.com/" rel="noopener">我的帖子</a>，那么你会记得我们只是用一个职业来控制敌人的行为。为了完成一个新的行为，让我们创建新的类，当我们试图在未来制造新的敌人时，这些类将使用继承来使新的行为可伸缩和模块化。</p><p id="52df" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">新的课程将包括:</p><ul class=""><li id="7978" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated"><strong class="ju hs">敌人</strong></li></ul><p id="0e80" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个类不会继承<strong class="ju hs">monobehavior</strong>，它会存储敌人可能拥有的不同属性。</p><ul class=""><li id="6d05" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated"><strong class="ju hs">敌人行为</strong></li></ul><p id="0d9b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个类将继承<strong class="ju hs">monobehavior</strong>并且它将处理每个敌人可能有的主要/简单动作。</p><ul class=""><li id="bb55" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated"><strong class="ju hs">前方敌人</strong></li></ul><p id="a96c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个职业将继承<strong class="ju hs">敌人的行为</strong>并且它将处理在空间中移动的敌人。</p><div class="jh ji jj jk fd ab cb"><figure class="lv jl lw lx ly lz ma paragraph-image"><img src="../Images/90d40f43572031c1b30aba834082007e.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/1*9XqQc_10mpYe0TjkpMiJjg.gif"/></figure><figure class="lv jl lw lx ly lz ma paragraph-image"><img src="../Images/69f71b46dab6cec901815d30ac72be05.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/1*o35ih8WzKgypsCZtQodIhA.gif"/></figure></div><h2 id="319b" class="mb kq hi bd kr mc md me kv mf mg mh kz kb mi mj lb kf mk ml ld kj mm mn lf ho bi translated">敌人阶级</h2><p id="0fc8" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">首先，在<strong class="ju hs">敌人</strong>职业中，让我们去掉<strong class="ju hs">单行为</strong>的继承，只留下我们需要的各种类型敌人的领域。让我们将它们公开，因为我们将通过检查器修改它们:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mo"><img src="../Images/57cfd7da90d3cbb1017c3ccf47e98725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*03DIGOWtB60RLXj_dVU2hQ.png"/></div><figcaption class="mp mq et er es mr ms bd b be z dx translated">有些变量隐藏在检查器中，因为它们不需要编辑。</figcaption></figure><p id="b7d7" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">那么，我们就用<strong class="ju hs">【系统。【T23 能够在检查器中修改类:</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mt"><img src="../Images/72751e347a5a401dd8038a36a3ffe666.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/1*cL6texYpxNZ9hdHuWHCYlw.gif"/></div></figure><h2 id="e816" class="mb kq hi bd kr mc md me kv mf mg mh kz kb mi mj lb kf mk ml ld kj mm mn lf ho bi translated">敌人行为类</h2><p id="0324" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，让我们来处理<strong class="ju hs">敌人行为</strong>类中敌人的主要行为。由于我们将在《敌人》中使用动画制作人和音频源组件，所以让这个类使用<strong class="ju hs"> [RequireComponent()] </strong>来要求它们:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mu"><img src="../Images/885e9efdb697da782404193ed20ffbfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k_pNZG3vT3Acj1PyLn45XA.png"/></div></div></figure><p id="9311" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们创建一些新的变量:</p><ul class=""><li id="73a4" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated"><em class="mv">_ 敌人</em></li></ul><p id="b9c8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">是私<strong class="ju hs">敌</strong>实例。使用<strong class="ju hs">【serialize field】</strong>允许我们通过 inspector 修改值。</p><ul class=""><li id="2db2" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated"><em class="mv">速度，XBound &amp; YBound </em></li></ul><p id="5a5f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这些是受保护的属性，让这个类的子类从这个类的<strong class="ju hs">敌人</strong>实例中读取私有值。</p><ul class=""><li id="2b71" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated"><em class="mv">_ 能射，_ 死了&amp;_ 玩家</em></li></ul><p id="988a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这些是私有变量，用于管理这个类上<strong class="ju hs">敌人</strong>实例的主要行为。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mw"><img src="../Images/ea8fbb69ef0143a0274720bf582ad258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*Vx2fnB6fUif2sL4aXVHnjg.png"/></div></figure><p id="e92a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们使<strong class="ju hs"> Start </strong>方法成为一个公共的虚方法，这样我们就可以从这个类的子类中覆盖这个函数。在这种情况下，让我们初始化处理敌人主要行为所需的值:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mx"><img src="../Images/03d3dc67e45dcd6d2afd46320145e4bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YAVPXpi2o7v1IOYUYp7RGw.png"/></div></div></figure><p id="7cc8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们对<strong class="ju hs">更新</strong>方法做同样的事情。在这种情况下，我们需要它每隔一段时间处理一次拍摄功能:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es my"><img src="../Images/cc2910a4dc1ed55b2144d67da13c4410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*5qOGo_SG7LALaBTjhTYl_w.png"/></div></figure><p id="7418" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，让我们来定义哪些函数(最初在<strong class="ju hs">敌人</strong>类中)是敌人的主要行为:</p><div class="jh ji jj jk fd ab cb"><figure class="lv jl mz lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a4b0763ae626c600827425276bf2c224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*-ISmfAzZw2XDpkfa8okItg.png"/></div></figure><figure class="lv jl na lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/61d1929844c154776f29e266eae53879.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*_Ll-JWy92EXNnIAztFfXag.png"/></div></figure></div><h2 id="6ee3" class="mb kq hi bd kr mc md me kv mf mg mh kz kb mi mj lb kf mk ml ld kj mm mn lf ho bi translated">前方敌级</h2><p id="65c7" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，让我们创建第一种次要敌人行为，即前进敌人。这种类型的敌人将以不同的起点(不像以前那样只是从顶部)在空间中排成一条直线移动。</p><p id="7f28" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个类将继承<strong class="ju hs"> EnemyBehavior </strong>类来实现任何敌人的主要行为:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nb"><img src="../Images/a8564be99d905a6dcdb56e737e45d85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*xk5BN3pJP1WvQ8TT6pBb7g.png"/></div></figure><p id="f981" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">接下来，让我们创建一对私有变量，它们将存储来自<strong class="ju hs"> EnemyBehavior </strong>类的空间边界:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nc"><img src="../Images/39998b1d5069e4d7e871cb2f2d5a4a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*PWD7s2hHtUW0ZP5NGY5BLg.png"/></div><figcaption class="mp mq et er es mr ms bd b be z dx translated">我们也可以使用<strong class="bd kr">x bound</strong>&amp;<strong class="bd kr">y bound</strong>protected<strong class="bd kr"/>属性来代替这两个变量。</figcaption></figure><p id="405d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们创建一个函数来修改敌人的变换组件值(位置和旋转),根据相机的哪一侧来产生它。</p><p id="f5ae" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们开始选择一方来随机繁殖。范围方法。然后，我们使用一个 switch 语句来修改各自的位置，以便在摄像机的那一侧产卵。最后，我们通过调用<strong class="ju hs"> GetRandomAngle </strong>方法来修改敌人的 Z 旋转，选择边作为参数:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nd"><img src="../Images/ac54f2a9b04bca4481a36a62ab847a2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDbW71r73WWhw6-4cBwX3g.png"/></div></div></figure><p id="d825" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs"> GetRandomAngle </strong>方法使用此公式返回一个 45 度之间的随机角度，该角度指向作为参数接收的摄像机一侧:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ne"><img src="../Images/e497a5c5f0a1ebb8f9b10b4c0010ccbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CMeJsncZ2Yp9tGXrCVwYHA.png"/></div></div><figcaption class="mp mq et er es mr ms bd b be z dx translated">我们用<strong class="bd kr">？</strong>操作者知道随机值是否会被减去或加到角度上。</figcaption></figure><p id="2e6f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们初始化公共覆盖<strong class="ju hs"> Start </strong>方法中的各个变量，该方法也通过使用<strong class="ju hs">基类从<strong class="ju hs"> EnemyBehavior </strong>类调用 Start 方法。启动</strong>方法:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nf"><img src="../Images/5923e08918d8eb9255f6301d6eb743ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*PHC_agpPITuNUnQ4IsHuCA.png"/></div><figcaption class="mp mq et er es mr ms bd b be z dx translated">这样，我们确保该类也将从父类运行<strong class="bd kr"> Start </strong>方法。</figcaption></figure><p id="9970" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">同样，像上面的方法一样，让我们使<strong class="ju hs"> Update </strong>成为一个公共覆盖方法，它从父类中调用<strong class="ju hs"> Update </strong>方法，并在该类中调用<strong class="ju hs"> MoveEnemy </strong>方法:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ng"><img src="../Images/8fe676f9118cfceb2c232954d9e717e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*lfaEvo_a47Ml7JSJj3oWdA.png"/></div></figure><p id="0ea6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs"> MoveEnemy </strong>方法将确保附加了该脚本的敌人将在整个空间中以父类的 protected Speed 属性提供的速度向前移动(在一条直线上)。此外，它将从这个类中调用<strong class="ju hs">的方法:</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nh"><img src="../Images/10b1747ccfe085c6ddf412a9feba5067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zOUUzOBfyhCi_gX3YKR_iw.png"/></div></div></figure><p id="c2af" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果敌人到达了空间的极限，<strong class="ju hs">传送自动反弹</strong>方法将调用<strong class="ju hs"> SetNewTransform </strong>方法，这样就可以用各自的转换值传送敌人再次进入游戏场:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ni"><img src="../Images/e2f8058663819d2563f8ab16dce4ce8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m9JpsR2IjeKhK8TCEhHOPw.png"/></div></div></figure><p id="f1e8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，我们将能够将<strong class="ju hs"> ForwardEnemy </strong>脚本附加到敌人预设，并通过检查器修改其值以符合我们的要求:</p><div class="jh ji jj jk fd ab cb"><figure class="lv jl nj lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/35ec9e1f7db508ceaf056f0074f3416c.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/1*M02nVcwcKGBr6vcyRXy_5w.gif"/></div></figure><figure class="lv jl nk lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/cd57d7fd452bf5a3456e29da1fec593c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*tSBXYf6RpaopzXEsA-DYGw.png"/></div></figure></div><p id="2143" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们在 Unity 中运行游戏，我们会看到敌人从不同的角度和位置进入游戏场地，使游戏变得更难:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/56ec78d5ea1a85ccfcbfe79d032a838e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Icjeq2omZsPJALsgobTEKA.gif"/></div></div></figure><p id="bcb0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们实现了一个新的运动行为！:d .我会在下一篇文章中看到你，在那里我会展示更多添加到我的 Unity 太空射击游戏中的功能。</p></div><div class="ab cl nl nm gp nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="hb hc hd he hf"><blockquote class="ns nt nu"><p id="17b4" class="js jt mv ju b jv jw is jx jy jz iv ka nv kc kd ke nw kg kh ki nx kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>