<html>
<head>
<title>Signal your intentions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">表明你的意图</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/signal-your-intentions-6895cf4cfaea?source=collection_archive---------6-----------------------#2021-08-16">https://medium.com/nerd-for-tech/signal-your-intentions-6895cf4cfaea?source=collection_archive---------6-----------------------#2021-08-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e5d9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">通过 Dart 使用 Unix 信号</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/df2ddb3f29af45e89cb5db95be559e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tC9WerRL1Ut-epHH"/></div></div></figure><h1 id="f68f" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">信号？</h1><p id="fd64" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">到 2021 年的这个时候，Unix 已经有了丰富的半个<em class="kx">世纪</em>的历史。基于终端的 shells 和应用程序可以利用的 Unix 特性之一是信号。</p><h1 id="7826" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">飞镖道</h1><p id="2bfb" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">幸运的是，对于使用 Dart 命令行的开发人员来说，早在 2013 年，Dart 程序就获得了全程监听 unix 信号的支持。用于监听信号的 Dart API 通常很容易，只需监听一个普通的 Dart 流即可，不过您需要记住的唯一一件事是，每个信号都由它自己的实例表示为<a class="ae ky" href="https://api.dart.dev/stable/2.10.0/dart-io/ProcessSignal-class.html" rel="noopener ugc nofollow" target="_blank"> ProcessSignal 类</a>的静态常数，因此要监听一个信号，例如 SIGINT 信号如下所示:</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="90ba" class="le jk hi la b fi lf lg l lh li">// typically ctrl-c in shell will generate a sigint<br/>ProcessSignal.sigint.watch().listen((signal) {<br/>  print('sigint disconnecting');<br/>  // do any required cleanup tasks <br/>  exit(0);<br/>});</span></pre><p id="5ebc" class="pw-post-body-paragraph kb kc hi kd b ke lj ij kg kh lk im kj kk ll km kn ko lm kq kr ks ln ku kv kw hb bi translated">不幸的是<a class="ae ky" href="https://api.dart.dev/stable/2.10.0/dart-io/ProcessSignal/watch.html" rel="noopener ugc nofollow" target="_blank"> DartVM 为自己保留监听许多 Unix 进程信号</a>，允许 Dart 程序只监听:</p><ul class=""><li id="8037" class="lo lp hi kd b ke lj kh lk kk lq ko lr ks ls kw lt lu lv lw bi translated">西格胡普</li><li id="6a14" class="lo lp hi kd b ke lx kh ly kk lz ko ma ks mb kw lt lu lv lw bi translated">信号情报</li><li id="6ac4" class="lo lp hi kd b ke lx kh ly kk lz ko ma ks mb kw lt lu lv lw bi translated">信号术语</li><li id="2749" class="lo lp hi kd b ke lx kh ly kk lz ko ma ks mb kw lt lu lv lw bi translated">SIGUSR1</li><li id="31da" class="lo lp hi kd b ke lx kh ly kk lz ko ma ks mb kw lt lu lv lw bi translated">SIGUSR2</li><li id="7918" class="lo lp hi kd b ke lx kh ly kk lz ko ma ks mb kw lt lu lv lw bi translated">西格温奇</li></ul><p id="7298" class="pw-post-body-paragraph kb kc hi kd b ke lj ij kg kh lk im kj kk ll km kn ko lm kq kr ks ln ku kv kw hb bi translated">在 Dart 提供给我们听的信号中，我们可能最想听的是<code class="du mc md me la b">SIGINT</code>，我在上面演示过，它对应于用户在大多数终端中做<a class="ae ky" href="https://unix.stackexchange.com/a/362566/8837" rel="noopener ugc nofollow" target="_blank"> CRTL-C。</a></p><p id="9b64" class="pw-post-body-paragraph kb kc hi kd b ke lj ij kg kh lk im kj kk ll km kn ko lm kq kr ks ln ku kv kw hb bi translated">这就是在 Dart CLI 程序中处理信号的全部内容！</p><p id="5636" class="pw-post-body-paragraph kb kc hi kd b ke lj ij kg kh lk im kj kk ll km kn ko lm kq kr ks ln ku kv kw hb bi translated">我希望这对你有所帮助，如果有或者你有任何其他方便的技巧可以分享，请在下面的评论中或者通过<a class="ae ky" href="https://twitter.com/mklin" rel="noopener ugc nofollow" target="_blank"> Twitter </a>告诉我。</p></div><div class="ab cl mf mg gp mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="hb hc hd he hf"><p id="a7fe" class="pw-post-body-paragraph kb kc hi kd b ke lj ij kg kh lk im kj kk ll km kn ko lm kq kr ks ln ku kv kw hb bi translated"><em class="kx">原载于</em><a class="ae ky" href="https://manichord.com/blog/posts/signal-your-intent.html" rel="noopener ugc nofollow" target="_blank"><em class="kx">https://manichord.com</em></a><em class="kx">。</em></p></div></div>    
</body>
</html>