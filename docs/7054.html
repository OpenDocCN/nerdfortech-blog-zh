<html>
<head>
<title>MongoDB Cheatsheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MongoDB Cheatsheet</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/mongodb-cheatsheet-59ab5407789d?source=collection_archive---------2-----------------------#2022-07-12">https://medium.com/nerd-for-tech/mongodb-cheatsheet-59ab5407789d?source=collection_archive---------2-----------------------#2022-07-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7437" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您已经熟悉了数据库管理系统，并且想快速入门 MongoDB 而不需要学习基础知识，那么这本书非常适合您。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e80f5f51e7c76fde4c56d2b83c485823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Jiu4WhZZdSR7nahz.png"/></div></div></figure><h2 id="8fe5" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">什么是 MongoDB？</h2><p id="f070" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">如果你以前使用过关系数据库，如 MSSQL 或 MySQL 你必须熟悉所有那些行、列和关系。然而，MongoDB 是一个非关系数据库。使用 MongoDB，您可以自由地工作，而不必担心结构。</p><p id="4854" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于它的可扩展性很强，开发速度也很快，因此它是物联网和大数据等许多工作领域的首选。</p><h2 id="9b5a" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">入门指南</h2><p id="5aee" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">要开始使用 MongoDB，只需访问<a class="ae kp" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank">此链接</a>来安装和设置 MongoDB 社区服务器和 Mongosh shell。</p><p id="1b4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在打开一个终端，通过输入命令“mongo”和“mongosh”来检查安装是否完成。如果第一个命令失败，只需转到安装文件夹所在的位置，将路径复制到“mongod”应用程序中，并将其粘贴到环境变量中的 path 中。如果每个命令都返回除 command not found 之外的内容，那么就可以开始了。</p><h2 id="f31c" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">通过 Shell 使用 MongoDB</h2><p id="770c" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">在你的终端上运行“mongosh”首先打开 Mongo 终端。然后，您可以根据需要使用下面非常基本的命令:</p><ul class=""><li id="7cdd" class="kq kr hi ih b ii ij im in iq ks iu kt iy ku jc kv kw kx ky bi translated"><strong class="ih hj">显示数据库:</strong>显示您机器中现有的 MongoDB 数据库。</li><li id="f2f0" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">使用 dbName: </strong>用于切换到名为 dbName 的数据库上运行命令。</li><li id="6bae" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">显示集合:</strong>用于显示数据库中的集合(相当于表格)。</li><li id="81ec" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj"> db.dropDatabase(): </strong>删除运行该命令的数据库。</li><li id="c6d2" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . create collection(" dbName "):</strong>创建一个名为 dbName 的集合。</li><li id="4441" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj"> cls: </strong>清除端子。</li><li id="5abc" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">退出:</strong>退出 Mongo shell。</li><li id="e703" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj"> db: </strong>显示当前工作 db。</li><li id="25cf" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . insert one({…Json data here…}):</strong>将一个 Json 数据插入到 db 中。</li><li id="155c" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj"> db.dbName.find(): </strong>列出该数据库中的所有数据。如果你把 Json 放在 find 方法中，它会搜索并带来包含 Json 对象的对象。</li><li id="7026" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . insert many([{…Json here…}，{…Json here …}]): </strong>就像 insertOne 一样，但是用来插入多个对象。</li><li id="963e" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . count documents({ param1:40 }):</strong>得出 param 1 字段值为 40 的所有对象的计数。</li><li id="0767" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . update one({ param1:10 }，{ $set { param1: 1}}): </strong>查找 param 1 字段等于 10 的第一个对象，并将其值更改为 30。</li><li id="7f69" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . update one({ _ id:10 }，{ $inc{ param1: 1}}): </strong>查找 id 为 10 的第一个对象，并将 1 添加到 param1 字段。</li><li id="d4b8" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . update one({ _ id:10 }，{ $rename{ param1: "age"}}): </strong>查找第一个 id 为 10 的对象，并将列名 param1 更改为" age "。</li><li id="ef63" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . update one({ _ id:10 }，{ $unset: { age: "" }}): </strong>查找第一个 id 为 10 的对象，并删除年龄字段。</li><li id="dc57" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . update one({ _ id:10 }，{ $push: { param1: "data1"}}): </strong>查找第一个 id 为 10 的对象，然后查找由数组组成的名为 param1 的字段，最后将“data1”推入该数组内部。</li><li id="a5b4" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . update one({ _ id:10 }，{ $pull: { param1: "data1"}}): </strong>查找第一个 id 为 10 的对象，然后查找由数组组成的名为 param1 的字段，最后从该数组中删除“data1”。</li><li id="c7e1" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . replace one({ param1:10 }，{… Json here…}): </strong>查找 param 1 等于 10 的对象，用输入的 Json 对象替换整个对象。</li><li id="b230" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . delete one({ param1:10 }):</strong>查找 param 1 等于 10 的第一个对象并删除它。</li><li id="3525" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . delete many({ param1:10 }):</strong>查找 param 1 等于 10 的所有对象并删除它们。</li></ul><p id="8cce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">存储在 MongoDB 中的每个对象都被称为一个<strong class="ih hj">文档</strong>。对于文档，您不需要太担心结构，甚至可以在插入 Json 时使用嵌套对象。</p><p id="815d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用 find()方法的变体对数据进行排序。以下是一些命令示例:</p><ul class=""><li id="43a7" class="kq kr hi ih b ii ij im in iq ks iu kt iy ku jc kv kw kx ky bi translated"><strong class="ih hj"> db.dbName.find()。limit(2): </strong>只从数据库中返回两个对象。</li><li id="30b3" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj"> db.dbName()。查找()。sort({ name:x }):</strong>x 可以是 1 或-1，如果 name 属性是一个字符串，那么 1 将按字母顺序返回数据，而-1 将按相反的字母顺序返回数据。如果 name 参数是一个数字或日期，那么应该是降序/升序。您也可以按多个参数排序。</li><li id="0144" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj"> db.dbName.find()。skip(1): </strong>跳过第一个条目并返回其余的条目。</li><li id="6eef" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj"> db.dbName.find({param1: 1，param2:1，param3:0}): </strong>将按字母/升序显示 param1 和 param2 字段，但不会显示 param3 字段。</li><li id="c4c3" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ eq:" Hello world " } }):</strong>得出 param 1 字段等于" Hello world "的结果。</li><li id="ad8b" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ neq:" Hello world " } }):</strong>得出 param 1 字段不等于" Hello world "的结果。</li><li id="20eb" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ gt:2 } }):</strong>得出 param 1 字段大于 2 的结果。</li><li id="e0fa" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ GTE:2 } }):</strong>得出 param 1 字段大于或等于 2 的结果。</li><li id="ff89" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ LTE:2 } }):</strong>得出 param 1 字段小于或等于 2 的结果。</li><li id="880f" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ in:[10，20]}):</strong>得出 param 1 字段等于 10 或 20 的结果。</li><li id="d63b" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ nin:[10，20]}}): </strong>得出 param 1 字段不等于 10 或 20 的所有结果。</li><li id="9ef5" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ exists:true } }):</strong>获取 param 1 字段存在的所有结果。</li><li id="39e4" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ param1:{ $ exists:false } }):</strong>显示 param 1 字段不存在的所有结果。</li><li id="459c" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ $ or { { param1:{ $ gt:2 } }，{ param2:" Hello world " } }):</strong>得出 param 1 字段大于 2 或 param 2 字段等于" Hello world "的结果。</li><li id="5387" class="kq kr hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated"><strong class="ih hj">db . dbname . find({ $ expr { $ gt:[" $ param1 "，" $ param2 "]}):</strong>得出 param 1 字段大于 param 2 字段的结果。</li></ul></div></div>    
</body>
</html>