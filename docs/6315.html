<html>
<head>
<title>Annotations And Test Suites in Playwright</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">剧作家中的注释和测试套件</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/annotations-and-test-suites-in-playwright-709a3d207191?source=collection_archive---------4-----------------------#2022-02-02">https://medium.com/nerd-for-tech/annotations-and-test-suites-in-playwright-709a3d207191?source=collection_archive---------4-----------------------#2022-02-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="19e7" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">释文</h1><p id="9ed0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以将注释应用到单个测试或者一组测试中。注释可以是有条件的，这意味着它们只在条件为真时使用。注释可能会受到测试夹具的影响。同一个测试上的多个注释，也许在不同的设置中，是可能的。</p><p id="8fb9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">剧作家测试提供了处理失败、剥落、跳过、聚焦和标签测试的测试注释:</p><p id="0b8c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">test.skip(title，testFunction):它将测试标记为不相关。剧作家测试不做这样的测试。当测试与特定设置无关时，使用此注释。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="3ffa" class="kp ig hi kl b fi kq kr l ks kt">test.skip('skip this test', <em class="ku">async</em> ({ page }) =&gt; {<br/>  // This test is not run<br/>});</span></pre><p id="88fa" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">test . fail([条件，描述]):测试被标记为失败。剧作家测试将执行这个测试，以确认它失败。如果测试没有失败，剧作家测试将会抱怨。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="8fcb" class="kp ig hi kl b fi kq kr l ks kt">test('not yet ready', <em class="ku">async</em> ({ page }) =&gt; {<br/>  test.fail();<br/>  // ...<br/>});</span></pre><p id="5465" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">test.fixme(title，testFunction):测试被标记为失败。与失败注释相反，剧作家测试不会执行这个测试。当测试运行缓慢或崩溃时，使用fixme。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="99e0" class="kp ig hi kl b fi kq kr l ks kt">test.fixme('test to be fixed', <em class="ku">async</em> ({ page }) =&gt; {<br/>  // ...<br/>});</span></pre><p id="8e43" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">test.slow([condition，description]):它将测试归类为迟缓，并将测试超时增加两倍。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="0208" class="kp ig hi kl b fi kq kr l ks kt">test('slow test', <em class="ku">async</em> ({ page }) =&gt; {<br/>  test.slow();<br/>  // ...<br/>});</span></pre><p id="fd50" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">test.only(title，testFunction):可以缩小各种测试的范围。当有焦点测试时，只执行焦点测试。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="dfea" class="kp ig hi kl b fi kq kr l ks kt">test.only('focus this test', <em class="ku">async</em> ({ page }) =&gt; {<br/>  // Run only focused tests in the entire project.<br/>});</span></pre><p id="ba6b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">test.skip(condition，description):根据具体情况，您可能能够绕过某些测试。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="c1e4" class="kp ig hi kl b fi kq kr l ks kt">test.skip('skip this test', <em class="ku">async</em> ({ page }) =&gt; {<br/>  // This test is not run<br/>});</span><span id="cf65" class="kp ig hi kl b fi kv kr l ks kt">test('skip this test', <em class="ku">async</em> ({ page, browserName }) =&gt; {<br/>  test.skip(browserName === 'firefox', 'Still working on it');<br/>  //it will skip if the condition true<br/>});</span></pre><p id="e675" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">例如，您可以通过传递一个回调函数在Chromium中运行一组测试。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="afe2" class="kp ig hi kl b fi kq kr l ks kt">test.describe('chromium only', () =&gt; {<br/>  test.skip(({ browserName }) =&gt; browserName !== 'chromium', 'Chromium only!');</span><span id="38b5" class="kp ig hi kl b fi kv kr l ks kt">  test.beforeAll(<em class="ku">async</em> () =&gt; {<br/>    // This hook is only run in Chromium.<br/>  });</span><span id="5731" class="kp ig hi kl b fi kv kr l ks kt">  test('test 1', <em class="ku">async</em> ({ page }) =&gt; {<br/>    // This test is only run in Chromium.<br/>  });</span><span id="5c85" class="kp ig hi kl b fi kv kr l ks kt">  test('test 2', <em class="ku">async</em> ({ page }) =&gt; {<br/>    // This test is only run in Chromium.<br/>  });<br/>});</span></pre><p id="e8b9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">为了避免运行<code class="du kw kx ky kl b">beforeEach</code>钩子，您可以在钩子本身中放置注释。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="77ca" class="kp ig hi kl b fi kq kr l ks kt">test.beforeEach(<em class="ku">async</em> ({ page, isMobile }) =&gt; {<br/>  test.fixme(isMobile, 'Settings page does not work in mobile yet');</span><span id="1a73" class="kp ig hi kl b fi kv kr l ks kt">  <em class="ku">await</em> page.goto('http://localhost:3000/settings');<br/>});</span><span id="c23d" class="kp ig hi kl b fi kv kr l ks kt">test('user profile', <em class="ku">async</em> ({ page }) =&gt; {<br/>  <em class="ku">await</em> page.click('text=My Profile');<br/>  // ...<br/>});</span></pre><h1 id="8bff" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">分组和组织测试</h1><p id="499d" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">有些功能，比如测试套件，对剧作家来说是不可用的。但是，您可以对测试进行分组，在挂钩到组之前/之后给它们一个逻辑名称或范围。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="faa6" class="kp ig hi kl b fi kq kr l ks kt"><em class="ku">const</em> { test, expect } = require('@playwright/test');<br/><br/>test.describe('two tests', () =&gt; {<br/>  test('one', <em class="ku">async</em> ({ page }) =&gt; {<br/>    // ...<br/>  });<br/><br/>  test('two', <em class="ku">async</em> ({ page }) =&gt; {<br/>    // ...<br/>  });<br/>});</span></pre><p id="cbae" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可能希望将您的测试指定为<a class="ae kz" href="http://twitter.com/fast" rel="noopener ugc nofollow" target="_blank">@快速</a>或<a class="ae kz" href="http://twitter.com/slow" rel="noopener ugc nofollow" target="_blank">@慢速</a>，并使用适当的标签执行测试。为此，我们建议使用— grep和— grep-invert命令行标志:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="6efe" class="kp ig hi kl b fi kq kr l ks kt"><em class="ku">const</em> { test, expect } = require('@playwright/test');<br/><br/>test('Test login page @fast @regression', <em class="ku">async</em> ({ page }) =&gt; {<br/>  // ...<br/>});<br/><br/>test('Test full report @slow', <em class="ku">async</em> ({ page }) =&gt; {<br/>  // ...<br/>});</span></pre><p id="f666" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">然后，您将只能运行该测试:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="ef16" class="kp ig hi kl b fi kq kr l ks kt">npx playwright test --grep @fast</span></pre><p id="1a78" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">它防止我们在不同的文件或另一个文件夹结构中保存相同的代码。</p></div></div>    
</body>
</html>