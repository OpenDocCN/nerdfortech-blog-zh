<html>
<head>
<title>Jetpack Compose — Pendulum Effect</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">喷气背包组合——钟摆效应</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/jetpack-compose-pendulum-effect-72249685e6c6?source=collection_archive---------9-----------------------#2021-03-15">https://medium.com/nerd-for-tech/jetpack-compose-pendulum-effect-72249685e6c6?source=collection_archive---------9-----------------------#2021-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/d1bdf57e8cae295f21be1b165ede8223.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*Mapn6a2yWj8TcIoPb9x0og.png"/></div></figure><p id="d9b8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我将向你展示如何在任何你想要的可组合物体上重现一个无限的<strong class="io hj">钟摆</strong>效果。</p><p id="293f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了使摆的想法简单，让我们这样想:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/e1e1a159f310b6b07b7981407a137aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-RJ_1fkoMRtAMa4H7xlqA.png"/></div></div></figure><p id="2407" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当一个钟摆摆动时，它基本上在X轴上从左到右运动，反之亦然，在Y轴上上下运动。</p><p id="f0f0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这种情况下，我们只需要找到一种方法来在动画中表现这个从<strong class="io hj"> startX到endX </strong>，以及从<strong class="io hj"> topY到bottomY </strong>的运动。</p><p id="9380" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">正如你在我的<a class="ae jt" href="https://pauloaapereira.medium.com/jetpack-compose-pulsating-effect-4b9f2928d31a" rel="noopener"> <strong class="io hj">上一篇文章</strong> </a>中看到的，我已经介绍了脉动效果动画，我们可以保持无限动画运行，同时改变<strong class="io hj">一个或多个</strong>浮点值。</p><p id="3864" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所以，如果我们把一个可组合的物体的x和y坐标做成动画，让它在我们希望钟摆摆动的范围内变化，我们就有了一个可工作的钟摆！</p><h1 id="94e9" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">让我们开始工作:</h1><p id="7cda" class="pw-post-body-paragraph im in hi io b ip ks ir is it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj hb bi translated">让我们从声明我们将要使用的infiniteTransition开始。</p><blockquote class="kx ky kz"><p id="ab46" class="im in la io b ip iq ir is it iu iv iw lb iy iz ja lc jc jd je ld jg jh ji jj hb bi translated"><em class="hi">infinite position负责运行子动画。可以使用</em><strong class="io hj"><em class="hi">infinite position . animate color</em></strong><em class="hi">，</em><strong class="io hj"><em class="hi">infinite position . animate float</em></strong><em class="hi">或</em><strong class="io hj"><em class="hi">infinite position . animate evalue</em></strong><em class="hi">添加子动画。子动画一进入合成就开始运行，直到从合成中移除才会停止。</em></p></blockquote><pre class="jl jm jn jo fd le lf lg lh aw li bi"><span id="b0b4" class="lj jv hi lf b fi lk ll l lm ln">val infiniteTransition = <em class="la">rememberInfiniteTransition</em>()</span></pre><p id="b97b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后，由于我们需要确定我们希望钟摆摆动的x和y范围，我们将使用一个名为“BoxWithConstraints”的可组合组件来访问它的maxWidth和maxHeight。</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="291b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，正如前面的图像示例中所确定的，我们需要定义变量<strong class="io hj"> <em class="la"> startX、endX、topY和bottomY </em> </strong>。</p><p id="7c6a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这些将以百分比形式对应于<strong class="io hj">位置，相对于<strong class="io hj">框中确定的最大宽度和最大高度</strong>和约束</strong>。</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="cdde" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们知道了钟摆摆动的范围，我们只需要激活它。</p><p id="f09d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> X值动画:</strong></p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="f43f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">钟摆的X坐标会摆动:</p><ul class=""><li id="3468" class="lq lr hi io b ip iq it iu ix ls jb lt jf lu jj lv lw lx ly bi translated">从<strong class="io hj">开始(<em class="la"> maxWidth * startX </em> ) </strong>到<strong class="io hj">结束(<em class="la"> maxWidth * endX </em> ) </strong></li><li id="3bf1" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated">无限(<strong class="io hj"><em class="la">【无限重复】</em> </strong> <em class="la"> ) </em></li><li id="a603" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated">由一个特定的<strong class="io hj"><em class="la">【swing duration】</em></strong>作为实参传递(如下所示)</li></ul><p id="95cf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> Y值动画:</strong></p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="131c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">摆锤的Y坐标会摆动:</p><ul class=""><li id="5ab5" class="lq lr hi io b ip iq it iu ix ls jb lt jf lu jj lv lw lx ly bi translated">从<strong class="io hj">顶部(<em class="la"> maxHeight * topY </em> ) </strong>到<strong class="io hj">底部(<em class="la"> maxHeight * bottomY </em> ) </strong></li><li id="7008" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated">无限(<strong class="io hj">"<em class="la">infinite repeatable "</em></strong><em class="la">)</em></li><li id="14d1" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated">由一个特定的<strong class="io hj"><em class="la"/></strong>作为实参传递过来(如下图所示)，<strong class="io hj">分成两半</strong>。如果它没有被一分为二，它就不会像钟摆一样(会继续下降)，因为它需要与X轴相同的时间来反转方向。</li></ul><p id="3317" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后，为了应用动画值，我们添加了另一个可组合的框，并使用它的偏移修改器函数来更改它的坐标。</p><p id="0a8c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这个盒子里，我们的内容会像一个很酷的钟摆一样摆动！</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><h1 id="076b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">用法:</strong></h1><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><h1 id="6651" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结果:</h1><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es me"><img src="../Images/e9f1907d2c2701ed3cd87e845cd422af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*AGyh__gnnqo9hmzuFRhAOg.gif"/></div></figure><p id="2486" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">储存库:</strong></p><p id="d0ef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jt" href="https://github.com/pauloaapereira/Medium_JetpackCompose_PendulumEffect" rel="noopener ugc nofollow" target="_blank">https://github . com/pauloaapereira/Medium _ JetpackCompose _ pendulum effect</a></p><p id="691e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">领英:</strong><br/><a class="ae jt" href="https://www.linkedin.com/in/paulo-pereira-001615153/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/paulo-pereira-001615153/</a></p><p id="3916" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">推特:</strong><br/><a class="ae jt" href="https://twitter.com/pauloppereiraa" rel="noopener ugc nofollow" target="_blank">https://twitter.com/pauloppereiraa</a></p><p id="b144" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你喜欢，如果这对你有帮助，你也可以考虑请我喝杯咖啡。:]</p><p id="ab70" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">谢谢大家！</p></div></div>    
</body>
</html>