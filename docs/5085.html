<html>
<head>
<title>Pushable Blocks Locked to a Grid in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">锁定在统一网格中的可推块</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/pushable-blocks-locked-to-a-grid-in-unity-5ee5763f4455?source=collection_archive---------2-----------------------#2021-08-27">https://medium.com/nerd-for-tech/pushable-blocks-locked-to-a-grid-in-unity-5ee5763f4455?source=collection_archive---------2-----------------------#2021-08-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a974" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">目标:</strong>创造一个玩家可以推动的方块，并锁定在格子上。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/6d48c8ce19a08944813681afad77fcab.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/1*F8FjuK7ZNtIcLkyFXhjqqA.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">失败！</figcaption></figure><p id="ede3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们的玩家输入一个方向时，运动脚本“向前看”一个“可推动”的物体。如果它找到一个，它会阻止玩家的移动，但称为块的<em class="jp">推动</em>方法，传递它推动的方向和速度。</p><p id="6413" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果块是<em class="jp">而不是当前被推动的</em>，它将检查其被推动的方向。如果该方向是明确的(即<em class="jp"> CheckDirection </em>方法返回<em class="jp"> true </em>，它将设置其新的<em class="jp"> _destination </em>为该方向。然后，它将把它的<em class="jp"> _speed </em>设置为玩家速度的倍数，只是为了确保玩家不能移动到该块空出的空间(我用 1.5 作为我的乘数)。最后，它将<em class="jp"> _isBeingPushed </em>设置为<em class="jp">真</em>，因此在到达其<em class="jp">_ 目的地</em>之前，它不能被再次推送。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jq"><img src="../Images/5059cb63f147b7547093d2b83c686e8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*O_G1xgcd0UFprgtw_kFM1w.png"/></div></figure><p id="5147" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<em class="jp">更新</em>方法中，如果块非常接近其<em class="jp">_ 目的地</em>，它会将自己设置到那个位置，并将<em class="jp"> _isBeingPushed </em>设置为<em class="jp"> false </em>，这样它就可以被再次推送。</p><p id="c33a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果<em class="jp">不在<em class="jp">目的地</em>的</em>处，它将向其移动。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/a2bb2711989b2c3b6fb7f554c58ba840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*Anlykl91A5DIzx8sdza5mQ.png"/></div></figure><p id="5e48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">方块的<em class="jp"> CheckDirection </em>方法甚至比玩家的更简单。我们使用<em class="jp">射线</em>在砖块被推进的方向上检查是否有阻挡物，如墙壁或另一个板条箱。如果有另一个块或墙，我们返回<em class="jp"> false </em>并且不允许推送。如果空间是空的，将推动该块。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es js"><img src="../Images/ce08fc5c6d0b94d2e1590df32cb61816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*QZTR2gDrDg9-NxLmzIqWKg.png"/></div></figure><p id="91ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想变得更疯狂一点，我们可以检查下一个空格的<em class="jp">是否是<em class="jp">可推的</em>，如果是，并且在</em>之后的<em class="jp">空格是空的，我们可以允许玩家推<em class="jp">两个或更多的</em>方块！</em></p></div></div>    
</body>
</html>