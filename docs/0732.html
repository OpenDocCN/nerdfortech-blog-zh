<html>
<head>
<title>How to connect your React app to MongoDB without Mongoose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在没有Mongoose的情况下将React应用程序连接到MongoDB</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-connect-your-react-app-to-mongodb-without-mongoose-41af3ce31b7c?source=collection_archive---------6-----------------------#2021-02-09">https://medium.com/nerd-for-tech/how-to-connect-your-react-app-to-mongodb-without-mongoose-41af3ce31b7c?source=collection_archive---------6-----------------------#2021-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0694" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Next.js和JavaScript MongoDB驱动程序作为Mongoose的替代</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f3d4f6f31d81aebe56c28dc83643f775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bgzqL8ddxnjCt1Gu.png"/></div></div></figure><p id="e850" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">简介</strong></p><p id="b1b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当选择一种技术来让React应用程序与MongoDB进行交互时，总是会想到Mongoose。它允许您创建对象引用，并用代码对数据库建模。然而，这种抽象牺牲了查询性能，使得它比JavaScript的MongoDB驱动程序慢。在本教程中，我将介绍使用Next.js及其易于使用的API路由系统的过程，以便您可以在React应用程序中使用驱动程序，而不必依赖外部API。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="6b43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">设置Next.js </strong></p><p id="99b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你要从头开始，你需要<a class="ae jw" href="https://nextjs.org/docs" rel="noopener ugc nofollow" target="_blank">创建一个Next.js应用</a>。如果你已经在一个现有的React应用上工作，你可以<a class="ae jw" href="https://nextjs.org/docs/migrating/from-create-react-app" rel="noopener ugc nofollow" target="_blank">迁移到一个Next.js应用</a>。这种迁移不仅为您提供了轻松生成API端点的能力，还为您提供了混合静态&amp;服务器呈现、类型脚本支持、智能绑定、动态路由等功能。</p><p id="86ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">配置API端点</strong></p><p id="44a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然已经有了Next.js，下一步就是为应用程序创建API路由来发送请求。目录<code class="du jx jy jz ka b">pages/api</code>中的任何文件都被映射到<code class="du jx jy jz ka b">api/*</code>，并被应用程序视为API端点而不是页面。我们可以在<code class="du jx jy jz ka b">pages/api</code>的JavaScript文件中使用MongoDB驱动程序编写查询数据库的脚本，然后使用适当的包向端点发送请求。在本教程中，我们将使用<a class="ae jw" href="https://www.npmjs.com/package/react-axios" rel="noopener ugc nofollow" target="_blank"> react-axios </a>。</p><p id="98ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在文件夹中，创建一个名为<code class="du jx jy jz ka b">example.js</code>的新文件，并编写一个基本脚本来接收POST请求并相应地处理它们。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="91f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jx jy jz ka b">req</code>参数存储POST请求中发送的数据。我们将使用这个端点来演示如何为创建、读取和删除操作配置端点，从在MongoDB集合中创建一个文档开始。在下面的例子中，<code class="du jx jy jz ka b">req.body</code>存储被插入到集合中的文档的对象。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="ccd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要通过ObjectID从集合中检索文档，请使用下面的代码作为指南。在这种情况下，<code class="du jx jy jz ka b">req.body</code>存储文档的MongoDB ObjectID，但是您可以很容易地更改<code class="du jx jy jz ka b">.find()</code>方法的参数以满足您的目的。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="eaf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要删除文档，请遵循下面的代码。<code class="du jx jy jz ka b">req.body</code>存储要删除的文档的MongoDB ObjectID，但是您可以很容易地更改<code class="du jx jy jz ka b">.deleteOne()</code>方法的参数以适合您的目的。你也可以使用类似<code class="du jx jy jz ka b">.deleteMany()</code>的方法来应对人口大规模外流。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="5265" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用react-axios发送请求</strong></p><p id="f9b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了使用这些API端点，我们需要用适当的主体向<code class="du jx jy jz ka b">api/insert-file-name-here</code>(在本教程中是<code class="du jx jy jz ka b">api/example</code>)发送请求。例如，如果您将端点配置为删除具有特定ObjectID的文档，则您的组件将如下所示:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="4fee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，请求可以在组件中的任何地方完成(最好是在它自己的处理程序方法中)；<code class="du jx jy jz ka b">componentDidMount()</code>这里用的是一个例子。如果您使用功能组件，那么让它成为异步组件，允许axios根据请求返回承诺。</p><p id="1678" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">将API端点用于其他功能</strong></p><p id="6b60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，可用性并不仅限于与数据库的交互。在React应用程序中配置一个API还可以使用预先训练的模型进行预测，检索和管理站点流量等统计数据，以及后端可能需要处理的任何其他功能。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="4051" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">恭喜你！您已经配置了API端点，允许在React应用程序中与MongoDB数据库进行交互。如果你对我做过的其他项目感兴趣，<a class="ae jw" href="https://isaacchendev.com/" rel="noopener ugc nofollow" target="_blank">去看看我的网站</a>。如果你有任何事情想联系我，我的<a class="ae jw" href="https://github.com/Iscaraca" rel="noopener ugc nofollow" target="_blank"> Github </a>和<a class="ae jw" href="https://www.linkedin.com/in/isaac-chen-jing-de/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>账户是链接的。</p></div></div>    
</body>
</html>