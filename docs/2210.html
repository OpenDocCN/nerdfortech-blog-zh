<html>
<head>
<title>SQL vs NoSQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL与NoSQL</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/sql-vs-nosql-6bc95a2df9d5?source=collection_archive---------13-----------------------#2021-04-26">https://medium.com/nerd-for-tech/sql-vs-nosql-6bc95a2df9d5?source=collection_archive---------13-----------------------#2021-04-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f120" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在构建后端或数据库时，我们如何选择sql或nosql？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/975905343c52d3f09d5b91c42b5c2581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z03THkOauYTazAPqq8sqKA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">SQL与NoSQL</figcaption></figure><p id="beb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们了解到SQL是一种叫做“RDBMS”的关系数据库，而NoSQL不是关系数据库。因为他们是两个对立的方面，我被误导到了对两者都很了解的地步。理论上，我是正确的。但是实际上，我意识到我并没有完全理解这两者。</p><p id="f044" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我分享我的故事之前，让我们从更深入的理论术语开始。</p><h1 id="2fc3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak"> SQL(关系数据库)</strong></h1><ul class=""><li id="6c51" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">将数据保存到已经定义了数据模式的表中</li><li id="ec04" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">通过关系，数据通过其他表分布</li></ul><p id="9614" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据作为记录保存在表中，但每个表都有其独特的定义结构。该结构由字段名称和数据类型组成，如字符串类型的名称和整数类型的年龄。</p><p id="869d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，数据库使用关系来避免数据重复。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/ceb28121126741a8a72d28617fd71542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jtbUZloTPTy3B8ysW9Q06w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">电子商务服务的关系数据库结构</figcaption></figure><p id="840a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您所看到的，第一个用户订购了一把椅子，这个操作保存在orders表中，具有唯一的id，但只有users表和products表的主键。因此，不必担心保存重复的数据，如用户或产品，因为可以用主键引用这些数据。</p><h1 id="aa2e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">NoSQL(非关系数据库)</h1><ul class=""><li id="003e" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">没有模式(预定义的结构)</li><li id="c36b" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">没有关系</li></ul><p id="a255" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与SQL数据库不同，NoSql数据库没有遵循预定义结构的模式，这意味着用户可以自由地读取和更新数据。在每个集合中，都有一个名为documents的记录。这些文档类似于JSON格式，所有相关文档都在一个集合中。所以按照上面的图片，订单文档将有关于用户和产品的信息，而不是保存它的主键。那么，当我们需要使用文档关系来连接时，我们该如何处理呢？</p><p id="ca5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个可能的解决方案是使用聚合操作中使用的$lookup。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lj"><img src="../Images/838e8a0e49f264d054aaec1657c8d284.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*RuCtaYBfhLR86WcsCQQNBw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">mongoDB中的查找操作</figcaption></figure><p id="8828" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，我们在lookup中加入了多个过滤选项，这将创建一个名为userinfo的新字段，这是一个连接的结果。或者，您可以将属性相互关联，以便及时更新相关信息。</p><p id="aa57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，让我们简要介绍一下两种数据库的一些重要优点和缺点。</p><h1 id="b299" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">可量测性</h1><p id="0627" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">水平扩展:基于数据的划分，每个节点包含部分数据(mongo DB)</p><p id="7496" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">垂直扩展:数据存储在单个节点上，通过多核实现扩展。(mySQL)</p><p id="977d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就个人而言，这意味着我们可以通过创建更多集合来轻松扩展NoSQL，而SQL数据库需要考虑关系，这使得扩展变得有点困难。然而，在某种意义上，有一种方法可以在扩展时保持关系，因此我们需要考虑每种类型数据库的利弊。</p><h1 id="b3a1" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">利弊</h1><p id="a9a2" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">SQL优点</p><ul class=""><li id="ccc9" class="ks kt hi ih b ii ij im in iq ln iu lo iy lp jc kz la lb lc bi translated">清晰定义的模式保证了数据的完整性</li><li id="d05c" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">无论位置如何，关系只保存一次数据</li></ul><p id="8486" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SQL Cons</p><ul class=""><li id="06f6" class="ks kt hi ih b ii ij im in iq ln iu lo iy lp jc kz la lb lc bi translated">不太灵活。总是需要知道模式是如何定义的，而且一旦定义，以后很难修改</li><li id="fc12" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">由于关系，可以构建更复杂的查询</li><li id="1712" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">大多数情况下，由于已经建立了关系，垂直扩展</li></ul></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="ba35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoSQL专业</p><ul class=""><li id="bf84" class="ks kt hi ih b ii ij im in iq ln iu lo iy lp jc kz la lb lc bi translated">非常灵活，可以自由修改</li><li id="9664" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">JSON数据类型允许应用程序更快地读取数据</li><li id="3148" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">垂直和水平缩放是可能的</li></ul><p id="ced5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoSQL骗局</p><ul class=""><li id="d9ab" class="ks kt hi ih b ii ij im in iq ln iu lo iy lp jc kz la lb lc bi translated">定义数据结构经常被推迟</li><li id="ce3e" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">可能会存储重复的数据</li><li id="43dc" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">当修改数据时，需要通过使用数据的其他地方进行更新</li></ul></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="5391" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，我遇到的情况是，我们的服务对每个角色都有不同的权限。角色可以是管理员，也可以是普通用户或某个经理。这里需要注意的重要一点是，当您的角色是经理时，您还可以为普通用户分配不同的本地权限。基本上，有两种权限:全局权限和本地权限，每种权限都有不同的种类。</p><p id="5234" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问题是，我应该使用哪种数据库结构？人们的感觉是，如果你使用node，你会坚持使用mongoDB如果你使用spring，你会坚持使用MySQL。但是，我们的服务似乎与两种权限和用户有明确的关系。该服务还有一个包含一组用户的用户组。考虑到这些不同的层和具有权限的用户组，我认为推荐使用RDBMS。另一件要谈的事情是，我们的服务似乎写回数据库很多，为不同用户组中的不同用户分配不同的权限。在这种情况下，如果我们使用mongoDB，我们需要确保不同集合中的文档是最新的。</p><p id="3406" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为进一步的参考，这里总结了在什么情况下推荐什么类型的数据库。</p><p id="c7ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SQL实例</p><ul class=""><li id="8416" class="ks kt hi ih b ii ij im in iq ln iu lo iy lp jc kz la lb lc bi translated">关系数据库经常改变</li><li id="53ad" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">已经定义了模式</li></ul><p id="c8e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoSQL实例</p><ul class=""><li id="76b1" class="ks kt hi ih b ii ij im in iq ln iu lo iy lp jc kz la lb lc bi translated">可能可修改的数据或可能可改变的数据结构</li><li id="68f6" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">读取比数据写入更频繁</li><li id="e01d" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">需要横向扩展(需要处理大量数据)</li></ul><p id="9af5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这对人们有所帮助，如果您对本文有任何异议或意见，请发表评论，展开热烈的讨论！</p><h1 id="27b1" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">编辑**</h1><p id="1111" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">正如Chris在评论中提到的，虽然这篇文章清楚地试图展示什么可能是每个数据库的最佳情况。当你设计一个数据库时，理解没有正确/错误的答案是很重要的，因为情况变化很大。虽然你可能会牺牲速度，但你可以拥有最大的能力，这是计算机科学的核心，你会有所收获，也会有所损失。因此，重要的是了解每个数据库做什么，并尝试在正确的情况下以正确的方式实现它们。</p></div></div>    
</body>
</html>