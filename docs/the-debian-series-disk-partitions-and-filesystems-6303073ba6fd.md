# Debian 系列:磁盘分区和文件系统

> 原文：<https://medium.com/nerd-for-tech/the-debian-series-disk-partitions-and-filesystems-6303073ba6fd?source=collection_archive---------5----------------------->

借此机会，我们将做一个关于如何执行和评估硬盘或任何类型的存储外围设备状态的实际案例，为特定磁盘生成一个分区表，并讨论一系列实用命令，这些命令

为什么是现实生活中的例子？因为除此之外，还有很多相关的理论，大部分可以呈现给你的情况都是真实的。

我一直在使用一个 Debian 7 实例，但是我很确定这个研讨会中使用的大多数命令在不同的 UNIX 操作系统上都能很好地工作。我们不需要为此安装额外的工具。出于明显的原因，我们只需要一个额外的 u 盘。

亲提示:你需要非常小心地选择一个磁盘，这是一个非常愚蠢的事情，选择你的主磁盘上运行你的操作系统。相信我，它会发生的。

让我们开始使用`dmesg`命令，这将评估已安装的磁盘实例，并向我们显示内核的完整日志及其识别的内容。这个命令的输出非常大，所以，您需要使用标志来过滤数据。我建议使用`man`来检查参数，以过滤日志类型，不管你想要什么原因。

另一个关键命令是`df`，这个命令报告可用的每个磁盘、闪存或分区的磁盘实例、文件系统和存储空间。旗帜`-h`是人类可读的，在指南、教程或书籍中看到这种组合`df -h`是很常见的。

在继续之前，让我们停下来，开始一个场景，当我们在`/dev/sda`上有一个主硬盘，在`/dev/sdb`上连接并放置了一个闪存驱动器

说了这么多，我需要引入`fdisk`命令，一个允许你操作磁盘和分区的系统二进制程序。您可以随时使用`man`命令查阅文档。

`fdisk`在选择了我们要使用的磁盘后，驱动您进入向导，在我们的例子中，我们将使用`/dev/sdb`磁盘。

事情是这样的:

`fdisk /dev/sdb`

这将启动向导，`p`选项将向您显示一个分区列表，`n`选项将允许从磁盘创建一个新的分区，在`n`选项内(作为子级别)，您将需要放置大小(基于扇区)和我们要创建的分区类型

在我们的特定示例中，我将创建一个主分区(缺省值为 1)，当然，在我的示例中，带有开始值和结束值的扇区值将从 2048–20971519。很好，所以，在那之后，我们使用`w`来写更改，一个新的分区被创建。

新分区在:`/dev/sdb1`

接下来，我们需要使用旧的`mfks`实用程序为创建的分区设置文件系统类型，有很多选项，但常见的有`ext3`、`ext4`或`ntfs`

我们这样做，`mkfs -t ext4 /dev/sdb1`

我刚刚格式化了`/dev/sdb1`磁盘的分区 1

现在，我们可以将创建的分区挂载到 OS 目录中(只是为了测试它是否正常工作)。

作为根用户，我们在任何地方创建一个目录，我们将分区挂载到创建的目录，然后用任何东西填充它(txt 的文件、图像等等)

```
mkdir /test-directory
mount /dev/sdb1 /test-directory
cd /test-directory
seq 1 1000000 > numbers.txt
```

对应的是`umount`命令。轻松卸载分区

`umount /dev/sdb1`

再多读一点，有一种方法可以将挂载的分区保存到 OS 目录中，就像最近一篇文章中提到的。这有点棘手(至少对我来说)，当然，首先是困难的。

阅读[这篇](https://www.howtogeek.com/howto/38125/htg-explains-what-is-the-linux-fstab-and-how-does-it-work/)文章我发现，`fstab`或操作系统的文件系统表是一个文件，它描述了计算机启动时或运行时(手动)将随时挂载的更改和驱动器。

在同一篇文章中，我引用了这句话来加强我的解释:“Fstab 被配置为寻找特定的文件系统，并每次都以所需的方式自动挂载它们，从而防止无数灾难的发生。”

该文件位于`/etc/fstab`，您可以更改或保持之前的配置。

仔细看看这个例子:

```
nano /etc/fstab
# now we are going to places the previous changes
UUID=XXXX /test-directory ext4 
```

使用应用于特定分区的`blkid`命令可以获得 UUID 值。

`blkid /dev/sdb1`

复制并粘贴到`/etc/fstab`上

之后，您需要使用`mount -a`命令将更改挂载到文件上。并且，在您完全完成后，需要重新启动以获得持久驱动器。

您总是可以通过运行`df -h`来验证是否一切顺利，并查看是否出现了预期的变化。

这个特别的故事是在运行中创建的，在整个过程中有很多不好的期望和错误，我相信我很容易忘记在这里解释一些东西，但我会在未来更新它。

感谢您的阅读，并在本系列的下一篇文章中继续讨论交换内存配置。

敬请关注。

快乐编码:)