<html>
<head>
<title>Upload images in Node.js without a form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js中上传图像，不使用表单</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/upload-images-in-node-js-without-a-form-be15b2ab0745?source=collection_archive---------3-----------------------#2021-06-11">https://medium.com/nerd-for-tech/upload-images-in-node-js-without-a-form-be15b2ab0745?source=collection_archive---------3-----------------------#2021-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/a4f137f440c762e13845388c8e76b67b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*knUxyvQ2GpFGp5t6.png"/></div></figure><p id="2b5a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">曾经想上传文件，但没有一个形式，但发现它太复杂？我抓住你了。<br/>这篇文章给出了一个简单的例子，告诉你如何在没有表格的情况下上传文件。<br/>为了简单起见，在这个例子中，您只能上传<code class="du jk jl jm jn b">jpg</code>和<code class="du jk jl jm jn b">png</code>文件。</p><blockquote class="jo jp jq"><p id="37e9" class="im in jr io b ip iq ir is it iu iv iw js iy iz ja jt jc jd je ju jg jh ji jj hb bi translated">本教程需要关于Express.js和基本JavaScript的基本知识</p></blockquote><p id="b916" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">顺便说一下，这是应用程序目录</p><pre class="jv jw jx jy fd jz jn ka kb aw kc bi"><span id="cfb0" class="kd ke hi jn b fi kf kg l kh ki">index.js<br/>  public<br/>     index.html<br/>     script.js</span></pre><p id="862e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因此，首先让我们建立一个快速服务器来服务于<code class="du jk jl jm jn b">public</code>文件夹。</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="066e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将使用<a class="ae kl" href="https://github.com/expressjs/multer" rel="noopener ugc nofollow" target="_blank"> Multer </a>上传文件，Multer是用于<a class="ae kl" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express.js </a>的中间件，用于轻松上传文件。所以现在我们添加了一些配置的中间件。对于文件名，我使用的是上传时间，你可以很容易地把它改成你想要的任何东西。<strong class="io hj">只要确保文件名是唯一的</strong>(例如可以使用<a class="ae kl" href="https://www.npmjs.com/package/uuid" rel="noopener ugc nofollow" target="_blank"> uuid </a>)。</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kj kk l"/></div></figure><blockquote class="jo jp jq"><p id="7460" class="im in jr io b ip iq ir is it iu iv iw js iy iz ja jt jc jd je ju jg jh ji jj hb bi translated">我们在公共文件夹中指定了文件的目标位置，以便可以轻松访问这些文件。</p></blockquote><p id="b412" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们必须输入一个文件来发送文件，当然还有一些JavaScript。通常我喜欢为一个应用程序设计UI，但我会让这个例子尽可能简单，所以我没有添加CSS，也没有使用任何UI框架。</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kj kk l"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">主html页面</figcaption></figure><p id="5b4f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是我们应用程序的主页，请注意，我使用文件输入标签的<a class="ae kl" href="https://www.w3schools.com/tags/att_input_accept.asp" rel="noopener ugc nofollow" target="_blank"> accept属性</a>指定了文件类型。</p><p id="07dc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最后但同样重要的是，代码！</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kj kk l"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">文件上传脚本</figcaption></figure><p id="d9ae" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">基本上，当你选择一个文件时，上传按钮被激活(通过<code class="du jk jl jm jn b">enableUpload()</code>，当点击它时，一个包含文件的POST请求被发送到服务器(<code class="du jk jl jm jn b">uploadImage()</code>)。文件保存到服务器后，它返回文件数据作为响应。然后，通过将基本URL与文件名相加来获取图像的URL，并将其显示为图像。同样<strong class="io hj">文件变量可以是任何</strong> <a class="ae kl" href="https://javascript.info/blob" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">斑点</strong> </a> <strong class="io hj">文件</strong>，例如音频斑点。这里，文件变量包含文件输入中的第一个文件。</p><p id="b83d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">瞧啊。你有一个可以保存图片的服务器，有点像Google Drive😅。</p><p id="3488" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是一个工作示例</p><div class="kq kr ez fb ks kt"><a href="https://replit.com/@AbaanShanid/FileUploadExample" rel="noopener  ugc nofollow" target="_blank"><div class="ku ab dw"><div class="kv ab kw cl cj kx"><h2 class="bd hj fi z dy ky ea eb kz ed ef hh bi translated">文件上传示例</h2><div class="la l"><h3 class="bd b fi z dy ky ea eb kz ed ef dx translated">AbaanShanid的Node.js repl</h3></div><div class="lb l"><p class="bd b fp z dy ky ea eb kz ed ef dx translated">replit.com</p></div></div><div class="lc l"><div class="ld l le lf lg lc lh ik kt"/></div></div></a></div><p id="1d0c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你想叉这个，还有一个GitHub回购</p><div class="kq kr ez fb ks kt"><a href="https://github.com/tomatopickle/File-Upload-Example" rel="noopener  ugc nofollow" target="_blank"><div class="ku ab dw"><div class="kv ab kw cl cj kx"><h2 class="bd hj fi z dy ky ea eb kz ed ef hh bi translated">tomatopickle/文件-上传-示例</h2><div class="la l"><h3 class="bd b fi z dy ky ea eb kz ed ef dx translated">向Nodejs上传文件的简单方法。为tomatopickle/File-Upload-Example开发做贡献，创建一个…</h3></div><div class="lb l"><p class="bd b fp z dy ky ea eb kz ed ef dx translated">github.com</p></div></div><div class="lc l"><div class="li l le lf lg lc lh ik kt"/></div></div></a></div><p id="38a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">另外，我对文章写作很陌生，如果你发现这篇文章有什么问题，请告诉我！</p></div></div>    
</body>
</html>