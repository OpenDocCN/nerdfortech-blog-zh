<html>
<head>
<title>Runlist, Multiple Recipes, Linux- Group &amp; Users in CHEF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">运行列表、多个食谱、Linux 组和 CHEF 中的用户</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/runlist-multiple-recipes-linux-group-users-in-chef-170afcb51fba?source=collection_archive---------6-----------------------#2021-04-17">https://medium.com/nerd-for-tech/runlist-multiple-recipes-linux-group-users-in-chef-170afcb51fba?source=collection_archive---------6-----------------------#2021-04-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f4e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">先决条件:<a class="ae jd" href="https://bansalkushagra.medium.com/how-to-create-a-cookbook-and-recipe-in-chef-ae62e9ba8156" rel="noopener">https://bansalkushagra . medium . com/how-to-create-a-cookbook-and-recipe-in-chef-AE 62 e 9 ba 8156</a></p><p id="28b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤 1: </strong>访问您的亚马逊 EC-2 机器，并遵循以下命令:</p><blockquote class="je jf jg"><p id="2cf4" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">须藤秀</p><p id="0a49" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">cd 烹饪书</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/ee6471b9dc5904cef9c27011b88c1dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*48doh6p6bEUq__Cy6vIM6g.png"/></div></figure><p id="cfb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:</strong></p><p id="60e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用 chef 中的 ruby 脚本在 Linux 机器上创建一个目录和一个文件，并看看菜谱中的 ruby 脚本和菜谱中运行的 Linux 命令之间的区别。</p><p id="d744" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目录和文件名是 kushagradirectory 和 kushagrafile</p><p id="8d1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，创建一个食谱并输入一个代码</p><blockquote class="je jf jg"><p id="5dab" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">vi 测试-cookbook/recipes/recipe3.rb</p></blockquote><p id="e176" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">代码:</strong></p><blockquote class="je jf jg"><p id="c71d" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">执行“运行脚本”做什么</p><p id="f552" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">命令&lt;</p><p id="53e9" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">mkdir /kushagradirectory</p><p id="fc4d" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">touch /kushagrafile</p><p id="cca5" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">EOH</p><p id="e878" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">end</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/ab5bb88b4c6444eb91c889cdb2d251f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*Eb9csY6S9Hze_5UZ8YbnBg.png"/></div></figure><p id="62ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Second, execute the recipe using below command</p><blockquote class="je jf jg"><p id="c609" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">Ø chef-client -zr “recipe[test-cookbook::recipe3]”</p><p id="8869" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">Ø ls /</p></blockquote><p id="ff45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">In the output, we see the green color status which means the script is run successfully and directory &amp; file has been created.</p><p id="6e60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">This command will help you to see the entire root directory.</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jl"><img src="../Images/a179d6fcf54bea16a44bebea62dc49d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*s2SF3lxodbEiV9hRA8Ax5w.png"/></div></div></figure><p id="5555" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">As we discussed earlier if we execute the same script again it first checks the current state stored in ohai and if the state of the node is the same it does not overwrite instead shows an output “up-to-date”. But, since here we are using the Linux command, here it executes the same script again and again. Follow the below output.</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/c04715ac04e1d295d496c54a54793069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*bTfY-0yLSNkB9nl-dfeHpQ.png"/></div></figure><p id="4f37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤 3: </strong></p><p id="ebbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用 chef 在 Linux 机器上创建一个用户和组</p><p id="950c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，打开菜谱并继续添加以下代码</p><blockquote class="je jf jg"><p id="9294" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">用户“ban sal”do</p><p id="923b" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">操作:创建</p><p id="c7df" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">结束</p></blockquote><p id="3027" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行该脚本后，我们看到 2/2 的资源被更新，这意味着用于创建目录和文件的早期代码以及用于添加用户的当前脚本都已被执行。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/e84cef9ad4170b6c10ebcc3616d63f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*bWmpShZmGmUWC7BV0gc6KA.png"/></div></figure><p id="8a5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，现在通过添加延续中的代码/脚本来添加一个组</p><p id="17ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">代码:</strong></p><blockquote class="je jf jg"><p id="b43b" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">“kusha gra _ CHEF”do 组</p><p id="1c02" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">操作:创建</p><p id="8e01" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">成员' bansal '</p><p id="0c9c" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">附加真</p><p id="8b92" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">结束</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jl"><img src="../Images/dce07a707ba2da602f13a529ed9fc47c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*tXP4h536vU8eN8BhkqVkYg.png"/></div></div></figure><p id="3bec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下面的输出中，我们看到 2/3 的资源更新，因为我们添加的用户纯粹是一个 ruby 脚本，我们知道 ruby 脚本不会覆盖。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/312ec0952cab192bc82cdf9fc640b9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*5-P45FTMGZG-q5abZ8QsxA.png"/></div></figure><p id="beac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用下面的命令来验证用户名和组名</p><blockquote class="je jf jg"><p id="0ca3" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">卡特彼勒/etc/集团</p></blockquote><p id="f0b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤 4: </strong></p><p id="43ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行两个不同食谱的两个食谱</p><blockquote class="je jf jg"><p id="c1af" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">chef-client-Zr " recipe[test-cookbook::recipe 3]，recipe[Apache-cookbook::recipe 3]</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/33937c7b8588dde5681c2f1f22e47574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*vX-zI1Seb2AGH2c0i0WH_w.png"/></div></figure><p id="6b0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第五步:</strong></p><p id="b29a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行特定食谱的一个或多个食谱。在“测试食谱”中创建多个食谱。比如说默认的，接收 2.rb，接收 3.rb，接收 4.rb</p><p id="61dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们可以在任何想要运行的配方中调用一个或多个配方</p><blockquote class="je jf jg"><p id="53f7" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">VI/test-cookbook/recipes/default . Rb</p></blockquote><p id="566d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们采用 default.rb 配方</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jl"><img src="../Images/78bc4417767958c8d8b46e9bfdf152d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*SUt1-5Boju03ZYY8nWmYaA.png"/></div></div></figure><p id="cc1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二，运行默认配方，从中执行多个配方。</p><blockquote class="je jf jg"><p id="45b1" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">chef-client -zr "食谱[测试食谱::默认]"</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jl"><img src="../Images/6fbb9d9d977b406a2a5be890daba30f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*ToiD8V4RMcSJ4cJ28ljozg.png"/></div></div></figure></div></div>    
</body>
</html>