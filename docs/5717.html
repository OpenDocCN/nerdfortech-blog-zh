<html>
<head>
<title>How to Set up Development Server Using Typescript And Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Typescript和Docker设置开发服务器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-set-up-development-server-using-typescript-and-docker-1e63735b5ca2?source=collection_archive---------0-----------------------#2021-11-06">https://medium.com/nerd-for-tech/how-to-set-up-development-server-using-typescript-and-docker-1e63735b5ca2?source=collection_archive---------0-----------------------#2021-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6e1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过这些简单的步骤，摆脱设置您的第一个开发服务器的艰巨任务</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/65ce028c15fed48f855da7b8b927856e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tl1mOmZxcQwREf27"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">克里斯托弗·伯恩斯在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9ca9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置您的第一个开发服务器不是一件容易的事情。有时，您会对需要遵循的众多步骤和其他未指定的需求感到困惑。</p><p id="7608" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不久前就面临这个问题，事实是我需要将几种资源结合起来才能让它发挥作用。那么，如果我提供另一种资源来进一步帮助社区呢？</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="4f9f" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">背景</h1><p id="fc81" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">假设您想使用TypeScript构建一个应用程序。这意味着您需要编译刚刚编写的JavaScript代码，然后运行它。好吧，听起来很简单。</p><p id="af38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您知道您有一个远程数据库，可以与项目的所有团队成员一起使用。但是在开发应用程序一段时间后，您的开发数据库中堆满了垃圾数据。既然你不喜欢这种乱七八糟。您想知道如何设置服务器和数据库来自由地开发您的应用程序，包括运行您的测试。</p><p id="9325" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢天谢地，你来对地方了。让我们停止这种甜言蜜语，跳到主要内容。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="5fde" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">安装TypeScript项目</h1><p id="81c1" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">首先，为您的项目创建一个目录。你可以给它起一个你想要的名字，比如typescript-server。之后，通过运行以下命令创建一个<code class="du le lf lg lh b">package.json</code>文件:</p><pre class="je jf jg jh fd li lh lj lk aw ll bi"><span id="b743" class="lm kc hi lh b fi ln lo l lp lq">npm init</span><span id="88e7" class="lm kc hi lh b fi lr lo l lp lq">// Without any questions<br/>npm init -y</span></pre><p id="bb9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您的项目根目录中有了一个<code class="du le lf lg lh b">package.json</code>。</p><p id="c5f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，您需要安装TypeScript作为开发依赖项。你可以通过跑步做到这一点</p><pre class="je jf jg jh fd li lh lj lk aw ll bi"><span id="01c7" class="lm kc hi lh b fi ln lo l lp lq">npm i typescript --save-dev</span></pre><p id="b515" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然已经安装了TypeScript，现在可以通过运行命令创建一个<code class="du le lf lg lh b">tsconfig.json</code>文件</p><pre class="je jf jg jh fd li lh lj lk aw ll bi"><span id="19e8" class="lm kc hi lh b fi ln lo l lp lq">npx tsc --init</span></pre><p id="748f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧，您的项目根目录中有一个<code class="du le lf lg lh b">tsconfig.json</code>。<code class="du le lf lg lh b">tsconfig.json</code>表示您的项目是一个TypeScript项目，它包含编译该项目所需的编译器选项。因为基本上，你是用TypeScript写代码，但是你的服务器是用JavaScript运行的。</p><p id="044e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du le lf lg lh b">tsconfig.json</code>中有很多选项，但是在这种情况下，我只使用这些选项来简化文件。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="1922" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这样一个常见的目录结构，我们需要在项目的根目录下有一个<code class="du le lf lg lh b">src</code>文件夹。所以，我们来做一个吧！</p><p id="0ef0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建<code class="du le lf lg lh b">src</code>文件夹和里面的<code class="du le lf lg lh b">index.ts</code>。为了进行健全性检查，您可以将它写在<code class="du le lf lg lh b">index.ts</code>中。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="a117" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，通过运行命令编译TypeScript代码</p><pre class="je jf jg jh fd li lh lj lk aw ll bi"><span id="36cb" class="lm kc hi lh b fi ln lo l lp lq">npx tsc</span></pre><p id="0539" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此时，您会看到有一个名为<code class="du le lf lg lh b">build</code>的文件夹。那是你的JavaScript文件被放置的地方。因为我们已经指定编译的文件夹在<code class="du le lf lg lh b">build</code>文件夹中(在<code class="du le lf lg lh b">tsconfig.json</code>中寻找<code class="du le lf lg lh b">outDir</code>选项)。</p><p id="2b3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，通过运行来运行JavaScript代码</p><pre class="je jf jg jh fd li lh lj lk aw ll bi"><span id="405f" class="lm kc hi lh b fi ln lo l lp lq">node ./build index.js</span></pre><p id="a70d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不错，我们可以看到“你好世界！”打印在终端上的信息。</p><p id="1b0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最好简化我们以前在<code class="du le lf lg lh b">package.json</code>文件的脚本中使用的命令。将<code class="du le lf lg lh b">package.json</code>中的脚本部分重写为:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="a33b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如脚本所建议的，您可以使用<code class="du le lf lg lh b">npm run build</code>编译代码，并使用<code class="du le lf lg lh b">npm run dev</code>运行代码。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="d5c2" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">运行我们的开发服务器</h1><p id="4b9f" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">之前，我们已经编写了一个健全性检查来确保我们的代码可以被编译和执行。现在，我们将使用Express设置我们的服务器。</p><p id="b0f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行<code class="du le lf lg lh b">npm install express @types/express</code>安装Express</p><p id="f965" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将<code class="du le lf lg lh b">src</code>文件夹内的<code class="du le lf lg lh b">index.ts</code>改为</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="133c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">和以前一样，您可以使用<code class="du le lf lg lh b">npm run build</code>编译代码，然后使用<code class="du le lf lg lh b">npm run dev</code>运行它。现在，您可以看到我们的服务器运行在端口5000上。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="ca14" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">用eslint定义编码规则(可选)</h1><p id="0bd8" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">编写代码时拥有预定义的规则是非常必要的。它可以使您的代码保持一致，尤其是当您在团队中工作时。但是对于初学者来说，用规则写作会成为一个减速因素。不用怕，你可以跳过这一节，足够自信后再回来。</p><p id="9a60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装eslint及其扩展:</p><pre class="je jf jg jh fd li lh lj lk aw ll bi"><span id="a1cd" class="lm kc hi lh b fi ln lo l lp lq">npm install eslint eslint-config-airbnb-base eslint-plugin-import @typescript-eslint/eslint-plugin @typescript-eslint/parser</span></pre><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="d870" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">显然，不同的团队或项目可能有不同的编码规则。但是您可以根据自己的需要进行配置。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="559f" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">使用Nodemon实时重新加载</h1><p id="75b9" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">好吧，我们取得了一些进展。但是每次我们做了一些改变，终止，编译，然后运行代码是不是很累？让我们通过使用nodemon来简化我们的开发体验。</p><p id="e654" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行<code class="du le lf lg lh b">npm install nodemon</code></p><p id="590c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建<code class="du le lf lg lh b">nodemon.json</code>，然后写这个</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="73b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将之前的<code class="du le lf lg lh b">package.json</code>脚本改为</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="6a58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:如果不使用eslint，请移除<code class="du le lf lg lh b">eslint --fix --ext .ts ./src</code></p><p id="d81e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以通过运行<code class="du le lf lg lh b">npm run dev</code>来运行您的开发服务器。尝试改变你的代码(例如<code class="du le lf lg lh b">index.ts</code>，你会看到代码正在重新编译和运行。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="3d38" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">Docker和docker-撰写</h1><p id="fa83" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">此时，您已经有了一个工作的开发服务器。为了实现我们之前在简介中的关注点，让我们把它和Docker结合起来。</p><p id="a26b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在项目的根目录下创建一个Dockerfile文件，并编写如下代码。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="d319" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后创建一个<code class="du le lf lg lh b">docker-compose.yaml</code></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="2a78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您需要Postgres数据库服务，那么使用这个docker-compose文件。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="21a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行命令<code class="du le lf lg lh b">docker-compose up</code>来运行docker-compose文件中的所有服务。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="4a52" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">Makefile命令</h1><p id="5079" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">为了使我们的开发周期更简单，让我们有一个Makefile。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="8f70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们这里的命令几乎是不言自明的。您可以使用<code class="du le lf lg lh b">make build</code>构建映像，使用<code class="du le lf lg lh b">make up</code>(不重建映像)和<code class="du le lf lg lh b">make run</code>运行服务，如果您想先构建服务的话。然后<code class="du le lf lg lh b">make down</code>删除所有服务的容器。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="bc74" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">结论</h1><p id="e949" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">我们已经经历了设置开发服务器的几个步骤。就像名字说的那样，只是为了开发的目的。如果您对如何设置一个生产就绪的服务器感兴趣，您可以查看参考资料中的详细信息。</p><p id="73d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这篇文章可以帮助你理解建立一个开发服务器，不是一个令人生畏的任务，而是一步一步的顺序，你可以遵循。</p><p id="40a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读和快乐编码！</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="046e" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">资源:</h1><ul class=""><li id="39d3" class="lu lv hi ih b ii kz im la iq lw iu lx iy ly jc lz ma mb mc bi translated"><a class="ae jt" href="https://www.digitalocean.com/community/tutorials/typescript-new-project" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/typescript-new-project</a></li><li id="7c62" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated"><a class="ae jt" href="https://cloudnweb.dev/2019/09/building-a-production-ready-node-js-app-with-typescript-and-docker/" rel="noopener ugc nofollow" target="_blank">https://cloud nweb . dev/2019/09/building-a-production-ready-node-js-app-with-typescript-and-docker/</a></li><li id="a8dc" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated"><a class="ae jt" href="https://dev.to/rubiin/docker-pipeline-with-typescript-express-for-production-20kc" rel="noopener ugc nofollow" target="_blank">https://dev . to/Rubin/docker-pipeline-with type script-express-for-production-20kc</a></li></ul></div></div>    
</body>
</html>