<html>
<head>
<title>2D Attack System using Interfaces in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Unity 中使用接口的 2D 攻击系统</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/2d-attack-system-using-interfaces-in-unity-db7a5ec3ac5?source=collection_archive---------7-----------------------#2021-07-21">https://medium.com/nerd-for-tech/2d-attack-system-using-interfaces-in-unity-db7a5ec3ac5?source=collection_archive---------7-----------------------#2021-07-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/840c765f17182c717c1e1524b4a84f2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AsubCm-A9p1MQzAI.jpg"/></div></div></figure><p id="4b7e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我的游戏里有敌人，现在是时候让玩家攻击他们了。</p><p id="b2c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，创建一个新的 c#脚本，并将其命名为 IDamageable。这将是一个界面。除了使用接口的脚本必须使用接口中的所有组件之外，接口类似于类继承。一个脚本也可以使用多个接口。</p><p id="77fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在 IDamageable 脚本中，将其声明为一个接口，并创建一个健康变量和一个损坏方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/8b7863dca616c4c091bf26a1e3b4b92c.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*zHZbGPgAgPWBSagVe8m6wg.png"/></div></figure><p id="4df8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转到其中一个敌人类，并将 IDamageable 接口添加到脚本中。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/b1d2ddd06c4cf31d1c89e3e9ae52c230.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*lmgyQGn-YkrAwtPREDNsSA.png"/></div></figure><p id="97d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将迫使这个类使用健康变量和损害方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/f209b08ef82c3ac2b46950fa193914ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*rea3jsZiipq_FljSNiwnlQ.png"/></div></figure><p id="9e01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在 Init 方法中，将 health 变量设置为等于敌方类中的 Health 变量。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/3a452c5ee154dcf11dbdf1609e641043.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*gfFyhb0p-Uw5nie4Ow4ajQ.png"/></div></figure><p id="85ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">伤害法中，敌人每被击中一次生命值减一。如果生命值小于 1，则销毁当前游戏中附加脚本的对象。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jw"><img src="../Images/babacedde4bcc2232654c3206ead3105.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*LAQGroB8h-r0L_tc6gXKlg.png"/></div></figure><p id="c059" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了利用这一点，转到攻击脚本并创建一个<strong class="is hj"> OnTiggerEnter2D </strong>。你将在你击中的碰撞器上检查一个 IDamageable 组件。如果它有一个，你将调用损坏方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jx"><img src="../Images/a7289b98c24372e247185081b156c86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*_LyrV1W1HF-VeLZJTFuciw.png"/></div></figure><p id="a54f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了确保敌人每次只被击中一次，创建一个布尔变量。调用损坏方法后，此变量将为 false。调用损坏方法后，调用一个协程等待 0.5f 秒，将变量设为 true。该变量需要为 true 才能再次调用 damage 方法。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jx"><img src="../Images/1196414e36d7b6be9332105af960d620.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*Ves4UhDH7K0b-XM3yQxt9Q.png"/></div></figure><p id="c5be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果在 health 减去 1 之后，在 skeleton 类中添加一个 debug 语句，您将能够看到 health 在下降。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jy"><img src="../Images/2232711f86dbf7b1fd9160637b339350.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/1*EIbUDzxAuR6O4RsrKXMoig.png"/></div></figure><p id="bfc8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在设置你的敌人的健康，你将准备好测试这一点。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/a754337d4c916c5bd01587f7dd65df35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_UfRseNqr6Ncvgj4YrTTUA.gif"/></div></div></figure></div></div>    
</body>
</html>