<html>
<head>
<title>Creating Modular Waypoint System in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Unity 中创建模块化航路点系统</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-modular-waypoint-system-in-unity-33ef8be576c0?source=collection_archive---------21-----------------------#2021-06-28">https://medium.com/nerd-for-tech/creating-modular-waypoint-system-in-unity-33ef8be576c0?source=collection_archive---------21-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="acea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">秘密游戏和电影摄影</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/0f6abb320ce6d09879fe795b450f26f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*UdLV7Om3cOSwSZPx.png"/></div></figure><p id="7d35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">目标:</strong>创建一个模块化的航点</p><p id="93a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建一个模块化的路点，让我们首先在场景视图中制作路点。创建一个游戏对象，并把它放在玩家要去的地方。还要注意的是，玩家要走最短的路线，所以如果你想让你的玩家沿着特定的方向移动，一定要在中间加点。还要给警卫添加一个导航网格代理，以便在导航网格中导航。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jl"><img src="../Images/b7993b14c0d73d0f355a2bcb5601b5b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*y_OS9bhGcuz2ciHC7ESw_g.png"/></div></figure><p id="8069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在创建一个守卫 AI 脚本，因为我们正在创建一个守卫移动的路点。</p><p id="ec51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在该脚本中，创建一个引用变量，指向添加到 guard 的 nav mesh 代理。此外，创建一个变换变量列表，用于存储每个路点的变换值。</p><p id="14a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后创建一个 int 变量，它将定义在列表中访问哪个航路点。然后创建两个 bool 变量，一个用于定义守卫是移动到起点还是移动到定义的位置，另一个用于检查是否已经到达目标。</p><p id="4844" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在开始创建对导航网格代理的引用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/9fef50fac220836a8031068d7f478073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*64pEhiG_XsUjCd_4wUwUGQ.png"/></div></div></figure><p id="1ede" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在内部更新中，我们将检查守卫是否有路点，以及当前目标索引列表中是否有路点。</p><p id="fede" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果两者都返回 true，那么将保护的目的地设置为航路点。我们有一个警卫行走和闲置的动画，所以如果警卫达到目标，然后设置动画为闲置，如果没有设置动画为行走。</p><p id="b309" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在检查目标位置和当前位置之间的距离，如果距离小于 1，警卫将调用协程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jr"><img src="../Images/a688754bc2967b780e4baf5deb94a071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9xixk_Y6kvZCQM69I1VsUg.png"/></div></div></figure><p id="449f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在协程中，设置时间，使防护在开始和结束时空闲，随机数在 2 到 5 秒之间。然后检查列表中的航路点位置。如果索引是最后一个，则将反向布尔值设置为真，否则为假。还要将自动制动设置为真，这样防护装置就不会四处移动。</p><p id="d1ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后检查后卫是否移动到终点或起点，并根据它增加或减少当前目标形式的指数值。</p><p id="fd56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，当守卫再次开始移动时，将达到的目标设置为假。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es js"><img src="../Images/50e9373300a8f661980037b132758e4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*8pJCNkGrJRs6vxps2GR11Q.png"/></div></figure><p id="b566" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">拖动列表中的所有路点，让守卫向其移动。还要注意的是，每个守卫都有相同的脚本，但是他们有自己的功能，所以他们存储不同的路点，所以他们的目的地也是不同的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jt"><img src="../Images/783e84e0a797d8707f79f174d39b95c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*w_WDb9QYQzDHloEA9qoABw.gif"/></div></div></figure><p id="c4df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是最后的样子。</p></div></div>    
</body>
</html>