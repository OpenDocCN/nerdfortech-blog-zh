<html>
<head>
<title>Fixing the Gem Count Bug in my Game</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修正我游戏中的宝石计数错误</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/fixing-the-gem-count-bug-in-my-game-5992b6496773?source=collection_archive---------16-----------------------#2021-07-31">https://medium.com/nerd-for-tech/fixing-the-gem-count-bug-in-my-game-5992b6496773?source=collection_archive---------16-----------------------#2021-07-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/854b703569860b717a892aa0117f4fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*X7pT4cryfcJGFG2pYLkM7w.png"/></div></figure><p id="6a20" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我创建战利品系统的时候，敌人掉落了他们分数数量的宝石。所以一个苔藓巨人会给大约 50 颗宝石，而骷髅只会给 25 颗。在我决定在地图周围添加多颗钻石让玩家发现之前，这一直很有效。这打破了系统，所有的敌人都掉落了 10 颗宝石。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jk"><img src="../Images/ae84bf53c556cdc5fd6b5c414f7d6661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/1*ST65zYa70wUsbM-cQ7oEAQ.gif"/></div></figure><p id="f635" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">过了一会儿，我发现了问题所在。我使用的代码实例化了钻石，然后找到了钻石脚本并更改了宝石分数。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jp"><img src="../Images/8aae3264f14bdc8875fafb2a17b322b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6oYHJaXErRrx1hEyh2rUBQ.png"/></div></div></figure><p id="9cc7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我发现 unity 是找到第一个菱形脚本，该脚本附加到层次结构中的第一个菱形上，并将该菱形设置为 50 分。因为实例化的钻石是层次结构中的最后一个，所以它永远不会被找到。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/90b33693c3c057b6d4c285dba9da3e51.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*8JdBVGRH2I4oMdePDHPNjg.png"/></div></figure><p id="eaca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了给正确的钻石设定分数，我稍微修改了一下我的代码。在实例化钻石之后，我创建了一个包含所有钻石的数组。菱形按照 unity 查找脚本的顺序放入数组中。因此实例化的钻石将是最后的。然后，我将菱形脚本设置为数组中最后一个菱形的脚本。这解决了我的问题。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/244c6bd8733741a05f0dcef68a4d597d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*39vmjnANH3dmRxgh6bksSg.png"/></div></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jw"><img src="../Images/034e548a488e0e6bbd7dff310eb6e07c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dVkdTIA5TpHAtIgfMQKXUQ.gif"/></div></div></figure></div></div>    
</body>
</html>