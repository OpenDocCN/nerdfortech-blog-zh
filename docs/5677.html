<html>
<head>
<title>Creating a Pomodoro GUI App using Tkinter in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的Tkinter创建番茄GUI应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-pomodoro-gui-app-using-tkinter-in-python-d179e67e0ae0?source=collection_archive---------1-----------------------#2021-10-31">https://medium.com/nerd-for-tech/creating-a-pomodoro-gui-app-using-tkinter-in-python-d179e67e0ae0?source=collection_archive---------1-----------------------#2021-10-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fd35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">番茄工作法是一种有效的时间管理系统。一个人在给定的时刻专注于特定的任务，而不是一心多用。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jk"><img src="../Images/065888b71f85c91e9c4cb8b61d44e971.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uifBnKDsvy7PkQcC07eUaA.jpeg"/></div></div></figure><h1 id="b648" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated"><strong class="ak">图形用户界面的目标</strong></h1><p id="32e4" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">我们连续25分钟专注于这项任务，然后休息5分钟。30分钟的冲刺时间被称为一个番茄工作法。在4个这样的番茄之后，使用者需要休息20分钟。</p><h1 id="45af" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">构建GUI的步骤</h1><ol class=""><li id="32a1" class="ku kv hi ih b ii kp im kq iq kw iu kx iy ky jc kz la lb lc bi translated">导入tkinter和数学库</li><li id="85ae" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">定义全局常数</li><li id="8488" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">设置用户界面</li><li id="a020" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">构建倒计时机制</li><li id="016f" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">构建计时器机制</li><li id="5712" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">设置定时器复位逻辑</li></ol></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="f8ec" class="lp js hi bd jt lq lr ls jx lt lu lv kb iq lw lx kf iu ly lz kj iy ma mb kn mc bi translated">步骤1:导入tkinter和数学库</h2><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="a26e" class="lp js hi me b fi mi mj l mk ml">from tkinter import *<br/>import math</span></pre><p id="e86a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:定义全局常量</strong></p><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="9a17" class="lp js hi me b fi mi mj l mk ml">PINK = "#e2979c"<br/>RED = "#e7305b"<br/>GREEN = "#9bdeac"<br/>YELLOW = "#f7f5dd"<br/>FONT_NAME = "Courier"<br/>WORK_MIN = 25<br/>SHORT_BREAK_MIN = 5<br/>LONG_BREAK_MIN = 20<br/>reps = 0<br/>timer = None</span></pre><p id="cc1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们硬编码了颜色的十六进制值，以便以后在将它们应用到GUI时参考。</p><h2 id="092f" class="lp js hi bd jt lq lr ls jx lt lu lv kb iq lw lx kf iu ly lz kj iy ma mb kn mc bi translated"><strong class="ak">第三步:UI设置</strong></h2><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="3758" class="lp js hi me b fi mi mj l mk ml">window = Tk()<br/>window.title("Pomodoro")<br/>window.config(padx=100, pady=50, bg=YELLOW)<br/>title_label = Label(text="Timer", fg=GREEN, bg=YELLOW, font=(FONT_NAME, 50))<br/>title_label.grid(column=1, row=0)<br/># Need to check the background colour of the canvas as well<br/>canvas = Canvas(width=200, height=224, bg=YELLOW, highlightthickness=0)<br/># highlightthicknes is used for making the highlight disappear<br/>tomato_img = PhotoImage(file="tomato.png")<br/>canvas.create_image(100, 112, image=tomato_img)<br/>timer_text = canvas.create_text(100, 130, text="00:00", fill="white", font=(FONT_NAME, 35, "bold"))<br/>canvas.grid(column=1, row=1)<br/># x and y values are half of the width and the height<br/>start_button = Button(text="Start", highlightthickness=0, command=start_timer)<br/>start_button.grid(column=0, row=2)<br/>reset_button = Button(text="Reset", highlightthickness=0, command = reset_timer)<br/>reset_button.grid(column=2, row=2)<br/><br/>check_marks = Label(text="✓", fg=GREEN, bg=YELLOW)<br/>check_marks.grid(column=1, row=3)</span></pre><p id="8b32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用Tk类来定义窗口，并给它一个100，50像素的填充。</p><p id="f7e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用网格布局来放置按钮和标签。</p><p id="cada" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“highlightthickness”去掉了画布的边框轮廓。试着跳过它，你就会知道我在说什么。</p><p id="0b76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">fg =用于定义前景色，而bg用于定义背景色。</p><h2 id="d1cd" class="lp js hi bd jt lq lr ls jx lt lu lv kb iq lw lx kf iu ly lz kj iy ma mb kn mc bi translated">第四步:倒计时机制</h2><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="96dd" class="lp js hi me b fi mi mj l mk ml"><br/>def count_down(count):<br/>    count_min = math.floor(count / 60)<br/>    count_sec = count % 60<br/>    # Dynamic typing allows for changing the data type of a variable<br/>    # Just by assigning it to a different kind of value<br/>    if count_sec &lt; 10:<br/>        count_sec = f"0{count_sec}"<br/>    canvas.itemconfig(timer_text, text=f"{count_min}:{count_sec}")<br/>    if count &gt; 0:<br/>        global timer<br/>        timer = window.after(1000, count_down, count - 1)<br/>    else:<br/>        start_timer()<br/>        marks = ""<br/>        work_sessions = math.floor(reps/2)<br/>        for _ in range(work_sessions):<br/>            marks += "✓"<br/>        check_marks.config(text=marks)</span></pre><p id="4947" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">逻辑就是以“00:00”格式输入分钟和秒钟。要做到这一点，我们可以简单地传递秒，通过除以60并使用python的floor方法将其四舍五入来计算分钟数。</p><p id="1158" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里可能发生的一个错误是，当秒数低于10秒时，GUI会显示类似“0:8”的内容，假设当时是8秒。</p><p id="0938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了避免这种情况，我们使用if条件，并使用动态类型的概念，即将“count_sec”的数据类型改为string。</p><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="c700" class="lp js hi me b fi mi mj l mk ml">if count &gt; 0:<br/>        global timer<br/>        timer = window.after(1000, count_down, count - 1)<br/>    else:<br/>        start_timer()<br/>        marks = ""<br/>        work_sessions = math.floor(reps/2)<br/>        for _ in range(work_sessions):<br/>            marks += "✓"<br/>        check_marks.config(text=marks)</span></pre><p id="c779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“after”方法用于添加一个延迟，在此之后特定的窗口会进行自我更新。每次重复番茄工作法后，我们还会添加一个对号。这在空字符串“marks”中传递。</p><h2 id="af74" class="lp js hi bd jt lq lr ls jx lt lu lv kb iq lw lx kf iu ly lz kj iy ma mb kn mc bi translated"><strong class="ak">第五步:构建计时器机制</strong></h2><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="e4e4" class="lp js hi me b fi mi mj l mk ml">def start_timer():<br/>    global reps<br/>    reps += 1<br/>    work_sec = WORK_MIN * 60<br/>    short_break_sec = SHORT_BREAK_MIN * 60<br/>    long_break_sec = LONG_BREAK_MIN * 60<br/>    # If it's the 8th rep<br/>    if reps % 8 == 0:<br/>        count_down(long_break_sec)<br/>        title_label.config(text="Break", fg=RED)<br/>    # If it's the 2nd/4th/6th rep<br/>    elif reps % 2 == 0:<br/>        count_down(short_break_sec)<br/>        title_label.config(text="Break", fg=PINK)<br/>    # If it's the 1st/3rd/5th/7th rep<br/>    else:<br/>        count_down(work_sec)<br/>        title_label.config(text="Work", fg=GREEN)</span></pre><p id="487e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们管理工作和休息的计时部分的方法是简单地给出一个计数器全局变量reps。</p><p id="ea93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于每第8次迭代，我们要休息20分钟。</p><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="af8d" class="lp js hi me b fi mi mj l mk ml">if reps % 8 == 0:<br/>        count_down(long_break_sec)<br/>        title_label.config(text="Break", fg=RED)</span></pre><p id="f6b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类似地，每第二/第四/第六次重复，我们会休息5分钟。</p><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="a97f" class="lp js hi me b fi mi mj l mk ml"># If it's the 2nd/4th/6th rep<br/>    elif reps % 2 == 0:<br/>        count_down(short_break_sec)<br/>        title_label.config(text="Break", fg=PINK)</span></pre><p id="143d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">否则我们工作！</p><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="b194" class="lp js hi me b fi mi mj l mk ml">else:<br/>        count_down(work_sec)<br/>        title_label.config(text="Work", fg=GREEN)</span></pre><h2 id="8770" class="lp js hi bd jt lq lr ls jx lt lu lv kb iq lw lx kf iu ly lz kj iy ma mb kn mc bi translated">步骤6:设置定时器复位逻辑</h2><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="b073" class="lp js hi me b fi mi mj l mk ml">def reset_timer():<br/>    window.after_cancel(timer)<br/>    canvas.itemconfig(timer_text, text="00:00")<br/>    title_label.config(text="Timer")<br/>    check_marks.config(text="")<br/>    global reps<br/>    reps = 0</span></pre><p id="7d24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">定时器重置逻辑很简单，当定时器按钮被点击时，GUI会自动重置。为了在画布或tomoto上显示时间，我们使用“itemconfig”方法，而对于标签，我们使用“config”方法。</p><p id="b9e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，不要忘记在代码末尾给出，以阻止画布消失。</p><p id="c8f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">mainloop()告诉Python运行Tkinter事件循环。该方法侦听事件，如按钮点击或按键，并阻止在它之后运行的任何代码，直到调用它的窗口关闭。继续并关闭您创建的窗口，您将看到shell中显示一个新的提示。：</p><pre class="jd je jf jg fd md me mf mg aw mh bi"><span id="22b8" class="lp js hi me b fi mi mj l mk ml">window.mainloop()</span></pre><p id="5463" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在这里找到完整的代码。</p><p id="1d07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">总结</strong></p><p id="ee93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用tkinter库成功开发了<strong class="ih hj"> Pomodoro GUI，在这个过程中，我们学习了Tkinter模块、方法，如canvas、config等，以及最重要的动态类型。</strong></p><p id="8329" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这是一个伟大的学习经验，任何人谁采取了阅读和实施它的痛苦:)。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><p id="6fd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你喜欢我的努力吗？如果是的话，请跟我来获取我的最新帖子和更新，或者更好的是，请我喝杯咖啡！☕</p><figure class="jd je jf jg fd jh er es paragraph-image"><a href="https://www.buymeacoffee.com/ayushdixit"><div class="er es mn"><img src="../Images/69716627feab2505c60838bbd29241a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gS6Sh6i8g535gOafY4Wl1w.png"/></div></a></figure><div class="mo mp ez fb mq mr"><a href="https://www.buymeacoffee.com/ayushdixit" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab dw"><div class="mt ab mu cl cj mv"><h2 class="bd hj fi z dy mw ea eb mx ed ef hh bi translated">ayushdixit正在编码、部署项目和写博客</h2><div class="my l"><h3 class="bd b fi z dy mw ea eb mx ed ef dx translated">嘿👋我刚刚在这里创建了一个页面。你现在可以给我买杯咖啡了！</h3></div><div class="mz l"><p class="bd b fp z dy mw ea eb mx ed ef dx translated">www.buymeacoffee.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf jp mr"/></div></div></a></div></div></div>    
</body>
</html>