<html>
<head>
<title>React with Typescript series (Charity Web App) — Uploading files to AWS S3 {Bonus section on Github pages deployment}</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React with Typescript series(慈善网站应用程序)—将文件上传到 AWS S3(Github 页面部署的奖励部分)</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/react-with-typescript-series-charity-web-app-uploading-files-to-aws-s3-5a0b6099786c?source=collection_archive---------1-----------------------#2022-10-24">https://medium.com/nerd-for-tech/react-with-typescript-series-charity-web-app-uploading-files-to-aws-s3-5a0b6099786c?source=collection_archive---------1-----------------------#2022-10-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6ba4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嘿伙计们，在我们的慈善项目进一步发展之前，我想到了直接从前端实现 s3 文件上传。我们到目前为止所做的可以从这里借鉴。</p><p id="cf31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">前端反应系列</strong></p><div class="jd je ez fb jf"><div role="button" tabindex="0" class="ab bv ff cb dy jg jh bn ji jj jk"><div class="jl l"><div class="ab q"><div class="l di"><img alt="Dimuthu Wickramanayake" class="l de bw jm jn du" src="../Images/099c92eba7c0ef5b0373ba4d36052ba2.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*LsIMaDB2-AJKz28n02h_IQ.jpeg"/><div class="dr bw l jm jn ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://billa-code.medium.com/?source=post_page-----5a0b6099786c--------------------------------" rel="noopener follow" target="_top">迪姆图·维克拉马那亚克</a></p></div></div><div class="jq jr fg l"><h2 class="bd hj sc sd dy se ea eb lf ed ef hh bi translated">用 Typescript 系列作出反应(慈善网络应用)</h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi sf au sg sh si oz sj an fx fy sk sl sm gb gc gd de bk ge" href="https://billa-code.medium.com/list/react-with-typescript-seriescharity-web-app-6f45ca471f54?source=post_page-----5a0b6099786c--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="sn l dw"><span class="bd b fp z dx">7 stories</span></div></div></div><div class="kd dh ke dy ab kf dw di"><div class="di jv bv jw jx"><div class="dh l"><img alt="" class="dh" src="../Images/ace19c3ad1c0f8dc12620ff352fd2b11.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*QhAfunLq4rh0VrChbXUtZA.png"/></div></div><div class="di jv bv jy jz ka"><div class="dh l"><img alt="" class="dh" src="../Images/23deda9e9ca42920182e5a94707a12e7.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*vBIWr2bx7SaHJveT97Xg9g.png"/></div></div><div class="di bv kb kc ka"><div class="dh l"><img alt="" class="dh" src="../Images/16523ac1bf719cb2bc80e1cc1ec44297.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*53lYwBkgmaFRow1Erxl06Q.png"/></div></div></div></div></div><p id="3d93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">后端 AWS Lambda NodeJS 系列</strong></p><div class="jd je ez fb jf"><div role="button" tabindex="0" class="ab bv ff cb dy jg jh bn ji jj jk"><div class="jl l"><div class="ab q"><div class="l di"><img alt="Dimuthu Wickramanayake" class="l de bw jm jn du" src="../Images/099c92eba7c0ef5b0373ba4d36052ba2.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*LsIMaDB2-AJKz28n02h_IQ.jpeg"/><div class="dr bw l jm jn ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated">迪穆图·维克拉马那亚克</p></div></div><div class="jq jr fg l"><h2 class="bd hj sc sd dy se ea eb lf ed ef hh bi translated">AWS Lambda(慈善网络应用)系列</h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi sf au sg sh si oz sj an fx fy sk sl sm gb gc gd de bk ge" href="https://billa-code.medium.com/list/aws-lambda-charity-webapp-series-cd878238f932?source=post_page-----5a0b6099786c--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="sn l dw"><span class="bd b fp z dx">5 stories</span></div></div></div><div class="kd dh ke dy ab kf dw di"><div class="di jv bv jw jx"><div class="dh l"><img alt="" class="dh" src="../Images/5e5d417a4f8e977dff5a6564ccf48d39.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*ZMefBLP2MRSPDwmix-Z0Mw.png"/></div></div><div class="di jv bv jy jz ka"><div class="dh l"><img alt="" class="dh" src="../Images/75f2267185bffd78647008c578e838b9.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*myAvjQPuBRWl1INX8ZjhAg.png"/></div></div><div class="di bv kb kc ka"><div class="dh l"><img alt="" class="dh" src="../Images/fa6bf2ff659d1783bd38eee735f02f2d.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*Mu1FtEnLQw7sXtrpNJmSHQ.png"/></div></div></div></div></div><p id="10db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为第一步，让我们添加一个输入来上传文件。我将把它添加到模态组件的页脚。我的 StudentModalComponent.tsx 文件会这样改。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="f282" class="ks kt hi kp b fi ku kv l kw kx">import React, { Component } from 'react';<br/>import { Modal, Button, Form } from 'react-bootstrap';<br/>import { withForm } from "../hoc/withForm";<br/><br/>export type StudentPropType = {<br/>    show: boolean,<br/>    form: any,<br/>    studentid: string,<br/>    config: any,<br/>    onHide(): void,<br/>    onSave(): void,<br/>    <strong class="kp hj">handleFileUpload(file: any): void</strong><br/>}<br/><br/>class StudentModalComponent extends Component&lt;StudentPropType&gt; {<br/>    constructor(props: StudentPropType) {<br/>        super(props);<br/>    }<br/><br/>    <strong class="kp hj">handleFileUpload(e: any) {<br/>        this.props.handleFileUpload(e.target.files[<em class="ky">0</em>])<br/>    }</strong><br/><br/>    render(): React.ReactNode {<br/>        return &lt;Modal show={this.props.show}&gt;<br/>            &lt;Modal.Header closeButton onClick={this.props.onHide}&gt;<br/>                &lt;Modal.Title id="contained-modal-title-vcenter"&gt;<br/>                    Details of Student {this.props.config[<em class="ky">1</em>].value}<br/>                &lt;/Modal.Title&gt;<br/>            &lt;/Modal.Header&gt;<br/>            &lt;Modal.Body&gt;<br/>                {this.props.form}<br/>            &lt;/Modal.Body&gt;<br/>            &lt;Modal.Footer&gt;<br/>                <strong class="kp hj">&lt;div style={{display: 'flex', width: '100%', justifyContent: 'center'}}&gt;<br/>                    &lt;Form.Group controlId="formFile" className="mb-3" onChange={(e) =&gt; this.handleFileUpload(e)}&gt;<br/>                        &lt;Form.Control type="file" /&gt;<br/>                    &lt;/Form.Group&gt;<br/>                &lt;/div&gt;</strong><br/>                &lt;div style={{display: 'flex', width: '45%', justifyContent: 'space-between'}}&gt;<br/>                    &lt;Button onClick={this.props.onSave}&gt;Save&lt;/Button&gt;<br/>                    &lt;Button onClick={this.props.onHide}&gt;Delete&lt;/Button&gt;<br/>                    &lt;Button onClick={this.props.onHide}&gt;Close&lt;/Button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/Modal.Footer&gt;<br/>        &lt;/Modal&gt;<br/>    }<br/>}<br/><br/>export default withForm(StudentModalComponent);</span></pre><p id="a081" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，当我把页脚分成不同的部分时，我使用了 CSS flex。这比使用引导行列要容易得多。对于文件上传输入部分的 onChange 事件，我正在调用<strong class="ih hj"> handleFileUpload </strong>方法。它调用从 props 传递的另一个方法。现在，我将转到 StudentModalButton.tsx 文件来完成其余的实现。如果你还记得的话，我已经使用了高阶组件，并使表单完全动态化。现在，为了显示添加给学生的文件，我应该更改输入框。之后，我将调用 handleFileUpload 方法作为 StudentModalComponent 的属性，并在此实现该方法。当实现文件上传功能时，我们必须有@aws-sdk/client-s3，并在下载处理程序中采用预先签名的 URL，我们需要@aws-sdk/s3-request-presigner。下面是更新后的 package.json。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="37bc" class="ks kt hi kp b fi ku kv l kw kx">{<br/>  "name": "serendib-ui",<br/>  "version": "0.1.0",<br/>  "private": true,<br/>  "homepage": "https://debilla.github.io/serendib-scholarship-ui",<br/>  "dependencies": {<br/>    "@testing-library/jest-dom": "^5.16.4",<br/>    "@testing-library/react": "^13.1.1",<br/>    "@testing-library/user-event": "^13.5.0",<br/>    "@types/jest": "^27.4.1",<br/>    "@types/node": "^16.11.31",<br/>    "@types/react": "^18.0.8",<br/>    "@types/react-dom": "^18.0.0",<br/>    "bootstrap": "^5.1.3",<br/>    "react": "^18.1.0",<br/>    "react-bootstrap": "^2.3.1",<br/>    "react-data-grid": "7.0.0-beta.15",<br/>    "react-dom": "^18.1.0",<br/>    "react-scripts": "5.0.1",<br/>    "typescript": "^4.6.3",<br/>    "web-vitals": "^2.1.4",<br/>    <strong class="kp hj">"@aws-sdk/client-s3": "3.194.0",<br/>    "@aws-sdk/s3-request-presigner": "3.194.0"</strong><br/>  },<br/>  "scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>  "eslintConfig": {<br/>    "extends": [<br/>      "react-app",<br/>      "react-app/jest"<br/>    ]<br/>  },<br/>  "browserslist": {<br/>    "production": [<br/>      "&gt;0.2%",<br/>      "not dead",<br/>      "not op_mini all"<br/>    ],<br/>    "development": [<br/>      "last 1 chrome version",<br/>      "last 1 firefox version",<br/>      "last 1 safari version"<br/>    ]<br/>  }<br/>}</span></pre><p id="7295" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们必须从 react 应用程序连接到 AWS 帐户。为此，当我们创建 S3 客户端时，我们必须为 AWS 帐户传递登录令牌。如果您不知道如何获得这些值，请参考下面的文章。我大胆地迈出了步伐。</p><div class="jd je ez fb jf kz"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/aws-certified-solution-architect-iam-8930ce442515"><div class="la ab dw"><div class="lb ab lc cl cj ld"><h2 class="bd hj fi z dy le ea eb lf ed ef hh bi translated">AWS 认证解决方案架构师— IAM</h2><div class="lg l"><h3 class="bd b fi z dy le ea eb lf ed ef dx translated">IAM 的意思是身份和访问管理服务。当我们在之前的教程中创建 AWS 帐户时，我们…</h3></div><div class="lh l"><p class="bd b fp z dy le ea eb lf ed ef dx translated">medium.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jj kz"/></div></div></a></div><p id="e3a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在做任何代码更改之前，让我们在 S3 创建一个桶。为此，去你的 AWS 控制台，搜索 S3，去那里。有一个按钮叫做创建桶。单击它，然后用默认配置创建它。</p><figure class="kk kl km kn fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lo"><img src="../Images/78dd505d79ddb8cd47bba6d0d123ac00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QhAfunLq4rh0VrChbXUtZA.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">S3 水桶</figcaption></figure><p id="360b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是这个 bucket 不能从您的本地环境访问，因此，转到创建的 bucket，这里有一个名为 permissions 的部分。</p><figure class="kk kl km kn fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lo"><img src="../Images/6f9088bd47ba2f14526ae78bb2c82134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I5Y4xqcn-M77T1-_vh2heA.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">S3 桶权限</figcaption></figure><p id="ee44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到权限，当你向下滚动，你会看到一节跨源资源共享(CORS)。点击编辑按钮，粘贴以下内容。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="3587" class="ks kt hi kp b fi ku kv l kw kx">[<br/>    {<br/>        "AllowedHeaders": [<br/>            "*"<br/>        ],<br/>        "AllowedMethods": [<br/>            "PUT",<br/>            "POST",<br/>            "DELETE"<br/>        ],<br/>        "AllowedOrigins": [<br/>            "*"<br/>        ],<br/>        "ExposeHeaders": [<br/>            "x-amz-server-side-encryption",<br/>            "x-amz-request-id",<br/>            "x-amz-id-2"<br/>        ],<br/>        "MaxAgeSeconds": 3000<br/>    }<br/>]</span></pre><p id="0c35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的👌现在我们的 S3 存储桶已经准备好接收文件了。让我们转到 React 代码并实现它。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="b38f" class="ks kt hi kp b fi ku kv l kw kx">const REGION = "us-east-1";<br/>const s3Client = new S3Client({ region: REGION, credentials: {accessKeyId: '&lt;YOUR KEY&gt;', secretAccessKey: '&lt;YOUR SECRET&gt;'} });</span></pre><p id="fc08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 Handle upload 方法中，我们所做的是，在 try catch 块中，我上传文件，上传后，我用更新的文件设置状态。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="c809" class="ks kt hi kp b fi ku kv l kw kx">async handleFileUpload(file: any) {<br/>    const bucketParams = {<br/>        Bucket: "&lt;YOUR BUCKET NAME&gt;",<br/>        Key: file['name'],<br/>        Body: file,<br/>    };<br/><br/>    try {<br/>        const data = await s3Client.send(new PutObjectCommand(bucketParams));<br/>        console.log(data);<br/>        <br/>        let fileArr = this.state.config[this.state.config.length - <em class="ky">1</em>].array;<br/>        fileArr.push(file['name']);<br/>        this.setConfigState(fileArr, this.state.config.length - <em class="ky">1</em>);<br/>    } catch(e) {<br/>        throw e;<br/>    }<br/>}</span></pre><p id="ca20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，or 文件被上传到 S3 存储桶，您可以通过 AWS 控制台中的 S3 来查看。接下来是下载上传的文件。为此，我将传递文件的名称，然后为该文件创建预签名的 URL。然后，我在另一个选项卡中打开这个链接，下载它。预先设计的网址没有什么神奇的，它是一个在规定时间内公众可以访问的网址。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="26d8" class="ks kt hi kp b fi ku kv l kw kx">async downloadFile(fileName: any) {<br/>    const bucketParams = {<br/>        Bucket: "ssdww",<br/>        Key: fileName,<br/>        Body: "BODY"<br/>    };<br/><br/>    try {<br/>        const command = new GetObjectCommand(bucketParams);<br/>        const signedUrl = await getSignedUrl(s3Client, command, {<br/>            expiresIn: <em class="ky">3600</em>,<br/>        });<br/><br/>        window.open(signedUrl)<br/>    } catch(e) {<br/>        throw e;<br/>    }<br/>}</span></pre><p id="267d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看完整的代码。对 StudentModalButton.txs 文件做了许多更改，以适应新的 S3 集成。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="6f8b" class="ks kt hi kp b fi ku kv l kw kx">import React, { Component } from 'react';<br/>import { Button } from 'react-bootstrap';<br/>import StudentModalComponent from '../StudentModalComponent/StudentModalComponent';<br/>import { S3Client, PutObjectCommand, GetObjectCommand } from "@aws-sdk/client-s3";<br/>import { getSignedUrl } from "@aws-sdk/s3-request-presigner";<br/><br/>const REGION = "us-east-1";<br/>const s3Client = new S3Client({ region: REGION, credentials: {accessKeyId: 'AKIAS3A4WDWDV4XTXSUS', secretAccessKey: '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'} });<br/><br/>interface StudentModalButtonComponentProps {<br/>    studentId: string,<br/>    detail: any<br/>}<br/><br/>export default class StudentModalButton extends Component&lt;StudentModalButtonComponentProps, { show: boolean, config: any }&gt; {<br/>    constructor(props: StudentModalButtonComponentProps) {<br/>        super(props);<br/><br/>        let config = [];<br/>        let arr = [...Object.keys(this.props.detail)];<br/><br/>        for (let i = <em class="ky">0</em>; i &lt; arr.length; i++ ) {<br/>            let label = arr[i];<br/>            let value = this.props.detail[arr[i]];<br/>            let obj;<br/><br/>            if (label === 'files') {<br/>                obj = {<br/>                    label: label,<br/>                    array: value,<br/>                    type: 'file',<br/>                    onChange: (e: any) =&gt; {<br/>                        this.downloadFile(e.target.innerText);<br/>                    }<br/>                }<br/>            } else {<br/>                obj = {<br/>                    label: label,<br/>                    value: value,<br/>                    type: 'text',<br/>                    onChange: (e: any) =&gt; {<br/>                        this.setConfigState(e.target.value, i);<br/>                    }<br/>                }<br/>            }<br/><br/>            config.push(obj);<br/>        }<br/><br/>        this.state = {<br/>            show: <em class="ky">false</em>,<br/>            config: config<br/>        };<br/>    }<br/><br/>    async downloadFile(fileName: any) {<br/>        const bucketParams = {<br/>            Bucket: "ssdww",<br/>            Key: fileName,<br/>            Body: "BODY"<br/>        };<br/><br/>        try {<br/>            const command = new GetObjectCommand(bucketParams);<br/>            const signedUrl = await getSignedUrl(s3Client, command, {<br/>                expiresIn: <em class="ky">3600</em>,<br/>            });<br/><br/>            window.open(signedUrl)<br/>        } catch(e) {<br/>            throw e;<br/>        }<br/>    }<br/><br/>    setConfigState(value: any, i: any) {<br/>        let arr = [...this.state.config];<br/>        arr[i].value = value;<br/>        this.setState({ config: arr });<br/>    }<br/><br/>    setModalShow(showState: boolean) {<br/>        this.setState({ show: showState });<br/>    }<br/><br/>    saveData() {<br/>        console.log(this.state.config);<br/>    }<br/><br/>    async handleFileUpload(file: any) {<br/>        const bucketParams = {<br/>            Bucket: "ssdww",<br/>            Key: file['name'],<br/>            Body: file,<br/>        };<br/><br/>        try {<br/>            const data = await s3Client.send(new PutObjectCommand(bucketParams));<br/>            console.log(data);<br/><br/>            let fileArr = this.state.config[this.state.config.length - <em class="ky">1</em>].array;<br/>            fileArr.push(file['name']);<br/>            this.setConfigState(fileArr, this.state.config.length - <em class="ky">1</em>);<br/>        } catch(e) {<br/>            throw e;<br/>        }<br/>    }<br/><br/>    render(): React.ReactNode {<br/>        return &lt;&gt;<br/>            &lt;Button onClick={() =&gt; this.setModalShow(<em class="ky">true</em>)}&gt;{this.props.studentId}&lt;/Button&gt;<br/>            &lt;StudentModalComponent config={this.state.config} show={this.state.show} handleFileUpload={(file: any) =&gt; this.handleFileUpload(file)} onHide={() =&gt; this.setModalShow(<em class="ky">false</em>)} onSave={() =&gt; this.saveData()} studentid = {this.props.studentId} /&gt;<br/>        &lt;/&gt;<br/>    }<br/>}</span></pre><p id="5874" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我必须更改 StudentTableComponent，这是目前的主要数据源(我们还没有与后端集成)。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="9ca5" class="ks kt hi kp b fi ku kv l kw kx">import { render } from '@testing-library/react';<br/>import React from 'react';<br/>import DataTableComponent from '../../components/DataTableComponent/DataTableComponent';<br/>import StudentModalButton from '../../components/StudentModalButton/StudentModalButton';<br/><br/>const columns = [<br/>    {<br/>        key: 'id', name: 'ID', width: <em class="ky">10</em>,<br/>        formatter(props: any) {<br/>            return (<br/>                &lt;&gt;<br/>                    &lt;StudentModalButton detail={props.row} studentId={props.row.id} /&gt;<br/>                &lt;/&gt;<br/>            );<br/>        },<br/>    },<br/>    { key: 'name', name: 'Name' },<br/>    { key: 'contactNo', name: 'Contact No' },<br/>    { key: 'email', name: 'Email' },<br/>    { key: 'university', name: 'Univeristy' },<br/>    { key: 'course', name: 'Course of Study' },<br/>    { key: 'startDate', name: 'Course Start Date' },<br/>    { key: 'endDate', name: 'Course End Date' },<br/>    { key: 'schoolEndDate', name: 'Schol. start Date' },<br/>    { key: 'sponsor', name: 'Sponsor Name' }<br/>];<br/><br/>const rows = [<br/>    { id: <em class="ky">0</em>, name: 'Example', contactNo: '', email: '', university: '', course: '', startDate: '', endDate: '', schoolEndDate: '', sponsor: '', files: [] },<br/>    { id: <em class="ky">1</em>, name: 'Demo', contactNo: '', email: '', university: '', course: '', startDate: '', endDate: '', schoolEndDate: '', sponsor: '', files: [] }<br/>];<br/><br/>export default function StudentTableContainer() {<br/>    return (&lt;DataTableComponent columns={columns} rows={rows} /&gt;);<br/>}</span></pre><p id="5c49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">S3 上传和下载到此结束。下一步是从后端处理这个文件上传事件。我的计划是，从 Lambda 函数捕获 S3 文件上传事件，并相应地更新 DynamoDB。直到我们实现那个快乐的编码！！！</p><p id="3e38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">UI 回购:<a class="ae lz" href="https://github.com/deBilla/serendib-scholarship-ui" rel="noopener ugc nofollow" target="_blank">https://github.com/deBilla/serendib-scholarship-ui</a></p><p id="31ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">后端回购:【https://github.com/deBilla/serendib-scholarship-ws T2】</p><h1 id="5f07" class="ma kt hi bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated"><strong class="ak">奖金部分</strong></h1><p id="b512" class="pw-post-body-paragraph if ig hi ih b ii mx ik il im my io ip iq mz is it iu na iw ix iy nb ja jb jc hb bi translated">伙计们，这是 Github 部署指南。如果你们回去看看我们以前的教程，你可能会对我们到目前为止所做的有更多的了解。在这一节中，我将教你如何从 Github 环境中检索秘密。为了支持这一点，我们必须做一些代码更改。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="a9af" class="ks kt hi kp b fi ku kv l kw kx">const REGION = "us-east-1";<br/>const s3Client = new S3Client({ region: REGION, credentials: {accessKeyId: process.env.REACT_APP_ACCESS_KEY_ID as string, secretAccessKey: process.env.REACT_APP_SECRET_ACCESS_KEY as string} });</span></pre><p id="fc42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们在 Github 中添加密钥。转到 Github 设置，你会在那里找到一个叫做环境的部分。转到环境并添加这样的秘密。</p><figure class="kk kl km kn fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es nc"><img src="../Images/c6ab34fc4b345c0e3a80cfca1adaaae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSdZvy6zdeT7l9Zr9awi6A.png"/></div></div></figure><p id="a78a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们必须更改我们的构建管道文件 page_build.yml。</p><pre class="kk kl km kn fd ko kp kq kr aw kj bi"><span id="2b24" class="ks kt hi kp b fi ku kv l kw kx">name: React Build<br/><br/>on:<br/>  pull_request:<br/>    branches: [ "main" ]<br/>    <br/>env:<br/>  CI: false<br/><br/>jobs:<br/>  build:<br/>    runs-on: ubuntu-latest<br/>    environment:<br/>      name: github-pages<br/>      url: ${{ steps.deployment.outputs.page_url }}<br/>    permissions:<br/>      contents: 'read'<br/>      id-token: 'write'<br/>      pages: 'write'<br/>      actions: 'write'<br/>      checks: 'write'<br/>      deployments: 'write'<br/>    strategy:<br/>      matrix:<br/>        node-version: [18.x]<br/>    <strong class="kp hj">env:<br/>      REACT_APP_ACCESS_KEY_ID: ${{ secrets.REACT_APP_ACCESS_KEY_ID }}<br/>      REACT_APP_SECRET_ACCESS_KEY: ${{ secrets.REACT_APP_SECRET_ACCESS_KEY }}</strong><br/>    <br/>    steps:<br/>    - uses: actions/checkout@v3<br/><br/>    - name: Use Node.js ${{ matrix.node-version }}<br/>      uses: actions/setup-node@v3<br/>      with:<br/>        node-version: ${{ matrix.node-version }}<br/><br/>    - name: Build<br/>      run: |<br/>        npm install<br/>        npm run build<br/>        <br/>    - name: Setup Pages<br/>      uses: actions/configure-pages@v2<br/>    - name: Upload artifact<br/>      uses: actions/upload-pages-artifact@v1<br/>      with:<br/>        <em class="ky"># Upload entire repository<br/>        </em>path: 'build/'<br/>    - name: Deploy to GitHub Pages<br/>      id: deployment<br/>      uses: actions/deploy-pages@v1<br/>      env:  <br/>        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</span></pre><p id="d433" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，当您创建一个从另一个分支到主分支的拉请求时，这将触发，您将获得一个将文件保存到您的 S3 存储桶的工作应用程序。</p></div></div>    
</body>
</html>