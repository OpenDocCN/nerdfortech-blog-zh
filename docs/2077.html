<html>
<head>
<title>Getting Started With Cassette — Customizing Your Player</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡带入门—定制您的播放器</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/getting-started-with-cassette-customizing-your-player-817e31eac7dc?source=collection_archive---------25-----------------------#2021-04-19">https://medium.com/nerd-for-tech/getting-started-with-cassette-customizing-your-player-817e31eac7dc?source=collection_archive---------25-----------------------#2021-04-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/50a98f45897edb7e7e88915dedcd4170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLGPecYnFBLhjlb57HCfTQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">去Github上看看卡带吧！</figcaption></figure><p id="0318" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Cassette是一个React组件库，允许您非常容易地将媒体播放器功能添加到您的网站。它开箱即用，但你也可以建立自定义功能，您可以添加到播放器，以满足您的需求-这是令人难以置信的灵活性。</p><p id="09d1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以在这里 找到卡带的Github页面(由Ben Wiley编写)<a class="ae js" href="https://github.com/benwiley4000/cassette" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hj">，在这里</strong> </a>也有完整的文档页面<a class="ae js" href="https://benwiley4000.github.io/cassette/styleguide/" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hj">。我建议大家都去看看Github页面上有一些使用Cassette可以做什么的例子，文档中也有很多有用的信息。</strong></a></p><p id="abe7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">虽然文档非常全面，但我承认我很难理解如何使用其中的一些功能，所以希望下面的例子能帮助其他卡带新手更快适应。我绝不是专家，但事情似乎到目前为止工作——如果你发现下面的任何不正确的或可以改进的地方，我很乐意听到它！</p><p id="3142" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">入门</strong></p><p id="a476" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">盒式磁带由四个组件组成——核心、播放器、挂钩和组件。核心就是给你React组件来构建和与玩家一起工作。播放器包是给你提供现成的播放器组件，我们将定制。钩子包给了你一个非常有用的钩子来访问和改变玩家状态，就像React Context一样。最后，组件包给了你一些额外的玩家定制选项，我个人还没有用过。</p><p id="06a6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您可以通过在终端中运行以下命令来安装我在上面使用的软件包-</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="c7ef" class="kc kd hi jy b fi ke kf l kg kh">npm install @cassette/core @cassette/player @cassette/hooks </span></pre><p id="27e8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">盒式磁带开箱即可使用——这里有几个例子说明如何定制它来满足您的需求。网页只有播放器栏在顶部，所以我包括了播放器栏的样子，以及与每个相关的代码。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/f1d92efa8a3d661e345ba70799784bf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w6JbQNDMoJfATeM0RCc0xw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">MediaPlayer示例1</figcaption></figure><p id="4e31" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们在第2行导入MediaPlayer来获取播放器，还有第3行的RepeatButton，这是您可以添加到播放器的几个额外的自定义按钮之一——您可以在官方文档中查看这些按钮的完整列表。</p><p id="7824" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">MediaPlayer获取了一个播放列表属性，我将它存储为state——这将是一个track对象数组，我们稍后再来讨论。在您的道具中包含自动播放功能将导致播放器在页面加载时开始播放播放列表中的任何内容，但请注意，这不会导致播放器在您稍后向播放列表添加曲目时开始播放。Controls是一个数组，按照在数组中声明的顺序表示播放器上的按钮。在这个例子中，我们以一个间隔符开始(栏中的一个空格，这样按钮就不会粘在一起)，然后是播放器上每个按钮的名称，每个按钮都用间隔符隔开，并按照它们各自的值在数组中出现的顺序排列。</p><p id="b42a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您会注意到Repeat按钮的格式有点不同，因为它不是Controls数组的默认值，而是您可以导入的额外自定义组件。如果您使用的是导入的组件，比如repeat按钮，或者您自己的定制组件，我们稍后会讨论，您需要使用箭头符号来声明它们，如第23行所示。让我们看一个不同的例子。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/1133ccae52650ac190c845262bd2319e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LCZgx0p6exJWUNcBAlcKmQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">示例2</figcaption></figure><p id="8d58" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里唯一的变化是控件数组中的值的顺序——注意我们能够多么容易地改变播放器布局！</p><p id="70c6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是内置控制值的完整列表。</p><p id="a11e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> PlayerContextProvider和MediaPlayerControls </strong></p><p id="daf7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">上面的媒体播放器很方便，但是如果你想定制播放器，你需要利用这些组件。</p><p id="5708" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，你需要用一个<playercontextprovider playlist="{playlist}">组件来包装你的应用程序的任何部分，并在其中声明你的播放列表。根据我的经验，播放列表需要在这个组件中声明，否则播放器不会呈现，尽管我不完全确定是否总是这样。我使用state来保存播放列表，因为我将在我的站点中向播放列表添加曲目—我传递了setPlaylist方法，但是可以使用usePlayerContext挂钩来访问播放列表属性，我们很快就会看到这一点。主组件包含了我的整个站点。</playercontextprovider></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/2876b5dca3aa25e460b4d1c6f57f299a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YAzlN6x6WM708-mXv8-Klw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">为我的整个应用程序提供playerContext。</figcaption></figure><p id="745a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦您设置了PlayerContextProvider，您就可以使用MediaPlayerControls组件来创建您的播放器，这使我们能够使用playerContext及其所有属性(此处列出了<a class="ae js" href="https://benwiley4000.github.io/cassette/styleguide/#playercontext" rel="noopener ugc nofollow" target="_blank"/>)。</p><p id="6736" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在下面的代码中，您将看到自定义组件向后跳过10秒或向前跳过30秒，以及如何使用usePlayerContext挂钩，该挂钩从PlayerContextProvider的子应用程序中的任何位置获取PlayerContext。另外，一个关于使用材质UI按钮的快速教程，这是我得到步进按钮的地方。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/04e5f1bf8c9c28a4d55a388f4ee351d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KV5B3yfvkbxdJ11n9a7nLw.png"/></div></div></figure><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/9edd7da59196ec28b7c3a083b54ffc04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wna5KtK5LruZBtio-DYatA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">带有自定义按钮声明的MediaPlayerControls控件</figcaption></figure><p id="784d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先是进口。我们现在导入MediaPlayerControls而不是MediaPlayer，随着这一变化，我们需要在第4行包含导入，以使CSS正确格式化播放器。我们还导入了usePlayerContext挂钩，用于FwdSkip按钮。BackSkip按钮是通过props而不是上下文实现的。让我们先讨论一下skip按钮的功能，然后我们再回到样式上来。</p><p id="4fc3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Skip功能需要两个playerContext值(同样，您可以在这里查看完整的值列表<a class="ae js" href="https://benwiley4000.github.io/cassette/styleguide/#playercontext" rel="noopener ugc nofollow" target="_blank"/>),这两个值是从第46行到第51行的MediaPlayerControls组件传递过来的。currentTime告诉你当前曲目的播放时间(以秒为单位),当用整数值调用onSeekComplete时，将以秒为单位搜索到该时间的曲目。在第12行，我调用onSeekComplete到当前时间减10秒，这将使轨道后退10秒。</p><p id="e661" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">FwdSkip方法以同样的方式工作，正如您在第26行看到的，但是在这里，我们没有向下传递playerContext，而是在第55行的controls数组中只包含了FwdSkip组件。回到第21行，我们使用析构符号，使用usePlayerContext从父组件PlayerContextProvider中提取PlayerContext值。注意任何所需的playerContext值都必须作为字符串值包含在usePlayerContext([])数组中。我们现在对currentTime和onSeekComplete方法有相同的访问权限，允许我们在曲目中向前跳过30秒。</p><p id="2fdb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">素材UI和播放器造型</strong></p><p id="04bf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">素材UI已经用于卡带中的一些播放器按钮，所以我照着做了，并在同一个地方找到了时间跳跃按钮——你可以在<a class="ae js" href="https://fonts.google.com/icons" rel="noopener ugc nofollow" target="_blank">这个页面</a>上查看所有的素材图标——音频&amp;视频部分在这种情况下特别有用。当然，查看官方文档的材料图标<a class="ae js" href="https://material-ui.com/components/icons/" rel="noopener ugc nofollow" target="_blank">这里</a>！</p><p id="118e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要使用材质图标，你需要做的就是将这一行添加到react项目的公共文件夹中的index.html中的</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="6378" class="kc kd hi jy b fi ke kf l kg kh">&lt;link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" /&gt;</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es kn"><img src="../Images/a247db7088502609ec67048e13362189.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*lRiLYkE8jtUwFe9GnWg0Fg.png"/></div></figure><p id="7cff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后你可以点击我上面链接的页面上的任何图标来找到你选择的图标的代码，如这里左边所示。您将看到代码段中列出的span显示了一个类名“material-icons-outlined”，这是这个按钮的不同版本(我使用的是无轮廓的那个)，但是过程是相同的。在应用程序中使用上面的样式表，这行代码看起来就像你在图片左上角看到的图标一样。</p><p id="7c53" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后，第10行的样式、第13行的div和第11行列出的“材质图标”之后的类都是从播放器内置按钮的CSS中复制的，所以我的按钮与播放器的整体样式相匹配。</p><p id="b4dd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我希望这是一个有用的卡带播放器定制演练！</p></div></div>    
</body>
</html>