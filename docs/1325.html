<html>
<head>
<title>How to add Extended Floating Action Button in Android | Android Studio | Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Android | Android Studio | Java中添加扩展浮动动作按钮</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-add-extended-floating-action-button-in-android-android-studio-java-481cc9b3cdcb?source=collection_archive---------0-----------------------#2021-03-14">https://medium.com/nerd-for-tech/how-to-add-extended-floating-action-button-in-android-android-studio-java-481cc9b3cdcb?source=collection_archive---------0-----------------------#2021-03-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3439a89b9852c4bb243b1ddceed6a496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RUfXEiMHeK496_Hk_4kWdQ.jpeg"/></div></div></figure><p id="c896" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">如何在Android | Android Studio | Java中添加扩展浮动动作按钮？</strong></p><p id="e876" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本教程中，我们将在android中创建一个扩展的浮动操作按钮。浮动动作按钮(FAB)执行屏幕上的主要或最常见的动作。它出现在所有屏幕内容的前面，通常呈圆形，中间有一个图标。</p><p id="156e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">扩展浮动动作按钮是Android中新引入的带有材质组件库的类。</p><p id="279d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">SDK 28或Android P引入了Material Components。它是支持设计库的超集，有许多新的添加和改进。在本教程中，我们将创建一个扩展的浮动操作按钮。</p><p id="7738" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，让我们开始创建扩展FAB。</p><p id="97e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">在开始创作之前，让我们看看你将会看到什么。</strong></p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><h1 id="1c8e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">步骤1:添加依赖项</h1><p id="132c" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">确保在你的build.gradle <strong class="is hj"> app </strong>文件中添加材质设计依赖。</p><pre class="jo jp jq jr fd kx ky kz la aw lb bi"><span id="5b44" class="lc jv hi ky b fi ld le l lf lg">implementation 'com.google.android.material:material:1.3.0'</span></pre><h1 id="fb9b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">第二步:添加可绘制文件</h1><p id="dd41" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">在设计主XML文件之前，首先，导入可绘制文件。下面是我在项目中使用的可绘制文件。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/9c5f1de22f77694f18e85b07259f103b.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*bskCxry-kDBq-BH8.png"/></div></figure><h1 id="801a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">步骤3:设计XML文件</h1><p id="3880" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">现在，设计主XML文件，添加被设置为父FAB的扩展浮动操作按钮，并添加子FAB。作为一个儿童晶圆厂，我用了两个晶圆厂。</p><p id="76d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">父FAB:活动</p><p id="22b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">子FAB 1:警报</p><p id="8945" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">子工厂2:人员</p><pre class="jo jp jq jr fd kx ky kz la aw lb bi"><span id="4d27" class="lc jv hi ky b fi ld le l lf lg">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    xmlns:tools="http://schemas.android.com/tools"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    tools:context=".MainActivity"<br/>    android:background="@color/white"<br/>    tools:ignore="HardcodedText"&gt;</span><span id="a1bd" class="lc jv hi ky b fi li le l lf lg">    &lt;!--This will be the parent Floating Action Button--&gt;<br/>    &lt;com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton<br/>        android:id="@+id/add_fab"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_gravity="end"<br/>        android:layout_marginEnd="16dp"<br/>        android:layout_marginBottom="16dp"<br/>        android:backgroundTint="@color/black"<br/>        android:text="Actions"<br/>        android:textColor="@color/white"<br/>        app:icon="@drawable/add"<br/>        app:iconTint="@color/white"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintEnd_toEndOf="parent" /&gt;</span><span id="a43f" class="lc jv hi ky b fi li le l lf lg">    &lt;!--Floating action button for add alarm--&gt;<br/>    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton<br/>        android:id="@+id/add_alarm_fab"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginBottom="24dp"<br/>        android:backgroundTint="@color/black"<br/>        app:fabSize="normal"<br/>        app:tint="@color/white"<br/>        app:layout_constraintBottom_toTopOf="@+id/add_fab"<br/>        app:layout_constraintEnd_toEndOf="@+id/add_fab"<br/>        app:srcCompat="@drawable/alarm"<br/>        android:contentDescription="@string/app_name" /&gt;</span><span id="a285" class="lc jv hi ky b fi li le l lf lg">    &lt;!--Action name text for the add alarm button--&gt;<br/>    &lt;TextView<br/>        android:id="@+id/add_alarm_action_text"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginEnd="8dp"<br/>        android:text="Add Alarm"<br/>        app:layout_constraintBottom_toBottomOf="@+id/add_alarm_fab"<br/>        app:layout_constraintEnd_toStartOf="@+id/add_alarm_fab"<br/>        app:layout_constraintTop_toTopOf="@+id/add_alarm_fab" /&gt;</span><span id="4e03" class="lc jv hi ky b fi li le l lf lg">    &lt;!--Floating action button for add person--&gt;<br/>    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton<br/>        android:id="@+id/add_person_fab"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginBottom="24dp"<br/>        android:backgroundTint="@color/black"<br/>        app:fabSize="normal"<br/>        app:tint="@color/white"<br/>        app:layout_constraintBottom_toTopOf="@+id/add_alarm_fab"<br/>        app:layout_constraintEnd_toEndOf="@+id/add_alarm_fab"<br/>        app:layout_constraintStart_toStartOf="@+id/add_alarm_fab"<br/>        app:srcCompat="@drawable/person"<br/>        android:contentDescription="@string/app_name" /&gt;</span><span id="cc92" class="lc jv hi ky b fi li le l lf lg">    &lt;!--Action name text for the add person button--&gt;<br/>    &lt;TextView<br/>        android:id="@+id/add_person_action_text"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginEnd="8dp"<br/>        android:text="Add Person"<br/>        app:layout_constraintBottom_toBottomOf="@+id/add_person_fab"<br/>        app:layout_constraintEnd_toStartOf="@+id/add_person_fab"<br/>        app:layout_constraintTop_toTopOf="@+id/add_person_fab" /&gt;</span><span id="0abd" class="lc jv hi ky b fi li le l lf lg">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span></pre><h1 id="afd4" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">步骤4:添加功能</h1><p id="ebd6" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">现在，在主JAVA文件中添加扩展FAB的功能，并在子FAB中添加click listener。</p><pre class="jo jp jq jr fd kx ky kz la aw lb bi"><span id="c9e3" class="lc jv hi ky b fi ld le l lf lg">public class MainActivity extends AppCompatActivity {<br/></span><span id="ab50" class="lc jv hi ky b fi li le l lf lg">    FloatingActionButton mAddAlarmFab, mAddPersonFab;<br/>    ExtendedFloatingActionButton mAddFab;<br/>    TextView addAlarmActionText, addPersonActionText;</span><span id="847a" class="lc jv hi ky b fi li le l lf lg">    // to check whether sub FABs are visible or not<br/>    Boolean isAllFabsVisible;</span><span id="339a" class="lc jv hi ky b fi li le l lf lg">    @Override<br/>    protected void onCreate(Bundle savedInstanceState) {<br/>        super.onCreate(savedInstanceState);<br/>        setContentView(R.layout.<em class="lj">activity_main</em>);</span><span id="276a" class="lc jv hi ky b fi li le l lf lg">        mAddFab = findViewById(R.id.<em class="lj">add_fab</em>);<br/>        mAddAlarmFab = findViewById(R.id.<em class="lj">add_alarm_fab</em>);<br/>        mAddPersonFab = findViewById(R.id.<em class="lj">add_person_fab</em>);</span><span id="4c26" class="lc jv hi ky b fi li le l lf lg">        addAlarmActionText = <br/>                findViewById(R.id.<em class="lj">add_alarm_action_text</em>);<br/>        addPersonActionText = <br/>                findViewById(R.id.<em class="lj">add_person_action_text</em>);</span><span id="7952" class="lc jv hi ky b fi li le l lf lg">        // Now set all the FABs and all the action name<br/>        // texts as GONE<br/>        mAddAlarmFab.setVisibility(View.<em class="lj">GONE</em>);<br/>        mAddPersonFab.setVisibility(View.<em class="lj">GONE</em>);<br/>        addAlarmActionText.setVisibility(View.<em class="lj">GONE</em>);<br/>        addPersonActionText.setVisibility(View.<em class="lj">GONE</em>);</span><span id="fdf7" class="lc jv hi ky b fi li le l lf lg">        // make the boolean variable as false, as all the<br/>        // action name texts and all the sub FABs are<br/>        // invisible<br/>        isAllFabsVisible = false;</span><span id="becc" class="lc jv hi ky b fi li le l lf lg">        // Set the Extended floating action button to<br/>        // shrinked state initially<br/>        mAddFab.shrink();</span><span id="b792" class="lc jv hi ky b fi li le l lf lg">        // We will make all the FABs and action name texts<br/>        // visible only when Parent FAB button is clicked So<br/>        // we have to handle the Parent FAB button first, by<br/>        // using setOnClickListener you can see below<br/>        mAddFab.setOnClickListener(<br/>                new View.OnClickListener() {<br/>                    @Override<br/>                    public void onClick(View view) {<br/>                        if (!isAllFabsVisible) {</span><span id="7f96" class="lc jv hi ky b fi li le l lf lg">                            // when isAllFabsVisible becomes<br/>                            // true make all the action name<br/>                            // texts and FABs VISIBLE.<br/>                            mAddAlarmFab.show();<br/>                            mAddPersonFab.show();<br/>                            addAlarmActionText<br/>                                    .setVisibility(View.<em class="lj">VISIBLE</em>);<br/>                            addPersonActionText<br/>                                    .setVisibility(View.<em class="lj">VISIBLE</em>);</span><span id="0711" class="lc jv hi ky b fi li le l lf lg">                            // Now extend the parent FAB, as<br/>                            // user clicks on the shrinked<br/>                            // parent FAB<br/>                            mAddFab.extend();</span><span id="8cbb" class="lc jv hi ky b fi li le l lf lg">                            // make the boolean variable true as<br/>                            // we have set the sub FABs<br/>                            // visibility to GONE<br/>                            isAllFabsVisible = true;<br/>                        } else {</span><span id="670d" class="lc jv hi ky b fi li le l lf lg">                            // when isAllFabsVisible becomes<br/>                            // true make all the action name<br/>                            // texts and FABs GONE.<br/>                            mAddAlarmFab.hide();<br/>                            mAddPersonFab.hide();<br/>                            addAlarmActionText<br/>                                    .setVisibility(View.<em class="lj">GONE</em>);<br/>                            addPersonActionText<br/>                                    .setVisibility(View.<em class="lj">GONE</em>);</span><span id="788b" class="lc jv hi ky b fi li le l lf lg">                            // Set the FAB to shrink after user<br/>                            // closes all the sub FABs<br/>                            mAddFab.shrink();</span><span id="51ce" class="lc jv hi ky b fi li le l lf lg">                            // make the boolean variable false<br/>                            // as we have set the sub FABs<br/>                            // visibility to GONE<br/>                            isAllFabsVisible = false;<br/>                        }<br/>                    }<br/>                });</span><span id="b22d" class="lc jv hi ky b fi li le l lf lg">        // below is the sample action to handle add person<br/>        // FAB. Here it shows simple Toast msg. The Toast<br/>        // will be shown only when they are visible and only<br/>        // when user clicks on them<br/>        mAddPersonFab.setOnClickListener(<br/>                new View.OnClickListener() {<br/>                    @Override<br/>                    public void onClick(View view) {<br/>                        Toast.<em class="lj">makeText<br/>                                </em>(MainActivity<br/>                                        .this, "Person Added",<br/>                                        Toast.<em class="lj">LENGTH_SHORT</em>).show();<br/>                    }<br/>                });</span><span id="8c8c" class="lc jv hi ky b fi li le l lf lg">        // below is the sample action to handle add alarm<br/>        // FAB. Here it shows simple Toast msg The Toast<br/>        // will be shown only when they are visible and only<br/>        // when user clicks on them<br/>        mAddAlarmFab.setOnClickListener(<br/>                new View.OnClickListener() {<br/>                    @Override<br/>                    public void onClick(View view) {<br/>                        Toast.<em class="lj">makeText<br/>                                <br/>                                </em>(MainActivity<br/>                                        .this, "Alarm Added", <br/>                                        Toast.<em class="lj">LENGTH_SHORT</em>).show();<br/>                    }<br/>                });<br/>    }<br/>}</span></pre><h1 id="27ae" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">输出:</h1><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><h1 id="6eb0" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">你可以在YouTube上关注我:</h1><p id="2671" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">Golap酒吧招待</p><h1 id="8b07" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">此外，请访问网站/博客</h1><p id="8380" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated"><a class="ae lk" href="https://www.gbandroidblogs.com/" rel="noopener ugc nofollow" target="_blank">www.gbandroidblogs.com</a></p><h1 id="9c03" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">在Instagram上关注我</h1><p id="b40d" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated"><a class="ae lk" href="https://www.instagram.com/androidapps.development.blogs/" rel="noopener ugc nofollow" target="_blank">安卓应用开发者</a></p><h1 id="6762" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">跟着我去脸书</h1><p id="f734" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated"><a class="ae lk" href="https://www.facebook.com/androidapps.development.blogs" rel="noopener ugc nofollow" target="_blank"> GBAndroidBlogs </a></p></div></div>    
</body>
</html>