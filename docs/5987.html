<html>
<head>
<title>Implementing a dynamic “Terms &amp; Conditions” page with animation and progress tracking in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 React Native 中实现带有动画和进度跟踪的动态“条款和条件”页面</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-a-dynamic-terms-conditions-page-with-animation-and-progress-tracking-in-react-56e27677041b?source=collection_archive---------2-----------------------#2021-12-14">https://medium.com/nerd-for-tech/implementing-a-dynamic-terms-conditions-page-with-animation-and-progress-tracking-in-react-56e27677041b?source=collection_archive---------2-----------------------#2021-12-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d79013f4e984f7df87661ae30641befa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TaZr-jmqcxk3yx4SJ5bTYg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">马库斯·温克勒在<a class="ae iu" href="https://unsplash.com/s/photos/terms-of-service?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="6cbb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们都知道浏览条款和条件页面的常见用户体验。用户需要向下滚动到底部，以启用提交按钮，只有在这之后，他们才能继续。在本帖中，我们将尝试构建一个相同体验的小型演示。</p><p id="8435" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，让我们看看最终产品，以便清楚地了解我们想要实现的目标。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/020961f52667367499e4f305926a01cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/0*8JC6jskLnQ3apbSz.gif"/></div></div></figure><p id="4a6a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从演示中，我们可以指出实现这种行为需要解决的几个关键领域。</p><ol class=""><li id="849f" class="jy jz hi ix b iy iz jc jd jg ka jk kb jo kc js kd ke kf kg bi translated">首先，我们需要检测用户是否已经到达页面底部，如果他们到达底部的某个点，我们将需要启用禁用按钮。</li><li id="e4cd" class="jy jz hi ix b iy kh jc ki jg kj jk kk jo kl js kd ke kf kg bi translated">我们还需要跟踪滚动的进度。这样我们就可以根据滚动位置向用户显示进度条。用户将清楚地知道他们进展了多长时间。</li><li id="72f9" class="jy jz hi ix b iy kh jc ki jg kj jk kk jo kl js kd ke kf kg bi translated">最后，为了使 UX 更加友好，我们可以在按钮被激活时设置按钮不透明度的动画。</li></ol></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="9bfa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好的，让我们从实现开始。</p><h1 id="a122" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">1.检测用户是否已经到达屏幕底部:</h1><p id="fe65" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">在初始阶段，我们的按钮是禁用的。我们可以创建一个状态来更改按钮的启用/禁用状态，如下所示</p><p id="a23e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du lw lx ly lz b">const [btnDisable, setBtnDisable] = React.useState(<strong class="ix hj">true</strong>)</code></p><p id="95b2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了检测用户的滚动位置，我们将使用我们的<code class="du lw lx ly lz b">ScrollView</code>的<code class="du lw lx ly lz b">onScroll</code>道具。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/3c248d31142c6c865459d4af69994bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Uu8NBihHI60ILeuW.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">检测用户是否已经到达底部</figcaption></figure><h1 id="51b4" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">2.启用带有不透明度动画的按钮:</h1><p id="6c58" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">从上面的代码中，我们可以看到我们正在启用按钮。我们可以添加一个简单的不透明动画来创建一个更好的感觉。最初，不透明度值为<code class="du lw lx ly lz b">0.2</code>。这就是为什么我们看到一个浅橙色的值，让用户知道按钮仍然处于非活动状态。</p><p id="7aa2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du lw lx ly lz b">const fadeAnim = useRef(<strong class="ix hj">new</strong></code> <code class="du lw lx ly lz b">Animated.Value(0.2)).current;</code></p><p id="1397" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我们将<code class="du lw lx ly lz b">btnDisble</code>状态的值设置为 false 时，我们可以将不透明度的值设置为 1。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/3f04ea45e74791b1c838687c0a103245.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dVsbHYrY0u-ByaOG.png"/></div></div></figure><p id="17d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我们的按钮组件。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/d322cb5fb2f22f67a2492514f0a321b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_9vVibDNK8IXcnm_.png"/></div></div></figure><h1 id="e4f6" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">3.跟踪和显示进度条</h1><p id="11ae" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">我们的最后一个任务是跟踪用户滚动页面的进度。为了跟踪进度，我们将在 onScroll 函数中使用一个动画值。</p><p id="90c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du lw lx ly lz b">const AnimatedProgressValue = <strong class="ix hj">new</strong></code> <code class="du lw lx ly lz b">Animated.Value(0)</code></p><p id="eced" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的代码描述了跟踪进度的过程。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/e01c6cb7b9944830d49f51231ffebf1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pEsffY1SJbfbjvaW.png"/></div></div></figure><p id="d7c4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的<code class="du lw lx ly lz b">AnimatedProgressValue</code>变量中有进度值。我们可以用它在页面底部生成进度条。这个实现如下</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/404488d16c760c8a3456129d85f21119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J3DqQFWvVxbAXCqR.png"/></div></div></figure><p id="c267" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">进度条的宽度等于屏幕的宽度。我们只需要根据进度值增加<code class="du lw lx ly lz b">scaleX</code>。<code class="du lw lx ly lz b">translateX</code>需要从左边开始缩放，否则，缩放将从中间开始，这就像<code class="du lw lx ly lz b">transformOrigin: '0px 0px'</code>网络一样。</p><p id="0ddd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里是帖子的完整代码和演示—<a class="ae iu" href="https://snack.expo.dev/@saad-bashar/terms-conditions-demo" rel="noopener ugc nofollow" target="_blank">https://snack.expo.dev/@saad-bashar/terms-conditions-demo</a></p></div></div>    
</body>
</html>