<html>
<head>
<title>Vulnerabilities in Smart Contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">智能合同中的漏洞</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/vulnerabilities-in-smart-contracts-80deb6912b5f?source=collection_archive---------5-----------------------#2022-04-25">https://medium.com/nerd-for-tech/vulnerabilities-in-smart-contracts-80deb6912b5f?source=collection_archive---------5-----------------------#2022-04-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6848" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">智能合约</strong>是一项非常新的技术，有几个常见的漏洞使它们很容易被黑客攻击。一旦大规模采用开始铺开，这将意味着灾难！这将导致一些大的黑客攻击，每个人都会害怕使用智能合同，导致它们被完全废弃。</p><p id="43b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们必须教育公众，让他们知道自己目前有多脆弱，并建立一种测试和创建智能合同的安全方法&amp;在技术被自身缺陷削弱之前，对智能合同的审计是必须的。智能合同的审核是</p><p id="202f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">了解:</strong><a class="ae jd" href="https://immunebytes.com/what-is-a-smart-contract-audit/" rel="noopener ugc nofollow" target="_blank">T5】什么是智能合同审计 </a></p><p id="fe4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">智能合同有许多安全问题的原因</strong></p><ul class=""><li id="d0f9" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">许多智能合约在金融资产方面存在问题</li><li id="380c" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">由于区块链技术的不变性，一旦智能合同发布时出现错误，它就不可更改</li><li id="fa2e" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">区块链州有缺陷智能合同的交易无法回滚</li></ul><p id="b320" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">常见安全问题列表</strong></p><p id="1690" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">未知代码间接执行:</strong>智能合约具有回退功能，增加了间接执行的可能性。这里有一些可以调用这个函数的原因。</p><ol class=""><li id="7f77" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc js jk jl jm bi translated">使用ABI调用另一个合同函数。如果为编码传递的签名字符串有打字错误，或者函数在此过程中没有该签名，将命令回退函数</li><li id="6b16" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc js jk jl jm bi translated">当交易存入另一个合约时调用的回退功能</li><li id="b044" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc js jk jl jm bi translated">使用API调用另一个契约函数，声明了契约的接口，同时开发人员犯了一些错误(例如，组合参数的类型)</li></ol><p id="a664" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">对输出代币金额的误算:</strong>代币或Eth值描述的货币目前很常见，许多新的Defi智能合同都面临这个问题。此类常见错误有</p><ol class=""><li id="1da6" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc js jk jl jm bi translated">使用这种令牌拨号时，很有可能会出现不正确的处理。</li><li id="32e8" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc js jk jl jm bi translated">费用计算过程中准确度损失的主要原因是操作顺序不正确。</li></ol><p id="3d1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">界面问题:</strong> Rubixi智能合约就是一个很好的例子，Rubixi是一个庞氏游戏，它的特点是所有者可以在金融金字塔中将其转移给自己。基本上，合同的构造者是业主。Rubixi智能合约中使用了相同的逻辑。在solidity 0.4.22版本中，构造函数被识别并定义为与契约名称相同的名称。</p><p id="a4d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">订单执行依赖:</strong>智能合约的变量值决定其状态。这可以通过运行函数来更改。ETH或ERC-20令牌传输的事务与调用契约的函数翻译相同。在编译新的块创建之后，这些事务可以由网络来完成。</p><p id="6c74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">时间成分:</strong>大部分逻辑智能合约都依赖于时间。上下文事务是智能合约唯一可用的时间。当你发送一个事务时，你基本上要求网络将它添加到下一个块中。反过来，事务的时间戳等于包含它的块的标签。因此，实现了与智能合约状态的一致性。</p><p id="60f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用blockhash函数:</strong>block hash函数是一个非常方便的工具，允许您检查您的合同将包含在区块链的哪个区块中。它最明显的应用是设定一个事件发生的时间。例如，您可以确定只有在合同激活后经过一定数量的冻结后才能从合同中提款。</p><p id="1bd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">错误处理的异常:开发人员在Solidity中编码时面临的最常见的问题之一是处理异常。异常可以在任何时候抛出，它们由各种不同的情况触发。然而，处理这些异常的方式并不总是相同的。</p><p id="e151" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">异常处理基于契约之间的交互。因此，合同容易受到恶意用户的攻击，如果这些异常处理不当，事务将被回滚。</p><p id="d265" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">重入攻击:</strong>这些攻击利用了这样一个事实:当事务执行另一个契约上的函数时，它不会等待执行完成就将控制权返回给自己的代码库。这就产生了一些有趣的攻击媒介，交易可以从一个合同重复发送到另一个合同，直到两个账户都没有余额(称为“无限循环”)。</p><p id="2b2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当新钱包的用户试图通过MyEtherWallet的界面从他们的账户中提取乙醚到新账户时，他们利用了这一点——他们错误地输入了他们的私钥作为一个值而不是一个地址，这意味着每当有人进行一次交易时，所有的交易都被执行两次而不是一次(因为他们认为他们可以提取两倍的金额)。</p><p id="7886" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">【ERC20 token不正确的工作:好吧，我们都经历过。你对一个新项目感到兴奋，你爱上了这个想法，你准备好把它变成现实。然后你开始行动，你意识到你的上一个项目看起来很像这个。你会想“如果我只是改变这里的这个东西和那里的这个东西，它会完全不同！”</p><p id="af55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯……不完全是。</p><p id="96b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ERC20令牌是众所周知的，但在现代协议中也被过度使用。在大多数情况下，它是完全适用的，其功能足以进行正确的财务操作。但是，在某些情况下，ERC20标准的定制实现可能是有意义的。</p><p id="9aeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就产生了一个风险:定制令牌实现和实际ERC20标准之间的差异——比如transfer()函数中缺少返回值。在测试过程中很容易忽略这些微小的变化——但是在生产中，它们会导致资金停滞和合同受阻。</p><p id="8b0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论</strong></p><p id="37ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总体而言，智能合约为颠覆性的可能性打开了大门。但是要发挥这种潜力，必须采取谨慎的方法，因为一行不正确的代码可能会导致严重的挫折。在<strong class="ih hj">以太坊智能合约</strong>中发现的问题的数量和严重性增加了开发人员和审计人员需要的关注和知识。也就是说，将信息存储在基于区块链的存储中以供公共的、分散的应用程序使用的能力，打开了无数用例的大门，这在以前是不可能的。</p></div></div>    
</body>
</html>