<html>
<head>
<title>Module in NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">节点中的模块</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/module-in-nodejs-95eba74e352f?source=collection_archive---------23-----------------------#2021-05-25">https://medium.com/nerd-for-tech/module-in-nodejs-95eba74e352f?source=collection_archive---------23-----------------------#2021-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7b7df6bfc324d2dab4867ec0a7849f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WJpSlCsfnmaNcAb5mrMSFw.jpeg"/></div></div></figure><p id="7454" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">节点应用程序中的每个文件都被视为一个模块。但首先，我们需要了解客户端JavaScript和NodeJS环境中全局作用域的核心概念。</p><p id="9853" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在JavaScript中，我们多次使用不同的对象和函数，这些对象和函数我们没有定义，但是在整个应用程序中都是可用的。这些都属于全局范围，可以在所有应用程序中访问。其中一些如下:</p><p id="c6ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo"> console.log() </em></p><p id="9f33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo"> setTimeOut() </em></p><p id="ad78" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo"> setInterval() </em></p><p id="13a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo"> clearInterval() </em></p><p id="b56e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在客户端JavaScript中，窗口对象表示全局范围。所以，如果我们想访问所有全局作用域的对象和函数，要么直接写它们的名字，要么用一个窗口前缀。如果我们不添加窗口，JavaScript引擎会自己添加。其次，用户定义的客户端JavaScript中的所有变量总是全局范围的，并且将成为窗口对象的一部分。如果我们在客户端JavaScript中定义这个变量两次，它将覆盖另一个变量。</p><p id="7dbb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们构建大规模的应用程序时，我们总是将代码分成几个文件。如果我们在一个文件中定义了一个名为"<em class="jo"> calculate </em>的函数，然后在另一个文件中定义了另一个名为"<em class="jo"> calculate </em>的函数，它将覆盖前面的函数。这是客户端JavaScript的一个大问题。</p><p id="26f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是为什么在node中我们没有窗口对象。我们还有另一个被称为“全局”的对象。所有预定义的JavaScript函数和变量都可以通过这个全局对象访问。我们可以给它们加上global前缀，或者直接把它写到代码中。但是这里有一个与NodeJS全局对象的主要区别，用户声明的变量或函数不会被添加到全局对象中。它们只限于该特定文件，在该文件之外不可用。用面向对象编程的术语来说，我们可以说它们是私有的，在容器或模块之外是不可用的。如果我们想让一个变量在容器外可访问，导出它或者使它成为公共的。</p><h2 id="2cee" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated"><strong class="ak">代码是如何在模块内部运行的？</strong></h2><p id="39c0" class="pw-post-body-paragraph iq ir hi is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">在执行代码之前，节点获取所有文件的内容，并将它们放在一个包装函数中。这个包装函数被立即调用函数表达式并被唯一命名。这个包装函数有它的作用域，在这个函数内部编写的代码在函数外部是不可访问的。这就是为什么所有变量var、let和const都作用于特定模块而不是全局作用的主要原因。</p><p id="eaf6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，我们有两个模块模块A和模块B，模块A有一些变量，模块B有一些变量。现在模块A变量将被模块B变量访问，直到模块B变量被导出。如果模块A中有一些变量，而模块B中有相同名称的变量，那么它永远不会与它们冲突，因为两者在不同的函数范围内。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/20896ce8cad58ee5cccbc161377806b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N6xI4cVxlCn2rVViB4AbPw.jpeg"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">节点中的模块</figcaption></figure><p id="31a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Nodejs中的每个模块都有5个参数，exports、require、module、__filename和__dirname。它们中的每一个都在NodeJS中提供了不同的功能，并且在我们构建系统时非常有用。</p><p id="d0f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">外卖:</strong></p><p id="2cc3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NodeJS中的文件称为模块。NodeJS环境在编译前将其转换成包装函数。</p><p id="b679" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每个NodeJS应用程序都有一个文件或一个模块，称为主模块。</p></div></div>    
</body>
</html>