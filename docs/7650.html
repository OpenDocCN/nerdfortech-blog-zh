<html>
<head>
<title>LeetCode — Longest Consecutive Subsequence</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">LeetCode —最长的连续子序列</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/leetcode-longest-consecutive-subsequence-1dd3edd0fbd2?source=collection_archive---------2-----------------------#2022-12-24">https://medium.com/nerd-for-tech/leetcode-longest-consecutive-subsequence-1dd3edd0fbd2?source=collection_archive---------2-----------------------#2022-12-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f954" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给定一个未排序的整数数组<em class="jd"> nums </em>，返回<em class="jd">最长连续元素序列</em>的长度。</p><p id="366e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你必须写一个在<em class="jd"> O(n) </em>时间内运行的算法。</p><p id="3677" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问题陈述摘自:<a class="ae je" href="https://leetcode.com/problems/longest-consecutive-sequence" rel="noopener ugc nofollow" target="_blank">https://leetcode.com/problems/longest-consecutive-sequence</a></p><p id="cbab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">例 1: </strong></p><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="8407" class="jo jp hi jk b be jq jr l js jt">Input: nums = [100, 4, 200, 1, 3, 2]<br/>Output: 4<br/>Explanation: The longest consecutive elements sequence is [1, 2, 3, 4]. Therefore its length is 4.</span></pre><p id="e236" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">例 2: </strong></p><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="7759" class="jo jp hi jk b be jq jr l ju jt">Input: nums = [0, 3, 7, 2, 5, 8, 4, 6, 0, 1]<br/>Output: 9</span></pre><p id="9fe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">约束:</strong></p><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="fa8b" class="jo jp hi jk b be jq jr l js jt">- 0 &lt;= nums.length &lt;= 10^5<br/>- -10^9 &lt;= nums[i] &lt;= 10^9</span></pre><h1 id="9f0c" class="jv jp hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">说明</h1><h2 id="e47e" class="ks jp hi bd jw kt ku kv ka kw kx ky ke iq kz la ki iu lb lc km iy ld le kq lf bi translated">整理</h2><p id="37c8" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">最简单的解决方案是对数组进行排序，找出最长的连续元素。对数组排序后，我们删除重复的元素。我们运行一个循环，计算连续元素的当前数量和最大长度。如果当前数字不是前一个数字的连续元素，我们将计数器重置为 1，并更新最大长度。</p><p id="52d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述方法的一个 C++片段如下:</p><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="0f32" class="jo jp hi jk b be jq jr l ju jt">int ans = 0, count = 0;<br/><br/>sort(array, array + n);<br/><br/>vector&lt;int&gt; v;<br/>v.push_back(array[0]);<br/><br/>for (int i = 1; i &lt; n; i++) {<br/>    if (array[i] != array[i - 1])<br/>        v.push_back(array[i]);<br/>}<br/><br/>for (int i = 0; i &lt; v.size(); i++) {<br/>    if (i &gt; 0 &amp;&amp; v[i] == v[i - 1] + 1)<br/>        count++;<br/>    else<br/>        count = 1;<br/><br/>    ans = max(ans, count);<br/>}<br/><br/>return ans;</span></pre><p id="1999" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述方法的时间复杂度为<strong class="ih hj"> O(n(logn))，</strong>，空间复杂度为<strong class="ih hj"> O(n) </strong>。</p><h2 id="377d" class="ks jp hi bd jw kt ku kv ka kw kx ky ke iq kz la ki iu lb lc km iy ld le kq lf bi translated">散列表</h2><p id="b473" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">我们可以通过使用 HashMap 将时间复杂度降低到<strong class="ih hj"> O(n) </strong>。直接查算法吧。</p><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="0bd4" class="jo jp hi jk b be jq jr l js jt">- set n = nums.size()<br/><br/>- if n == 0<br/>    return 0<br/><br/>- initialize map: map&lt;int, int&gt; m<br/><br/>- loop for i = 0; i &lt; n; i++<br/>  - m[nums[i]]++<br/><br/>- set prev = m.begin()<br/>      maxLength = 1<br/>      result = 0<br/><br/>- loop for i = m.begin(); i &lt; m.end(); i++<br/>  - if prev-&gt;first + 1 == i-&gt;first<br/>    - maxLength++<br/>  - else<br/>    - result = max(result, maxLength)<br/>    - maxLength = 1<br/><br/>  - prev = i<br/><br/>- return max(result, maxLength)</span></pre><p id="34ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述方法的时间复杂度为<strong class="ih hj"> O(n) </strong>，空间复杂度为<strong class="ih hj"> O(n) </strong>。</p><p id="140f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在<strong class="ih hj"> C++ </strong>、<strong class="ih hj"> Golang </strong>、<strong class="ih hj"> Javascript </strong>中检查一下我们的算法。</p><h2 id="afd1" class="ks jp hi bd jw kt ku kv ka kw kx ky ke iq kz la ki iu lb lc km iy ld le kq lf bi translated">C++解决方案</h2><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="cba4" class="jo jp hi jk b be jq jr l ju jt">class Solution {<br/>public:<br/>    int longestConsecutive(vector&lt;int&gt;&amp; nums) {<br/>        int n = nums.size();<br/>        if(n == 0) return 0;<br/><br/>        map&lt;int, int&gt; m;<br/><br/>        for(int i = 0; i &lt; n; i++) {<br/>            m[nums[i]];<br/>        }<br/><br/>        auto prev = m.begin();<br/>        int maxLength = 1, result = 0;<br/><br/>        for(auto i = m.begin(); i != m.end(); i++) {<br/>            if(prev-&gt;first + 1 == i-&gt;first) {<br/>                maxLength++;<br/>            } else {<br/>                result = max(result, maxLength);<br/>                maxLength = 1;<br/>            }<br/><br/>            prev = i;<br/>        }<br/><br/>        return max(result, maxLength);<br/>    }<br/>};</span></pre><h2 id="eeba" class="ks jp hi bd jw kt ku kv ka kw kx ky ke iq kz la ki iu lb lc km iy ld le kq lf bi translated">戈朗溶液</h2><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="b727" class="jo jp hi jk b be jq jr l ju jt">func max(a, b int) int {<br/>    if a &gt; b {<br/>        return a<br/>    }<br/>    return b<br/>}<br/><br/>func longestConsecutive(nums []int) int {<br/>    n := len(nums)<br/>    if n == 0 {<br/>        return 0<br/>    }<br/><br/>    m := make(map[int]int)<br/><br/>    for i := 0; i &lt; n; i++ {<br/>        m[nums[i]]++<br/>    }<br/><br/>    maxLength, result := 1, 0<br/><br/>    for num := range m {<br/>        if _, ok := m[num-1]; !ok {<br/>            currNum := num<br/>            maxLength = 1<br/><br/>            for {<br/>                if _, ok := m[currNum+1]; ok {<br/>                    currNum += 1<br/>                    maxLength += 1<br/>                } else {<br/>                    break<br/>                }<br/>            }<br/><br/>            result = max(result, maxLength)<br/>        }<br/>    }<br/><br/>    return result<br/>}</span></pre><h2 id="e06d" class="ks jp hi bd jw kt ku kv ka kw kx ky ke iq kz la ki iu lb lc km iy ld le kq lf bi translated">Javascript 解决方案</h2><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="dd03" class="jo jp hi jk b be jq jr l ju jt">var longestConsecutive = function(nums) {<br/>    const n = nums.length;<br/>    if(n === 0) {<br/>        return 0<br/>    }<br/><br/>    let set = new Set(nums)<br/><br/>    let maxLength = 1, result = 0<br/><br/>    for(let num of set) {<br/>        if(set.has(num - 1)) {<br/>            continue;<br/>        }<br/><br/>        let current = num<br/>        maxLength = 1<br/><br/>        while(set.has(current + 1)){<br/>            current++<br/>            maxLength++<br/>        }<br/><br/>        result = Math.max(result, maxLength)<br/>    }<br/><br/>    return result<br/>};</span></pre><p id="e2b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们为<strong class="ih hj">示例 1 </strong>预演我们的算法。</p><pre class="jf jg jh ji fd jj jk jl bn jm jn bi"><span id="6c53" class="jo jp hi jk b be jq jr l js jt">Input: nums = [100, 4, 200, 1, 3, 2]<br/><br/>Step 1: int n = nums.size()<br/>            n = 6<br/><br/>Step 2: n == 0<br/>        6 == 0<br/>        false<br/><br/>Step 3: map&lt;int, int&gt; m<br/>        for(int i = 0; i &lt; n; i++) {<br/>            m[nums[i]];<br/>        }<br/><br/>        m = {<br/>            100: 0,<br/>            4: 0,<br/>            200: 0,<br/>            1: 0,<br/>            3: 0,<br/>            2: 0,<br/>        }<br/><br/>Step 4: prev = m.begin()<br/>             = 1<br/>        maxLength = 1<br/>        result = 0<br/><br/>Step 5: loop for i = m.begin(); i != m.end()<br/>            i = 1<br/>            1 != m.end()<br/>            true<br/><br/>            if prev-&gt;first + 1 == i-&gt;first<br/>               1 + 1 == 1<br/>               2 == 1<br/>               false<br/><br/>            else<br/>                result = max(result, maxLength)<br/>                       = max(0, 1)<br/>                       = 1<br/><br/>                maxLength = 1<br/><br/>            prev = i<br/>                 = 1<br/><br/>            i++<br/>            i -&gt; 2<br/><br/>Step 6: loop for i != m.end()<br/>            i = 2<br/>            2 != m.end()<br/>            true<br/><br/>            if prev-&gt;first + 1 == i-&gt;first<br/>               1 + 1 == 2<br/>               2 == 2<br/>               true<br/><br/>               maxLength++<br/>               maxLength = 2<br/><br/>            prev = i<br/>                 = 2<br/><br/>            i++<br/>            i -&gt; 3<br/><br/>Step 7: loop for i != m.end()<br/>            i = 3<br/>            3 != m.end()<br/>            true<br/><br/>            if prev-&gt;first + 1 == i-&gt;first<br/>               2 + 1 == 3<br/>               3 == 3<br/>               true<br/><br/>               maxLength++<br/>               maxLength = 3<br/><br/>            prev = i<br/>                 = 3<br/><br/>            i++<br/>            i -&gt; 4<br/><br/>Step 8: loop for i != m.end()<br/>            i = 4<br/>            4 != m.end()<br/>            true<br/><br/>            if prev-&gt;first + 1 == i-&gt;first<br/>               3 + 1 == 4<br/>               4 == 4<br/>               true<br/><br/>               maxLength++<br/>               maxLength = 4<br/><br/>            prev = i<br/>                 = 4<br/><br/>            i++<br/>            i -&gt; 100<br/><br/>Step 9: loop for i != m.end()<br/>            i = 100<br/>            100 != m.end()<br/>            true<br/><br/>            if prev-&gt;first + 1 == i-&gt;first<br/>               4 + 1 == 100<br/>               5 == 100<br/>               false<br/><br/>            else<br/>                result = max(result, maxLength)<br/>                       = max(1, 4)<br/>                       = 4<br/><br/>                maxLength = 1<br/><br/>            prev = i<br/>                 = 100<br/><br/>            i++<br/>            i -&gt; 200<br/><br/>Step 10: loop for i != m.end()<br/>            i = 200<br/>            200 != m.end()<br/>            true<br/><br/>            if prev-&gt;first + 1 == i-&gt;first<br/>               100 + 1 == 200<br/>               101 == 200<br/>               false<br/><br/>            else<br/>                result = max(result, maxLength)<br/>                       = max(4, 4)<br/>                       = 4<br/><br/>                maxLength = 4<br/><br/>            prev = i<br/>                 = 200<br/><br/>            i++<br/>            i -&gt; end<br/><br/>Step 11: loop for i != m.end()<br/>            false<br/><br/>Step 12: return max(result, maxLength)<br/><br/>We return the answer as 4.</span></pre></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="8c04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">原载于</em><a class="ae je" href="https://alkeshghorpade.me/post/leetcode-longest-consecutive-sequence" rel="noopener ugc nofollow" target="_blank"><em class="jd">https://alkeshghorpade . me</em></a><em class="jd">。</em></p></div></div>    
</body>
</html>