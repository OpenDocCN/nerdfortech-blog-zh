<html>
<head>
<title>Automated visual regression testing with TypeScript, Playwright, Jest and Jest Image Snapshot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用类型脚本、剧作家、笑话和笑话图像快照进行自动化视觉回归测试</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/automated-visual-regression-testing-with-typescript-playwright-jest-and-jest-image-snapshot-86db6f3364f5?source=collection_archive---------0-----------------------#2021-04-27">https://medium.com/nerd-for-tech/automated-visual-regression-testing-with-typescript-playwright-jest-and-jest-image-snapshot-86db6f3364f5?source=collection_archive---------0-----------------------#2021-04-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/df761901acb3ce911f590eed9b108f06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qGWieJvk7s1t7pzK82Lj6A.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">用<a class="ae iq" href="https://www.canva.com" rel="noopener ugc nofollow" target="_blank">https://www.canva.com</a>制造</figcaption></figure><h1 id="a6c0" class="ir is hi bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated"><strong class="ak">简介</strong></h1><p id="9a2d" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">如你所知，拥有自动化的可视化回归测试(除了单元测试和集成测试之外)对于确保用户良好的体验是非常重要的。<br/>这确保了不会有意外的破坏，并确认当现有代码被修改或依赖关系被更新时，用户流和应用程序的外观是正常的。</p><p id="6b0c" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">最近写了一篇关于<a class="ae iq" rel="noopener" href="/nerd-for-tech/automated-visual-regression-testing-with-typescript-puppeteer-jest-and-jest-image-snapshot-9e14dd9d0fe7">用TypeScript，Jest，Jest Image Snapshot和<strong class="jr hj">木偶师</strong> </a>进行视觉回归测试的文章。如果你使用木偶师，你知道你只能在铬下测试。Firefox的实现是实验性的，根本不支持Webkit。<br/>今天，我给你提供一个木偶师的替代品:<strong class="jr hj">剧作家<br/> </strong>剧作家和木偶师很像。《木偶戏》中出现的所有功能在《剧作家》中还没有出现。但是这个工具的优点是你可以在Chromium，Firefox，Webkit，Google Chrome &amp; Microsoft Edge上运行你的测试，此外只需要一个命令。</p><p id="48ea" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">在本文中，我将解释如何在一个TypeScript项目中使用Jest——作为测试运行程序——和Jest-Image-Snapshot(Jest matcher)——来设置和运行测试，以获取当前网页的截图，并将生成的截图与截图基线进行比较，从而找到用户界面中的回归。<br/>如果你看了我之前的文章，会觉得挺像的。</p><h1 id="ea79" class="ir is hi bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">项目示例</h1><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ks"><img src="../Images/a81248ed9f81dcdf69fea636b0eecf3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ru7qrJRZs62YuEU9"/></div></div></figure><p id="2f41" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">我将以<a class="ae iq" href="https://github.com/process-analytics/bpmn-visualization-js" rel="noopener ugc nofollow" target="_blank"> BPMN可视化</a>项目(版本0.13.0)为例。(这个例子已经被简化，所以它更清楚地显示了本文中解释的配置和特性。)这个项目的目标是加载BPMN内容，并呈现它。<br/>自动化视觉测试将通过每次重构、添加新组件、更新不同BPMN元素的定位算法或更新MxGraph渲染库来简化我们的生活。</p><p id="4dab" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">此外，我将配置测试在Chromium、Firefox和Webkit上运行。</p><h1 id="66ec" class="ir is hi bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">先决条件</h1><p id="b8be" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">作为第一步，我们需要安装所需的包作为devDependencies:</p><ul class=""><li id="6cef" class="lb lc hi jr b js kn jw ko ka ld ke le ki lf km lg lh li lj bi translated"><strong class="jr hj"> Jest </strong> +其类型定义:一个JavaScript测试框架<br/> <a class="ae iq" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>是一个全功能的测试框架，由脸书开发。它需要很少的配置，基本上开箱即用。</li></ul><blockquote class="lk ll lm"><p id="57de" class="jp jq ln jr b js kn ju jv jw ko jy jz lo kp kc kd lp kq kg kh lq kr kk kl km hb bi translated">npm install -D jest @types/jest</p></blockquote><ul class=""><li id="9c28" class="lb lc hi jr b js kn jw ko ka ld ke le ki lf km lg lh li lj bi translated">剧作家:一个Node.js库，用一个API自动化<a class="ae iq" href="https://playwright.dev/docs/browsers" rel="noopener ugc nofollow" target="_blank"> Chromium、Firefox、Webkit、Google Chrome &amp;微软Edge </a>。可以在浏览器上手动执行大部分操作并截图。</li></ul><blockquote class="lk ll lm"><p id="128c" class="jp jq ln jr b js kn ju jv jw ko jy jz lo kp kc kd lp kq kg kh lq kr kk kl km hb bi translated">npm安装-D剧作家笑话-剧作家预设</p></blockquote><ul class=""><li id="284a" class="lb lc hi jr b js kn jw ko ka ld ke le ki lf km lg lh li lj bi translated"><strong class="jr hj"> Jest-Image-Snapshot </strong> + its类型定义:一个Jest匹配器，用于执行图像比较</li></ul><blockquote class="lk ll lm"><p id="59a9" class="jp jq ln jr b js kn ju jv jw ko jy jz lo kp kc kd lp kq kg kh lq kr kk kl km hb bi translated">NPM I-D jest-image-snapshot @ types/jest-image-snapshot</p></blockquote><h1 id="90bc" class="ir is hi bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">配置</h1><p id="bf93" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">让我们配置前面的库。</p><h2 id="a42f" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">配置Jest</h2><p id="423a" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">我不会在这里详细介绍配置Jest的所有不同方法。如果您已经在您的单元/e2e测试中使用Jest，这对您来说并不陌生。如果你想知道更多关于Jest的解释，有很多很棒的文章。</p><p id="6c38" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">在这个例子中，我们有4个Jest配置:单元测试、集成测试、e2e测试和性能测试。我们在e2e测试套件中添加了视觉测试。在这里，我将解释我们如何为e2e测试配置Jest。</p><p id="e6d2" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">首先，在<em class="ln">创建Jest配置文件。/测试/e2e </em>目录:</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/jest.config.js</figcaption></figure><p id="b8a4" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">这个配置将根目录设置为根项目目录，运行<em class="ln">。ts </em>文件与ts-jest模块，并在<em class="ln">的任何子目录下查找<em class="ln"> .spec.ts </em>和<em class="ln"> test.ts </em>文件。/测试/e2e </em>目录。</p><h2 id="1389" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">配置剧作家</h2><ul class=""><li id="2a44" class="lb lc hi jr b js jt jw jx ka mh ke mi ki mj km lg lh li lj bi translated">在Jest配置中指定预设，如剧作家的<a class="ae iq" href="https://playwright.dev/docs/test-runners#jest--jasmine" rel="noopener ugc nofollow" target="_blank">官方文档中所指定:</a></li></ul><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/jest.config.js</figcaption></figure><ul class=""><li id="045c" class="lb lc hi jr b js kn jw ko ka ld ke le ki lf km lg lh li lj bi translated">为运行服务器的剧作家配置创建一个新文件&amp; <a class="ae iq" href="https://playwright.dev/docs/api/class-browsertype#browsertypelaunchoptions" rel="noopener ugc nofollow" target="_blank">为所有测试启动一次浏览器:</a></li></ul><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/test/e2e/jest-剧作家</figcaption></figure><p id="020e" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">使用这个配置，我们在端口<strong class="jr hj"> 10002 </strong>上启动一个服务器，超时30秒，并启动3个浏览器。</p><h2 id="1d6a" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">扩展Jest expect断言机制以使用Jest图像快照</h2><p id="90b8" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">这可能是新的部分，但稍加配置，我们很快就会准备好。</p><p id="0515" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">默认情况下，<strong class="jr hj"> Jest </strong>对<strong class="jr hj"> Jest-Image-Snapshot </strong>及其断言<strong class="jr hj"> toMatchImageSnapshot </strong>一无所知。所以我们需要扩展Jest。为此，创建一个新文件，如下所示:</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/test/e2e/jest.image.js</figcaption></figure><p id="16b5" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">为了避免在每个测试文件中扩展Jest或在所有测试文件中全局导入之前的文件，我们需要配置Jest，以便在使用<a class="ae iq" href="https://jestjs.io/docs/en/configuration#setupfilesafterenv-array" rel="noopener ugc nofollow" target="_blank"><strong class="jr hj">setupFilesAfterEnv</strong></a>(Jest属性)<strong class="jr hj">将测试框架安装到环境中之后立即运行它。</strong></p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/jest.config.js</figcaption></figure><h2 id="c14a" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">添加新命令</h2><p id="d407" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">为了简化测试执行，在<strong class="jr hj"> package.json </strong>文件中添加以下脚本:</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/package.json</figcaption></figure><p id="1a5c" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">现在，您可以使用以下命令运行您的e2e测试:</p><blockquote class="lk ll lm"><p id="cb56" class="jp jq ln jr b js kn ju jv jw ko jy jz lo kp kc kd lp kq kg kh lq kr kk kl km hb bi translated">国家预防机制运行测试:e2e</p></blockquote><p id="8ee0" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><strong class="jr hj">注意:如果您在不同的操作系统上运行测试，那么cross-env </strong>非常有用。</p><h1 id="26d7" class="ir is hi bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">试验</h1><p id="0d3f" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">你可以在Github上的<a class="ae iq" href="https://github.com/americanexpress/jest-image-snapshot#%EF%B8%8F-api" rel="noopener ugc nofollow" target="_blank">自述文件</a>中找到不同的属性来定制<strong class="jr hj"> Jest-Image-Snapshot </strong>。</p><h2 id="80c5" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">用Jest-Image-Snapshot创建一个基本测试</h2><p id="b45d" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">如果一切都配置正确，我们现在准备好通过组合<strong class="jr hj">剧作家</strong>和<strong class="jr hj">玩笑</strong>和<strong class="jr hj">玩笑图像快照</strong>来创建我们的第一个视觉回归测试！</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/bpmn.rendering.test.ts</figcaption></figure><p id="10bf" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">在测试运行之后，将会创建一个新目录—<strong class="jr hj">_ _ image _ snapshot _ _</strong>——为每个<em class="ln">到MatchImageSnapshot </em>调用创建一个图像。默认情况下，使用<strong class="jr hj">测试路径</strong>、<strong class="jr hj">当前测试名称</strong>、<strong class="jr hj">计数器</strong>和<strong class="jr hj">默认标识符</strong>计算快照的名称。</p><p id="90fc" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><strong class="jr hj">生成的快照示例:</strong></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es mk"><img src="../Images/85d9b58c8c0330099d2cc99e85c5c014.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZA-HT02H3J0lh_aD"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated"><em class="ml">bpmn-rendering-test-ts-no-bpmn-gateway-visual-regression-1-snap . png</em></figcaption></figure><p id="5065" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><strong class="jr hj">注意:</strong>确保快照文件在您的源代码控制中提交，以便与其他开发人员和CI环境共享。</p><h2 id="4c6c" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">在不同机器上测试</h2><p id="c07e" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">一对一像素匹配的一个问题是，测试很可能在开发它的机器之外的机器上出错，因为每个环境呈现相同应用程序的方式都略有不同。</p><p id="e6d6" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">例如，假设我们希望在每次创建对GitHub中主分支的pull请求时，在CI环境中运行测试。无需对代码进行任何修改，测试就可以在本地通过；但是在CI环境中，它会失败，并显示如下消息:</p><blockquote class="lk ll lm"><p id="52c9" class="jp jq ln jr b js kn ju jv jw ko jy jz lo kp kc kd lp kq kg kh lq kr kk kl km hb bi translated">错误:预期图像与快照匹配或接近匹配，但与快照相差0.0005804554357724534%(2.7861860917077763个不同像素)。</p></blockquote><p id="dd60" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">并且用于diff的新图像文件被存储在<strong class="jr hj">_ _ image _ snapshot s _ _/_ _ diff _ output _ _</strong>目录中，其名称为<strong class="jr hj">&lt;snapshot _ name&gt;-diff . png</strong>。</p><p id="5b44" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">如果我们使用前面的测试，我们将得到如下结果:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es mm"><img src="../Images/ac03226c7fee884b4b098c8e1e7164d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VMo3loMuldCS2C3o"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated"><em class="ml">bpmn-rendering-test-ts-no-bpmn-gateway-visual-regression-1-diff . png</em></figcaption></figure><p id="2bdc" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">可以修改之前的<strong class="jr hj"> jest-image-snapshot </strong>配置，更新<strong class="jr hj"><em class="ln">failure threshold</em></strong><em class="ln">(默认值:0)</em>&amp;<strong class="jr hj"><em class="ln">failure thresholdtype</em></strong><em class="ln">(默认值:像素)</em>。这些属性用于计算容许差异的阈值(在测试失败之前)。</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/bpmn.rendering.test.ts</figcaption></figure><p id="c1fb" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><strong class="jr hj">警告:</strong>如果您将故障阈值增加太多，当本地和CI环境差异太大时，可能无法检测到视觉退化。</p><h2 id="b015" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">订购快照</h2><p id="03d4" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">如果你有10个或者更多的测试，在目录<strong class="jr hj">_ _ image _ snapshot _ _</strong>中找到哪个截图对应哪个测试/特性会变得复杂。</p><p id="b5c8" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">根据测试修改<strong class="jr hj"> customSnapshotsDir </strong>属性，使其具有不同的值。</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/test/e2e/ <em class="ml">助手/图像-快照-配置. ts </em></figcaption></figure><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/bpmn.rendering.test.ts</figcaption></figure><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/bpmn.navigation.test.ts</figcaption></figure><h2 id="41aa" class="lr is hi bd it ls lt lu ix lv lw lx jb ka ly lz jf ke ma mb jj ki mc md jn me bi translated">重复使用快照</h2><p id="318c" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">有时，即使在不同的操作之后，预期的结果/快照也是相同的。为了避免Github存储库中有大量相同的快照，最好重用一个快照。</p><p id="4c07" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">为此，需要覆盖默认的<strong class="jr hj">customSnapshotIdentifier</strong>&amp;<strong class="jr hj">customDiffDir</strong>属性。</p><ul class=""><li id="79f4" class="lb lc hi jr b js kn jw ko ka ld ke le ki lf km lg lh li lj bi translated"><strong class="jr hj">customSnapshotIdentifier</strong>:给这个快照的自定义名称。它防止用<strong class="jr hj">测试路径</strong>、<strong class="jr hj">当前测试名称</strong>、<strong class="jr hj">计数器</strong>和<strong class="jr hj">默认标识符</strong>计算快照的名称。</li><li id="c40f" class="lb lc hi jr b js mn jw mo ka mp ke mq ki mr km lg lh li lj bi translated"><strong class="jr hj"> customDiffDir </strong>:保存diff的目录的自定义绝对路径。由于我们在不同的测试中使用相同的快照，为了知道哪个diff文件对应于哪个测试，我们需要根据测试设置不同的值。</li></ul><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/test/e2e/ <em class="ml">助手/图像快照配置. ts </em></figcaption></figure><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="im in et er es io ip bd b be z dx translated">。/测试/e2e/图表.渲染.测试. ts</figcaption></figure><h1 id="b651" class="ir is hi bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">结论</h1><p id="34e1" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">有了这么多的操作系统、web浏览器和屏幕分辨率，视觉测试可以成为一个强大的工具来确保应用程序在所有可能的环境下都能正常工作。作为其他测试的补充，绝对值得一试。</p><p id="9a87" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">现在，您已经拥有了使用Jest &amp;剧作家在TypeScript中开始第一次视觉回归测试所需的一切。</p><p id="3509" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">感谢您的阅读，希望对您有所帮助或启发:)</p><h1 id="81e2" class="ir is hi bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">参考</h1><ul class=""><li id="458a" class="lb lc hi jr b js jt jw jx ka mh ke mi ki mj km lg lh li lj bi translated">https://Github.com/process-analytics/bpmn-visualization-js BPMN可视化github库:<a class="ae iq" href="https://github.com/process-analytics/bpmn-visualization-js" rel="noopener ugc nofollow" target="_blank"/></li><li id="590f" class="lb lc hi jr b js mn jw mo ka mp ke mq ki mr km lg lh li lj bi translated">Jest-image-snapshot的Github库:【https://github.com/americanexpress/jest-image-snapshot T2】</li><li id="d584" class="lb lc hi jr b js mn jw mo ka mp ke mq ki mr km lg lh li lj bi translated">剧作家文档:<a class="ae iq" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank"> https://playwrightdev/ </a></li></ul></div></div>    
</body>
</html>