<html>
<head>
<title>Streamlit — Build Powerful Data Science Apps On The Web</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Streamlit —在Web上构建强大的数据科学应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/streamlit-build-powerful-data-science-apps-on-the-web-58cd353858b5?source=collection_archive---------19-----------------------#2021-03-12">https://medium.com/nerd-for-tech/streamlit-build-powerful-data-science-apps-on-the-web-58cd353858b5?source=collection_archive---------19-----------------------#2021-03-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0e80a47e1982a6c9b46b50b90c5b9263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9CBQ__c0DojX8YfsBeIF1A.png"/></div></div></figure><p id="eecc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不久前，我偶然发现了可能是有史以来最好、最酷的Python库，但遗憾的是，它被严重低估了，至少当我试图寻找学习它的资源时是这样，因为我预计Python社区会被它震惊，所以在本文中，我们将了解这个神奇的库的更多信息</p><p id="fac1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">什么是细流，为什么？</strong></p><p id="70a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Streamlit是一个库，它允许您用最少的代码在web上创建全功能的数据驱动应用程序</p><p id="0fd8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">真正让我措手不及的是它是多么的简单和强大，用不到10行代码我就能在浏览器上看到一个实际的应用程序，我简直惊呆了</p><p id="1750" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它有大量的预制组件和部件，你所要做的只是选择</p><p id="94b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">Streamlit不是为了什么？</strong></p><p id="dff3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽管这个描述和将应用程序部署到浏览器的想法让你觉得很神奇，但Streamlit并不是一个真正的web框架，所以你不会真正拥有路由和模板渲染等功能，你所能做的只是创建数据web应用程序</p><p id="bb2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">我们在建造什么？</strong></p><p id="6e81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">只是为了探索这个惊人的库的功能，我们将构建一个股票应用程序，我们可以在一个非常整洁的表格上查看股票价格数据，它看起来像这样</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/99093a9dee52d69e420c399b1567daed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*52B9-pPuSJDz6_SiCEGq3A.png"/></div></div></figure><p id="d63d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">安装Streamlit </strong></p><p id="dd0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用简单的命令<code class="du jt ju jv jw b">pip install streamlit</code></p><p id="dabc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">从Streamlit向世界问好</strong></p><pre class="jp jq jr js fd jx jw jy jz aw ka bi"><span id="84ca" class="kb kc hi jw b fi kd ke l kf kg">import streamlit as st </span><span id="2532" class="kb kc hi jw b fi kh ke l kf kg">st.title("Hello World") # adding a title to our app</span><span id="9f37" class="kb kc hi jw b fi kh ke l kf kg">st.header("i love learning about Streamlit!")</span></pre><p id="864b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就这样，我们的应用程序现在已经准备好推出了！</p><p id="4dfc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">运行应用</strong></p><p id="5871" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要运行我们的应用程序，只需使用命令<code class="du jt ju jv jw b">streamlit run APP_NAME.py</code>，当然是用您的python文件名替换APP_NAME</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/d98f39dc989335de7609b77acb34a569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yFu5FOQPlUcnCekcuBicew.png"/></div></div></figure><p id="53b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">很有趣不是吗？现在让我们添加一个包含一些虚构的名称和数据的表格，看看它看起来有多漂亮</p><pre class="jp jq jr js fd jx jw jy jz aw ka bi"><span id="b144" class="kb kc hi jw b fi kd ke l kf kg">import streamlit as st</span><span id="c9cf" class="kb kc hi jw b fi kh ke l kf kg">import pandas as pd</span><span id="92e6" class="kb kc hi jw b fi kh ke l kf kg">st.title("Hello World")</span><span id="190d" class="kb kc hi jw b fi kh ke l kf kg">st.header("I love learning about Streamlit!")</span><span id="0285" class="kb kc hi jw b fi kh ke l kf kg">employees = pd.DataFrame({</span><span id="7837" class="kb kc hi jw b fi kh ke l kf kg">"Employee":['John Doe','Mark Doe','Steven Clark','Craign Payne','John Adams'],</span><span id="1044" class="kb kc hi jw b fi kh ke l kf kg">"Age":[28,26,25,31,44],</span><span id="b0d5" class="kb kc hi jw b fi kh ke l kf kg">"Department":['IT','Sales','Management','HR','IT'],</span><span id="960b" class="kb kc hi jw b fi kh ke l kf kg">"Salary":[20000,30000,40000,50000,60000]</span><span id="df90" class="kb kc hi jw b fi kh ke l kf kg">})</span><span id="e2ae" class="kb kc hi jw b fi kh ke l kf kg">st.table(employees)</span></pre><p id="f382" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行您的应用程序后，您将得到如下输出:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/6641f37feca07879ee21728568c54da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i181DWoTZ0uWr6MtmzFjzA.png"/></div></div></figure><p id="327a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击了解有关Streamlit组件<a class="ae kk" href="https://docs.streamlit.io/en/stable/getting_started.html" rel="noopener ugc nofollow" target="_blank">的更多信息</a></p><p id="c1e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">构建我们的股票应用</strong></p><p id="2d17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们快速浏览了一下这个库，并了解了我们可以利用它做些什么，接下来让我们开始构建我们的应用程序，以查看主要公司的有用股票数据</p><p id="095a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先让我们从这个<a class="ae kk" href="https://raw.githubusercontent.com/vega/datalib/master/test/data/stocks.csv" rel="noopener ugc nofollow" target="_blank">链接</a>中获取数据，然后我们将使用方法<code class="du jt ju jv jw b">read_csv()</code>通过pandas加载数据</p><pre class="jp jq jr js fd jx jw jy jz aw ka bi"><span id="9877" class="kb kc hi jw b fi kd ke l kf kg">import pandas as pd<br/>data_link = "<a class="ae kk" href="https://raw.githubusercontent.com/vega/datalib/master/test/data/stocks.csv" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/vega/datalib/master/test/data/stocks.csv</a>"</span><span id="b0bf" class="kb kc hi jw b fi kh ke l kf kg">stocks = pd.read_csv(data_link)<br/>print(stocks.head()) # prints first 5 rows<br/></span></pre><p id="8678" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们看看我们拥有的独特公司，这样我们就可以对我们的图表有一个愿景</p><p id="d126" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du jt ju jv jw b">stocks.symbol.unique()</code>这将返回我们['MSFT ' '阿姆兹' ' IBM ' '谷歌' ' AAPL']</p><p id="2116" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">添加侧边栏</strong></p><p id="df2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Streamlit允许我们添加一个非常漂亮的侧边栏区域，您可以在其中添加任何小部件，在这种情况下，我们添加一个选择框，并将使用用户选择的值来更改我们要显示的表格，这样会使我们的应用程序更加动态，所以让我们添加侧边栏和我们需要的小部件</p><pre class="jp jq jr js fd jx jw jy jz aw ka bi"><span id="b60f" class="kb kc hi jw b fi kd ke l kf kg">st.sidebar.title("Company Selector")<br/>choice = st.selectbox("Choose a company",stocks['symbol'].unique())</span></pre><p id="87ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">动态表头</strong></p><p id="256c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">优雅的做法是添加一个动态标题，告诉用户他们正在查看的公司数据，当用户从选择框中选择一家公司时，它会自动呈现</p><p id="5ca7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du jt ju jv jw b">st.title(f"Stock price data for {choice}")</code></p><p id="6baa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">添加我们的表</strong></p><p id="3862" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du jt ju jv jw b">st.table()</code>帮助我们添加一个漂亮的表格到我们的应用程序中，就像我们在上面看到的那样，所以我们将把我们的熊猫数据帧变成一个表格，很好地呈现给最终用户</p><p id="33fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们需要对数据帧进行排序，使该表代表一个包含单个公司数据的数据帧版本</p><p id="7b72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，使用<code class="du jt ju jv jw b">pd.loc</code>对数据帧进行排序，因此只显示MSFT数据<code class="du jt ju jv jw b">pd.loc[stocks['symbol'=='MSFT']]</code>，因此我们可以看到，我们使用此方法只包括符号列等于MSFT的数据帧行</p><p id="962f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">利用这些知识，我们将使用从选择框返回的值对传递给<code class="du jt ju jv jw b">st.table()</code>的数据帧进行排序，看起来像这样</p><pre class="jp jq jr js fd jx jw jy jz aw ka bi"><span id="748d" class="kb kc hi jw b fi kd ke l kf kg">st.table(stocks.loc[stocks['symbol']==choice,['date','price']])</span></pre><p id="48bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，每当用户改变他们选择的选项时，我们的表就会自动呈现</p><p id="1077" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">将所有这些放在一起</strong></p><p id="0e72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们把这些放在一起，看看这个图书馆有多神奇</p><pre class="jp jq jr js fd jx jw jy jz aw ka bi"><span id="e1b9" class="kb kc hi jw b fi kd ke l kf kg">import streamlit as st</span><span id="8d1b" class="kb kc hi jw b fi kh ke l kf kg">import pandas as pd</span><span id="8535" class="kb kc hi jw b fi kh ke l kf kg">from matplotlib import pyplot as plt</span><span id="3e47" class="kb kc hi jw b fi kh ke l kf kg">st.title("Visualize Stocks Prices")</span><span id="3b06" class="kb kc hi jw b fi kh ke l kf kg">data = "https://raw.githubusercontent.com/vega/datalib/master/test/data/stocks.csv"</span><span id="b89f" class="kb kc hi jw b fi kh ke l kf kg">stocks = pd.read_csv(data)</span><span id="beb1" class="kb kc hi jw b fi kh ke l kf kg">st.sidebar.title("Company Selector")</span><span id="ee95" class="kb kc hi jw b fi kh ke l kf kg">choice = st.sidebar.selectbox("Choose a company",stocks['symbol'].unique())</span><span id="50b4" class="kb kc hi jw b fi kh ke l kf kg">st.header(f"Stock price data for {choice}")</span><span id="689d" class="kb kc hi jw b fi kh ke l kf kg">st.table(stocks.loc[stocks['symbol']==choice,['date','price']])</span></pre><p id="133b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">非常感谢，如果你已经在这里制作了它，制作这个教程是如此有趣，我希望有人在某处会发现这篇文章在任何方面都是有用的，♥</p><p id="c9c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">有用链接</strong></p><p id="6fdc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kk" href="https://docs.streamlit.io/en/stable/" rel="noopener ugc nofollow" target="_blank">简化文档</a></p><p id="4358" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kk" href="https://pandas.pydata.org/docs/" rel="noopener ugc nofollow" target="_blank">熊猫文档</a></p><p id="ab5f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kk" href="https://devdotpy.medium.com/pandas-a-beginners-guide-cdf929f11052" rel="noopener">熊猫:初学者指南</a></p></div></div>    
</body>
</html>