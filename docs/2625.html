<html>
<head>
<title>Removing GitHub Repos with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 JavaScript 删除 GitHub Repos</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/removing-repos-with-javascript-baba54fabeb0?source=collection_archive---------22-----------------------#2021-05-13">https://medium.com/nerd-for-tech/removing-repos-with-javascript-baba54fabeb0?source=collection_archive---------22-----------------------#2021-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9fd66b41f4ef2eff9d45b6935cb7160e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SABnYfT-DtAuwGOgkqs79g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">乔舒亚·索蒂诺经由 unsplash.com<a class="ae iu" href="https://unsplash.com/photos/LqKhnDzSF-8" rel="noopener ugc nofollow" target="_blank">拍摄</a><a class="ae iu" href="https://unsplash.com/@sortino" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="66b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我最近完成了熨斗学校的沉浸式软件工程训练营。从兴奋中平静下来后，我很快切换到找工作模式。我的任务清单中有一部分是“清理”我的 GitHub。所以我用一些很酷的徽章和图片定制了我的<a class="ae iu" href="https://github.com/dpolcari18" rel="noopener ugc nofollow" target="_blank">个人资料</a>，然后意识到我有超过 300 个回复需要删除。</p><p id="ecba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些 repos 都是我们作为训练营的一部分建立的实验室，只有大约 15 个是我建立和/或合作的项目。我知道我需要摆脱这些，但不确定最好的方法是什么。GitHub 有一个分步指南<a class="ae iu" href="https://docs.github.com/en/github/administering-a-repository/deleting-a-repository" rel="noopener ugc nofollow" target="_blank">告诉你如何手动操作，分六步，其中一步是输入你的用户名和回购名称。</a></p><p id="d7ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你读过我以前的任何一篇文章，你可能会发现一个围绕着某种类型的<em class="jt">效率</em>和/或不做任何不必要的工作的主题。出于好奇，我计算了一下自己的时间，用了<strong class="ix hj">23 秒</strong>手动删除了一个回购。在这一点上，我认为必须有一个更好的方法来做到这一点。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="49c4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在谷歌上快速搜索了几下后，我被介绍给了 GitHub API，并毫不惊讶地发现了一种让<a class="ae iu" href="https://docs.github.com/en/rest/reference/repos#delete-a-repository" rel="noopener ugc nofollow" target="_blank">删除</a>你的回购请求的方法。我现在要做的就是测试我新学到的编程技能。我想到的是一个非常简单的 React 应用程序，它可以按名称获取并显示你所有的回购，并允许你一次检查多个回购，然后删除它们。我是这样做的:</p><ol class=""><li id="6eea" class="kb kc hi ix b iy iz jc jd jg kd jk ke jo kf js kg kh ki kj bi translated">为您的回购提出 GET 请求</li></ol><p id="2810" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">GitHub 在其 REST API 中提供了以下端点，用于检索特定用户的 repos 列表。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="fc58" class="kt ku hi kp b fi kv kw l kx ky">GET <!-- -->https://api.github.com<!-- -->/users/{username}/repos</span></pre><p id="2d58" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你所需要的是你的用户名来发出请求。下面是我的代码。</p><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/e37b63f97f1f1e7a1b90cef7aabd35fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IwI9GNIVvtrdry4GyIPKmA.png"/></div></div></figure><p id="988c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如你所见，当我的应用程序渲染时，我使用了<code class="du la lb lc kp b">useEffect</code>钩子来调用 fetch。我使用 Redux 进行状态管理，并将 repos 数组存储在 state 中。这完全是矫枉过正，我只是想复习一下 Redux，并且可能应该用 React state 来完成以保持简单。关于这一步的最后一个注意:GitHub 将结果限制在每页 100 个，这就是你看到<code class="du la lb lc kp b">page=${page}&amp;per_page=100</code>的原因。</p><p id="8c91" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.启用多选复选框</p><p id="280b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了保持简洁，我跳过了在屏幕上显示各个回复的步骤。一旦它们出现在那里，我就使用复选框将各个 repos 添加到我的 Redux 状态的新数组中，代码如下:</p><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/1a34923f5935725f8ed100f16700361e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4P-h1dw1zxjKz2ndJFLYw.png"/></div></div></figure><p id="4916" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.为您选择的回购提出删除请求</p><p id="e5bc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这一步花了大部分时间来解决。我要做的第一件事是在 GitHub 中创建一个 OAuth 令牌，允许我的程序删除我账户上的回购。遵循 GitHub 的这个<a class="ae iu" href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token" rel="noopener ugc nofollow" target="_blank">指南</a>并确保在选择范围和权限时选择<code class="du la lb lc kp b">delete_repo</code>。此外，请确保在单击关闭该页面之前将密钥复制到您的项目中，因为您将无法再次看到该密钥。</p><p id="f686" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我使用以下端点来发出删除请求。<code class="du la lb lc kp b">{owner}</code>是你的 GitHub 用户名，<code class="du la lb lc kp b">{repo}</code>只是回购名称。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="1922" class="kt ku hi kp b fi kv kw l kx ky">DELETE <!-- -->https://api.github.com<!-- -->/repos/{owner}/{repo}</span></pre><p id="fef8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对我来说，最棘手的部分是找出要使用的正确标题。我提出的大多数请求都使用了<code class="du la lb lc kp b">accept: 'application/json'</code>头，但是 GitHub 更喜欢你使用<code class="du la lb lc kp b">accept: 'application/vnd.github.v3+json'</code>。需要的另一个头是<code class="du la lb lc kp b">authorization: `token ${token}`</code>，其中 token 是上面创建的 OAuth 令牌。</p><p id="7705" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我把标题整理好了，剩下的就很容易了。我所要做的就是遍历我选择删除的 repos 数组，并提交删除请求。以下是我使用的代码:</p><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/cc9bd9c0201c4efd6303f1c7fe20902f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QFUhfgDCRGamZMBw8XSIfw.png"/></div></div></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="13a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了这一切，我终于把我的 300+回购减少到一个很好的可管理的数字，我用我认为大多数程序员更喜欢的方式做了这件事，用一个自动化的、可重用的解决方案，而不是蛮力的、耗时的方法。</p><p id="2ef6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">话虽如此，这个<em class="jt">确实比两个小时花了我更多的时间</em>，据我估计，手动的话我会花更多的时间。但这一次这不是重点。关键是我能够扩展我的编程技能来解决问题，并在这个过程中使用新的 API。谁知道呢，也许其他人会看到这个回购，并用它来清理他们的 GitHub。</p><p id="bd3d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一如既往，我很乐意在下面的评论中听到你们对这个话题的任何想法或建议！</p></div></div>    
</body>
</html>