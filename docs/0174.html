<html>
<head>
<title>Getting Started with AWS &amp; Terraform.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS &amp; Terraform入门。</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/getting-started-with-aws-terraform-293e9125dff?source=collection_archive---------0-----------------------#2020-06-16">https://medium.com/nerd-for-tech/getting-started-with-aws-terraform-293e9125dff?source=collection_archive---------0-----------------------#2020-06-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/759e6d20842dabd71a83b6e33bd99706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tF1Bn0mTGDtMvjbspSdvsg.jpeg"/></div></div></figure><h1 id="89ec" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是AWS？</h1><p id="da8e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi km translated"><span class="l kn ko kp bm kq kr ks kt ku di">一个</span> <strong class="jq hj"> <em class="kv"> mazon Web Services </em>或俗称AWS是一个提供公共云计算基础设施的平台。</strong>在AWS中，您可以在云上部署自己的应用程序。这意味着没有任何资源，如内存，CPU，硬盘等。您可以轻松托管您的WebApp、网站、移动应用等。在AWS云上。AWS最好的一点是它们便宜得多，因为它们在世界各地有250多个数据中心，所以它们在向客户交付应用程序方面要快得多。</p><h1 id="4ee9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是Terraform？</h1><p id="051f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi km translated">erraform是一个安全有效地构建、更改和版本化基础设施的工具。这意味着使用Terraform，您可以轻松地构建大型复杂基础架构，如公共云基础架构，并且可以非常轻松地管理它们。Terraform最棒的一点是，你不需要知道任何AWS命令，尤其是任何其他云计算命令来构建基础设施。Terraform有自己的语言叫做<strong class="jq hj"> HCL (HashiCorp配置语言)。现在，只要知道这种语言，你就可以创建任何云计算基础设施，比如AWS、GCP、AZURE、OpenStack等等。</strong></p><p id="517e" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">是的，在不知道任何云命令的情况下，我们可以创建整个云设置，这听起来可能不现实。但是我向你保证，在读完这篇文章后，你将会了解Terraform的力量。</p></div><div class="ab cl lb lc gp ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hb hc hd he hf"><h1 id="63d3" class="iq ir hi bd is it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn bi translated">因此，让我们首先直接研究AWS:</h1><p id="3d2c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">首先要做的事。让我们使用Terraform创建一个实例。你可以认为这个实例就像一个虚拟机，它将为我提供一个操作系统。首次登录AWS帐户时启动实例。接下来，转到services，然后是EC2，最后单击“running instances”。</p><p id="0e27" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">在下面的截图中，您会看到我没有运行任何实例。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/6e37853f3ad86f1cf767f90a27416b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hA7GAGE4vRllMoNdSXwjjw.png"/></div></div></figure><p id="7e6a" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">因此，我们只需点击AWS WebUI门户就可以轻松启动一个实例。但是我们要用地形来做。为什么是Terraform？因为在Terraform中，我们创建了一个代码，您可以将这个代码视为文档。现在，假设将来您需要再次启动一个新实例。因此，下一次我们可以使用Terraform通过一次点击轻松启动同一个实例，而不是手动操作。</p><p id="ae55" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">这是地形代码。我会解释它的每一点。我相信，在学习了这段代码之后，你将来编写任何Terraform代码都会得心应手。</p><p id="9424" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated"><strong class="jq hj">但在开始之前，我建议你浏览一下YouTube视频，并在你的系统中安装Terraform软件。一旦你完成了，我们就可以开始了。</strong></p><h1 id="8094" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">让我们看看Terraform网站上的文档:</h1><p id="ae2c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">如果你在网上搜索“Terraform AWS Provider ”,你会找到这个官方的Terraform文档。在这里，如果你阅读，你会知道在Terraform中，我们把每一个服务称为“提供者”。意味着您将何时构建基础架构，您希望在哪里构建？你喜欢在像AWS、GCP、AZURE等公共云上构建吗？或者在类似私有云的OpenStack中。因此，这里的提供商意味着您必须指定Terraform应该在哪里建立您的基础设施。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/5d81362273776703840a768c699e9ce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bsdfnllt4FY32V2wgRzTtQ.png"/></div></div></figure><p id="dc74" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">这是一个示例代码，它将在AWS云中创建一个实例。</p><figure class="lo lp lq lr fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><ul class=""><li id="4477" class="lu lv hi jq b jr kw jv kx jz lw kd lx kh ly kl lz ma mb mc bi translated">现在让我们看看这段代码里有什么。第一件事:“提供商”，我已经跟你说过了。下一个区域意味着在AWS中我们有许多可用区域，在这里您必须指定您希望在哪个AZ中启动您的实例。下一个概要文件意味着您必须在本地系统中为AWS凭证创建一个概要文件。你可以在YouTube上找到很多关于如何制作的教程。</li><li id="7a9c" class="lu lv hi jq b jr md jv me jz mf kd mg kh mh kl lz ma mb mc bi translated">AWS中的下一个资源意味着我们主要使用许多服务，因此这些资源意味着您想要使用哪些服务。因此，我选择“aws_instance ”,因为我们将启动一个实例。接下来，你要给出你作品的名字。为什么？因为每当我们在AWS中使用Terraform进行任何工作时，在完成工作后，next AWS会在我的Terraform中存储一些关于该特定工作的数据。现在，将来如果我们需要收集一些关于这项工作的信息，我们只需使用这个“myinstance”。这是一种变量。</li><li id="3c97" class="lu lv hi jq b jr md jv me jz mf kd mg kh mh kl lz ma mb mc bi translated">接下来启动实例，我们必须提供一些基本的东西，如你想使用哪个ami id。AMI的意思是亚马逊机器图像。意味着启动一个操作系统我们总是需要一个映像。这里我们使用了一个Linux映像。</li><li id="ef4a" class="lu lv hi jq b jr md jv me jz mf kd mg kh mh kl lz ma mb mc bi translated">下一个“实例类型”表示您想要创建哪种类型的实例。这里的类型意味着什么样的内存，CPU，网络带宽等。你愿意付出。因为我有一个免费帐户，这就是为什么我使用免费类型“t2.micro”。</li><li id="a858" class="lu lv hi jq b jr md jv me jz mf kd mg kh mh kl lz ma mb mc bi translated">下一个键名表示您想要使用哪个键。在这里，在提供密钥名之前，您应该在EC2中创建一个密钥对。只需转到EC2，key-pair中的下一个，并创建一个新密钥。接下来，为实例提供键名。你可以把它想象成你的电脑有一个用户id和密码来登录。因此，在未来，如果你想登录到实例，那么你将需要这个关键。</li></ul><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/920c8554b42ba4f1c3b4cae14e618d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_lZNSfRyw6ftvp1B_Erxg.png"/></div></div></figure><ul class=""><li id="540a" class="lu lv hi jq b jr kw jv kx jz lw kd lx kh ly kl lz ma mb mc bi translated">最后，“安全组”意味着你想提供哪种类型的安全。同样，在这里，您也必须转到EC2，接下来是安全组，然后创建一个安全组。</li></ul><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/a342964f8d571e09a13f47ff321d2494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTaFZiqGsoCRw1eLwwe78Q.png"/></div></div></figure><ul class=""><li id="48a4" class="lu lv hi jq b jr kw jv kx jz lw kd lx kh ly kl lz ma mb mc bi translated">接下来是标签，这是可选的，但在更大的基础架构中，我们可以借助这些标签来管理东西。</li></ul><h1 id="cd50" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">现在让我们使用Terraform构建这些实例:</h1><p id="9de8" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">所以，我现在一点一点告诉你你要做什么。你必须创建一个文件夹，在这个文件夹里写下这段代码，然后给出你的文件。tf扩展。接下来，您必须在该文件夹上运行terraform CMD。首先，您必须使用初始化Terraform</p><pre class="lo lp lq lr fd mi mj mk ml aw mm bi"><span id="f3ec" class="mn ir hi mj b fi mo mp l mq mr">terraform init</span></pre><p id="d90f" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">所以，这个命令将首先检查你正在使用的提供者，然后下载相应的插件。因为使用这些插件，Terraform可以与AWS交互。</p><p id="206c" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">接下来，验证您的代码是一个很好的实践。这意味着如果有任何语法错误，它会显示出来。为了这种用途</p><pre class="lo lp lq lr fd mi mj mk ml aw mm bi"><span id="ed9e" class="mn ir hi mj b fi mo mp l mq mr">terraform validate</span></pre><p id="6d4f" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">在下图中，你会看到我运行了这两个命令。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/39f1fd725be2764c90cff5e193ba219a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZk9lYgFX5CKgBFuNuspHQ.png"/></div></div></figure><p id="5f29" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">接下来，我们将使用最后一个CMD，这将创建我们完整的基础架构。CMD是</p><pre class="lo lp lq lr fd mi mj mk ml aw mm bi"><span id="4b7a" class="mn ir hi mj b fi mo mp l mq mr">terraform apply</span></pre><p id="248e" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">它会要求你输入是，所以输入“是”。另外，如果你不想每次申请时都键入yes，你可以使用</p><pre class="lo lp lq lr fd mi mj mk ml aw mm bi"><span id="6e5f" class="mn ir hi mj b fi mo mp l mq mr">terraform apply -auto-approve</span></pre><p id="8bf3" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">接下来，您将看到您的完整实例在AWS上启动。现在，如果您想要销毁实例或整个基础结构，请使用</p><pre class="lo lp lq lr fd mi mj mk ml aw mm bi"><span id="6949" class="mn ir hi mj b fi mo mp l mq mr">terraform destroy</span></pre><p id="bc6d" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">在下面这张图片中，你将能够看到如何去做。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/294c2c02e1f0cde1cb57e31e18b885e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oF_TTH-yY0i0EfWs93-k5w.png"/></div></div></figure><p id="16f9" class="pw-post-body-paragraph jo jp hi jq b jr kw jt ju jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl hb bi translated">这就是地形的力量。谢谢大家，结束了，拜拜👋。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/8c7f1f8215dc1aaecd1e708e7650e726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Piks8Tu6xUYpF4DU"/></div></div></figure></div></div>    
</body>
</html>