<html>
<head>
<title>Upcoming Enemy Wave- Game Dev Series 42</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">即将到来的敌人浪潮-游戏开发系列42</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/upcoming-enemy-wave-game-dev-series-42-469b33fad8aa?source=collection_archive---------34-----------------------#2021-06-06">https://medium.com/nerd-for-tech/upcoming-enemy-wave-game-dev-series-42-469b33fad8aa?source=collection_archive---------34-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f277" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目标:用有限的产卵数量创造一波又一波的敌人。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/a63744a49bcd915d690756f4c25da93e.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/1*klKIaqxiLWKgXb5E66lY8Q.gif"/></div></figure><p id="dc5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与有无限敌人的街机射击游戏相比，一波又一波的敌人会给玩家制造一个区域目标，也给我们的游戏一个适当的结局。</p><p id="95c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了制造攻击波，我们需要调整2个脚本。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h2 id="4907" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">产卵管理器</h2><p id="4512" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">在<strong class="ih hj"> SpawnManager </strong>中，我们将使用wave协程代替敌方产卵协程。为此，我们需要一些变量。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es ks"><img src="../Images/86433731eb5e81ece105c71e2b50c81f.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*0YOodWxRGq_AmnTIb2ffmQ.png"/></div></figure><p id="59e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过<strong class="ih hj">_ waves counts</strong>在检查器中设置波数。例如，如果你设置5，那么你应该有5个波。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/481e1613051e3e154f70fe3fe1f678e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*Lot_ZMo4EebjzbCmxnREGg.png"/></div></div></figure><p id="ab22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> _currentWave </strong>就是我们用来计数电流波的。当一波结束时，它会增加，我们将在后面的代码中添加它。</p><p id="4097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">_ enemy spawn</strong>用于统计已经繁殖了多少敌人。</p><p id="73b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了防止引起任何不可预测的错误，我们可以在<strong class="ih hj"> Start() </strong>中将<strong class="ih hj"> _currentWave </strong>的值设置为0。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es ky"><img src="../Images/0b2180e8b596b5927f7f0c51e64a965f.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*-aLJv4qnPuIx9Nx1QPwAqA.png"/></div></figure><p id="debd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了这三个变量，我们就能创造出我们的敌人波。</p><p id="9b41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个新的协程，并在其中设置一个while循环。在这个循环中，我们将增加当前波的数量，将产生的敌人设置为0。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kz"><img src="../Images/76132a98cc9fdc6b6f1aadd07a06a55e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*4qkujNloj5HSeccoYP7W7Q.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">不要忘记最后一行，否则你们的团结会崩溃。</figcaption></figure><p id="e608" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了开始产卵，我们还需要打开一个bool。然后使用这个bool as条件开始生成另一个while循环。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es le"><img src="../Images/d53abbabc973f747b881a7c4b3c10880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*HE5fAEkvHyfSrIbA2GUHIQ.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">同样，总是在一个循环中获得收益回报。</figcaption></figure><p id="0f87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个<strong class="ih hj">_ is spanning</strong>循环中，我们将使用3个部分作为wave spawning例程。</p><ul class=""><li id="1ee4" class="lf lg hi ih b ii ij im in iq lh iu li iy lj jc lk ll lm ln bi translated">如果繁殖的敌人数量少于波浪繁殖极限，保持每次繁殖。</li><li id="89e8" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">如果这波产卵结束，检查是否有任何敌人预置留在容器中。如果没有，波结束，将当前波计数增加1，然后将<strong class="ih hj">_ enemy spowned</strong>设置为0。</li><li id="1d2e" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">再次产卵循环。</li></ul><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lt"><img src="../Images/edbafe5932f8fb90f8388a560512918b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*-rr2bzCFR01BVgUeE1zqPQ.png"/></div></figure><p id="fc88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么我们就可以使用原来的敌人产卵代码作为新方法<strong class="ih hj"> SpawnEnemy() </strong>。这也是我们增加敌人数量的地方。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lu"><img src="../Images/17de37caf0d2104da6db5f632dc3108a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*La-5e56tCaG4G48_yqPl8Q.png"/></div></div></figure><p id="f722" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的波浪产卵几乎准备好了。<br/>最后一步是让布尔在<strong class="ih hj">start spanning()</strong>中开始产卵。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lv"><img src="../Images/e7de0fcaafcb9bfd635d777245e6b7ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*FtceJR_eVaP63zOQeTDOeg.png"/></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h2 id="2526" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">UIManager</h2><p id="6343" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">接下来是我们的UI。我们将使用户界面在每一波开始时闪烁当前的波数。</p><p id="8e5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们在<strong class="ih hj">画布</strong>中创建一个wave文本。并调整大小和位置。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lw"><img src="../Images/31b0207e41f5f13ce442434b895bbe60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oNz6g0n-ZztOaYSDaxClbw.png"/></div></div></figure><p id="fdbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并使用Canvas创建一个动画来制作波形文本的动画。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lx"><img src="../Images/0bbbec758fef2f1d6749aca69ed55cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*oe5QenMQuKQG4Cxcdpj5pw.gif"/></div></div></figure><p id="015e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Animator编辑器中，创建一个空状态作为默认状态，并将触发过渡设置为波形文本。因为我们的动画会停留5秒钟，所以将转换设置回默认状态。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ly"><img src="../Images/3a4fcf84ba66520e0b793a2258f7d260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yU-bMogocNBMq8tF7HajTw.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">带有动画触发器。</figcaption></figure><p id="d619" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在<strong class="ih hj"> UIManager </strong>中，为创建2个变量，并创建一个公共方法来控制它。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lz"><img src="../Images/6f89596d78f3a98fc959b725f475dab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*jdz5gqNTRbRXLAjztg4XNA.png"/></div></figure><p id="4e7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了这个公共方法，我们可以回过头来<strong class="ih hj"> SpawnManager() </strong>来调用它。</p><p id="6064" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在调用方法之前，我们还需要创建一个变量并调试它。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ma"><img src="../Images/d073c146f950f31aea334f8a9667a6dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*93cAHMPtpTpt0aPN_w0Emw.png"/></div></div></figure><p id="0f47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两个位置我们需要调用wave text。1是我们第一次增加当前的波数。<br/> 2是在我们一波消灭所有敌人之后的while循环。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mb"><img src="../Images/6e22bede139c686911664336b0f873f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*CXtW_HK3C8qj95pAb3HGUw.png"/></div></figure><p id="5ae1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">全部完成！是时候面对一波又一波的敌人了。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mc"><img src="../Images/7e381d3ebd839dc46be73e09816cb6fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wZZoyKVggu9ke_B-u8VOKg.gif"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="0a72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来:<a class="ae md" href="https://sj-jason-liu.medium.com/space-poison-incoming-game-dev-series-43-eb4ec025270d" rel="noopener">空间毒气来袭！</a></p></div></div>    
</body>
</html>