<html>
<head>
<title>Xamarin.Forms and Draggable View. The New Year Tale</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Xamarin。表单和可拖动视图。新年故事</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/xamarin-forms-and-draggable-view-the-new-year-tale-446632aa18d9?source=collection_archive---------0-----------------------#2021-12-31">https://medium.com/nerd-for-tech/xamarin-forms-and-draggable-view-the-new-year-tale-446632aa18d9?source=collection_archive---------0-----------------------#2021-12-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/f43ea512c05afc1b3e3870b3b89363bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3w50nvuUnuZLCz-QUBSlKQ.png"/></div></div></figure><div class=""/><div class=""><h2 id="3642" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">这是一个关于如何在Xamarin中制作可拖动视图的新年故事。表单应用程序。</h2></div><p id="ece7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi ke translated">从前，一个新的要求来到了童话世界。<em class="kn">“我们需要在一些控件的内部区域创建一个可拖动的按钮，”——</em>它说。“这没什么大不了的，”——一个开发者想道，但他不知道魔多的黑魔王并没有睡着。</p><p id="70fe" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><em class="kn">“我想让它在不同的项目和场景中可重用”——</em>他说——<em class="kn">“这就是为什么它应该允许放任何</em> <code class="du ko kp kq kr b"><em class="kn">View</em></code> <em class="kn">进去！”</em></p><p id="996f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">最后，新的可拖动视图的实现需求如下:</p><ul class=""><li id="1dcf" class="ks kt ht jk b jl jm jo jp jr ku jv kv jz kw kd kx ky kz la bi translated">创建从<code class="du ko kp kq kr b">ContentView</code>继承的新自定义控件，以提供放置任何内容的可能性。</li><li id="d516" class="ks kt ht jk b jl lb jo lc jr ld jv le jz lf kd kx ky kz la bi translated">由某个限制区域(他的父区域)进行拖动限制</li></ul><p id="1cfe" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">工作开始了…</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="b11e" class="ln lo ht bd lp lq lr ls lt lu lv lw lx iz ly ja lz jc ma jd mb jf mc jg md me bi translated">旧的好的自定义控件</h1><p id="65f4" class="pw-post-body-paragraph ji jj ht jk b jl mf iu jn jo mg ix jq jr mh jt ju jv mi jx jy jz mj kb kc kd hb bi translated">通常，实施始于众所周知的四个字:<code class="du ko kp kq kr b">public class DraggableView : ContentView {}</code>。但是我们需要定义哪些可绑定的属性呢？多亏了<code class="du ko kp kq kr b">ContentView</code>，我们已经可以设定任何的<code class="du ko kp kq kr b">Content</code>。<code class="du ko kp kq kr b">LimitArea</code>—我们需要限制我们的控制在家长控制内的转换！为此，我们需要一个新的模型— <code class="du ko kp kq kr b">DraggableArea</code>模型。</p><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="d70e" class="ln lo ht bd lp lq lr ls lt lu lv lw lx iz ly ja lz jc ma jd mb jf mc jg md me bi translated">双塔- Android和iOS平台渲染器</h1><p id="d1a6" class="pw-post-body-paragraph ji jj ht jk b jl mf iu jn jo mg ix jq jr mh jt ju jv mi jx jy jz mj kb kc kd hb bi translated">众所周知的自定义渲染器的基础已经完成，开发人员开始考虑如何通过父视图限制其转换。</p><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="9304" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><em class="kn">“我们需要处理一个长点击来开始拖动控件”——开发者说</em>。</p><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="3cd8" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><em class="kn">“我们没有物业被设置新的临时位置”</em> —一位开发商说。</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="b847" class="ln lo ht bd lp lq lr ls lt lu lv lw lx iz ly ja lz jc ma jd mb jf mc jg md me bi translated">阴影之地—拖动自定义控件的逻辑</h1><p id="3f65" class="pw-post-body-paragraph ji jj ht jk b jl mf iu jn jo mg ix jq jr mh jt ju jv mi jx jy jz mj kb kc kd hb bi translated">回到<code class="du ko kp kq kr b">DraggableView</code>，开发者不确定我们是否需要创建像Bindable这样的新属性。喝着啤酒沉思了很长时间后，他想到了一个解决方案— <em class="kn">“这应该是可绑定的属性，因为允许开发人员绑定和修改它们，而不需要修改定制的呈现器。”</em></p><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="59ea" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">之后，我们需要识别移动手势，以便在转换控件本身之前设置正确的<code class="du ko kp kq kr b">NewX</code>和<code class="du ko kp kq kr b">NewY</code>。</p><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="8708" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><em class="kn">“只剩下元素的翻译”</em> —开发者认为。</p><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="cfda" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">开发人员对完成的所有工作很满意，并开始测试他的控件内部的一个按钮…</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="623e" class="ln lo ht bd lp lq lr ls lt lu lv lw lx iz ly ja lz jc ma jd mb jf mc jg md me bi translated">怀疑和巨大的恐惧笼罩着刚铎城——按钮指令在两个平台上都不太好用。</h1><p id="7b5f" class="pw-post-body-paragraph ji jj ht jk b jl mf iu jn jo mg ix jq jr mh jt ju jv mi jx jy jz mj kb kc kd hb bi translated">开发人员心中充满了恐惧和怀疑，但解决方案是显而易见的。在阐明需求之后，他知道内部可能只有一个可点击的元素，不会更多。<br/> <em class="kn">“在那种情况下”——</em>他喊道<em class="kn">——“我们可以在我们的DraggableView中添加命令可绑定属性，只有当放置在其中的内容必须在用户点击它时做出响应时才使用。”</em></p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="a50c" class="ln lo ht bd lp lq lr ls lt lu lv lw lx iz ly ja lz jc ma jd mb jf mc jg md me bi translated">现在一切都很顺利，希望永远变得更好…</h1><blockquote class="mq mr ms"><p id="a843" class="ji jj kn jk b jl jm iu jn jo jp ix jq mt js jt ju mu jw jx jy mv ka kb kc kd hb bi translated">这是我们新年故事的快乐结局。特别感谢<a class="ae mw" href="https://www.linkedin.com/in/andrii-kharechko-760356ba/?originalSubdomain=pl" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> Andrii Kharechko </strong> </a>。</p></blockquote><p id="2d02" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">下面你可以找到XF &amp; Android &amp; iOS的所有代码😉</p><div class="hh hi ez fb hj mx"><a href="https://www.linkedin.com/in/andrii-kharechko-760356ba/?originalSubdomain=pl" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hu fi z dy nc ea eb nd ed ef hs bi translated">Andrii Kharechko -高级Xamarin软件开发人员- Nexio管理有限公司| LinkedIn</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">在世界上最大的职业社区LinkedIn上查看Andrii Kharechko的个人资料。安德里有3份工作列在…</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">www.linkedin.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl hp mx"/></div></div></a></div><figure class="mk ml mm mn fd hk"><div class="bz dy l di"><div class="mo mp l"/></div></figure></div></div>    
</body>
</html>