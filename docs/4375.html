<html>
<head>
<title>Promises Snippets in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的承诺片段</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/promises-snippets-in-javascript-40a7faea8d6b?source=collection_archive---------5-----------------------#2021-07-18">https://medium.com/nerd-for-tech/promises-snippets-in-javascript-40a7faea8d6b?source=collection_archive---------5-----------------------#2021-07-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5e65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JavaScript中的承诺看似简单，但细节处理起来很复杂。让我们通过一些片段来分析输出。我建议你仔细想想这些片段，想象一下它会打印出什么。</p><h1 id="f4f1" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">1.承诺创建和解决</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kb"><img src="../Images/790914c06aa8c99190a9b5ea8b67f172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhE5CkEjYcbdO0lnaacNAw.png"/></div></div></figure><h2 id="eb6f" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="eb77" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">第1步<br/>第3步<br/>第2步</p><h2 id="3a01" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="b932" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">步骤1 </strong>当我们创建承诺时，承诺中的函数执行并打印它。</p><p id="fd88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步</strong>第二行因为涉及到解决承诺，所以推迟到以后执行。第三行执行并打印。</p><p id="3cad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2 </strong>由于没有要执行的内容，promise在下一次执行时解析并打印解析的数据<strong class="ih hj">。</strong></p><h1 id="bd7e" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">2.拒绝承诺</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lg"><img src="../Images/e362a3e95b92c120c09575ce137d030c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eOPHcEPkHEPQIeKJ7f_uuw.png"/></div></div></figure><h2 id="bb42" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="d81a" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">第1步<br/>第3步<br/>未捕获(承诺中)错误:第2步</p><h2 id="29f0" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="533c" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">步骤1 </strong>和<strong class="ih hj">步骤3 </strong>参见片段1</p><p id="274a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里要注意的有趣的事情是reject并没有立即抛出错误。当有人试图访问<strong class="ih hj">时，它会抛出错误。然后</strong>。错误没有处理程序，所以它在控制台中打印出来。</p><h1 id="c42e" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">3.捕捉被拒绝的承诺</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lh"><img src="../Images/784d474dee73f3ff67892e4536a0ca58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FNueroXCTnXaLVUGKKTy9g.png"/></div></div></figure><h2 id="74c5" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="1728" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">捕捉步骤2中的步骤1 <br/>步骤3 <br/></p><h2 id="c3e3" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="d2c5" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">步骤1 </strong>和<strong class="ih hj">步骤3 </strong>参见片段1</p><p id="8c79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在捕捉步骤2 </strong>中，我们已经为<strong class="ih hj">承诺编写了捕捉，然后</strong>错误在那里被捕捉并打印出来。</p><h1 id="2a93" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">4.处理拒绝</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es li"><img src="../Images/17238b1cea413234dfbf6061a5369419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aiI0xyNrXeO1DPk7Z_WYuw.png"/></div></div></figure><h2 id="cbdc" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="1cae" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">拒绝步骤2中的步骤1 <br/>步骤3 <br/></p><h2 id="9b74" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="4279" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">步骤1 </strong>和<strong class="ih hj">步骤3 </strong>参考片段1</p><p id="a91a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在拒绝步骤2中，</strong>有一个<strong class="ih hj"> promise.then拒绝的处理程序。</strong>不会调用handleCatch，因为错误已经由handleRejected处理。</p><h1 id="bee6" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">5.链接拒绝</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lj"><img src="../Images/d449c8d1b340ae03fbc918cf02610abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Njfr3X_pUuEaXHDpYBcS9Q.png"/></div></div></figure><h2 id="49bc" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="ca6e" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">步骤1 <br/>步骤3 <br/>中被拒绝的步骤2 <br/>步骤4</p><h2 id="e5b2" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="4936" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">步骤1 <br/>步骤3 <br/>在被拒绝的步骤2中，</strong>参考片段5</p><p id="ca3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第四步，</strong>每隔<strong class="ih hj">。然后</strong>回一个承诺，可以被链。即使承诺被拒绝，handleRejected也返回步骤4。这可以作为正常的承诺。这是一种从错误中恢复的方法。</p><h1 id="b401" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">6.承诺.决心</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lk"><img src="../Images/ce47d4c5792566b92ebdd82102fda0e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qQNTvILVheC-5aJngTyAw.png"/></div></div></figure><h2 id="196d" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="b011" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">第三步<br/>第一步</p><h2 id="40ad" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="de80" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">这类似于代码片段1。Promise.resolve(“步骤1”)返回一个承诺。当它解决时，它给出步骤1。</p><h1 id="3a57" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">7.承诺.拒绝</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ll"><img src="../Images/f4c187886a81442c9fa5b874441552ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CKz3M77Xvt_ie79ZVxaKCA.png"/></div></div></figure><h2 id="1005" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="29b7" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">拒绝步骤1中的步骤3 <br/></p><h2 id="004b" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="8370" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">这类似于我们在代码片段2中看到的创建一个承诺并拒绝它。我们可以使用一条语句来创建状态为“已拒绝”的承诺。</p><h1 id="64ab" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">8.处理完成时抛出错误</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lm"><img src="../Images/6030c62428a417c650919e7c153d208b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9S29KkTSrdRyV6apC4CNGQ.png"/></div></div></figure><h2 id="0ff1" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="3ac7" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">捕捉步骤1中的步骤3 <br/></p><h2 id="d4e3" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="1c28" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">在履行承诺的过程中出现错误。因此，这个问题被称为“捕获”。由于handleFulfilled中的错误，未调用有趣的handleRejected，调用了handleCatch。</p><h1 id="6576" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">9.创建承诺时出现错误</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lm"><img src="../Images/0b02d3380161084c04734dd2246254ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4l60I2s_yDHFKLGtF0yLg.png"/></div></div></figure><h2 id="721d" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">输出</h2><p id="aa6a" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">拒绝步骤1中的步骤3 <br/></p><h2 id="a77a" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="2c57" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">创建承诺时出现错误。因为在创建承诺本身时抛出了错误，所以调用了handleRejected。</p><h1 id="2952" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">10.最后与链接</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lk"><img src="../Images/a352da93e6c5962bf8ef8f7f963d041a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_bfKi8nZ5ApwGkT0-sFgrg.png"/></div></div></figure><p id="15aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">输出</strong></p><p id="3299" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第1步<br/>终于到了<br/> 15</p><h2 id="984e" class="kn je hi bd jf ko kp kq jj kr ks kt jn iq ku kv jr iu kw kx jv iy ky kz jz la bi translated">理由</h2><p id="1b74" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">。最后,</strong>可以与承诺链接，并在其所有先前的链接被执行后被执行。</p><p id="b0b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个承诺.然后返回另一个承诺，并且可以被链接。因为我们已经两次返回数据+ 5。结果是15。</p></div></div>    
</body>
</html>