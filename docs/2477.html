<html>
<head>
<title>Deep Dive into Thanos-Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入灭霸——第二部分</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/deep-dive-into-thanos-part-ii-8f48b8bba132?source=collection_archive---------0-----------------------#2021-05-08">https://medium.com/nerd-for-tech/deep-dive-into-thanos-part-ii-8f48b8bba132?source=collection_archive---------0-----------------------#2021-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4a71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用灭霸和普罗米修斯操作员监控Kubernetes的工作负载</p><p id="59f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文的第一部分<a class="ae jd" href="https://pavan1999-kumar.medium.com/deep-dive-into-thanos-part-i-f72ecba39f76" rel="noopener"><strong class="ih hj"><em class="je"/></strong></a>中，我们已经了解了灭霸的各种组件及其用例。在第二部分中，我们将使用GCS ( Google云存储)配置灭霸，并了解如何使用灭霸将指标保留更长时间。我们还将配置Grafana使用灭霸查询前端来可视化来自不同集群(灭霸查询)的图形。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/1a7403fbe4dcd9f0dd28139c15bdae3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d3sRGfvr2OALgWYsFruVwA.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">图片来源:<a class="ae jd" href="https://thanos.io/" rel="noopener ugc nofollow" target="_blank">灭霸网站</a></figcaption></figure><h1 id="5eec" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">整个故事是关于什么的？(TLDR)</h1><ol class=""><li id="a6c0" class="kt ku hi ih b ii kv im kw iq kx iu ky iy kz jc la lb lc ld bi translated">使用Bitnami舵图安装灭霸。</li><li id="0b6e" class="kt ku hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">将灭霸配置为使用GCS作为其对象存储。</li></ol><h1 id="5927" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">先决条件</h1><ol class=""><li id="2c97" class="kt ku hi ih b ii kv im kw iq kx iu ky iy kz jc la lb lc ld bi translated">Kubernetes集群(可以是本地、AKS、EKS、GKE、Kind)。</li><li id="c02e" class="kt ku hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">一个GCP账户(将区块推给GCS)。</li></ol><h1 id="71db" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">故事资源</h1><ol class=""><li id="29b6" class="kt ku hi ih b ii kv im kw iq kx iu ky iy kz jc la lb lc ld bi translated">GitHub链接:<a class="ae jd" href="https://github.com/pavan-kumar-99/medium-manifests" rel="noopener ugc nofollow" target="_blank">https://github.com/pavan-kumar-99/medium-manifests</a></li><li id="8cc4" class="kt ku hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">GitHub分支:<a class="ae jd" href="https://github.com/pavan-kumar-99/medium-manifests/tree/thanos" rel="noopener ugc nofollow" target="_blank"> thanos </a></li></ol><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es lj"><img src="../Images/2ed052aca200eb840dae00ac19348d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S96iayWtSZaV5p01CBi_Vw.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">图片来源:<a class="ae jd" href="https://thanos.io/" rel="noopener ugc nofollow" target="_blank">灭霸</a></figcaption></figure><p id="0c23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在Kubernetes集群中安装灭霸</strong></p><p id="291f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，在您的Kubernetes集群中安装灭霸有多种方法。您可以选择使用<strong class="ih hj"/><a class="ae jd" href="https://github.com/thanos-io/kube-thanos" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="je">kube-thanos</em></strong></a>来安装它们，通过参考相应组件的灭霸命令来写下您自己的Kubernetes清单/舵图，通过Bitnami的灭霸舵图来安装它(本文的范围)。在我们安装灭霸集群之前，让我们安装启用了灭霸边车的普罗米修斯。灭霸边车将负责将TSBD块推送到对象存储，如GCS、AWS S3。</p><p id="1c0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用Prometheus操作器安装Prometheus和Grafana。</strong></p><p id="c500" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们安装Prometheus操作员之前，我们必须为GCP服务帐户创建一个密码，以便我们的灭霸边车能够与铲斗通信。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lk ll l"/></div></figure><pre class="jg jh ji jj fd lm ln lo lp aw lq bi"><span id="dc75" class="lr jw hi ln b fi ls lt l lu lv">$ git clone <a class="ae jd" href="https://github.com/pavan-kumar-99/medium-manifests.git" rel="noopener ugc nofollow" target="_blank">https://github.com/pavan-kumar-99/medium-manifests.git</a> \<br/>-b thanos</span><span id="9e66" class="lr jw hi ln b fi lw lt l lu lv">$ cd medium-manifests/</span></pre><p id="4a79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建一个名为<a class="ae jd" href="https://gist.github.com/pavan-kumar-99/a73e7ddb64096bbf46c49632ccb301ac" rel="noopener ugc nofollow" target="_blank">thanos-sidecar-secret . YAML</a>的文件。这将包含关于对象存储类型、GCS存储桶名称以及用于与GCP通信的GCP服务帐户的详细信息。一旦文件的值被替换，让我们从文件中创建一个秘密。</p><blockquote class="lx ly lz"><p id="af1d" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj">ku bectl create secret generic thanos-GCP-config—from-file = thanos . YAML =</strong><a class="ae jd" href="https://gist.github.com/pavan-kumar-99/a73e7ddb64096bbf46c49632ccb301ac" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">thanos-sidecar-secret . YAML</strong></a></p></blockquote><p id="a6f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，Prometheus Operator安装中不启用灭霸。让我们写一个覆盖文件来覆盖默认值并安装灭霸边车。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lk ll l"/></div></figure><pre class="jg jh ji jj fd lm ln lo lp aw lq bi"><span id="466e" class="lr jw hi ln b fi ls lt l lu lv">$ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts</span><span id="9ed5" class="lr jw hi ln b fi lw lt l lu lv">$ helm repo update</span><span id="3e3b" class="lr jw hi ln b fi lw lt l lu lv">$ helm install prom-thaons prometheus-community/kube-prometheus-stack -f <a class="ae jd" href="https://gist.github.com/pavan-kumar-99/df4f75f0566a9ff8ae3dcff8220baae2" rel="noopener ugc nofollow" target="_blank">prometheus-operator-thanos.yaml</a></span></pre><p id="0d45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您应该看到Prometheus、Grafana和其他组件已经安装完毕。现在让我们检查thanos-sidecar集装箱的日志。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es md"><img src="../Images/a0151b0686290bc979936a4f5f7c4554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPXEFKpWM1cDk76HbY2O0g.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated"><strong class="bd jx">kubectl logs Prometheus-prom-thaons-kube-Prometheus-Prometheus-0-c thanos-sidecar</strong></figcaption></figure><p id="3aa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们使用Bitnami的舵图安装灭霸集群。我已经使用Bitnami的Helm chart为灭霸集群的安装创建了一个定制的value.yaml文件。这个自定义的values.yaml文件将有助于简化配置。通过参考完整的values.yaml文件<a class="ae jd" href="https://github.com/bitnami/charts/blob/master/bitnami/thanos/values.yaml" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">在此</strong> </a>随意添加任何其他所需值。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lk ll l"/></div></figure><pre class="jg jh ji jj fd lm ln lo lp aw lq bi"><span id="f526" class="lr jw hi ln b fi ls lt l lu lv">$ helm repo add bitnami https://charts.bitnami.com/bitnami</span><span id="a240" class="lr jw hi ln b fi lw lt l lu lv">$ helm repo update</span><span id="57be" class="lr jw hi ln b fi lw lt l lu lv">$ helm install thanos bitnami/thanos -f thanos-values.yaml </span></pre><p id="827e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您现在应该看到正在安装灭霸集群组件。所有这些都应该在一段时间内准备好。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es me"><img src="../Images/0ac6eac027d493eb549cd893e18c47ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*15iy9Qlkiy5f3BgfU1YpOA.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">灭霸组件</figcaption></figure><p id="d615" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">没有进一步的原因，让我们通过端口转发来访问thanos-query-frontend。(请注意，这种类型的安装仅适用于演示/本地目的。在生产中，用户可能希望通过启用了TLS的入口控制器来访问它)。</p><blockquote class="lx ly lz"><p id="25af" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj">ku bectl port-forward SVC/thanos-query-frontend 9091:9090—address = 0 . 0 . 0 . 0</strong></p></blockquote><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mf"><img src="../Images/6f6c1f88c04122b7c32b886485115653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c18fLEiubiKI_8FqAuaJHA.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">灭霸前端查询</figcaption></figure><p id="2991" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将在这里暂停我的博客。再等4天，这样我的TSBD数据块就会被推入GCS存储桶，然后恢复可用数据。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es mg"><img src="../Images/6ce0b9cdb38a977123421d94234bcdd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/0*q-GCNd33xjTSV4fU.gif"/></div><figcaption class="jr js et er es jt ju bd b be z dx translated">等待4天，以便积累数据。</figcaption></figure><p id="fcf8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我现在有了过去4天的可用数据。现在让我们连接到Grafana，然后添加灭霸·奎瑞尔作为Prometheus源(这可以通过在创建Grafana本身时添加数据源URL来自动完成。我手动显示这个只是为了更好地理解)。让我从浏览器进入Grafana。(凭证:管理员/prom-操作员)。</p><blockquote class="lx ly lz"><p id="9584" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj"> kubectl端口转发SVC/prom-thaons-grafana 8080:80—地址=0.0.0.0 </strong></p></blockquote><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mh"><img src="../Images/7937debbe5b0a2459d634bfee50105fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SHHId5ONOnnxamlaJz3R7Q.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">Grafana数据源</figcaption></figure><p id="37db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的URL是灭霸查询前端的URL。该IP是<strong class="ih hj"> thanos-query-frontend </strong>服务的集群IP。IP可以通过以下方式获得</p><blockquote class="lx ly lz"><p id="64bb" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj">✔root @ master::~ # k get SVC thanos-query-frontend</strong></p><p id="1ff5" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT AGE</strong></p><p id="682d" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj">thanos-query-frontend cluster IP 10 . 108 . 238 . 31&lt;none&gt;9090/TCP 4d 23h</strong></p></blockquote><p id="010f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您添加了具有相应端口的IP，您应该会得到一个弹出窗口，提示数据源正在工作。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mi"><img src="../Images/77082c69c00ebada883326f253f2c2dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MYjq1hZBzKwMwZdCat0lSA.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">添加了Grafana数据源</figcaption></figure><p id="9633" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，当你安装Grafana与普罗米修斯运营商，你应该得到一些默认仪表板。这些仪表板监控您的控制面板组件和资源，如集群中的pod和网络使用情况。一个这样的仪表板是<strong class="ih hj">计算资源/节点(pod)</strong>。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mf"><img src="../Images/c1c93f0381c666e65a18adda55bf38ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-xqwPwu_ThoBbKp1RvkHNg.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">显示过去4天指标的Grafana仪表板</figcaption></figure><p id="48dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们关闭Prometheus Pods，以验证过去4天的指标是否仍然显示。在此之前，让我们先验证一下过去5分钟的指标。我们还可以看到过去五分钟的指标。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mj"><img src="../Images/7012a9211c15f9b8ce5e827f7e97ed6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K65WBhqQsadRCsMw9SV2yw.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">过去5分钟的指标。</figcaption></figure><p id="32d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我现在将关闭我的Kubernetes集群(托管Kubernetes集群的虚拟机),并在5分钟后返回。当我打开虚拟机时，默认情况下所有的pod也将重新启动(重新安排)。</p><p id="6dff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我回来了。我现在将打开我的Kubernetes集群来验证过去30分钟的指标。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mk"><img src="../Images/c9d37df2956131b9a0e193a498b83a87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtiUhHLTnsIol6JIj88dqA.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">普罗米修斯舱重启时数据丢失。</figcaption></figure><p id="2656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是当pod重新启动时，指标发生了什么变化呢？<strong class="ih hj">没错，这就是我想要展示的。虽然我们为HA设置了灭霸，但TSBD块每2小时推一次。</strong>同时，如果Prometheus pod重新启动，2小时内的数据将会丢失。所以我们总是建议为普罗米修斯本身创建一个PV。现在让我们升级舵图，但是现在让我们也将永久卷添加到我们的Prometheus副本中。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="6762" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我执行了头盔升级，我现在可以找到我的卷连接到吊舱。</p><blockquote class="lx ly lz"><p id="9d2a" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj">头盔升级-I prom-thaons Prometheus-community/kube-Prometheus-stack-f prom-operator . YAML</strong></p></blockquote><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ml"><img src="../Images/44c62dd16ed0b55fc2d8291c6b7bdf73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqqWBpUpa8KqK3Uu_XK4fg.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">普罗米修斯吊舱有聚氯乙烯</figcaption></figure><p id="33be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我重启普罗米修斯舱。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mm"><img src="../Images/6b8409166fa8702f41fd10af788ba2e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u0fh5_99c85oQegGWnLc7w.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">重启了豆荚</figcaption></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mn"><img src="../Images/3404633c24d69951bdd22f21a9d713cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XjK50veIi_WyqOW64EMREw.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">数据保留在永久卷中</figcaption></figure><p id="7056" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们检查一下GCS中存储的数据块。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mo"><img src="../Images/777a40a8702803ac19a0d056b1735b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zdcm0wNbMUmBlLRRI1cw_w.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">灭霸·边车上传的TSBD街区</figcaption></figure><p id="c1b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以利用作为灭霸安装的一部分安装的bucketweb工具，从Web UI检查bucket块。</p><blockquote class="lx ly lz"><p id="3da4" class="if ig je ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><strong class="ih hj"> kubectl端口转发svc/thanos-bucketweb 8080:8080 —地址=0.0.0.0 </strong></p></blockquote><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mp"><img src="../Images/5fff60ff16913d1a764e5446a14b6790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r_4aTNPPmddWkaA66Xm77A.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">灭霸桶形网</figcaption></figure><h2 id="499f" class="lr jw hi bd jx mq mr ms kb mt mu mv kf iq mw mx kj iu my mz kn iy na nb kr nc bi translated">GKE工作量标识</h2><p id="f774" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq nd is it iu ne iw ix iy nf ja jb jc hb bi translated">如果您想使用GKE工作负载标识，请遵循此处<a class="ae jd" href="https://github.com/pavan-kumar-99/medium-manifests/blob/thanos/GKE/sa_mapping.sh" rel="noopener ugc nofollow" target="_blank">指定的步骤</a>，并使用此处<a class="ae jd" href="https://github.com/pavan-kumar-99/medium-manifests/tree/thanos/GKE" rel="noopener ugc nofollow" target="_blank">的helm values.yaml文件</a>。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ng"><img src="../Images/bcfa3eb35bb51004d94d8c4576a675b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HhkcGYQnGFdB54jDgWs8CQ.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">灭霸GKE IAM(工作量身份)</figcaption></figure><h1 id="9ae3" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="a08e" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq nd is it iu ne iw ix iy nf ja jb jc hb bi translated">因此，在灭霸和普罗米修斯的帮助下，人们可以建立一个高可用性指标聚合解决方案。虽然有许多其他安装方法来安装灭霸，探索它们也将有助于您了解如何配置每个组件。最初，我很难理解灭霸的每一个组成部分。但是单独探索每一个部分让我对灭霸有了更深刻的了解。欢迎在评论区分享你和灭霸的经历。</p><p id="4512" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直到下一次…..</p><h1 id="430f" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">被推荐的</h1><div class="nh ni ez fb nj nk"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/introduction-to-crossplane-2f873ae0f9f3"><div class="nl ab dw"><div class="nm ab nn cl cj no"><h2 class="bd hj fi z dy np ea eb nq ed ef hh bi translated">交叉平面简介</h2><div class="nr l"><h3 class="bd b fi z dy np ea eb nq ed ef dx translated">如何使用Kubernetes清单和Crossplane在云上创建任何资源。</h3></div><div class="ns l"><p class="bd b fp z dy np ea eb nq ed ef dx translated">medium.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny jp nk"/></div></div></a></div><div class="nh ni ez fb nj nk"><a href="https://faun.pub/introduction-to-bitnami-sealed-secrets-bb5ae74d9a25" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab dw"><div class="nm ab nn cl cj no"><h2 class="bd hj fi z dy np ea eb nq ed ef hh bi translated">比特纳米密封秘密介绍</h2><div class="nr l"><h3 class="bd b fi z dy np ea eb nq ed ef dx translated">如何使用Sealed Secrets和Kubese在GitHub中存储您的秘密</h3></div><div class="ns l"><p class="bd b fp z dy np ea eb nq ed ef dx translated">faun.pub</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny jp nk"/></div></div></a></div><div class="nh ni ez fb nj nk"><a href="https://www.techmanyu.com/kubernetes-security-with-kube-bench-and-kube-hunter-6765bf44ebc6" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab dw"><div class="nm ab nn cl cj no"><h2 class="bd hj fi z dy np ea eb nq ed ef hh bi translated">Kubernetes安全与Kube-bench和Kube-hunter</h2><div class="nr l"><h3 class="bd b fi z dy np ea eb nq ed ef dx translated">使用Kube-bench和Kube-hunter在Kubernetes集群中进行安全检查</h3></div><div class="ns l"><p class="bd b fp z dy np ea eb nq ed ef dx translated">www.techmanyu.com</p></div></div><div class="nt l"><div class="oa l nv nw nx nt ny jp nk"/></div></div></a></div></div></div>    
</body>
</html>