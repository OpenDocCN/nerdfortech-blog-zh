<html>
<head>
<title>Working with Files and Directories in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 中使用文件和目录</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/working-with-files-and-directories-in-python-2bd33cb993c2?source=collection_archive---------0-----------------------#2022-01-04">https://medium.com/nerd-for-tech/working-with-files-and-directories-in-python-2bd33cb993c2?source=collection_archive---------0-----------------------#2022-01-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="db19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python 使得动态处理文件变得非常容易。这里我列出了一些最常用的处理文件的 python 内置模块和函数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/255467ba225fe40a06898373e28488fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q7l4aZmeE0Pcc4HcGDtRbg.jpeg"/></div></div></figure><h2 id="d8b5" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">读取文件</h2><p id="6785" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated"><strong class="ih hj">方法一:</strong></p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="79f2" class="jp jq hi kq b fi ku kv l kw kx">file = open("my_file.txt")<br/>contents = file.read()<br/>print(contents)<br/>file.close()</span></pre><p id="4b7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">方法二:</strong></p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="edeb" class="jp jq hi kq b fi ku kv l kw kx">with open("my_file.txt") as file:<br/>    contents = file.read()<br/>    print(contents)</span></pre><p id="7b19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用的第二种方法是 with open(…) as …”模式。在处理非托管资源(如文件流)时，使用“with”关键字。</p><p id="879e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在方法 1 中，我们在读取文件后显式关闭它。但是，“with”关键字本身负责“exit()”方法。</p><blockquote class="ky kz la"><p id="25e9" class="if ig lb ih b ii ij ik il im in io ip lc ir is it ld iv iw ix le iz ja jb jc hb bi translated">为了节省处理时间，我们用 with。不需要通过给 file.close()来关闭文件。“With”会自动关闭文件</p></blockquote><h2 id="bde2" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">写入文件</h2><p id="3099" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">默认情况下，open 关键字的模式是“只读”。要写入，我们需要使用“写入”模式。</p><p id="a745" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:它将删除文件中的旧内容，并用指定的新内容替换它。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="ce5c" class="jp jq hi kq b fi ku kv l kw kx">with open("my_file.txt", mode ="w") as file:<br/>    file.write("New Text.")</span></pre><h2 id="90e4" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">附加到文件</h2><p id="173b" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">类似地，为了追加到文件中，我们将模式从“w”改为“a”。文件中的旧内容保持不变，而指定的新内容与旧内容一起被追加或添加到文件中。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="f2a8" class="jp jq hi kq b fi ku kv l kw kx">with open("my_file.txt", mode ="a") as file:<br/>    file.write("\nAppended content")</span></pre><h2 id="92a0" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">创建新文件</h2><p id="45de" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">在处理文件时,“with”关键字是一个多用途关键字。如果文件不存在，它会自动创建一个新文件。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="b100" class="jp jq hi kq b fi ku kv l kw kx">with open("code_with_ayush.txt", mode = "w") as file:<br/>    file.write("new text")</span></pre><h2 id="54b0" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">删除文件</h2><p id="10f0" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">要删除文件，我们首先要导入操作系统模块。Python 中的<strong class="ih hj"> OS 模块提供了与操作系统交互的功能。操作系统属于 Python 的标准实用程序模块。</strong></p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="6b66" class="jp jq hi kq b fi ku kv l kw kx">import os<br/><br/>delete_this_file = '&lt;path of the file&gt;'<br/>os.remove(delete_this_file)</span></pre></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="e82f" class="lm jq hi bd jr ln lo lp jv lq lr ls jz lt lu lv kc lw lx ly kf lz ma mb ki mc bi translated">使用目录</h1><h2 id="331d" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">获取当前路径</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="02e7" class="jp jq hi kq b fi ku kv l kw kx">import os<br/>print(os.getcwd())</span></pre><p id="fd85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">os.getcwd() →获取当前目录</p><h2 id="4dba" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">创建一个新目录</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="3920" class="jp jq hi kq b fi ku kv l kw kx">os.mkdir("new_dir")</span></pre><p id="b4be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">os.mkdir →创建一个新目录</p><h2 id="8aee" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">更改目录</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="f9c2" class="jp jq hi kq b fi ku kv l kw kx">os.chdir("new_dir")</span></pre><h2 id="10de" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">在目录中创建一个新文件</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="0fa6" class="jp jq hi kq b fi ku kv l kw kx">open('index.html', 'x')</span></pre><p id="3b53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“x”类似于“w”。但是对于“x”，<strong class="ih hj">如果文件存在，抛出 filexistserror</strong>。对于“w ”,它将简单地创建一个新文件/截断现有的文件。</p><h2 id="c7f1" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">在路径层次结构中执行一步打包</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="9af7" class="jp jq hi kq b fi ku kv l kw kx">os.chdir("../new_dir")</span></pre><h2 id="836e" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">列出目录的内容</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="c756" class="jp jq hi kq b fi ku kv l kw kx">os.listdir("new_dir/website")</span></pre><p id="5d81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">listdir →方法列出目录中的所有内容</p><h2 id="d5fe" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">检查内容是子目录还是文件</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="60d7" class="jp jq hi kq b fi ku kv l kw kx">for name in os.listdir(dir):<br/>    fullname = os.path.join(dir,name)<br/>    if os.path.isdir(fullname):<br/>        print(f"{fullname} is a directory")<br/>    else:<br/>        print(f"{fullname} is a file")</span></pre><p id="c0ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> os </strong>。<strong class="ih hj">路径</strong>。<strong class="ih hj">智能连接<strong class="ih hj"> Python 中的</strong>()方法连接</strong>一个或多个<strong class="ih hj">路径</strong>组件。</p><h2 id="2dfc" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">获取绝对路径</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="942f" class="jp jq hi kq b fi ku kv l kw kx">def parent_directory():<br/><br/>  # Create a relative path to the parent<br/>  # of the current working directory<br/>  relative_parent = os.path.join(os.getcwd(), os.pardir)<br/>  # Return the absolute path of the parent directory<br/>  return os.path.abspath(relative_parent)<br/><br/>print(parent_directory())</span></pre><p id="ef93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于 os.path.join()方法的信息。我推荐这篇文章，我发现它非常有帮助。</p><h2 id="f527" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">移动文件和目录</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="3a0e" class="jp jq hi kq b fi ku kv l kw kx">&gt;&gt;&gt; import shutil<br/>&gt;&gt;&gt; shutil.move('ayush/', 'code/')<br/>'code'</span></pre><p id="ea6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果<code class="du me mf mg kq b">code/</code>存在，则<code class="du me mf mg kq b">shutil.move('ayush/', 'code/')</code>将<code class="du me mf mg kq b">ayush/</code>移动到<code class="du me mf mg kq b">code/</code>。如果<code class="du me mf mg kq b">code/</code>不存在，<code class="du me mf mg kq b">ayush/</code>将被重命名为<code class="du me mf mg kq b">code</code></p><h2 id="8c28" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">重命名文件和目录</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="f5a2" class="jp jq hi kq b fi ku kv l kw kx">os.rename('text.html', 'write.html')</span></pre><p id="f6db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的行将<code class="du me mf mg kq b">text.html</code>重命名为<code class="du me mf mg kq b">write.html</code>。如果目标路径指向一个目录，它将引发一个<code class="du me mf mg kq b">OSError</code>。</p></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><p id="13ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你喜欢我的努力吗？如果是的话，请跟我来获取我的最新帖子和更新，或者更好的是，请我喝杯咖啡！☕</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://www.buymeacoffee.com/ayushdixit"><div class="er es mh"><img src="../Images/69716627feab2505c60838bbd29241a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gS6Sh6i8g535gOafY4Wl1w.png"/></div></a></figure></div></div>    
</body>
</html>