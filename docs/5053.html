<html>
<head>
<title>Creating a ledge grab mechanic | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建壁架抓取机制| Unity</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-ledge-grab-mechanic-unity-ec78c0c8fa40?source=collection_archive---------1-----------------------#2021-08-24">https://medium.com/nerd-for-tech/creating-a-ledge-grab-mechanic-unity-ec78c0c8fa40?source=collection_archive---------1-----------------------#2021-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="99d4" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何在 Unity 中创建壁架抓取机制的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/7adafd3bbcf8217a1f7f4ecffde3f617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*umGR9Rd3gx6X6LX4SQ5hHg.gif"/></div></div></figure><p id="c061" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:用 Unity 制作我们玩家的 3D 模型动画。</p><p id="a59b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我介绍了<a class="ae ko" rel="noopener" href="/nerd-for-tech/animating-player-unity-5e04ba44fb19">如何用 Unity </a>为玩家实现新的动画。现在，是时候在我们的平台游戏中为玩家创建一个抓岩架的机制了。</p><h1 id="12c5" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">玩家机制</h1><p id="54a1" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">首先，让我们来看看我们的玩家可以执行的当前动画:</p><ul class=""><li id="b6a5" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">闲置的</li><li id="0713" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">步行</li><li id="8191" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">奔跑</li><li id="1bd8" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">正常跳跃</li><li id="4ab6" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">跑跳步</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/7040df95bb9c968990418972ecedae4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edtoD1mIgK9s4kXuF8tEKA.png"/></div></div></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/eddb23ae6a66bb7a4a50d26886395997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZc6e-7oz0eUn2dt6plF7Q.png"/></div></div></figure><p id="ef8d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果你没有看过我的上一篇帖子，我推荐你去看看，以防你不知道如何用 Unity 添加新的动画:</p><div class="ma mb ez fb mc md"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/animating-player-unity-5e04ba44fb19"><div class="me ab dw"><div class="mf ab mg cl cj mh"><h2 class="bd hs fi z dy mi ea eb mj ed ef hr bi translated">动画播放器| Unity</h2><div class="mk l"><h3 class="bd b fi z dy mi ea eb mj ed ef dx translated">关于如何在 Unity 中制作 3D 播放器动画的快速指南</h3></div><div class="ml l"><p class="bd b fp z dy mi ea eb mj ed ef dx translated">medium.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr jq md"/></div></div></a></div><h1 id="71eb" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">实现壁架抓取机制</h1><h2 id="ec12" class="ms kq hi bd kr mt mu mv kv mw mx my kz kb mz na lb kf nb nc ld kj nd ne lf ho bi translated">添加壁架抓取动画</h2><p id="b159" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，开始实现壁架抓取机制，让我们添加动画到我们的动画状态。我们将要使用的动画是从<a class="ae ko" href="https://www.mixamo.com/#/" rel="noopener ugc nofollow" target="_blank"> Mixamo </a>(免费)获得的，显示了我们的玩家挂在某个东西上时处于空闲状态的模型:</p><div class="jh ji jj jk fd ab cb"><figure class="nf jl ng nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/6ee3c5a936273f467522e5717c173d47.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/1*41hQvNHMGK9oAkPXuUROPQ.gif"/></div></figure><figure class="nf jl nl nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/f301c0fa1882bfd4de6a067ff9726496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/1*NEdd1TlvaCpGuMR_UpZZ9Q.gif"/></div></figure></div><p id="fea4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">要添加动画，让我们将它的文件拖到 Animator 窗口中，并从跳转状态开始进行相应的转换。然后，为了控制这些过渡，让我们创建一个新的 bool 参数来指示玩家何时抓住壁架:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/a1dd2d7636c9cccbb713474855a7ec6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BPFTKOZutVAYdpEgDObB9w.gif"/></div></div></figure><p id="af71" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">创建后，选择相应的过渡并:</p><ul class=""><li id="66cc" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">禁用<strong class="ju hs"> <em class="nm">具有退出时间</em> </strong>属性，以避免在传递到壁架抓取动画之前等待跳跃动画结束。</li><li id="10ea" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">添加布尔作为执行壁架抓取动画的条件。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nn"><img src="../Images/8913917d25f65e0830138b55fce71d42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/1*rMFpyEtEfRJCQZ9zWNAmnw.gif"/></div></figure><h2 id="0565" class="ms kq hi bd kr mt mu mv kv mw mx my kz kb mz na lb kf nb nc ld kj nd ne lf ho bi translated">识别壁架</h2><p id="a0f1" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，继续壁架抓取机制，让我们创建一个新的游戏对象，在我们的玩家游戏对象中有一个碰撞器或一个 3D 立方体。创建完成后，让我们修改新的游戏对象以适应我们的动画，如下所示:</p><div class="jh ji jj jk fd ab cb"><figure class="nf jl no nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/56994ee1a598c9e5555220ac6cfed66f.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/1*VSDPkjSTQD8D9x-dbifxkA.gif"/></div></figure><figure class="nf jl np nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/759b8dca8783a9061c972d4a90cc923a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1464/1*jAoS4aE1RtLzyeZjw_B3QA.gif"/></div></figure></div><p id="baba" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">通过这种方式，玩家将在移动的同时移动游戏对象，并且它将检查是否有壁架可供抓取:</p><div class="jh ji jj jk fd ab cb"><figure class="nf jl no nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/1394289ac815d2014c5245105e7f22e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*QN1fdA1AYdfGwQXhwPpDAw.png"/></div></figure><figure class="nf jl np nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/bb88e355c5ee81cc49e0814e8175bba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1464/format:webp/1*Zld3NVCPp4Flb9cLrHqq8w.png"/></div></figure></div><p id="91f5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">不要忘记选择新的游戏对象和:</p><ul class=""><li id="bf7f" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">启用<strong class="ju hs"> <em class="nm">是从碰撞器中触发</em> </strong>属性。</li><li id="f7a0" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">创建并分配一个新标签以便于识别。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nq"><img src="../Images/08a5aeddce84e8187ab6ec9a5d022a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/1*pQU4QIJzv2oKfLqkFBvyOQ.gif"/></div></figure><h2 id="4f8b" class="ms kq hi bd kr mt mu mv kv mw mx my kz kb mz na lb kf nb nc ld kj nd ne lf ho bi translated">识别玩家的标识符</h2><p id="d085" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">接下来，为了确定我们需要在哪个时刻触发壁架抓取动画，让我们在相应的壁架中创建一个新的游戏对象(带有一个长方体碰撞器或一个 3D 立方体):</p><div class="jh ji jj jk fd ab cb"><figure class="nf jl np nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/660eed38afaf2c94afd874a03a77d5d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1464/format:webp/1*VBJdjxLrhRpRo453F8dItQ.png"/></div></figure><figure class="nf jl no nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/6f33042ca69785e0b57812977ba2d758.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/1*cN5llHhRP8e0SxyDLg54aw.gif"/></div></figure></div><p id="439d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了识别壁架并按预期触发动画，让我们修改它的属性以满足我们的需要:</p><div class="jh ji jj jk fd ab cb"><figure class="nf jl nr nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/e6f22e4cddeafe060d088ad396f3c8bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1508/1*0aKUfsLEOI6VxfYv0b6W2Q.gif"/></div></figure><figure class="nf jl ns nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/8edb24250b3a49c22746c07e9b7cdbc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/1*wAmjF9RR4P4r_ca0xdF4KQ.gif"/></div><figcaption class="nt nu et er es nv nw bd b be z dx nx di ny nz translated">不要忘记启用<strong class="bd kr"> <em class="oa">是从碰撞器中触发</em> </strong>属性。</figcaption></figure></div><p id="d116" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们选择新的游戏对象:</p><ul class=""><li id="dae3" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">连接一个<strong class="ju hs">刚体</strong>以便能够检测与壁架抓取检查器的碰撞。</li><li id="3f50" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">创建并附加一个新脚本，以指示如何处理相应的冲突。</li></ul><div class="jh ji jj jk fd ab cb"><figure class="nf jl ob nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/87aad1546dbbbfbc2ce1f9dbb6ab8eaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*rqnEsBrQS7uzrkCSYc-S5A.gif"/></div></figure><figure class="nf jl oc nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/49f1aaa8948bedb6c5b08277c7aee1eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/1*qXZeAISnde90FuLoKBO0Pw.gif"/></div></figure></div><p id="9b15" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们创建一个新的游戏对象来指示玩家在抓住所需的壁架时手的正确位置:</p><div class="jh ji jj jk fd ab cb"><figure class="nf jl no nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/71819e0c8e8e2c960e0410c4c635a13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/1*AurCCWhdkT0EW7y3wCgQ_Q.gif"/></div></figure><figure class="nf jl np nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/0f32a423101d32db5f0e828a8b710ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1464/1*D-1aXi0R7booFHa808tksQ.gif"/></div></figure></div><p id="07d0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">接下来，让我们打开壁架脚本并创建一个新变量来存储最后一个新游戏对象的转换组件，该组件指示玩家抓住壁架的位置:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es od"><img src="../Images/b5c241b024ed3c80c546324078e560ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*8VII392OgiAAn3HD5EizPQ.png"/></div><figcaption class="nt nu et er es nv nw bd b be z dx translated">不要忘记使用[SerializeField]来通过检查器设置值。</figcaption></figure><p id="05dc" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">保存后，让我们通过检查器将游戏对象拖动到脚本组件中:</p><div class="jh ji jj jk fd ab cb"><figure class="nf jl oe nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/e3540c17b47c4abab8e1b33f249180e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/1*GcYEnmYmzCtdgWDG2pCjqg.gif"/></div></figure><figure class="nf jl of nh ni nj nk paragraph-image"><img src="../Images/ab3d880832edb1d9c57087e97e8bdddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/1*_aGDABz789LE0dAwkxFOGQ.gif"/></figure></div><p id="e29c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了正确实现壁架抓取动画，让我们打开播放器脚本并:</p><ul class=""><li id="ac43" class="lm ln hi ju b jv jw jy jz kb lo kf lp kj lq kn lr ls lt lu bi translated">创建一个新的公共方法来接收抓取壁架时的位置。</li><li id="afba" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">禁用玩家的角色控制器组件，以避免使用重力或在抓住壁架时控制玩家。</li><li id="2049" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">从 animator 组件将相应的 bool 设置为 true，以指示玩家应该执行壁架抓取动画。</li><li id="a53a" class="lm ln hi ju b jv lv jy lw kb lx kf ly kj lz kn lr ls lt lu bi translated">将播放器的位置设置为收到的参数。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es og"><img src="../Images/4b5254b22667ba3f614d97e6f07e39c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*Gll41NAhG_fgoYKDfJX8FA.png"/></div></figure><p id="5b4d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，为了识别碰撞，让我们返回到 Ledge 脚本并使用<strong class="ju hs"> OnTriggerEnter </strong>方法。一旦进入该方法，让我们通过使用<strong class="ju hs"> CompareTag </strong>方法来检查来自碰撞器的标签是否属于玩家内部的游戏对象。如果是这样的话，让我们从父组件(播放器)获取<strong class="ju hs">播放器</strong>脚本组件，并调用我们在上面创建的包含要设置给播放器的位置的方法:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es oh"><img src="../Images/bcccd3bc90837e9e8dac92725cd8f9e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Th6Omssej8-id1nDuL8Fw.png"/></div></div></figure><p id="3b00" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们在 Unity 中运行游戏，我们将能够看到当碰撞发生时，壁架抓取动画和机制按预期工作:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/cbfdc4a4f3d2b6c1a361cea2d3412dfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sQNoFyO_eta2f7s8NCctig.gif"/></div></div></figure><p id="de9c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们用 Unity 创造了一个壁架抓取机械！:d .我会在下一篇文章中看到你，在那里我将展示如何在我们的 Unity 玩家的状态中处理动画事件。</p></div><div class="ab cl oi oj gp ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="hb hc hd he hf"><blockquote class="op oq or"><p id="4311" class="js jt nm ju b jv jw is jx jy jz iv ka os kc kd ke ot kg kh ki ou kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>