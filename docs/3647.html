<html>
<head>
<title>Implementing space shooter game features - Aggressive enemies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现太空射击游戏功能-侵略性的敌人</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-aggressive-enemies-bc123d1e1ed1?source=collection_archive---------19-----------------------#2021-06-17">https://medium.com/nerd-for-tech/implementing-space-shooter-game-features-aggressive-enemies-bc123d1e1ed1?source=collection_archive---------19-----------------------#2021-06-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="f79d" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="4c94" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">快速回顾 Unity 中添加到太空射击游戏的新功能</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/5352f71ad41515d71c393a328e2cc5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BP2Cm8QCf9-g604mnUlB6w.gif"/></div></div></figure><p id="bf5a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:在 Unity 的太空射击游戏中对敌人实施攻击行为。</p><p id="eb41" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在之前的帖子中，我在 Unity 的太空射击游戏中为一些敌人使用了盾牌<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-space-shooter-game-features-enemy-shields-7c4f343bb6a0">。现在是时候对敌人实施新的攻击行为了。</a></p><h1 id="8eb9" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">检测玩家</h1><p id="9111" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">为了在我们的太空射击游戏中对敌人实施攻击行为，我们可以给我们的敌人添加一个新的空游戏对象:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl ln lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/0b00807f8cf316c073ba34cddf228dab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1448/format:webp/1*3jWvxyTdjTPPtGoUKmcxqQ.png"/></div></figure><figure class="lm jl ls lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/c90128e3d57b89d75dd4a3818538baa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/1*a4-CW0QIDMieJ_idlZh3JQ.gif"/></div></figure></div><p id="96a5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，在空的游戏对象中，让我们添加一个圆形碰撞器 2D 来表示敌人将不得不识别玩家的检测范围:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl lt lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/b40fd6791d78e48551f1c70501529aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:488/1*LB5kFy9gQWnKOKCk0vmFjQ.gif"/></div></figure><figure class="lm jl lu lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a9de624568c53af3afe6035783847430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1514/1*8R4viXh7zWl9_rWEEtYANw.gif"/></div></figure></div><p id="4629" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">一旦我们决定了圆形碰撞器的半径，让我们启用<strong class="ju hs"> <em class="lv">来触发</em> </strong>选项来检测玩家何时进入或退出这个范围:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl lw lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/460b602859633224021da3b5b68a59cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*zuBBe6HGXP7TjvgQAKqoZw.png"/></div></figure><figure class="lm jl lx lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/a4263785008e77d4f02ee7497a34a833.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*KhIwsOlw_0wNS0BaeSEizQ.png"/></div></figure></div><p id="6e52" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">此外，添加一个刚体 2D 并使其运动以避免从敌人父节点调用<strong class="ju hs"> OnTriggerEnter2D </strong>方法也非常重要(这会对敌人造成伤害):</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ly"><img src="../Images/9d5ccdff452b07f15d19e2955e543d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/1*P95DURi09Lvpeb3q_-q_gw.gif"/></div></figure><h1 id="e72b" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">攻击行为</h1><p id="d30c" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了创造攻击行为，我们可以选择让敌人转向玩家，当它已经向前移动时，敌人将与玩家相撞并造成伤害。</p><p id="e481" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，为了使敌人在进入探测范围时转向玩家，让我们创建一个新的脚本并将其附加到空的游戏对象:</p><div class="jh ji jj jk fd ab cb"><figure class="lm jl lz lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/d4b6fb70f2dc8e612cae14bc3007991f.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/1*AGJoyCG96sH32QU23YEmkA.gif"/></div></figure><figure class="lm jl ma lo lp lq lr paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/f4934f7cac7a101e0f5ec10d725af4c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/1*mmMs3D2wK4onQbOjfs2jTw.gif"/></div></figure></div><p id="f207" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">让我们打开脚本，确保在类声明上方有一个圆形碰撞器 2D 和<strong class="ju hs"> RequireComponent </strong>语句:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mb"><img src="../Images/ba6fd83106b3e2b0cdc0bb32b32ee09b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*SNjlPQLkNQJ-qUu1socbyA.png"/></div></figure><p id="62ce" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们需要下面这些变量:</p><ul class=""><li id="f680" class="mc md hi ju b jv jw jy jz kb me kf mf kj mg kn mh mi mj mk bi translated">每秒度数</li></ul><p id="0a11" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储当玩家被探测到在范围内时每秒旋转敌人的度数。</p><ul class=""><li id="a259" class="mc md hi ju b jv jw jy jz kb me kf mf kj mg kn mh mi mj mk bi translated">当前协同程序</li></ul><p id="1bda" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储当前的协程，它将确保旋转到玩家的方向。</p><ul class=""><li id="264a" class="mc md hi ju b jv jw jy jz kb me kf mf kj mg kn mh mi mj mk bi translated">轮流</li></ul><p id="274b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储该值，以了解敌人是否在协程中旋转。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ml"><img src="../Images/e38fafb461508bf43e89166669a04e14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*5_QZdQuICU8T8x9UCCVyHg.png"/></div></figure><p id="c7b2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了在玩家进入范围时触发相应的旋转，让我们使用<strong class="ju hs"> OnTriggerEnter2D </strong>方法，该方法将获得指向玩家位置的方向和角度，并将其发送给处理旋转的协程:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mm"><img src="../Images/ed690a775307d5a59fc8f2a6bbd1aedf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I_iHuQBEUIsTwPvR8tgSbg.png"/></div></div><figcaption class="mn mo et er es mp mq bd b be z dx translated">协程在被调用时存储在私有变量中。</figcaption></figure><p id="1d53" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，为了避免一个以上的协程同时旋转，让我们使用<strong class="ju hs"> OnTriggerExit2D </strong>方法在玩家超出范围时停止当前的协程:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/98fa175b2e16abb42a7f5c02fd849360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GtzfiMz4NRrhYySeQg60jA.png"/></div></div></figure><p id="9e57" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">为了用协程处理旋转，让我们进入一个 while 循环，直到达到目标旋转才结束。为了向玩家旋转，让我们通过使用<strong class="ju hs">四元数来改变父对象的旋转。旋转方向</strong>:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ms"><img src="../Images/191f1618488206a6a127e4af795bcdd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uWLhV8nCT0JhLEZGDCtaPw.png"/></div></div></figure><h1 id="fbaa" class="kp kq hi bd kr ks kt ku kv kw kx ky kz ix la iy lb ja lc jb ld jd le je lf lg bi translated">实现行为</h1><p id="2098" class="pw-post-body-paragraph js jt hi ju b jv lh is jx jy li iv ka kb lj kd ke kf lk kh ki kj ll kl km kn hb bi translated">现在，为了实现这个行为，让我们把这个空的游戏对象变成一个预置，这样我们就可以实例化这个行为，就像我们对敌人的盾牌所做的一样:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mt"><img src="../Images/80b4aa5e5488d6dfab89f22dd2b3f189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/1*ig7Bn7MRcyosCkUb-KfV8Q.gif"/></div></figure><p id="3174" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">让我们打开 spawn manager 脚本并添加 2 个新变量:</p><ul class=""><li id="0eb1" class="mc md hi ju b jv jw jy jz kb me kf mf kj mg kn mh mi mj mk bi translated">敌人咄咄逼人</li></ul><p id="e20b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储一个预置的引用，这个预置将敌人作为一个孩子来旋转。</p><ul class=""><li id="d8cb" class="mc md hi ju b jv jw jy jz kb me kf mf kj mg kn mh mi mj mk bi translated">攻击概率</li></ul><p id="34d0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储每个敌人在发现玩家时产生攻击行为的概率。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mu"><img src="../Images/3ae24e6536e810adc2c0ef08ed28a91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*3ExQPNubyXrfOH0x3jx6hw.png"/></div></figure><p id="18c4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">正如我们使用<strong class="ju hs">【serialize field】</strong>一样，我们可以在 Unity 中通过 inspector 修改变量:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mv"><img src="../Images/163bcb5bc4032eb66c0a130667c89d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/1*6yD2nh2B4vDrkSu-fxKf8Q.gif"/></div></figure><p id="a4a6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">最后，为了添加攻击性行为，我们需要检查产生的敌人是否属于向前移动的类型，以及<strong class="ju hs"> <em class="lv"> Random.value </em> </strong>是否在攻击性概率范围内。如果这些情况是真的，我们将把预设实例化为新敌人的后代:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mw"><img src="../Images/0029f4c586fa2808d6cb7c40d53c5997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OEJMuU7mrEjKupKdELGlJQ.png"/></div></div></figure><p id="8484" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，如果我们在 Unity 中运行游戏，我们将能够看到敌人在靠近玩家时改变了游戏的旋转并与之相撞:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/ad4579f868d10a2d45691f7dd3a5d6db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SaEwYVsbSqs0ClGBF7v2OQ.gif"/></div></div></figure><p id="4ee0" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就是这样，我们对敌人实施了侵略行为！:d .我会在下一篇文章中看到你，在那里我会展示更多添加到我的 Unity 太空射击游戏中的功能。</p></div><div class="ab cl mx my gp mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="hb hc hd he hf"><blockquote class="ne nf ng"><p id="17b4" class="js jt lv ju b jv jw is jx jy jz iv ka nh kc kd ke ni kg kh ki nj kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>