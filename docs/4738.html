<html>
<head>
<title>Android Architecture: MVVM, MVP, MVC and why you should care</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android架构:MVVM，MVP，MVC和你为什么应该关心</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/android-architecture-mvvm-mvp-mvc-and-why-you-should-care-65aae61fc11c?source=collection_archive---------1-----------------------#2021-08-05">https://medium.com/nerd-for-tech/android-architecture-mvvm-mvp-mvc-and-why-you-should-care-65aae61fc11c?source=collection_archive---------1-----------------------#2021-08-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3a4bfa862e8cacc5ba1aea04112d558a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8Jl8xBAJ_HdnL2WnrPRnw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">是选举:)</figcaption></figure><p id="1187" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每一个认真的移动开发者都应该专注于构建一个高质量、可维护、高性能的移动应用。遵循可识别且易于遵循的设计模式是实现这一目标的好方法。</p><p id="079d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当我们谈论原生android开发时，我们有三种主要的候选架构，<strong class="iw hj"><em class="js"/></strong><strong class="iw hj"><em class="js">【MVP】</em></strong><strong class="iw hj"><em class="js">MVVM</em></strong>。为您的项目和团队选择最佳架构是一件棘手的事情，因此本文将讨论以下几点，以帮助您了解android开发世界中的架构，以及如何选择最适合您的架构。</p><blockquote class="jt ju jv"><p id="e31a" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><a class="ae jz" href="#d303" rel="noopener ugc nofollow">为什么您应该关注架构</a></p><p id="5d21" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><a class="ae jz" href="#c4b5" rel="noopener ugc nofollow">Android系统和MVC </a></p><p id="1edf" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><a class="ae jz" href="#8092" rel="noopener ugc nofollow"> Android架构:MVC </a></p><p id="df01" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><a class="ae jz" href="#14fe" rel="noopener ugc nofollow">安卓架构:MVP </a></p><p id="7012" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated">Android架构:MVVM </p><p id="c0c8" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><a class="ae jz" href="#36a5" rel="noopener ugc nofollow">架构对比</a></p><p id="b812" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated">为什么是MVVM？</p><p id="325c" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><a class="ae jz" href="#621a" rel="noopener ugc nofollow">结论</a></p></blockquote><h1 id="d303" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">为什么您应该关注架构</h1><p id="0bd1" class="pw-post-body-paragraph iu iv hi iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">可能会问的一个问题是，为什么选择正确的应用程序架构很重要？这可以从两个角度来回答；工程师的责任和客户的责任。我先从工程师的角度来回答。</p><p id="978c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">大多数工程师都熟悉常见的架构模式。这意味着，当一名新工程师加入一个项目或一个工程师团队接手一个现有项目时，他们可以更好地浏览项目结构，更快地开始工作，并且更有信心可以毫无问题地添加新功能。此外，随着新特性的增加，架构的哪一部分需要修改是显而易见的，团队可以在架构的不同层上一起工作。所有这些导致了更稳定的应用程序，具有更少的错误和更好的性能。</p><p id="29fb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从客户的角度来看，选择正确的应用程序架构很重要，原因有很多。客户需要确保他们选择构建应用程序的工程团队在质量和效率方面都考虑到了他们的最大利益。软件架构模式允许在保持效率的同时达到更高的质量水平。也没有适用于所有项目的通用架构。例如，一个高度复杂的企业级应用程序需要一个比简单的概念证明或最小可行产品应用程序更复杂的架构模式。此外，当一个项目被发布，然后需要额外的功能时，客户可以确信这个过程会尽可能的简单。</p><h1 id="c4b5" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Android系统和MVC</h1><p id="a597" class="pw-post-body-paragraph iu iv hi iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">Android本身被写成MVC，其中活动负责或多或少的一切。MVC对于简单的应用程序来说是好的，但是随着复杂性的增加，问题的数量和级别也会增加。这导致了其他架构的引入，如MVVM和MVP，但即使是这两个也有其缺点。</p><h1 id="8092" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Android架构:MVC</h1><p id="64a6" class="pw-post-body-paragraph iu iv hi iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">MVC代表模型视图控制器，其中:</p><ol class=""><li id="3538" class="ld le hi iw b ix iy jb jc jf lf jj lg jn lh jr li lj lk ll bi translated"><strong class="iw hj">模型</strong>:模型表示数据模型(数据实体)并管理它们的状态，它还包含应用程序的业务逻辑。</li><li id="c6dc" class="ld le hi iw b ix lm jb ln jf lo jj lp jn lq jr li lj lk ll bi translated"><strong class="iw hj">视图</strong>:视图是我们表示数据的方式。对于安卓来说，就是布局。</li><li id="d0dc" class="ld le hi iw b ix lm jb ln jf lo jj lp jn lq jr li lj lk ll bi translated"><strong class="iw hj">控制器</strong>:控制器通过模型和视图之间的通信通道处理所有用户与应用程序的交互。</li></ol><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/275111c0250125bf100e281782ad54ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVqp-Nmj_8UCbo25jOjD-w.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">MVC架构:<a class="ae jz" href="https://www.freecodecamp.org/news/the-model-view-controller-pattern-mvc-architecture-and-frameworks-explained/" rel="noopener ugc nofollow" target="_blank">源码FreeCodeCamp </a></figcaption></figure><p id="4615" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">用户与UI交互，控制器通过视图得到通知。基于用户交互，控制器修改某些模型。模型执行一些业务逻辑，并将更新后的模型数据状态返回给控制器。控制器然后可以根据从模型接收的新数据状态更新UI。</p><h1 id="14fe" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Android架构:MVP</h1><p id="d10d" class="pw-post-body-paragraph iu iv hi iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">MVP代表模型视图演示者，其中:</p><ol class=""><li id="b8e0" class="ld le hi iw b ix iy jb jc jf lf jj lg jn lh jr li lj lk ll bi translated"><strong class="iw hj">模型:</strong>与MVC相同。</li><li id="c7a5" class="ld le hi iw b ix lm jb ln jf lo jj lp jn lq jr li lj lk ll bi translated"><strong class="iw hj">视图:</strong>Android中的布局以及活动/片段。它应该为演示者的动作实现一个接口</li><li id="9ad9" class="ld le hi iw b ix lm jb ln jf lo jj lp jn lq jr li lj lk ll bi translated"><strong class="iw hj"> presenter </strong>:视图调用Presenter的动作，并通过Presenter接口中定义的动作更新自己的状态。</li></ol><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/50f9b45bb66d9d50c762e9cc1db8e809.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*dy8KG_2cxUBK-BJnKOM_Ww.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">MVP : <a class="ae jz" href="https://www.journaldev.com/14886/android-mvp" rel="noopener ugc nofollow" target="_blank">来源JouranlDev </a></figcaption></figure><p id="79de" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">虽然流程图看起来和MVC一样，但是不同之处在于视图和演示者/控制器之间的交互方式。</p><p id="fc80" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在MVP中，视图和演示者通过一个接口进行交互(不像MVC)。演示者在界面上执行一些操作，这些操作在视图中实现，因此视图得到更新。</p><p id="c3eb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">它比MVC好得多，因为这里的演示者没有android API(或者只有很少的ANDROID API ),并且很容易测试。<br/>可以使用espresso等测试视图，查看视图是否更新。</p><p id="b66a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，这些观点相当愚蠢。它们从演示者那里获取数据，并相应地更新UI组件。</p><p id="d837" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这张图片将有助于理解演示者的行为</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/c3e4f7411874aa60fd6865edb52d1b98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NhqkyOCfCFMw3TCV6Xy4KQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">MVP:演示者的界面操作</figcaption></figure><p id="0c33" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">视图将实现这个接口来定义当一个定义的动作发生时，它将如何被更新。</p><h1 id="c9c9" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">安卓架构:MVVM</h1><p id="e2ac" class="pw-post-body-paragraph iu iv hi iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">MVVM代表模型视图ViewModel，模型和视图与MVC和MVP相同，另一方面，ViewModel使用实时数据来观察模型值并相应地更新UI</p><h2 id="9d25" class="ly kb hi bd kc lz ma mb kg mc md me kk jf mf mg ko jj mh mi ks jn mj mk kw ml bi translated">什么是实时数据？</h2><blockquote class="jt ju jv"><p id="9db6" class="iu iv js iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><a class="ae jz" href="https://developer.android.com/topic/libraries/architecture/livedata" rel="noopener ugc nofollow" target="_blank"> LiveData是<strong class="iw hj">一个可观察的数据持有者类</strong>。与常规的可观察对象不同，LiveData具有生命周期意识，这意味着它尊重其他应用程序组件的生命周期，如活动、片段或服务。这种意识确保LiveData仅更新处于活动生命周期状态的应用程序组件观察者。</a></p></blockquote><p id="428a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这张图片展示了android中的MVVM流程</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/4a29051a90e891f3ac6a29d945ec42ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GVOEZQPu9MvGpn5nAsDKbQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">MVVM: <a class="ae jz" href="https://jayrambhia.com/blog/android-mvvm-intro" rel="noopener ugc nofollow" target="_blank">来源艾兰比亚</a></figcaption></figure><p id="0f37" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此视图接收用户交互并通知视图模型。<br/>现在，ViewModel将更新模型和可观察对象(这将调用值更改)。接下来，ViewModel接口将更新UI。</p><h1 id="36a5" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">MVC/MVP/MVVM的比较</h1><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/94dccbc2606060da3a62cd66deda6243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oj6CyuX-pxkVq1tUq6aj-g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">比较</figcaption></figure><p id="1e56" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如你所看到的，MVVM更适应android，因为它允许视图模型独立于android API，这增加了可维护性。MVVM还允许很好的模块化，因此应用了SRP原则(单一责任原则)，这意味着你可以测试类，因为业务逻辑与视图是分离的。所有这些使得项目非常具有可测试性，这有助于<strong class="iw hj"> <em class="js">减少并找到bug</em></strong>。</p><p id="4713" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">MVVM的唯一缺点是它增加了XML的复杂性，因为它经常与视图绑定一起使用。</p><h1 id="6cf7" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">为什么是MVVM？</h1><p id="529b" class="pw-post-body-paragraph iu iv hi iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">比较表明，MVVM和MVP对Android都有好处，无数关于架构模式的演讲和文章，我们可以同意上面讨论的最流行和最广泛采用的是MVP。</p><p id="c793" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然而，谷歌推出了包括ViewModel而不是Presenter的android架构组件，这意味着谷歌支持MVVM，这不可能只是随机的，MVP肯定有问题(对Android来说是错误的)。</p><p id="8e55" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">错误的是MVP要求每个视图都有一个展示者，这意味着每个活动/片段都有自己的展示者。这是一种硬约束关系，它会影响演示者的简单性，因为随着视图复杂性的增加，演示者的复杂性也会增加，这使得维护和测试变得困难。</p><p id="ea6c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">另一方面，MVVM不需要这种硬性关系，这使得<strong class="iw hj"> <em class="js">更适合android开发。</em> </strong></p><h1 id="621a" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="c4c2" class="pw-post-body-paragraph iu iv hi iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">在这一点上，很明显MVC已经过时了，作为开发人员或项目负责人，你需要根据你的需求在MVVM和MVP之间做出选择，但请记住，MVVM、MVP都在不断发展，MVVM有潜力成为强大而完美的Android开发工具，有用且实现起来令人惊叹。MVP已经发展到了一定的水平，但没有什么是完美的。</p><p id="8e87" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后，我想提一下，这是我的个人意见，你可以选择任何其他的建筑模式，它们都证明了它们在一定程度上是好的。</p></div></div>    
</body>
</html>