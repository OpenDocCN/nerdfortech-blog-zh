<html>
<head>
<title>Let’s Make a Loot System in Unity!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们在 Unity 中制作一个战利品系统！</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/lets-make-a-loot-system-in-unity-b50931adb75?source=collection_archive---------9-----------------------#2021-08-26">https://medium.com/nerd-for-tech/lets-make-a-loot-system-in-unity-b50931adb75?source=collection_archive---------9-----------------------#2021-08-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5687" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以杀死敌人了，所以让他们掉落一些宝石，让这成为一次有意义的经历吧！</p><p id="732a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们得到了一个钻石的动画帧，所以让我们假设我们已经实现了钻石精灵，作为一个触发器添加了 boxcollider2D，并给了它刚体。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3d850cd68e1491fd09a00ee95340935a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWJ_XssJKafUZhtiJjk0aw.png"/></div></div></figure><p id="00c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在刚体 2D 中打开了重力，关闭了 z 旋转，我还给了它一个小的盒子碰撞 2D，它不是触发器，因为我要做的事情和作业要求的有点不同。</p><h2 id="17b6" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">任务要求:</h2><p id="434b" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">-让敌人丢 1 颗钻石<br/> -让敌人给钻石分配一个数量。<br/> -让玩家收集钻石并将其添加到物品清单中。</p><h2 id="1c27" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">我要做的是:</h2><ul class=""><li id="b3ba" class="kp kq hi ih b ii kk im kl iq kr iu ks iy kt jc ku kv kw kx bi translated">让敌人在“LootSplash”中丢尽可能多的宝石。</li><li id="aace" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">让玩家收集钻石并将其添加到他们的库存中。</li></ul><p id="df11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你已经在许多电子游戏中看到了战利品和硬币飞溅，当一个敌人死亡时，他们所有的东西就像皮纳塔一样从他们身上爆炸出来，我喜欢这种效果，所以我要把它放在这里！</p><p id="69a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了钻石，我创作了一个钻石剧本:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/8a24ea95c2f69403b24b4ca628bee5e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m6qk1DogCoXACmE5BJTViQ.png"/></div></div></figure><p id="41aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">_amount 是钻石的价值，我可以硬编码它，但也许我们可能想在某个时候给出多个价值不同的版本。</p><p id="4718" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一个 OnTriggerEnter，它检查另一个碰撞器是否是玩家，如果是，它将访问他们的 AddDiamonds 函数并向他们发送数量，然后它将变为非活动状态。有时你不想摧毁一个物体，也许如果你重置等级而不重装，你可以再次激活所有的钻石。我试着提前考虑，也许我们不会这样做。</p><p id="61a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">玩家脚本中的下一步:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/afb91bf61e6fba470458c192d48ddd8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1W2Kphd9PLXLqi6TauIpCQ.png"/></div></div></figure><p id="ed9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们创建一个整数变量 _diamonds，然后添加通过参数发送的数量。很简单！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/4f00a51759ab3951d247f486d121f24f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3wrUjTWNZ0DOezWP3AiQvw.gif"/></div></div></figure><p id="7da8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一切正常！现在让我们把它给一个敌人。我们将使用一个临时的。</p><p id="aa4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是首先我们要把持有者放到敌人的基本职业中:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lg"><img src="../Images/3a3f2917886d5ac372f1f60c2ac90ef4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LmiQyuW0Br2Fs_DMQFVldw.png"/></div></div></figure><p id="2be1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将为我们的临时敌人创建一个新的脚本，使用敌人作为它的基类。现在我们把钻石拖进去。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/fe2d72a6c3bcc50be0479c940e53fef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YZgQ8ieD7q5I4MB_nBMENQ.gif"/></div></div></figure><p id="c7e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">神奇的事情就发生在这里！基本敌人类有一个 gems 变量，表示敌人持有多少钻石，所以我们将创建一个 for-next 循环，该循环将到达该变量，并且每个循环都将实例化一个 gem。</p><p id="f339" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 InstantiateGem 函数中，我们将实例化的钻石放入一个新变量中，我们称之为 Gem。然后我们使用刚体。AddForce 函数使宝石从实例化点“弹出”,在 x 轴上，向左或向右移动 3 个单位，向上移动 1-4 个单位，这样就有一个漂亮的弧线。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/c93154a9f4c1f2777aa5f85601f1207d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s5I1rTIglM41_aXjloN8VA.png"/></div></div></figure><p id="5998" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我有一些钻石在地面上滑动的问题，所以我给了钻石一个物理材质，并调整了刚体 2D 设置:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lj"><img src="../Images/9a30123a1c66646709c79d16d257edd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*FRwGN244KzUeGyF4-JJ3_g.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/d663da5bf350806f4869e5209c043408.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*6Y2I-yQwhhmNP3AsQy6pjg.png"/></div></figure><p id="9b5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果是这样的！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ll"><img src="../Images/e26a507bbbf0286661c9d4105bb757bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/1*qgB81tr1E3NkIpJpsEiodw.gif"/></div></figure><p id="33a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">LOOTSPLASH！！！</p><p id="72b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们所有的敌人都会掉落钻石，所以让我们把这个伤害代码移动到基类中，就像我们在战斗模式敌人翻转中所做的那样:</p><p id="71dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的敌人代码中，让我们创建一个名为 GemSplash 的新函数:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lm"><img src="../Images/e4cb00e61553c461dc4f80873465bfea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sBAd1S8IuNDQ5wt7iOqzNw.png"/></div></div></figure><p id="e424" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们的敌人…</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ln"><img src="../Images/b9f7aeb781ee4e93ada48bf547920f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*meemAmDdUATD1Q1lZJvSyA.png"/></div></div></figure><p id="8702" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看结果！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/3d8683e28d0aa5335ebca7c3bf0e66f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7nhdol-RMx8z_lPe5bOoBg.gif"/></div></div></figure><p id="6cf3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">精彩！如果它在这里起作用，它应该对其他敌人起作用，只要给我一点时间把钻石拖到他们身上，设置他们的宝石数量以及添加基础。GemSplash()所有的死亡选项。但这里有一个例子。GemSplash 应该进入死亡检查功能:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lo"><img src="../Images/2f03da162f5c8b34a53e97052e4e37ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogZsWEUnwlU_s1ztqzMmqA.png"/></div></div></figure><p id="5bef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那是苔藓巨人的代码，让我们把它放入蜘蛛和骨骼伤害函数中…</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lp"><img src="../Images/6c4aca3ef0702dc23122709d40027445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*DLXKohwP4_1lB2zCxZlgHw.png"/></div></figure><p id="bf33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，一切都设置好了，我们来测试一下吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lq"><img src="../Images/0cf2dc450bb6bbb6dd8df78cf3a7c91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/1*HzGZM68i4Sh-Q-T4LzkR4A.gif"/></div></figure><p id="c534" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有的敌人都在掉落钻石，而且数量不同，太棒了！今天的文章到此结束！接下来，我们将讨论 onClick 事件！</p></div></div>    
</body>
</html>