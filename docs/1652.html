<html>
<head>
<title>Script Communication in Unity using GetComponent</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GetComponent编写Unity中的通信脚本</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/script-communication-in-unity-using-getcomponent-2eaaea4c49d0?source=collection_archive---------10-----------------------#2021-03-30">https://medium.com/nerd-for-tech/script-communication-in-unity-using-getcomponent-2eaaea4c49d0?source=collection_archive---------10-----------------------#2021-03-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ih ii ij ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es ig"><img src="../Images/5219eeb7583007217c74c6b727be8e76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4Vqb7SQIYmogWBWJ1XK1Ew.gif"/></div></div></figure><p id="c0d9" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">从前面的文章中，我们知道了如何给游戏对象添加一个行为。但是是时候我们学习如何改变或影响其他游戏对象的行为了。</p><p id="9c66" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">但是在我们继续之前，让我们看看我们的玩家游戏对象。</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es jp"><img src="../Images/067321d43374cd672b315925fabddc74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n60Q7-sjWPlLd46eprT1Xg.png"/></div></div></figure><p id="cf6c" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">在<strong class="it hj">检查器</strong>窗口中呈现的一切就是我们所说的<strong class="it hj">组件，</strong>从<strong class="it hj">变换</strong>到<strong class="it hj">网格渲染器</strong>到<strong class="it hj">播放器(脚本)</strong>甚至<strong class="it hj">刚体</strong>。</p><p id="df01" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> <em class="ju">第一阶段:</em> </strong></p><p id="9928" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">让我们从为玩家<strong class="it hj">创建一个其他游戏对象可以影响的方法开始。</strong></p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es jv"><img src="../Images/f4e2a157fb477a68f588b4608597ca62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HPaidLlgYJ_f07tIS_-cVQ.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">变量health是序列化的，因此我们可以通过编辑器更改它的值。</figcaption></figure><figure class="jq jr js jt fd ik er es paragraph-image"><div class="er es ka"><img src="../Images/72382a8d78c037eaf47bd9b807edc0e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*LKXFA6KbxUipfCVmAnmndg.png"/></div></figure><p id="9ed6" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这里，<strong class="it hj"> Damage() </strong>是公开的，因为我们希望其他脚本/类可以访问它。还有，“<em class="ju"> x -= 1 </em>”是“<em class="ju"> x = x - 1 </em>”的简称。</p><p id="f8c1" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> <em class="ju">二期:</em> </strong></p><p id="e101" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">让我们改变<a class="ae kb" rel="noopener" href="/nerd-for-tech/simple-enemy-behaviour-in-unity-b38f88009635">敌人的行为</a>，这样一旦接触到<strong class="it hj">玩家</strong>游戏对象，它就会对<strong class="it hj">玩家</strong>造成伤害。</p><p id="dfeb" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">为了实现这一点，我们必须在我们的<strong class="it hj"> OnTriggerEnter() </strong>中添加以下内容，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es kc"><img src="../Images/6aed35bd2ae3339dd0c8bdb88dff7f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8s1sv5H4AOzMMJwFSRMa4g.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">这里的“其他”存储了与触发器接触的碰撞器的信息</figcaption></figure><p id="d119" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">其中，<strong class="it hj"> _player </strong>是对<strong class="it hj"> Player </strong>类型数据的引用。所以项目中的每个组件从技术上来说都是一个<strong class="it hj">类型的</strong>数据。</p><p id="4dd8" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> other.gameObject </strong>，这表示包含碰撞器的游戏对象，该碰撞器参与了与<strong class="it hj">触发器的碰撞。</strong></p><p id="5432" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">现在我们有了游戏对象，我们只需要引用我们需要的组件，这是在<strong class="it hj"> GetComponent()的帮助下完成的。</strong>由于我们需要<strong class="it hj"> Player (Script) </strong>组件，我们可以将<strong class="it hj"> Player </strong>作为组件传递，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es kd"><img src="../Images/f4400ef4cd05bf6cc3b396b5d087312a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JIZUPjUeyjiJpd-ZOJAFJQ.png"/></div></div></figure><p id="9ba2" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">例如，假设您想要引用<strong class="it hj"> MeshRenderer </strong>组件，我们可以创建一个_meshRenderer变量来存储<strong class="it hj"> MeshRenderer </strong>类型的数据，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es ke"><img src="../Images/ae0c34bece13ca65b951912d410132d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mgpqv7Fqtz59kW1yjFwy9g.png"/></div></div></figure><p id="d049" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">有了这个，我们可以访问<strong class="it hj">播放器</strong>组件，我们可以访问它的所有公开声明。<strong class="it hj">伤害()</strong>是我们要影响<strong class="it hj">、</strong>的方法</p><figure class="jq jr js jt fd ik er es paragraph-image"><div class="er es kf"><img src="../Images/a345203d8714ad0d6a5197c8a582059b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*vXGtOaFyGxXeGLTH5WlueQ.png"/></div></figure><p id="6b28" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">只有当我们的游戏对象的名字与我们的<strong class="it hj">玩家</strong>游戏对象的名字匹配时，所有这些才会被调用，这就是为什么我们在<strong class="it hj"> if </strong>语句中添加了条件。</p><p id="08b9" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj"> <em class="ju">第三期:</em> </strong></p><p id="e475" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">现在我们已经在<strong class="it hj">玩家</strong>和<strong class="it hj">敌人</strong>游戏对象之间建立了通信。让我们给我们的玩家游戏对象添加一个逻辑，当游戏对象的生命值达到0时，我们就销毁它。</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es kg"><img src="../Images/423c50c9031eaa0bb99639514446a264.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BPdpc1c4BZJTUw4XDSBHcQ.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">将此添加到您的玩家脚本中</figcaption></figure><p id="bbac" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">一旦你的<strong class="it hj">玩家</strong>游戏物品的生命值达到0，它就会被摧毁。</p><p id="d111" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">并且还增加了敌人在相互接触时识别激光游戏对象的方法。</p><p id="cf59" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">一种方法是使用，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es kh"><img src="../Images/74ca5a8a69e7137a64e710bf25eda84d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xp7mAqyPa6N3xgUOzVLJVQ.png"/></div></div></figure><p id="6d77" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">最好的方法是使用<strong class="it hj">标签。</strong></p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es ig"><img src="../Images/bee83db9d02e43ca623409d83fdbba29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Vua7aZqHrCNUSgrgpz802w.gif"/></div></div></figure><p id="39c0" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这样，激光组件现在有了一个激光标签。可以通过执行以下操作来访问它，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es kh"><img src="../Images/71125c268898a06c2116f27a2d4db7df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5uZv6DrEWdq7Db9ZMSWMg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">两个都是。CompareTag()和other.gameObject.CompareTag()在处理触发器时功能相同。</figcaption></figure><p id="4a53" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">最后，让我们添加一个检查来避免<strong class="it hj"> NullReferenceException，</strong>这是一个运行时异常，通常在试图引用未初始化的变量或引用任何对象时发生，当它发生时，它被视为<strong class="it hj"> null，</strong>这在运行时给我们带来了<strong class="it hj"> NullReferenceException </strong>。</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es ki"><img src="../Images/c239a0dde0f1edb5cf08160cbd891632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uiBhmjQDf4QxtWh8isBbrA.png"/></div></div></figure></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="56d3" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">最终结果如下所示，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es ig"><img src="../Images/fcede74f6574ee7301b01c87dc3505ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*g5ntzlWDKaPKfPIGdkHjoQ.gif"/></div></div></figure><p id="5dc5" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">为了实现这种行为，使用了以下逻辑，</p><p id="2288" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">玩家伤害逻辑，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es kq"><img src="../Images/64ede135de150495fb108347ef366d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1nLgJLsfC21r0nx-O6eqqw.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">玩家脚本</figcaption></figure><p id="d3be" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">敌人摧毁逻辑，</p><figure class="jq jr js jt fd ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es kr"><img src="../Images/5a0344c190ba176fa2acc8330702e8e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JoevehWVMPJsa8dohujJ1w.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">敌方脚本</figcaption></figure><p id="1dfb" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">更多即将推出！！！</p></div></div>    
</body>
</html>