# [警报]何时需要关键警报？

> 原文：<https://medium.com/nerd-for-tech/alerting-when-are-critical-alerts-needed-8144f092a48?source=collection_archive---------8----------------------->

![](img/0aaaafb6e848f764052db1a60c400fd7.png)

你创造了一个伟大的产品。你提供它作为一种服务。您为客户定义质量和性能服务水平协议(SLA)。你部署监控。

现在您想要定义警报。选择相关指标。建立门槛。简单地说，要决定您的系统何时需要手动干预，您必须提醒待命团队。

为警报选择什么指标？要添加多少个警报？什么时候报警？

# 策略 1:警惕一切。我们喜欢提醒。

*   将系统的所有组件/服务视为宠物:每个容器或 VM 实例都很重要，需要关爱与温柔的照顾。每次虚拟机重启时发出警报。当 1000 个容器中有一个容器的 CPU 使用率达到 100 %时发出警报。对你的警戒音量感到惊讶。
*   **警告未完成任何工作:**警告服务吞吐量为零。提醒服务在过去 15 分钟内没有生成任何日志。我想知道为什么这些警报大多在夜间、周末或软件部署时触发。
*   **不要将警报与客户端影响相关联**:您会对您认为对您的系统有害的东西发出警报，而不是对您的客户端。100%的 CPU 使用率会对您的客户端产生负面影响吗？可能有 10%的几率。这对您的虚拟机不利。所以你要提高警惕。数据积累会对您的客户产生负面影响吗？可能有 30%的几率。而且对你的储存也不好。所以你要提高警惕。我想知道为什么警报似乎与客户端影响不相关。
*   **对您不知道如何解决的问题保持警惕:**您认为某个情况可能会给您的客户带来问题吗？警惕它。你或你的团队知道如何对警报做出反应吗？不，警报太普通了。不行，系统太复杂了。总之要警惕。让待命人员知道当警报响起时该做什么。不知道您的待命团队对不可操作的警报有何不满。

# 策略 2:警惕客户体验下降。自动化其他一切。

*   **当客户体验受到影响时发出警报:**只有当客户体验受到影响时，才召集待命团队。或者当影响迫在眉睫时，如果不立即采取行动。如果发出紧急警报并通知值班人员，则有 90%的可能性会对客户造成直接影响。容器重启应该不是关键问题。内存使用率高，不重要。备份失败，不严重。丢失数据，这是至关重要的。您的客户无法访问您的服务，这一点至关重要。超越您的延迟 SLA 也很重要。想知道你的团队有多信任每个警报。
*   **自动化其他一切:**你认为你需要的所有其他提醒都应该由自动化来处理。您想提醒磁盘已满吗？实现存储扩展或数据重新平衡的自动化。你想提醒一个服务被卡住，需要重新启动？实现自动化以重新启动或取消阻止它。不要自动处理警报和人员。用自动化实现自动化。想知道你的系统有多大的弹性。

# 核对表:我是否需要此指标的严重警告？

呼叫人们的警报意味着人工干预。人工干预既慢又贵。这扰乱了待命小组的生活。这很难扩展，因为你只能与人一起扩展。并且在故障后恢复客户体验的速度很慢。所以，人工干预应该是例外，而不是常态。自动化应该成为常态。

为此，我发现有几个问题有助于确定我是否需要定义某个指标的严重预警:

*   **该指标是跟踪 SLA 履行情况的服务水平指标吗？**简单来说，就是指标跟踪客户端体验？如延迟、数据准确性、数据丢失/损坏或服务可用性。
*   **该指标是否表明广泛的系统故障？**比如网络是不是瘫痪了？计算集群停机了吗？
*   **该指标是否表示第三方系统中的失败？**该指标是否跟踪我正在使用的第三方服务是否满足其 SLA？当警报触发时，我需要联系他们的技术支持吗？
*   **当警报触发时，是否有 90%的几率会对客户端造成紧急影响？什么样的指标和阈值组合可以实现这一点？**
*   **多久会火一次？** **指标需要平滑吗？**会不会火的太频繁？如果我添加了警报，是否会使待命小组对过多的警报不敏感？
*   **我们能否自动响应此警报？**如果答案是肯定的，那就不要警惕了。试一试并实现自动化。仅在自动化无法处理时发出警报。