<html>
<head>
<title>Kafka Connect : Quick Start</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡夫卡连接:快速入门</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/kafka-connect-quick-start-e9249ec2bbaa?source=collection_archive---------1-----------------------#2021-02-14">https://medium.com/nerd-for-tech/kafka-connect-quick-start-e9249ec2bbaa?source=collection_archive---------1-----------------------#2021-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b8d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将看到 Kafka Connect 组件，为什么需要它，以及它如何帮助 Kafka 与不同的系统集成。</p><p id="c484" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注:卡夫卡新？？查看"<a class="ae jd" href="https://techcolors.medium.com/apache-kafka-quick-start-1edeef53773e" rel="noopener">阿帕奇卡夫卡:快速入门</a>"</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/c4f88b44782c24b97b19120da68c9866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GKWmwX0pQwev_fy6ULp95w.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">卡夫卡连接</figcaption></figure><p id="7bdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">话题涵盖</em> </strong>:</p><ul class=""><li id="f218" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">卡夫卡连接</li><li id="3e29" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">连接器</li><li id="996e" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">工作</li><li id="3cfb" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">工人</li><li id="4416" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">变流器</li><li id="3ee9" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">改变</li></ul><p id="d4d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是卡夫卡连接？</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kj"><img src="../Images/731edf93e26c7a6281bb8a1c223cb3aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EBuE_HxUv069l8_K2UgeAg.png"/></div></div></figure><p id="4584" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kafka Connect 是 Apache Kafka 的一个开源组件，它提供了一种可伸缩的、可靠的方式将数据从 Kafka 传输到其他数据系统，如数据库、文件系统、键值存储和搜索索引。它使用连接器将大型数据集移入和移出 Kafka。</p><p id="c8a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kafka Connect 使用生产者和消费者作为构建模块，并提供更高级别的功能。</p><p id="6048" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">需要卡夫卡式的连接吗？</em>T11】</strong></p><p id="4f43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Apache Kafka 广泛应用于事件驱动的微服务架构、CDC(变更检测捕获)需求、日志聚合。</p><ul class=""><li id="d429" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><em class="ju">源连接器</em>:</li></ul><p id="228e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它负责从源系统提取数据并将其发布到 Kafka 集群。Source connector 在内部使用 Kafka Producer API 来实现这一点。</p><ul class=""><li id="d2bf" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><em class="ju">水槽连接器</em>:</li></ul><p id="4468" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它负责使用 Kafka 集群中的数据，并将其同步到目标系统。Sink 连接器在内部使用 Kafka 消费者 API 来实现这一点。</p><p id="4933" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">卡夫卡连接用例？</strong></p><ul class=""><li id="54c1" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">从源系统到目标系统的流管道。</li><li id="6c6c" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">从 Kafka 将数据从应用程序写入数据存储。</li><li id="8665" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">处理从 Kafka 的旧应用程序到新系统的数据。</li></ul><p id="8ba9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">卡夫卡连接组件:</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kk"><img src="../Images/4e1ce2da646aa016519d1bf123a0cec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIOaD3N44l2xDksgbpIYsg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">卡夫卡连线——深度潜水</figcaption></figure><p id="ea1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">连接器</em> : </strong></p><p id="4d3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">连接器定义了数据应该从哪里复制到哪里。每个连接器实例都是一个逻辑作业，负责管理 Kafka 和外部系统之间的数据移动。</p><p id="50a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Confluent 提供<a class="ae jd" href="https://www.confluent.io/product/connectors/" rel="noopener ugc nofollow" target="_blank">预建连接器</a>，有助于与卡夫卡的融合。我们也可以按照要求从头开始编写新的连接器</p><p id="1321" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">任务</em> </strong> <em class="ju"> : </em></p><p id="fc3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">任务在 Kafka Connect 的数据模型中起着重要作用。每个连接器实例都有一组实际复制数据的任务。我们有两种类型的任务—源任务和接收器任务。</p><p id="e7d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Source tasks 包含从源系统获取数据的代码，它使用 Kafka producer 将数据推送到 Kafka 主题。</p><p id="b2dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接收器任务使用 Kafka 消费者从 Kafka 主题轮询数据，它包含将数据放入接收器系统的代码。</p><p id="72a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kafka connect 通过使用最少的配置将单个作业分解为多个任务，为可扩展的并行数据复制提供了内置支持。</p><p id="cf26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">变换</em> : </strong></p><p id="045e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它在 SMT——单消息转换中起着重要的作用。连接器可以配置转换，以便对单个消息进行简单的修改。我们还可以在连接器配置中配置多个转换。</p><p id="1168" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转换是一个接受一条记录作为输入并返回修改后的记录的函数。Kafka connect 执行简单通用转换，我们也可以通过实现转换接口来编写自己的转换。</p><p id="51c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">转换器</em> : </strong></p><p id="e2fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转换器负责序列化和反序列化数据。</p><ul class=""><li id="b512" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">当 Kafka Connect 作为源时，<em class="ju"> Converter </em>序列化从 Connector (or) Transform 接收的数据，并将序列化的数据推送到 Kafka 集群。</li><li id="c4c4" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">当 Kafka 作为接收器连接时，<em class="ju">转换器</em>对从 Kafka 集群读取的数据进行反序列化，并将其发送到 Transform (or)连接器。</li></ul><p id="a354" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">常见转换器:</p><ul class=""><li id="b483" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><em class="ju">字符串</em>:org . Apache . Kafka . connect . storage . String converter</li><li id="6b12" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><em class="ju">JSON</em>:org . Apache . Kafka . connect . JSON . JSON converter</li><li id="cfd5" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><em class="ju">JSON</em>Schema:io . confluent . connect . JSON . jsonschemaconverter</li><li id="45a7" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><em class="ju">Avro</em>:io . confluent . connect . Avro . Avro converter</li><li id="3620" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><em class="ju">proto buf</em>:io . confluent . connect . proto buf . proto buf converter</li><li id="0262" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><em class="ju">ByteArray</em>:org . Apache . Kafka . connect . converters . ByteArray converter</li></ul><p id="58ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">工人:</em> </strong></p><p id="806d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">连接器和任务是工作的逻辑单元，必须被安排在一个流程中执行。Kafka connect 调用这些进程 worker，并且在 Kafka Connect 中有两种运行 worker 的模式—独立模式和分布式模式。我们可以根据需要选择模式。</p><ul class=""><li id="2493" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><em class="ju">独立工作者:</em></li></ul><p id="8c23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顾名思义，它适合在本地机器上开发和测试 Kafka connect。它适用于轻量级的单代理环境(例如，向 Kafka 发送服务器日志)。</p><ul class=""><li id="350b" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><em class="ju">分配的工人:</em></li></ul><p id="412c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分布式模式带来以下好处:</p><ol class=""><li id="9c83" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc kl kb kc kd bi translated">建议将其用于生产环境，因为它具有高可用性和可扩展性，我们可以根据需要添加或删除更多节点来发展。</li><li id="d13d" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc kl kb kc kd bi translated">Kafka Connect 的容错能力更强—如果某个节点由于某种原因死亡/离开集群，Kafka Connect 会自动将该节点的工作负载分配给集群中的其他节点。如果一个新节点加入，工作将再次在集群内重新分配。</li><li id="6036" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc kl kb kc kd bi translated">分布式模式在多个节点上运行 Connect workers，这些节点进而形成 Connect cluster。Kafka connect 还在集群中分发正在运行的连接器。</li></ol><p id="aacb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">总结</strong>:</p><p id="74f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们介绍了 Kafka Connect 为我们带来了什么，以及它如何帮助将外部系统与 Kafka 连接器集成在一起。</p><p id="56bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还看到了各种 Kafka Connect 组件以及每个组件负责什么，同时从/向 Kafka cluster 读取和写入数据。</p><p id="c322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考文献</strong>:</p><ul class=""><li id="b927" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">【https://docs.confluent.io/ T2】号</li><li id="3af6" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">【https://kafka.apache.org/documentation/#connect T4】</li></ul></div></div>    
</body>
</html>