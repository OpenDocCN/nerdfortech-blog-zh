<html>
<head>
<title>Implementing the Score UI behavior</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现乐谱 UI 行为</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/23-04-implementing-the-score-ui-behavior-c34e1510617c?source=collection_archive---------17-----------------------#2021-04-23">https://medium.com/nerd-for-tech/23-04-implementing-the-score-ui-behavior-c34e1510617c?source=collection_archive---------17-----------------------#2021-04-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="55cf" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">把这些数字加起来！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6395fa61e159a18d661dfe22fe2c91d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*flymNe94_OArCetN"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae jn" href="https://unsplash.com/@enginakyurt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> engin akyurt </a>拍摄的照片</figcaption></figure><p id="a28e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就在昨天，我们为 Score 文本元素准备了所有需要的东西。现在是时候用代码实现这个功能了！</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="f945" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">分数是一个文本元素。因此，我们只需要声明一个文本类型的变量。</p><p id="52d3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">也许您注意到代码没有自动完成，甚至用一条红色曲线加了下划线。别担心，这完全正常。</p><p id="426b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你像我一样使用 Rider 作为 IDE，你会知道这里的问题是什么。数据类型文本存在于多个指令中，IDE 不确定应该使用哪一个。因此，你会被问到你想用哪一个。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kr"><img src="../Images/47110a431d2b70e36868221f2994cd9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6GiQfsHDVWkUf6pXzIQKlg.png"/></div></div></figure><p id="d11e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当我们想要访问 Unity 库时，我们选择<em class="ks"> UnityEngine。UI.Text </em></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kt"><img src="../Images/a591c8ecd4d89f9716aa6a0536cd5a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*rHQCFN7L9JJtRZy41Syy_w.png"/></div></figure><p id="74e5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您使用 Visual Studio 或其他 IDE，它们不会像这里这样通知您，您只需使用 UnityEngine 添加<em class="ks">。UI；</em>在你的<em class="ks"> UIManager.cs </em>脚本的最顶端。</p><p id="47cf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">前 4 行应该是这样的:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ku"><img src="../Images/5d29d3485b4c1fbacf004de5ab05c487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DYUDT1aQPcCdMfKjPJYxFg.png"/></div></div></figure><p id="10c6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">完成后，红色的曲线应该消失了，你的脚本中不应该有任何错误！</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="3ea6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">创建分数变量<br/> </strong>为了存储分数，我们首先需要创建一个变量。让我们在播放器脚本上创建它:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kv"><img src="../Images/aa2852d1b9ea489b76d24cb6d3caccd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*5znD9IYZzN_EmBt3WzAGrQ.png"/></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="0e5a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">访问分数变量<br/> <em class="ks">千万不要</em> </strong>用<em class="ks">公共</em>访问修饰符声明变量！规则是将每个新变量声明为<em class="ks">私有</em>，所以最好坚持这样做。</p><p id="d4a6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了让其他脚本访问变量，我们可以在脚本中创建一个小方法，该方法将简单地返回变量及其值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kv"><img src="../Images/a1086aa6a61466210f0581dbf5354417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*_QWTggjji-7lOWSYYID0Zw.png"/></div></figure><p id="82f2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">打算被其他脚本访问的方法需要<em class="ks"> public </em> access 修饰符，所以其他脚本可以看到该方法。</p><p id="b207" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="ks"> _scoreText </em>文本框存储在 UIManager 上。为了访问我们刚刚创建的 GetScore()方法，我们需要在<em class="ks"> UIManager.cs </em>脚本上创建一个播放器的句柄。</p><p id="45fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，我们需要分配玩家:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kv"><img src="../Images/813d9ddee3bf723d0ae565c1436fc8e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*1h7tHezJko6zbWJyX5HAnw.png"/></div></figure><p id="d6b8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">之后，我们需要分配玩家:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kw"><img src="../Images/012f0ba53f6ba28fffd393aab4a9038d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YccKomdQkns6o_5WtcXIEg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">记得空检查！</figcaption></figure><p id="32e1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在我们能够访问播放器脚本中的公共方法了！因为我们想一直得到分数，所以我们在<em class="ks"> UIManager() </em>脚本的<em class="ks"> Update() </em>方法中调用了<em class="ks"> GetScore() </em>方法。然而，这一行代码<strong class="jq hj">将无法工作</strong>:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kx"><img src="../Images/04394bc6bdfbc2f1f72baecaa5d9ebc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*dyvr7kd5r5J0mX_QVNvkeA.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">这样不行！</figcaption></figure><p id="75f1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为什么？因为我们正在重新分配游戏对象。我们想改变文本而不是游戏对象。因此，我们需要访问<em class="ks"> _scoreText </em>的文本组件。下面一行代码将带给我们想要的行为:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ky"><img src="../Images/044636b816493da5498bc635bf69a073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhgOKXWDnAF_vPwaMLaJHw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">这会有用的</figcaption></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="8138" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">增加分数<br/> </strong>我们知道屏幕上显示的分数。但是，比分始终停留在 0…</p><p id="0007" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了解决这个问题，我们需要在游戏的某一点增加一些分数。谁会喜欢一个分数计数器永远停留在 0 的游戏？😄</p><p id="b71e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们在<em class="ks"> Player.cs </em>脚本中添加一个新方法:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kz"><img src="../Images/4ccd1a891d7c2b10df7eec6ff6c9ac14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HwvrYYZqIxic4_q_uTF9ag.png"/></div></div></figure><ul class=""><li id="574c" class="la lb hi jq b jr js ju jv jx lc kb ld kf le kj lf lg lh li bi translated">因为我们需要从另一个脚本访问这个方法</li><li id="9c27" class="la lb hi jq b jr lj ju lk jx ll kb lm kf ln kj lf lg lh li bi translated">我们想要指定我们想要添加的分数的数量。不同的动作可以增加不同的分数。因此，无论何时调用该方法，我们都将直接键入金额。如果不指定要添加的点，该方法将返回错误。</li><li id="09af" class="la lb hi jq b jr lj ju lk jx ll kb lm kf ln kj lf lg lh li bi translated">最后，我们将把刚刚指定的数量添加到现有的分数中。</li></ul></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="aa90" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">从<em class="ks"> Enemy.cs </em>脚本<br/> </strong>中调用方法现在到了最后一步！每当敌人被激光摧毁时，我们想给玩家 10 分。为此，我们只需要在敌人的<em class="ks"> OnTriggerEnter2D() </em>方法内部添加一行代码。</p><p id="b365" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们只是想给玩家额外的分数，如果敌人与激光相撞。如果敌人与玩家发生碰撞，我们将不会在当前分数上扣分。因此，我们应该将代码添加到<em class="ks"> other 中。比较标记("激光")</em>块。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kv"><img src="../Images/4c83e948e3ea5eabb59ec2dd7980f268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*yVet-b7Z-V-Y9ehgAzXj5Q.png"/></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="0ca4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就是这样！我们成功地在游戏中加入了分数系统！看看最终的结果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/eb6cd9ca35247f40d11e2f20cbc5ac0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Vxen3-LwVVUW2fJUYaWCGw.gif"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">完全工作的评分系统！</figcaption></figure></div></div>    
</body>
</html>