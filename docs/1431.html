<html>
<head>
<title>Show some love for Mocha api tests! Setting up #1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对 Mocha api 测试表现出一些热爱吧！设置#1</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/show-some-love-for-mocha-api-tests-setting-up-1-4ba486fbdf4b?source=collection_archive---------12-----------------------#2021-03-18">https://medium.com/nerd-for-tech/show-some-love-for-mocha-api-tests-setting-up-1-4ba486fbdf4b?source=collection_archive---------12-----------------------#2021-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="89e5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="81fc" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这个故事中，我将使用<code class="du kb kc kd ke b">Express</code>和<code class="du kb kc kd ke b">MongoDB</code>构建简单的 restful api。我将使用<code class="du kb kc kd ke b">Docker-Compose </code>建立测试环境，并为我的所有端点编写 api 测试，没有任何模仿。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="8d0a" class="if ig hi bd ih ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc bi translated">关于我</h1><p id="c224" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我成为<code class="du kb kc kd ke b">Nodejs</code>爱好者已经快三年了，从初级开发人员，到初级全栈工程师，现在是中级开发人员。我的职业生涯主要是用<code class="du kb kc kd ke b">Javascript</code> <em class="kr"> &amp; </em> <code class="du kb kc kd ke b">Typescript</code>框架和<code class="du kb kc kd ke b">AngularJS</code><code class="du kb kc kd ke b">ExpressJS</code><code class="du kb kc kd ke b">React</code>之类的库进行全栈开发。对于软件工程的<code class="du kb kc kd ke b">Devops</code>方面，我也有一些经验，比如使用<code class="du kb kc kd ke b">Terraform</code>、<code class="du kb kc kd ke b">Docker</code>、<code class="du kb kc kd ke b">Teamcity</code>、<code class="du kb kc kd ke b">Nginx</code>等工具。我目前的职位是 AWS 云工程师，这不仅是我的工作，也是我的爱好——掌握 AWS 云。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="a966" class="if ig hi bd ih ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc bi translated">先决条件</h1><ol class=""><li id="9321" class="ks kt hi jf b jg jh jk jl jo ku js kv jw kw ka kx ky kz la bi translated">NodeJS v12.6.0 或更新版本；</li><li id="492c" class="ks kt hi jf b jg lb jk lc jo ld js le jw lf ka kx ky kz la bi translated">NPM 版本 6.14.0 或更新版本；</li><li id="39ca" class="ks kt hi jf b jg lb jk lc jo ld js le jw lf ka kx ky kz la bi translated">Docker v19.03.13 或更新版本；</li><li id="dda5" class="ks kt hi jf b jg lb jk lc jo ld js le jw lf ka kx ky kz la bi translated">Docker-compose v1.27.4 或更新版本；</li><li id="fd48" class="ks kt hi jf b jg lb jk lc jo ld js le jw lf ka kx ky kz la bi translated">Visual Studio 代码(或您喜欢的任何其他代码编辑器)；</li><li id="4750" class="ks kt hi jf b jg lb jk lc jo ld js le jw lf ka kx ky kz la bi translated">JavaScript 和软件开发入门/初级知识。</li></ol></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="b1d9" class="if ig hi bd ih ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc bi translated">让我们开始设置！</h1><p id="f791" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">用<code class="du kb kc kd ke b">npm init</code>命令初始化项目。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/db7be34982c7284aa79a8e74b40abfab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwT83gl3WPTEC6ZUX3_4Ow.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">npm 初始化命令</figcaption></figure><p id="e956" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">然后，安装<code class="du kb kc kd ke b">express</code>、<code class="du kb kc kd ke b">mongoose</code>、<code class="du kb kc kd ke b">mocha</code>和<code class="du kb kc kd ke b">jsonschema</code>进行车身验证。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mb"><img src="../Images/56529029bd01459ec34fc4b381bdd5b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIAu6zTNz0ZUtjL550o7fA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">安装依赖项</figcaption></figure><p id="b434" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">脚手架工程结构。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div class="er es mc"><img src="../Images/6d5c260e6286a8f87bba5f8749d4f32a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*G_jgWOjSbCQeXCmOp1GiUg.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">项目结构</figcaption></figure><h1 id="e189" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">初始化连接到 Mongodb 的 Express 应用程序</h1><p id="8242" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这个很简单。最佳实践是将实际的 express 应用程序与 web 服务器分开，因此创建了两个单独的文件:<code class="du kb kc kd ke b">app.js</code>和<code class="du kb kc kd ke b">server.js</code>(应用程序的入口点)。<code class="du kb kc kd ke b">Mongo-connect.js</code>模块说明了一切——它通过使用 mongoose 库连接到<code class="du kb kc kd ke b">Mongo</code>数据库。文件将保存所有的配置变量，如端口、mongo 连接字符串等，通常这些东西应该来自 env 变量，但为了简单起见，我将硬编码它们。和 routes 目录—这是我们实际的 api 将要存在的地方。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es md"><img src="../Images/5ee0253c8e92263df2a8edfad1e02a1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1a4jjhW_rqF9RMS59GLqlQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">快速应用程序定义— app.js</figcaption></figure><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es me"><img src="../Images/76416123df591aef440e8dae26cbd834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTu7lkI_g5BVpeqTmIWibQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">配置文件— config.js</figcaption></figure><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mf"><img src="../Images/d83ec67bdfa6549bef7a9e719cc9c748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r2VZZR_havMQ3iawa4CALA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">实际 http 服务器— server.js</figcaption></figure><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mg"><img src="../Images/acb6e2708f1a3bd5caffda4bc4f703d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D8FxwqBrBU1NxOa0ihHxFw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">使用 mongose-mongo-connect . js 连接到 mongodb</figcaption></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="a41e" class="if ig hi bd ih ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc bi translated">是不是少了什么？</h1><p id="c701" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">确实是的。<code class="du kb kc kd ke b">Mongodb</code>docker 上运行的服务器。下面是一个 docker 为<code class="du kb kc kd ke b">Mongodb</code>编写文件的好例子:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mh"><img src="../Images/93dff5a9ec0681a2f5da59e934532ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_1_9x7EAvLtYnEG99R9ow.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">docker-为开发环境编写</figcaption></figure><p id="c433" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">但是让我复制这个文件并创建另一个名为<code class="du kb kc kd ke b">docker-compose-tests.yaml</code>的文件:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mi"><img src="../Images/a1e6a77e13a8456d9ce97ff242df8408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SMPxEJzOnkZo3k7xqrjqIw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">docker-为测试环境编写</figcaption></figure><p id="68e2" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">你注意到这一点点不同了吗？没错——港口。开发环境将使用默认的 27017 端口，但是测试环境— 17017。这就是我们如何简单地确保我们将不得不为两种环境分离服务器。另外，这里有一个<code class="du kb kc kd ke b">config.js</code>文件的小更新:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mj"><img src="../Images/fc0e5543e9bff613fb2743ee7c097233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5odLj-3sjj0lfzT7gUco1Q.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">config.js 文件中测试 Mongodb 连接字符串的新条目</figcaption></figure><p id="1646" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">让我们启动这两个容器，命令几乎相同(不要忘记让 docker 服务在您的机器上运行):</p><p id="2e35" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated"><code class="du kb kc kd ke b">docker-compose up -d</code> —这将启动开发合成文件。</p><p id="705b" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated"><code class="du kb kc kd ke b">docker-compose -f docker-compose-tests.yaml up-d</code> —这将启动测试合成文件。</p><p id="31a6" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">要关闭服务，使用相同的命令，但是使用关键字<code class="du kb kc kd ke b">down.</code>代替关键字<code class="du kb kc kd ke b">up</code></p><p id="d45e" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">您可以使用<code class="du kb kc kd ke b">docker container ls</code>验证容器正在运行:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mk"><img src="../Images/9d7df24fba6c7793c277edf314692b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9iEFOn5KmAy8UJUfUakTfA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">码头集装箱 ls 结果</figcaption></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="9a5a" class="if ig hi bd ih ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc bi translated">创建模型并注册路线</h1><p id="f4bd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我将为<code class="du kb kc kd ke b">Items</code>资源创建一个简单的<code class="du kb kc kd ke b">CRUD</code> api。项目模型将非常简单:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ml"><img src="../Images/28bfd2b6084555dda9475803806ed3d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYYi0IJ_AfqFd2TX8qXznw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">项目模型</figcaption></figure><p id="578f" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">注意，我已经创建了<code class="du kb kc kd ke b">models/Item.js</code>目录和模块。</p><p id="40de" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">接下来—注册路由器:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mm"><img src="../Images/7ec89225713797a40d8b295a3afebb45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6AtmYcMjgLgJDEpAHQEeQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">空项目路由器-routes/Items . js</figcaption></figure><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mn"><img src="../Images/6cf5209bcb68a56b11ad5b4853399cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yUMAUyki_ibkbvaz_qF5OA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">Api 路由定义和导出器文件— routes/index.js</figcaption></figure><figure class="lh li lj lk fd ll er es paragraph-image"><div class="er es mo"><img src="../Images/1a63da1445be9e472354c98c0311ee66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*ltR6Q0QH6oCL5q3V-XUBww.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">在 app.js 文件中的 express.json 中间件之后注册它</figcaption></figure></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="b18e" class="if ig hi bd ih ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc bi translated">是时候使用 restful api 了！</h1><p id="b5ad" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这里有五个基本的 crud api 端点:GET /，GET /:id，POST /，PUT /:id，DELETE /:id。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mp"><img src="../Images/3a3f1e2548d4b0712d78ed27f7c8e2fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s14jQGuiwtSGw05QtPNcoQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">模拟路线</figcaption></figure><p id="cff2" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">现在我要做两件事——设置<code class="du kb kc kd ke b">jsonschema</code>验证器并安装<code class="du kb kc kd ke b">express-async-wrap</code>来处理所有异步错误。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mq"><img src="../Images/aaff1a3652f7399291e3e6c48414799d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lH9RD36DcZysJj3M9oI9yw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">jsonschema 验证器实现</figcaption></figure><p id="f513" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">现在是最简单的部分——实现所有的 http api 端点。</p><p id="cfb6" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">GET / —非常简单的 api 端点，它支持两个查询参数——size 和 page，并且一次最多只允许检索 100 个项目，默认为 10 个。另外，请注意<code class="du kb kc kd ke b">X-Total-Count</code>头，它返回数据库中有多少项。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mr"><img src="../Images/4ba77f99e9aca28c9caab0dcb6a1157b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZVUajjrzNAx_keVKkhUoQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">获取/API/项目</figcaption></figure><p id="d137" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">GET/:id——甚至更小的 api 端点，但是不要忘记验证传入的 id！</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ms"><img src="../Images/459c6bed8f39f54336fb44306e6ff1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-w5U4KTR1ULmcRu4XuOqhA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">GET /api/items/:id</figcaption></figure><p id="3bd3" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">POST / —在数据库中创建新条目，但这有一个关键时刻— <em class="kr">总是</em> <em class="kr">验证传入的请求体。</em>此外，注意<code class="du kb kc kd ke b">updateItem</code>函数——它将显式地只使用来自 DTO(数据传输对象)的所需字段。schema 和 updateItem 函数都可以而且应该被 PUT /:id 端点重用。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mt"><img src="../Images/cfb302291e03ec812c96c92f7f141d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pREcdeNpmvS9P9jmlVaNCg.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">帖子/API/项目</figcaption></figure><p id="2284" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">PUT /:id 必须验证 req.params.id 和传入正文。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mu"><img src="../Images/66dbf393a3c1c31ebf1fa02ecd0884db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1MD0PL7bKU8XjT0urV8Y2Q.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">PUT /api/items/:id</figcaption></figure><p id="0364" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">DELETE/:id——没有扭曲，并且您答对了——这必须验证 req.params.id:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mv"><img src="../Images/b32e8743522a264288121ebc08785e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6JDTbSW6ZlAdJp95LpD2aQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">删除/api/items/:id</figcaption></figure><p id="5f2e" class="pw-post-body-paragraph jd je hi jf b jg lw ji jj jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka hb bi translated">另外，在引入<code class="du kb kc kd ke b">NotFound</code>错误后，不要忘记更新<code class="du kb kc kd ke b">app.js</code>中的错误处理程序:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mw"><img src="../Images/2e5fbbeb4bec8c92141247aaa3479624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qxVDFg96iMcPuIL7Yq4vw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">app.js 中的错误处理程序</figcaption></figure><h1 id="fdc2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">就是这样。</h1><p id="fdfb" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们有自己的 api，你可以通过 postman，curl 或者任何你喜欢的工具来测试它。下一个故事将只包括 api 集成测试，没有模拟和我们已经建立的专用 Mongodb。点击<a class="ae mx" href="https://liudas-demikis.medium.com/show-some-love-for-mocha-api-tests-testing-2-342fcd250aeb" rel="noopener">这里</a>可以找到第二部分。</p></div></div>    
</body>
</html>