<html>
<head>
<title>The Strangler Pattern: Microservices Design Patterns In Practice Made Easy with AWS Serverless</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扼杀者模式:实践中的微服务设计模式因AWS无服务器而变得简单</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/the-strangler-pattern-microservices-design-patterns-in-practice-made-easy-with-aws-serverless-97437a82b052?source=collection_archive---------0-----------------------#2021-01-24">https://medium.com/nerd-for-tech/the-strangler-pattern-microservices-design-patterns-in-practice-made-easy-with-aws-serverless-97437a82b052?source=collection_archive---------0-----------------------#2021-01-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/47fa6e6638f589e252a0c5b839e71e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KLUaTJCJP-mAnm6c8_YXaQ.png"/></div></div></figure><p id="8620" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我将解释马丁·福勒发明的著名微服务迁移模式“扼杀者模式”。此外，我将详细解释如何使用AWS无服务器AppSync和Amplify构建它</p><p id="4a0d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文是在实践中解释微服务设计模式的系列文章的一部分</p><p id="d675" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下面的视频中，我将解释马丁·福勒发明的著名微服务迁移模式“扼杀者模式”。此外，我将详细解释如何使用AWS无服务器AppSync和Amplify构建它</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="3899" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当马丁·福勒看到被勒死的无花果树时，他首先发明了这种模式</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ju"><img src="../Images/c0d02b474abafcbcba3dcce5ead354c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vWIarQ-5S3DRdB_MHi-Cfw.png"/></div></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jv"><img src="../Images/fd9ae240c5b23ca92f678cc32e95664e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAmqXH6B_aYUSUU8ZAyc6A.png"/></div></div></figure><p id="0e12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用相同的方法从整体应用迁移(扼杀)到微服务</p><p id="d325" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">首先，我们构建一个扼杀者外观(我在Hands on中使用了app sync)</strong></p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jw"><img src="../Images/15d869ee88e5d6f4505ba933622ac536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jAkw-3oNmCQE45ZNkH_XXw.png"/></div></div></figure><p id="4605" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其次，我们确定一个可以分离的功能，并以渐进的方式将其转移到微服务。我们首先构建微服务，然后迁移功能</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/1f68e5ab86f547d4993a678481b96a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3QH8eGqFEgWlO8u0-4-nAQ.png"/></div></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/a3672ccba4c09f9d1c9eac48d2fc6f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F05b_jAVdkEahKszB7_4-g.png"/></div></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/3ce511203a5fd105d5d7f6e5dd35102c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAbGRdLPbQcUtmLCLloORQ.png"/></div></div></figure><p id="e48b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最终，微服务将扼杀传统的整体，直到它死去。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/05c3eb88ed5a044831dac22daded183b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fsJKgz7QwSc_KR0L9P1cQ.png"/></div></div></figure><p id="9697" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文的其余部分将使用AWS AppSync和Amplify构建一个GraphQL微服务</p><h1 id="ed7d" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">使用AWS AppSync和Amplify构建GraphQL微服务</h1><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/7553429d84d2eb1c5e3d090f7ec09950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/0*MigqeQFWrIz3VGn-.png"/></div></figure><p id="767b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我想创建一个GraphQL微服务。AWS Amplify和AppSync使得在几分钟内构建无服务器和无代码的微服务变得极其容易。展示差异的最佳方式是一起创建微服务。</p><p id="2e8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇短文中，我将解释我如何使用AWS Amplify在工作中构建了一个GraphQL AppSync端点，并将使用截图进行解释(一张照片胜过一堆文字:)</p><p id="15c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最终代码可在以下网址找到</p><div class="la lb ez fb lc ld"><a href="https://github.com/ranyelhousieny/GraphQL_Microservice" rel="noopener  ugc nofollow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">ranyelhousieny/graph QL _ Microservice</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">通过在GitHub上创建帐户，为ranyelhousieny/graph QL _ Microservice开发做出贡献。</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">github.com</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr io ld"/></div></div></a></div><h1 id="487c" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">以下视频中的详细演练:</h1><p id="d24b" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">在这个短视频中，我将解释我如何使用AWS Amplify构建了一个GraphQL AppSync微服务</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="6a9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是我在之前的视频中遵循的步骤</p><ol class=""><li id="c705" class="lx ly hi is b it iu ix iy jb lz jf ma jj mb jn mc md me mf bi translated"><strong class="is hj">安装amplify cli </strong></li></ol><p id="7482" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">sudo NPM install-g @ AWS-amplify/CLI</p><p id="0a9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 2。按照另一篇文章</strong>中的解释创建一个react应用程序</p><p id="e5ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">npx创建-反应-app graqhql-微服务</p><p id="961b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 3。完成后，进入目录并打开VS代码</strong></p><p id="98a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">CD graqhql-微服务</p><p id="15c6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">代码。</p><p id="5254" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 4。初始化放大器</strong></p><p id="b480" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">放大初始化</p><p id="bb7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 5。添加API </strong></p><p id="90a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">放大添加api</p><p id="419d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 6。将更改推送到AWS云</strong></p><p id="07b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">放大推送</p><ol class=""><li id="cb46" class="lx ly hi is b it iu ix iy jb lz jf ma jj mb jn mc md me mf bi translated">在构建模式之后，您需要配置Amplify来将需要的文件注入到您的项目中</li><li id="1790" class="lx ly hi is b it mg ix mh jb mi jf mj jj mk jn mc md me mf bi translated">运行“放大添加api”来添加新的API</li></ol><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/5da1a46e96b6eeb942a2e44164d863b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*QzJcbEkQwxdsJeMV"/></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/d1fbc73fd867f7cfa33e702b48c389de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kjQKONw_YhmFoBhU"/></div></div></figure><p id="dd92" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.使用“放大推送”将您的更改推送到云</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/58a8e6afde0fe17b346a1aee182598ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*KMAEB2yXPmlYFNyD"/></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/8f1049349c623395288fd8bca07a2b65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NH0Nme4B7YtMleIK"/></div></div></figure><p id="cc96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">神奇的是，这将构建您的模式、解析器和数据库表:</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/14153f5d64a6eb836376bfcf33f1dab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*ZoTjcBcFe-oIXQqm"/></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/97cf62fe438207388d57f6fcdc610f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lm1IKIqtmKm71RnL"/></div></div></figure><p id="25bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类型之外的表格</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/a72c6044bcd2fe459c99bb350d2ed5ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*yEd4o0dYew1zcfgR"/></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/977e30099bcc959cfc4c95a78f3a1d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nLf4DQiG0KPCGgwo"/></div></div></figure><p id="2d67" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以使用由AWS自动添加的Mutation来添加员工。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/1a1fea0e83f5aa2d3bc239811dce12c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*xLga0biWMx2h2lUc"/></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/5293699146bb4cdbd4b20c504b7c9f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YJ4Twj4OuhCgDVoY"/></div></div></figure><p id="8d43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，正如您在上面的图片中看到的，文档是自动为您创建的，…太棒了:)</p><p id="c083" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以进入数据库并检查新员工</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/1642ba3abbc2ff08408841337886ea71.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*dStJXwYHBVTcmnf5"/></div></figure><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/c3b9b11a6d3f2c0dc6bf0eb2f2ed4e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nsX2-1kmvdpRHsYy"/></div></div></figure><p id="fe0a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">发布者</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/8feb119314122271b22b17ad82b6bb86.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*10NnLWVy7VkrkRA1"/></div></figure><p id="57ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">PhDᴬᴮᴰ雷尼·埃尔豪斯尼</p><p id="5444" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">高级经理软件工程师，AWS解决方案架构师认证，PSM，ACSA，MIS，UPE，MSCA</p><p id="4343" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">参考文献</strong>:</p><div class="la lb ez fb lc ld"><a href="https://martinfowler.com/bliki/StranglerFigApplication.html" rel="noopener  ugc nofollow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">bliki:奇异应用</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">当辛迪和我去澳大利亚的时候，我们在昆士兰海岸的雨林里呆了一段时间。一个自然的…</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">martinfowler.com</p></div></div><div class="lm l"><div class="mt l lo lp lq lm lr io ld"/></div></div></a></div><div class="la lb ez fb lc ld"><a href="https://dianadarie.medium.com/the-strangler-fig-migration-pattern-2e20a7350511" rel="noopener follow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">扼杀者无花果迁移模式</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">这是一系列从整体到微服务迁移模式的一部分。</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">dianadarie.medium.com</p></div></div><div class="lm l"><div class="mu l lo lp lq lm lr io ld"/></div></div></a></div><div class="la lb ez fb lc ld"><a href="https://ranyel.medium.com/building-a-graphql-microservice-with-aws-appsync-and-amplify-58883d16f472" rel="noopener follow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">使用AWS AppSync和Amplify构建GraphQL微服务</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">由于我们创建了REST微服务，我想创建一个GraphQL微服务。AWS Amplify和AppSync使它…</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">ranyel.medium.com</p></div></div><div class="lm l"><div class="mv l lo lp lq lm lr io ld"/></div></div></a></div><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><div class="la lb ez fb lc ld"><a href="https://www.youtube.com/channel/UCJ6bFYSkBws-ug6fqJ_9CNg" rel="noopener  ugc nofollow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">兰尼·埃尔豪斯尼</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">https://www.linkedin.com/in/ranyelhousieny/·https://rany.elhousieny.com AWS解决方案架构师认证…</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">www.youtube.com</p></div></div><div class="lm l"><div class="mw l lo lp lq lm lr io ld"/></div></div></a></div></div></div>    
</body>
</html>