<html>
<head>
<title>How to optimize SEO with Gatsby &amp; Netlify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Gatsby &amp; Netlify 优化 SEO</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-optimize-seo-with-gatsby-netlify-6ff19ab1737c?source=collection_archive---------16-----------------------#2021-04-03">https://medium.com/nerd-for-tech/how-to-optimize-seo-with-gatsby-netlify-6ff19ab1737c?source=collection_archive---------16-----------------------#2021-04-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/7795881360b120732814ebee10c856be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9OU58IT2dkygBIzb"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">谢尔盖·佐尔金在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><div class=""/><p id="897a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为 SEO 优化网站对很多人来说是一件头疼的事情。谷歌的排名因素由很多元素组成。<strong class="ix hz">最重要的是你页面的链接数量，其次是内容质量、核心网站要素(性能)和用户行为。</strong></p><p id="866a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">性能是最重要的排名因素之一，盖茨比已经让我们占了上风。但是上面的因素并不是你唯一应该关心的。</p><p id="8313" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">二月份，我致力于优化我们和我们客户的网站的现场搜索引擎优化。我设法将 Clean Commit 网站的 ahrefs 分数从 77%更新到 98%。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jt"><img src="../Images/4c06e389a6b8a62fb4df9d2e00808100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5-F4gmXw8-x7LS6F.jpg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">优化前后的 Ahrefs 分数</figcaption></figure><p id="05a5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我将向你展示所有你需要勾选的框，以最大化你的 Gatsby 网站 SEO 潜力。</p><h1 id="8f74" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">建立盖茨比搜索引擎优化问题的工具。</h1><p id="dc66" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">你应该做的第一件事是专注于优化网站的性能。从长远来看，这将对你网站的排名产生巨大的影响。我为 Clean Commit 的博客写了一篇文章，列出了我们用来衡量性能的工具。</p><p id="e3f8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于 SEO，我使用两个主要工具——ahrefs 和 Google 内置的 Lighthouse test。当发布网站时，我们的目标是在桌面上实现 90+的性能，在移动上实现 60+的性能，在搜索引擎优化得分方面达到 99+的性能，所以我们的灯塔得分看起来相当不错。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jt"><img src="../Images/8b5ab5dcc10cc14f1a22d9e94ff74e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kzoROW5x6pEnJRv-.jpg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">我们和盖茨比的速度分数</figcaption></figure><p id="2191" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Ahrefs 提供了关于潜在现场问题的更详细的分析。这是我处理过的列表。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jt"><img src="../Images/c06f1e413a5af46cef0eacfea9d7ff2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bkha24yY2JBj-9j_.jpg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">ahrefs 列出的问题</figcaption></figure><p id="5577" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们开始处理所有的问题吧！</p><h1 id="3ebc" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">通过 Gatsby 为更好的 CTR 提供元数据</h1><p id="c0e5" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">Ahrefs 提出了关于我们网站上的 meta 标签的问题。当创建一个 Gatsby 网站时，使用一个好的、可重用的 SEO 组件是很重要的。该组件将确保所有相关的元标签包含正确的数据。</p><p id="7015" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将 SEO 组件分成两个部分:默认的组件(T12)和一个较小的组件(T13)，前者用 Henlo 设置头部参数，后者修改每个页面。</p><pre class="ju jv jw jx fd lb lc ld le aw lf bi"><span id="8ac3" class="lg jz hy lc b fi lh li l lj lk"><em class="ll">import</em> React <em class="ll">from</em> 'react'<br/><em class="ll">import</em> { Helmet } <em class="ll">from</em> 'react-helmet'<br/><em class="ll">import</em> { graphql, useStaticQuery } <em class="ll">from</em> 'gatsby'</span><span id="a5f3" class="lg jz hy lc b fi lm li l lj lk"><em class="ll">function</em> SEO({ data, children }) {<br/>  <em class="ll">const</em> meta = useStaticQuery(graphql`<br/>    query MetaDataQuery {<br/>      site {<br/>        siteMetadata {<br/>          title<br/>          separator<br/>          baseTitle<br/>          description<br/>          keyword<br/>          image<br/>        }<br/>      }<br/>    }<br/>  `)</span><span id="a121" class="lg jz hy lc b fi lm li l lj lk">  console.log(data)</span><span id="00c5" class="lg jz hy lc b fi lm li l lj lk">  <em class="ll">const</em> metadata = meta.site.siteMetadata<br/>  <em class="ll">const</em> metaDescription = data.description || metadata.description<br/>  <em class="ll">const</em> title = data.title || metadata.title<br/>  <em class="ll">const</em> image = data.image<br/>    ? `${metadata.siteUrl}${data.image.childImageSharp.fluid.src}`<br/>    : metadata.image</span><span id="5ddd" class="lg jz hy lc b fi lm li l lj lk">  <em class="ll">const</em> fullTitle = `${title} ${metadata.separator} ${metadata.baseTitle}`</span><span id="3c0a" class="lg jz hy lc b fi lm li l lj lk">  <em class="ll">return</em> (<br/>    &lt;Helmet<br/>      title={title}<br/>      titleTemplate={`%s ${metadata.separator} ${metadata.baseTitle}`}&gt;<br/>      &lt;meta name='description' content={metaDescription} /&gt;<br/>      &lt;meta property='og:title' content={fullTitle} /&gt;<br/>      &lt;meta property='og:image' content={image} /&gt;<br/>      &lt;meta property='og:description' content={metaDescription} /&gt;<br/>      &lt;meta name='twitter:title' content={fullTitle} /&gt;<br/>      &lt;meta name='twitter:description' content={metaDescription} /&gt;<br/>      &lt;meta name='twitter:image' content={image} /&gt;<br/>      {children}<br/>    &lt;/Helmet&gt;<br/>  )<br/>}</span><span id="5a08" class="lg jz hy lc b fi lm li l lj lk"><em class="ll">export</em> <em class="ll">default</em> SEO</span><span id="035a" class="lg jz hy lc b fi lm li l lj lk"><em class="ll">export</em> <em class="ll">const</em> query = graphql`<br/>  fragment SEO on MarkdownRemarkFrontmatter {<br/>    seo {<br/>      title<br/>      description<br/>      image {<br/>        childImageSharp {<br/>          fluid(maxWidth: 1200, quality: 100) {<br/>            ...GatsbyImageSharpFluid_noBase64<br/>          }<br/>        }<br/>      }<br/>    }<br/>  }<br/>`</span></pre><p id="eb56" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">SEO 组件附带了一个片段来加载所有需要的信息，而不需要重复代码，使得将来的更改更快更容易。您在<a class="ae hv" href="https://mrkaluzny.com/blog/dry-netlify-cms-config-with-manual-initialization/" rel="noopener ugc nofollow" target="_blank"> Netlify CMS 中设置 SEO partial，使用手动初始化在所有内容类型中重用它</a></p><p id="45d2" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">优化元数据对 SEO 优化很重要。<strong class="ix hz">元数据的内容不会真正影响你的排名</strong>，谷歌可以忽略提供的内容生成片段。说<strong class="ix hz">好的元数据内容会影响你的点击率(CTR)。把元数据想象成内容的预览，如果你能概括出最重要的信息，访问者点击你的链接的几率会更大。<a class="ae hv" href="https://jamseotools.com/" rel="noopener ugc nofollow" target="_blank">使用这个工具</a>确保你的标题和描述长度正确，易于阅读。</strong></p><h1 id="1c0b" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">避免盖茨比中多余的 301 重定向</h1><p id="c842" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">我遇到的最大问题是 301 重定向。<strong class="ix hz"> 301 重定向是重定向流量的正确方法，不应该直接影响你的搜索引擎优化工作。</strong>与此同时，301 重定向增加了加载时间，而且大多数时候根本不需要。确保内部链接中没有 301 重定向是很重要的。</p><p id="a978" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">开箱即用盖茨比用尾随斜线建立路径。</strong>如果你愿意，<a class="ae hv" href="https://www.gatsbyjs.com/plugins/gatsby-plugin-remove-trailing-slashes/" rel="noopener ugc nofollow" target="_blank">你可以使用 Gatsby-plugin-remove-trailing-slashes</a>从路径中删除尾随斜线。有些人直接在<code class="du ln lo lp lc b">gatsby-node.js</code>中删除路径的尾部斜杠，但是我建议不要在。</p><p id="098c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">使用 Netlify 时，最好使用带有尾随斜线的路径。</strong> Netlify 将匹配重定向规则的路径，不管它们是否包含尾随斜杠。没有尾随斜杠的路径可能会导致无限重定向循环和意外行为。</p><p id="4515" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了避免创建意外的重定向，确保在<code class="du ln lo lp lc b">Link</code>组件中使用正确的路径。</p><pre class="ju jv jw jx fd lb lc ld le aw lf bi"><span id="7b1b" class="lg jz hy lc b fi lh li l lj lk">&lt;Link to='/about'&gt;About us&lt;/Link&gt;</span></pre><p id="1ea9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此链接会导致 301 重定向(在 Netlify 上会)</p><pre class="ju jv jw jx fd lb lc ld le aw lf bi"><span id="4434" class="lg jz hy lc b fi lh li l lj lk">&lt;Link to='/about/'&gt;About us&lt;/Link&gt;</span></pre><p id="0eaf" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此链接不会导致 301 重定向</p><h1 id="c852" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">避免 Netlify 上的 Gatsby 中的重定向链</h1><p id="5a01" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">Netlify 导致一个现成的重定向链。它将<a class="ae hv" href="http://www.domain.com/" rel="noopener ugc nofollow" target="_blank">http://www.domain.com</a>重定向到<a class="ae hv" href="https://www.domain.com/" rel="noopener ugc nofollow" target="_blank">https://www.domain.com</a>到<a class="ae hv" href="https://domain.com/" rel="noopener ugc nofollow" target="_blank">https://domain.com</a>。</p><p id="e461" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个重定向是一个非常简单的修复方法。您所要做的就是向<code class="du ln lo lp lc b">_redirects</code>文件添加自定义重定向。</p><pre class="ju jv jw jx fd lb lc ld le aw lf bi"><span id="c503" class="lg jz hy lc b fi lh li l lj lk">https://domain.netlify.app/* https://domain.com/:splat 301!<br/>http://www.domain.com/* https://domain.com/:splat 301!<br/>http://domain.com/* https://domain.com/:splat 301!</span></pre><h1 id="b9bc" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">为更好的索引生成网站地图</h1><p id="c458" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">你应该做的下一件事是为更好的索引生成一个站点地图。这将是一个平凡的任务，但幸运的是，我们可以利用 Gatsby 的插件来完成繁重的工作。</p><p id="6a87" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我的网站地图插件是<a class="ae hv" href="https://www.gatsbyjs.com/plugins/gatsby-plugin-advanced-sitemap/" rel="noopener ugc nofollow" target="_blank">盖茨比-插件-高级-网站地图</a>。如果你不想修改站点地图的内容，你所要做的就是把这个插件添加到 gatsby-config 中。一旦你的网站建成，网站地图将在 https://domain.com/sitemap.xml 下可用。</p><p id="2e99" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了确保谷歌获取网站，你可以使用<a class="ae hv" href="https://search.google.com/search-console/about" rel="noopener ugc nofollow" target="_blank">谷歌搜索控制台工具</a>。你所需要做的就是添加域名，在你的 DNS 上用一个 TXT 记录来验证它。</p><p id="09eb" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">验证您的域后，您可以导航到左侧导航中索引下的 Sitemap 选项卡。在那里你可以<strong class="ix hz">提交你的网站地图的 URL，让谷歌知道你的网站已经准备好被索引了。</strong></p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jt"><img src="../Images/6314abe5183cefc60fbdde213333650c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IpPMHy6lTLRIER4O.jpg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">向 Google 搜索添加域名</figcaption></figure><p id="0c59" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谷歌的搜索控制台是一个很好的工具，可以随时关注你在谷歌的排名，平均点击率，并检测页面的潜在问题。</p><h1 id="a0fc" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">优化 Gatsby SEO 的快速总结</h1><ol class=""><li id="f777" class="lq lr hy ix b iy kw jc kx jg ls jk lt jo lu js lv lw lx ly bi translated">关注绩效改进</li><li id="dec8" class="lq lr hy ix b iy lz jc ma jg mb jk mc jo md js lv lw lx ly bi translated">为更好的 CTR 提供元数据信息</li><li id="075b" class="lq lr hy ix b iy lz jc ma jg mb jk mc jo md js lv lw lx ly bi translated">避免不必要的 301 重定向</li><li id="3fda" class="lq lr hy ix b iy lz jc ma jg mb jk mc jo md js lv lw lx ly bi translated">使用 Netlify 时避免重定向链</li><li id="1397" class="lq lr hy ix b iy lz jc ma jg mb jk mc jo md js lv lw lx ly bi translated">生成网站地图并提交给谷歌搜索控制台</li></ol><p id="ec85" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你想改善与 Gatsby 一起工作的体验，请阅读<a class="ae hv" href="https://mrkaluzny.com/blog/dry-netlify-cms-config-with-manual-initialization/" rel="noopener ugc nofollow" target="_blank">这篇关于 Netlify CMS 的干式配置的文章&amp; Gatsby </a></p></div></div>    
</body>
</html>