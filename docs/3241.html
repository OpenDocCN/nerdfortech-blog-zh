<html>
<head>
<title>Building a Windows Service Using .NET Core</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用构建Windows服务。网络核心</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/building-a-windows-service-using-net-core-fdc68901b12f?source=collection_archive---------2-----------------------#2021-06-03">https://medium.com/nerd-for-tech/building-a-windows-service-using-net-core-fdc68901b12f?source=collection_archive---------2-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="db95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想定期工作，Windows服务可能是一个好的解决方案。我必须重复一些短语，我想把它们发送到我的手机上。我想我不能为此创建一个移动应用程序。还有，我不喜欢手机编程。我正在使用Slack应用程序，我想我可以通过Slack发送它们。我找到了一篇关于Slack集成的文章，并创建了我的应用程序。出版对我来说是个问题。我没有服务器，我只有一台个人电脑。当时我以为我可以把我的应用作为Windows服务来使用。我想解释一下如何创建一个Windows服务。</p><p id="98a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，创建一个新的工人服务。NET核心项目。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/910631fb048e02784e6cb8dc94a9dff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*osS5OrDoXMZ8lT3lozThIg.png"/></div></div></figure><p id="d947" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将下面的包安装到您的项目中。</p><ul class=""><li id="82f7" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">微软。扩展。托管</li><li id="5af7" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated"><strong class="ih hj">微软。extensions . hosting . windows services</strong></li><li id="9521" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">Serilog。AspNetCore</li></ul><p id="cf3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更改Program.cs CreateHostBuilder()方法。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ke kf l"/></div></figure><p id="4b20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们调用<strong class="ih hj"> UseSerilog() </strong>方法将日志写到文件中。我们调用了<strong class="ih hj"> UseWindowsService() </strong>方法，因为我们想使用worker服务作为Windows服务。</p><p id="7376" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开Worker.cs文件。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ke kf l"/></div></figure><p id="633a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里你可以做任何事。发消息，发邮件，备份数据库等。</p><p id="65f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为日志记录创建一个txt文件。打开appsettings.json并添加这些配置设置。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ke kf l"/></div></figure><p id="060b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不要忘记正确地改变路径。否则，您将看不到文件中的日志。</p><h1 id="ccb1" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">发布工人服务项目</h1><p id="e45b" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">打开控制台并转到您的项目目录。</p><p id="374a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下命令:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ke kf l"/></div></figure><p id="34b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您将在项目中看到bin \ release \ netcoreapp3.1 \ publish目录。打开发布文件夹时，可以看到项目的exe文件。</p><p id="caeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在将创建一个新的Windows服务。以管理员身份打开控制台，在发布的项目目录下运行创建服务命令。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ke kf l"/></div></figure><p id="31cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开“服务”时，您将看到您的Windows服务。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lj"><img src="../Images/a280d2ad59ecbec74c6ae6f3cd0da74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yviC1O6pJEAf7RC4nX0uxQ.png"/></div></div></figure><p id="b684" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您重新启动电脑时，它会自动启动。因为我们在创建Windows服务时使用了start= auto。如果你愿意，你可以第一次手动启动它。您将在日志文件中看到日志。</p><p id="beee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不使用您的服务，您可以通过以下命令将其删除:</p><blockquote class="lk ll lm"><p id="1f94" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">sc删除“您的服务名称”</p></blockquote><p id="e2be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您可以查看<a class="ae jd" href="https://github.com/emreerkoca/article-samples/tree/master/ArticleSamples/SampleWindowsService" rel="noopener ugc nofollow" target="_blank">这个</a>存储库。</p></div></div>    
</body>
</html>