<html>
<head>
<title>Spring app on Heroku cloud with Continuous deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Heroku cloud上持续部署的Spring应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/spring-app-on-heroku-cloud-with-continuous-deployment-328ff8fbfe7a?source=collection_archive---------13-----------------------#2021-04-14">https://medium.com/nerd-for-tech/spring-app-on-heroku-cloud-with-continuous-deployment-328ff8fbfe7a?source=collection_archive---------13-----------------------#2021-04-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2a86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快速阅读📖在互联网上发布网络应用🌐。容易，没有压倒性的服务🤖比如AWS或者谷歌云。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/001b4060efc316d8726fe37b2d0dfdcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*E_nu_u8rJoGzOGZ7DCv7BQ.png"/></div></figure><p id="fef9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Heroku ☁️是一个基于Salesforce的<strong class="ih hj">平台即服务</strong>，它简化了<strong class="ih hj">软件发布</strong>的痛苦部分——构建、服务器、负载平衡、日志、监控和部署<strong class="ih hj">，让开发人员将</strong>专注于<strong class="ih hj">编码</strong>💻。</p><blockquote class="js jt ju"><p id="fdd0" class="if ig jv ih b ii ij ik il im in io ip jw ir is it jx iv iw ix jy iz ja jb jc hb bi translated">请在<a class="ae jz" href="https://www.heroku.com/dynos" rel="noopener ugc nofollow" target="_blank"> Heroku docs </a>阅读相关内容。</p></blockquote><p id="76f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应用程序托管在Heroku的云上，在类似docker的专有容器dynos中。</p><blockquote class="js jt ju"><p id="b12e" class="if ig jv ih b ii ij ik il im in io ip jw ir is it jx iv iw ix jy iz ja jb jc hb bi translated">Heroku是技术栈不可知的，它支持Python，node，PHP和其他几个栈。</p></blockquote><p id="e050" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的文章需要对GitHub、Spring Boot和Maven有基本的了解。</p><h1 id="608a" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak"> GitHub设置</strong></h1><p id="b5d4" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi ld translated">首先，你需要spring应用程序🍃GitHub存储库中的代码库。我以下面的回购为例。</p><p id="35ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">知识库:<a class="ae jz" href="https://github.com/arjunchakri/sherlock-heroku-poc" rel="noopener ugc nofollow" target="_blank">https://github.com/arjunchakri/sherlock-heroku-poc</a></p><p id="aca4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置您的spring应用程序代码，并在pom.xml中声明<a class="ae jz" href="https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/" rel="noopener ugc nofollow" target="_blank">spring-boot-maven-plugin</a>，以便在构建后生成二进制文件。(使用“mvn干净包”)</p><p id="ba73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi ld translated"><span class="l le lf lg bm lh li lj lk ll di"> O </span>需要说明的一件重要事情是你的应用程序的入口点<strong class="ih hj">。Heroku infrastructure在您的项目根目录中寻找一个“Procfile”文件。</strong></p><pre class="jl jm jn jo fd lm ln lo lp aw lq bi"><span id="e296" class="lr kb hi ln b fi ls lt l lu lv">web: java -Dserver.port=$PORT $JAVA_OPTS -jar target/herokupoc-*.jar</span></pre><ul class=""><li id="7be2" class="lw lx hi ih b ii ij im in iq ly iu lz iy ma jc mb mc md me bi translated">这是在Heroku cloud中使用包目标构建项目后，应用程序的入口点。</li><li id="dabd" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mb mc md me bi translated">根据项目的工件ID，编辑上面的二进制名称。</li><li id="944a" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mb mc md me bi translated">在部署期间，端口将被设置为动态端口号。</li></ul><p id="7f07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦spring服务器从本地构建的jar成功运行，就将代码推送到您的git存储库。</p><h1 id="068c" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Heroku设置</h1><p id="bebe" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi ld translated">现在代码库已经准备好了，让我们在Heroku上设置一些东西。如前所述，Heroku</p><blockquote class="js jt ju"><p id="d00f" class="if ig jv ih b ii ij ik il im in io ip jw ir is it jx iv iw ix jy iz ja jb jc hb bi translated">Heroku目前有一个<a class="ae jz" href="https://www.heroku.com/pricing" rel="noopener ugc nofollow" target="_blank">自由层</a>🎁使用有限。应用程序在30分钟不活动后进入睡眠状态(一旦被调用，大约需要30秒才能上线)，并且只有有限的动态时间。</p><p id="b92b" class="if ig jv ih b ii ij ik il im in io ip jw ir is it jx iv iw ix jy iz ja jb jc hb bi translated">保费等级<strong class="ih hj">💰</strong>提供更多功能，使应用程序生产就绪，扩展、监控、记录和提升服务器内存和CPU。</p></blockquote><p id="e5b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在https://www.heroku.com/<a class="ae jz" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank">注册新账户</a></p><p id="71a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您现在将看到<strong class="ih hj"> Heroku仪表板</strong>，发布电子邮件验证和协议。选择<strong class="ih hj">新建</strong> - &gt;新建一个app。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="er es mk"><img src="../Images/75b1b3174c61b2c2b4f9c19f4ddf8957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RRsMnNP4wIi-tLvzd9jGZg.png"/></div></div><figcaption class="mp mq et er es mr ms bd b be z dx translated">Heroku应用仪表板</figcaption></figure><p id="2931" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请谨慎选择应用程序名称，因为它将是该应用程序的公共URL。</p><pre class="jl jm jn jo fd lm ln lo lp aw lq bi"><span id="1463" class="lr kb hi ln b fi ls lt l lu lv"><strong class="ln hj">appname</strong>.herokuapp.com</span></pre><p id="f3a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择唯一的应用程序名称后，从部署部分连接您的GitHub帐户。然后连接您的存储库。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="er es mt"><img src="../Images/d7491a168fbf4d8908dca60a7f2bebdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aBGELVYnL7RB30kprajeYQ.png"/></div></div><figcaption class="mp mq et er es mr ms bd b be z dx translated">Heroku应用仪表板—部署选项卡</figcaption></figure><p id="aab8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一次，点击“部署分支”按钮，Heroku检查您的代码，运行Maven build，并发布您的应用程序。</p><p id="df3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保启用自动部署选项🔄—非常适合启用了<strong class="ih hj">连续部署</strong>的暂存环境。</p><blockquote class="js jt ju"><p id="0450" class="if ig jv ih b ii ij ik il im in io ip jw ir is it jx iv iw ix jy iz ja jb jc hb bi translated">持续部署？你推送到Git库的任何代码更改都会触发一个新的构建并重新部署应用。</p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="er es mu"><img src="../Images/2f80ab4674f0da9a0f31aa100892894e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YfLs-RJhDUHm-D0CmriFLA.png"/></div></div></figure><p id="c0ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以从“设置”选项卡-&gt;域中查看您的应用程序的公共URL。</p><p id="b7af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jz" href="https://sherlock-test.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://sherlock-test.herokuapp.com/</a></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="er es mv"><img src="../Images/e7f9445d06f68a4f90f6f8c8394314a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cptRQwI3pOmHXHlj3HthwA.png"/></div></div></figure><p id="d6d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi ld translated">奥拉，你的应用程序现已上线🎉！！<br/>此外，对您的存储库的代码更改将在几分钟内生效！！</p></div></div>    
</body>
</html>