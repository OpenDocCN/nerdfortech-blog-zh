<html>
<head>
<title>Bypassing Captcha using 2Captcha and Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用2Captcha和Javascript绕过验证码</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/bypassing-captcha-using-2captcha-and-javascript-e4cc387024e6?source=collection_archive---------1-----------------------#2021-10-25">https://medium.com/nerd-for-tech/bypassing-captcha-using-2captcha-and-javascript-e4cc387024e6?source=collection_archive---------1-----------------------#2021-10-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="db4a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是验证码？</h1><p id="1d20" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">任何使用过互联网的人都一定知道验证码。它是一种在线服务，知道一个人正在交互或浏览互联网，而不是一个机器人或自动化软件。</p><p id="7232" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">CAPTCHA代表完全自动化的公共图灵测试，用于区分计算机和人类。</p><p id="1644" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果没有验证码，将很难确定机器人执行的自动操作和人类执行的手动操作之间的差异。</p><p id="5d9a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们看到的最流行的验证码之一要求用户输入如下图所示的字母。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kg"><img src="../Images/76d396d30aaa9225a0d3680eedfde73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*MHqIWdansPvRMEmUK2KNPw.png"/></div></figure><p id="4bec" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">但是，近年来验证码已经以各种方式发展，比如识别图片识别、小游戏、复选框选择等等。</p><p id="c224" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">随着新的方式，验证码已经成为最令人沮丧和无效的用户界面功能之一。让我们探索旨在解决这个问题的2章。</p><h1 id="79e5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是2Captcha？</h1><p id="8fb4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><a class="ae ko" href="https://2captcha.com/" rel="noopener ugc nofollow" target="_blank"> 2Captcha </a>是一款人工图像和验证码识别服务。该服务旨在帮助用户快速准确地解决验证码。</p><p id="7b1c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2Captcha也付钱给你解决验证码问题。验证码通常在图像中包含扭曲的文本。用户需要输入答案才能访问网站，并验证他们不是机器人。</p><p id="fb0d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2Captcha解决各种验证码。为了将2Captcha集成到我们的系统中，我们可以在这里引用它们的API端点<a class="ae ko" href="https://2captcha.com/2captcha-api" rel="noopener ugc nofollow" target="_blank"/>。不同类型的验证码，如hCaptcha、reCaptcha、图像验证码、普通验证码、文本验证码，可以使用2Captcha服务进行解析。我们可以在这里查阅支持的验证码的完整列表<a class="ae ko" href="https://2captcha.com/2captcha-api#solving_captchas" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="86e0" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">集成2个章节</h1><h2 id="25cc" class="kp ig hi bd ih kq kr ks il kt ku kv ip jo kw kx it js ky kz ix jw la lb jb lc bi translated">帐户设置</h2><ul class=""><li id="57d1" class="ld le hi jf b jg jh jk jl jo lf js lg jw lh ka li lj lk ll bi translated">如果您已经在2Captcha上注册，我们可以跳过这一步。如果没有，我们需要首先使用这个<a class="ae ko" href="https://2captcha.com/auth/register" rel="noopener ugc nofollow" target="_blank">链接</a>在2Captcha上注册。</li><li id="2215" class="ld le hi jf b jg lm jk ln jo lo js lp jw lq ka li lj lk ll bi translated">一旦注册，我们将获得我们的API密钥，它将在集成过程中使用。要使用2Captcha的服务，我们需要为Captcha请求和处理支付象征性的费用。</li></ul><h2 id="e469" class="kp ig hi bd ih kq kr ks il kt ku kv ip jo kw kx it js ky kz ix jw la lb jb lc bi translated">使用2Captcha和Javascript解析Captcha</h2><p id="96e4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们将为此集成建立一个新项目。打开您选择的IDE并创建一个新的应用程序<code class="du lr ls lt lu b">solve-captcha</code>。</p><ol class=""><li id="3147" class="ld le hi jf b jg kb jk kc jo lv js lw jw lx ka ly lj lk ll bi translated"><strong class="jf hj">在Mac上，我们可以在终端中执行下面的命令。</strong></li></ol><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="70dc" class="kp ig hi lu b fi md me l mf mg">mkdir solve-captcha</span><span id="c069" class="kp ig hi lu b fi mh me l mf mg">cd solve-captcha</span><span id="15a5" class="kp ig hi lu b fi mh me l mf mg">npm init -y</span></pre><p id="2bfd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在最后一步中，我们已经使用<code class="du lr ls lt lu b">npm</code>初始化了项目，它直接添加了<code class="du lr ls lt lu b">package.json</code>。</p><p id="99ce" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 2。创建index.js文件</strong></p><p id="9fab" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">然后，我们将一个新文件<code class="du lr ls lt lu b">index.js</code>添加到项目的根目录中。在终端上，我们可以执行</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="30ea" class="kp ig hi lu b fi md me l mf mg">touch index.js</span></pre><p id="b306" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 3。安装2个Captcha和Axios </strong></p><p id="0fbb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以在这里找到2Captcha <a class="ae ko" href="https://www.npmjs.com/package/2captcha" rel="noopener ugc nofollow" target="_blank">的Javascript包。Axios是一个基于Promise的HTTP客户端，用于浏览器和node.js。</a></p><p id="9674" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以执行下面的命令将这两个包添加到我们的应用程序中。</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="5165" class="kp ig hi lu b fi md me l mf mg">npm i 2captcha axios</span></pre><p id="8a0c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 4。geeksforgeeks.org reCAPTCHA</strong></p><p id="629a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">当新用户在他们的平台上注册时，很少有网站使用验证码。在我们的集成示例中，我们将使用<a class="ae ko" href="https://www.geeksforgeeks.org/" rel="noopener ugc nofollow" target="_blank"> geeksforgeeks </a>。</p><p id="2ccd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">geekforgeeks的注册模式就是这样出现的。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mi"><img src="../Images/cb13997f93fd15ffbb5c3552b99f2980.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*IYZQS0L3Ekx1KHLxox1VWg.png"/></div></figure><p id="f058" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如上所述，geeksforgeeks使用Google的reCAPTCHA来识别真正的用户。Google reCAPTCHA集成是使用sitekey完成的。我们可以在<a class="ae ko" href="https://2captcha.com/2captcha-api#solving_recaptchav2_new" rel="noopener ugc nofollow" target="_blank"> 2Captcha的API文档</a>中找到geeksforgeeks sitekey。</p><p id="27f4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">简而言之，我们搜索<a class="ae ko" href="http://www.google.com/recaptcha/api2/anchor" rel="noopener ugc nofollow" target="_blank"><strong class="jf hj">www.google.com/recaptcha/api2/anchor</strong></a>或者找到<strong class="jf hj"> data-sitekey </strong>参数。我们复制链接的<strong class="jf hj"> k </strong>参数的值或者复制<strong class="jf hj"> data-sitekey </strong>参数的值。geeksforgeeks的sitekey是<strong class="jf hj">6 lexf 0 suaaaaadiqjz 9 BMI srqpritl-tWYDSfWa</strong>。</p><p id="cbb4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 5。Javascript和2Captcha </strong></p><p id="101a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们开始向index.js文件添加更改。</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="a622" class="kp ig hi lu b fi md me l mf mg">const axios = require("axios");<br/>const captcha = require("2captcha");<br/>var FormData = require("form-data");</span></pre><p id="2a3c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">a.我们首先需要必要的集成包。</p><ul class=""><li id="2f13" class="ld le hi jf b jg kb jk kc jo lv js lw jw lx ka li lj lk ll bi translated">axios用于HTTP请求。</li><li id="ccfb" class="ld le hi jf b jg lm jk ln jo lo js lp jw lq ka li lj lk ll bi translated">2captcha用于求解captcha。</li><li id="5b42" class="ld le hi jf b jg lm jk ln jo lo js lp jw lq ka li lj lk ll bi translated">FormData用于提交注册数据。</li></ul><p id="2be3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">b.使用2Captcha API键初始化2Captcha解算器</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="0d3d" class="kp ig hi lu b fi md me l mf mg">const solver = new captcha.Solver("&lt;Our API key&gt;");</span></pre><p id="7f0c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">c.使用2Captcha求解器方法求解Google的reCAPTCHA。</p><p id="307b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2captcha包公开了一个方法<strong class="jf hj"> recaptcha </strong>来解析recaptcha。它期望将<strong class="jf hj"> sitekey </strong>和<strong class="jf hj"> pageurl </strong>作为参数。</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="1a61" class="kp ig hi lu b fi md me l mf mg">const { data } = await solver.recaptcha(<br/>  "6LexF0sUAAAAADiQjz9BMiSrqplrItl-tWYDSfWa",<br/>  "https://www.geeksforgeeks.org/"<br/>);</span></pre><p id="5881" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">d.提交表单数据。</p><p id="bb04" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">一旦我们得到了<strong class="jf hj"> recaptcha </strong>方法响应，我们就创建表单数据来将必要的数据传递给geeksforgeeks auth端点。</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="b851" class="kp ig hi lu b fi md me l mf mg">var bodyFormData = new FormData();<br/>bodyFormData.append("reqType", "Register");<br/>bodyFormData.append("email", "12sam1234@sam.co");<br/>bodyFormData.append("pass", "sam1234!@#$");<br/>bodyFormData.append("institute", "big data");<br/>bodyFormData.append("g-recaptcha-response", data);<br/>bodyFormData.append("to", "https://auth.geeksforgeeks.org/?to=https://www.geeksforgeeks.org/");</span></pre><p id="b4e4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们使用Axios提交上面生成的表单数据。</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="a06b" class="kp ig hi lu b fi md me l mf mg">axios({<br/>  method: "post",<br/>  url: "https://auth.geeksforgeeks.org/auth.php",<br/>  data: bodyFormData,<br/>  headers: {<br/>    "Content-Type": "application/x-www-form-urlencoded",<br/>    "Accept": "application/json, text/javascript, */*; q=0.01"<br/>  },<br/>})<br/>.then(function (response) {<br/>  console.log("In success");<br/>  console.log(response.data);<br/>})<br/>.catch(function (response) {<br/>  console.log("In failure");<br/>  console.log(response);<br/>});</span></pre><p id="8947" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">整个index.js文件如下所示:</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="2a83" class="kp ig hi lu b fi md me l mf mg">const axios = require("axios");<br/>const captcha = require("2captcha");<br/>var FormData = require('form-data');</span><span id="25be" class="kp ig hi lu b fi mh me l mf mg">const solver = new captcha.Solver("&lt;My API key&gt;");</span><span id="7ad0" class="kp ig hi lu b fi mh me l mf mg">const bypassWebsiteCaptcha = async () =&gt; {<br/>  console.log("Initiate captcha process");</span><span id="1f27" class="kp ig hi lu b fi mh me l mf mg">  try {<br/>    const { data } = await solver.recaptcha(<br/>      "6LexF0sUAAAAADiQjz9BMiSrqplrItl-tWYDSfWa",<br/>      "https://www.geeksforgeeks.org/"<br/>    );</span><span id="b2d0" class="kp ig hi lu b fi mh me l mf mg">    var bodyFormData = new FormData();<br/>    bodyFormData.append("reqType", "Register");<br/>    bodyFormData.append("email", "12sam1234@sam.co");<br/>    bodyFormData.append("pass", "sam1234!@#$");<br/>    bodyFormData.append("institute", "big data");<br/>    bodyFormData.append("g-recaptcha-response", data);<br/>    bodyFormData.append("to", "https://auth.geeksforgeeks.org/?to=https://www.geeksforgeeks.org/");</span><span id="0f44" class="kp ig hi lu b fi mh me l mf mg">    axios({<br/>      method: "post",<br/>      url: "https://auth.geeksforgeeks.org/auth.php",<br/>      data: bodyFormData,<br/>      headers: { "Content-Type": "application/x-www-form-urlencoded", "Accept": "application/json, text/javascript, */*; q=0.01" },<br/>    })<br/>    .then(function (response) {<br/>      console.log("In success");<br/>      console.log(response.data);<br/>    })<br/>    .catch(function (response) {<br/>      console.log("In failure");<br/>      console.log(response);<br/>    });<br/>  } catch (err) {<br/>    console.log("In catch");<br/>    console.log(err);<br/>  }<br/>};</span><span id="284a" class="kp ig hi lu b fi mh me l mf mg">bypassWebsiteCaptcha();</span></pre><p id="788b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">注</strong></p><p id="d1eb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们在<strong class="jf hj">尝试中添加了步骤5.c和5.d..抓住</strong>挡块。</p><p id="25fd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">e.<strong class="jf hj">执行index.js </strong></p><p id="39ba" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">运行以下命令并验证响应</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="6bfc" class="kp ig hi lu b fi md me l mf mg">node index</span></pre><p id="93ae" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们的响应应该如下所示:</p><pre class="kh ki kj kk fd lz lu ma mb aw mc bi"><span id="6a39" class="kp ig hi lu b fi md me l mf mg">Alkeshs-MacBook-Pro:solve-captcha alkeshghorpade$ node index<br/>Initiate captcha process<br/>In success<br/>{"extra":"&lt;div class=\"alert alert-info\"&gt;An email has been sent to your given address. Please click the link in the mail to continue.&lt;\/div&gt;","code":2000}</span></pre><p id="f985" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这意味着我们已经成功绕过了验证码。这里的我们可以参考全代码库<a class="ae ko" href="https://github.com/alkesh26/solve-captcha" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="6ab4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">注</strong></p><p id="e8d0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">很多像geekforgeeks这样的网站都在使用验证码。这个博客仅用于教育目的。请不要将以上步骤用于任何恶意行为。</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><p id="c527" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mq">原载于</em><a class="ae ko" href="https://alkeshghorpade.me/post/solving-captcha-using-javascript-and-2Captcha" rel="noopener ugc nofollow" target="_blank"><em class="mq">https://alkeshghorpade . me</em></a><em class="mq">。</em></p></div></div>    
</body>
</html>