<html>
<head>
<title>Catch every request error in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">捕捉 Angular 中的每个请求错误</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/catch-every-request-error-in-angular-da6d76225da6?source=collection_archive---------1-----------------------#2022-01-12">https://medium.com/nerd-for-tech/catch-every-request-error-in-angular-da6d76225da6?source=collection_archive---------1-----------------------#2022-01-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7642" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">HTTP 拦截器</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/4693ada3791a27aa72264943468de109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0w9Pg48eJbmnlgVOqdkK9g.jpeg"/></div></div></figure><p id="14ea" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">angular 中的简单请求是这样的。您注入了一个 HTTP 客户端，订阅了 GET 或 POST 请求，当然，您还创建了一个错误处理程序。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kf"><img src="../Images/779f65e6013cdb0ec3741800fe70dc6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iaik1XlREj2lNyBTOsB9lg.png"/></div></div></figure><p id="71ff" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一个简单的项目可能有 50-200 个请求订阅。想象一下，现在您需要记录请求中的每个错误。你怎么做到的？</p><p id="7c10" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">嗯，您可以为每个错误处理程序添加一个新的日志逻辑。这个计划会花很多时间，但会成功的。该计划的问题是，当您进行新的请求订阅时，您需要在错误处理程序中放置一个日志记录逻辑。你可能会忘记做那件事。</p><p id="7c47" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">相反，我们可以创建一个拦截器，通过检查它的状态代码来分析每个响应。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kg"><img src="../Images/0e6400c956675ce6ba3ef1493f1c5c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k6xKVnTQWY34VYlU6FdK_A.png"/></div></div></figure><p id="374e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们需要在提供者部分的主模块中添加这个拦截器。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kh"><img src="../Images/e091ab1bad70dcce680d335b597160f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-L6Iv6VCuePvisO6gkiqow.png"/></div></div></figure><p id="7fa9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从现在开始，我们所有的请求都将通过这个拦截器。</p><p id="d012" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你需要仔细看看这个项目<a class="ae ki" href="https://github.com/8Tesla8/bad-response-interceptor" rel="noopener ugc nofollow" target="_blank">，这里是链接</a>。</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="51a9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="kq">原载于 2022 年 1 月 12 日</em><a class="ae ki" href="https://tomorrowmeannever.wordpress.com/2022/01/12/catch-every-request-error-in-angular/" rel="noopener ugc nofollow" target="_blank"><em class="kq">【http://tomorrowmeannever.wordpress.com】</em></a><em class="kq">。</em></p></div></div>    
</body>
</html>