<html>
<head>
<title>First internet of things application.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第一个物联网应用。</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/simple-internet-of-things-application-44a27fe0c25?source=collection_archive---------24-----------------------#2021-04-25">https://medium.com/nerd-for-tech/simple-internet-of-things-application-44a27fe0c25?source=collection_archive---------24-----------------------#2021-04-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="abfc" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">。Net + MQTT。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/7b92651c072ce61e3b18520cd2d7d2e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H1M4FGSe57Pz0Yru0fzv-w.png"/></div></div></figure><p id="ebea" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">第一步是为mqtt安装nuget包。MQTTnet，MQTTnet . extensions . managed client。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kf"><img src="../Images/449fa47c5ec15930d33b5b4ab06ef2d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RoxT-FwlcD2g_9BxbITsGw.png"/></div></div></figure><p id="9c11" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Mqtt有三个组件:代理、订阅者和发布者。我们有两种方式来运行broker。做一个小的控制台应用或者用代理服务器运行docker。我更喜欢跑<a class="ae kg" href="https://hub.docker.com/_/eclipse-mosquitto/" rel="noopener ugc nofollow" target="_blank"> docker </a>。默认为监听端口1883，我们的发布者和订阅者将与此端口进行交互。</p><p id="bf48" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们写代码。基本上，我们正在创建一个库，我们在mqtt上的包装器，我们可以从外部设置连接选项、凭证和日志。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kh"><img src="../Images/b57d11cbd869bf355d829386245752cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GQbbO052qVte8yi-GvNjvw.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ki"><img src="../Images/15d67749c3dfc55360e99792210bee8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v4akcwqT7iVcwimrrsY3Mg.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kj"><img src="../Images/418ec9ffca81a4cc0aea2c4f581c348d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JonT2C8_aVGvUhwg4FhGqA.png"/></div></div></figure><p id="53be" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们还是会做自己的经纪人。Broker会给我们关于截取数据的通知，以及何时有人会与broker建立连接。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kk"><img src="../Images/d44f76340c7fe89a43e3d6d6e881284b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FCO-YQf_T9zPWU7SjyX1Zg.png"/></div></div></figure><p id="429c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">订阅者和发布者具有相同的代码。唯一的区别是发布者知道如何发布消息。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kl"><img src="../Images/3b896c5789a713b3e3a709d545dd4a72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rr8St_Mo7zIk5HLdlb3upw.png"/></div></div></figure><p id="0421" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们在create方法中使用的所有魔法。我们在Connect OnDisconnect上创建了几个事件，并订阅了一个主题。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es km"><img src="../Images/c577f4712a0ec5409a18116010b6f767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GQVd_-yzbUzxY5o_-2_leA.png"/></div></div></figure><p id="3122" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">与其复制粘贴，不如继承订阅和方法发布消息的所有代码。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kn"><img src="../Images/4a6cd7858535e80b2443517092c265d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EyaA62BuSa9IXQgx-TDUgg.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ko"><img src="../Images/0f6ec881c2775452e440a566a101d4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VO5bg1a1TNtv6Iidtu1OAQ.png"/></div></div></figure><p id="59b8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">控制台app </strong></p><p id="3ced" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">是时候测试做一个主机应用了。我们的订户使用我们在其中定义的事件，最重要的是onMessageReceived。在这里，我们创建了一个与运行在docker中的代理的连接，在这个连接中，我们放置了一个代理地址和我们想要收听的主题。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kp"><img src="../Images/1818125908a70b46b9e1451bfe2f3616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0W9gLq6pmhjH-6sdxStkQ.png"/></div></div></figure><p id="610d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在发布者中，我们使用相同的事件来理解我们何时连接到代理。这是发布消息的最重要的方法。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kq"><img src="../Images/be820007f66ec64bc11689a55dc1bb47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMxHeUcNz00fXUzWoYj0ug.png"/></div></div></figure><p id="b2db" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在你知道了如何使用. net开发一个物联网应用。如果你需要进一步了解<a class="ae kg" href="https://github.com/8Tesla8/Mqtt-console" rel="noopener ugc nofollow" target="_blank">项目，这里有链接。</a></p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><p id="73b9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="ky">原载于2021年4月25日http://tomorrowmeannever.wordpress.com</em><em class="ky"/><a class="ae kg" href="https://tomorrowmeannever.wordpress.com/2021/04/25/fisrt-internet-of-things-application-using-mqtt/" rel="noopener ugc nofollow" target="_blank"><em class="ky">。</em></a></p></div></div>    
</body>
</html>