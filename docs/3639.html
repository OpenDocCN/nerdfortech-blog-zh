<html>
<head>
<title>Math in Unity - Calculate the way to the closest enemy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity 中的数学——计算距离最近的敌人的距离</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/math-in-unity-calculate-the-way-to-the-closest-enemy-f5e8049ba98a?source=collection_archive---------11-----------------------#2021-06-17">https://medium.com/nerd-for-tech/math-in-unity-calculate-the-way-to-the-closest-enemy-f5e8049ba98a?source=collection_archive---------11-----------------------#2021-06-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="303c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">嗯……哪一个敌人是应该被摧毁的？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/516fe7435cd0e2c6f2b7010f09c2f7ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PdQjY-B0K3xbXN0M"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://unsplash.com/@grstocks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> GR Stocks </a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="e6d1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当你开发一个游戏的时候，你可能需要在屏幕上计算出最接近的敌人。让那成为因为你想要实现一个以最近的敌人为目标的能力提升，或者有另外一个想法为什么你想要这样做。让我们在今天的文章中找出如何做到这一点！</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="b633" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">一、目标<br/> </strong>屏幕上我们有一个玩家和两个敌人。由于我们只想瞄准最近的敌人，所以我们需要计算最近的敌人。选定的敌人将被打印到控制台上。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="2b7d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">二。理论-我们必须做什么？<br/> </strong>为了能够计算出最近的敌人，我们首先要<strong class="jq hj"> <em class="kr">检测是否有游戏对象</em> </strong>。与红外激光相比。激光是一条直线，只要有东西在它中间，它就会断裂或缩短。然后，激光确实知道中间有东西。如果安装到报警系统中，这将是报警系统继续运行的触发器。我们将对 Mathf 做同样的事情。Infinity 这里基本上就像一个红外传感器。它将在整个世界空间中画一条线，当中间有东西时，它将被切断。</p><p id="753c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我们知道场景中至少有一个游戏对象后，我们需要<strong class="jq hj"> <em class="kr">计算场景中每个游戏对象的距离</em> </strong>。</p><p id="a122" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">接下来是<strong class="jq hj"> <em class="kr">比较所有计算出的距离</em> </strong>并选择最接近或最小的一个。</p><p id="8a53" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就我个人而言，我不知道如何比较所有的方向，并谷歌它。通过那次<a class="ae jn" href="https://forum.unity.com/threads/clean-est-way-to-find-nearest-object-of-many-c.44315/" rel="noopener ugc nofollow" target="_blank">研究</a>，我也发现了一些优化技巧！<br/>来，看一看:</p><blockquote class="ks kt ku"><p id="b2b5" class="jo jp kr jq b jr js ij jt ju jv im jw kv jy jz ka kw kc kd ke kx kg kh ki kj hb bi translated">对于任何通过谷歌搜索到达这里的人来说，tomvcds 给出的答案是好的，但肯定应该通过比较距离平方而不是直线距离来优化。它没有增加代码的复杂性，而且效率更高，因为它通过执行“Vector3”避免了昂贵的平方根运算。距离”。</p><p id="b058" class="jo jp kr jq b jr js ij jt ju jv im jw kv jy jz ka kw kc kd ke kx kg kh ki kj hb bi translated">例如，假设您有三个对象，A、B 和 C，以及一个源。你想知道哪一个离源头最近。假设 A 在 2m 远，B 在 3m 远，C 在 4m 远。您可以得到距离平方的值，分别是 4、9 和 16，而不是进行距离测试并得到 2、3 和 4。距离平方仍然通过接近度保持它们的顺序，只是值以指数方式增加，而不是线性增加。</p></blockquote></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="0b4f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">三世。实现-编码我们需要什么<br/> </strong>首先，我们需要一个存储所有敌人的数组。由于我们对距离感兴趣，我们需要用类型<em class="kr">转换</em>来创建它:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ky"><img src="../Images/7568809a781417f72e94b8285315a342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNRBYrOTpLNcYOg2SXIjCA.png"/></div></div></figure><p id="6d5e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了在 Unity 中创建类似红外激光的探测系统，我们可以使用<em class="kr"> Mathf。无穷大</em>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kz"><img src="../Images/b173619deac41ec3efaaf3a59daa74b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MfJY3X-u6kkJjurn03f8Ew.png"/></div></div></figure><p id="bd69" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在我们需要一个循环。我们想要计算每个敌人的方向，我们可以使用的最佳循环是一个<em class="kr"> foreach </em>循环:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es la"><img src="../Images/f259c3f32b1a282695fca0f09b2e6032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CG_ML_ajptgHT0QXTAuNag.png"/></div></div></figure><ul class=""><li id="0187" class="lb lc hi jq b jr js ju jv jx ld kb le kf lf kj lg lh li lj bi translated">首先，我们计算方向</li><li id="e5d9" class="lb lc hi jq b jr lk ju ll jx lm kb ln kf lo kj lg lh li lj bi translated">其次，我们计算平方星等</li><li id="85f7" class="lb lc hi jq b jr lk ju ll jx lm kb ln kf lo kj lg lh li lj bi translated">第三，我们指定最近的敌人作为潜在目标</li></ul></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="bf79" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">四。完成后的最终结果<br/> </strong>在 Unity 中运行这段代码，会给我们以下最终结果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lp"><img src="../Images/3cab7e643e1c66b6324ad81f64b45816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*z-AT1ZRvtkYpKOnemKCPHg.gif"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="97d6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">感谢您的时间和兴趣！<br/>下次抓你！</p></div></div>    
</body>
</html>