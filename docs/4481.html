<html>
<head>
<title>2.5D Game Development: Puzzles: Part 2 — Wall Jumping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2.5D 游戏开发:谜题:第 2 部分—跳墙</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/2-5d-game-development-puzzles-part-2-wall-jumping-9417b2e535c0?source=collection_archive---------18-----------------------#2021-07-22">https://medium.com/nerd-for-tech/2-5d-game-development-puzzles-part-2-wall-jumping-9417b2e535c0?source=collection_archive---------18-----------------------#2021-07-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f25a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我所承诺的，我将在 2.5D 的环境中翻墙。让我们开始吧。</p><p id="f3f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了做到这一点，我需要知道两件事。我碰壁了吗？我需要被反射到对面的墙上。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e2013a1cc8cf5aa11a96709dfc08bf80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*XANhGCDZAhqZGORhf4-BXw.gif"/></div></div></figure><p id="731a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的剪辑中，您可以看到一条小蓝线横跨胶囊游戏对象的宽度。这条蓝线叫做表面法线。计算的方式是通过一个方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jp"><img src="../Images/816f18a8bcfda6e26ee2f11e6c1ab1a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*dT84sGT3HFKTT8mpU7eezw.png"/></div></figure><p id="5eb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OnContollerColliderHit 是一个每当角色控制器碰到任何东西时都会自动调用的方法。所以我们在这个方法里面能做的就是说:<code class="du jq jr js jt b">Debug.DrawRay(hit.point, hit.normal)</code>。这个方法获取命中的原点，然后在垂直于命中点的方向(hit.normal)发送光线</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/33d7cf33f97a1c10ea54208f9865eb81.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*bURKQ2k3Ve4WeCjXaVz6GA.png"/></div></div></figure><p id="32a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在每当控制器接触到任何物体，表面法线都会被计算。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/22559ac75c9f8349c405d8dea480653d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SGrjvSSRgfYK9rgxL3kApA.gif"/></div></div></figure><p id="798b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在玩家脚本中计算移动的方式阻止了我在空中跳跃和向任何方向移动。唯一一次我想能够修改我的方向是当角色控制器是接地的。这样，当我跳起来撞到墙上时，我可以按下空间，被推向另一个方向。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jv"><img src="../Images/7b5cff03040eb6469162a9916cd10d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*j_Zn6BA2J4_T8uQwzid2wA.png"/></div></figure><p id="9a56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在前面提到的方法中，我添加了几行代码。我还将场景中构成墙壁的物体标记为“墙”。因此，当控制器没有接地，并击中一个标记为“墙”的对象时，会发生以下代码。这仅仅是计算墙面法线和将布尔值从假转换为真。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jw"><img src="../Images/5e4425a972bb11b64a08ada6435ef553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjhblM-sxA_dFahCBXt3nQ.png"/></div></div></figure><p id="bb20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的更新()中，我在计算运动。在 else 部分中，我处理了墙跳功能。如果我们不能跳墙，一切都很正常。如果我们能跳墙，我就把速度设为墙面正常速度。速度就是方向*速度。我们的方向是从击中开始计算的。正常！多整洁啊！？</p><p id="c68e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/1aa760ef389dcf185baa99634b873ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Xshz4x3He08aQ9T11rrkiA.gif"/></div></div></figure></div></div>    
</body>
</html>