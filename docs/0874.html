<html>
<head>
<title>Dotnet Core Localization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">点网核心本地化</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/dotnet-core-localization-96c88e842219?source=collection_archive---------1-----------------------#2021-02-20">https://medium.com/nerd-for-tech/dotnet-core-localization-96c88e842219?source=collection_archive---------1-----------------------#2021-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="db93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不得不制作一个多语言应用程序。因为有很多种语言，您可能希望面向更多的全球客户。我想在本地化之前写一个简单的例子。我阅读文件，我感到有点困惑。然后，我想分享我的样本代码。</p><p id="fbb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以将文本消息存储在资源文件中。资源记录由两部分组成。名称和值。实际上，还有一个部分(评论)但很可能你不会使用这一部分。</p><p id="517d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">资源文件示例如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/bf354b5b8b7a46b7cf3e141c15ea1a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/0*8WT8TSLh55_iFyWa"/></div></figure><p id="a598" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以为不同的语言创建资源文件。</p><p id="36c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Resource.resx、Resource.de.resx、Resource.es.resx 等。</p><p id="d726" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果要正确应用本地化，资源文件中的名称必须相同。当 localizer 没有找到资源内容时，它返回 null。我会一步一步解释这个项目。<a class="ae jl" href="https://github.com/emreerkoca/LocalizationExample" rel="noopener ugc nofollow" target="_blank">https://github.com/emreerkoca/LocalizationExample</a></p><p id="b0bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个简单的 Dotnet 核心 Web API 项目。</p><ol class=""><li id="e8d8" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc jr js jt ju bi translated">将资源文件夹添加到项目中。</li><li id="07bf" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">添加您的资源文件。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ka"><img src="../Images/a2430c1d25cc94bed5c01fbb4138c773.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/0*D7YTZvJ8S3i82xJX"/></div></div></figure><p id="ae7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.将一个新文件夹作为“Localize”添加到项目中，并添加一个公共类来本地化文件夹。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="1d97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您愿意，您可以使用不同的名称，但是您的资源名称和您的资源必须是合适的。您将通过这个空类获得资源内容。</p><p id="3275" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">资源名称:<strong class="ih hj">Localize</strong>. resource . de . resx</p><p id="bfb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的类的命名空间是 LocalizationExample。<strong class="ih hj">本地化</strong>，类名为资源。</p><p id="6263" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.启动配置</p><p id="ba96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将此代码块添加到 Startup.cs 文件的 configure services(iservicecollectionservices)方法中。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="7181" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它增加了本地化支持的语言。显示您的资源文件并设置默认语言。</p><p id="d16c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将此代码块添加到<strong class="ih hj">Configure(IApplicationBuilder app，IWebHostEnvironment env) </strong>方法中。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="806b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是为你的本地化自动设置文化信息。您可以通过任何请求头值来设置区域性信息。</p><p id="ed9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.显示本地化消息</p><p id="f156" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用了<strong class="ih hj">is inglocalizer</strong>接口来访问资源文件。你可以在这里看到一个用法的例子。添加依赖项并调用资源字段名。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="ab26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Get()方法将返回“Hello！”因为英语是默认的区域性，而英语资源值是“Hello！”当您将“culture=de”添加到您的请求 URL 时，您会将文化更改为“de”，并且您会看到“Hallo！”消息。</p><p id="715a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您愿意，您可以从“接受语言”标题中检测当前语言。您可以更改您的配置。</p><p id="d6e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像这样更改 ConfigureServices 配置部分:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="d89b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它读取“Accept-Language”头值并获取默认语言。在语言变量后放置一个断点并查看值。对于不同的浏览器语言，它是可变的。如果您在阅读 CustomRequestCultureProvider、ProviderCultureResult 等时感到困惑。你可以从微软的官方文档中读到它们。</p><p id="e673" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您不必为请求 URL 添加文化参数。您可以尝试从英语和德语浏览器中获取值。</p><p id="7d61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以阅读此文档了解详细信息。</p><p id="b273" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jl" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-5.0" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/aspnet/core/fundamentals/localization？view=aspnetcore-5.0 </a></p><p id="6105" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这之后我无话可说了。希望能有所帮助。</p></div></div>    
</body>
</html>