<html>
<head>
<title>Matt’s Tidbits #94 — Writing safe enums in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Matt的花絮# 94——用TypeScript编写安全枚举</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/matts-tidbits-94-writing-safe-enums-in-typescript-2955706a1e5c?source=collection_archive---------11-----------------------#2021-04-27">https://medium.com/nerd-for-tech/matts-tidbits-94-writing-safe-enums-in-typescript-2955706a1e5c?source=collection_archive---------11-----------------------#2021-04-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/38aac84142469fb3e19295382d341213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*emarK1xFUj42xdKh6D2nAA.jpeg"/></div></div></figure><p id="68a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" rel="noopener" href="/nerd-for-tech/matts-tidbits-93-getting-started-with-react-native-acdec42c67f">上次我写过如何入门React Native。</a>本周，我有一个关于用TypeScript编写安全枚举的快速花絮！</p><p id="cbf3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">许多编程语言都支持枚举，但它们在TypeScript中的工作方式略有不同。</p><p id="4f26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">定义和使用枚举非常简单——可以这样做:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="b391" class="jy jz hi ju b fi ka kb l kc kd">enum MyEnum {<br/>  A,<br/>  B,<br/>  C,<br/>}</span><span id="0dde" class="jy jz hi ju b fi ke kb l kc kd">function foo(enum: MyEnum) {}</span><span id="e76c" class="jy jz hi ju b fi ke kb l kc kd">foo(MyEnum.A);</span></pre><p id="670c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">真正让我吃惊的是，这样做也是完全正确的:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="21c6" class="jy jz hi ju b fi ka kb l kc kd">foo(42);</span></pre><p id="7d98" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么？！！？说实话，这对我来说真的一点意义都没有。如果我已经经历了定义一个枚举(并将枚举指定为函数的参数)的所有麻烦，为什么我可以指定任意数字来代替这个枚举，并且它仍然是有效的代码？</p><p id="5931" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">&lt;5 minute meditation break/&gt;</p><p id="8616" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好消息是，有一种方法可以保证你的枚举不能被这样使用！</p><p id="4937" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与许多其他编程语言一样，枚举通常表示为整数—第一个枚举值等于0，第二个等于1，依此类推。但是，TypeScript支持另外两种类型的枚举:基于字符串的枚举和异类枚举。</p><p id="e4ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不幸的是，异构枚举和数值枚举有同样的问题。但是，基于字符串的枚举没有！</p><p id="84ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，如果您将枚举定义更改为如下所示:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="cf73" class="jy jz hi ju b fi ka kb l kc kd">enum MyEnum {<br/>  A = 'A',<br/>  B = 'B',<br/>  C = 'C',<br/>}</span></pre><p id="4e1f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，调用我们的<code class="du kf kg kh ju b">foo</code>函数的唯一方法是传递一个有效的枚举值——传递任意数字(或字符串)将产生以下编译错误:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="6394" class="jy jz hi ju b fi ka kb l kc kd">Argument of type '42' is not assignable to parameter of type 'MyEnum'.</span></pre><p id="8c60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可能有些情况下，您希望能够为枚举指定任意数值，但是我将坚持使用基于字符串的版本！</p><p id="5fd3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关于TypeScript中枚举的更多信息，请查看官方手册:【https://www.typescriptlang.org/docs/handbook/enums.html<a class="ae jo" href="https://www.typescriptlang.org/docs/handbook/enums.html" rel="noopener ugc nofollow" target="_blank"/></p><p id="dc1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果有人知道为什么TypeScript枚举被设计成这种行为，请在评论中告诉我！</p><p id="bda2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有兴趣和我一起在埃森哲出色的数字产品团队工作吗？我们正在招聘！</p></div></div>    
</body>
</html>