# 编程的副作用是什么？

> 原文：<https://medium.com/nerd-for-tech/what-are-side-effects-in-programming-51f7ef340f98?source=collection_archive---------0----------------------->

如果你已经开始学习函数式编程，你很可能会经常遇到副作用这个术语。但是你有没有想过这个术语实际上是什么意思？我将试着在这篇文章中揭开它的真正含义。

![](img/8ef027c4301f8e83626f615cab352356.png)

[istock](https://www.istockphoto.com/) 上 [Spmemory](https://www.istockphoto.com/portfolio/SPmemory?mediatype=photography) 拍摄的照片

## 副作用

当一个函数改变一个非局部状态或者当它的输出不确定时，我们说这个函数有副作用。

我们知道一个函数有它自己的范围，如果我们在它的范围内改变变量是安全的。当它**使用或改变其作用域之外的**东西时，我们称之为副作用，比如通过引用传递的变量、全局变量、从控制台读取用户输入、登录控制台、进行数据库操作等。

## 1.变异非本地状态

这里的 *no_of_adds* 全局变量就像一个计数器，记录 add 函数被调用的次数。

## 2.读取非本地状态

全局状态不一定是全局变量，它可以是任何东西。它可以是磁盘中的文件、远程数据库、控制台屏幕等。

**是的，数据库写入、打印到控制台等**也被认为是副作用，因为它们改变了外部世界的某些东西。如果你试图写一些东西到你的远程数据库，它不仅取决于你传递的参数，还取决于许多因素，如互联网连接，你拥有的权限，表是否存在，等等**这是不确定的**。

在打印到控制台的情况下，控制台属于您的操作系统，因此写入控制台被视为改变全局状态。

> 你可以尝试做一些类似
> >>>write todb(" person _ table "，{'name ':'灭霸'，' age': 1001})

*   第一次失败是因为您没有对 *person_table* 的写权限。
*   现在设置了权限，就可以成功地写入表了。
*   现在假设您正在传递相同的参数，这次它失败了，因为您违反了完整性约束。即姓名是主键，灭霸已经存在(您添加的😂)
*   如你所见，结果不仅取决于传递的参数，还取决于历史和外部环境，而这些可能在我们的控制之内，也可能不在我们的控制之内。

有副作用的程序变得很难调试，因为程序的行为变得不确定。这就是为什么人们更喜欢编写纯函数(没有副作用的函数)，但是要编写没有任何副作用的真实应用程序几乎是不可能的。

## 如何处理副作用？

1.  尽量把纯函数和不纯函数分开。以便您可以在测试时模仿不纯的函数。

我们可以在测试时模拟 getAge()函数。

2.像 Haskell、Purescript 等许多函数式编程使用的黄金原则是**“使副作用显式”**函数签名本身就告诉我们它有副作用。例如，考虑 Haskell 中用于从用户获取输入的 getLine 函数签名。

```
getLine :: IO String
```

在这里，我们在方法签名本身中明确地告诉函数将要执行 IO 操作。因此，使用 getLine()的函数也必须知道它。

简而言之，当一个函数依赖于或修改其作用域之外的状态时，就说它有副作用。即使不可能编写没有副作用的真实世界的应用程序，我们也必须小心处理它们，以避免数小时的调试，或者如果可能的话，使用函数式编程语言，使程序员在处理副作用时更加自律。程序员很难总是遵守纪律，因为我们有截止日期😵‍💫，所以尽可能选择 FP。

非常感谢您的阅读。拍手声👏如果你喜欢这篇文章，请在评论区分享你的想法。