<html>
<head>
<title>How to Setup Redux and Connect to React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设置 Redux 并连接到 React 应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/how-to-setup-redux-and-connect-to-react-app-a059149641d3?source=collection_archive---------14-----------------------#2021-05-13">https://medium.com/nerd-for-tech/how-to-setup-redux-and-connect-to-react-app-a059149641d3?source=collection_archive---------14-----------------------#2021-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9b3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我分享我的知识和经验，关于我们如何设置 Redux 和连接反应应用程序(你需要知道的一切)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/9ad4eba94a497a1e6290808ef284be5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ko2Y_mfEvD0iAKS7Tr-urA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">反应还原</figcaption></figure><blockquote class="jt ju jv"><p id="9eea" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">随着世界的快速变化。我们不能无所事事，我们需要继续前进，我们需要在每一个起伏中尽我们最大的努力。我们如何尽最大努力？答案是日复一日的学习。如果你有 6 年以上的工作经验，你需要每天学习，让自己变得更好。</p></blockquote><p id="31b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在继续之前，我们将尝试了解 redux 的定义是什么，以及所有的好处是相同的。</p><h1 id="deec" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="6a8b" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">Redux 是 JavaScript 应用程序的可预测状态容器。为了理解它的意思，让我们把它分成三个部分。</p><ul class=""><li id="977a" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">它适用于 javascript 应用程序</li><li id="0cbc" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">它是一个状态容器</li><li id="f117" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">这是可以预测的</li></ul><p id="a42d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来谈谈每一个-</p><h2 id="5aec" class="lr kb hi bd kc ls lt lu kg lv lw lx kk iq ly lz ko iu ma mb ks iy mc md kw me bi translated">Redux 是针对 javascript 应用的。</h2><ul class=""><li id="456b" class="ld le hi ih b ii ky im kz iq mf iu mg iy mh jc li lj lk ll bi translated">Redux 不绑 react。</li><li id="447f" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">它可以与任何框架一起使用，如 React、Vue 和 Angular 或带有普通 javascript 的 event。</li><li id="6e9b" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">所以 redux 是 javascript 应用的库。</li></ul><h2 id="1bb7" class="lr kb hi bd kc ls lt lu kg lv lw lx kk iq ly lz ko iu ma mb ks iy mc md kw me bi translated">Redux 是一个状态容器</h2><ul class=""><li id="291e" class="ld le hi ih b ii ky im kz iq mf iu mg iy mh jc li lj lk ll bi translated">Redux 用于存储应用程序的状态。</li><li id="7603" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">这意味着什么，让我们把一个 react 应用看作是一个组件的状态？</li><li id="591f" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">应用程序的状态是由该应用程序的所有单个组件表示的状态。所以这包括数据和 UI 逻辑。参考下图。</li></ul><div class="je jf jg jh fd ab cb"><figure class="mi ji mj mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/32f2828174ab4addf7467bdb15d9cba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*5ksklEz2XjlDm--wuyZpSA.png"/></div></figure><figure class="mi ji mo mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/3878589822552cbe399f5135dda079ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*1C6Q6KdVzoZRADa2gxN3vQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx mp di mq mr translated">Ishwar Deoolkar 的组件状态</figcaption></figure></div></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><ul class=""><li id="ece2" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">如果您的应用程序是中型到大型的。所以应用程序的状态应该是这样的。参考下图。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mz"><img src="../Images/298713e02441faed5e77d3ac47b0a86e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OErqtpvuLGtu_xRLO0qp1A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Ishwar Deoolkar 的应用程序组件状态</figcaption></figure></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><ul class=""><li id="71c8" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">Redux 将存储和管理应用程序状态。</li></ul><h2 id="616b" class="lr kb hi bd kc ls lt lu kg lv lw lx kk iq ly lz ko iu ma mb ks iy mc md kw me bi translated">Redux 是可预测的</h2><ul class=""><li id="1595" class="ld le hi ih b ii ky im kz iq mf iu mg iy mh jc li lj lk ll bi translated">哪方面可以预测？所以我们参考上一点。(看上面 Redux 是状态容器)。</li><li id="f90e" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">应用程序的状态可以改变。比如—待办事项 app —项目(待定)→项目(已完成)。</li><li id="64bf" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">在 redux 中，所有的状态转换都是显式的，跟踪它们是可能的，应用程序状态的变化也是可预测的。</li></ul><h1 id="653d" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">反应还原</h1><p id="43fe" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">在讲 react-Redux 之前，我会假设你知道 React 的基础知识，比如什么是 React，我们如何创建组件，如何管理组件中的状态和道具等等。正如我在上一节解释了什么是 redux。</p><p id="15b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">先说 React+Redux，</p><ul class=""><li id="252d" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">为什么我们要在 react 应用程序中使用 redux？</li><li id="1a42" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">React 中的组件有自己的状态。</li><li id="989b" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">为什么我们需要另一种工具来帮助管理这种状态？</li></ul><p id="0e77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我来帮你理解这些问题。考虑一个 react 应用程序可能由嵌套在不同级别的几个组件组成。参考下图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es na"><img src="../Images/1ee6095fc82a255b316902e94804e9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CnFkMUorHHLfe9-OgCQWjw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Ishwar Deoolkar 使用嵌套组件的应用程序</figcaption></figure><p id="4f23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中组件<strong class="ih hj"> C </strong>是<strong class="ih hj"> A </strong>和<strong class="ih hj"> B </strong>的父组件。在这种情况下，如果组件<strong class="ih hj"> A </strong>中只有一些数据，但是组件<strong class="ih hj"> B </strong>也想要这些数据。我们知道组件<strong class="ih hj"> B </strong>不能访问数据，因为组件只能与它的父组件或子组件(不是表兄弟)对话。那么我们如何做到这一点呢？使用提升道具回答问题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nb"><img src="../Images/3f7a05eff62d796659484eed7d2355fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*re-HZl3lMOHCZQ7JiUZDkQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">将状态从一个组件提升到另一个组件</figcaption></figure><p id="10fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">先说几秒钟解除道具或者解除状态。</p><h2 id="548a" class="lr kb hi bd kc ls lt lu kg lv lw lx kk iq ly lz ko iu ma mb ks iy mc md kw me bi translated"><strong class="ak">解除状态</strong></h2><p id="1300" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">我们知道，React 中的每个组件都有自己的状态。因此，有时数据可能是冗余的和不一致的。因此，通过提升状态，我们将父组件的状态作为真实的单一来源，并将父组件的数据传递给其子组件。</p><p id="d656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用解除状态的时间:</strong>如果“父子组件”或“表亲组件”中的数据不同步。这一切都是为了提升国家。想要了解更多关于解除状态的信息，请访问此<a class="ae nc" href="https://reactjs.org/docs/lifting-state-up.html#gatsby-focus-wrapper" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="5511" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您的应用程序增长时，维护状态就变得非常困难。并且很难将状态从一个组件提升到另一个组件。因此，redux 在维护应用程序状态方面发挥了重要作用。</p><p id="b117" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 redux 中，我们需要创建一个存放所有应用程序状态的存储。从存储区，您可以直接将状态传递给任何组件。因此，这不需要做状态提升和所有。检查下图看起来如何。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nd"><img src="../Images/64115b2ab633175ba1732f4048ee6d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hUKA8jvsXu6vL_qBeiRqAQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Ishwar Deoolkar 的 Redux 商店</figcaption></figure><p id="b9c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以它是关于 redux 和 react-redux 的。让我们继续讨论如何设置 Redux 并连接到 React App。</p><h1 id="86ff" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">如何设置 Redux</h1><p id="9fd9" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">从 npm 软件包安装 redux，或者在您的终端中运行此命令。一旦你安装了 redux。它将被添加到 package.json 文件中。</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="9db3" class="lr kb hi nf b fi nj nk l nl nm">// Install with npm<br/>npm install redux</span><span id="ae27" class="lr kb hi nf b fi nn nk l nl nm"><strong class="nf hj">or</strong> </span><span id="1855" class="lr kb hi nf b fi nn nk l nl nm">// Install with yarn<br/>yarn install redux</span><span id="0178" class="lr kb hi nf b fi nn nk l nl nm"><strong class="nf hj">or </strong></span><span id="2901" class="lr kb hi nf b fi nn nk l nl nm">// Install with bower<br/>bower install redux</span></pre><p id="098a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我解释一下一个真实的场景，假设你有一个商店，在你的商店里有多种商品，如蛋糕、冰淇淋等。在商店里，我们有蛋糕存放在货架上，我们有一个雇佣店主来维护蛋糕货架。假设一个顾客来到你的商店，问店主我想买蛋糕。</p><p id="e89b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后店主问顾客他们想买多少数量的蛋糕。顾客回复店主想买<strong class="ih hj"> 10 </strong>蛋糕。店主的工作是记录店里有多少数量的蛋糕。例如，有 100 种蛋糕可供选择。</p><p id="5448" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们回顾一下客户的要求和其他细节。</p><ul class=""><li id="ee77" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">顾客想买 10 块蛋糕。—(行动—购买蛋糕)</li><li id="7746" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">店主跟踪商店中可用的蛋糕数量— 100 个蛋糕(商店—“蛋糕”)。</li></ul><p id="62cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux 有三个步骤——动作、减少器和存储。参考下图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es no"><img src="../Images/c5609fa1dd0b835d6fc7c6825e2050e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-KblRd-K8gUD1Tfi3Ka_mA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">伊什瓦尔·德奥尔卡的 Redux flow</figcaption></figure></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><p id="91c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看文件夹结构是什么样子的</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es np"><img src="../Images/730af0b6c97f66378856dfcc9a20537b.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*M5Yd7OTCTfThqgD5w8bbSQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">伊什瓦尔·德奥尔卡的双重折叠结构</figcaption></figure><p id="5ddb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上图中，您可以看到多个应用程序的文件夹结构，例如 Cake、iceCream 和 sweetMart。</p><p id="a53f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是他们每个人的简介—</p><p id="2280" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">动作</strong></p><ul class=""><li id="4853" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">行动是商店信息的唯一来源。</li><li id="480c" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">它从你的应用程序中携带一个有效载荷的信息来存储。</li><li id="1d00" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">动作是普通的 JavaScript 对象，必须有一个 type 属性来指示所执行动作的类型。它告诉我们发生了什么。类型应该在应用程序中定义为字符串常量，如下所示</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="88c1" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">cakesTypes.js</strong></span><span id="72ed" class="lr kb hi nf b fi nn nk l nl nm">export const BUY_CAKE = 'BUY_CAKE';</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="153e" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">iceCreamTypes.js</strong></span><span id="e58c" class="lr kb hi nf b fi nn nk l nl nm">export const BUY_ICECREAM = "BUY_ICECREAM";</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="0ab7" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">sweetMartTypes.js</strong></span><span id="64c7" class="lr kb hi nf b fi nn nk l nl nm">export const BUY_KUNDA = "BUY_KUNDA";<br/>export const BUY_KAJUKATLI = "BUY_KAJUKATLI";</span></pre><ul class=""><li id="cd05" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">除了这种类型的属性，action 对象的结构完全取决于开发人员。建议你的动作对象尽量轻，只传递必要的信息。</li><li id="5143" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">要在存储中进行任何更改，您需要首先使用 store.dispatch()函数调度一个操作。操作对象如下</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="913b" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">cakesAction.js</strong></span><span id="fca2" class="lr kb hi nf b fi nn nk l nl nm">{ type: BUY_CAKE, info: "Buy cake is redux action" }<br/>{ type: BUY_CAKE, payload: number }</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="5c7c" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">iceCreamActions.js</strong></span><span id="751c" class="lr kb hi nf b fi nn nk l nl nm">{ type: BUY_ICECREAM, info: "Buy ice cream is redux action" }<br/>{ type: BUY_ICECREAM, payload: number }</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="0104" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">sweetMartActions.js</strong></span><span id="24d1" class="lr kb hi nf b fi nn nk l nl nm">{ type: BUY_KUNDA, info: "Buy ice cream is redux action" }<br/>{ type: BUY_KAJUKATLI, payload: number }</span></pre><ul class=""><li id="ecb5" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">动作创建者是封装动作对象创建过程的功能。</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="182d" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">cakesActions.js</strong></span><span id="3ddd" class="lr kb hi nf b fi nn nk l nl nm">// Import types of cakes.<br/>import { BUY_CAKE } from './cakesTypes.js';</span><span id="3655" class="lr kb hi nf b fi nn nk l nl nm">export const buyCake = () =&gt; {<br/>    return {<br/>        type: BUY_CAKE,<br/>        info: "Buy cake is redux action"<br/>    }<br/>}</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="92b4" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">iceCreamActions.js</strong></span><span id="9dd7" class="lr kb hi nf b fi nn nk l nl nm">// Import types of icecream.<br/>import { BUY_ICECREAM } from './iceCreamActions.js';</span><span id="c7f5" class="lr kb hi nf b fi nn nk l nl nm">export const buyIceCream = (number = 1) =&gt; {<br/>    return {<br/>        type: BUY_ICECREAM,<br/>        info: "Buy ice cream is redux action",<br/>        payload: number<br/>    }<br/>}</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="9864" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">sweetMartActions.js</strong></span><span id="269e" class="lr kb hi nf b fi nn nk l nl nm">// Import types of sweetmart.<br/>import { BUY_KUNDA, BUY_KAJUKATLI } from './sweetMartActions.js';</span><span id="43bb" class="lr kb hi nf b fi nn nk l nl nm">export const buyKunda = () =&gt; {<br/>    return {<br/>        type: BUY_KUNDA,<br/>        info: "Buy kunda is redux action"<br/>    }<br/>}</span><span id="4d97" class="lr kb hi nf b fi nn nk l nl nm">export const buyKajuKatli = (number = 1) =&gt; {<br/>    return {<br/>        type: BUY_KAJUKATLI,<br/>        info: "Buy kunda is redux action"<br/>        payload: number<br/>    }<br/>}</span></pre><p id="0786" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">减速器</strong></p><ul class=""><li id="3ad3" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">Redux 中的还原器是一个纯函数。</li><li id="1fb7" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">纯函数是可预测的。</li><li id="d1e3" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">还原器是 Redux 中改变状态的唯一方式。这是你唯一可以写逻辑和计算的地方。</li><li id="1bba" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">reducer 函数将接受正在调度的应用程序和操作的前一个状态，计算下一个状态，并返回新的对象。</li><li id="8a9b" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">以下几件事绝对不能在减速器内进行-<br/>1。函数变元<br/> 2。API 调用&amp;路由逻辑<br/> 3。调用非纯函数，例如 Math.random()</li><li id="2afd" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">以下是缩减器的语法</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="62dd" class="lr kb hi nf b fi nj nk l nl nm">(state,action) =&gt; newState</span></pre><ul class=""><li id="16f7" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">让我们继续在网页上展示蛋糕的例子。在“行动创建者”模块中讨论。下面让我们看看它的 reducer 怎么写。</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="ad51" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">cakesReducer.js</strong></span><span id="d145" class="lr kb hi nf b fi nn nk l nl nm">// Import types. <br/>import { BUY_CAKE } from './cakesTypes.js';</span><span id="c067" class="lr kb hi nf b fi nn nk l nl nm">const cakeInitialState = {<br/>    numberOfCakes: 100<br/>}</span><span id="1157" class="lr kb hi nf b fi nn nk l nl nm">const cakeReducer = (state = cakeInitialState, action) =&gt; {<br/>    switch(action.type){<br/>        case BUY_CAKE:<br/>            return {<br/>               ...state,<br/>               numberOfCakes: state.numberOfCakes - 1<br/>            }<br/>        default:<br/>            return state;<br/>    }<br/>}<br/>export default cakeReducer;</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="5430" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">iceCreamReducer.js</strong></span><span id="1d5b" class="lr kb hi nf b fi nn nk l nl nm">// Import types of icecream.<br/>import { BUY_ICECREAM } from './iceCreamActions.js';</span><span id="3213" class="lr kb hi nf b fi nn nk l nl nm">const iceCreamInitialState = {<br/>    numberOfIceCreams: 20<br/>}</span><span id="f74f" class="lr kb hi nf b fi nn nk l nl nm">const iceCreamReducer = (state = iceCreamInitialState, action) =&gt; {<br/>    switch(action.type){<br/>        case BUY_ICECREAM:<br/>            return {<br/>               ...state,<br/>               numberOfIceCreams: state.numberOfIceCreams - action.payload<br/>            }<br/>        default:<br/>           return state;<br/>   }<br/>}<br/>export default iceCreamReducer;</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><pre class="ne nf ng nh aw ni bi"><span id="aeb9" class="lr kb hi nf b fi nq nr ns nt nu nk l nl nm"><strong class="nf hj">sweetMartReducer.js</strong></span><span id="0068" class="lr kb hi nf b fi nn nk l nl nm">// Import types of sweetmart.<br/>import { BUY_KUNDA, BUY_KAJUKATLI } from './sweetMartActions.js';</span><span id="bac8" class="lr kb hi nf b fi nn nk l nl nm">const sweetMartInitialState = {<br/>    numberOfKunda: 200,<br/>    numberOfKajuKatli: 100<br/>}</span><span id="4483" class="lr kb hi nf b fi nn nk l nl nm">const sweetMartReducer = (state = sweetMartInitialState, action) =&gt; {<br/>    switch(action.type){<br/>        case BUY_KUNDA:<br/>            return {<br/>               ...state,<br/>               numberOfKunda: state.numberOfKunda - 1<br/>            }<br/>        case BUY_KAJUKATLI:<br/>            return {<br/>               ...state,<br/>               numberOfKajuKatli: state.numberOfKajuKatli - action.payload<br/>            }<br/>        default:<br/>           return state;<br/>   }<br/>}<br/>export default sweetMartReducer;</span></pre><p id="5700" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">商店</strong></p><ul class=""><li id="f397" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">在 Redux 中，存储是不可变的对象树。</li><li id="ac42" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">存储是保存应用程序状态的状态容器。</li><li id="5a4e" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">Redux 在您的应用程序中只能有一个存储。每当在 Redux 中创建存储时，都需要指定 reducer。</li><li id="0c70" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">让我们看看如何使用 Redux 的<strong class="ih hj"> createStore </strong>方法创建一个商店。需要从 Redux 库中导入 createStore 包，该库支持如下所示的存储创建过程</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="caa1" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">store.js </strong></span><span id="7799" class="lr kb hi nf b fi nn nk l nl nm">import { createStore } from 'redux';</span><span id="ef60" class="lr kb hi nf b fi nn nk l nl nm">// Import cake reducer from cakeApp.<br/>import cakeReducer from '../cakes/cakesReducer';</span><span id="8678" class="lr kb hi nf b fi nn nk l nl nm">const store = createStore(cakeReducer);</span></pre><p id="6633" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的片段展示了我们如何创建一个商店，以及如何将缩减器传递给商店。这表明要调用单个减速器来存储。但是假设你有多个 app，比如<em class="jw">蛋糕</em>、<em class="jw">冰淇淋</em>、<em class="jw"> SweetMart </em>。</p><p id="a9f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个应用程序都有自己的 reducer，所以我们如何将所有这些 reducer 调用到一个商店。在 redux 中，我们只需要声明一个商店，而这个商店包含多个应用程序。但是我们不能在 redux 中声明多个商店。因此，在不破坏 redux store 术语的情况下，我们如何实现这一点——使用 redux 中的<strong class="ih hj">组合缩减器</strong>。让我写代码，向您展示如何在一个地方组合多个减速器。</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="29b1" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">rootReducers.js</strong></span><span id="2b2a" class="lr kb hi nf b fi nn nk l nl nm">import { combineReducers } from 'redux';</span><span id="cc33" class="lr kb hi nf b fi nn nk l nl nm">// Import cake reducer from CakeApp.<br/>import cakeReducer from '../cakes/cakesReducer';</span><span id="6ff5" class="lr kb hi nf b fi nn nk l nl nm">// Import icecream reducer from IceCreamApp.<br/>import iceCreamReducer from '../iceCream/iceCreamReducer';</span><span id="cd4f" class="lr kb hi nf b fi nn nk l nl nm">// Import sweetmart reducer from SweetMartApp.<br/>import sweetMartReducer from '../sweetMart/sweetMartReducer';</span><span id="0053" class="lr kb hi nf b fi nn nk l nl nm">// Combine the each reducers using combineReducers.<br/>const rootReducers = combineReducers({<br/>     cake: cakeReducer,<br/>     iceCream: iceCreamReducer,<br/>     sweetMart: sweetMartReducer<br/>});</span><span id="1784" class="lr kb hi nf b fi nn nk l nl nm">export default rootReducers;</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><p id="70ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可以在你的商店中导入这些 rootReducers 了。</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="67ae" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">store.js</strong></span><span id="585b" class="lr kb hi nf b fi nn nk l nl nm">import { createStore } from 'redux';</span><span id="c99c" class="lr kb hi nf b fi nn nk l nl nm">// Import rootReducers from all redcuers apps.<br/>import rootReducers from './rootReducers';</span><span id="0d7f" class="lr kb hi nf b fi nn nk l nl nm">const store = createStore(rootReducers);</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><p id="aae2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将您的所有操作导入到一个文件中-</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="483e" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">index.js</strong></span><span id="770f" class="lr kb hi nf b fi nn nk l nl nm">export { buyCake } from './cake/cakeActions';<br/>export { buyIceCream } from './iceCream/iceCreamActions';<br/>export { buyKunda, buyKajuKatli } from './sweetMart/sweetMartActions';</span></pre><p id="b368" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux 本身是同步的，那么像<strong class="ih hj">网络请求</strong>这样的<strong class="ih hj">异步</strong>操作如何与 Redux 一起工作呢？</p><h2 id="64d9" class="lr kb hi bd kc ls lt lu kg lv lw lx kk iq ly lz ko iu ma mb ks iy mc md kw me bi translated">中间件</h2><ul class=""><li id="63ed" class="ld le hi ih b ii ky im kz iq mf iu mg iy mh jc li lj lk ll bi translated">Redux 中间件功能提供了一个媒介，在分派的动作到达 reducer 之前与它们进行交互。</li><li id="c9fe" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">定制的中间件功能可以通过编写高阶函数(一个函数返回另一个函数)来创建，这些函数包装了一些逻辑。</li><li id="f5c0" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">多个中间件可以组合起来增加新的功能，每个中间件都不需要知道之前和之后发生了什么。你可以想象在 action dispatched 和 reducer 之间的中间件。</li><li id="d707" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">通常，中间件用于处理应用程序中的异步操作。</li><li id="fac2" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">Redux 提供了名为 applyMiddleware 的 API，允许我们使用定制中间件以及 Redux 中间件，如<strong class="ih hj"> redux-thunk </strong>和<strong class="ih hj"> redux-promise、redux-logger、redux-saga </strong>。它应用中间件来存储。使用 applyMiddleware API 的语法是</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="8be2" class="lr kb hi nf b fi nj nk l nl nm">applyMiddleware(...middleware)</span></pre><ul class=""><li id="565b" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">有多个中间件，你可以从列表中选择任何一个。所以我将使用 redux-logger。让我们使用 npm 命令安装 redux-logger。</li></ul><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="d6d7" class="lr kb hi nf b fi nj nk l nl nm">// Install with npm<br/>npm install redux-logger</span><span id="a4d6" class="lr kb hi nf b fi nn nk l nl nm"><strong class="nf hj">or</strong></span><span id="f5d1" class="lr kb hi nf b fi nn nk l nl nm">// Install with yarn<br/>yarn install redux-logger</span></pre><p id="624d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您安装了中间件，它将被添加到 package.json 文件中。这可以应用于如下存储</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="bc77" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">store.js</strong></span><span id="acc8" class="lr kb hi nf b fi nn nk l nl nm">import { createStore, applyMiddleware } from 'redux';</span><span id="9f5f" class="lr kb hi nf b fi nn nk l nl nm">// Import logger from redux logger package.<br/>import logger from 'redux-logger';</span><span id="bdbf" class="lr kb hi nf b fi nn nk l nl nm">// Import rootReducers from all redcuers apps.<br/>import rootReducers from './rootReducers';</span><span id="4e2c" class="lr kb hi nf b fi nn nk l nl nm">const store = createStore(rootReducers, applyMiddleware(logger));</span><span id="12d1" class="lr kb hi nf b fi nn nk l nl nm">export default store;</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><p id="b10d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你想了解更多关于中间件的知识。检查此<a class="ae nc" href="https://redux.js.org/tutorials/fundamentals/part-4-store#middleware" rel="noopener ugc nofollow" target="_blank">链接</a>并参考下图，了解中间件如何工作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nv"><img src="../Images/c2bb0a4c083afd1e97f0ca6bcf5d19f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Ot_Vk0X6INmdjik8q-ZEdg.jpeg"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Ishwar Deoolkar 的 redux-中间件-流程</figcaption></figure><p id="d97a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你已经设置了 redux，让我们来谈谈如何将 redux 连接到 react 应用程序。所以在写一些代码之前，我们需要安装 react-redux。要安装 react-redux，请在您的终端中运行以下命令。</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="c94d" class="lr kb hi nf b fi nj nk l nl nm">// Install with npm<br/>npm install react-redux</span><span id="ab39" class="lr kb hi nf b fi nn nk l nl nm"><strong class="nf hj">or</strong></span><span id="6058" class="lr kb hi nf b fi nn nk l nl nm">// Install with yarn<br/>yarn install react-redux</span></pre><p id="0472" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的 react 应用程序中有一个名为 App.js 的文件。导入您已经设置的 redux 存储，并从 react-redux 导入 provider。</p><p id="afd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux 提供了 react-redux 包，用下面给出的两个实用程序绑定 react 组件</p><ul class=""><li id="7b85" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">Provider — Provider 使存储对应用程序的其余部分可用。</li><li id="f6ac" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">Connect-Connect 函数帮助 react 组件连接到存储，响应存储状态中发生的每个变化。</li></ul><p id="9089" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设你的 app.js 是这样的。</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="22ba" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">App.js</strong></span><span id="9de7" class="lr kb hi nf b fi nn nk l nl nm">import React from 'react';<br/>import { Provider } from 'react-redux';<br/>import store from './redux/store';<br/>import CakeContainer from '../components/CakeContainer/CakeContainer';</span><span id="88a7" class="lr kb hi nf b fi nn nk l nl nm">const App = () =&gt; {<br/>    return (<br/>       &lt;Provider store={store}&gt;<br/>          &lt;div className="app-container"&gt;<br/>              &lt;CakeContainer /&gt;<br/>          &lt;/div&gt;<br/>       &lt;/Provider&gt;<br/>    )<br/>}<br/>export default App;</span></pre><p id="ec25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每当 react-redux 应用程序中发生更改时，就会调用<strong class="ih hj"> mapStateToProps() </strong>。在这个函数中，我们准确地指定了需要向 react 组件提供的状态。在下面解释的 connect()函数的帮助下，我们将这些应用程序的状态连接到 react 组件。Connect()是一个高阶函数，它将一个组件作为参数。它执行某些操作，并返回一个新的组件，其中包含我们最终导出的正确数据。在 mapStateToProps()的帮助下，我们提供这些存储状态作为 react 组件的支柱。该代码可以包装在容器组件中。</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="a5db" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">CakesContainer.js</strong></span><span id="a70d" class="lr kb hi nf b fi nn nk l nl nm">const mapStateToProps = state =&gt; {<br/>    return {<br/>        numOfCakes: state.cake?.numOfCakes<br/>    }<br/>}</span></pre></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><p id="9517" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> mapDispatchToProps() </strong>函数接收 dispatch 函数作为参数，并以传递给 react 组件的普通对象的形式返回回调属性。mapDispatchToProps()用于将操作分派给存储。在 react-redux 中，组件不能直接访问存储。唯一的方法是使用 connect()</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="561f" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">CakeContainer.js</strong></span><span id="6eae" class="lr kb hi nf b fi nn nk l nl nm">const mapDispatchToProps = dispatch =&gt; {<br/>    return {<br/>        buyCake: () =&gt; dispatch(buyCake())<br/>    }<br/>}</span></pre><p id="6e81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们通过下图来理解 react-redux 是如何工作的</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nw"><img src="../Images/ecc34ac91de046aa29b7abd90449947a.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*t2oL3eyo3ZxqtRC35VTQ0A.jpeg"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">伊什瓦尔·德奥尔卡的作品</figcaption></figure><p id="618c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">存储</strong>——将应用程序的所有状态存储为一个 JavaScript 对象</p><p id="fcd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">供应商</strong>提供商店</p><p id="06c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">容器</strong>—获取应用程序状态&amp;将其作为道具提供给组件</p><p id="417f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">组件</strong>—用户通过视图组件进行交互</p><p id="51dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">操作</strong>—导致商店发生变化，这可能会也可能不会改变你的应用程序的状态</p><p id="196b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">减速器</strong>—改变 app 状态、接受状态和动作并返回更新状态的唯一方式。</p><p id="7bdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux 是一个独立的库，可以用于任何 UI 层。React-redux 是官方的 redux，UI 与 React 绑定。此外，它鼓励良好的 react Redux 应用程序结构。React-redux 在内部实现了性能优化，因此组件仅在需要时重新呈现。</p><p id="cfaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">综上所述，Redux 不是为了写最短最快的代码而设计的。它旨在提供一个可预测的状态管理容器。它帮助我们理解某个状态何时改变，或者数据来自哪里。</p><pre class="je jf jg jh fd ne nf ng nh aw ni bi"><span id="d798" class="lr kb hi nf b fi nj nk l nl nm"><strong class="nf hj">CakeContainer.js</strong></span><span id="4e10" class="lr kb hi nf b fi nn nk l nl nm">import React from 'react';<br/>import { connect } from 'react-redux';<br/>import { buyCake } from '../redux/index';</span><span id="e968" class="lr kb hi nf b fi nn nk l nl nm">const CakeContainer = (props) =&gt;  {<br/>    return (<br/>        &lt;div className="cake-container"&gt;<br/>            &lt;h1&gt;Without Hooks - Cake App&lt;/h1&gt;<br/>            &lt;h2&gt;Number of cakes - {props.numOfCakes}&lt;/h2&gt;<br/>            &lt;button type="button" onClick={props.buyCake}&gt;Buy cake&lt;/button&gt;<br/>        &lt;/div&gt;<br/>    )<br/>}</span><span id="746e" class="lr kb hi nf b fi nn nk l nl nm">const mapStateToProps = state =&gt; {<br/>    return {<br/>        numOfCakes: state.cake?.numOfCakes<br/>    }<br/>}</span><span id="4641" class="lr kb hi nf b fi nn nk l nl nm">const mapDispatchToProps = dispatch =&gt; {<br/>    return {<br/>        buyCake: () =&gt; dispatch(buyCake())<br/>    }<br/>}</span><span id="d8ec" class="lr kb hi nf b fi nn nk l nl nm">export default connect(<br/>    mapStateToProps, <br/>    mapDispatchToProps<br/>)(CakeContainer);</span></pre><h1 id="73ad" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">结论</strong></h1><p id="a6a4" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">这就是我们如何设置 redux 并连接到 react 应用程序。尝试用 react 应用程序设置 redux。</p><p id="2771" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我知道这篇文章对你有帮助，并且有任何我认为我错过或应该包括的某些特征吗？请在下面的评论中告诉我！</p><p id="1191" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码…！！！</p></div></div>    
</body>
</html>