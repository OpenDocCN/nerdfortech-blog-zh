<html>
<head>
<title>Custom Middlewares in Go gin project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go gin 项目中的自定义中间件</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/custom-middlewares-in-go-gin-4a7408e4d472?source=collection_archive---------0-----------------------#2021-12-23">https://medium.com/nerd-for-tech/custom-middlewares-in-go-gin-4a7408e4d472?source=collection_archive---------0-----------------------#2021-12-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c96990948c81ee4940f47c06d4af10cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2zST_Bn4rtZ1GLhbC5gxQ.png"/></div></div></figure><p id="eb50" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我的一个副业项目中，我探索了一种机制来移动需要为每个传入的 API 调用执行的公共功能，如身份验证、令牌、会话等。Go gin 框架中的中间件是解决这一问题的技术。如果我把中间件比作 JAVA 中类似的东西，那就是拦截器。拦截器的工作是拦截每一个来电并执行步骤。中间件完全一样。</p><p id="3d18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我发现这个回购协议收集了一些令人惊讶的中间产品。如果你需要任何可用的，只需连接这个回购，并开始使用它。</p><p id="1d9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是这篇文章致力于为你的特定用例创建一个定制的中间件。让我们从这个开始。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="1feb" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">目的</h1><p id="cb00" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">我的中间件有一个简单的双重目的:<br/> 1 .为每个传入的请求添加一个 uuid。这个 uuid 将用于打印处理程序流中的日志，从而使请求变得唯一，并简化可跟踪性和可调试性。<br/> 2。捕获服务请求所花费的时间。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="0c17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">给我看看代码</strong></p><p id="61d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们跳到代码。我把我在以前的帖子中提到的应用程序的代码片段放在这里。</p><p id="e0c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">原始 application.go 文件</strong></p><figure class="kz la lb lc fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="b3b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在在文件中添加中间件。只需添加如下代码。</p><p id="f42d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> applicationUpdated.go 文件</strong></p><figure class="kz la lb lc fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="8c38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">观察添加<strong class="is hj"> guidMiddleware() </strong>函数并使用<strong class="is hj">路由器嵌入它的简单性。使用()</strong>方法。中间件函数有一个<strong class="is hj">返回类型 gin。手柄功能</strong>。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="09b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就像您可以添加尽可能多的中间件并将其嵌入到 gin 路由器中一样。就是这样！这就是在你的 gin 应用程序中添加一个定制中间件是多么容易。让我知道你是否面临任何问题，发现任何差异。</p></div></div>    
</body>
</html>