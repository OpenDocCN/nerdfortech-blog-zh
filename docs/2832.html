<html>
<head>
<title>Creating A Daily Productivity App in ReactJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 ReactJS 中创建日常生产力应用程序</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/creating-a-daily-productivity-app-in-reactjs-9c8a45ea2ead?source=collection_archive---------14-----------------------#2021-05-21">https://medium.com/nerd-for-tech/creating-a-daily-productivity-app-in-reactjs-9c8a45ea2ead?source=collection_archive---------14-----------------------#2021-05-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3786" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">带有 ReactJS 和 ChartsJS 的生产力应用程序——初学者的 10 个简单步骤的迷你项目。</h2></div><p id="e90b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文是在 ReactJS 中创建一个小型项目的分步指南，涵盖了基于函数的组件、钩子、本地存储、charts.js 和其他 npm 库的概念。让我们开始吧！此外，如果您在任何地方遇到问题，您可以在这里查看我的代码<a class="ae jt" href="https://github.com/AsavariA/daily-productivity" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/1cd07d323b068c6090471b073142a55d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gChHtGpSIPKdzmtaMAbJ6w.png"/></div></div></figure><h1 id="1c81" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">步骤 1:创建 React 应用程序</h1><p id="2f7d" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">让我们通过在终端中键入命令<code class="du ld le lf lg b">npx create-react-app my-app</code>来创建我们的 react 应用程序。现在，将 cd 放入刚刚创建的 my-app 文件夹，并运行<code class="du ld le lf lg b">npm start</code>。瞧啊。你刚刚运行你的新项目！</p><h1 id="657b" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">步骤 2:文件和文件夹</h1><p id="c840" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">现在，我们需要制作一些文件和文件夹。在<em class="lh"> src </em>文件夹内，制作一个名为<strong class="iz hj"> <em class="lh">组件</em> </strong> <em class="lh">的文件夹。</em>该文件夹将包含三个文件。<strong class="iz hj"><em class="lh">productivity . js</em></strong><em class="lh">，</em><strong class="iz hj"><em class="lh">productivity . CSS</em></strong><em class="lh">(样式表)，</em><strong class="iz hj"><em class="lh">line chart . js</em></strong><em class="lh">。</em>清理<em class="lh"> App.js </em>和<em class="lh"> App.css(你的风格，你的愿望)</em>文件，让你有一个干净的石板。接下来，让我们将我们的生产力转化为应用程序，将折线图转化为生产力。</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="7b0e" class="lm kh hi lg b fi ln lo l lp lq">//App.js<br/>import Productivity from './Components/Productivity'</span><span id="6c9f" class="lm kh hi lg b fi lr lo l lp lq">function App() {<br/>    return (<br/>        &lt;div className="App"&gt;<br/>            &lt;Productivity /&gt;<br/>        &lt;/div&gt;<br/>    );<br/>}</span><span id="9165" class="lm kh hi lg b fi lr lo l lp lq">export default App;</span><span id="ab5d" class="lm kh hi lg b fi lr lo l lp lq">//Productivity.js<br/>import LineChart from './LineChart'<br/>import './Productivity.css'</span><span id="4c62" class="lm kh hi lg b fi lr lo l lp lq">const Productivity = () =&gt; {<br/>    return (<br/>        &lt;div className='productivity-container'&gt;<br/>            &lt;LineChart /&gt;<br/>        &lt;/div&gt;<br/>    );<br/>}</span><span id="b3a0" class="lm kh hi lg b fi lr lo l lp lq">export default Productivity;</span></pre><h1 id="7a2b" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">步骤 3:安装软件包</h1><p id="e171" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">进入主要部分。记住，从现在开始所有的代码都要写在<strong class="iz hj"> <em class="lh"> LineChart.js </em> </strong>文件中。但是在我们继续之前，让我们安装我们将需要的包和依赖项。为此，在终端中运行以下命令。我们还会将这些导入到我们的文件中。</p><ul class=""><li id="f835" class="ls lt hi iz b ja jb jd je jg lu jk lv jo lw js lx ly lz ma bi translated"><code class="du ld le lf lg b">npm i chart.js</code></li><li id="61ab" class="ls lt hi iz b ja mb jd mc jg md jk me jo mf js lx ly lz ma bi translated"><code class="du ld le lf lg b">npm i react-chartjs-2</code></li><li id="aa29" class="ls lt hi iz b ja mb jd mc jg md jk me jo mf js lx ly lz ma bi translated"><code class="du ld le lf lg b">npm i react-hooks-useform</code></li><li id="9c9e" class="ls lt hi iz b ja mb jd mc jg md jk me jo mf js lx ly lz ma bi translated"><code class="du ld le lf lg b">npm i jquery</code></li></ul><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="1dfa" class="lm kh hi lg b fi ln lo l lp lq">import React,{useState, useEffect} from 'react'<br/>import { Line } from 'react-chartjs-2'<br/>import { useForm } from 'react-hook-form'<br/>import * as $ from 'jquery'<br/>import './Productivity.css'</span></pre><h1 id="07a5" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">步骤 4:本月的天数</h1><p id="9805" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">我们需要图表的 x 轴具有准确的标签数，因为当前月份中有几天。让我们做一个返回完全相同的函数。不仅如此，我们还要在不同的地方使用这个函数。这将是非常重要的。</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="df19" class="lm kh hi lg b fi ln lo l lp lq">function daysInThisMonth() {<br/>    var now = new Date();<br/>    return new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();<br/>}</span></pre><p id="f1bc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">charts.js 中的任何图表都接受两个参数:<strong class="iz hj"> <em class="lh">数据</em> </strong>和<strong class="iz hj"> <em class="lh">选项</em> </strong>。现在，我们的数据必须是动态的，所以我们将为此使用<strong class="iz hj"> <em class="lh"> useState </em> </strong>钩子。但是对于选项，让我们在一开始就声明它们。我们不会在任何时候篡改它们。</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="23ff" class="lm kh hi lg b fi ln lo l lp lq">const options = {<br/>    scales: {<br/>        yAxes: [<br/>            {<br/>                display: true,<br/>                ticks: {<br/>                    beginAtZero: true,<br/>                },<br/>            },<br/>        ],<br/>    },<br/>};</span></pre><h1 id="77c1" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">步骤 5:初始化数据集</h1><p id="2565" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在这一步中，我们将初始化我们的数据集，该数据集将使用 useState 挂钩馈入折线图的<em class="lh">‘data’</em>参数。</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="c022" class="lm kh hi lg b fi ln lo l lp lq">const [datasets, setDatasets] = useState(<br/>    {<br/>        label: 'Your Productivity',<br/>        data: Array(daysInThisMonth()).fill(0),<br/>        fill: false,<br/>        backgroundColor: 'rgb(60, 51, 92)',<br/>        borderColor: 'rgba(60, 51, 92, 0.3)',<br/>    },<br/>)</span><span id="9fc5" class="lm kh hi lg b fi lr lo l lp lq">const data = {<br/>    labels: Array.from({length: daysInThisMonth()}, (_, i) =&gt; i + 1),<br/>    datasets: [datasets],<br/>};</span></pre><p id="1464" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b">Array(daysInThisMonth()).fill(0)</code>是一个数组，元素个数等于当前月的天数，每个元素都是 0。有点像<code class="du ld le lf lg b">[0,0,0,0,0,0,.....]</code>，<code class="du ld le lf lg b">Array.from({length: daysInThisMonth()}, (_, i) =&gt; i + 1)</code>给出当前月份(x 轴)中从 1 到天的数字。</p><h1 id="d4cc" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">第六步:表格</h1><p id="a29d" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">表单。我们想从用户那里获得两个输入。首先是日期(确切地说是天数)，然后是生产率值。我更喜欢把我的工作效率保持在 0 到 10 的范围内，但是你可以按照你喜欢的方式来做。</p><p id="61cd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我们应该记住，我们的输入字段需要限制为一组值，即</p><ul class=""><li id="0c4b" class="ls lt hi iz b ja jb jd je jg lu jk lv jo lw js lx ly lz ma bi translated">输入 1 → 1 到当月的天数</li><li id="3252" class="ls lt hi iz b ja mb jd mc jg md jk me jo mf js lx ly lz ma bi translated">输入 2 → 0 到 10</li></ul><p id="c97e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="lh">使用形式</em> </strong>出现在这里。为此，初始化必要的变量，如下面的表单中的<code class="du ld le lf lg b">const { register, handleSubmit } = useForm();</code>。</p><figure class="jv jw jx jy fd jz"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h1 id="e063" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">第七步:onSubmit()</h1><p id="c754" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">坚持住，我们快到了！让我们设置<strong class="iz hj"> <em class="lh"> onSubmit </em> </strong>函数，它将在我们的值被正确提交时触发。提交表单时要做什么？只需更新我们的<strong class="iz hj">数据集数组</strong>(它记住了所有的 0 ),这样它在给定的日期索引处就有了给定值，并将其反馈给折线图。这里，<code class="du ld le lf lg b">data.datasets[0].data</code>就是我们上面提到的数据集数组。</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="fa08" class="lm kh hi lg b fi ln lo l lp lq">const onSubmit = (d) =&gt; {<br/>    var prodValues = data.datasets[0].data;<br/>    prodValues[d.day - 1] = d.prod;<br/>    setDatasets({<br/>        label: 'Your Productivity',<br/>        data: prodValues,<br/>        fill: false,<br/>        backgroundColor: 'rgb(60, 51, 92)',<br/>        borderColor: 'rgba(60, 51, 92, 0.3)',<br/>    })<br/>    $('#productivity-form').trigger("reset");<br/>}</span></pre><h1 id="5b38" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">步骤 8:标题和渲染</h1><p id="3515" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">我们加个小标题，好吗？我们将在 javascript 中使用<code class="du ld le lf lg b">getMonth()</code>方法。然而，这里的问题是<code class="du ld le lf lg b">getMethod()</code>函数返回一个数字。看看这种方法。</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="30f2" class="lm kh hi lg b fi ln lo l lp lq">var month_names = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];</span><span id="6ce9" class="lm kh hi lg b fi lr lo l lp lq">var date = new Date();</span><span id="806b" class="lm kh hi lg b fi lr lo l lp lq">var month = month_names[date.getMonth()];</span></pre><p id="12ea" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并将标题渲染为<code class="du ld le lf lg b">&lt;h2&gt;Productivity For {month}&lt;/h2&gt;</code></p><p id="82ea" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后将折线图渲染为<code class="du ld le lf lg b">&lt;Line data={data} options={options} /&gt;</code></p><h1 id="5f21" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">第九步:本地存储</h1><p id="aea2" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">我们完了！启动应用程序，尝试你新建立的图表，玩得开心！</p><p id="c9c0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，刷新页面。哎呀！React 应用程序的特点是，当你第一次运行它们时，它们的效果令人惊叹。但是，你一刷新页面，噗！所有输入的数据，所有设定的状态瞬间消失</p><p id="02ee" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">解决方法:(请击鼓)大老家伙，<strong class="iz hj"> <em class="lh">本地储存！</em>T25】</strong></p><p id="c3ce" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们将数据数组从本地存储中取出，放入一个变量中。</p><p id="c1c0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b">const initialArray = (JSON.parse(localStorage.getItem("datasets")).arr)</code></p><p id="14d7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里还有一个问题。如果我们的存储中没有一个名为“数据集”的项目<em class="lh">(当我们第一次运行应用程序时)</em>，这个变量将返回什么，null？但是如果我们做了呢？这很难判断，所以我们需要应用如下的空值检查。</p><p id="a368" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b">const initialArray = localStorage.getItem(‘datasets’) ? (JSON.parse(localStorage.getItem(“datasets”)).arr) : (Array(daysInThisMonth()).fill(0));</code></p><p id="3292" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">也就是说，如果本地存储中存在一个<strong class="iz hj"><em class="lh">【datasets】</em></strong>对象，那太好了，把它的数组放入变量<strong class="iz hj"><em class="lh">【initial array】</em></strong>。但如果没有，没问题，就把全零数组当做<strong class="iz hj"><em class="lh">‘initial array’</em></strong>。</p><h1 id="ccf0" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">步骤 10:使用效果挂钩</h1><p id="df97" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">我们从本地存储中获取这个数组，但是我们实际上在哪里设置它呢？每当数据集发生变化时，我们都需要设置数组。为此，使用了<strong class="iz hj"> <em class="lh"> useEffect </em> </strong>钩子。</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="feb9" class="lm kh hi lg b fi ln lo l lp lq">useEffect(() =&gt; {<br/>    var array = { arr: datasets.data }<br/>    window.localStorage.setItem('datasets', JSON.stringify(array))<br/>}, [datasets])</span></pre><p id="98a3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并且稍微修改一下我们的数据集声明</p><pre class="jv jw jx jy fd li lg lj lk aw ll bi"><span id="45df" class="lm kh hi lg b fi ln lo l lp lq">const [datasets, setDatasets] = useState(<br/>    {<br/>        label: 'Your Productivity',<br/>        data: initialArray,<br/>        fill: false,<br/>        backgroundColor: 'rgb(60, 51, 92)',<br/>        borderColor: 'rgba(60, 51, 92, 0.3)',<br/>    },<br/>)</span></pre><h1 id="05c3" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">我们正式结束了！</h1><p id="4279" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">通过一点点造型，你可以让应用程序看起来非常漂亮。这是我的。你可以在这里查看我的代码<a class="ae jt" href="https://github.com/AsavariA/daily-productivity" rel="noopener ugc nofollow" target="_blank">如果你在任何地方卡住了。</a></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mi"><img src="../Images/6e98bbe828444e1ca01573e0b3bbf589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0q9JLJ8Te6vt5O47MI9law.png"/></div></div></figure><p id="c0ff" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">非常感谢您阅读这篇文章。这是我的第一篇文章。希望你喜欢。</p><p id="537e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">项目链接:<a class="ae jt" href="https://daily-productivity.web.app/" rel="noopener ugc nofollow" target="_blank">https://daily-productivity.web.app/</a></p><p id="07c6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">知识库链接:<a class="ae jt" href="https://github.com/AsavariA/daily-productivity" rel="noopener ugc nofollow" target="_blank">https://github.com/AsavariA/daily-productivity</a></p><p id="5145" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">再次感谢！</p></div></div>    
</body>
</html>