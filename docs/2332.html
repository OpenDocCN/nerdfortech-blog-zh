<html>
<head>
<title>CitySpire</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">城市尖塔</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/cityspire-bf0d400ca370?source=collection_archive---------15-----------------------#2021-05-01">https://medium.com/nerd-for-tech/cityspire-bf0d400ca370?source=collection_archive---------15-----------------------#2021-05-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="38e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">— <strong class="ih hj">传奇仍在继续。</strong></p><p id="bdaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> TLDR: </strong>在接下来的8周多的时间里(兼职)，我继续与一个(不同的)跨职能团队合作开发CitySpire应用程序。数据科学团队收集和清理数据，执行数据分析和功能工程，添加新功能，使用机器学习来创建预测模型并获得建议。使用FastAPI部署这些新特性来创建端点，最后将这个应用程序部署到Amazon Web Services (AWS)上。AWS Elastic Beanstalk托管我们的API，数据存储在AWS关系数据库服务中，特别是Postgres。虽然对许多人来说，他们是在另一个团队继承的代码基础上构建的，但这实际上是我的<a class="ae jd" href="https://github.com/Lambda-School-Labs/labspt15-cityspire-g-ds" rel="noopener ugc nofollow" target="_blank">前一个团队的工作</a>。不幸的是，这对我来说并不意味着一帆风顺，一路上有很多学习、斗争和挫折。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/c2b74cf5731d5158ff0fee37dcf9ef8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X0ZwZSNSEyVENolrXQxcUg.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">乔纳森·罗杰在<a class="ae jd" href="https://unsplash.com/s/photos/cityscape?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="39e6" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">简介:</h1><p id="471d" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">- <em class="kx">对CitySpire的改进</em></p><p id="55c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我之前的文章中，我谈到了帮助用户找到新的家乡城市的应用程序CitySpire。CitySpire的目标是成为用户接收最准确城市信息的一站式资源。该应用程序分析来自城市的数据，如人口、生活成本、租赁率、犯罪率、公园(步行得分)以及许多其他社会和经济因素，这些因素对于决定某人想住在哪里很重要。</p><p id="808d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">问题:</strong>虽然应用程序的当前表单给出了许多关于城市的一般信息。它提供了诸如租金中位数、犯罪率、步行得分、多样性等信息，以及对类似城市的建议。潜在用户要做出如此重大的改变生活的决定，还需要更多的信息。信息，如学校，如果他们与孩子一起搬迁，未来的租金，人口增长或下降，以及其他两个非常重要的因素，出租物业的可用性和就业机会。</p><p id="b6a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解决方案:</strong>city spire 2.0应用程序通过以简单的格式为您提供数据驱动的推荐，让您不再为寻找理想的城市而烦恼。</p><p id="1b4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">制约因素:我和我的团队正在赶时间。我们必须快速适应现有的代码库，并集成利益相关者的<a class="ae jd" href="https://www.notion.so/CitySpire-9134a15c1cc3481e87f8d121f7ef3843" rel="noopener ugc nofollow" target="_blank">特性规范</a>。</p><p id="a83c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据科学团队不得不寻找数据源(网络搜集、获取API密钥、公共记录等。)为用户提供必要的信息。我们必须更新当前的建议(机器学习模型)和宜居性模型，以包括新的数据点。我们还负责创建租金、人口和天气预测。所有这些数据必须以前端可用的格式返回，并且可以连接到后端。</p><p id="2e51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对数据没有那么多的清理和争论。这一次我们进行了相当多的网络数据提取，或者说数据搜集，从不同的网站提取数据。这是另一个很大的限制，因为我们的团队没有很多网络抓取的经验。</p><h1 id="2073" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">策划:</strong></h1><p id="e927" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><strong class="ih hj">系统架构:</strong></p><p id="de74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这方面的规划首先侧重于了解现有CitySpire应用程序的功能。从涉众的规范中实现了哪些特性？当前哪些功能需要调整？需要实现哪些新功能？</p><p id="9d2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我是前一个团队的成员，所以我对布局非常熟悉。在查看和测试了当前的规范之后，我们仔细阅读了产品文档以构建系统架构。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ky"><img src="../Images/9183a621b14ffdf086812f7a0b260abc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NuJ-j7dTmQlojpV7_Dt_dQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">CitySpire队的系统架构</figcaption></figure><p id="ba5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">实施:</strong></p><p id="743a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有几个新特性需要实现，所以我们卷起袖子开始工作。我们使用<a class="ae jd" href="https://trello.com/b/LpH3VjbS/labspt17-cityspire-a" rel="noopener ugc nofollow" target="_blank"> Trello </a>来概述用户故事并创建卡片来保持我们的进度，这样我们就可以在最后期限<a class="ae jd" href="https://www.notion.so/CitySpire-9134a15c1cc3481e87f8d121f7ef3843" rel="noopener ugc nofollow" target="_blank">发布特性</a>。</p><h1 id="37fb" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">启动并运行:</h1><p id="f37d" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">有了之前使用AWS技术堆栈和FastAPI的经验，我能够在第一个周末启动并运行应用程序。这允许后端快速连接到数据科学API。</p><h1 id="8e65" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">FastAPI:</h1><p id="8b65" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">FastAPI是一个现代的高性能web框架，用于基于标准Python类型提示用Python构建API。</p><p id="fef4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开始时，只需运行以下三个命令:</p><ol class=""><li id="6605" class="kz la hi ih b ii ij im in iq lb iu lc iy ld jc le lf lg lh bi translated"><code class="du li lj lk ll b">pipenv install -- dev</code></li><li id="1cf3" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc le lf lg lh bi translated"><code class="du li lj lk ll b">pipenv shell</code></li><li id="f866" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc le lf lg lh bi translated"><code class="du li lj lk ll b">uvicorn app.main:app --reload</code></li></ol><p id="2852" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的步骤是这样工作的，它安装应用程序运行所需的包，然后进入shell，最后，最后一个命令部署FastAPI应用程序。</p><h1 id="f62b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">AWS RDS Postgres:</h1><p id="b75c" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">为了在本地与FastAPI连接，我们需要建立一个数据库来存储以前的数据以及我们需要包含在city spire 2.0版本中的新数据点。</p><p id="eb70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是AWS RDS？Amazon关系数据库服务是由Amazon Web Services提供的分布式关系数据库服务。它是一个运行在“云中”的web服务，旨在简化应用程序中使用的关系数据库的设置、操作和伸缩。(维基百科)我们只是选择了PostgresSQL风格。</p><p id="f936" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本地开发的时候，我用<a class="ae jd" href="https://pypi.org/project/python-dotenv/" rel="noopener ugc nofollow" target="_blank"> python-dotenv </a>加载了一个<code class="du li lj lk ll b">.env</code>文件。(<code class="du li lj lk ll b">.env</code>文件在<code class="du li lj lk ll b">.gitignore</code>中列出。)这确保了我的用户名和密码受到保护。部署时，我们使用弹性Beanstalk控制台来配置环境变量。</p><h1 id="bcbf" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">AWS弹性豆茎:</h1><p id="0be4" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在确保可以在本地部署之后，我们使用AWS Elastic Beanstalk部署了我们的应用程序。</p><p id="669b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS Elastic Beanstalk是一个易于使用的服务，用于部署和扩展web应用程序和服务。您只需上传您的代码，Elastic Beanstalk就会自动处理部署，从容量供应、负载平衡、自动扩展到应用健康监控。</p><p id="ea76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<code class="du li lj lk ll b">awsebcli</code>，我们能够运行以下命令，并且我们已经开始工作了！</p><ol class=""><li id="f3da" class="kz la hi ih b ii ij im in iq lb iu lc iy ld jc le lf lg lh bi translated"><code class="du li lj lk ll b">eb init --platform docker CHOOSE-YOUR-NAME --region us-east-1</code></li><li id="48cc" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc le lf lg lh bi translated"><code class="du li lj lk ll b">eb create --region us-east-1 CHOOSE-YOUR-NAME</code></li><li id="ea6a" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc le lf lg lh bi translated"><code class="du li lj lk ll b">eb open</code></li></ol><p id="656e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在进行更改时，我们必须使用git提交这些更改，然后运行<code class="du li lj lk ll b">eb deploy</code>和<code class="du li lj lk ll b">eb open</code>来重新部署应用程序的更改。</p><p id="c03e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们配置了其他环境变量，比如API键和数据库URL，以确保我们的应用程序能够正常运行。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lr"><img src="../Images/8c6d58e579cc1da07d770dbb72fcc402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-j1FPC01-49t-pCLHOt6g.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">包括数据库名称和URL、API密钥以及应用程序所需的其他环境属性。</figcaption></figure><p id="ce64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Elastic Beanstalk上部署我们的API允许后端开发人员连接到数据，然后将数据传输到前端，允许用户与之交互。</p><h1 id="0e84" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">成功了！</strong></h1><p id="fb8d" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这是我们成功部署后的样子。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ls"><img src="../Images/0615d9a2d1fc7882fa967f309524d517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pJpt-POMJZ9Jrhxd7In7mw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">CitySpire 1.0的端点</figcaption></figure><h1 id="7f18" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">数据:</h1><p id="9046" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><strong class="ih hj"> API键:</strong></p><p id="6b1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">产品规范中的一些新功能不需要大量收集和处理数据。两个新端点的数据需要从其他网站进行API调用。</p><p id="bce0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用API键，我能够格式化租赁列表和当前天气端点。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lt"><img src="../Images/664642d51291703261f6b631cde1c8ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*14fMspH1g8R8Tt-08Af1Zw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">当前天气端点—返回所选城市的当前天气</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lu"><img src="../Images/7cce055a0c109ed77645dcf98ad9925d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-N4bD3phieT4llwwPumR-Q.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">租赁API——用户输入床位、浴室的数量，以及他们想要查看的房源数量</figcaption></figure><p id="3c82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">网页抓取:</strong></p><p id="4db1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他功能不容易获得。有一个功能无疑拓展了我们的能力，那就是在网上搜集优秀学校的数据并呈现给我们的用户。不幸的是，当时该网站没有公开的API。这是我第一次涉足网络抓取。</p><p id="3ae5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了访问这些数据，我使用<a class="ae jd" href="https://selenium-python.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> Selenium </a>和<a class="ae jd" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> Beautiful Soup </a>创建了一个schools csv。这些是使用这两个库所必需的包:这两个库都有很好的文档，在这个过程中很有帮助。</p><ol class=""><li id="f8fb" class="kz la hi ih b ii ij im in iq lb iu lc iy ld jc le lf lg lh bi translated"><code class="du li lj lk ll b">pipenv install bs4</code></li><li id="1c64" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc le lf lg lh bi translated"><code class="du li lj lk ll b">pipenv install requests</code></li><li id="d347" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc le lf lg lh bi translated"><code class="du li lj lk ll b">pipenv install selenium</code></li><li id="758b" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc le lf lg lh bi translated">Selenium需要一个<a class="ae jd" href="https://selenium-python.readthedocs.io/installation.html" rel="noopener ugc nofollow" target="_blank"> web驱动</a>(它自动化的浏览器)。</li></ol><p id="6797" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当前的CitySpire应用程序拥有374个城市的数据。我创建了一个csv格式的城市基于伟大的学校的格式(州/城市)，以提取学校信息。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">使用城市列表电子表格和州缩写字典来生成这个新格式的城市列表</figcaption></figure><p id="2cc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我用来获取各个城市的学校信息的代码。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="e348" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要了解这个过程的更多信息，你可以在这里阅读我的文章<a class="ae jd" rel="noopener" href="/nerd-for-tech/web-scraping-beautiful-soup-and-selenium-468ed6e0dbef"/>。</p><p id="5bd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">型号:</strong></p><p id="4d1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">产品规范中的另一个特性是为人口、租金和天气数据创建预测。</p><p id="f6c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我为人口数据创建了一个预测模型。利用来自人口普查局的10年历史人口数据，我创建了一个模型来预测未来10年的人口增长。这个模型是用FB Prophet创建的。这对我来说是一个新的库，所以我很兴奋地钻研了文档并尝试了一下。</p><p id="1271" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Prophet是一个基于加法模型预测时间序列数据的过程。它最适用于具有强烈季节效应的时间序列和几个季节的历史数据。Prophet的输入总是一个包含两列的data frame:<code class="du li lj lk ll b">ds</code>和<code class="du li lj lk ll b">y</code>。<code class="du li lj lk ll b">ds</code>(日戳)栏应该是熊猫期望的格式。<code class="du li lj lk ll b">y</code>栏必须是数字，代表我们希望预测的测量值。</p><p id="8f5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用了以下代码:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="3816" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要更改我的已清理csv:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lx"><img src="../Images/b890c6e34fe4c47865c50ca201b7c5c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CH2ofgfwzK9X0pqqyORo9g.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">人口_已清理. csv</figcaption></figure><p id="05e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对此:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ly"><img src="../Images/f7dced8a19ad430506487fe3d85c2af5.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*5Sh4qObZMK127GlJjozydA.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">人口_熔体. csv</figcaption></figure><p id="a92e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我按照城市名对csv进行分组，并将<code class="du li lj lk ll b">ds</code>列改为熊猫日期时间格式。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">以值和城市名作为关键字的分组csv字典代码</figcaption></figure><p id="c436" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我创建了一个循环，遍历字典中的每一项，并将Prophet模型应用于未来10年的预测值，并创建了一个prediction.csv。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">先知模型</figcaption></figure><p id="73ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">先知是非常强大的。当我尝试为实时预测创建pickled模型时，该模型非常大(22 GB)。这可能是因为它对季节性非常敏感。先知在这种情况下绝对是一把宽剑。下一次，我会使用线性回归模型，因为数据没有考虑季节/假期的变化。</p><p id="4c96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一个模型是人口预测的可视化，用户可以看到他们想要的城市的预计人口增长。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lz lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">加利福尼亚州旧金山10年人口预测</figcaption></figure><h1 id="f6d9" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">API端点:</h1><p id="3e8b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我们能够实现涉众规范中概述的大多数特性。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/3d86d16b0af36667051616c53b50859c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gO38h9HcGhydSzHOLpuNzQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">红色轮廓是新的和更新的端点</figcaption></figure><p id="7676" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">更新:</strong></p><p id="6d7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/get_data</code> —此终点已更新，以反映新的和更新的数据点。<code class="du li lj lk ll b">get_data</code>现在除了<code class="du li lj lk ll b">walkability</code>还有<code class="du li lj lk ll b">transitscore</code>和<code class="du li lj lk ll b">bikescore</code>。还有一个<code class="du li lj lk ll b">percent_high_performing_schools.</code>它有一个更新的<code class="du li lj lk ll b">livability score</code>和<code class="du li lj lk ll b">recommendations</code>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mb"><img src="../Images/51a7e9da1fcf36190251dff81edb2df7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*849HFw3ts-cwBdtKsQfGNw.png"/></div></div></figure><p id="2719" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/nearest</code> —该终点也进行了更新，以反映新的数字数据点(自行车和交通分数，以及学校数据)。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="0203" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/livability</code> —更新存活率分数以包括<code class="du li lj lk ll b">transitscore</code>、<code class="du li lj lk ll b">bikescore</code>和<code class="du li lj lk ll b">percent_high_performing_schools</code></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mc"><img src="../Images/ec08c46d5cf0d10195a0e5cd6c1187c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l5YysZeJiBnaPJMkWgG84g.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">更新宜居性得分计算——权重可由用户调整</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es md"><img src="../Images/97cad8eb79c39c675d25ebf679f12df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_tyFD9IUy3cUqovRpDelhQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">宜居性得分</figcaption></figure><p id="493a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">新:</strong></p><p id="d7bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/all_cities</code> —列出数据库中的所有城市</p><p id="a49b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/transitscore</code> —从walkscore.com获取总线分数</p><p id="0e87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/bikescore</code> —从walkscore.com获得自行车成绩</p><p id="8a2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/school_summary</code> —创建从greatschools.org搜集的学校信息摘要</p><p id="4ca3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/population_forecast_graph</code> —使用Prophet创建10年人口预测</p><p id="a083" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/rental_forecast_graph</code> —使用过去5年的平视显示器租赁价格数据，为单间到三间卧室的租赁创建10年租赁预测。</p><p id="afc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/temperature</code> —从openweather.org获取当前天气</p><p id="856c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/job_opportunities</code> —用户可以使用indeed.com的数据查询目标城市的职位信息</p><p id="f945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/rental_listing</code> —从realtor.com返回租赁列表</p><p id="4810" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">/api/schools_listing </code> —根据学校类别(学前教育、小学、初中和高中)返回目标城市的学校列表</p><h1 id="ed87" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">最终想法:</h1><p id="c963" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这个项目是一次很有启发性的经历。“在工作中”学习，探索新的图书馆和技术是令人兴奋的。在跨职能团队中工作，强调书面和口头沟通的重要性。作为一名专业人士，这个机会拓展了我的视野，我将珍惜所提供的合作和建设性反馈。</p><p id="8c4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">需要改进的地方:</strong></p><p id="838e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">DS团队努力实现了上述功能，但总有改进的空间。</p><p id="64a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些可能的后续步骤是:</p><ul class=""><li id="75a0" class="kz la hi ih b ii ij im in iq lb iu lc iy ld jc me lf lg lh bi translated">创建一个自然语言过程推荐系统，用户可以在其中设置标准并接收基于他们的查询的结果。</li></ul><p id="5a33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">已经收集了许多信息，但没有得到充分利用，例如:</p><ul class=""><li id="42dd" class="kz la hi ih b ii ij im in iq lb iu lc iy ld jc me lf lg lh bi translated">利用收入和贫困水平等社会经济因素</li><li id="a5bd" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc me lf lg lh bi translated">与此相关的主要行业和工资</li></ul><p id="c855" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以包括但不限于以下信息:</p><ul class=""><li id="31ed" class="kz la hi ih b ii ij im in iq lb iu lc iy ld jc me lf lg lh bi translated">这个城市的人们做什么消遣，是博物馆还是餐馆？</li><li id="c383" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc me lf lg lh bi translated">这座城市以什么而闻名，比如特定的文化或历史遗迹？</li></ul><p id="b8b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种应用的可能性是无限的。</p><h1 id="cb1d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">团队概述:</h1><p id="146f" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我在一个远程跨职能团队工作了8周(兼职),担任API工程师、数据科学家和机器学习工程师，以构建CitySpire。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mf"><img src="../Images/07ed52227886456d263e1699221c975b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SfWht90rr33OxLeNCREPZw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">城市尖塔A队</figcaption></figure><p id="0a04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我所在的团队有五名web开发人员、四名数据科学家、三名iOS开发人员和我们的团队项目负责人。在这8周的时间里，我们变成了一个由五名web开发人员、三名数据科学家(我是其中之一)、一名iOS开发人员和我们团队项目负责人组成的团队。幸运的是，那些留下的人努力工作来实现利益相关者的愿景。</p><p id="ba29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">角色:</strong> API工程师，数据科学家，机器学习工程师，数据可视化</p><p id="48d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> DS Tech栈:</strong> Python，FastAPI，AWS RDS Postgres，AWS弹性豆茎，美汤</p><p id="62ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">时间表:</strong> 8周(兼职)</p><p id="17a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的最终产品可以在这里找到<a class="ae jd" href="https://github.com/Lambda-School-Labs/PT17_cityspire-a-ds" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="3941" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">演示:</strong></h1><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mg lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">CItySpire 2.0 API演示和DS架构</figcaption></figure><h1 id="b438" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">闪电对话:</h1><p id="5993" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在8周结束时，我展示了测试驱动开发，这是我可以添加到我的数据科学工具箱中的有价值的工具之一。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mh lw l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">关于测试驱动开发的闪电谈话</figcaption></figure><h1 id="22dd" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">链接:</h1><p id="2120" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><strong class="ih hj">数据来源:</strong></p><ul class=""><li id="1aba" class="kz la hi ih b ii ij im in iq lb iu lc iy ld jc me lf lg lh bi translated">租赁列表—<a class="ae jd" href="https://www.realtor.com/" rel="noopener ugc nofollow" target="_blank">https://www.realtor.com/</a></li><li id="0ec2" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc me lf lg lh bi translated">租赁数据—<a class="ae jd" href="https://www.huduser.gov/portal/datasets/50per.html" rel="noopener ugc nofollow" target="_blank">https://www.huduser.gov/</a></li><li id="3fb8" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc me lf lg lh bi translated">天气信息—<a class="ae jd" href="https://home.openweathermap.org/" rel="noopener ugc nofollow" target="_blank">https://home.openweathermap.org/</a></li><li id="2cc9" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc me lf lg lh bi translated">学校列表—<a class="ae jd" href="https://www.greatschools.org" rel="noopener ugc nofollow" target="_blank">https://www.greatschools.org</a></li><li id="5f05" class="kz la hi ih b ii lm im ln iq lo iu lp iy lq jc me lf lg lh bi translated">公交得分和自行车得分—<a class="ae jd" href="https://www.walkscore.com/" rel="noopener ugc nofollow" target="_blank">https://www.walkscore.com/</a></li></ul></div></div>    
</body>
</html>