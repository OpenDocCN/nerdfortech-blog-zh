<html>
<head>
<title>All Basics of MongoDB in 10 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">10 分钟内完成 MongoDB 的所有基础知识</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/all-basics-of-mongodb-in-10-minutes-baddaf6b6625?source=collection_archive---------0-----------------------#2021-05-01">https://medium.com/nerd-for-tech/all-basics-of-mongodb-in-10-minutes-baddaf6b6625?source=collection_archive---------0-----------------------#2021-05-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d8cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MongoDB 是一个丰富的面向文档的开源数据库，也是被广泛认可的 NoSQL 数据库之一。它是用 C++编程语言编写的。</p><p id="c52c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我想分享一些关于 MongoDB 概念和命令的基本知识</p><h1 id="c7b8" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">重要术语</h1><h2 id="7f16" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">数据库ˌ资料库</h2><p id="565a" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">数据库是集合的物理容器。每个数据库在文件系统上都有自己的文件集。一台 MongoDB 服务器通常有多个数据库。</p><h2 id="443d" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">收藏品</h2><p id="7f07" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">集合是一组文档，类似于 RDBMS 表。集合存在于单个数据库中。集合不强制架构。集合中的文档可以有不同的字段。</p><h2 id="f88c" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">文件</h2><p id="9f04" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">文档是一组键值对。文档具有动态模式。动态模式意味着同一集合中的文档不需要具有相同的字段集或结构，并且集合文档中的公共字段可以保存不同类型的数据。</p><h1 id="5c00" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">数据类型</h1><p id="3f27" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">(参考:tutorialsPoint)</p><p id="e6e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MongoDB 支持许多数据类型，例如:</p><ul class=""><li id="e470" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated"><strong class="ih hj">字符串</strong>——这是存储数据最常用的数据类型。MongoDB 中的字符串必须是 UTF-8 有效。</li><li id="532d" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">整数</strong>——该类型用于存储数值。整数可以是 32 位或 64 位，具体取决于您的服务器。</li><li id="6536" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">布尔值</strong>—该类型用于存储一个布尔值(真/假)。</li><li id="c361" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">Double</strong>——该类型用于存储浮点值。</li><li id="55e8" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">最小/最大键</strong>—该类型用于将数值与最低和最高 BSON 元素进行比较。</li><li id="4e36" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">数组</strong>—该类型用于将数组或列表或多个值存储到一个键中。</li><li id="fa45" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">时间戳</strong>—ctimestamp。当文档被修改或添加时，这对于记录非常方便。</li><li id="ff04" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">对象</strong>——该数据类型用于嵌入文档。</li><li id="a242" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">空值</strong>—该类型用于存储空值。</li><li id="5e94" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">符号</strong>——该数据类型的用法与字符串相同；然而，它通常是为使用特定符号类型的语言保留的。</li><li id="7faf" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">日期</strong>—该数据类型用于以 UNIX 时间格式存储当前日期或时间。您可以通过创建日期对象并向其中传递日、月、年来指定您自己的日期时间。</li><li id="8f72" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">对象 ID</strong>—该数据类型用于存储文档的 ID。</li><li id="1640" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">二进制数据</strong>——该数据类型用于存储二进制数据。</li><li id="bea1" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj"> Code </strong>该数据类型用于将 JavaScript 代码存储到文档中。</li><li id="f232" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">正则表达式</strong>——该数据类型用于存储正则表达式。</li></ul><h1 id="32f2" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">设置</h1><p id="aeee" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">在进入 MongoDB 之前，您需要首先在您的计算机上安装 MongoDB。为此，请使用 brew 访问【mongo 官方网站或<a class="ae li" href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/" rel="noopener ugc nofollow" target="_blank">，并根据特定操作系统下载版本。这里，我用过 Mac。</a></p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="a387" class="kb je hi lo b fi ls lt l lu lv">brew tap mongodb/brew<br/>brew install mongodb-community@4.4</span></pre><p id="87e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有几个有趣的可执行二进制文件:</p><ul class=""><li id="6c86" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated">mongod 服务器——Mongo 守护进程或 mongod 是 MongoDB 使用的后台进程。它管理所有的 MongoDB 服务器任务。</li><li id="1698" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">mongo shell——这是一个命令行 shell，有助于与客户端进行交互</li><li id="8e36" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">mongos 分片集群查询路由器</li></ul><p id="e0de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们看看如何启动并运行该服务器。要在 Windows 上做到这一点，首先需要在 c 盘上创建几个目录。打开 c 盘中的命令提示符，执行以下操作:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="4b27" class="kb je hi lo b fi ls lt l lu lv">mkdir data<br/>cd data<br/>mkdir db</span></pre><p id="de4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lw lx ly lo b">/data/db</code>的目的是 MongoDB 需要一个文件夹来存储所有数据。这是驱动器上的默认数据目录路径。因此，我们有必要提供这些目录。</p><p id="925a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果在没有这些目录的情况下启动 MongoDB 服务器，您可能会看到错误。</p><p id="9f8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建目录后，运行以下命令:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="45d9" class="kb je hi lo b fi ls lt l lu lv">mongod</span></pre><p id="a374" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您的 MongoDB 服务器已经启动并运行了！</p><p id="aa5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了使用这个服务器，我们需要一个可以充当客户端的中介。因此，打开另一个终端窗口并运行以下命令:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3504" class="kb je hi lo b fi ls lt l lu lv">mongo</span></pre><p id="ec51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行该命令后，导航到运行 mongod 命令的窗口。您将在最后看到一条“连接已接受”的消息。这意味着我们的安装和配置是成功的！</p><p id="cf4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只需在 mongo shell 中运行:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c7c9" class="kb je hi lo b fi ls lt l lu lv">db</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es lz"><img src="../Images/ea253637b0a757b6ad9abe21042587cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yTGtos8-vxLHV5IOqYsgw.png"/></div></div></figure><p id="d1d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最初，您有一个名为<strong class="ih hj"> test </strong>的默认数据库。</p><h1 id="3b4d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">命令</h1><h2 id="9a71" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">1.查找您当前所在的数据库</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ae0f" class="kb je hi lo b fi ls lt l lu lv">db</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es lz"><img src="../Images/ea253637b0a757b6ad9abe21042587cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yTGtos8-vxLHV5IOqYsgw.png"/></div></div></figure><p id="215a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该命令将显示您当前所在的数据库。<code class="du lw lx ly lo b">test</code>是默认出现的初始数据库。</p><h2 id="3b36" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">2.列出数据库</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7b4a" class="kb je hi lo b fi ls lt l lu lv">show databases</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mh"><img src="../Images/70825b0abaea1517d1b716b657661f9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3W-7ZzLR3OdDESpokd0fqA.png"/></div></div></figure><p id="50ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我目前有五个数据库。分别是:<code class="du lw lx ly lo b">blogDB</code>、<code class="du lw lx ly lo b">postsDB</code>、<code class="du lw lx ly lo b">admin</code>、<code class="du lw lx ly lo b">config</code>和<code class="du lw lx ly lo b">local</code>。</p><h2 id="5da7" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">3.转到特定的数据库</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="cfc0" class="kb je hi lo b fi ls lt l lu lv">use &lt;your_db_name&gt;<br/>eg: use blogDB</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div class="er es mi"><img src="../Images/e8a48fcb443bd73461699c6984838347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*lR5KVgryGwkboPruTNTHPA.png"/></div></figure><p id="86a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我已经转移到了<code class="du lw lx ly lo b">blogDB</code>数据库。</p><h2 id="c810" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">4.创建数据库</h2><p id="48be" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">在关系数据库中，我们有数据库、表、行和列的概念。但是在 NoSQL 数据库中，数据是以 BSON 格式存储的，这是 JSON 的二进制版本。它们存储在<strong class="ih hj">集合</strong>中。</p><p id="b4b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 SQL 数据库中，这些类似于表。</p><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mj"><img src="../Images/95fc0842b2eed172ef895b3e6751d04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rlLOjmeLlGQyzETu.png"/></div></div></figure><p id="2912" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SQL 术语和 NoSQL 术语由<a class="ae li" href="https://www.blogger.com/profile/18437865869379626284" rel="noopener ugc nofollow" target="_blank">维多利亚马来亚</a></p><p id="bc43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在 mongo shell 中创建数据库，请使用以下命令:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="93ba" class="kb je hi lo b fi ls lt l lu lv">use &lt;new_db_name&gt;</span></pre><p id="2943" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果带有<new_db_name>的数据库已经存在，上述命令将导航到现有数据库。但是如果数据库不存在，那么它将创建新的数据库并导航到其中。</new_db_name></p><p id="39e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建新数据库后，运行<code class="du lw lx ly lo b">show database</code>命令不会显示新数据库，直到它有任何数据。</p><h2 id="4270" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">5.删除数据库</h2><p id="3eb6" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">以下命令用于删除现有数据库。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="509d" class="kb je hi lo b fi ls lt l lu lv">db.dropDatabase()</span></pre><h2 id="c832" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">6.创建收藏</h2><p id="b396" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">您可以使用<code class="du lw lx ly lo b">use</code> <strong class="ih hj"> <em class="mk"> </em> </strong>命令切换到您新创建的数据库。创建集合的一种方法是将数据插入到集合中:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="fab9" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.insert({"name": "dove", "age" : 26, "email": "test@gmail.com"})</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es ml"><img src="../Images/8b0df1d55e67c2ef6f20678b6f8916a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gvxu1za9eKkOnTCQe5jVvA.png"/></div></div></figure><p id="1c73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将首先创建您的收藏<code class="du lw lx ly lo b">testCollection</code> <em class="mk"> </em>如果收藏不存在。然后它会插入一个带有<code class="du lw lx ly lo b">name, age and email</code>的文档。</p><p id="e10e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建集合的其他方法如下所示:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="16fd" class="kb je hi lo b fi ls lt l lu lv">db.createCollection("testCollection")</span></pre><p id="0cc0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，您将在不插入数据的情况下创建一个集合。</p><h2 id="eff7" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">7.插入数据</h2><p id="e486" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">我们可以将数据插入到新的集合中，或者插入到以前创建的集合中。有三种插入数据的方法。</p><ol class=""><li id="2dcd" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc mm la lb lc bi translated"><code class="du lw lx ly lo b">insertOne()</code>仅用于插入单个文档。</li><li id="22d2" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc mm la lb lc bi translated"><code class="du lw lx ly lo b">insertMany()</code>用于插入多份文件。</li><li id="3025" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc mm la lb lc bi translated"><code class="du lw lx ly lo b">insert()</code>用于插入任意数量的文件。</li></ol><p id="96bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是一些例子:</p><ul class=""><li id="5c46" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated"><strong class="ih hj"> insertOne() </strong></li></ul><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="00d1" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.insertOne(<br/>      {<br/>       "name": "bhim", <br/>       "age": 22,<br/>       "email": "tewst@gmail.com"<br/>      }<br/>)</span></pre><ul class=""><li id="7b1d" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated"><strong class="ih hj"> insertMany() </strong></li></ul><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ba8c" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.insertMany([<br/>      {<br/>        "name": "navindu", <br/>        "age": 22,<br/>        "email": "nav@gmail.com"<br/>      },      {<br/>        "name": "kovid", <br/>        "age": 27,<br/>        "email": "kovig@gmail.com"<br/>      },<br/>      {<br/>        "name": "john doe", <br/>        "age": 25,<br/>        "city": "Hyderabad"<br/>      }<br/>   ]<br/>)</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mn"><img src="../Images/9ff27ca32bd5659f039a0ceb2d4b7202.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*thhoLIP1w82mlMiUV9-HKw.png"/></div></div></figure><p id="05e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lw lx ly lo b">insert()</code>方法类似于<code class="du lw lx ly lo b">insertMany()</code>方法。</p><p id="f3d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另外，注意我们在文档中为<code class="du lw lx ly lo b">john doe</code> <em class="mk">插入了一个名为<code class="du lw lx ly lo b">city</code> <strong class="ih hj"> <em class="mk"> </em> </strong>的新属性。</em>所以如果你<em class="mk"> </em>使用<em class="mk"/><code class="du lw lx ly lo b">find</code><strong class="ih hj"><em class="mk"/></strong>那么你只会看到对于<em class="mk"/><code class="du lw lx ly lo b">john doe</code><code class="du lw lx ly lo b">city</code><em class="mk"/>属性的附加。</p><p id="a54e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于 MongoDB 这样的 NoSQL 数据库，这可能是一个优势。它允许可伸缩性。</p><h2 id="be36" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">8.在集合中查找数据</h2><p id="5a45" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">以下是查询集合中所有数据的方法:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="536d" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.find()</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mo"><img src="../Images/84fc262d63e8f6ae5243bc255c71ed82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Zh0YvFwb-IZXUu0pS6l5Q.png"/></div></div></figure><p id="adc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想在一个更干净的地方看到这个数据，只需要在它的末尾加上<code class="du lw lx ly lo b">.pretty()</code> <em class="mk"> </em>就可以了。这将以漂亮的 JSON 格式显示文档。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7bd2" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.find().pretty()</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mp"><img src="../Images/8fcd7dc089aab6a5c377e2b8c31c2c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z6GJfqJ52pv1QLS7B_97uQ.png"/></div></div></figure><p id="d61d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上述文档中，每个文档中都有一个名为<code class="du lw lx ly lo b">_id</code>的额外字段。每当您插入一个文档时，MongoDB 都会自动添加一个<code class="du lw lx ly lo b">_id </code>字段来惟一地标识每个文档。</p><p id="dead" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您想要显示某个特定的文档，您可以指定想要显示的文档的单个细节。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="146e" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.find(<br/>        {<br/>          name: "john doe"<br/>        }<br/>)</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mq"><img src="../Images/08ab00ff2921504f8acea1bba4ecfbed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SL1qG88BpUmj0NJ6twXXkw.png"/></div></div></figure><p id="3c98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果只想显示 25 岁以下的人，可以使用<code class="du lw lx ly lo b">$lt</code>根据条件过滤掉文档。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="d04a" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.find(         <br/>       {<br/>           age : {$lt : 25}         <br/>       })</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mr"><img src="../Images/a0d120201a2f02bf8bae138711e1ced7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-i1Jcz0CtuLF4MP9qg5euA.png"/></div></div></figure><p id="e84e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，<code class="du lw lx ly lo b">$gt</code>代表大于，<code class="du lw lx ly lo b">$lte</code>是“小于等于”，<code class="du lw lx ly lo b">$gte</code>是“大于等于”，<code class="du lw lx ly lo b">$ne</code>是“不等于”。</p><h2 id="3dc8" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">9.更新文档</h2><p id="2c0d" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">假设你想更新某人的地址或年龄，你该怎么做呢？好吧，看下一个例子:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="b4fb" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.update({age : 22}, {$set: {age: 24}})</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es ms"><img src="../Images/e6e4c088d01830cc5fc8026ac3c7ba50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lkXcMKqAvXKbBYpbxUFAfA.png"/></div></div></figure><p id="3ebd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一个参数是要更新哪个文档的字段。如果您需要从单个文档中删除一个属性，您可以这样做(假设您希望<code class="du lw lx ly lo b">age</code> <em class="mk"> </em>消失):</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="612d" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.update({name: "navindu"}, {$unset: {age:""}});</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mt"><img src="../Images/36f8c9a7ab09116c983d48221ee385e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gCIwXv0AKdPr9NevOtwjg.png"/></div></div></figure><h2 id="f808" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">10.删除文档</h2><p id="f9a4" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">当您更新或删除一个文档时，您只需要指定<code class="du lw lx ly lo b">_id</code>，而不仅仅是<code class="du lw lx ly lo b">name</code>、<code class="du lw lx ly lo b">age</code>、<code class="du lw lx ly lo b">email</code>或<code class="du lw lx ly lo b">city</code>。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6c94" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.remove({name: "navindu"});</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mu"><img src="../Images/6a67317eb8b8c11121e21a59c87a64d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vlmU0WXE8fwI2W_OCJ4FXg.png"/></div></div></figure><h2 id="4322" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">11.移除收藏</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2290" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.remove({});</span></pre><p id="d6fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述命令不等同于用于删除集合中所有文档的<code class="du lw lx ly lo b">drop()</code>方法，而是使用<code class="du lw lx ly lo b">remove()</code>方法删除所有文档以及集合本身。</p><h2 id="cadf" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">12.删除收藏</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="38df" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.drop()</span></pre><h2 id="77a5" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">13.极限方法</h2><p id="ff45" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">要限制 MongoDB 中的记录，需要使用<strong class="ih hj"> limit() </strong>方法。该方法接受一个 number 类型的参数，这是您希望显示的文档数。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ee02" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.find().limit(2)</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mv"><img src="../Images/baad9cc7c0ff8f217f18f0f03ce9ad5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AowPBSEIjpITBvm8OGgseA.png"/></div></div></figure><h2 id="21b1" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">14.排序方法</h2><p id="ad95" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">在 MongoDB 中对文档进行排序，需要使用<strong class="ih hj"> sort() </strong>方法。该方法接受包含字段列表及其排序顺序的文档。使用 1 和-1 来指定排序顺序。1 用于升序，而-1 用于降序。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6baa" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.find().sort({name: 1})</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mw"><img src="../Images/2fc1d0a1d21ab068728d6d0fe02e1c95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VC08p8LLpUISMeLAC7M5vg.png"/></div></div></figure><h1 id="6848" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">索引</h1><p id="c007" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">索引支持高效的查询解析。如果没有索引，MongoDB 必须扫描集合中的每个文档，以选择那些与查询语句匹配的文档。这种扫描效率非常低，需要 MongoDB 处理大量数据。</p><p id="a4c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">索引是特殊的数据结构，它以易于遍历的形式存储一小部分数据集。索引存储特定字段或字段集的值，按照索引中指定的字段值排序。</p><h2 id="469c" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">createIndex()方法</h2><p id="52ae" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">要创建索引，需要使用 MongoDB 的 createIndex()方法。<strong class="ih hj"> createIndex() </strong>方法的基本语法如下()。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="a12c" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.createIndex({"name":1})</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mx"><img src="../Images/30ffc312f904e075e3e0f9dd782ca807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1cwjfbAuHQIjjFlm5K_fw.png"/></div></div></figure><p id="ee99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里 key 是你要创建索引的字段的名称，1 表示升序。要按降序创建索引，需要使用-1。</p><h2 id="ec09" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">dropIndex()方法</h2><p id="f9dd" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">您可以使用 MongoDB 的 dropIndex()方法删除特定的索引。DropIndex()方法的基本语法如下()。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="9c47" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.dropIndex({"name":1})</span></pre><p id="f60b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里 key 是你要创建索引的文件的名字，1 代表升序。要按降序创建索引，需要使用-1。</p><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es my"><img src="../Images/ead335b3959270da32d0c866fec2edd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_OXytip8jcz2Pwq8M838xQ.png"/></div></div></figure><h2 id="17c6" class="kb je hi bd jf kc kd ke jj kf kg kh jn iq ki kj jr iu kk kl jv iy km kn jz ko bi translated">dropIndexes()方法</h2><p id="d832" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">此方法删除集合中的多个(指定的)索引。DropIndexes()方法的基本语法如下()</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="480b" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.dropIndexes()</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mz"><img src="../Images/3d294bd932eddbd3ab31876d58945e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PRxYorOKnc-6mw6Uy-VRRg.png"/></div></div></figure><h1 id="56a3" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">getIndexes()方法</h1><p id="1f20" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">该方法返回集合中所有索引的描述。下面是 getIndexes()方法的基本语法</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="eff3" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.getIndexes()</span></pre><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es na"><img src="../Images/3ed3d922f5cf391c0e2a391defa89a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMeu3A5OasFv9lNu31Mz6g.png"/></div></div></figure><h1 id="3024" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">逻辑运算符</h1><p id="3e60" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">MongoDB 提供了逻辑运算符。下图总结了不同类型的逻辑运算符。</p><figure class="lj lk ll lm fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es nb"><img src="../Images/8e6b57e4cc10826b44d251182adef933.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3pcTNjasXg6NySq9.jpeg"/></div></div><figcaption class="nc nd et er es ne nf bd b be z dx translated">参考:MongoDB 手册</figcaption></figure><p id="0bd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您想要显示年龄小于 25 岁的人，并且他们的位置在科伦坡。我们能做什么？</p><p id="e62a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用<code class="du lw lx ly lo b">$and</code> <strong class="ih hj"> </strong>运算符！</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6c4d" class="kb je hi lo b fi ls lt l lu lv">db.testCollection.find({$and:[{age : {$lt : 25}}, {city: "colombo"}]});</span></pre><h1 id="8e45" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">MongoDB 相对于 RDBMS 的优势</h1><p id="2f0a" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">(参考:TutorialsPoint)</p><ul class=""><li id="bf28" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated"><strong class="ih hj">无模式</strong>—MongoDB 是一个文档数据库，其中一个集合包含不同的文档。文档的字段数量、内容和大小可以因文档而异。</li><li id="45ec" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">单个对象的结构是清楚的。</li><li id="0c5f" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">没有复杂的连接。</li><li id="aece" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">深度查询能力。MongoDB 支持使用基于文档的查询语言对文档进行动态查询，这种语言几乎和 SQL 一样强大。</li><li id="d737" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">调音。</li><li id="366b" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj">易于扩展</strong>—MongoDB 易于扩展。</li><li id="f37c" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">不需要应用程序对象到数据库对象的转换/映射。</li><li id="eaef" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">使用内部内存存储(窗口)工作集，支持更快的数据访问。</li></ul></div><div class="ab cl ng nh gp ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="hb hc hd he hf"><p id="6883" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="mk">感谢阅读！</em> </strong></p></div></div>    
</body>
</html>