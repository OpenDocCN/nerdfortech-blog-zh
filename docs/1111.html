<html>
<head>
<title>Time-lapse heat maps with Folium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带叶子的时移热图</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/time-lapse-heat-maps-with-folium-1847f53ec956?source=collection_archive---------0-----------------------#2021-03-05">https://medium.com/nerd-for-tech/time-lapse-heat-maps-with-folium-1847f53ec956?source=collection_archive---------0-----------------------#2021-03-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="13b9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">这是一个教程，面向那些对使用Python创建带时间推移的热图感兴趣的人。</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/97e220ed9ff057445bdfacc4537641ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yA5ys7Tc26IqpRNqo7ZGPg.jpeg"/></div></div></figure><p id="e4a0" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">写这一步一步的想法来自对纽约市逮捕数据的探索性分析。在一个数据科学项目中，我决定用一个数据集块测试一些空间可视化python库。所以我试着创建一个纽约抢劫案的延时热图。正如我们将看到的，这种产品可以提供一些有价值的见解。</p><h2 id="13f1" class="kn ig hi bd ih ko kp kq il kr ks kt ip ka ku kv it ke kw kx ix ki ky kz jb la bi translated">纽约市逮捕数据集</h2><p id="3f7f" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">使用的数据集可在以下链接中找到:</p><div class="lg lh ez fb li lj"><a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Arrests-Data-Historic-/8h9b-rp9u" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab dw"><div class="ll ab lm cl cj ln"><h2 class="bd hj fi z dy lo ea eb lp ed ef hh bi translated">NYPD逮捕数据(历史)|纽约市公开数据</h2><div class="lq l"><h3 class="bd b fi z dy lo ea eb lp ed ef dx translated">编辑描述</h3></div><div class="lr l"><p class="bd b fp z dy lo ea eb lp ed ef dx translated">data.cityofnewyork.us</p></div></div></div></a></div><p id="5826" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">我们总结一下:</p><p id="5ee1" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">数据集包含超过4，000，000行和以下各列:</p><p id="c09a" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">逮捕密钥:</strong>为每次逮捕随机生成的永久ID</p><p id="02ab" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">逮捕日期:</strong>报告事件的确切逮捕日期</p><p id="9a25" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj"> PD_CD: </strong>三位内部分类代码(比关键代码更细)</p><p id="b3b7" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">PD _ desc:</strong>PD代码对应的内部分类描述(比罪行描述更细化)</p><p id="0edf" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj"> KY_CD: </strong>三位数内部分类代码(比PD代码更通用的类别)</p><p id="be79" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">OFNS _ desc:</strong>KY代码对应的内部分类描述(比PD描述更一般的类别)</p><p id="14dc" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">法律_代码:</strong>法律代码费用对应于NYS刑法、VTL和其他各种当地法律</p><p id="bc6f" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj"> LAW_CAT_CD: </strong>犯罪等级:重罪、轻罪、违规</p><p id="f032" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">拘捕_博罗:</strong>拘捕区。b(布朗克斯)，S(斯塔滕岛)，K(布鲁克林)，M(曼哈顿)，Q(皇后区)</p><p id="a73b" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">逮捕_辖区:</strong>逮捕发生的辖区</p><p id="0487" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">辖区_代码:</strong>负责逮捕的辖区。管辖区代码0(巡逻)、1(过境)和2(住房)代表NYPD，而代码3及以上代表非NYPD管辖区</p><p id="b790" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">年龄组:</strong>犯罪人的年龄在某一类别内</p><p id="ba5f" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">犯罪者_性别:</strong>犯罪者的性别描述</p><p id="bb65" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">犯罪者种族:</strong>犯罪者的种族描述</p><p id="510c" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj"> X_COORD_CD: </strong>纽约州平面坐标系统的中区X坐标，长岛区，NAD 83，单位英尺(FIPS 3104)</p><p id="b2cc" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj"> Y_COORD_CD: </strong>纽约州平面坐标系的中间区块Y坐标，长岛区，NAD 83，单位英尺(FIPS 3104)</p><p id="30c7" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">纬度:</strong>全球坐标系的纬度坐标，WGS 1984，十进制度(EPSG 4326)</p><p id="e64c" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">经度:</strong>全球坐标系的经度坐标，WGS 1984，十进制度(EPSG 4326)</p><p id="2064" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj"> Lon_Lat: </strong>基于经度和纬度字段的地理参考点列</p><ul class=""><li id="0d59" class="ls lt hi jr b js jt jw jx ka lu ke lv ki lw km lx ly lz ma bi translated">该数据集包含2006年至2019年间的逮捕信息。</li><li id="c188" class="ls lt hi jr b js mb jw mc ka md ke me ki mf km lx ly lz ma bi translated">它包含犯罪类型(抢劫、袭击等..).</li><li id="48db" class="ls lt hi jr b js mb jw mc ka md ke me ki mf km lx ly lz ma bi translated">它包含一些细节，如种族、性别和年龄。</li><li id="b9eb" class="ls lt hi jr b js mb jw mc ka md ke me ki mf km lx ly lz ma bi translated">它包含逮捕的地理信息(坐标和邻居)。</li></ul><p id="3d76" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">让我们现在检查一下</p><h2 id="ba64" class="kn ig hi bd ih ko kp kq il kr ks kt ip ka ku kv it ke kw kx ix ki ky kz jb la bi translated">导入库</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mg"><img src="../Images/e36eb854da46d0cef64c12250237599c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R2cM3paIA25hHIXyam1Vgg.jpeg"/></div></div></figure><ul class=""><li id="f737" class="ls lt hi jr b js jt jw jx ka lu ke lv ki lw km lx ly lz ma bi translated">Pandas库用于数据操作和清理数据集的不一致性。</li><li id="3b75" class="ls lt hi jr b js mb jw mc ka md ke me ki mf km lx ly lz ma bi translated">使用了叶库来创建热图。</li><li id="7656" class="ls lt hi jr b js mb jw mc ka md ke me ki mf km lx ly lz ma bi translated">Geopandas对于解决地理信息中的一些问题是必要的。</li></ul><h2 id="3a5b" class="kn ig hi bd ih ko kp kq il kr ks kt ip ka ku kv it ke kw kx ix ki ky kz jb la bi translated">数据准备</h2><p id="4c1c" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">首先，我们将从纽约开放数据网站下载的CSV文件中创建一个数据帧，并将它赋给一个名为“prisoes”的变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/a13041e760bc6fe385e66ff7c8c10d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p8QXADe4haZsL49QEZGwXw.jpeg"/></div></div></figure><p id="99c5" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">让我们检查一下数据帧:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/48de9223ad1716f1eac5c4467178700a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l-yHlADPPxO3-Zb7gMg3Fw.jpeg"/></div></div></figure><p id="822f" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">正如我们所看到的，逮捕被归类在OFNS_DESC一栏。我们将很快更好地检查它。但是首先，我们需要使用下面的代码检查dataframe上是否有空值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/3406f753ad3b5fda912068210baae17a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CaHu28eafFC5cDwpKeCbLQ.png"/></div></div></figure><p id="3efe" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">我发现了一些丢失的值，所以我们可以使用<em class="mk"> dropna </em>(红色箭头)函数从dataframe中删除这些行。有时，如果我们有更多的缺失值，最好使用其他技术来处理，但是因为这不是本教程的主题，所以让我们从最简单的解决方案开始。</p><p id="5cec" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">现在让我们检查OFNS_DESC专栏。我们希望在这个练习中只使用抢劫逮捕，所以我们需要。<em class="mk"> loc </em>功能选择这些行。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/0e07115165d4dace3ce338e149de2c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O95fVRe0M1yFHhMZDkWRqw.jpeg"/></div></div></figure><p id="ce9b" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">你可以看到逮捕的日期是按年月日详细记录的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/6421b45b0696a652c9b741cac1660b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*04bhwvtGex91pxWH_YxRdw.png"/></div></div></figure><p id="b2cf" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">在这个练习中，我们需要年份和月份。因此，我们必须提取这些信息，并将其放在各自的列中。我们还需要月份的信函格式以及月份和年份的列。我们需要它来创建索引，该索引将显示在热图中的时间滑块上。</p><p id="23c8" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">红色箭头表示年份和月份代码，绿色箭头表示索引事项代码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/734d57579df45d8019bc66b3d9fb5926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aiphu9lFx-CKJ82giJMkNA.jpeg"/></div></div></figure><p id="956d" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">之后，我使用了一个<em class="mk"> groupby </em>函数来检查这些年来的出现次数。我发现了一些不一致的地方，2007年和2008年有少量的逮捕。可能有一些丢失的寄存器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/1677530d11c7f6a86eb795f3cf9b53f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q1mt_1npFSTxBJfzbjtIFw.png"/></div></div></figure><p id="3187" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">为了解决这个问题，我决定从2009年工作到2019年。并为这些时期创造了另一个变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/3f509e6008e1bf8b8d86660da319a03c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BuRQ0M231A6zkv3dVoe0IQ.jpeg"/></div></div></figure><h1 id="6bb4" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">随时间变化的热图</h1><p id="2f5a" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">为了创建映射，首先我们需要用下面的代码行创建ou索引列和我们的索引列表:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/734d57579df45d8019bc66b3d9fb5926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aiphu9lFx-CKJ82giJMkNA.jpeg"/></div></div></figure><p id="0761" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">索引列表将如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mo"><img src="../Images/02becd5ea88ae5ac2210eea62e87e5d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*QQHho95PBLKJtymbw_uKwg.png"/></div></figure><p id="e04a" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">现在，我们需要创建一个名为“weight”的列，在这里我们将按地点添加这些年的发生次数。我们将把坐标和这些重量添加到一个按年份排序的列表中。最后，这个列表允许创建地图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mp"><img src="../Images/fd7ee27875f1ecf6c6092c7b3efe15dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sP-V83gwuVljZyTKl8UZvA.jpeg"/></div></div></figure><h2 id="6c36" class="kn ig hi bd ih ko kp kq il kr ks kt ip ka ku kv it ke kw kx ix ki ky kz jb la bi translated">现在是我们期待的时刻…</h2><p id="b29b" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">现在我们有了列表，我们终于可以分两步制作我们的交互式地图了。首先，我们必须创建一个带有一些参数的底图，如起始位置、起始缩放和样式。之后，我们创建热图并添加参数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/4d907dded3b985cd6e7ff4540d8d941a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Amp_zfhhVTf916RpzNynw.jpeg"/></div></div></figure><p id="a7bb" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">PS:有几个瓷砖选项，您可以在下面的链接中找到一些示例:</p><div class="lg lh ez fb li lj"><a href="https://deparkes.co.uk/2016/06/10/folium-map-tiles/" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab dw"><div class="ll ab lm cl cj ln"><h2 class="bd hj fi z dy lo ea eb lp ed ef hh bi translated">树叶地图切片-分离</h2><div class="lq l"><h3 class="bd b fi z dy lo ea eb lp ed ef dx translated">使用不同的地图分块是更改或改善地图外观的好方法。这篇文章向你展示了如何…</h3></div><div class="lr l"><p class="bd b fp z dy lo ea eb lp ed ef dx translated">deparkes.co.uk</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv jn lj"/></div></div></a></div><h2 id="d53f" class="kn ig hi bd ih ko kp kq il kr ks kt ip ka ku kv it ke kw kx ix ki ky kz jb la bi translated">现在让我们检查一下热图</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mw"><img src="../Images/6ece6adbb4ceee4368995147ea0d9af5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g13w-qVXlpiZgorLQhB7cw.jpeg"/></div></div></figure><p id="e8f4" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">好的，我们有我们的地图，但是…如果你注意的话，你会发现在几个月中有一些地点在纽约市之外。这表明坐标列存在一些问题。但是不用担心，有了Geopandas，很容易修复它</p><h1 id="15f3" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">修复坐标错误</h1><p id="8b82" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">要过滤纽约市边界内的坐标，我们需要从纽约市形状文件中获取这些边界，该文件可在以下链接中找到:</p><div class="lg lh ez fb li lj"><a href="https://www1.nyc.gov/site/planning/data-maps/open-data/dwn-nynta.page" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab dw"><div class="ll ab lm cl cj ln"><h2 class="bd hj fi z dy lo ea eb lp ed ef hh bi translated">邻域制表区域(以前称为“邻域投影区域”)</h2><div class="lq l"><h3 class="bd b fi z dy lo ea eb lp ed ef dx translated">邻里制表区(NTAs)是为了在一个小区域水平上预测人口而创建的，从2000年到2030年…</h3></div><div class="lr l"><p class="bd b fp z dy lo ea eb lp ed ef dx translated">www1.nyc.gov</p></div></div></div></a></div><p id="867f" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">现在我们需要Geopandas来读取shapefile，将其转换为地理数据框架。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mx"><img src="../Images/6e2669e7b4a4bc6ea7cbf1b7280a8c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vhp65iDdGm6_FFOenxaiiA.jpeg"/></div></div></figure><p id="bf8b" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">现在我们有了处理地理配准问题的工具，因此必须使用Geopandas中的叠加功能将我们的抢劫地理数据框架分成两个新的地理数据框架，并考虑抢劫数据集和NYC shapefile之间的空间关系。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mx"><img src="../Images/4349f1f3a1e827a3655b9158d5acb5b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gxBo6PMoHbppS8NZ-eM7Uw.jpeg"/></div></div></figure><p id="9654" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">如你所见，我们发现了96个问题。因此，对于本例，我们不考虑then，我们可以只保留<em class="mk">交集</em>数据集。</p><h2 id="2f50" class="kn ig hi bd ih ko kp kq il kr ks kt ip ka ku kv it ke kw kx ix ki ky kz jb la bi translated">PS:在我的项目中，这种地理参考问题很常见。在商业项目中，我强烈建议在数据准备步骤中处理这个问题。</h2><p id="9534" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">最后，我们需要使用交集数据集重复该过程来创建热图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/6249098c3b9145d1c8a93a8b62c4098b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ldX2CLXWo7HGUHGTkcnDjw.png"/></div></div></figure><h1 id="7185" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">最终意见</h1><p id="9029" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">我认为这篇文章的想法并不是要深入到纽约市逮捕的数据分析方面。这个想法更多的是激发读者去享受这个工具，自己获得洞察力，重现和改进这个方法。</p><h2 id="adf6" class="kn ig hi bd ih ko kp kq il kr ks kt ip ka ku kv it ke kw kx ix ki ky kz jb la bi translated">你可以在我的Github查看结果:</h2><p id="55c2" class="pw-post-body-paragraph jp jq hi jr b js lb ju jv jw lc jy jz ka ld kc kd ke le kg kh ki lf kk kl km hb bi translated">https://eduardovirtuoso.github.io/Testes_Folium/<a class="ae my" href="https://eduardovirtuoso.github.io/Testes_Folium/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>