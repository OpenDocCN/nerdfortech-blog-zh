<html>
<head>
<title>IOS development Swift Structs vs. Classes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IOS开发Swift结构与类</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/swift-structs-vs-classes-f2014da7a20f?source=collection_archive---------8-----------------------#2021-08-06">https://medium.com/nerd-for-tech/swift-structs-vs-classes-f2014da7a20f?source=collection_archive---------8-----------------------#2021-08-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c72db03a67cdb9b145b0d87da9125c70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVFzAEb3rBhgMadg_okLkg@2x.png"/></div></div></figure><p id="34b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">班级示例</strong></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="2e2b" class="jx jy hi jt b fi jz ka l kb kc">import foundation</span><span id="244d" class="jx jy hi jt b fi kd ka l kb kc">class ClassSuperhero</span><span id="d778" class="jx jy hi jt b fi kd ka l kb kc">{</span><span id="a8b9" class="jx jy hi jt b fi kd ka l kb kc">var name : String</span><span id="2efc" class="jx jy hi jt b fi kd ka l kb kc">var universe : String</span><span id="b87b" class="jx jy hi jt b fi kd ka l kb kc">init(name: String , universe:String)</span><span id="81f4" class="jx jy hi jt b fi kd ka l kb kc">{</span><span id="4b44" class="jx jy hi jt b fi kd ka l kb kc">self.name = name</span><span id="6814" class="jx jy hi jt b fi kd ka l kb kc">self.universe = universe</span><span id="16ea" class="jx jy hi jt b fi kd ka l kb kc">}</span><span id="6342" class="jx jy hi jt b fi kd ka l kb kc">}</span><span id="6776" class="jx jy hi jt b fi kd ka l kb kc">//let hero = ClassSuperhero(name:"Iron Man" , universe :</span><span id="d21e" class="jx jy hi jt b fi kd ka l kb kc">"Marvel")</span></pre><p id="9785" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">swift编译器不允许类、结构和枚举具有相同的名称。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="de18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结构示例</strong></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="10dd" class="jx jy hi jt b fi jz ka l kb kc">import Foundation</span><span id="48a2" class="jx jy hi jt b fi kd ka l kb kc">struct StructSuperhero</span><span id="8224" class="jx jy hi jt b fi kd ka l kb kc">{</span><span id="9e4c" class="jx jy hi jt b fi kd ka l kb kc">var name : String</span><span id="bc59" class="jx jy hi jt b fi kd ka l kb kc">var universe : String</span><span id="709a" class="jx jy hi jt b fi kd ka l kb kc">func revereseName1()-&gt;String</span><span id="6cef" class="jx jy hi jt b fi kd ka l kb kc">{</span><span id="08aa" class="jx jy hi jt b fi kd ka l kb kc">// self.name.reversed() : this will return a collection</span><span id="58bb" class="jx jy hi jt b fi kd ka l kb kc">not a string</span><span id="ab4d" class="jx jy hi jt b fi kd ka l kb kc">return String(self.name.reversed())</span><span id="7202" class="jx jy hi jt b fi kd ka l kb kc">}//this function will do good</span><span id="2256" class="jx jy hi jt b fi kd ka l kb kc">func revereseName2()</span><span id="beaf" class="jx jy hi jt b fi kd ka l kb kc">{</span><span id="9778" class="jx jy hi jt b fi kd ka l kb kc">self.name = self.name.reversed()</span><span id="8534" class="jx jy hi jt b fi kd ka l kb kc">//this will give us an error because we are trying to</span><span id="f548" class="jx jy hi jt b fi kd ka l kb kc">change on of the struct's properties.</span><span id="2d28" class="jx jy hi jt b fi kd ka l kb kc">//so we should use the mutating keyword</span><span id="27ba" class="jx jy hi jt b fi kd ka l kb kc">}</span><span id="8c20" class="jx jy hi jt b fi kd ka l kb kc">mutating func revereseName2()</span><span id="dac6" class="jx jy hi jt b fi kd ka l kb kc">{</span><span id="1251" class="jx jy hi jt b fi kd ka l kb kc">self.name = self.name.reversed()</span><span id="4f6e" class="jx jy hi jt b fi kd ka l kb kc">}</span><span id="6680" class="jx jy hi jt b fi kd ka l kb kc">}<br/></span></pre><p id="3dc9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">即使我们这里没有初始化器，我们也不会有错误，不像类，因为在结构中我们实际上有一个自由的初始化器。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="5297" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">总管</strong></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="17d6" class="jx jy hi jt b fi jz ka l kb kc">import Foundation</span><span id="204c" class="jx jy hi jt b fi kd ka l kb kc">var hero = ClassSuperHero(name:"Iron Man" , universe :</span><span id="7b0c" class="jx jy hi jt b fi kd ka l kb kc">"Marvel")</span><span id="6fa9" class="jx jy hi jt b fi kd ka l kb kc">var anotherMarvelHero = hero // we can simply make a copy</span><span id="0ccd" class="jx jy hi jt b fi kd ka l kb kc">of instances of classes</span><span id="65db" class="jx jy hi jt b fi kd ka l kb kc">anotherMarvelHero.name = "Hulk"</span><span id="08eb" class="jx jy hi jt b fi kd ka l kb kc">print(hero.name)</span><span id="b657" class="jx jy hi jt b fi kd ka l kb kc">print(anotherMarvelHero.name)</span><span id="ed62" class="jx jy hi jt b fi kd ka l kb kc">//these two lines will both print "Hulk". because classes</span><span id="e565" class="jx jy hi jt b fi kd ka l kb kc">are reference types unlike structs it means now we have to</span><span id="d4ef" class="jx jy hi jt b fi kd ka l kb kc">refrences to the same object.</span><span id="f4a2" class="jx jy hi jt b fi kd ka l kb kc">avengers[0].name = "Thor"</span><span id="1a9d" class="jx jy hi jt b fi kd ka l kb kc">print(hero.name) //prints "Thor"</span><span id="54c2" class="jx jy hi jt b fi kd ka l kb kc">print(anotherMarvelHero.name) //prints "Thor"</span><span id="736b" class="jx jy hi jt b fi kd ka l kb kc">print(avengers[0].name) //prints "Thor"</span></pre><p id="e265" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这可以通过使用结构来解决。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="c9f7" class="jx jy hi jt b fi jz ka l kb kc">var hero = StructSuperHero(name:"Iron Man" , universe :</span><span id="9f87" class="jx jy hi jt b fi kd ka l kb kc">"Marvel")</span><span id="47e0" class="jx jy hi jt b fi kd ka l kb kc">var anotherMarvelHero = hero</span><span id="91af" class="jx jy hi jt b fi kd ka l kb kc">anotherMarvelHero.name = "Hulk"</span><span id="3b16" class="jx jy hi jt b fi kd ka l kb kc">var avengers = [hero , anotherMarvelHero]</span><span id="07a3" class="jx jy hi jt b fi kd ka l kb kc">print(hero.name) //prints "Iron Man"</span><span id="c63d" class="jx jy hi jt b fi kd ka l kb kc">print(anotherMarvelHero.name) //prints "Hulk"</span><span id="10ab" class="jx jy hi jt b fi kd ka l kb kc">//changing the anotherHero's name doesnt effect the hero's</span><span id="36c8" class="jx jy hi jt b fi kd ka l kb kc">name because structs are value types</span><span id="1a4d" class="jx jy hi jt b fi kd ka l kb kc">avengers[0].name = "Thor"</span><span id="db01" class="jx jy hi jt b fi kd ka l kb kc">print(hero.name) //prints "Thor"</span><span id="a19a" class="jx jy hi jt b fi kd ka l kb kc">print(anotherMarvelHero.name) //prints "Hulk"</span><span id="2a9e" class="jx jy hi jt b fi kd ka l kb kc">print(avengers[0].name) //prints "Thor"</span></pre><p id="d602" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽可能使用结构而不是类来避免弄乱代码。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="54c7" class="jx jy hi jt b fi jz ka l kb kc">let constantHero = ClassSuperHero(name:"Iron Man" ,</span><span id="396e" class="jx jy hi jt b fi kd ka l kb kc">universe : "Marvel")</span></pre><p id="1362" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">常量只能赋值一次，并且不能更改。但是下面的代码行没有任何错误。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="2f6d" class="jx jy hi jt b fi jz ka l kb kc">constantHero.name = "Cat Woman"</span></pre><p id="d036" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为名字和宇宙在超级英雄类中被声明为var。当我们试图将constantHero分配给另一个类时，唯一的问题是:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="20bd" class="jx jy hi jt b fi jz ka l kb kc">hero = ClassSuperHero()</span></pre><p id="8363" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是let阻止我们做的事情！但这不是我们想要的。我们使用常量的唯一原因是防止对象的意外变化，这也可以通过使用结构来解决！</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="9f48" class="jx jy hi jt b fi jz ka l kb kc">let constantHero = StructSuperHero(name:"Iron Man" ,</span><span id="e56a" class="jx jy hi jt b fi kd ka l kb kc">universe : "Marvel")</span><span id="b092" class="jx jy hi jt b fi kd ka l kb kc">constantHero.name = "Cat Woman" // this will result in an</span><span id="503b" class="jx jy hi jt b fi kd ka l kb kc">error!</span></pre><p id="6372" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">只有一件事我们必须知道，结构体不能做，那就是不能子类化，我们不能从结构体中获得继承。如果我们需要继承，我们必须使用类！使用swift和objective-c时，我们不能使用结构，因为objective-c中的结构与swift中的结构非常不同！</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="f9d0" class="jx jy hi jt b fi jz ka l kb kc">Struct StructHero : NSObject{}// this will give me an</span><span id="0f8a" class="jx jy hi jt b fi kd ka l kb kc">error!</span></pre><p id="4b8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结论</strong></p><ul class=""><li id="7d4e" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn kq kr ks kt bi translated">结构是一种“值类型”,这意味着无论何时使用它，它都会被复制。</li><li id="efb7" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn kq kr ks kt bi translated">一个类是一个“引用类型”,这意味着对象不被复制，引用被复制，当我们改变它时，我们改变的是同一个底层对象！</li></ul><h2 id="caef" class="jx jy hi bd kz la lb lc ld le lf lg lh jb li lj lk jf ll lm ln jj lo lp lq lr bi translated">结构:</h2><ol class=""><li id="af81" class="kl km hi is b it ls ix lt jb lu jf lv jj lw jn lx kr ks kt bi translated">简单的</li><li id="cfcb" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn lx kr ks kt bi translated">更快(因为它们存储在堆栈中而不是堆中)</li><li id="27d2" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn lx kr ks kt bi translated">深层副本</li><li id="b1f3" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn lx kr ks kt bi translated">真正的不变性</li><li id="b79c" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn lx kr ks kt bi translated">没有内存泄漏</li><li id="19ff" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn lx kr ks kt bi translated">线程安全</li></ol><h2 id="9162" class="jx jy hi bd kz la lb lc ld le lf lg lh jb li lj lk jf ll lm ln jj lo lp lq lr bi translated">类别:</h2><ol class=""><li id="a565" class="kl km hi is b it ls ix lt jb lu jf lv jj lw jn lx kr ks kt bi translated">具有继承性</li><li id="f796" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn lx kr ks kt bi translated">使用objective-c代码iPhone的许多API仍在objective-C中</li></ol><p id="90de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi ly translated">关于这个问题，苹果的最后一句话是:</p><blockquote class="mh mi mj"><p id="c970" class="iq ir mk is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated">每当要创建一个</p><p id="5a1f" class="iq ir mk is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated">自定义对象，只有当您发现</p><p id="5464" class="iq ir mk is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated">实际上需要继承或者需要使用objective-c代码！</p><p id="129d" class="iq ir mk is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated">从结构开始，只在需要的时候上升，就像访问级别一样！</p></blockquote></div></div>    
</body>
</html>