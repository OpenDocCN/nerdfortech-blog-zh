<html>
<head>
<title>Integrating MODFLOW, ModelMuse and Fortran</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成 MODFLOW、ModelMuse 和 Fortran</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/integrating-modflow-modelmuse-and-fortran-81c961975b5d?source=collection_archive---------2-----------------------#2021-01-28">https://medium.com/nerd-for-tech/integrating-modflow-modelmuse-and-fortran-81c961975b5d?source=collection_archive---------2-----------------------#2021-01-28</a></blockquote><div><div class="dt gx gy gz ha hb"/><div class="hc hd he hf hg"><div class=""/><div class="ig ih fa fc ii ij"><a href="https://github.com/aswinvk28/modflow_fortran" rel="noopener  ugc nofollow" target="_blank"><div class="ik ab dx"><div class="il ab im cl cj in"><h2 class="bd hk fj z dz io eb ec ip ee eg hi bi translated">aswinvk28/modflow_fortran</h2><div class="iq l"><h3 class="bd b fj z dz io eb ec ip ee eg dy translated">docker-compose up-d-build docker exec-it modflow _ fortran/bin/bash nonprivuser @ d6ba ECA 63141:/home/project $ gfortran…</h3></div><div class="ir l"><p class="bd b fq z dz io eb ec ip ee eg dy translated">github.com</p></div></div><div class="is l"><div class="it l iu iv iw is ix iy ij"/></div></div></a></div><h2 id="731b" class="iz ja hj bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">目标:</h2><p id="3fa3" class="pw-post-body-paragraph jx jy hj jz b ka kb kc kd ke kf kg kh jk ki kj kk jo kl km kn js ko kp kq kr hc bi translated">使用<a class="ae ks" href="https://www.usgs.gov/software/modelmuse-a-graphical-user-interface-groundwater-models" rel="noopener ugc nofollow" target="_blank"><strong class="jz hk">Model muse</strong></a><strong class="jz hk"/>创建<a class="ae ks" href="https://www.usgs.gov/software/modflow-6-usgs-modular-hydrologic-model" rel="noopener ugc nofollow" target="_blank"><strong class="jz hk"/></a><strong class="jz hk"/>模型，并使用 Fortran 获取仿真数据表。</p><div class="kt ku kv kw fe ab cb"><figure class="kx ky kz la lb lc ld paragraph-image"><img src="../Images/d529684092facb53c6b4c7ed19eafc53.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*Yiygv2OwwD4oq-Blyou7uA.png"/></figure><figure class="kx ky lf la lb lc ld paragraph-image"><img src="../Images/e5382426f50769b4a1ec544b516a179a.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*Ry3qER5uHP_idzYVJeEzVg.png"/></figure></div><figure class="kt ku kv kw fe ky es et paragraph-image"><div class="es et lg"><img src="../Images/27448f59af61d4b9f2c686ef113771cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*S1uzdHxP66WdjCVI5SIZWw.png"/></div></figure><h2 id="e206" class="iz ja hj bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated"><strong class="ak">T13】背景:T15】</strong></h2><p id="3014" class="pw-post-body-paragraph jx jy hj jz b ka kb kc kd ke kf kg kh jk ki kj kk jo kl km kn js ko kp kq kr hc bi translated"><a class="ae ks" href="https://www.quora.com/What-are-the-differences-between-aquifer-aquiclude-aquitard-aquifuge" rel="noopener ugc nofollow" target="_blank"> <strong class="jz hk"> <em class="li">解释各层差异</em> </strong> </a></p><p id="f746" class="pw-post-body-paragraph jx jy hj jz b ka lj kc kd ke lk kg kh jk ll kj kk jo lm km kn js ln kp kq kr hc bi translated">定义了 5 层:</p><ul class=""><li id="3f70" class="lo lp hj jz b ka lj ke lk jk lq jo lr js ls kr lt lu lv lw bi translated">上层 _ <a class="ae ks" href="https://en.wikipedia.org/wiki/Aquifer" rel="noopener ugc nofollow" target="_blank">含水层</a></li><li id="7657" class="lo lp hj jz b ka lx ke ly jk lz jo ma js mb kr lt lu lv lw bi translated">上层 _ 弱透水层</li><li id="e8cf" class="lo lp hj jz b ka lx ke ly jk lz jo ma js mb kr lt lu lv lw bi translated">中层含水层</li><li id="de25" class="lo lp hj jz b ka lx ke ly jk lz jo ma js mb kr lt lu lv lw bi translated">下 _ 弱透水层</li><li id="d730" class="lo lp hj jz b ka lx ke ly jk lz jo ma js mb kr lt lu lv lw bi translated">下层含水层</li></ul><p id="337a" class="pw-post-body-paragraph jx jy hj jz b ka lj kc kd ke lk kg kh jk ll kj kk jo lm km kn js ln kp kq kr hc bi translated"><em class="li">泵送率= -5 的一系列井已经在这些层中定义，这些层将保持水。从 200 处的上层含水层到-400 处的最底层含水层，这些层被放置在特定的间隙中。</em></p><p id="29d6" class="pw-post-body-paragraph jx jy hj jz b ka lj kc kd ke lk kg kh jk ll kj kk jo lm km kn js ln kp kq kr hc bi translated"><em class="li">排水管已从外部模型导入，等高线反映了其布局。</em></p><ul class=""><li id="72ae" class="lo lp hj jz b ka lj ke lk jk lq jo lr js ls kr lt lu lv lw bi translated"><em class="li">显示为蓝色的是油井</em></li><li id="fbd2" class="lo lp hj jz b ka lx ke ly jk lz jo ma js mb kr lt lu lv lw bi translated"><em class="li">显示为浅橙色或粉红色的是排水管</em></li></ul><h2 id="8b15" class="iz ja hj bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated"><strong class="ak"> <em class="lh">编程:</em> </strong></h2><figure class="kt ku kv kw fe ky es et paragraph-image"><div class="es et mc"><img src="../Images/efa822118edc13cd3789fba602bba16a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*vkwgSdOyx1--gxM-zgM8Dw.png"/></div><figcaption class="md me eu es et mf mg bd b be z dy translated"><strong class="bd jb"> ModelMuse 屏幕</strong></figcaption></figure><p id="77c4" class="pw-post-body-paragraph jx jy hj jz b ka lj kc kd ke lk kg kh jk ll kj kk jo lm km kn js ln kp kq kr hc bi translated">上面给出的是井、<a class="ae ks" href="https://www.hatarilabs.com/s/ExampleProblemModflowModelMuse.rar" rel="noopener ugc nofollow" target="_blank"><strong class="jz hk"/></a><strong class="jz hk"/>和层的剖面图。<a class="ae ks" href="https://www.usgs.gov/software/modelmuse-a-graphical-user-interface-groundwater-models" rel="noopener ugc nofollow" target="_blank"> <strong class="jz hk"> ModelMuse </strong> </a>后，用水流从左到右、从上到下模拟等高线。所有<a class="ae ks" href="https://www.usgs.gov/software/modelmuse-a-graphical-user-interface-groundwater-models" rel="noopener ugc nofollow" target="_blank"> <strong class="jz hk">型号 Muse </strong> </a> <strong class="jz hk"> </strong>型号都有。gpt 扩展。他们最终被模拟成。nam 扩展 Fortran 模型流模型。</p><blockquote class="mh"><p id="5440" class="mi mj hj bd mk ml mm mn mo mp mq kr dy translated">ModFlow mf6 可执行文件执行 mfsim.nam 扩展以生成一系列模拟值。</p></blockquote><h2 id="e9e4" class="iz ja hj bd jb jc mr je jf jg ms ji jj jk mt jm jn jo mu jq jr js mv ju jv jw bi translated"><strong class="ak">编译</strong> <a class="ae ks" href="https://www.usgs.gov/software/modflow-6-usgs-modular-hydrologic-model" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> MODFLOW </strong> </a> <strong class="ak">从</strong> <a class="ae ks" href="https://www.usgs.gov/software/modelmuse-a-graphical-user-interface-groundwater-models" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> USGS </strong> </a></h2><blockquote class="mw mx my"><p id="163a" class="jx jy li jz b ka lj kc kd ke lk kg kh mz ll kj kk na lm km kn nb ln kp kq kr hc bi translated"><strong class="jz hk"> git 克隆</strong><a class="ae ks" href="https://github.com/aswinvk28/modflow_fortran" rel="noopener ugc nofollow" target="_blank"><strong class="jz hk">https://github.com/aswinvk28/modflow_fortran</strong></a></p></blockquote><pre class="kt ku kv kw fe nc nd ne nf aw ng bi"><span id="da1e" class="iz ja hj nd b fj nh ni l nj nk"><strong class="nd hk">docker-compose up -d --build</strong><br/><br/><strong class="nd hk">docker exec -it modflow_fortran /bin/bash</strong></span></pre><h2 id="a1f3" class="iz ja hj bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">在 Fortran 中执行 MODFLOW</h2><pre class="kt ku kv kw fe nc nd ne nf aw ng bi"><span id="861d" class="iz ja hj nd b fj nh ni l nj nk"><strong class="nd hk">docker exec -it modflow_fortran /home/nonprivuser/mf6.2.0/mf6 {}.nam</strong></span></pre><h2 id="6b41" class="iz ja hj bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">从 Docker Box 编译 Fortran</h2><pre class="kt ku kv kw fe nc nd ne nf aw ng bi"><span id="9c29" class="iz ja hj nd b fj nh ni l nj nk"><strong class="nd hk">nonprivuser@d6baeca63141:/home/project$ gfortran -o hello_world hello_world.f90</strong><br/><strong class="nd hk">nonprivuser@d6baeca63141:/home/project$ ./hello_world</strong><br/><strong class="nd hk">output:<br/> hello from GCC version 7.5.0</strong></span></pre><h2 id="6abc" class="iz ja hj bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">使用共数组编译 Fortran</h2><pre class="kt ku kv kw fe nc nd ne nf aw ng bi"><span id="15cb" class="iz ja hj nd b fj nh ni l nj nk"><strong class="nd hk">gfortran -fcoarray=lib coarray_hello.f90 -lcaf_mpi<br/>./coarray_hello</strong><br/><strong class="nd hk">output: <br/> number of Fortran coarray images:           1<br/> Process            1<br/> Elapsed wall clock time   4.1199999999999999E-005  seconds.</strong></span></pre></div></div>    
</body>
</html>