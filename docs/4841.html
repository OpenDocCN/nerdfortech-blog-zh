<html>
<head>
<title>Wall jumping | Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跳墙|团结</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/wall-jumping-unity-adba4072a64c?source=collection_archive---------0-----------------------#2021-08-10">https://medium.com/nerd-for-tech/wall-jumping-unity-adba4072a64c?source=collection_archive---------0-----------------------#2021-08-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="3e55" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">统一指南</h2><div class=""/><div class=""><h2 id="e124" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">关于如何在 Unity 中实现跳墙机制的快速指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/f8cc21a1c3b2cc5a1e886760c6dc811e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*oU4xzRg0trNUmzEBAYjYaw.gif"/></div></div></figure><p id="db8c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">目标</strong>:实现一个跳墙机制，让玩家能够在 Unity 平台游戏中到达更高的地方。</p><p id="a59b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一篇文章中，我介绍了<a class="ae ko" rel="noopener" href="/nerd-for-tech/implementing-an-elevator-unity-2e2f5ad0514f">如何用 Unity </a>实现电梯。现在，是时候实现一个跳墙机制，让玩家在我们的平台游戏中自己到达一个新的区域。</p><p id="c7ef" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果你还没有看到我创建了一个基于物理的角色控制器的旧帖子，那么我强烈建议你在实现跳墙机制之前检查一下:</p><div class="kp kq ez fb kr ks"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/creating-a-physics-based-character-controller-unity-6c9f44473526"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hs fi z dy kx ea eb ky ed ef hr bi translated">创建基于物理的角色控制器| Unity</h2><div class="kz l"><h3 class="bd b fi z dy kx ea eb ky ed ef dx translated">关于如何使用 Unity 创建基于物理的角色控制器的快速指南</h3></div><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">medium.com</p></div></div><div class="lb l"><div class="lc l ld le lf lb lg jq ks"/></div></div></a></div><div class="kp kq ez fb kr ks"><a rel="noopener follow" target="_blank" href="/nerd-for-tech/implementing-a-double-jump-unity-87a1e55e4e72"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hs fi z dy kx ea eb ky ed ef hr bi translated">实现双跳|统一</h2><div class="kz l"><h3 class="bd b fi z dy kx ea eb ky ed ef dx translated">关于如何为 Unity 玩家实现双跳的快速指南</h3></div><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">medium.com</p></div></div><div class="lb l"><div class="lh l ld le lf lb lg jq ks"/></div></div></a></div><h1 id="5877" class="li lj hi bd lk ll lm ln lo lp lq lr ls ix lt iy lu ja lv jb lw jd lx je ly lz bi translated">当前阶段</h1><p id="5086" class="pw-post-body-paragraph js jt hi ju b jv ma is jx jy mb iv ka kb mc kd ke kf md kh ki kj me kl km kn hb bi translated">为了实现跳墙机制，我们将使用下一个阶段:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/96193a25c45900c68c6fbf3272d0c7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1_MeD7jHLM802UGnmG5zA.png"/></div></div></figure><p id="6344" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在舞台上，我们有几个经过修改的立方体来代表一个有墙的狭窄空间，玩家必须使用跳墙机制才能到达目的地:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/2a71b50909c493f4bf473b37a57da066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w7caBIYA5GPkR49DGagv7Q.png"/></div></div></figure><h1 id="fd0b" class="li lj hi bd lk ll lm ln lo lp lq lr ls ix lt iy lu ja lv jb lw jd lx je ly lz bi translated">实现跳墙机制</h1><p id="8320" class="pw-post-body-paragraph js jt hi ju b jv ma is jx jy mb iv ka kb mc kd ke kf md kh ki kj me kl km kn hb bi translated">因此，为了实现跳墙机制，让我们从用<strong class="ju hs"> <em class="mf">墙</em> </strong>标签标记各自的游戏对象开始:</p><div class="jh ji jj jk fd ab cb"><figure class="mg jl mh mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/ba10ad70c15cf14f23f559499fb91f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*CO53KOZ7e-QgYSQtcMsAvA.gif"/></div></figure><figure class="mg jl mm mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><img src="../Images/6118322900f4be8a880f0ec293ced555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/1*VKM9a51xL9cwJFa9x0hmCw.gif"/></div><figcaption class="mn mo et er es mp mq bd b be z dx mr di ms mt translated">这样，我们就能够识别玩家何时撞上了墙，从而实现双跳。</figcaption></figure></div><p id="ab16" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然后，让我们打开播放器脚本并创建一对新变量:</p><ul class=""><li id="36e6" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">墙会跳吗</li></ul><p id="643d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这个变量将存储一个布尔值，以表明玩家是否能够执行跳墙机制。</p><ul class=""><li id="12c7" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">壁法线</li></ul><p id="d91b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">该变量将存储<strong class="ju hs"> Vector3 </strong>值，该值将定义与玩家试图跳墙时接触的墙面法线相同的方向。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nd"><img src="../Images/cbf08068bc2e322a2645496272ce0577.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*bDIShl6J1JOi5NxPJiWhkA.png"/></div></figure><p id="5af3" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，让我们使用<strong class="ju hs">OnControllerColliderHit</strong>方法来检测玩家的角色控制器何时撞击另一个碰撞器。这样我们就能够识别玩家何时触墙，并采取相应的行动来启用跳墙机制。</p><p id="66e1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，为了做到这一点，让我们检查角色控制器组件是否没有接触地面，以及碰撞中的碰撞体是否属于一面墙。如果是这种情况，让我们从击中中保存法线，并设置跳墙机制为启用:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ne"><img src="../Images/582cdbcdba41fd2012f5a8b6347a9a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKFVi6gVBRv4FwKHZq_8dw.png"/></div></div></figure><p id="3f98" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果您想了解更多关于<strong class="ju hs">OnControllerColliderHit</strong>方法的信息，您可以访问 Unity 文档:</p><div class="kp kq ez fb kr ks"><a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.OnControllerColliderHit.html" rel="noopener  ugc nofollow" target="_blank"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hs fi z dy kx ea eb ky ed ef hr bi translated">单一行为。OnControllerColliderHit(控制器碰撞)</h2><div class="kz l"><h3 class="bd b fi z dy kx ea eb ky ed ef dx translated">这个脚本使用 UnityEngine 推送角色接触的所有刚体；使用系统。收藏；公共课…</h3></div><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">docs.unity3d.com</p></div></div><div class="lb l"><div class="nf l ld le lf lb lg jq ks"/></div></div></a></div><p id="f257" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">现在，为了处理跳墙机制，让我们转到<strong class="ju hs">更新</strong>方法并执行下一步:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ng"><img src="../Images/73841f103ae9001c0409955a08e83741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1_VzxM86HWLn1XRp_k8JDQ.png"/></div></div></figure><p id="b280" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果玩家接触地面→</p><ul class=""><li id="4bd1" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">计算影响玩家移动的方向和速度值。</li><li id="dd25" class="mu mv hi ju b jv nh jy ni kb nj kf nk kj nl kn mz na nb nc bi translated">通过将相应的 bool 值设置为 false 来禁用跳墙机制。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nm"><img src="../Images/3874ba5d1386bf73a2fb2cb5accdac1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DHIwWtWN7NXWT5HkfB8AsA.png"/></div></div></figure><p id="8fca" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果玩家没有接触地面→</p><ul class=""><li id="571c" class="mu mv hi ju b jv jw jy jz kb mw kf mx kj my kn mz na nb nc bi translated">如果按下空格键:</li><li id="3eb0" class="mu mv hi ju b jv nh jy ni kb nj kf nk kj nl kn mz na nb nc bi translated">→如果启用了跳墙:</li><li id="7381" class="mu mv hi ju b jv nh jy ni kb nj kf nk kj nl kn mz na nb nc bi translated">→→设置重力冲量为单跳的数值。</li><li id="457f" class="mu mv hi ju b jv nh jy ni kb nj kf nk kj nl kn mz na nb nc bi translated">→→将速度设置为接近法线乘以玩家的速度。</li><li id="7110" class="mu mv hi ju b jv nh jy ni kb nj kf nk kj nl kn mz na nb nc bi translated">→→禁用双人和跳墙力学。</li><li id="39c9" class="mu mv hi ju b jv nh jy ni kb nj kf nk kj nl kn mz na nb nc bi translated">→否则，如果启用，则执行双跳。</li></ul><p id="527f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果我们用 Unity 运行游戏，我们会看到玩家只能在与标记为<strong class="ju hs"> <em class="mf">墙壁</em> </strong>的游戏对象发生碰撞时进行墙壁跳跃:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/ff070a073c4c177d1c11da971abc879e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*r3A6UdDCYelXg9ENG-OJfw.gif"/></div></div></figure><p id="94f2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">就这样，我们用 Unity 为我们的平台游戏实现了一个跳墙机制！:d .我会在下一篇文章中看到你，在那里我将展示如何用 Unity 推动物体来完成一个难题。</p></div><div class="ab cl nn no gp np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="hb hc hd he hf"><blockquote class="nu nv nw"><p id="4311" class="js jt mf ju b jv jw is jx jy jz iv ka nx kc kd ke ny kg kh ki nz kk kl km kn hb bi translated"><em class="hi">如果你想了解我更多，欢迎登陆</em><a class="ae ko" href="https://www.linkedin.com/in/fas444/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hs"><em class="hi">LinkedIn</em></strong></a><strong class="ju hs"><em class="hi"/></strong><em class="hi">或访问我的</em> <a class="ae ko" href="http://fernandoalcasan.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs"> <em class="hi">网站</em> </strong> </a> <em class="hi"> :D </em></p></blockquote></div></div>    
</body>
</html>