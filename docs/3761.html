<html>
<head>
<title>Angular material Data table with form data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有表格数据的角度材料数据表</h1>
<blockquote>原文：<a href="https://medium.com/nerd-for-tech/angular-material-data-table-with-form-data-47f6490603da?source=collection_archive---------0-----------------------#2021-06-23">https://medium.com/nerd-for-tech/angular-material-data-table-with-form-data-47f6490603da?source=collection_archive---------0-----------------------#2021-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/912777f24347c921079b84df2932bae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eVPLK2aadWUZUP3qnL6Wvg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">角度+材料成分+表格+数据表</figcaption></figure><p id="67ed" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Angular Material是一个angular.js UI框架，有完整的材质设计支持。材料组件为功能性网页和web应用程序提供了一致性和吸引力。Angular material table组件以每种优化的方式创建数据丰富的网格，因为它具有完整的特性和各种功能，如排序、分页、展开-折叠、自定义模板。</p></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="db86" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本文中，我们将通过一个示例工作来了解如何用表单数据加载角度材料数据表。对于更多，我们将添加一些基本的操作，如添加，编辑，删除行使用对话框组件的角度材料。对话框弹出布局在屏幕的所有内容之上显示给用户。</p><p id="076a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，在安装angular CLI之后，应该创建一个新的angular项目。</p><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="6771" class="ki kj hi ke b fi kk kl l km kn"># Install Angular CLI<br/>$ npm install -g @angular/cli</span><span id="ae99" class="ki kj hi ke b fi ko kl l km kn"># Create new project<br/>$ ng new project_name</span><span id="e18d" class="ki kj hi ke b fi ko kl l km kn"># Enter project<br/>$ cd project_name</span><span id="818c" class="ki kj hi ke b fi ko kl l km kn"># <!-- -->run the application<br/>$ ng serve --open</span></pre><p id="1c69" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后安装材料包。</p><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="4806" class="ki kj hi ke b fi kk kl l km kn">ng add @angular/material</span></pre><h1 id="e2cf" class="kp kj hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">材料数据表</h1><p id="28fd" class="pw-post-body-paragraph iu iv hi iw b ix lm iz ja jb ln jd je jf lo jh ji jj lp jl jm jn lq jp jq jr hb bi translated">使用<strong class="iw hj"> mat-table </strong>指令添加<strong class="iw hj"> &lt;表&gt; </strong>创建物料数据表。<strong class="iw hj">【数据源】</strong>属性将一组数据传递给数据表。<strong class="iw hj"> ng-container </strong>元素用<strong class="iw hj"> matColumnDef </strong>创建了列。这里<strong class="iw hj"> matColumnDef </strong>在JSON数据对象中被赋予相同的键。<strong class="iw hj"> *matHeaderRowDef </strong>获取我们想要在表格中显示的列的数组。列标题包含在<strong class="iw hj"> *matHeaderCellDef </strong>中。</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="141e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">材料数据表包含三列，即姓名、电子邮件，它们由用户通过材料表单输入来加载，稍后我们将添加一列作为操作来执行基本操作编辑和删除表行。</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="fcc6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">用户属性在名为<strong class="iw hj"> user </strong>的接口中定义。</p><p id="c48f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> columnsToDisplay </strong>字符串数组用于定义数据表的列。数据对象被放入名为<strong class="iw hj"> USER_DATA </strong>的数组中。newUser是一个新用户对象的示例。</p><h1 id="283a" class="kp kj hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">材料表单字段</h1><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="d5fa" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> mat-form-field </strong>用于创建获取用户输入的表单。<strong class="iw hj"> [(ngModel)] </strong>双向绑定，用于将事件从视图发送到组件。在使用<strong class="iw hj">模式</strong>和<strong class="iw hj">必需</strong>关键字创建表单字段时，我使用了角度材料强制字段。这里的模式包括一个正则表达式，用于<strong class="iw hj"> mat-form-field </strong>电子邮件验证。<strong class="iw hj"> mat-raised-button </strong>作为提交按钮，具有<strong class="iw hj"> addUser() </strong> Onclick功能。</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="6418" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当新行到达时，角度材料表不会更新。因此，在添加新的数据行后，material表通过更新dataSource来刷新，而不使用它的实例，如下面的代码行所示。</p><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="8823" class="ki kj hi ke b fi kk kl l km kn">this.myDataArray = […newUsersArray];</span></pre><p id="f7f4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在最新版本的<strong class="iw hj"> Angular Material 11 | 10中，</strong>我们<strong class="iw hj"> </strong>可以在更新一行数据后调用<strong class="iw hj"> renderRows() </strong>方法，如果我们直接使用数组作为源，如下面的代码所示，其中<strong class="iw hj">表</strong>是<strong class="iw hj"> mat-table </strong>的ViewChild。因此我们可以看到模板变量<strong class="iw hj"> #table </strong>已经在创建材料表的HTML模板中定义，我们可以在这里调用renderRows()时使用它。方法。</p><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="4be0" class="ki kj hi ke b fi kk kl l km kn">call table.renderRows()</span></pre><h1 id="6f64" class="kp kj hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">材料数据表-动作列</h1><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="b239" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">“操作”列包含每行的操作按钮，用于删除和编辑特定的行元素。编辑按钮用<strong class="iw hj"> openDialog() </strong> click方法传递行对象(this.user)和<strong class="iw hj"> delete() </strong>按钮用delete click方法传递行对象(this.user)。</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="c868" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">delete函数通过其参数获取特定行的详细信息。然后通过检查电子邮件删除该行。通过安装sweetalert2，用于显示成功警报的角度定制警报。</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="51af" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> openDialog() </strong>方法正在获取<strong class="iw hj"> row_obj </strong>作为要传入<strong class="iw hj"> open() </strong>方法的行对象。使用<strong class="iw hj"> afterClosed() </strong>方法订阅对话框关闭事件。从DialogBoxComponent <strong class="iw hj">发回后关闭()</strong>方法。行对象的用户名由输入到对话框中的名称替换，以便更新。(row_obj.userName=this.name)</p><h1 id="4597" class="kp kj hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">创建对话框组件</h1><p id="d416" class="pw-post-body-paragraph iu iv hi iw b ix lm iz ja jb ln jd je jf lo jh ji jj lp jl jm jn lq jp jq jr hb bi translated">正如上面在编辑行对象和更新用户名中提到的，我使用了材质对话框来接受用户输入。对话框还包含更新和取消按钮。为此，需要一个新的组件。这里我用下面的命令创建了一个新组件DialogBoxComponent。</p><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="73dc" class="ki kj hi ke b fi kk kl l km kn">ng generate component dialog-box</span></pre><p id="c439" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">HTML:</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="3a3a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">组件. ts:</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="3633" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">MAT_DIALOG_DATA从App组件获取openDialog()方法的DATA参数中传递的数据。MatDialogRef对打开的对话框模式执行操作，并用于关闭对话框。</p><p id="effc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我改进了表单、编辑和删除按钮操作，这些操作可以处理更多的字段和验证。我的例子工作的代码可以访问<a class="ae lt" href="https://github.com/Isurie/Angular-material-Data-table-with-form-data.git" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/814443d46955b72efbe902afc7f05f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_CUcIhN6OQoK1SRLC9KdAw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">带有数据表的角材用户表单模板，显示用于更新的对话框。</figcaption></figure></div></div>    
</body>
</html>